## Code of Conduct

This project and the corresponding community is governed by the [JetBrains Open Source and Community Code of Conduct](https://github.com/jetbrains#code-of-conduct).
Please make sure you read it.
<!-- Copyright 2000-2022 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Contributing to the IntelliJ Platform SDK

Please see [page in SDK Documentation](https://plugins.jetbrains.com/docs/intellij/intellij-sdk-docs-original-contributing.html).
# Principles

- [](data_formats.md)
- [](icons_style.md)
- [](layout.md)
    - [](groups_of_controls.md)
- [](mnemonics.md)
- [](platform_theme_colors.md)
- [](typography.md)
- [](validation_errors.md)
# IntelliJ Platform SDK Documentation

[![official JetBrains project](https://jb.gg/badges/official-flat-square.svg)][jb:github]
[![X Follow](https://img.shields.io/badge/follow-%40JBPlatform-1DA1F2?logo=x)][jb:x]
[![Build](https://img.shields.io/github/actions/workflow/status/JetBrains/intellij-sdk-docs/code-samples.yml?branch=main&style=flat-square)][gh:workflow-code-samples]
[![Slack](https://img.shields.io/badge/Slack-%23intellij--platform-blue?style=flat-square&logo=Slack)][jb:slack]

Welcome to the repository for [IntelliJ Platform SDK Documentation](https://plugins.jetbrains.com/docs/intellij/?from=GH-README) site.

> [!TIP]
> The code samples can also be found in the [IntelliJ SDK Code Samples](https://github.com/JetBrains/intellij-sdk-code-samples) mirror repository.

## Feedback

Please report any content inconsistencies, outdated materials, cosmetic issues, and other defects using the channels listed in [Getting Help](https://plugins.jetbrains.com/docs/intellij/getting-help.html).

## Contributing

Please follow the steps outlined in [Contributing](https://plugins.jetbrains.com/docs/intellij/intellij-sdk-docs-original-contributing.html).

[gh:workflow-code-samples]: https://github.com/JetBrains/intellij-sdk-docs/actions/workflows/code-samples.yml

[jb:github]: https://github.com/JetBrains/.github/blob/main/profile/README.md

[jb:slack]: https://plugins.jetbrains.com/slack

[jb:x]: https://x.com/JBPlatform
# Sample [![JetBrains IntelliJ Platform SDK Docs](https://jb.gg/badges/docs.svg)][docs]
*Reference: [Sample Article in IntelliJ SDK Docs][docs:sampleArticle]*

## Quickstart

The Sample implements `com.intellij.sample` Extension Point, which should be explained properly in this Quickstart section.

### Extension Points

| Name                  | Implementation                                    | Extension Point Class |
|-----------------------|---------------------------------------------------|-----------------------|
| `com.intellij.sample` | [SampleExtensionPoint][file:SampleExtensionPoint] | `ExtensionPoint`      |

*Reference: [Plugin Extension Points in IntelliJ SDK Docs][docs:ep]*

### Actions

| ID                                     | Implementation                    | Base Action Class |
|----------------------------------------|-----------------------------------|-------------------|
| `org.intellij.sdk.action.SampleAction` | [SampleAction][file:SampleAction] | `AnAction`        |

*Reference: [Action System in IntelliJ SDK Docs][docs:actions]*

### Listeners

| Name     | Implementation                        | Listener Class |
|----------|---------------------------------------|----------------|
| listener | [SampleListener][file:SampleListener] | `Listener`     |

*Reference: [Plugin Listeners in IntelliJ SDK Docs][docs:listeners]*

[docs]: https://plugins.jetbrains.com/docs/intellij/
[docs:actions]: https://plugins.jetbrains.com/docs/intellij/basic-action-system.html
[docs:ep]: https://plugins.jetbrains.com/docs/intellij/plugin-extensions.html
[docs:listeners]: https://plugins.jetbrains.com/docs/intellij/plugin-listeners.html
[docs:sampleArticle]: https://plugins.jetbrains.com/docs/intellij/sampleArticle.html

[file:SampleExtensionPoint]: ./src/main/java/org/intellij/sdk/sample/SampleExtensionPoint.java
[file:SampleAction]: ./src/main/java/org/intellij/sdk/sample/SampleAction.java
[file:SampleListener]: ./src/main/java/org/intellij/sdk/sample/SampleListener.java
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# UI Kit

<link-summary>IntelliJ Platform UI resources for Figma.</link-summary>

Resources for Figma:

- <a href="https://www.figma.com/community/file/1227732692272811382/int-ui-kit">Int UI Kit</a>
- <a href="https://www.figma.com/community/file/1227729570033544559/int-ui-icons">Int UI Icons</a>

![](intuikit.png){width=706}


<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Window Sizes

<link-summary>Guidelines on choosing the correct size when creating a dialog or a popup</link-summary>

Follow these guidelines to select the correct size when creating a dialog or a popup for IntelliJ-based products.

For simple cases use the [default sizes](Window-sizes.md#default-sizes). When they don't work well, set [minimum sizes for components](Window-sizes.md#minimum-sizes-for-components).

## Default sizes

### Dialog

There are four recommended window sizes for dialogs: **small**, **medium**, **large**, and **extra large**. Select the size depending on the amount of content required to keep the important information visible.

![A preview of recommended window sizes for dialogs: extra small, small, medium, and large](dialog_popup_sizes.png){width="706"}

<note>Users shouldn't be able to make a dialog smaller than the default size.</note>

#### Small

Size: 350×250 px.

Best for: several components that are stacked vertically.

![The Rename dialog with two input fields, two checkboxes, and actions in the dialog footer. The components are stacked vertically in one column](dialog_popup_sizes_extra_small.png){width="706"}

#### Medium

Size: 500×350 px

Best for:
* Multiple components with short labels that are divided into two columns.
* Full-width table with two or three columns.
* Full-width code snippet or an input field with long text.

For example, the <control>Evaluate Expressions</control> dialog has an input field with long text and a tree with code stacked vertically:

![The Evaluate Expressions dialog that has an input field with long text and a tree with code stacked vertically](dialog_popup_sizes_small.png){width="706"}

#### Large

Size: 750×525 px

Best for:
* Full-width table with four or more columns.
* Master-detail layout.
* Two-column layout with a code snippet or an input field with long text in any of the columns.
* Two code snippets or input fields with long texts in a row.
* Two-column layout with an image or a video in any of the columns. In this case, the image or the video takes the most space.

For example, the <control>Run/Debug Configuration</control> dialog has a master-detail layout with a tree in the first column and a list of controls with long texts in the second column:

![The Run/Debug Configuration dialog that has a two-column layout. There is a navigation in the first column and a list of settings in the second column](dialog_popup_sizes_medium.png){width="706"}

#### Extra Large

Size: 1000×700 px

Best for:
* Two-column layout with code snippets or input fields with long texts in both columns.
* Three-or-more-column layout regardless of the content.

For example, the <control>Settings</control> dialog that has three or more columns on multiple pages:

![The Settings dialog that has three or more columns on multiple pages](dialog_popup_sizes_large.png){width="706"}

#### Maximum width and height {id="maximum-width-and-height_dialog"}

Set the dialog's maximum dimensions to match the screen size to prevent resizing beyond the screen bounds.

### Popup

<note>Users shouldn't be able to make a popup smaller than the default size.</note>

#### Action popups

If a popup has a vertical list of actions or options, set the minimum width to 200 px.

The default width and height are adaptable to the content inside if it exceeds the minimum width.

![Insert popup 200 px wide](dialog_popup_sizes_popup_xxs.png){width="706"}

#### Content-rich popups

If a popup has multiple sections and long texts, set the default width to **medium** (500 px) or **large** (750 px). When the default width doesn't work, set the [minimum sizes for components](Window-sizes.md#minimum-sizes-for-components).

Height is adaptable based on the content. If a popup has a scrollable content, set the default height respectively: **medium** (350 px) or **large** (525 px), and use a [scrollbar](scrollbar.md).

<table style="none" border="false">
   <tr>
      <td width="100%">
         <p><control>Medium</control></p>
         <img src="dialog_popup_sizes_popup_adaptive_height.png" alt="Documentation popup 500 px wide" width="706"/>
      </td>
   </tr>
   <tr>
      <td width="100%">
         <p><control>Large</control></p>
         <img src="dialog_popup_sizes_popup_m.png" alt="Search Everywhere popup 750 px wide" width="706"/>
      </td>
   </tr>
</table>

#### Maximum width and height

Set the maximum width and height to 80% of the screen size. Use a [scrollbar](scrollbar.md) if the popup's content exceeds the set dimensions.

### Tool windows

#### Vertical tool window

* Default width: 20% of the application width.
* Minimum size: 200×500&nbsp;px.

#### Horizontal tool window

* Default height: 20% of the application height.
* Minimum size: 500×200&nbsp;px.


For example, the vertical <control>Project</control> tool window and the horizontal <control>Build</control> tool window with minimum sizes in <control>Window</control> mode:

![Vertical Project and horizontal Build tool windows with the default sizes in Window mode](dialog_popup_sizes_tool_window.png){width="706"}


## Minimum sizes for components

When the default sizes are either too big or too small for a window, or the window has a complex layout, add minimum sizes to content inside the window. This will make the content displayed correctly and reduce any potential issues caused by resizing the window.

### How to set the size correctly

1. Select the [control](Window-sizes.md#how-the-content-is-displayed) used to display content.
2. Select the [type of content](Window-sizes.md#types-of-content) used.
3. The minimum size is the biggest size out of the two defined in the previous steps.

#### How the content is displayed

<table style="none" border="false">
   <tr>
      <td width="50%">
         <img src="dialog_popup_sizes_table_cell.png" alt="Example of a table with three cells"/>
      </td>
      <td>
         <p><format style="bold">Table cell</format></p>
         <p>Width: min&nbsp;65&nbsp;px</p>
         <p>Height for the whole table: min&nbsp;120&nbsp;px</p>
         <p>Follow guidelines for <a href="table.md" anchor="sizes">table sizes</a></p>
      </td>
   </tr>
   <tr>
      <td width="50%">
          <img src="dialog_popup_sizes_tree.png" alt="Example of a tree"/>
      </td>
      <td>
         <p><format style="bold">Tree</format></p>
          <p>Width: min 250&nbsp;px</p>
      </td>
   </tr>
   <tr>
      <td width="50%">
          <img src="dialog_popup_sizes_text_area.png" alt="Example of a text area"/>
      </td>
      <td>
          <p><format style="bold">Text area</format></p>
          <p>Width: min&nbsp;270&nbsp;px, max&nbsp;600&nbsp;px</p>
          <p>Height: min&nbsp;55&nbsp;px</p>
          <p>Follow guidelines for <a href="text_area.md" anchor="size-and-placement">text area sizes</a></p>
      </td>
   </tr>
   <tr>
      <td width="50%">
          <img src="dialog_popup_sizes_diagram.png" alt="Example of a diagram"/>
      </td>
      <td>
          <p><format style="bold">Diagram</format></p>
          <p>A container with horizontal and vertical insets with 100&nbsp;px</p>
      </td>
   </tr>
</table>

<note>In any other case, select the width appropriate for the most common values in the component and follow <control>sizes and placement</control> guidelines for <a href="Components.topic">each control</a>.</note>

#### Types of content

<table style="none" border="false">
   <tr>
      <td width="50%">
          <img src="dialog_popup_sizes_class_test_file.png" alt="Examples of a class, test, and file name"/>
      </td>
      <td>
          <p><format style="bold">Class/test/file name</format></p>
          <p>Width: min&nbsp;250&nbsp;px</p>
      </td>
   </tr>
   <tr>
      <td width="50%">
          <img src="dialog_popup_sizes_url_path_fqn.png" alt="Examples of a URL, path, and an FQN for class"/>
      </td>
      <td>
          <p><format style="bold">URL/Path/FQN for class</format></p>
          <p>Width: min&nbsp;350&nbsp;px</p>
      </td>
   </tr>
   <tr>
      <td width="50%">
          <img src="dialog_popup_sizes_class_test_file_url_path_fqn.png" alt="Examples of a class, test, or file name together with a URL, path, or an FQN for class"/>
      </td>
      <td>
          <p><format style="bold">Class/test/file name + URL/Path/FQN for class</format></p>
          <p>Width: min&nbsp;400&nbsp;px</p>
      </td>
   </tr>
   <tr>
      <td width="50%">
          <img src="dialog_popup_sizes_code_snippet.png" alt="Example of a code snippet"/>
      </td>
      <td>
          <p><format style="bold">Code snippet or editor</format></p>
          <p>Width: min&nbsp;400&nbsp;px</p>
          <p>Height (when multiple lines): min&nbsp;120&nbsp;px</p>
      </td>
   </tr>
   <tr>
      <td width="50%">
          <img src="dialog_popup_sizes_standalone_text.png" alt="Example of a paragraph"/>
      </td>
      <td>
          <p><format style="bold">Paragraph or long text</format></p>
          <p>Width: min&nbsp;300&nbsp;px</p>
          <p>Height (when multiple lines): min&nbsp;120&nbsp;px</p>
      </td>
   </tr>
 </table>

#### Example 1

The <control>Rename Inheritors</control> dialog has a table with FQNs. Add 350&nbsp;px as the minimum width for a table column. This will make the dialog wider than the default <control>Medium</control> size (500&nbsp;px) but will show more of FQNs.

<table style="none" border="false">
    <tr>
         <td width="706">
            <format color="369650" style="bold">Correct</format>
            <img src="dialog_popup_sizes_example_1_correct.png" alt="The Rename Inheritors dialog has a minimum width set for each table column"/>
         </td>
    </tr>
    <tr>
         <td width="706">
            <format color="DarkOrange" style="bold">Acceptable</format>
            <img src="dialog_popup_sizes_example_1_acceptable.png" alt="The Rename Inheritors dialog has the Medium size as default"/>
         </td>
    </tr>
</table>

#### Example 2

The <control>Settings</control> dialog has the default <control>extra large</control> size 1000&nbsp;px. In <control>Code Style | Java</control> set 400&nbsp;px as the minimum width of the code editor. This will make the dialog wider but will show more code.

<table style="none" border="false">
    <tr>
         <td width="706">
            <format color="369650" style="bold">Correct</format>
            <img src="dialog_popup_sizes_example_2_correct.png" alt="The code snippet in the Code Style settings for Java is 400 px, making the dialog wider"/>
         </td>
    </tr>
    <tr>
         <td width="706">
            <format color="DarkOrange" style="bold">Acceptable</format>
            <img src="dialog_popup_sizes_example_2_acceptable.png" alt="Settings dialog is 1000 px wide"/>
         </td>
    </tr>
</table>

#### Example 3

Instead of setting a default size for the <control>Diagram</control> popup, add 100&nbsp;px horizontal and vertical insets inside it and make the width and height adaptive to its content. This will help small diagrams be more noticeable and make the Diagram popup of any size easier to read.

<table style="none" border="false">
    <tr>
        <td width="706">
            <format color="369650" style="bold">Correct</format>
            <img src="dialog_popup_sizes_example_3_correct.png" alt="Diagram popup has 100 px insets from its borders to its content"/>
        </td>
    </tr>
    <tr>
        <td width="706">
            <format color="DarkOrange" style="bold">Acceptable</format>
            <img src="dialog_popup_sizes_example_3_acceptable.png" alt="Diagram popup is set to the default small size"/>
        </td>
    </tr>
</table>

## Empty state

Some components, for example, <control>tables</control>, can have an [empty state](empty_state.md) when there is no content. In this case, the minimum size of a component in both empty and filled states is defined by its filled state.

For example, the size of the <control>Custom Plugin Repository</control> dialog is defined by the minimum size of the table that contains URLs (minimum 350&nbsp;px wide), and not by the size of the smaller empty state:

<table style="none" border="false">
    <tr>
        <td width="706">
            <format color="369650" style="bold">Correct</format>
            <img src="dialog_popup_sizes_empty_state_correct.png" alt="The table in the Custom Plugin Repository dialog has the same sizes in both empty and filled states"/>
        </td>
    </tr>
    <tr>
        <td width="706">
            <format color="E55765" style="bold">Incorrect</format>
            <img src="dialog_popup_sizes_empty_state_incorrect.png" alt="The table in the Custom Plugin Repository dialog has different sizes in the empty and the filled states"/>
        </td>
    </tr>
</table>
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# About This Guide

<link-summary>Introduction and summary overview of contents.</link-summary>

This guide is split into several parts, similar to a textbook.
Each one builds on the content of the previous section, but it is not necessary to read the guide in order.
The [Key Topics](key_topics.md) page aims to link to the pages that are necessary to be able to understand the architecture and get started building plugins.

All source links and reference lists target IntelliJ Platform %ijPlatform%.

> While browsing this guide, you will notice that there are topics that are greyed out.
> Unfortunately, the guide is not complete and contains placeholders for specific topics.
> We are working on increasing the coverage, but if you get stuck due to missing content, please see the [](getting_help.topic) section for details on how to get moving again.
>
> The guide is also [Open Source on GitHub](https://github.com/JetBrains/intellij-sdk-docs), and Pull Requests for new content, corrections or updates are always gratefully received.
> Please see the [Contributing](intellij-sdk-docs-original_CONTRIBUTING.md) page for details.
>
{style="note"}

> See also [](glossary.md) for a handy reference of common terms.
>

#### Plugins

Describes how to create a plugin that can extend the IntelliJ Platform.
Includes details on how to set up the project, register extension points, target specific versions of the IntelliJ Platform, and how to package, deploy, and test your plugins.

#### Base Platform

Describes the foundational layer of the architecture, which provides many features and utilities, such as the component model, the user interface, documents and editors, the virtual file system, settings, threading, and background tasks.
The Base Platform layer mainly comprises the functionality of the IntelliJ Platform that does not target language features or parsing.

#### Project Model

Documents the Project Model, which represents the files and configuration of the currently loaded project, as well as the build system used to build the project.

#### PSI

The Program Structure Interface (PSI) builds the syntactic and semantic models for lots of different file types.
This section describes how to work with the PSI, navigating and manipulating the syntax trees, and also looks at the powerful references system, which allows a syntax tree node to reference an item in the semantic model.
It also details how PSI creates and uses indexes.

#### Features

Describes how to extend and interact with various features that use the PSI layer, such as code completion, navigation, <shortcut>Alt+Enter</shortcut> items, intentions, refactorings, and more.
See also the section on Custom Languages below for language-specific features that are only applicable when adding support for a new language.

#### Testing

Describes the available infrastructure for writing automated tests covering the functionality of plugins.

#### Custom Languages

Plugins frequently extend support for existing languages, such as adding inspections to Java files.
This section describes how to add support to the IntelliJ Platform for a new language that isn't supported by default, creating parsers, syntactic and semantic models, and all the features that build on top.

#### Product Specific

A lot of the functionalities in the IntelliJ Platform are language and product agnostic.
For example, code inspections work the same in Java as they do in Ruby; it is just the syntax trees and semantic information that is different.
This section describes product-specific features, such as specific project model differences and how to target them in a plugin.

#### Custom IDEs

Documents how to use the IntelliJ Platform to create a new, custom IDE, rather than plugins to an existing product, e.g., WebStorm, or Android Studio.

#### Themes

Describes how to create a theme for IntelliJ Platform-based IDEs.
Includes details on how to set up the theme project, customize, build, and publish it on JetBrains Marketplace.

#### Resources

Links to [useful resources](useful_links.md), a [](glossary.md), [](intellij_platform_extension_point_list.md), tips on how to [](explore_api.md) and [](learning_resources.md).

#### API and Compatibility

Information on [](verifying_plugin_compatibility.md) and list of [backwards-incompatible](api_changes_list.md) API changes as well as [notable changes and new features](api_notable.md) in each major release of the IntelliJ Platform.

#### Tooling

Reference and usage guides for commonly used tools like the [](tools_intellij_platform_gradle_plugin.md).

#### UI Guidelines

How to create consistent and usable user interfaces.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<link-summary>Tutorial on creating and grouping actions.</link-summary>

# Actions Tutorial

This tutorial leads you through a series of steps which show how to create, register, and customize custom actions and action groups.
By registering actions, you can add your own menu items, toolbar buttons and keyboard shortcuts to the IDE user interface.
* [Creating Actions](working_with_custom_actions.md)
* [Grouping Actions](grouping_action.md)

The source code for the [`action_basics`](%gh-sdk-samples-master%/action_basics) code sample is used throughout this tutorial.
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Adding New Steps to Project Wizard

<link-summary>Tutorial on adding a new step to a custom project wizard.</link-summary>

This tutorial shows how to add an extra step to the Project Wizard to provide additional project configuration settings.

## Pre-Requirements

Create an empty plugin project.
See the [](creating_plugin_project.md) section for details.

## Register Module Builder

Project configuration settings depend on the project's module type.
Register a new `com.intellij.moduleBuilder` extension point in the <path>[plugin.xml](plugin_configuration_file.md)</path> configuration file.

```xml
<extensions defaultExtensionNs="com.intellij">
  <moduleBuilder
      builderClass="org.intellij.sdk.project.wizard.DemoModuleWizardStep"
      id="DEMO_STEP"
      order="first"/>
</extensions>
```

## Create a Custom Module Builder

Extend [`ModuleBuilder`](%gh-ic%/platform/lang-core/src/com/intellij/ide/util/projectWizard/ModuleBuilder.java) class to provide custom configuration.

```java
public class DemoModuleWizardStep extends ModuleBuilder {
  public void setupRootModel(ModifiableRootModel modifiableRootModel)
      throws ConfigurationException {

  }
}
```

## Define Module Type

Set a module type for the extra wizard step to provide.
In this example, choose an `EMPTY` module type.

```java
public class DemoModuleWizardStep extends ModuleBuilder {
  public void setupRootModel(ModifiableRootModel modifiableRootModel)
      throws ConfigurationException {

  }

  public ModuleType getModuleType() {
    return ModuleType.EMPTY; //or it could be any other module type
  }
}
```

## Design and Implement Wizard Steps

Provide an implementation of a custom UI component to be added to the Wizard.
In this case, leave it as a label.

```java
public class DemoModuleWizardStep extends ModuleBuilder {
  public void setupRootModel(ModifiableRootModel modifiableRootModel)
      throws ConfigurationException {

  }

  public ModuleType getModuleType() {
    return ModuleType.EMPTY;
  }

  @Override
  public ModuleWizardStep[] createWizardSteps(
      @NotNull WizardContext wizardContext,
      @NotNull ModulesProvider modulesProvider) {
    return new ModuleWizardStep[]{new ModuleWizardStep() {
      @Override
      public JComponent getComponent() {
        return new JLabel("Put your content here");
      }

      @Override
      public void updateDataModel() {

      }
    }};
  }
}
```

## Checking UI Appearance

After compiling and running the plugin, create a new project using a source-compiled instance of IntelliJ IDEA.

![New Project](empty_project.png)

Choose an *Empty Module* type, click next, and get to the just added extra step.

![Extra Step](extra_step.png)

Modify and tune the UI component depending on requirements.
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Additional Minor Features

<link-summary>Additional minor features for custom languages.</link-summary>

A number of commonly used minor features are listed in the following format:

_EP: `fully.qualified.extensionPointName`_ — Extension Point Name (must be specified in <path>[plugin.xml](plugin_configuration_file.md)</path>)

_`com.extensionPoint.class`_ _description text_ — Extension Point class/interface to provide functionality

_- Sample 1_ - Sample implementation

> See also [](intellij_platform_extension_point_list.md#langextensionpointsxml) to discover more Language-related Extension Points as well as general guide [](explore_api.md).
>
{title="Locating more Language EPs"}

### Brace Matching

EP: `com.intellij.lang.braceMatcher`

[`PairedBraceMatcher`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/PairedBraceMatcher.java)
returns an array of brace pairs ([`BracePair`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/BracePair.java)) specifying the characters for the opening and closing braces and the lexer token types for these characters.
(In principle, it is possible to return multi-character tokens, like "begin" and "end", as the start and end tokens of a brace pair.
The IDE will match such braces, but the highlighting for such braces will not be entirely correct.)

Certain types of braces can be marked as structural.
Structural braces have higher priority than regular braces: they are matched with each other even if there are unmatched braces of different types between them.
An opening non-structural brace is not matched with a closing one if one of them is inside a pair of matched structural braces and another is outside.
See also [](#recognizing-complex-multi-block-expressions).

#### "Heavy" Brace Matching
<primary-label ref="2022.3"/>

If the brace matching is "too heavy" and should not be executed in [EDT](threading_model.md), implement
[`HeavyBraceHighlighter`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/highlighting/HeavyBraceHighlighter.java)
and register in `com.intellij.heavyBracesHighlighter` extension point.

### Quote Handling

EP: `com.intellij.lang.quoteHandler`

To support <control>Insert pair quote</control> feature, provide [`QuoteHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/QuoteHandler.java).
In most cases, [`SimpleTokenSetQuoteHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/SimpleTokenSetQuoteHandler.java) base implementation will be suitable.

### Comment Code

EP: `com.intellij.lang.commenter`

[`Commenter`](%gh-ic%/platform/core-api/src/com/intellij/lang/Commenter.java) returns the prefix for the line comment, and the prefix and suffix for the block comment if supported by the language.
For more complex logic, use [`SelfManagingCommenter`](%gh-ic%/platform/core-api/src/com/intellij/codeInsight/generation/SelfManagingCommenter.java).

- [`Commenter`](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/PropertiesCommenter.java) for [Properties language plugin](%gh-ic%/plugins/properties)
- [Custom Language Support Tutorial: Commenter](commenter.md)

### Code Folding

EP: `com.intellij.lang.foldingBuilder`

[`FoldingBuilder`](%gh-ic%/platform/core-api/src/com/intellij/lang/folding/FoldingBuilder.java) returns the list of foldable text ranges (as an array of [`FoldingDescriptor`](%gh-ic%/platform/core-api/src/com/intellij/lang/folding/FoldingDescriptor.java) objects), the replacement text which is shown for each range when it is folded, and the default state of each folding region (folded or unfolded).

- [Custom Language Support Tutorial: Folding Builder](folding_builder.md)

### Join Lines

EP: `com.intellij.joinLinesHandler`

[`JoinLinesHandlerDelegate`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/JoinLinesHandlerDelegate.java) allows extending support smart/semantic <ui-path>Edit | Join Lines</ui-path> (e.g., String literal split on multiple lines).

### Smart Enter

EP: `com.intellij.lang.smartEnterProcessor`

[`SmartEnterProcessor`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/smartEnter/SmartEnterProcessor.java) handles <ui-path>Edit | Complete Statement</ui-path> (e.g., autocomplete missing semicolon/parentheses).

### Move Element Left/Right

EP: `com.intellij.moveLeftRightHandler`

Return children of given element from [`MoveElementLeftRightHandler`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/moveLeftRight/MoveElementLeftRightHandler.java) for <ui-path>Code | Move Element Left|Right</ui-path>, e.g., method call parameters.
Alternatively, implement [`PsiListLikeElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiListLikeElement.java) in PSI element.

### Naming Suggestions

EP: `com.intellij.nameSuggestionProvider`

[`NameSuggestionProvider`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/rename/NameSuggestionProvider.java) provides name suggestions for the given element, e.g., for Rename refactoring.

### Semantic Highlight Usages

EP: `com.intellij.highlightUsagesHandlerFactory`

[`HighlightUsagesHandlerFactory`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/highlighting/HighlightUsagesHandlerFactory.java) allows highlighting e.g., Exit Points or Exceptions.
Can be [](indexing_and_psi_stubs.md#DumbAwareAPI) (2024.3+).

### TODO View

[`ParserDefinition.getCommentTokens()`](%gh-ic%/platform/core-api/src/com/intellij/lang/ParserDefinition.java) must return the set of tokens treated as comments to populate the <control>TODO</control> tool window.

#### Additional places

EP: `com.intellij.indexPatternSearch`

Additional places can be provided via [`IndexPatternSearch`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/searches/IndexPatternSearch.java) registered in `com.intellij.indexPatternSearch` extension point.

### Context Info

EP: `com.intellij.declarationRangeHandler`

[`DeclarationRangeHandler`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hint/DeclarationRangeHandler.java) provides <ui-path>View | Context Info</ui-path> for custom languages with structure view implementation based on a [`TreeBasedStructureViewBuilder`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/structureView/TreeBasedStructureViewBuilder.java).

### Spellchecking

Moved to [](spell_checking.md).

### Reference Injection

EP: `com.intellij.referenceInjector`

[`ReferenceInjector`](%gh-ic%/platform/analysis-api/src/com/intellij/psi/injection/ReferenceInjector.java) allows users to inject pre-defined references (e.g., "Encoding", "File Reference") into `PsiLanguageInjectionHost` elements (IntelliLang plugin required).

### Color Preview/Chooser

EP: `com.intellij.colorProvider`

[`ElementColorProvider`](%gh-ic%/platform/lang-api/src/com/intellij/openapi/editor/ElementColorProvider.java) renders gutter icon for an element containing color information.

### File Includes

EP: `com.intellij.include.provider`

[`FileIncludeProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/psi/impl/include/FileIncludeProvider.java) provides information about _include_ statements resolving to files (e.g., `<xi:include>` in XML).
Including/included files can then be obtained via [`FileIncludeManager`](%gh-ic%/platform/lang-api/src/com/intellij/psi/impl/include/FileIncludeManager.java).

### Recognizing Complex Multi-Block Expressions

EP: `com.intellij.codeBlockSupportHandler`

[`CodeBlockSupportHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/highlighting/CodeBlockSupportHandler.java)
allows providing text ranges for more complex code blocks like, e.g., in `if`/`elsif`/`else` blocks.
It is used to highlight markers and keywords if one is under the cursor, and for navigation to the beginning/end of blocks.
See also [](#brace-matching).

### Breadcrumbs

EP: `com.intellij.breadcrumbsInfoProvider`

[`BreadcrumbsProvider`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ui/breadcrumbs/BreadcrumbsProvider.java)
allows for language-specific [breadcrumbs](https://www.jetbrains.com/help/idea/navigating-through-the-source-code.html#editor_breadcrumbs).
[Sticky Lines](https://www.jetbrains.com/help/idea/sticky-lines.html) feature also uses this data.

- [`GroovyBreadcrumbsInfoProvider`](%gh-ic%/plugins/groovy/src/org/jetbrains/plugins/groovy/editor/GroovyBreadcrumbsInfoProvider.kt)

### Plain Text Completion

EP: `com.intelllij.completion.plainTextSymbol`

[`PlainTextSymbolCompletionContributor`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/completion/PlainTextSymbolCompletionContributor.java)
provides a simple way to extract lookup elements from a file so that users have completion available
in, e.g., plain text editors like VCS commit messages.

### Splitting and Joining List Constructs

EP: `com.intellij.listSplitJoinContext`

[`ListSplitJoinContext`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/editor/actions/lists/ListSplitJoinContext.kt)
needs to be implemented to define the exact behavior of splitting and joining list-like constructs
in a language.
The UI will show implementations of this EP as an
[intention action](https://www.jetbrains.com/help/idea/intention-actions.html)
at appropriate locations.
Developers can use the abstract classes in
[`DefaultListSplitJoinContext`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/editor/actions/lists/DefaultListSplitJoinContext.kt)
for their implementation.

- [`XmlAttributesSplitJoinContext`](%gh-ic%/xml/impl/src/com/intellij/codeInsight/intentions/XmlAttributesSplitJoinContext.kt)

### Suggesting Rename and Change Signature Refactorings

EP: `com.intellij.suggestedRefactoringSupport`

[`SuggestedRefactoringSupport`](%gh-ic%/platform/lang-api/src/com/intellij/refactoring/suggested/SuggestedRefactoringSupport.kt)
provides functionality for suggesting rename and change signature refactorings for custom languages.

- [`KotlinSuggestedRefactoringSupport`](%gh-ic%/plugins/kotlin/idea/src/org/jetbrains/kotlin/idea/refactoring/suggested/KotlinSuggestedRefactoringSupport.kt)

### Reader Mode

EP: `com.intellij.readerModeMatcher`

[`ReaderModeMatcher`](%gh-ic%/platform/editor-ui-api/src/com/intellij/codeInsight/actions/ReaderModeMatcher.kt)
provides a way to decide if files are shown in the correct mode: reader mode vs. normal editor mode.
Please see
[the documentation](https://www.jetbrains.com/help/idea/reader-mode.html)
to get familiar with reader mode.

### Background Colors for Editors and Project View

EP: `com.intellij.editorTabColorProvider`

[`EditorTabColorProvider`](%gh-ic%/platform/ide-core-impl/src/com/intellij/openapi/fileEditor/impl/EditorTabColorProvider.java)
allows for the modification of the background colors for specific files.
If access to indexes is not required, it can be marked [dumb aware](indexing_and_psi_stubs.md#DumbAwareAPI).

### Custom Names and Tooltips for Editor Tabs

EP: `com.intellij.editorTabTitleProvider`

[`EditorTabTitleProvider`](%gh-ic%/platform/ide-core-impl/src/com/intellij/openapi/fileEditor/impl/EditorTabTitleProvider.kt)
allows for specifying custom names and tooltips displayed in the title of editor tabs.
If access to indexes is not required, it can be marked [dumb aware](indexing_and_psi_stubs.md#DumbAwareAPI).

Please see, e.g.,
[`GradleEditorTabTitleProvider`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/util/GradleEditorTabTitleProvider.kt)
which shows how the project name is added to the editor tab for Gradle files.

### Prevent Error Highlighting of Files

EP: `com.intellij.problemHighlightFilter`, `com.intellij.problemFileHighlightFilter`

[`ProblemHighlightFilter`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/daemon/ProblemHighlightFilter.java) and
the `com.intellij.problemFileHighlightFilter` EP (which implements
[`Condition<VirtualFile>`](%gh-ic%/platform/util/src/com/intellij/openapi/util/Condition.java))
are used to filter out files that should not be error-highlighted because they are, e.g., outside
the current project scope.
Note that these filters should be permissive and only prevent highlighting for files that are absolutely
known to be outside the scope.

- [`JavaProblemHighlightFilter`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/daemon/JavaProblemHighlightFilter.java)
- [`PyProblemFileHighlightFilter`](%gh-ic%/python/src/com/jetbrains/python/codeInsight/PyProblemFileHighlightFilter.java)

### Provide Fully Qualified Names (FQN) for Elements

EP: `com.intellij.ide.actions.QualifiedNameProvider`

[`QualifiedNameProvider`](%gh-ic%/platform/refactoring/src/com/intellij/ide/actions/QualifiedNameProvider.java)
provides features like copying and pasting references of FQN for, e.g., classes, functions, or methods.
Therefore, the `QualifiedNameProvider` implementation needs to provide logic to convert from and to
FQN.

- [`PyQualifiedNameProvider`](%gh-ic%/python/src/com/jetbrains/python/actions/PyQualifiedNameProvider.java)

### Label Files as Test Files

EP: `com.intellij.openapi.roots.TestSourcesFilter`

[`TestSourcesFilter`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/TestSourcesFilter.java)
allows for telling the IDE that a file is a test file, even it's not located in a directory marked as
test root.
This can be used in situations where test files are located next to source files.
If these files can be distinguished either by filename or content from source files, implementing this
EP will mark them as test files for the IDE.

### Move Statements Up and Down in the Editor

EP: `com.intellij.statementUpDownMover`

[`StatementUpDownMover`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/moveUpDown/StatementUpDownMover.java)
allows for customizing the behavior of moving statements up and down.
This can be used to keep code syntactically correct when moving code in the editor, e.g. when moving
a variable declaration.

- [`DeclarationMover`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/editorActions/moveUpDown/DeclarationMover.java)


<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Advanced Postfix Templates

<link-summary>Advanced postfix templates provide additional features like editing possibilities, expression selector, etc.</link-summary>

While [simple templates](postfix_templates.md) can be handled by extending
[`PostfixTemplate`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/templates/PostfixTemplate.java)
class directly, more advanced templates require additional functionalities like selecting the expression that a template should be applied to or editing a template content.
The IntelliJ Platform provides the base classes simplifying advanced template's features implementation.

## Postfix Templates With Expression Selector

In some contexts, it is not obvious what expression a template should be applied to.
Consider the following Java code with the `var` postfix template at the end:

```java
order.calculateWeight() > getMaxWeight(order.getDeliveryType()).var
```

In the above code, a postfix template could be applied to the `getMaxWeight()` method invocation and the entire comparison expression depending on the user's intention.
The postfix template implementation could automatically apply the template on the topmost or the closest applicable expression, but it is reasonable to leave the expression selection for the user.

Postfix templates with expression selector can be achieved by implementing
[`PostfixTemplateWithExpressionSelector`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/templates/PostfixTemplateWithExpressionSelector.java)
and
[`PostfixTemplateExpressionSelector`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/templates/PostfixTemplateExpressionSelector.java)
classes.

**Example:**
[`IntroduceFieldPostfixTemplate`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/template/postfix/templates/IntroduceFieldPostfixTemplate.java)
introduces a Java class field, allowing to select one of the non-void expressions at the current offset.

## Live Template Syntax-Based Postfix Templates

The IntelliJ Platform-based IDEs provide the [Live Templates](https://www.jetbrains.com/help/idea/using-live-templates.html) feature.
It allows defining a template text with dynamic expressions, replaced with actual values depending on the context.
If the implemented postfix template's expanding behavior can be achieved with the live template syntax, it is much easier to extend the
[`StringBasedPostfixTemplate`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/templates/StringBasedPostfixTemplate.java)
rather than implementing the expansion behavior programmatically.

**Example:** [`StreamPostfixTemplate`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/template/postfix/templates/StreamPostfixTemplate.java) wraps array expression within the `Arrays.stream()` method.

> See the [](live_templates.md) section in SDK Docs for information on implementing the live templates feature in a plugin.
>
{style="note"}

## Editable Postfix Templates

All postfix templates that return `true` from the
[`PostfixTemplate.isEditable()`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/templates/PostfixTemplate.java)
method and have a key starting with `.` (dot) can be edited.
In the simplest case, only the template's name can be edited.
To provide more advanced editing possibilities, like creating new templates in the settings dialog, editing the template's content, variables, expression conditions, etc., a plugin must implement the related
[`PostfixTemplateProvider's`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/templates/PostfixTemplateProvider.java)
methods:

- `PostfixTemplateProvider.createEditor()` - returns an instance of the
  [`PostfixTemplateEditor`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/templates/editable/PostfixTemplateEditor.java)
  class which is responsible for building the UI settings for a particular template and creating a template from the settings provided in this UI.
  The editor UI may contain settings controls other than the textual editor, like lists, checkboxes, etc.
- `PostfixTemplateProvider.writeExternalTemplate()` and `readExternalTemplate()` - serializes/deserializes a given template to/from XML elements.
  Serialized template data is stored in the
  [`PostfixTemplateStorage`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/settings/PostfixTemplateStorage.java)
  [persistent component](persisting_state_of_components.md).

Implementing template, editor, and serialization methods from scratch is a tedious task, so the IntelliJ Platform provides classes that help implement editable templates:
- [`EditablePostfixTemplateWithMultipleExpressions`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/templates/editable/EditablePostfixTemplateWithMultipleExpressions.java)
  for editable templates with expression selector and conditions limiting the applicable contexts.
  Like [](#live-template-syntax-based-postfix-templates), it is text-based and uses the same live template syntax.
- [`PostfixTemplateEditorBase`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/settings/PostfixTemplateEditorBase.java)
  for editors implementing the most common features like editing content, expression conditions, or using the topmost expression for template expanding
- Utility class
  [`PostfixTemplatesUtils`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/templates/PostfixTemplatesUtils.java)
  providing methods related to editable template data serialization

**Examples:**
- [`JavaPostfixTemplateProvider`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/template/postfix/templates/JavaPostfixTemplateProvider.java)
  providing Java editable templates
- [`JavaPostfixTemplateEditor`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/template/postfix/templates/editable/JavaPostfixTemplateEditor.java)
  implementing editor for Java editable templates
- [`ObjectsRequireNonNullPostfixTemplate`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/template/postfix/templates/ObjectsRequireNonNullPostfixTemplate.java)
  implementing template wrapping the selected expression in `Objects.requireNonNull()` method

## Surround Postfix Templates

Existing
[`Surrounder`](%gh-ic%/platform/lang-api/src/com/intellij/lang/surroundWith/Surrounder.java)
implementations of the [](surround_with.md) feature required to invoke the <ui-path>Code | Surround With...</ui-path> action can be reused for postfix completion by extending the
[`SurroundPostfixTemplateBase`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/templates/SurroundPostfixTemplateBase.java)
class and returning the surrounder object from the `getSurrounder()` method.

**Example:**
[`NotNullCheckPostfixTemplate`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/template/postfix/templates/NotNullCheckPostfixTemplate.java)
surrounding the selected expression with an `if` statement checking if the expression is `null`.
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Analyzing

<link-summary>The Analyzing section overview.</link-summary>

* [](syntax_errors.md)
* Annotator
* [Inspections](code_inspections.md)
  * [](inspection_options.md)
  * Profiles
  * Scopes
  * Suppressing Highlights
  * Structural Search
* [](controlling_highlighting.md)

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<!-- EP List Directory: /community/android -->

# Android Plugin Extension Point and Listener List

<link-summary>Overview of Extension Points and Listeners for Android Plugin.</link-summary>

<tldr>

**Product-Specific Plugin Development**: [Android Studio](android_studio.md)

</tldr>

100 Extension Points and 32 Listeners for Android Plugin

<include from="snippets.md" element-id="ep_list_legend"/>

## Android Plugin


### Android Plugin – Listeners

| Topic | Listener |
|-------|----------|
| [BuildAnalyzerStorageManager.Companion#DATA_IS_READY_TOPIC](https://jb.gg/ipe/listeners?topics=com.android.build.attribution.BuildAnalyzerStorageManager.Listener)  | [`Listener`](%gh-ij-android%/build-attribution/src/com/android/build/attribution/BuildAnalyzerStorageManager.kt) |
| [StatefulButtonNotifier#BUTTON_STATE_TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.assistant.StatefulButtonNotifier)  ![Project-Level][project-level] | [`StatefulButtonNotifier`](%gh-ij-android%/assistant/src/com/android/tools/idea/assistant/StatefulButtonNotifier.java) |
| [TutorialCardRefreshNotifier#TUTORIAL_CARD_TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.assistant.TutorialCardRefreshNotifier)  | [`TutorialCardRefreshNotifier`](%gh-ij-android%/assistant/src/com/android/tools/idea/assistant/TutorialCardRefreshNotifier.java) |
| [AvdLaunchListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.avdmanager.AvdLaunchListener)  | [`AvdLaunchListener`](%gh-ij-android%/android/src/com/android/tools/idea/avdmanager/AvdLaunchListener.java) |
| [EmulatorLogListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.avdmanager.EmulatorLogListener)  | [`EmulatorLogListener`](%gh-ij-android%/android/src/com/android/tools/idea/avdmanager/EmulatorLogListener.kt) |
| [IssueProviderListener#UI_CHECK](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.common.error.IssueProviderListener)  ![Project-Level][project-level] | [`IssueProviderListener`](%gh-ij-android%/designer/src/com/android/tools/idea/common/error/IssueProvider.kt) |
| [IssueProviderListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.common.error.IssueProviderListener)  ![Project-Level][project-level] | [`IssueProviderListener`](%gh-ij-android%/designer/src/com/android/tools/idea/common/error/IssueProvider.kt) |
| [ComposeAnimationListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.compose.preview.ComposePreviewRepresentation.ComposeAnimationListener)  | [`ComposeAnimationListener`](%gh-ij-android%/compose-designer/src/com/android/tools/idea/compose/preview/Preview.kt) |
| [FastPreviewManager#FAST_PREVIEW_MANAGER_TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.editors.fast.FastPreviewManager.Companion.FastPreviewManagerListener)  | [`FastPreviewManagerListener`](%gh-ij-android%/android/src/com/android/tools/idea/editors/fast/FastPreviewManager.kt) |
| [GradleBuildState#GRADLE_BUILD_TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.gradle.project.build.GradleBuildListener)  | [`GradleBuildListener`](%gh-ij-android%/project-system-gradle/src/com/android/tools/idea/gradle/project/build/GradleBuildListener.java) |
| [GradleSyncStateImplKt#GRADLE_SYNC_TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.gradle.project.sync.GradleSyncListenerWithRoot)  | [`GradleSyncListenerWithRoot`](%gh-ij-android%/project-system-gradle/src/com/android/tools/idea/gradle/project/sync/GradleSyncListenerWithRoot.kt) |
| [FilterStatusChanged.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.logcat.filters.FilterTextField.FilterStatusChanged)  | [`FilterStatusChanged`](%gh-ij-android%/logcat/src/com/android/tools/idea/logcat/filters/FilterTextField.kt) |
| [MergedManifestSnapshotComputeListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.model.MergedManifestSnapshotComputeListener)  | [`MergedManifestSnapshotComputeListener`](%gh-ij-android%/android/src/com/android/tools/idea/model/MergedManifestManager.kt) |
| [SafeArgsModeModuleService#MODE_CHANGED](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.nav.safeargs.module.SafeArgsModeModuleService.SafeArgsModeChangedListener)  | [`SafeArgsModeChangedListener`](%gh-ij-android%/nav/safeargs/common/src/com/android/tools/idea/nav/safeargs/module/SafeArgsModeModuleService.kt) |
| [NavigationResourcesModificationListenerKt#NAVIGATION_RESOURCES_CHANGED](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.nav.safeargs.project.NavigationResourcesChangeListener)  | [`NavigationResourcesChangeListener`](%gh-ij-android%/nav/safeargs/common/src/com/android/tools/idea/nav/safeargs/project/NavigationResourcesModificationListener.kt) |
| [MultiTemplateRenderer#TEMPLATE_RENDERER_TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.npw.model.MultiTemplateRenderer.TemplateRendererListener)  | [`TemplateRendererListener`](%gh-ij-android%/android-npw/src/com/android/tools/idea/npw/model/MultiTemplateRenderer.kt) |
| [ProjectApplicationIdsProvider.Companion#PROJECT_APPLICATION_IDS_CHANGED_TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.projectsystem.ProjectApplicationIdsProvider.ProjectApplicationIdsListener)  | [`ProjectApplicationIdsListener`](%gh-ij-android%/project-system/src/com/android/tools/idea/projectsystem/ProjectApplicationIdsProvider.kt) |
| [ProjectSystemBuildUtil#PROJECT_SYSTEM_BUILD_TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.projectsystem.ProjectSystemBuildManager.BuildListener)  | [`BuildListener`](%gh-ij-android%/project-system/src/com/android/tools/idea/projectsystem/ProjectSystemBuildManager.kt) |
| [ProjectSystemSyncUtil#PROJECT_SYSTEM_SYNC_TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.projectsystem.ProjectSystemSyncManager.SyncResultListener)  | [`SyncResultListener`](%gh-ij-android%/project-system/src/com/android/tools/idea/projectsystem/ProjectSystemSyncManager.kt) |
| [ClearLogcatListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.run.ClearLogcatListener)  | [`ClearLogcatListener`](%gh-ij-android%/android/src/com/android/tools/idea/run/ClearLogcatListener.kt) |
| [DeviceHeadsUpListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.run.DeviceHeadsUpListener)  | [`DeviceHeadsUpListener`](%gh-ij-android%/android/src/com/android/tools/idea/run/DeviceHeadsUpListener.java) |
| [ShowLogcatListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.run.ShowLogcatListener)  | [`ShowLogcatListener`](%gh-ij-android%/android/src/com/android/tools/idea/run/ShowLogcatListener.kt) |
| [SdkInstallListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.sdk.SdkInstallListener)  | [`SdkInstallListener`](%gh-ij-android%/android/src/com/android/tools/idea/sdk/SdkInstallListener.kt) |
| [DeviceMirroringSettingsListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.streaming.DeviceMirroringSettingsListener)  | [`DeviceMirroringSettingsListener`](%gh-ij-android%/android/src/com/android/tools/idea/streaming/DeviceMirroringSettingsListener.java) |
| [EmulatorSettingsListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.streaming.EmulatorSettingsListener)  | [`EmulatorSettingsListener`](%gh-ij-android%/android/src/com/android/tools/idea/streaming/EmulatorSettingsListener.java) |
| [TransportDeviceManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.transport.TransportDeviceManager.TransportDeviceManagerListener)  | [`TransportDeviceManagerListener`](%gh-ij-android%/android-transport/src/com/android/tools/idea/transport/TransportDeviceManager.java) |
| [Listener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.idea.uibuilder.options.NlOptionsConfigurable.Listener)  | [`Listener`](%gh-ij-android%/designer/src/com/android/tools/idea/uibuilder/options/NlOptionsConfigurable.kt) |
| [OpenHomeTabListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.profilers.taskbased.home.OpenHomeTabListener)  | [`OpenHomeTabListener`](%gh-ij-android%/profilers/src/com/android/tools/profilers/taskbased/home/OpenHomeTabListener.kt) |
| [OpenPastRecordingsTabListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.profilers.taskbased.pastrecordings.OpenPastRecordingsTabListener)  | [`OpenPastRecordingsTabListener`](%gh-ij-android%/profilers/src/com/android/tools/profilers/taskbased/pastrecordings/OpenPastRecordingsTabListener.kt) |
| [CreateProfilerTaskTabListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.profilers.taskbased.task.CreateProfilerTaskTabListener)  | [`CreateProfilerTaskTabListener`](%gh-ij-android%/profilers/src/com/android/tools/profilers/taskbased/task/CreateProfilerTaskTabListener.kt) |
| [OpenProfilerTaskTabListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.android.tools.profilers.taskbased.task.OpenProfilerTaskTabListener)  | [`OpenProfilerTaskTabListener`](%gh-ij-android%/profilers/src/com/android/tools/profilers/taskbased/task/OpenProfilerTaskTabListener.kt) |
| [ResourceFolderManager#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.android.facet.ResourceFolderManager.ResourceFolderListener)  ![Project-Level][project-level] | [`ResourceFolderListener`](%gh-ij-android%/android/src/org/jetbrains/android/facet/ResourceFolderManager.kt) |


### adt-ui.xml

[`adt-ui.xml`](%gh-ij-android%/adt-ui/src/main/java/META-INF/adt-ui.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.android.toolWindow](https://jb.gg/ipe?extensions=com.intellij.android.toolWindow) ![Non-Dynamic][non-dynamic] ![DumbAware][dumb-aware] | [`ToolWindowFactory`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/ToolWindowFactory.kt) |

### aiplugin-api.xml

[`aiplugin-api.xml`](%gh-ij-android%/ml-api/src/resources/META-INF/aiplugin-api.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.ml.mimetypeAugmenter](https://jb.gg/ipe?extensions=com.android.tools.idea.ml.mimetypeAugmenter) ![Non-Dynamic][non-dynamic] | [`MimeTypeAugmenter`](%gh-ij-android%/ml-api/src/main/kotlin/com/android/tools/idea/studiobot/mimetype/MimeTypeAugmenter.kt) |
| [com.android.tools.idea.ml.studioBotExternalFlags](https://jb.gg/ipe?extensions=com.android.tools.idea.ml.studioBotExternalFlags) ![Non-Dynamic][non-dynamic] | [`StudioBotExternalFlags`](%gh-ij-android%/ml-api/src/main/kotlin/com/android/tools/idea/studiobot/StudioBotExternalFlags.kt) |

### android-adb.xml

[`android-adb.xml`](%gh-ij-android%/android-adb/src/META-INF/android-adb.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.run.deviceNameRenderer](https://jb.gg/ipe?extensions=com.android.run.deviceNameRenderer) ![Non-Dynamic][non-dynamic] | [`DeviceNameRendererEx`](%gh-ij-android%/android-adb/src/com/android/tools/idea/ddms/DeviceNameRendererEx.java) |
| [com.android.tools.idea.deviceProvisioner](https://jb.gg/ipe?extensions=com.android.tools.idea.deviceProvisioner) ![Non-Dynamic][non-dynamic] | [`DeviceProvisionerFactory`](%gh-ij-android%/android-adb/src/com/android/tools/idea/deviceprovisioner/DeviceProvisionerFactory.kt) |

### android-editing-metrics.xml

[`android-editing-metrics.xml`](%gh-ij-android%/android/editing/metrics/src/META-INF/android-editing-metrics.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.editing.metrics.codeEditedListener](https://jb.gg/ipe?extensions=com.android.tools.idea.editing.metrics.codeEditedListener) | [`CodeEditedListener`](%gh-ij-android%/android/editing/metrics/src/com/android/tools/idea/editing/metrics/CodeEditedListener.kt) |

### android-execution-common.xml

[`android-execution-common.xml`](%gh-ij-android%/execution/common/src/META-INF/android-execution-common.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.execution.common.androidConfigurationExecutorProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.execution.common.androidConfigurationExecutorProvider) ![Non-Dynamic][non-dynamic] | [`Provider`](%gh-ij-android%/execution/common/src/com/android/tools/idea/execution/common/AndroidConfigurationExecutor.kt) |
| [com.android.tools.idea.execution.common.debug.utils.facetFinderToken](https://jb.gg/ipe?extensions=com.android.tools.idea.execution.common.debug.utils.facetFinderToken) ![Non-Dynamic][non-dynamic] | [`FacetFinderToken`](%gh-ij-android%/execution/common/src/com/android/tools/idea/execution/common/debug/utils/FacetFinder.kt) |

### android-kotlin-extensions-common.xml

[`android-kotlin-extensions-common.xml`](%gh-ij-android%/android-kotlin/android-extensions-idea-common/src/META-INF/android-kotlin-extensions-common.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.android.model.androidModuleInfoProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.android.model.androidModuleInfoProvider) ![Deprecated][deprecated] ![Non-Dynamic][non-dynamic] | [`AndroidModuleInfoProvider`](%gh-ij-android%/android-kotlin/android-extensions-idea-common/src/org/jetbrains/kotlin/android/synthetic/idea/AndroidModuleInfoProvider.kt) |

### android-kotlin.common.xml

[`android-kotlin.common.xml`](%gh-ij-android%/android-kotlin/idea-android/common/src/META-INF/android-kotlin.common.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.androidDexer](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.androidDexer) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | [`AndroidDexer`](%gh-ic%/plugins/kotlin/jvm-debugger/evaluation/src/org/jetbrains/kotlin/idea/debugger/evaluate/classLoading/AndroidDexer.kt) |

### android-lang.xml

[`android-lang.xml`](%gh-ij-android%/android-lang/src/META-INF/android-lang.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.lang.androidSql.contextProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.lang.androidSql.contextProvider) ![Non-Dynamic][non-dynamic] | [`Provider`](%gh-ij-android%/android-lang/src/com/android/tools/idea/lang/androidSql/AndroidSqlContext.kt) |

### android-navigator.xml

[`android-navigator.xml`](%gh-ij-android%/android-navigator/src/META-INF/android-navigator.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.navigator.androidViewNodeProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.navigator.androidViewNodeProvider) ![Non-Dynamic][non-dynamic] | [`AndroidViewNodeProvider`](%gh-ij-android%/android-navigator/src/com/android/tools/idea/navigator/nodes/AndroidViewNodeProvider.kt) |

### android-npw.xml

[`android-npw.xml`](%gh-ij-android%/android-npw/src/META-INF/android-npw.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.moduleDescriptionProvider](https://jb.gg/ipe?extensions=com.android.moduleDescriptionProvider) ![Non-Dynamic][non-dynamic] | [`ModuleDescriptionProvider`](%gh-ij-android%/android-npw/src/com/android/tools/idea/npw/module/ModuleDescriptionProvider.kt) |

### android-plugin.xml

[`android-plugin.xml`](%gh-ij-android%/android/src/META-INF/android-plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.customProjectTypeImporter](https://jb.gg/ipe?extensions=com.android.customProjectTypeImporter) ![Non-Dynamic][non-dynamic] | [`CustomProjectTypeImporter`](%gh-ij-android%/android/src/com/android/tools/idea/project/CustomProjectTypeImporter.java) |
| [com.android.ide.androidConfigurableContributor](https://jb.gg/ipe?extensions=com.android.ide.androidConfigurableContributor) ![Non-Dynamic][non-dynamic] | [`AndroidConfigurableContributor`](%gh-ij-android%/android/src/com/android/tools/idea/structure/dialog/AndroidConfigurableContributor.kt) |
| [com.android.ide.sdkEventListener](https://jb.gg/ipe?extensions=com.android.ide.sdkEventListener) ![Non-Dynamic][non-dynamic] | [`AndroidSdkEventListener`](%gh-ij-android%/android/src/com/android/tools/idea/sdk/IdeSdks.java) |
| [com.android.rendering.renderErrorContributor](https://jb.gg/ipe?extensions=com.android.rendering.renderErrorContributor) ![Non-Dynamic][non-dynamic] | [`Provider`](%gh-ij-android%/android/src/com/android/tools/idea/rendering/RenderErrorContributor.java) |
| [com.android.rendering.renderSecurityManagerOverrides](https://jb.gg/ipe?extensions=com.android.rendering.renderSecurityManagerOverrides) | [`RenderSecurityManagerOverrides`](%gh-ij-android%/rendering/src/com/android/tools/rendering/security/RenderSecurityManagerOverrides.kt) |
| [com.android.run.androidDebugger](https://jb.gg/ipe?extensions=com.android.run.androidDebugger) ![Non-Dynamic][non-dynamic] | [`AndroidDebugger`](%gh-ij-android%/execution/common/src/com/android/tools/idea/execution/common/debug/AndroidDebugger.java) |
| [com.android.run.androidLaunchTaskContributor](https://jb.gg/ipe?extensions=com.android.run.androidLaunchTaskContributor) ![Non-Dynamic][non-dynamic] | [`AndroidLaunchTaskContributor`](%gh-ij-android%/android/src/com/android/tools/idea/run/AndroidLaunchTaskContributor.java) |
| [com.android.run.deployTargetProvider](https://jb.gg/ipe?extensions=com.android.run.deployTargetProvider) ![Non-Dynamic][non-dynamic] | [`DeployTargetProvider`](%gh-ij-android%/android/src/com/android/tools/idea/run/editor/DeployTargetProvider.java) |
| [com.android.tools.idea.actions.annotations.inferAnnotationsToken](https://jb.gg/ipe?extensions=com.android.tools.idea.actions.annotations.inferAnnotationsToken) ![Non-Dynamic][non-dynamic] | [`InferAnnotationsToken`](%gh-ij-android%/android/src/com/android/tools/idea/actions/annotations/InferAnnotationsToken.kt) |
| [com.android.tools.idea.actions.exportProjectZipExcludesContributor](https://jb.gg/ipe?extensions=com.android.tools.idea.actions.exportProjectZipExcludesContributor) ![Non-Dynamic][non-dynamic] | [`ExportProjectZipExcludesContributor`](%gh-ij-android%/android/src/com/android/tools/idea/actions/ExportProjectZipExcludesContributor.java) |
| [com.android.tools.idea.analytics.ideBrandProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.analytics.ideBrandProvider) ![Non-Dynamic][non-dynamic] | [`IdeBrandProvider`](%gh-ij-android%/android/src/com/android/tools/idea/analytics/IdeBrandProvider.kt) |
| [com.android.tools.idea.databinding.layoutBindingSupport](https://jb.gg/ipe?extensions=com.android.tools.idea.databinding.layoutBindingSupport) ![Non-Dynamic][non-dynamic] | [`LayoutBindingSupport`](%gh-ij-android%/android/src/com/android/tools/idea/databinding/LayoutBindingSupport.kt) |
| [com.android.tools.idea.diagnostics.report.logsProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.diagnostics.report.logsProvider) ![Non-Dynamic][non-dynamic] | [`DiagnosticsSummaryFileProvider`](%gh-ij-android%/android/src/com/android/tools/idea/diagnostics/report/DiagnosticsSummaryFileProvider.kt) |
| [com.android.tools.idea.editors.manifest.manifestPanelToken](https://jb.gg/ipe?extensions=com.android.tools.idea.editors.manifest.manifestPanelToken) ![Non-Dynamic][non-dynamic] | [`ManifestPanelToken`](%gh-ij-android%/android/src/com/android/tools/idea/editors/manifest/ManifestPanelToken.kt) |
| [com.android.tools.idea.flags.experimentalSettingsContributor](https://jb.gg/ipe?extensions=com.android.tools.idea.flags.experimentalSettingsContributor) ![Non-Dynamic][non-dynamic] | [`ExperimentalSettingsContributor`](%gh-ij-android%/android/src/com/android/tools/idea/flags/ExperimentalSettingsContributor.kt) |
| [com.android.tools.idea.lang.databinding.dataBindingCompletionSupport](https://jb.gg/ipe?extensions=com.android.tools.idea.lang.databinding.dataBindingCompletionSupport) ![Non-Dynamic][non-dynamic] | [`DataBindingCompletionSupport`](%gh-ij-android%/android/src/com/android/tools/idea/lang/databinding/DataBindingCompletionSupport.kt) |
| [com.android.tools.idea.lang.databinding.dataBindingExpressionSupport](https://jb.gg/ipe?extensions=com.android.tools.idea.lang.databinding.dataBindingExpressionSupport) ![Non-Dynamic][non-dynamic] | [`DataBindingExpressionSupport`](%gh-ij-android%/android/src/com/android/tools/idea/lang/databinding/DataBindingExpressionSupport.kt) |
| [com.android.tools.idea.layoutlib.layoutLibraryProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.layoutlib.layoutLibraryProvider) ![Non-Dynamic][non-dynamic] | [`LayoutLibraryProvider`](%gh-ij-android%/layoutlib-loader/src/com/android/tools/idea/layoutlib/LayoutLibraryLoader.java) |
| [com.android.tools.idea.liveedit.tokens.buildSystemLiveEditServices](https://jb.gg/ipe?extensions=com.android.tools.idea.liveedit.tokens.buildSystemLiveEditServices) ![Non-Dynamic][non-dynamic] | [`BuildSystemLiveEditServices`](%gh-ij-android%/android/src/com/android/tools/idea/run/deployment/liveedit/tokens/BuildSystemLiveEditServices.kt) |
| [com.android.tools.idea.ndk.nativeWorkspaceProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.ndk.nativeWorkspaceProvider) ![Non-Dynamic][non-dynamic] | [`NativeWorkspaceProvider`](%gh-ij-android%/android/src/com/android/tools/idea/ndk/NativeWorkspaceProvider.kt) |
| [com.android.tools.idea.rendering.renderIssueCollectionConsumer](https://jb.gg/ipe?extensions=com.android.tools.idea.rendering.renderIssueCollectionConsumer) ![Non-Dynamic][non-dynamic] | [`Provider`](%gh-ij-android%/android/src/com/android/tools/idea/rendering/RenderIssueCollectionConsumer.java) |
| [com.android.tools.idea.rendering.tokens.buildSystemFilePreviewServices](https://jb.gg/ipe?extensions=com.android.tools.idea.rendering.tokens.buildSystemFilePreviewServices) ![Non-Dynamic][non-dynamic] | [`BuildSystemFilePreviewServices`](%gh-ij-android%/android/src/com/android/tools/idea/rendering/tokens/BuildSystemFilePreviewServices.kt) |
| [com.android.tools.idea.res.resourceClassToken](https://jb.gg/ipe?extensions=com.android.tools.idea.res.resourceClassToken) ![Non-Dynamic][non-dynamic] | [`ResourceClassToken`](%gh-ij-android%/android/src/com/android/tools/idea/res/ResourceClassToken.kt) |
| [com.android.tools.idea.run.configuration.editors.androidWearConfigurationEditorToken](https://jb.gg/ipe?extensions=com.android.tools.idea.run.configuration.editors.androidWearConfigurationEditorToken) ![Non-Dynamic][non-dynamic] | [`AndroidWearConfigurationEditorToken`](%gh-ij-android%/android/src/com/android/tools/idea/run/configuration/editors/AndroidWearConfigurationEditor.kt) |
| [com.android.tools.idea.run.editor.androidDebuggerInfoProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.run.editor.androidDebuggerInfoProvider) ![Non-Dynamic][non-dynamic] | [`AndroidDebuggerInfoProvider`](%gh-ij-android%/android/src/com/android/tools/idea/run/editor/AndroidDebuggerInfoProvider.java) |
| [com.android.tools.idea.run.editor.testRunParametersToken](https://jb.gg/ipe?extensions=com.android.tools.idea.run.editor.testRunParametersToken) ![Non-Dynamic][non-dynamic] | [`TestRunParametersToken`](%gh-ij-android%/android/src/com/android/tools/idea/run/editor/TestRunParameters.java) |
| [com.android.tools.idea.testartifacts.instrumented.androidRunConfigurationToken](https://jb.gg/ipe?extensions=com.android.tools.idea.testartifacts.instrumented.androidRunConfigurationToken) ![Non-Dynamic][non-dynamic] | [`AndroidRunConfigurationToken`](%gh-ij-android%/android/src/com/android/tools/idea/testartifacts/instrumented/AndroidRunConfigurationToken.kt) |
| [com.android.tools.idea.testartifacts.instrumented.androidTestConfigurationProducerToken](https://jb.gg/ipe?extensions=com.android.tools.idea.testartifacts.instrumented.androidTestConfigurationProducerToken) ![Non-Dynamic][non-dynamic] | [`AndroidTestConfigurationProducerToken`](%gh-ij-android%/android/src/com/android/tools/idea/testartifacts/instrumented/AndroidTestConfigurationProducer.kt) |
| [com.android.tools.idea.testartifacts.instrumented.testRunConfigurationOptions](https://jb.gg/ipe?extensions=com.android.tools.idea.testartifacts.instrumented.testRunConfigurationOptions) | [`TestRunConfigurationOptions`](%gh-ij-android%/android/src/com/android/tools/idea/testartifacts/instrumented/AndroidTestConfigurationProducer.kt) |
| [com.android.tools.idea.ui.designer.overlays.overlayProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.ui.designer.overlays.overlayProvider) ![Non-Dynamic][non-dynamic] | [`OverlayProvider`](%gh-ij-android%/android/src/com/android/tools/idea/ui/designer/overlays/OverlayProvider.java) |
| [com.android.tools.idea.ui.guiTestingStatusProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.ui.guiTestingStatusProvider) ![Non-Dynamic][non-dynamic] | [`GuiTestingStatusProvider`](%gh-ij-android%/android/src/com/android/tools/idea/ui/GuiTestingStatusProvider.java) |
| [com.android.tools.idea.ui.resourcemanager.importer.createDefaultResDirectoryToken](https://jb.gg/ipe?extensions=com.android.tools.idea.ui.resourcemanager.importer.createDefaultResDirectoryToken) ![Non-Dynamic][non-dynamic] | [`CreateDefaultResDirectoryToken`](%gh-ij-android%/android/src/com/android/tools/idea/ui/resourcemanager/importer/DesignAssetImporter.kt) |
| [com.android.tools.idea.wizard.template.wizardTemplateProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.wizard.template.wizardTemplateProvider) ![Non-Dynamic][non-dynamic] | `WizardTemplateProvider` |
| [org.jetbrains.android.actions.newResourceCreationHandler](https://jb.gg/ipe?extensions=org.jetbrains.android.actions.newResourceCreationHandler) ![Non-Dynamic][non-dynamic] | [`NewResourceCreationHandler`](%gh-ij-android%/android/src/org/jetbrains/android/actions/NewResourceCreationHandler.java) |
| [org.jetbrains.android.refactoring.unusedResourcesToken](https://jb.gg/ipe?extensions=org.jetbrains.android.refactoring.unusedResourcesToken) ![Non-Dynamic][non-dynamic] | [`UnusedResourcesToken`](%gh-ij-android%/android/src/org/jetbrains/android/refactoring/UnusedResourcesProcessor.kt) |

### android-templates.xml

[`android-templates.xml`](%gh-ij-android%/android-templates/src/META-INF/android-templates.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.templates.additionalTemplateActionsProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.templates.additionalTemplateActionsProvider) ![Non-Dynamic][non-dynamic] | [`AdditionalTemplateActionsProvider`](%gh-ij-android%/android-templates/src/com/android/tools/idea/templates/AdditionalTemplateActionsProvider.java) |

### app-inspection.xml

[`app-inspection.xml`](%gh-ij-android%/app-inspection/ide/src/META-INF/app-inspection.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.appinspection.ide.resolver.artifactResolverFactoryToken](https://jb.gg/ipe?extensions=com.android.tools.idea.appinspection.ide.resolver.artifactResolverFactoryToken) ![Non-Dynamic][non-dynamic] | [`ArtifactResolverFactoryToken`](%gh-ij-android%/app-inspection/ide/src/com/android/tools/idea/appinspection/ide/resolver/ArtifactResolverFactory.kt) |

### app-inspector.xml

[`app-inspector.xml`](%gh-ij-android%/app-inspection/inspector/ide/src/META-INF/app-inspector.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.appinspection.inspector.ide.appInspectorTabProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.appinspection.inspector.ide.appInspectorTabProvider) ![Non-Dynamic][non-dynamic] | [`AppInspectorTabProvider`](%gh-ij-android%/app-inspection/inspector/ide/src/com/android/tools/idea/appinspection/inspector/ide/AppInspectorTabProvider.kt) |

### assistant.xml

[`assistant.xml`](%gh-ij-android%/assistant/src/META-INF/assistant.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.assistant.actionHandler](https://jb.gg/ipe?extensions=com.android.tools.idea.assistant.actionHandler) ![Non-Dynamic][non-dynamic] | [`AssistActionHandler`](%gh-ij-android%/assistant/src/com/android/tools/idea/assistant/AssistActionHandler.java) |
| [com.android.tools.idea.assistant.actionStateManager](https://jb.gg/ipe?extensions=com.android.tools.idea.assistant.actionStateManager) ![Non-Dynamic][non-dynamic] | [`AssistActionStateManager`](%gh-ij-android%/assistant/src/com/android/tools/idea/assistant/AssistActionStateManager.java) |
| [com.android.tools.idea.assistant.assistantBundleCreator](https://jb.gg/ipe?extensions=com.android.tools.idea.assistant.assistantBundleCreator) ![Non-Dynamic][non-dynamic] | [`AssistantBundleCreator`](%gh-ij-android%/assistant/src/com/android/tools/idea/assistant/AssistantBundleCreator.java) |
| [com.android.tools.idea.assistant.navlistener](https://jb.gg/ipe?extensions=com.android.tools.idea.assistant.navlistener) ![Non-Dynamic][non-dynamic] | [`AssistNavListener`](%gh-ij-android%/assistant/src/com/android/tools/idea/assistant/AssistNavListener.java) |
| [com.android.tools.idea.assistant.panelFactory](https://jb.gg/ipe?extensions=com.android.tools.idea.assistant.panelFactory) ![Non-Dynamic][non-dynamic] | [`PanelFactory`](%gh-ij-android%/assistant/src/com/android/tools/idea/assistant/PanelFactory.java) |
| [com.android.tools.idea.assistant.scrollHandler](https://jb.gg/ipe?extensions=com.android.tools.idea.assistant.scrollHandler) ![Non-Dynamic][non-dynamic] | [`ScrollHandler`](%gh-ij-android%/assistant/src/com/android/tools/idea/assistant/ScrollHandler.java) |

### compose-designer.xml

[`compose-designer.xml`](%gh-ij-android%/compose-designer/src/META-INF/compose-designer.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.compose.preview.composeEditorNotificationProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.compose.preview.composeEditorNotificationProvider) ![Non-Dynamic][non-dynamic] ![DumbAware][dumb-aware] | [`EditorNotificationProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ui/EditorNotificationProvider.java) |

### customview.xml

[`customview.xml`](%gh-ij-android%/designer/customview/src/META-INF/customview.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.customview.preview.customViewEditorNotificationProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.customview.preview.customViewEditorNotificationProvider) ![Non-Dynamic][non-dynamic] ![DumbAware][dumb-aware] | [`EditorNotificationProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ui/EditorNotificationProvider.java) |

### databinding.xml

[`databinding.xml`](%gh-ij-android%/databinding/src/META-INF/databinding.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.databinding.bindingLayoutToken](https://jb.gg/ipe?extensions=com.android.tools.idea.databinding.bindingLayoutToken) ![Non-Dynamic][non-dynamic] | [`BindingLayoutToken`](%gh-ij-android%/databinding/src/com/android/tools/idea/databinding/BindingLayoutToken.kt) |

### designer.xml

[`designer.xml`](%gh-ij-android%/designer/src/META-INF/designer.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.uibuilder.editor.multirepresentation.sourcecode.sourceCodePreviewRepresentationProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.uibuilder.editor.multirepresentation.sourcecode.sourceCodePreviewRepresentationProvider) ![Non-Dynamic][non-dynamic] | [`PreviewRepresentationProvider`](%gh-ij-android%/designer/src/com/android/tools/idea/uibuilder/editor/multirepresentation/PreviewRepresentationProvider.kt) |
| [com.android.tools.idea.uibuilder.editorNotificationProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.uibuilder.editorNotificationProvider) ![Non-Dynamic][non-dynamic] ![DumbAware][dumb-aware] | [`EditorNotificationProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ui/EditorNotificationProvider.java) |
| [com.android.tools.idea.uibuilder.handlers.constraint.constraintLayoutExtension](https://jb.gg/ipe?extensions=com.android.tools.idea.uibuilder.handlers.constraint.constraintLayoutExtension) | [`ConstraintLayoutExtension`](%gh-ij-android%/designer/src/com/android/tools/idea/uibuilder/handlers/constraint/ConstraintComponentUtilities.java) |
| [com.android.tools.idea.uibuilder.handlers.viewHandlerProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.uibuilder.handlers.viewHandlerProvider) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | [`ViewHandlerProvider`](%gh-ij-android%/designer/src/com/android/tools/idea/uibuilder/handlers/ViewHandlerProvider.kt) |
| [com.android.tools.idea.uibuilder.property.motionEditorNlPropertiesModelProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.uibuilder.property.motionEditorNlPropertiesModelProvider) | [`NlPropertiesModelProvider`](%gh-ij-android%/designer/src/com/android/tools/idea/uibuilder/property/NlPropertiesModel.kt) |
| [com.android.tools.idea.uibuilder.property.motionEditorNlPropertiesViewProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.uibuilder.property.motionEditorNlPropertiesViewProvider) | [`NlPropertiesViewProvider`](%gh-ij-android%/designer/src/com/android/tools/idea/uibuilder/property/NlPropertiesView.kt) |
| [com.android.tools.idea.uibuilder.scene.decorator.nlDecoratorProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.uibuilder.scene.decorator.nlDecoratorProvider) | [`Provider`](%gh-ij-android%/designer/src/com/android/tools/idea/uibuilder/scene/decorator/NlSceneDecoratorFactory.java) |
| [com.android.tools.idea.uibuilder.troubleshooting.infoCollector](https://jb.gg/ipe?extensions=com.android.tools.idea.uibuilder.troubleshooting.infoCollector) ![Non-Dynamic][non-dynamic] | [`TroubleInfoCollector`](%gh-ic%/platform/platform-impl/src/com/intellij/troubleshooting/TroubleInfoCollector.java) |

### gradle-dsl.xml

[`gradle-dsl.xml`](%gh-ij-android%/gradle-dsl/resources/META-INF/gradle-dsl.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.gradleModelProvider](https://jb.gg/ipe?extensions=com.android.tools.gradleModelProvider) ![Non-Dynamic][non-dynamic] | [`GradleModelProvider`](%gh-ij-android%/gradle-dsl/src/com/android/tools/idea/gradle/dsl/api/GradleModelProvider.java) |
| [com.android.tools.idea.gradle.dsl.blockModelProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.gradle.dsl.blockModelProvider) ![Experimental][experimental] | [`BlockModelProvider`](%gh-ij-android%/gradle-dsl/src/com/android/tools/idea/gradle/dsl/model/BlockModelProvider.kt) |
| [com.android.tools.idea.gradle.dsl.transformerFactory](https://jb.gg/ipe?extensions=com.android.tools.idea.gradle.dsl.transformerFactory) | [`GradleDslTransformerFactory`](%gh-ij-android%/gradle-dsl/src/com/android/tools/idea/gradle/dsl/parser/GradleDslTransformerFactory.java) |
| [com.android.tools.idea.versionCatalogFilesGradleModel](https://jb.gg/ipe?extensions=com.android.tools.idea.versionCatalogFilesGradleModel) ![Non-Dynamic][non-dynamic] | [`VersionCatalogFilesModel`](%gh-ij-android%/gradle-dsl/src/com/android/tools/idea/gradle/dsl/model/VersionCatalogFilesModel.kt) |

### layout-inspector.xml

[`layout-inspector.xml`](%gh-ij-android%/layout-inspector/src/META-INF/layout-inspector.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.layoutinspector.pipeline.appinspection.compose.getComposeLayoutInspectorJarToken](https://jb.gg/ipe?extensions=com.android.tools.idea.layoutinspector.pipeline.appinspection.compose.getComposeLayoutInspectorJarToken) ![Non-Dynamic][non-dynamic] | [`GetComposeLayoutInspectorJarToken`](%gh-ij-android%/layout-inspector/src/com/android/tools/idea/layoutinspector/pipeline/appinspection/compose/ComposeLayoutInspectorClient.kt) |

### lint-plugin.xml

[`lint-plugin.xml`](%gh-ij-android%/lint/src/META-INF/lint-plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.lint.common.lintIdeSupport](https://jb.gg/ipe?extensions=com.android.tools.idea.lint.common.lintIdeSupport) ![Non-Dynamic][non-dynamic] | [`LintIdeSupport`](%gh-ij-android%/lint/src/com/android/tools/idea/lint/common/LintIdeSupport.kt) |
| [com.android.tools.idea.lint.common.lintQuickFixProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.lint.common.lintQuickFixProvider) ![Non-Dynamic][non-dynamic] | [`LintIdeQuickFixProvider`](%gh-ij-android%/lint/src/com/android/tools/idea/lint/common/LintIdeQuickFixProvider.java) |

### logcat.xml

[`logcat.xml`](%gh-ij-android%/logcat/src/META-INF/logcat.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.logcat.consoleFilterProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.logcat.consoleFilterProvider) ![Non-Dynamic][non-dynamic] | [`LogcatConsoleFilterProvider`](%gh-ij-android%/logcat/src/com/android/tools/idea/logcat/LogcatConsoleFilterProvider.kt) |
| [com.android.tools.idea.logcat.messages.exceptionMessageRewriter](https://jb.gg/ipe?extensions=com.android.tools.idea.logcat.messages.exceptionMessageRewriter) ![Non-Dynamic][non-dynamic] | [`ExceptionMessageRewriter`](%gh-ij-android%/logcat/src/com/android/tools/idea/logcat/messages/ExceptionMessageRewriter.kt) |

### native-symbolizer.xml

[`native-symbolizer.xml`](%gh-ij-android%/native-symbolizer/src/META-INF/native-symbolizer.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.nativeSymbolizer.moduleSymbolSourceContributor](https://jb.gg/ipe?extensions=com.android.tools.nativeSymbolizer.moduleSymbolSourceContributor) ![Non-Dynamic][non-dynamic] | [`ModuleSymbolSourceContributor`](%gh-ij-android%/native-symbolizer/src/com/android/tools/nativeSymbolizer/SymbolSource.kt) |

### naveditor.xml

[`naveditor.xml`](%gh-ij-android%/nav/editor/src/META-INF/naveditor.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.naveditor.editor.addDestinationMenuToken](https://jb.gg/ipe?extensions=com.android.tools.idea.naveditor.editor.addDestinationMenuToken) ![Non-Dynamic][non-dynamic] | [`AddDestinationMenuToken`](%gh-ij-android%/nav/editor/src/com/android/tools/idea/naveditor/editor/AddDestinationMenu.kt) |
| [com.android.tools.idea.naveditor.surface.navDesignSurfaceToken](https://jb.gg/ipe?extensions=com.android.tools.idea.naveditor.surface.navDesignSurfaceToken) ![Non-Dynamic][non-dynamic] | [`NavDesignSurfaceToken`](%gh-ij-android%/nav/editor/src/com/android/tools/idea/naveditor/surface/NavDesignSurfaceToken.java) |

### pipeline.xml

[`pipeline.xml`](%gh-ij-android%/android-transport/src/META-INF/pipeline.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.transport.transportConfigContributor](https://jb.gg/ipe?extensions=com.android.tools.idea.transport.transportConfigContributor) ![Non-Dynamic][non-dynamic] | [`TransportConfigContributor`](%gh-ij-android%/android-transport/src/com/android/tools/idea/transport/TransportConfigContributor.java) |

### profilers.xml

[`profilers.xml`](%gh-ij-android%/profilers-android/src/META-INF/profilers.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.profilers.profilerProgramRunnerToken](https://jb.gg/ipe?extensions=com.android.tools.idea.profilers.profilerProgramRunnerToken) ![Non-Dynamic][non-dynamic] | [`ProfilerProgramRunnerToken`](%gh-ij-android%/profilers-android/src/com/android/tools/idea/profilers/ProfilerProgramRunnerToken.kt) |

### project-system-gradle-plugin.xml

[`project-system-gradle-plugin.xml`](%gh-ij-android%/project-system-gradle/src/META-INF/project-system-gradle-plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.gradle.sync.postSyncProjectCleanupStep](https://jb.gg/ipe?extensions=com.android.gradle.sync.postSyncProjectCleanupStep) ![Non-Dynamic][non-dynamic] | [`ProjectCleanupStep`](%gh-ij-android%/project-system-gradle/src/com/android/tools/idea/gradle/project/sync/setup/post/ProjectCleanupStep.java) |
| [com.android.gradle.sync.postSyncProjectSetupStep](https://jb.gg/ipe?extensions=com.android.gradle.sync.postSyncProjectSetupStep) ![Non-Dynamic][non-dynamic] | [`ProjectSetupStep`](%gh-ij-android%/project-system-gradle/src/com/android/tools/idea/gradle/project/sync/setup/post/ProjectSetupStep.java) |
| [com.android.moduleImporter](https://jb.gg/ipe?extensions=com.android.moduleImporter) ![Non-Dynamic][non-dynamic] | [`AndroidModuleImporter`](%gh-ij-android%/project-system-gradle/src/com/android/tools/idea/gradle/project/AndroidModuleImporter.kt) |

### project-system-plugin.xml

[`project-system-plugin.xml`](%gh-ij-android%/project-system/src/META-INF/project-system-plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.androidStartupActivity](https://jb.gg/ipe?extensions=com.android.androidStartupActivity) | [`AndroidStartupActivity`](%gh-ij-android%/project-system/src/com/android/tools/idea/AndroidStartupActivity.kt) |
| [com.android.project.projectsystem](https://jb.gg/ipe?extensions=com.android.project.projectsystem) ![Non-Dynamic][non-dynamic] | [`AndroidProjectSystemProvider`](%gh-ij-android%/project-system/src/com/android/tools/idea/projectsystem/AndroidProjectSystemProvider.kt) |
| [com.android.tools.idea.memorysettings.memorySettingsToken](https://jb.gg/ipe?extensions=com.android.tools.idea.memorysettings.memorySettingsToken) ![Non-Dynamic][non-dynamic] | [`MemorySettingsToken`](%gh-ij-android%/project-system/src/com/android/tools/idea/memorysettings/MemorySettingsToken.java) |
| [com.android.tools.idea.model.mergedManifestInfoToken](https://jb.gg/ipe?extensions=com.android.tools.idea.model.mergedManifestInfoToken) ![Non-Dynamic][non-dynamic] | [`MergedManifestInfoToken`](%gh-ij-android%/project-system/src/com/android/tools/idea/model/MergedManifestInfoToken.java) |
| [com.android.tools.idea.projectsystem.ApplicationProjectContextProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.projectsystem.ApplicationProjectContextProvider) | [`ApplicationProjectContextProvider`](%gh-ij-android%/project-system/src/com/android/tools/idea/projectsystem/ApplicationProjectContext.kt) |
| [com.android.tools.idea.projectsystem.androidIconProviderProjectToken](https://jb.gg/ipe?extensions=com.android.tools.idea.projectsystem.androidIconProviderProjectToken) ![Non-Dynamic][non-dynamic] | [`AndroidIconProviderProjectToken`](%gh-ij-android%/project-system/src/com/android/tools/idea/projectsystem/AndroidIconProviderProjectToken.kt) |
| [com.android.tools.idea.projectsystem.dynamicAppFeatureOnFeatureToken](https://jb.gg/ipe?extensions=com.android.tools.idea.projectsystem.dynamicAppFeatureOnFeatureToken) ![Non-Dynamic][non-dynamic] | [`DynamicAppFeatureOnFeatureToken`](%gh-ij-android%/project-system/src/com/android/tools/idea/projectsystem/DynamicAppFeatureOnFeatureToken.kt) |
| [com.android.tools.idea.projectsystem.findDependenciesWithResourcesToken](https://jb.gg/ipe?extensions=com.android.tools.idea.projectsystem.findDependenciesWithResourcesToken) ![Non-Dynamic][non-dynamic] | [`FindDependenciesWithResourcesToken`](%gh-ij-android%/project-system/src/com/android/tools/idea/projectsystem/FindDependenciesWithResourcesToken.kt) |
| [com.android.tools.idea.projectsystem.libraryDependenciesTroubleInfoCollectorToken](https://jb.gg/ipe?extensions=com.android.tools.idea.projectsystem.libraryDependenciesTroubleInfoCollectorToken) ![Non-Dynamic][non-dynamic] | [`LibraryDependenciesTroubleInfoCollectorToken`](%gh-ij-android%/project-system/src/com/android/tools/idea/projectsystem/LibraryDependenciesTroubleInfoCollectorToken.kt) |
| [com.android.tools.idea.projectsystem.pseudoLocalesToken](https://jb.gg/ipe?extensions=com.android.tools.idea.projectsystem.pseudoLocalesToken) ![Non-Dynamic][non-dynamic] | [`PseudoLocalesToken`](%gh-ij-android%/project-system/src/com/android/tools/idea/projectsystem/PseudoLocalesToken.kt) |
| [org.jetbrains.android.facet.resourceFolderManagerToken](https://jb.gg/ipe?extensions=org.jetbrains.android.facet.resourceFolderManagerToken) ![Non-Dynamic][non-dynamic] | [`ResourceFolderManagerToken`](%gh-ij-android%/project-system/src/org/jetbrains/android/facet/ResourceFolderManagerToken.kt) |

### resources-explorer.xml

[`resources-explorer.xml`](%gh-ij-android%/android/src/com/android/tools/idea/ui/resourcemanager/META-INF/resources-explorer.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.resourceImporter](https://jb.gg/ipe?extensions=com.android.resourceImporter) ![Non-Dynamic][non-dynamic] | [`ResourceImporter`](%gh-ij-android%/android/src/com/android/tools/idea/ui/resourcemanager/plugin/ResourceImporter.kt) |
| [com.android.resourceViewer](https://jb.gg/ipe?extensions=com.android.resourceViewer) ![Non-Dynamic][non-dynamic] | [`DesignAssetRenderer`](%gh-ij-android%/android/src/com/android/tools/idea/ui/resourcemanager/plugin/DesignAssetRenderer.kt) |

### safeargs.common.xml

[`safeargs.common.xml`](%gh-ij-android%/nav/safeargs/common/src/META-INF/safeargs.common.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.nav.safeargs.module.safeArgsModeToken](https://jb.gg/ipe?extensions=com.android.tools.idea.nav.safeargs.module.safeArgsModeToken) ![Non-Dynamic][non-dynamic] | [`SafeArgsModeToken`](%gh-ij-android%/nav/safeargs/common/src/com/android/tools/idea/nav/safeargs/module/SafeArgsModeModuleService.kt) |

### server-flags.xml

[`server-flags.xml`](%gh-ij-android%/server-flags/resources/META-INF/server-flags.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.android.tools.idea.mendelFlagsProvider](https://jb.gg/ipe?extensions=com.android.tools.idea.mendelFlagsProvider) ![Non-Dynamic][non-dynamic] | [`MendelFlagsProvider`](%gh-ij-android%/server-flags/src/com/android/tools/idea/mendel/MendelFlagsProvider.kt) |

[deprecated]: https://img.shields.io/badge/-Deprecated-lightgrey?style=flat-square
[removal]: https://img.shields.io/badge/-Removal-red?style=flat-square
[obsolete]: https://img.shields.io/badge/-Obsolete-grey?style=flat-square
[experimental]: https://img.shields.io/badge/-Experimental-violet?style=flat-square
[internal]: https://img.shields.io/badge/-Internal-darkred?style=flat-square
[project-level]: https://img.shields.io/badge/-Project--Level-blue?style=flat-square
[non-dynamic]: https://img.shields.io/badge/-Non--Dynamic-orange?style=flat-square
[dumb-aware]: https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Android Studio Plugin Development

<link-summary>Building plugins for Android Studio.</link-summary>

<tldr>

**IDE**: [Homepage](https://developer.android.com/studio), [Versions](#android-studio-releases-listing)

**Plugins**: [JetBrains Marketplace](https://plugins.jetbrains.com/androidstudio)

</tldr>

Android Studio plugins extend or add functionality to the [Android Studio IDE](https://developer.android.com/studio).

Android Studio plugins are not Android modules or apps to run in the Android operating system, such as smartphones or tablets.

## Android Studio Plugin Setup

### Matching Versions of the IntelliJ Platform with the Android Studio Version

For API compatibility, it is essential to match the version of the IntelliJ Platform APIs used for plugin development with the target version of Android Studio.
The version number of Android Studio contains the version of the underlying IntelliJ Platform APIs that were used to build it.

To find the version of the IntelliJ Platform used to build Android Studio, use the Android Studio <control>About</control> dialog screen:

![Example Android Studio About Dialog](android_studio_build.png){width="600"}

The actual Android Studio version doesn't entirely reflect the (YEAR.MAJOR.MINOR) version of the IntelliJ Platform.
The Android Studio version presented here is `2021.1.1 Patch 1`, but the `2021.1` part marked with the green rectangle refers to the IntelliJ IDEA release.

In this case, the (BRANCH.BUILD.FIX) version of the IntelliJ Platform is `211.7628.21` – marked with the blue rectangle – is corresponding to the IntelliJ IDEA version `2021.1.3`.

In the Gradle build script, both versions should be set: the build number and the release number.
To figure out the exact release number based on the build number, see [](android_studio_releases_list.md).

The [](#gradle-build-script) section below explains how to set the IntelliJ Platform version to match the target version of Android Studio.

### Android Studio Releases Listing

For the full list of Android Studio releases with more details, see [](android_studio_releases_list.md).

### Gradle Build Script

#### IntelliJ Platform Gradle Plugin (2.x)

Define a dependency using [`androidStudio()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md), see _Versions_ link on top of this page for all available versions.
See [](tools_intellij_platform_gradle_plugin.md#dependenciesLocalPlatform) for using a local installation.

A dependency on the bundled `org.jetbrains.android` plugin must be added using the [`bundledPlugin()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins) helper.

> Note that Android plugin is no longer bundled with the IDE.
>
> Use `plugin("org.jetbrains.android:$VERSION$")` instead of `bundledPlugin(...)`.
>
{title="Targeting 2023.3+"}

Minimum <path>build.gradle.kts</path> setup:

```kotlin
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    androidStudio("<versionNumber>")
    bundledPlugin("org.jetbrains.android")
  }
}
```

#### Gradle IntelliJ Plugin (1.x)

{collapsible="true" default-state="collapsed"}

The use-case of developing for a non-IntelliJ IDEA IDE is reviewed in the [Plugins Targeting Alternate IntelliJ Platform-Based IDEs](dev_alternate_products.md#gradle1) section.
The particular example in that section discusses configuring a plugin project for PhpStorm, so the details for an Android Studio plugin project are reviewed here.

Here are the steps to configure the Gradle build script for developing a plugin to target Android Studio:

* The Gradle plugin attributes describing the configuration of the [IntelliJ Platform used to build the plugin project](configuring_plugin_project.md#intellij-platform-configuration) must be explicitly set.
  Continuing with the example [above](#matching-versions-of-the-intellij-platform-with-the-android-studio-version), set the [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version) value to `191.8026.42`.
  Alternatively, specify [`intellij.localPath`](tools_gradle_intellij_plugin.md#intellij-extension-localpath) to refer to a local installation of Android Studio.
* Android Studio plugin projects that use APIs from the Android plugin must declare a dependency on that plugin with ID `org.jetbrains.android`.
  Declare the dependency in the Gradle build script using the [`intellij.plugins`](tools_gradle_intellij_plugin.md#intellij-extension-plugins) attribute.
* The best practice is to use the target version of Android Studio as the IDE Development Instance.
  Set the Development Instance to the (user-specific) absolute path to the target Android Studio application.

The snippet below is an example of configuring the Setup and Running DSLs in a Gradle build script.

<tabs>
<tab title="Kotlin">

```kotlin
intellij {
  // Define IntelliJ Platform against which to build the plugin project.

  // Same IntelliJ IDEA version (2019.1.4) as target 3.5 Android Studio:
  version.set("191.8026.42")

  // Use IntelliJ IDEA CE because it's the basis of the IntelliJ Platform:
  type.set("IC")

  // Require the Android plugin:
  plugins.set(listOf("org.jetbrains.android"))
}

tasks {
  runIde {
    // Absolute path to installed target 3.5 Android Studio to use as
    // IDE Development Instance (the "Contents" directory is macOS specific):
    ideDir.set(file("/Applications/Android Studio.app/Contents"))
  }
}
```

</tab>
<tab title="Groovy">

```groovy
intellij {
  // Define IntelliJ Platform against which to build the plugin project.

  // Same IntelliJ IDEA version (2019.1.4) as target 3.5 Android Studio:
  version = '191.8026.42'

  // Use IntelliJ IDEA CE because it's the basis of the IntelliJ Platform:
  type = 'IC'

  // Require the Android plugin:
  plugins = ['org.jetbrains.android']
}

runIde {
  // Absolute path to installed target 3.5 Android Studio to use as
  // IDE Development Instance (the "Contents" directory is macOS specific):
  ideDir = file('/Applications/Android Studio.app/Contents')
}
```

</tab>
</tabs>

### plugin.xml

The dependency on the Android APIs must be declared in the <path>[plugin.xml](plugin_configuration_file.md)</path> file.

When using APIs from the Android plugin, declare a dependency:

```xml
<depends>org.jetbrains.android</depends>
```

As discussed in the [Plugin Dependencies](plugin_compatibility.md#declaring-plugin-dependencies) section of this guide, a plugin's dependency on [Modules Specific to Functionality](plugin_compatibility.md#modules-specific-to-functionality) must be declared in <path>[plugin.xml](plugin_configuration_file.md)</path>.
When using Android Studio-specific features (APIs), a dependency on `com.intellij.modules.androidstudio` must be declared.

Otherwise, if only general IntelliJ Platform features (APIs) are used, then a dependency on `com.intellij.modules.platform` must be declared as discussed in [Plugin Compatibility with IntelliJ Platform Products](plugin_compatibility.md).

## Android Specific Extension Points

See [](android_plugin_extension_point_list.md).

## Additional Articles and Resources

* Discussion of extending Android Lint - [How to Register AndroidLintInspectionBase in IntelliJIdea Plugin](https://intellij-support.jetbrains.com/hc/en-us/community/posts/360005018559-How-to-register-AndroidLintInspectionBase-in-IntellijIdea-Plugin)
* Grzegorz Matyszczak's article [How I Automated Creating Files for a New Screen with My Own Android Studio Plugin](https://proandroiddev.com/how-i-automated-creating-files-for-a-new-screen-with-my-own-android-studio-plugin-5d54b14ba6fa)
* Marcos Holgado's article series [Write an Android Studio Plugin (Part 1)](https://proandroiddev.com/write-an-android-studio-plugin-part-1-creating-a-basic-plugin-af956c4f8b50)
* [Android Plugin README](https://github.com/JetBrains/android#contents)

## Open Source Plugins for Android Studio

When learning new development configurations, it is helpful to have some representative projects for reference:

* [ADB Idea](https://github.com/pbreault/adb-idea) plugin for Android Studio and IntelliJ IDEA that speeds up Android development.
* [Android postfix plugin](https://github.com/takahirom/android-postfix-plugin) for Android Studio.
* [Flutter Plugin](https://github.com/flutter/flutter-intellij).
* Bal Sikandar's [list of Android Studio plugins](https://github.com/balsikandar/Android-Studio-Plugins).

## FAQ

### How To Sync Gradle Project

Use [`GradleSyncInvoker.requestProjectSync()`](%gh-ij-android%/project-system-gradle/src/com/android/tools/idea/gradle/project/sync/GradleSyncInvoker.kt) for programmatic synchronization.


<snippet id="releases_table">

## 2024.*

| Release Name | Channel | Version | IntelliJ IDEA Version | Release Date |
|--------------|---------|---------|-----------------------|--------------|
| <p><b>Meerkat Feature Drop </b></p><p> 2024.3.2 Canary 3</p> | ![Canary][canary] | **2024.3.2.3**<p>AI&#8209;243.23654.117.2432.12988063</p> | **2024.3.2**<p>243.23654.117</p> | Feb&nbsp;3,&nbsp;2025 |
| <p><b>Meerkat Feature Drop </b></p><p> 2024.3.2 Canary 2</p> | ![Canary][canary] | **2024.3.2.2**<p>AI&#8209;243.22562.218.2432.12959061</p> | **2024.3.2**<p>243.22562.218</p> | Jan&nbsp;23,&nbsp;2025 |
| <p><b>Meerkat Feature Drop </b></p><p> 2024.3.2 Canary 1</p> | ![Canary][canary] | **2024.3.2.1**<p>AI&#8209;243.22562.218.2432.12933754</p> | **2024.3.2**<p>243.22562.218</p> | Jan&nbsp;21,&nbsp;2025 |
| <p><b>Meerkat </b></p><p> 2024.3.1 Beta 1</p> | ![Beta][beta] | **2024.3.1.10**<p>AI&#8209;243.22562.218.2431.12926017</p> | **2024.3.2**<p>243.22562.218</p> | Jan&nbsp;22,&nbsp;2025 |
| <p><b>Meerkat </b></p><p> 2024.3.1 Canary 9</p> | ![Canary][canary] | **2024.3.1.9**<p>AI&#8209;243.22562.218.2431.12894773</p> | **2024.3.2**<p>243.22562.218</p> | Jan&nbsp;10,&nbsp;2025 |
| <p><b>Meerkat </b></p><p> 2024.3.1 Canary 8</p> | ![Canary][canary] | **2024.3.1.8**<p>AI&#8209;243.22562.145.2431.12862218</p> | **2024.3.1**<p>243.22562.145</p> | Jan&nbsp;6,&nbsp;2025 |
| <p><b>Meerkat </b></p><p> 2024.3.1 Canary 7</p> | ![Canary][canary] | **2024.3.1.7**<p>AI&#8209;243.22562.145.2431.12832016</p> | **2024.3.1**<p>243.22562.145</p> | Dec&nbsp;23,&nbsp;2024 |
| <p><b>Meerkat </b></p><p> 2024.3.1 Canary 6</p> | ![Canary][canary] | **2024.3.1.6**<p>AI&#8209;243.22562.145.2431.12789491</p> | **2024.3.1**<p>243.22562.145</p> | Dec&nbsp;16,&nbsp;2024 |
| <p><b>Meerkat </b></p><p> 2024.3.1 Canary 5</p> | ![Canary][canary] | **2024.3.1.5**<p>AI&#8209;243.21565.193.2431.12752199</p> | **2024.3**<p>243.21565.193</p> | Dec&nbsp;12,&nbsp;2024 |
| <p><b>Meerkat </b></p><p> 2024.3.1 Canary 4</p> | ![Canary][canary] | **2024.3.1.4**<p>AI&#8209;243.21565.193.2431.12735582</p> | **2024.3**<p>243.21565.193</p> | Dec&nbsp;2,&nbsp;2024 |
| <p><b>Meerkat </b></p><p> 2024.3.1 Canary 3</p> | ![Canary][canary] | **2024.3.1.3**<p>AI&#8209;243.21565.193.2431.12691553</p> | **2024.3**<p>243.21565.193</p> | Nov&nbsp;21,&nbsp;2024 |
| <p><b>Meerkat </b></p><p> 2024.3.1 Canary 2</p> | ![Canary][canary] | **2024.3.1.2**<p>AI&#8209;243.21565.129.2431.12655144</p> | **2024.3**<p>243.21565.129</p> | Nov&nbsp;14,&nbsp;2024 |
| <p><b>Meerkat </b></p><p> 2024.3.1 Canary 1</p> | ![Canary][canary] | **2024.3.1.1**<p>AI&#8209;243.21565.23.2431.12637205</p> | **2024.3**<p>243.21565.23</p> | Nov&nbsp;12,&nbsp;2024 |
| <p><b>Ladybug Feature Drop </b></p><p> 2024.2.2</p> | ![Release][release] | **2024.2.2.13**<p>AI&#8209;242.23726.103.2422.12816248</p> | **2024.2.4**<p>242.23726.103</p> | Jan&nbsp;9,&nbsp;2025 |
| <p><b>Ladybug Feature Drop </b></p><p> 2024.2.2 RC 2</p> | ![RC][rc] | **2024.2.2.12**<p>AI&#8209;242.23726.103.2422.12785815</p> | **2024.2.4**<p>242.23726.103</p> | Dec&nbsp;16,&nbsp;2024 |
| <p><b>Ladybug Feature Drop </b></p><p> 2024.2.2 RC 1</p> | ![RC][rc] | **2024.2.2.11**<p>AI&#8209;242.23726.103.2422.12721465</p> | **2024.2.4**<p>242.23726.103</p> | Dec&nbsp;5,&nbsp;2024 |
| <p><b>Ladybug Feature Drop </b></p><p> 2024.2.2 Beta 1</p> | ![Beta][beta] | **2024.2.2.10**<p>AI&#8209;242.23726.103.2422.12630895</p> | **2024.2.4**<p>242.23726.103</p> | Nov&nbsp;18,&nbsp;2024 |
| <p><b>Ladybug Feature Drop </b></p><p> 2024.2.2 Canary 9</p> | ![Canary][canary] | **2024.2.2.9**<p>AI&#8209;242.23339.11.2422.12584204</p> | **2024.2.3**<p>242.23339.11</p> | Oct&nbsp;31,&nbsp;2024 |
| <p><b>Ladybug Feature Drop </b></p><p> 2024.2.2 Canary 8</p> | ![Canary][canary] | **2024.2.2.8**<p>AI&#8209;242.23339.11.2422.12548333</p> | **2024.2.3**<p>242.23339.11</p> | Oct&nbsp;25,&nbsp;2024 |
| <p><b>Ladybug Feature Drop </b></p><p> 2024.2.2 Canary 7</p> | ![Canary][canary] | **2024.2.2.7**<p>AI&#8209;242.23339.11.2422.12512484</p> | **2024.2.3**<p>242.23339.11</p> | Oct&nbsp;17,&nbsp;2024 |
| <p><b>Ladybug Feature Drop </b></p><p> 2024.2.2 Canary 6</p> | ![Canary][canary] | **2024.2.2.6**<p>AI&#8209;242.23339.11.2422.12480590</p> | **2024.2.3**<p>242.23339.11</p> | Oct&nbsp;14,&nbsp;2024 |
| <p><b>Ladybug Feature Drop </b></p><p> 2024.2.2 Canary 5</p> | ![Canary][canary] | **2024.2.2.5**<p>AI&#8209;242.23339.11.2422.12448552</p> | **2024.2.3**<p>242.23339.11</p> | Oct&nbsp;3,&nbsp;2024 |
| <p><b>Ladybug Feature Drop </b></p><p> 2024.2.2 Canary 4</p> | ![Canary][canary] | **2024.2.2.4**<p>AI&#8209;242.23339.11.2422.12417746</p> | **2024.2.3**<p>242.23339.11</p> | Sep&nbsp;26,&nbsp;2024 |
| <p><b>Ladybug Feature Drop </b></p><p> 2024.2.2 Canary 3</p> | ![Canary][canary] | **2024.2.2.3**<p>AI&#8209;242.21829.142.2422.12395834</p> | **2024.2.1**<p>242.21829.142</p> | Sep&nbsp;23,&nbsp;2024 |
| <p><b>Ladybug Feature Drop </b></p><p> 2024.2.2 Canary 2</p> | ![Canary][canary] | **2024.2.2.2**<p>AI&#8209;242.21829.142.2422.12358220</p> | **2024.2.1**<p>242.21829.142</p> | Sep&nbsp;12,&nbsp;2024 |
| <p><b>Ladybug Feature Drop </b></p><p> 2024.2.2 Canary 1</p> | ![Canary][canary] | **2024.2.2.1**<p>AI&#8209;242.21829.142.2422.12329062</p> | **2024.2.1**<p>242.21829.142</p> | Sep&nbsp;9,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.2.1 Patch 3</p> | ![Patch][patch] | **2024.2.1.12**<p>AI&#8209;242.23339.11.2421.12700392</p> | **2024.2.3**<p>242.23339.11</p> | Dec&nbsp;2,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.2.1 Patch 2</p> | ![Patch][patch] | **2024.2.1.11**<p>AI&#8209;242.23339.11.2421.12550806</p> | **2024.2.3**<p>242.23339.11</p> | Oct&nbsp;31,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.2.1 Patch 1</p> | ![Patch][patch] | **2024.2.1.10**<p>AI&#8209;242.23339.11.2421.12483815</p> | **2024.2.3**<p>242.23339.11</p> | Oct&nbsp;14,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.2.1</p> | ![Release][release] | **2024.2.1.9**<p>AI&#8209;242.21829.142.2421.12409432</p> | **2024.2.1**<p>242.21829.142</p> | Oct&nbsp;1,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.2.1 RC 1</p> | ![RC][rc] | **2024.2.1.8**<p>AI&#8209;242.21829.142.2421.12366423</p> | **2024.2.1**<p>242.21829.142</p> | Sep&nbsp;23,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.2.1 Beta 2</p> | ![Beta][beta] | **2024.2.1.7**<p>AI&#8209;242.21829.142.2421.12332550</p> | **2024.2.1**<p>242.21829.142</p> | Sep&nbsp;12,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.2.1 Beta 1</p> | ![Beta][beta] | **2024.2.1.6**<p>AI&#8209;242.20224.300.2421.12312915</p> | **2024.2**<p>242.20224.300</p> | Sep&nbsp;5,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.2.1 Canary 9</p> | ![Canary][canary] | **2024.2.1.5**<p>AI&#8209;242.20224.300.2421.12293307</p> | **2024.2**<p>242.20224.300</p> | Aug&nbsp;30,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.2.1 Canary 8</p> | ![Canary][canary] | **2024.2.1.4**<p>AI&#8209;242.20224.300.2421.12279409</p> | **2024.2**<p>242.20224.300</p> | Aug&nbsp;28,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.2.1 Canary 7</p> | ![Canary][canary] | **2024.2.1.3**<p>AI&#8209;242.20224.300.2421.12232258</p> | **2024.2**<p>242.20224.300</p> | Aug&nbsp;15,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.2.1 Canary 6</p> | ![Canary][canary] | **2024.2.1.2**<p>AI&#8209;242.20224.300.2421.12216002</p> | **2024.2**<p>242.20224.300</p> | Aug&nbsp;13,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.2.1 Canary 5</p> | ![Canary][canary] | **2024.2.1.1**<p>AI&#8209;242.20224.300.2421.12201251</p> | **2024.2**<p>242.20224.300</p> | Aug&nbsp;8,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.2.1 Canary 4</p> | ![Canary][canary] | **2024.2.1.1**<p>AI&#8209;242.20224.159.2421.12169541</p> | **2024.2**<p>242.20224.159</p> | Aug&nbsp;6,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.1.3 Canary 3</p> | ![Canary][canary] | **2024.1.3.3**<p>AI&#8209;241.18034.62.2413.12138059</p> | **2024.1.4**<p>241.18034.62</p> | Jul&nbsp;25,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.1.3 Canary 2</p> | ![Canary][canary] | **2024.1.3.2**<p>AI&#8209;241.18034.62.2413.12109192</p> | **2024.1.4**<p>241.18034.62</p> | Jul&nbsp;22,&nbsp;2024 |
| <p><b>Ladybug </b></p><p> 2024.1.3 Canary 1</p> | ![Canary][canary] | **2024.1.3.1**<p>AI&#8209;241.18034.62.2413.12081498</p> | **2024.1.4**<p>241.18034.62</p> | Jul&nbsp;15,&nbsp;2024 |
| <p><b>Koala Feature Drop </b></p><p> 2024.1.2 Patch 1</p> | ![Patch][patch] | **2024.1.2.13**<p>AI&#8209;241.19072.14.2412.12360217</p> | **2024.1.6**<p>241.19072.14</p> | Sep&nbsp;17,&nbsp;2024 |
| <p><b>Koala Feature Drop </b></p><p> 2024.1.2</p> | ![Release][release] | **2024.1.2.12**<p>AI&#8209;241.18034.62.2412.12266719</p> | **2024.1.4**<p>241.18034.62</p> | Aug&nbsp;29,&nbsp;2024 |
| <p><b>Koala Feature Drop </b></p><p> 2024.1.2 RC 1</p> | ![RC][rc] | **2024.1.2.11**<p>AI&#8209;241.18034.62.2412.12169539</p> | **2024.1.4**<p>241.18034.62</p> | Aug&nbsp;6,&nbsp;2024 |
| <p><b>Koala Feature Drop </b></p><p> 2024.1.2 Beta 2</p> | ![Beta][beta] | **2024.1.2.10**<p>AI&#8209;241.18034.62.2412.12084018</p> | **2024.1.4**<p>241.18034.62</p> | Jul&nbsp;24,&nbsp;2024 |
| <p><b>Koala Feature Drop </b></p><p> 2024.1.2 Beta 1</p> | ![Beta][beta] | **2024.1.2.9**<p>AI&#8209;241.18034.62.2412.12048879</p> | **2024.1.4**<p>241.18034.62</p> | Jul&nbsp;10,&nbsp;2024 |
| <p><b>Koala Feature Drop </b></p><p> 2024.1.2 Canary 8</p> | ![Canary][canary] | **2024.1.2.8**<p>AI&#8209;241.18034.62.2412.12022747</p> | **2024.1.4**<p>241.18034.62</p> | Jun&nbsp;27,&nbsp;2024 |
| <p><b>Koala Feature Drop </b></p><p> 2024.1.2 Canary 7</p> | ![Canary][canary] | **2024.1.2.7**<p>AI&#8209;241.17890.1.2412.11993144</p> | **2024.1.3**<p>241.17890.1</p> | Jun&nbsp;20,&nbsp;2024 |
| <p><b>Koala Feature Drop </b></p><p> 2024.1.2 Canary 6</p> | ![Canary][canary] | **2024.1.2.6**<p>AI&#8209;241.17890.1.2412.11972402</p> | **2024.1.3**<p>241.17890.1</p> | Jun&nbsp;17,&nbsp;2024 |
| <p><b>Koala Feature Drop </b></p><p> 2024.1.2 Canary 5</p> | ![Canary][canary] | **2024.1.2.5**<p>AI&#8209;241.17011.79.2412.11938461</p> | **2024.1.2**<p>241.17011.79</p> | Jun&nbsp;7,&nbsp;2024 |
| <p><b>Koala Feature Drop </b></p><p> 2024.1.2 Canary 4</p> | ![Canary][canary] | **2024.1.2.4**<p>AI&#8209;241.15989.150.2412.11905440</p> | **2024.1.1**<p>241.15989.150</p> | May&nbsp;30,&nbsp;2024 |
| <p><b>Koala Feature Drop </b></p><p> 2024.1.2 Canary 3</p> | ![Canary][canary] | **2024.1.2.3**<p>AI&#8209;241.15989.150.2412.11879573</p> | **2024.1.1**<p>241.15989.150</p> | May&nbsp;23,&nbsp;2024 |
| <p><b>Koala Feature Drop </b></p><p> 2024.1.2 Canary 2</p> | ![Canary][canary] | **2024.1.2.2**<p>AI&#8209;241.15989.150.2412.11851376</p> | **2024.1.1**<p>241.15989.150</p> | May&nbsp;17,&nbsp;2024 |
| <p><b>Koala Feature Drop </b></p><p> 2024.1.2 Canary 1</p> | ![Canary][canary] | **2024.1.2.1**<p>AI&#8209;241.15989.150.2412.11822507</p> | **2024.1.1**<p>241.15989.150</p> | May&nbsp;14,&nbsp;2024 |
| <p><b>Koala </b></p><p> 2024.1.1 Patch 2</p> | ![Patch][patch] | **2024.1.1.13**<p>AI&#8209;241.18034.62.2411.12169540</p> | **2024.1.4**<p>241.18034.62</p> | Aug&nbsp;8,&nbsp;2024 |
| <p><b>Koala </b></p><p> 2024.1.1 Patch 1</p> | ![Patch][patch] | **2024.1.1.12**<p>AI&#8209;241.18034.62.2411.12071903</p> | **2024.1.4**<p>241.18034.62</p> | Jul&nbsp;11,&nbsp;2024 |
| <p><b>Koala </b></p><p> 2024.1.1</p> | ![Release][release] | **2024.1.1.11**<p>AI&#8209;241.15989.150.2411.11948838</p> | **2024.1.1**<p>241.15989.150</p> | Jun&nbsp;13,&nbsp;2024 |
| <p><b>Koala </b></p><p> 2024.1.1 RC 2</p> | ![RC][rc] | **2024.1.1.10**<p>AI&#8209;241.15989.150.2411.11932844</p> | **2024.1.1**<p>241.15989.150</p> | Jun&nbsp;10,&nbsp;2024 |
| <p><b>Koala </b></p><p> 2024.1.1 RC 1</p> | ![RC][rc] | **2024.1.1.9**<p>AI&#8209;241.15989.150.2411.11887322</p> | **2024.1.1**<p>241.15989.150</p> | May&nbsp;30,&nbsp;2024 |
| <p><b>Koala </b></p><p> 2024.1.1 Beta 2</p> | ![Beta][beta] | **2024.1.1.8**<p>AI&#8209;241.15989.150.2411.11840554</p> | **2024.1.1**<p>241.15989.150</p> | May&nbsp;15,&nbsp;2024 |
| <p><b>Koala </b></p><p> 2024.1.1 Beta 1</p> | ![Beta][beta] | **2024.1.1.7**<p>AI&#8209;241.15989.150.2411.11801021</p> | **2024.1.1**<p>241.15989.150</p> | May&nbsp;10,&nbsp;2024 |
| <p><b>Koala </b></p><p> 2024.1.1 Canary 8</p> | ![Canary][canary] | **2024.1.1.6**<p>AI&#8209;241.15989.150.2411.11792637</p> | **2024.1.1**<p>241.15989.150</p> | May&nbsp;3,&nbsp;2024 |
| <p><b>Koala </b></p><p> 2024.1.1 Canary 7</p> | ![Canary][canary] | **2024.1.1.5**<p>AI&#8209;241.14494.240.2411.11771556</p> | **2024.1**<p>241.14494.240</p> | Apr&nbsp;29,&nbsp;2024 |
| <p><b>Koala </b></p><p> 2024.1.1 Canary 6</p> | ![Canary][canary] | **2024.1.1.4**<p>AI&#8209;241.14494.240.2411.11731683</p> | **2024.1**<p>241.14494.240</p> | Apr&nbsp;18,&nbsp;2024 |
| <p><b>Koala </b></p><p> 2024.1.1 Canary 5</p> | ![Canary][canary] | **2024.1.1.3**<p>AI&#8209;241.14494.240.2411.11700778</p> | **2024.1**<p>241.14494.240</p> | Apr&nbsp;11,&nbsp;2024 |
| <p><b>Koala </b></p><p> 2024.1.1 Canary 4</p> | ![Canary][canary] | **2024.1.1.2**<p>AI&#8209;241.14494.158.2411.11678081</p> | **2024.1**<p>241.14494.158</p> | Apr&nbsp;8,&nbsp;2024 |
| <p><b>Koala </b></p><p> 2024.1.1 Canary 3</p> | ![Canary][canary] | **2024.1.1.1**<p>AI&#8209;241.14494.158.2411.11648550</p> | **2024.1**<p>241.14494.158</p> | Apr&nbsp;2,&nbsp;2024 |



## 2023.*

| Release Name | Channel | Version | IntelliJ IDEA Version | Release Date |
|--------------|---------|---------|-----------------------|--------------|
| <p><b>Koala </b></p><p> 2023.3.2 Canary 2</p> | ![Canary][canary] | **2023.3.2.2**<p>AI&#8209;233.14475.28.2332.11606850</p> | **2023.3.4**<p>233.14475.28</p> | Mar&nbsp;22,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.2 Canary 1</p> | ![Canary][canary] | **2023.3.2.1**<p>AI&#8209;233.14475.28.2332.11578541</p> | **2023.3.4**<p>233.14475.28</p> | Mar&nbsp;19,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Patch 2</p> | ![Patch][patch] | **2023.3.1.20**<p>AI&#8209;233.14808.21.2331.11926650</p> | **2023.3.5**<p>233.14808.21</p> | Jun&nbsp;10,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Patch 1</p> | ![Patch][patch] | **2023.3.1.19**<p>AI&#8209;233.14808.21.2331.11842104</p> | **2023.3.5**<p>233.14808.21</p> | May&nbsp;20,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1</p> | ![Release][release] | **2023.3.1.18**<p>AI&#8209;233.14808.21.2331.11709847</p> | **2023.3.5**<p>233.14808.21</p> | Apr&nbsp;30,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 RC 2</p> | ![RC][rc] | **2023.3.1.17**<p>AI&#8209;233.14808.21.2331.11678080</p> | **2023.3.5**<p>233.14808.21</p> | Apr&nbsp;8,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 RC 1</p> | ![RC][rc] | **2023.3.1.16**<p>AI&#8209;233.14808.21.2331.11643467</p> | **2023.3.5**<p>233.14808.21</p> | Apr&nbsp;4,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Beta 2</p> | ![Beta][beta] | **2023.3.1.15**<p>AI&#8209;233.14808.21.2331.11608968</p> | **2023.3.5**<p>233.14808.21</p> | Mar&nbsp;27,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Beta 1</p> | ![Beta][beta] | **2023.3.1.14**<p>AI&#8209;233.14808.21.2331.11574862</p> | **2023.3.5**<p>233.14808.21</p> | Mar&nbsp;21,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Canary 13</p> | ![Canary][canary] | **2023.3.1.13**<p>AI&#8209;233.14475.28.2331.11543046</p> | **2023.3.4**<p>233.14475.28</p> | Mar&nbsp;7,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Canary 12</p> | ![Canary][canary] | **2023.3.1.12**<p>AI&#8209;233.14475.28.2331.11514062</p> | **2023.3.4**<p>233.14475.28</p> | Feb&nbsp;29,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Canary 11</p> | ![Canary][canary] | **2023.3.1.11**<p>AI&#8209;233.14475.28.2331.11483111</p> | **2023.3.4**<p>233.14475.28</p> | Feb&nbsp;22,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Canary 10</p> | ![Canary][canary] | **2023.3.1.10**<p>AI&#8209;233.14475.28.2331.11456607</p> | **2023.3.4**<p>233.14475.28</p> | Feb&nbsp;16,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Canary 9</p> | ![Canary][canary] | **2023.3.1.9**<p>AI&#8209;233.14015.106.2331.11423272</p> | **2023.3.3**<p>233.14015.106</p> | Feb&nbsp;8,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Canary 8</p> | ![Canary][canary] | **2023.3.1.8**<p>AI&#8209;233.14015.106.2331.11392117</p> | **2023.3.3**<p>233.14015.106</p> | Feb&nbsp;5,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Canary 7</p> | ![Canary][canary] | **2023.3.1.7**<p>AI&#8209;233.13135.103.2331.11360849</p> | **2023.3.2**<p>233.13135.103</p> | Jan&nbsp;26,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Canary 6</p> | ![Canary][canary] | **2023.3.1.6**<p>AI&#8209;233.13135.103.2331.11350331</p> | **2023.3.2**<p>233.13135.103</p> | Jan&nbsp;24,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Canary 5</p> | ![Canary][canary] | **2023.3.1.5**<p>AI&#8209;233.13135.103.2331.11329247</p> | **2023.3.2**<p>233.13135.103</p> | Jan&nbsp;22,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Canary 4</p> | ![Canary][canary] | **2023.3.1.4**<p>AI&#8209;233.13135.103.2331.11301475</p> | **2023.3.2**<p>233.13135.103</p> | Jan&nbsp;12,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Canary 3</p> | ![Canary][canary] | **2023.3.1.3**<p>AI&#8209;233.13135.103.2331.11273936</p> | **2023.3.2**<p>233.13135.103</p> | Jan&nbsp;4,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Canary 2</p> | ![Canary][canary] | **2023.3.1.2**<p>AI&#8209;233.13135.103.2331.11259770</p> | **2023.3.2**<p>233.13135.103</p> | Jan&nbsp;2,&nbsp;2024 |
| <p><b>Jellyfish </b></p><p> 2023.3.1 Canary 1</p> | ![Canary][canary] | **2023.3.1.1**<p>AI&#8209;233.13135.103.2331.11247450</p> | **2023.3.2**<p>233.13135.103</p> | Dec&nbsp;28,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Patch 2</p> | ![Patch][patch] | **2023.2.1.25**<p>AI&#8209;232.10300.40.2321.11668458</p> | **2023.2.6**<p>232.10300.40</p> | Apr&nbsp;9,&nbsp;2024 |
| <p><b>Iguana </b></p><p> 2023.2.1 Patch 1</p> | ![Patch][patch] | **2023.2.1.24**<p>AI&#8209;232.10300.40.2321.11567975</p> | **2023.2.6**<p>232.10300.40</p> | Mar&nbsp;18,&nbsp;2024 |
| <p><b>Iguana </b></p><p> 2023.2.1</p> | ![Release][release] | **2023.2.1.23**<p>AI&#8209;232.10227.8.2321.11479570</p> | **2023.2.5**<p>232.10227.8</p> | Feb&nbsp;29,&nbsp;2024 |
| <p><b>Iguana </b></p><p> 2023.2.1 RC 2</p> | ![RC][rc] | **2023.2.1.22**<p>AI&#8209;232.10227.8.2321.11429013</p> | **2023.2.5**<p>232.10227.8</p> | Feb&nbsp;13,&nbsp;2024 |
| <p><b>Iguana </b></p><p> 2023.2.1 RC 1</p> | ![RC][rc] | **2023.2.1.21**<p>AI&#8209;232.10227.8.2321.11379558</p> | **2023.2.5**<p>232.10227.8</p> | Feb&nbsp;5,&nbsp;2024 |
| <p><b>Iguana </b></p><p> 2023.2.1 Beta 2</p> | ![Beta][beta] | **2023.2.1.20**<p>AI&#8209;232.10227.8.2321.11280706</p> | **2023.2.5**<p>232.10227.8</p> | Jan&nbsp;10,&nbsp;2024 |
| <p><b>Iguana </b></p><p> 2023.2.1 Beta 1</p> | ![Beta][beta] | **2023.2.1.19**<p>AI&#8209;232.10227.8.2321.11231672</p> | **2023.2.5**<p>232.10227.8</p> | Dec&nbsp;26,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 18</p> | ![Canary][canary] | **2023.2.1.18**<p>AI&#8209;232.10227.8.2321.11203637</p> | **2023.2.5**<p>232.10227.8</p> | Dec&nbsp;13,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 17</p> | ![Canary][canary] | **2023.2.1.17**<p>AI&#8209;232.10227.8.2321.11191411</p> | **2023.2.5**<p>232.10227.8</p> | Dec&nbsp;7,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 16</p> | ![Canary][canary] | **2023.2.1.16**<p>AI&#8209;232.10227.8.2321.11161997</p> | **2023.2.5**<p>232.10227.8</p> | Nov&nbsp;30,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 15</p> | ![Canary][canary] | **2023.2.1.15**<p>AI&#8209;232.10227.8.2321.11145877</p> | **2023.2.5**<p>232.10227.8</p> | Nov&nbsp;28,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 14</p> | ![Canary][canary] | **2023.2.1.14**<p>AI&#8209;232.10227.8.2321.11110254</p> | **2023.2.5**<p>232.10227.8</p> | Nov&nbsp;16,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 13</p> | ![Canary][canary] | **2023.2.1.13**<p>AI&#8209;232.10203.10.2321.11075088</p> | **2023.2.4**<p>232.10203.10</p> | Nov&nbsp;9,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 12</p> | ![Canary][canary] | **2023.2.1.12**<p>AI&#8209;232.10203.10.2321.11040444</p> | **2023.2.4**<p>232.10203.10</p> | Nov&nbsp;2,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 11</p> | ![Canary][canary] | **2023.2.1.11**<p>AI&#8209;232.10072.27.2321.11006994</p> | **2023.2.3**<p>232.10072.27</p> | Oct&nbsp;26,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 10</p> | ![Canary][canary] | **2023.2.1.10**<p>AI&#8209;232.10072.27.2321.10984096</p> | **2023.2.3**<p>232.10072.27</p> | Oct&nbsp;23,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 9</p> | ![Canary][canary] | **2023.2.1.9**<p>AI&#8209;232.10072.27.2321.10977308</p> | **2023.2.3**<p>232.10072.27</p> | Oct&nbsp;19,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 8</p> | ![Canary][canary] | **2023.2.1.8**<p>AI&#8209;232.9921.47.2321.10958940</p> | **2023.2.2**<p>232.9921.47</p> | Oct&nbsp;19,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 7</p> | ![Canary][canary] | **2023.2.1.7**<p>AI&#8209;232.9921.47.2321.10905494</p> | **2023.2.2**<p>232.9921.47</p> | Oct&nbsp;5,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 6</p> | ![Canary][canary] | **2023.2.1.6**<p>AI&#8209;232.9921.47.2321.10875067</p> | **2023.2.2**<p>232.9921.47</p> | Sep&nbsp;28,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 5</p> | ![Canary][canary] | **2023.2.1.5**<p>AI&#8209;232.9921.47.2321.10840167</p> | **2023.2.2**<p>232.9921.47</p> | Sep&nbsp;21,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 4</p> | ![Canary][canary] | **2023.2.1.4**<p>AI&#8209;232.9921.47.2321.10809744</p> | **2023.2.2**<p>232.9921.47</p> | Sep&nbsp;15,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 3</p> | ![Canary][canary] | **2023.2.1.3**<p>AI&#8209;232.9559.62.2321.10773421</p> | **2023.2.1**<p>232.9559.62</p> | Sep&nbsp;7,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 2</p> | ![Canary][canary] | **2023.2.1.2**<p>AI&#8209;232.9559.62.2321.10749089</p> | **2023.2.1**<p>232.9559.62</p> | Sep&nbsp;5,&nbsp;2023 |
| <p><b>Iguana </b></p><p> 2023.2.1 Canary 1</p> | ![Canary][canary] | **2023.2.1.1**<p>AI&#8209;232.8660.185.2321.10696284</p> | **2023.2**<p>232.8660.185</p> | Aug&nbsp;25,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Patch 2</p> | ![Patch][patch] | **2023.1.1.28**<p>AI&#8209;231.9392.1.2311.11330709</p> | **2023.1.5**<p>231.9392.1</p> | Jan&nbsp;23,&nbsp;2024 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Patch 1</p> | ![Patch][patch] | **2023.1.1.27**<p>AI&#8209;231.9392.1.2311.11255304</p> | **2023.1.5**<p>231.9392.1</p> | Jan&nbsp;3,&nbsp;2024 |
| <p><b>Hedgehog </b></p><p> 2023.1.1</p> | ![Release][release] | **2023.1.1.26**<p>AI&#8209;231.9392.1.2311.11076708</p> | **2023.1.5**<p>231.9392.1</p> | Nov&nbsp;30,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 RC 3</p> | ![RC][rc] | **2023.1.1.25**<p>AI&#8209;231.9392.1.2311.11047128</p> | **2023.1.5**<p>231.9392.1</p> | Nov&nbsp;9,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 RC 2</p> | ![RC][rc] | **2023.1.1.24**<p>AI&#8209;231.9392.1.2311.10980684</p> | **2023.1.5**<p>231.9392.1</p> | Oct&nbsp;30,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 RC 1</p> | ![RC][rc] | **2023.1.1.23**<p>AI&#8209;231.9392.1.2311.10949950</p> | **2023.1.5**<p>231.9392.1</p> | Oct&nbsp;17,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Beta 6</p> | ![Beta][beta] | **2023.1.1.22**<p>AI&#8209;231.9392.1.2311.10844163</p> | **2023.1.5**<p>231.9392.1</p> | Sep&nbsp;27,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Beta 5</p> | ![Beta][beta] | **2023.1.1.21**<p>AI&#8209;231.9392.1.2311.10809438</p> | **2023.1.5**<p>231.9392.1</p> | Sep&nbsp;21,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Beta 4</p> | ![Beta][beta] | **2023.1.1.20**<p>AI&#8209;231.9392.1.2311.10779794</p> | **2023.1.5**<p>231.9392.1</p> | Sep&nbsp;13,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Beta 3</p> | ![Beta][beta] | **2023.1.1.19**<p>AI&#8209;231.9392.1.2311.10749307</p> | **2023.1.5**<p>231.9392.1</p> | Sep&nbsp;7,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Beta 2</p> | ![Beta][beta] | **2023.1.1.18**<p>AI&#8209;231.9392.1.2311.10717887</p> | **2023.1.5**<p>231.9392.1</p> | Sep&nbsp;5,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Beta 1</p> | ![Beta][beta] | **2023.1.1.17**<p>AI&#8209;231.9392.1.2311.10680768</p> | **2023.1.5**<p>231.9392.1</p> | Aug&nbsp;24,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 16</p> | ![Canary][canary] | **2023.1.1.16**<p>AI&#8209;231.9225.16.2311.10647019</p> | **2023.1.4**<p>231.9225.16</p> | Aug&nbsp;14,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 15</p> | ![Canary][canary] | **2023.1.1.15**<p>AI&#8209;231.9225.16.2311.10572941</p> | **2023.1.4**<p>231.9225.16</p> | Jul&nbsp;31,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 14</p> | ![Canary][canary] | **2023.1.1.14**<p>AI&#8209;231.9225.16.2311.10533651</p> | **2023.1.4**<p>231.9225.16</p> | Jul&nbsp;25,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 13</p> | ![Canary][canary] | **2023.1.1.13**<p>AI&#8209;231.9161.38.2311.10491752</p> | **2023.1.3**<p>231.9161.38</p> | Jul&nbsp;18,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 12</p> | ![Canary][canary] | **2023.1.1.12**<p>AI&#8209;231.9161.38.2311.10457801</p> | **2023.1.3**<p>231.9161.38</p> | Jul&nbsp;11,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 11</p> | ![Canary][canary] | **2023.1.1.11**<p>AI&#8209;231.9161.38.2311.10413018</p> | **2023.1.3**<p>231.9161.38</p> | Jul&nbsp;6,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 10</p> | ![Canary][canary] | **2023.1.1.10**<p>AI&#8209;231.9011.34.2311.10366083</p> | **2023.1.2**<p>231.9011.34</p> | Jun&nbsp;27,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 9</p> | ![Canary][canary] | **2023.1.1.9**<p>AI&#8209;231.9011.34.2311.10335024</p> | **2023.1.2**<p>231.9011.34</p> | Jun&nbsp;20,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 8</p> | ![Canary][canary] | **2023.1.1.8**<p>AI&#8209;231.9011.34.2311.10290408</p> | **2023.1.2**<p>231.9011.34</p> | Jun&nbsp;13,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 7</p> | ![Canary][canary] | **2023.1.1.7**<p>AI&#8209;231.9011.34.2311.10238683</p> | **2023.1.2**<p>231.9011.34</p> | Jun&nbsp;6,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 6</p> | ![Canary][canary] | **2023.1.1.6**<p>AI&#8209;231.8109.175.2311.10205233</p> | **2023.1**<p>231.8109.175</p> | May&nbsp;30,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 5</p> | ![Canary][canary] | **2023.1.1.5**<p>AI&#8209;231.7864.76.2311.10195651</p> | **2023.1**<p>231.7864.76</p> | May&nbsp;25,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 4</p> | ![Canary][canary] | **2023.1.1.4**<p>AI&#8209;231.7864.76.2311.10114981</p> | **2023.1**<p>231.7864.76</p> | May&nbsp;16,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 3</p> | ![Canary][canary] | **2023.1.1.3**<p>AI&#8209;231.7864.76.2311.10101468</p> | **2023.1**<p>231.7864.76</p> | May&nbsp;10,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 2</p> | ![Canary][canary] | **2023.1.1.2**<p>AI&#8209;231.6890.12.2311.10027519</p> | **2023.1**<p>231.6890.12</p> | May&nbsp;2,&nbsp;2023 |
| <p><b>Hedgehog </b></p><p> 2023.1.1 Canary 1</p> | ![Canary][canary] | **2023.1.1.1**<p>AI&#8209;223.8836.35.2311.9976484</p> | **2022.3.3**<p>223.8836.35</p> | Apr&nbsp;25,&nbsp;2023 |



## 2022.*

| Release Name | Channel | Version | IntelliJ IDEA Version | Release Date |
|--------------|---------|---------|-----------------------|--------------|
| <p><b>Giraffe </b></p><p> 2022.3.1 Patch 4</p> | ![Patch][patch] | **2022.3.1.22**<p>AI&#8209;223.8836.35.2231.11090377</p> | **2022.3.3**<p>223.8836.35</p> | Nov&nbsp;16,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Patch 3</p> | ![Patch][patch] | **2022.3.1.21**<p>AI&#8209;223.8836.35.2231.11005911</p> | **2022.3.3**<p>223.8836.35</p> | Nov&nbsp;7,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Patch 2</p> | ![Patch][patch] | **2022.3.1.20**<p>AI&#8209;223.8836.35.2231.10811636</p> | **2022.3.3**<p>223.8836.35</p> | Sep&nbsp;28,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Patch 1</p> | ![Patch][patch] | **2022.3.1.19**<p>AI&#8209;223.8836.35.2231.10671973</p> | **2022.3.3**<p>223.8836.35</p> | Aug&nbsp;21,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1</p> | ![Release][release] | **2022.3.1.18**<p>AI&#8209;223.8836.35.2231.10406996</p> | **2022.3.3**<p>223.8836.35</p> | Jul&nbsp;25,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 RC 1</p> | ![RC][rc] | **2022.3.1.17**<p>AI&#8209;223.8836.35.2231.10320515</p> | **2022.3.3**<p>223.8836.35</p> | Jun&nbsp;22,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Beta 5</p> | ![Beta][beta] | **2022.3.1.16**<p>AI&#8209;223.8836.35.2231.10271316</p> | **2022.3.3**<p>223.8836.35</p> | Jun&nbsp;8,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Beta 4</p> | ![Beta][beta] | **2022.3.1.15**<p>AI&#8209;223.8836.35.2231.10190587</p> | **2022.3.3**<p>223.8836.35</p> | May&nbsp;30,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Beta 3</p> | ![Beta][beta] | **2022.3.1.14**<p>AI&#8209;223.8836.35.2231.10075884</p> | **2022.3.3**<p>223.8836.35</p> | May&nbsp;16,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Beta 2</p> | ![Beta][beta] | **2022.3.1.13**<p>AI&#8209;223.8836.35.2231.10023527</p> | **2022.3.3**<p>223.8836.35</p> | May&nbsp;8,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Beta 1</p> | ![Beta][beta] | **2022.3.1.12**<p>AI&#8209;223.8836.35.2231.9923731</p> | **2022.3.3**<p>223.8836.35</p> | Apr&nbsp;20,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Canary 11</p> | ![Canary][canary] | **2022.3.1.11**<p>AI&#8209;223.8836.35.2231.9848316</p> | **2022.3.3**<p>223.8836.35</p> | Mar&nbsp;30,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Canary 10</p> | ![Canary][canary] | **2022.3.1.10**<p>AI&#8209;223.8836.35.2231.9762515</p> | **2022.3.3**<p>223.8836.35</p> | Mar&nbsp;21,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Canary 9</p> | ![Canary][canary] | **2022.3.1.9**<p>AI&#8209;223.8617.56.2231.9716135</p> | **2022.3.2**<p>223.8617.56</p> | Mar&nbsp;14,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Canary 8</p> | ![Canary][canary] | **2022.3.1.8**<p>AI&#8209;223.8617.56.2231.9687552</p> | **2022.3.2**<p>223.8617.56</p> | Mar&nbsp;6,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Canary 7</p> | ![Canary][canary] | **2022.3.1.7**<p>AI&#8209;223.8617.56.2231.9644228</p> | **2022.3.2**<p>223.8617.56</p> | Feb&nbsp;27,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Canary 6</p> | ![Canary][canary] | **2022.3.1.6**<p>AI&#8209;223.8214.52.2231.9615888</p> | **2022.3.1**<p>223.8214.52</p> | Feb&nbsp;21,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Canary 5</p> | ![Canary][canary] | **2022.3.1.5**<p>AI&#8209;223.8214.52.2231.9601041</p> | **2022.3.1**<p>223.8214.52</p> | Feb&nbsp;16,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Canary 4</p> | ![Canary][canary] | **2022.3.1.4**<p>AI&#8209;223.7571.182.2231.9569140</p> | **2022.3**<p>223.7571.182</p> | Feb&nbsp;9,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Canary 3</p> | ![Canary][canary] | **2022.3.1.3**<p>AI&#8209;223.7571.182.2231.9532861</p> | **2022.3**<p>223.7571.182</p> | Feb&nbsp;7,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Canary 2</p> | ![Canary][canary] | **2022.3.1.2**<p>AI&#8209;223.7571.182.2231.9523943</p> | **2022.3**<p>223.7571.182</p> | Jan&nbsp;26,&nbsp;2023 |
| <p><b>Giraffe </b></p><p> 2022.3.1 Canary 1</p> | ![Canary][canary] | **2022.3.1.1**<p>AI&#8209;223.4884.69.2231.9486165</p> | **2022.3**<p>223.4884.69</p> | Jan&nbsp;17,&nbsp;2023 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Patch 2</p> | ![Patch][patch] | **2022.2.1.20**<p>AI&#8209;222.4459.24.2221.10121639</p> | **2022.2.4**<p>222.4459.24</p> | May&nbsp;24,&nbsp;2023 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Patch 1</p> | ![Patch][patch] | **2022.2.1.19**<p>AI&#8209;222.4459.24.2221.9971841</p> | **2022.2.4**<p>222.4459.24</p> | May&nbsp;1,&nbsp;2023 |
| <p><b>Flamingo </b></p><p> 2022.2.1</p> | ![Release][release] | **2022.2.1.18**<p>AI&#8209;222.4459.24.2221.9862592</p> | **2022.2.4**<p>222.4459.24</p> | Apr&nbsp;13,&nbsp;2023 |
| <p><b>Flamingo </b></p><p> 2022.2.1 RC 1</p> | ![RC][rc] | **2022.2.1.17**<p>AI&#8209;222.4459.24.2221.9787799</p> | **2022.2.4**<p>222.4459.24</p> | Mar&nbsp;27,&nbsp;2023 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Beta 5</p> | ![Beta][beta] | **2022.2.1.16**<p>AI&#8209;222.4459.24.2221.9682058</p> | **2022.2.4**<p>222.4459.24</p> | Mar&nbsp;9,&nbsp;2023 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Beta 4</p> | ![Beta][beta] | **2022.2.1.15**<p>AI&#8209;222.4459.24.2221.9645777</p> | **2022.2.4**<p>222.4459.24</p> | Mar&nbsp;2,&nbsp;2023 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Beta 3</p> | ![Beta][beta] | **2022.2.1.14**<p>AI&#8209;222.4459.24.2221.9601061</p> | **2022.2.4**<p>222.4459.24</p> | Feb&nbsp;16,&nbsp;2023 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Beta 2</p> | ![Beta][beta] | **2022.2.1.13**<p>AI&#8209;222.4459.24.2221.9526055</p> | **2022.2.4**<p>222.4459.24</p> | Feb&nbsp;7,&nbsp;2023 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Beta 1</p> | ![Beta][beta] | **2022.2.1.12**<p>AI&#8209;222.4459.24.2221.9471578</p> | **2022.2.4**<p>222.4459.24</p> | Jan&nbsp;17,&nbsp;2023 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Canary 11</p> | ![Canary][canary] | **2022.2.1.11**<p>AI&#8209;222.4459.24.2221.9445173</p> | **2022.2.4**<p>222.4459.24</p> | Jan&nbsp;4,&nbsp;2023 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Canary 10</p> | ![Canary][canary] | **2022.2.1.10**<p>AI&#8209;222.4459.24.2221.9409768</p> | **2022.2.4**<p>222.4459.24</p> | Dec&nbsp;21,&nbsp;2022 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Canary 9</p> | ![Canary][canary] | **2022.2.1.9**<p>AI&#8209;222.4345.14.2221.9321504</p> | **2022.2.3**<p>222.4345.14</p> | Nov&nbsp;30,&nbsp;2022 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Canary 8</p> | ![Canary][canary] | **2022.2.1.8**<p>AI&#8209;222.4345.14.2221.9252092</p> | **2022.2.3**<p>222.4345.14</p> | Nov&nbsp;7,&nbsp;2022 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Canary 7</p> | ![Canary][canary] | **2022.2.1.7**<p>AI&#8209;222.4345.14.2221.9228443</p> | **2022.2.3**<p>222.4345.14</p> | Nov&nbsp;2,&nbsp;2022 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Canary 6</p> | ![Canary][canary] | **2022.2.1.6**<p>AI&#8209;222.4345.14.2221.9189903</p> | **2022.2.3**<p>222.4345.14</p> | Oct&nbsp;24,&nbsp;2022 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Canary 5</p> | ![Canary][canary] | **2022.2.1.5**<p>AI&#8209;222.4345.14.2221.9178080</p> | **2022.2.3**<p>222.4345.14</p> | Oct&nbsp;18,&nbsp;2022 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Canary 4</p> | ![Canary][canary] | **2022.2.1.4**<p>AI&#8209;222.4167.29.2221.9153536</p> | **2022.2.2**<p>222.4167.29</p> | Oct&nbsp;14,&nbsp;2022 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Canary 3</p> | ![Canary][canary] | **2022.2.1.3**<p>AI&#8209;222.4167.29.2221.9133400</p> | **2022.2.2**<p>222.4167.29</p> | Oct&nbsp;6,&nbsp;2022 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Canary 2</p> | ![Canary][canary] | **2022.2.1.2**<p>AI&#8209;222.4167.29.2221.9093980</p> | **2022.2.2**<p>222.4167.29</p> | Sep&nbsp;27,&nbsp;2022 |
| <p><b>Flamingo </b></p><p> 2022.2.1 Canary 1</p> | ![Canary][canary] | **2022.2.1.1**<p>AI&#8209;222.3739.54.2221.9043926</p> | **2022.2.1**<p>222.3739.54</p> | Sep&nbsp;20,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Patch 2</p> | ![Patch][patch] | **2022.1.1.21**<p>AI&#8209;221.6008.13.2211.9619390</p> | **2022.1.4**<p>221.6008.13</p> | Feb&nbsp;27,&nbsp;2023 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Patch 1</p> | ![Patch][patch] | **2022.1.1.20**<p>AI&#8209;221.6008.13.2211.9514443</p> | **2022.1.4**<p>221.6008.13</p> | Jan&nbsp;31,&nbsp;2023 |
| <p><b>Electric Eel </b></p><p> 2022.1.1</p> | ![Release][release] | **2022.1.1.19**<p>AI&#8209;221.6008.13.2211.9477386</p> | **2022.1.4**<p>221.6008.13</p> | Jan&nbsp;12,&nbsp;2023 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 RC 3</p> | ![RC][rc] | **2022.1.1.18**<p>AI&#8209;221.6008.13.2211.9424903</p> | **2022.1.4**<p>221.6008.13</p> | Dec&nbsp;27,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 RC 2</p> | ![RC][rc] | **2022.1.1.17**<p>AI&#8209;221.6008.13.2211.9392097</p> | **2022.1.4**<p>221.6008.13</p> | Dec&nbsp;21,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 RC 1</p> | ![RC][rc] | **2022.1.1.16**<p>AI&#8209;221.6008.13.2211.9301383</p> | **2022.1.4**<p>221.6008.13</p> | Nov&nbsp;30,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Beta 5</p> | ![Beta][beta] | **2022.1.1.15**<p>AI&#8209;221.6008.13.2211.9237616</p> | **2022.1.4**<p>221.6008.13</p> | Nov&nbsp;7,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Beta 4</p> | ![Beta][beta] | **2022.1.1.14**<p>AI&#8209;221.6008.13.2211.9208527</p> | **2022.1.4**<p>221.6008.13</p> | Oct&nbsp;28,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Beta 3</p> | ![Beta][beta] | **2022.1.1.13**<p>AI&#8209;221.6008.13.2211.9173235</p> | **2022.1.4**<p>221.6008.13</p> | Oct&nbsp;24,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Beta 2</p> | ![Beta][beta] | **2022.1.1.12**<p>AI&#8209;221.6008.13.2211.9113387</p> | **2022.1.4**<p>221.6008.13</p> | Oct&nbsp;3,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Beta 1</p> | ![Beta][beta] | **2022.1.1.11**<p>AI&#8209;221.6008.13.2211.9039819</p> | **2022.1.4**<p>221.6008.13</p> | Sep&nbsp;20,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Canary 10</p> | ![Canary][canary] | **2022.1.1.10**<p>AI&#8209;221.6008.13.2211.8963757</p> | **2022.1.4**<p>221.6008.13</p> | Aug&nbsp;26,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Canary 9</p> | ![Canary][canary] | **2022.1.1.9**<p>AI&#8209;221.5921.22.2211.8881706</p> | **2022.1.3**<p>221.5921.22</p> | Aug&nbsp;3,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Canary 8</p> | ![Canary][canary] | **2022.1.1.8**<p>AI&#8209;221.5921.22.2211.8786657</p> | **2022.1.3**<p>221.5921.22</p> | Jul&nbsp;6,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Canary 7</p> | ![Canary][canary] | **2022.1.1.7**<p>AI&#8209;221.5591.52.2211.8767654</p> | **2022.1.1**<p>221.5591.52</p> | Jun&nbsp;29,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Canary 6</p> | ![Canary][canary] | **2022.1.1.6**<p>AI&#8209;221.4501.155.2211.8738788</p> | **2022.1**<p>221.4501.155</p> | Jun&nbsp;27,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Canary 5</p> | ![Canary][canary] | **2022.1.1.5**<p>AI&#8209;221.4165.146.2211.8713749</p> | **2022.1**<p>221.4165.146</p> | Jun&nbsp;16,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Canary 4</p> | ![Canary][canary] | **2022.1.1.4**<p>AI&#8209;221.3427.89.2211.8689873</p> | **2022.1**<p>221.3427.89</p> | Jun&nbsp;13,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Canary 3</p> | ![Canary][canary] | **2022.1.1.3**<p>AI&#8209;213.7172.25.2211.8624637</p> | **2021.3.3**<p>213.7172.25</p> | Jun&nbsp;3,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Canary 2</p> | ![Canary][canary] | **2022.1.1.2**<p>AI&#8209;213.7172.25.2211.8571212</p> | **2021.3.3**<p>213.7172.25</p> | May&nbsp;13,&nbsp;2022 |
| <p><b>Electric Eel </b></p><p> 2022.1.1 Canary 1</p> | ![Canary][canary] | **2022.1.1.1**<p>AI&#8209;213.7172.25.2211.8563311</p> | **2021.3.3**<p>213.7172.25</p> | May&nbsp;11,&nbsp;2022 |



## 2021.*

| Release Name | Channel | Version | IntelliJ IDEA Version | Release Date |
|--------------|---------|---------|-----------------------|--------------|
| <p><b>Dolphin </b></p><p> 2021.3.1 Patch 1</p> | ![Patch][patch] | **2021.3.1.17**<p>AI&#8209;213.7172.25.2113.9123335</p> | **2021.3.3**<p>213.7172.25</p> | Oct&nbsp;13,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1</p> | ![Release][release] | **2021.3.1.16**<p>AI&#8209;213.7172.25.2113.9014738</p> | **2021.3.3**<p>213.7172.25</p> | Sep&nbsp;15,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1 RC 1</p> | ![RC][rc] | **2021.3.1.15**<p>AI&#8209;213.7172.25.2113.8913347</p> | **2021.3.3**<p>213.7172.25</p> | Aug&nbsp;16,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1 Beta 5</p> | ![Beta][beta] | **2021.3.1.14**<p>AI&#8209;213.7172.25.2113.8774922</p> | **2021.3.3**<p>213.7172.25</p> | Jul&nbsp;7,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1 Beta 4</p> | ![Beta][beta] | **2021.3.1.13**<p>AI&#8209;213.7172.25.2113.8718688</p> | **2021.3.3**<p>213.7172.25</p> | Jun&nbsp;22,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1 Beta 3</p> | ![Beta][beta] | **2021.3.1.12**<p>AI&#8209;213.7172.25.2113.8684940</p> | **2021.3.3**<p>213.7172.25</p> | Jun&nbsp;13,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1 Beta 1</p> | ![Beta][beta] | **2021.3.1.10**<p>AI&#8209;213.7172.25.2113.8565817</p> | **2021.3.3**<p>213.7172.25</p> | May&nbsp;11,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1 Canary 9</p> | ![Canary][canary] | **2021.3.1.9**<p>AI&#8209;213.7172.25.2113.8473230</p> | **2021.3.3**<p>213.7172.25</p> | Apr&nbsp;21,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1 Canary 8</p> | ![Canary][canary] | **2021.3.1.8**<p>AI&#8209;213.7172.25.2113.8421465</p> | **2021.3.3**<p>213.7172.25</p> | Apr&nbsp;11,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1 Canary 7</p> | ![Canary][canary] | **2021.3.1.7**<p>AI&#8209;213.6777.52.2113.8305692</p> | **2021.3.2**<p>213.6777.52</p> | Mar&nbsp;17,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1 Canary 6</p> | ![Canary][canary] | **2021.3.1.6**<p>AI&#8209;213.6777.52.2113.8265607</p> | **2021.3.2**<p>213.6777.52</p> | Mar&nbsp;14,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1 Canary 5</p> | ![Canary][canary] | **2021.3.1.5**<p>AI&#8209;213.6777.52.2113.8233036</p> | **2021.3.2**<p>213.6777.52</p> | Mar&nbsp;3,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1 Canary 4</p> | ![Canary][canary] | **2021.3.1.4**<p>AI&#8209;213.6777.52.2113.8195552</p> | **2021.3.2**<p>213.6777.52</p> | Feb&nbsp;28,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1 Canary 3</p> | ![Canary][canary] | **2021.3.1.3**<p>AI&#8209;213.6777.52.2113.8172706</p> | **2021.3.2**<p>213.6777.52</p> | Feb&nbsp;14,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1 Canary 2</p> | ![Canary][canary] | **2021.3.1.2**<p>AI&#8209;213.6777.52.2113.8156070</p> | **2021.3.2**<p>213.6777.52</p> | Feb&nbsp;9,&nbsp;2022 |
| <p><b>Dolphin </b></p><p> 2021.3.1 Canary 1</p> | ![Canary][canary] | **2021.3.1.1**<p>AI&#8209;213.5744.223.2113.8103819</p> | **2021.3**<p>213.5744.223</p> | Jan&nbsp;31,&nbsp;2022 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 Patch 2</p> | ![Patch][patch] | **2021.2.1.16**<p>AI&#8209;212.5712.43.2112.8815526</p> | **2021.2.4**<p>212.5712.43</p> | Aug&nbsp;3,&nbsp;2022 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 Patch 1</p> | ![Patch][patch] | **2021.2.1.15**<p>AI&#8209;212.5712.43.2112.8609683</p> | **2021.2.4**<p>212.5712.43</p> | May&nbsp;25,&nbsp;2022 |
| <p><b>Chipmunk </b></p><p> 2021.2.1</p> | ![Release][release] | **2021.2.1.14**<p>AI&#8209;212.5712.43.2112.8512546</p> | **2021.2.4**<p>212.5712.43</p> | May&nbsp;9,&nbsp;2022 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 RC 2</p> | ![RC][rc] | **2021.2.1.13**<p>AI&#8209;212.5712.43.2112.8504664</p> | **2021.2.4**<p>212.5712.43</p> | May&nbsp;2,&nbsp;2022 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 RC 1</p> | ![RC][rc] | **2021.2.1.12**<p>AI&#8209;212.5712.43.2112.8403254</p> | **2021.2.4**<p>212.5712.43</p> | Apr&nbsp;18,&nbsp;2022 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 Beta 4</p> | ![Beta][beta] | **2021.2.1.11**<p>AI&#8209;212.5712.43.2112.8233820</p> | **2021.2.4**<p>212.5712.43</p> | Mar&nbsp;9,&nbsp;2022 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 Beta 3</p> | ![Beta][beta] | **2021.2.1.10**<p>AI&#8209;212.5712.43.2112.8184640</p> | **2021.2.4**<p>212.5712.43</p> | Feb&nbsp;28,&nbsp;2022 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 Beta 2</p> | ![Beta][beta] | **2021.2.1.9**<p>AI&#8209;212.5712.43.2112.8125332</p> | **2021.2.4**<p>212.5712.43</p> | Feb&nbsp;9,&nbsp;2022 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 Beta 1</p> | ![Beta][beta] | **2021.2.1.8**<p>AI&#8209;212.5457.46.2112.8094850</p> | **2021.2.3**<p>212.5457.46</p> | Jan&nbsp;25,&nbsp;2022 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 Canary 7</p> | ![Canary][canary] | **2021.2.1.7**<p>AI&#8209;212.5457.46.2112.8043657</p> | **2021.2.3**<p>212.5457.46</p> | Jan&nbsp;10,&nbsp;2022 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 Canary 6</p> | ![Canary][canary] | **2021.2.1.6**<p>AI&#8209;212.5457.46.2112.7968471</p> | **2021.2.3**<p>212.5457.46</p> | Dec&nbsp;15,&nbsp;2021 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 Canary 5</p> | ![Canary][canary] | **2021.2.1.5**<p>AI&#8209;212.5457.46.2112.7905983</p> | **2021.2.3**<p>212.5457.46</p> | Nov&nbsp;15,&nbsp;2021 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 Canary 4</p> | ![Canary][canary] | **2021.2.1.4**<p>AI&#8209;212.5284.40.2112.7863073</p> | **2021.2.2**<p>212.5284.40</p> | Nov&nbsp;9,&nbsp;2021 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 Canary 3</p> | ![Canary][canary] | **2021.2.1.3**<p>AI&#8209;212.5284.40.2112.7855545</p> | **2021.2.2**<p>212.5284.40</p> | Oct&nbsp;27,&nbsp;2021 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 Canary 2</p> | ![Canary][canary] | **2021.2.1.2**<p>AI&#8209;212.5284.40.2112.7824075</p> | **2021.2.2**<p>212.5284.40</p> | Oct&nbsp;19,&nbsp;2021 |
| <p><b>Chipmunk </b></p><p> 2021.2.1 Canary 1</p> | ![Canary][canary] | **2021.2.1.1**<p>AI&#8209;212.4037.9.2112.7818732</p> | **2021.2**<p>212.4037.9</p> | Oct&nbsp;13,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Patch 3</p> | ![Patch][patch] | **2021.1.1.23**<p>AI&#8209;211.7628.21.2111.8309675</p> | **2021.1.3**<p>211.7628.21</p> | Apr&nbsp;7,&nbsp;2022 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Patch 2</p> | ![Patch][patch] | **2021.1.1.22**<p>AI&#8209;211.7628.21.2111.8193401</p> | **2021.1.3**<p>211.7628.21</p> | Feb&nbsp;23,&nbsp;2022 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Patch 1</p> | ![Patch][patch] | **2021.1.1.21**<p>AI&#8209;211.7628.21.2111.8139111</p> | **2021.1.3**<p>211.7628.21</p> | Feb&nbsp;4,&nbsp;2022 |
| <p><b>Bumblebee </b></p><p> 2021.1.1</p> | ![Release][release] | **2021.1.1.20**<p>AI&#8209;211.7628.21.2111.8092744</p> | **2021.1.3**<p>211.7628.21</p> | Jan&nbsp;25,&nbsp;2022 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 RC 1</p> | ![RC][rc] | **2021.1.1.19**<p>AI&#8209;211.7628.21.2111.8005941</p> | **2021.1.3**<p>211.7628.21</p> | Jan&nbsp;4,&nbsp;2022 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Beta 5</p> | ![Beta][beta] | **2021.1.1.18**<p>AI&#8209;211.7628.21.2111.7956428</p> | **2021.1.3**<p>211.7628.21</p> | Dec&nbsp;13,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Beta 4</p> | ![Beta][beta] | **2021.1.1.17**<p>AI&#8209;211.7628.21.2111.7905991</p> | **2021.1.3**<p>211.7628.21</p> | Nov&nbsp;22,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Beta 3</p> | ![Beta][beta] | **2021.1.1.16**<p>AI&#8209;211.7628.21.2111.7863044</p> | **2021.1.3**<p>211.7628.21</p> | Nov&nbsp;9,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Beta 2</p> | ![Beta][beta] | **2021.1.1.15**<p>AI&#8209;211.7628.21.2111.7824002</p> | **2021.1.3**<p>211.7628.21</p> | Oct&nbsp;28,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Beta 1</p> | ![Beta][beta] | **2021.1.1.14**<p>AI&#8209;211.7628.21.2111.7785763</p> | **2021.1.3**<p>211.7628.21</p> | Oct&nbsp;13,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Canary 13</p> | ![Canary][canary] | **2021.1.1.13**<p>AI&#8209;211.7628.21.2111.7762732</p> | **2021.1.3**<p>211.7628.21</p> | Sep&nbsp;29,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Canary 12</p> | ![Canary][canary] | **2021.1.1.12**<p>AI&#8209;211.7628.21.2111.7699744</p> | **2021.1.3**<p>211.7628.21</p> | Sep&nbsp;17,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Canary 11</p> | ![Canary][canary] | **2021.1.1.11**<p>AI&#8209;211.7628.21.2111.7676841</p> | **2021.1.3**<p>211.7628.21</p> | Sep&nbsp;2,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Canary 10</p> | ![Canary][canary] | **2021.1.1.10**<p>AI&#8209;211.7628.21.2111.7667256</p> | **2021.1.3**<p>211.7628.21</p> | Aug&nbsp;25,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Canary 9</p> | ![Canary][canary] | **2021.1.1.9**<p>AI&#8209;211.7628.21.2111.7653804</p> | **2021.1.3**<p>211.7628.21</p> | Aug&nbsp;23,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Canary 8</p> | ![Canary][canary] | **2021.1.1.8**<p>AI&#8209;211.7628.21.2111.7619903</p> | **2021.1.3**<p>211.7628.21</p> | Aug&nbsp;11,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Canary 7</p> | ![Canary][canary] | **2021.1.1.7**<p>AI&#8209;211.7628.21.2111.7615328</p> | **2021.1.3**<p>211.7628.21</p> | Aug&nbsp;9,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Canary 6</p> | ![Canary][canary] | **2021.1.1.6**<p>AI&#8209;211.7628.21.2111.7584175</p> | **2021.1.3**<p>211.7628.21</p> | Jul&nbsp;29,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Canary 5</p> | ![Canary][canary] | **2021.1.1.5**<p>AI&#8209;211.7628.21.2111.7579519</p> | **2021.1.3**<p>211.7628.21</p> | Jul&nbsp;27,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Canary 4</p> | ![Canary][canary] | **2021.1.1.4**<p>AI&#8209;211.7628.21.2111.7545178</p> | **2021.1.3**<p>211.7628.21</p> | Jul&nbsp;21,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Canary 3</p> | ![Canary][canary] | **2021.1.1.3**<p>AI&#8209;211.7442.40.2111.7518594</p> | **2021.1.2**<p>211.7442.40</p> | Jul&nbsp;8,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Canary 2</p> | ![Canary][canary] | **2021.1.1.2**<p>AI&#8209;211.6222.4.2111.7407564</p> | **2021.1**<p>211.6222.4</p> | Jun&nbsp;7,&nbsp;2021 |
| <p><b>Bumblebee </b></p><p> 2021.1.1 Canary 1</p> | ![Canary][canary] | **2021.1.1.1**<p>AI&#8209;203.7717.56.2111.7361063</p> | **2020.3.3**<p>203.7717.56</p> | May&nbsp;18,&nbsp;2021 |



## 2020.*

| Release Name | Channel | Version | IntelliJ IDEA Version | Release Date |
|--------------|---------|---------|-----------------------|--------------|
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Patch 4</p> | ![Patch][patch] | **2020.3.1.26**<p>AI&#8209;203.7717.56.2031.7935034</p> | **2020.3.3**<p>203.7717.56</p> | Dec&nbsp;8,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Patch 3</p> | ![Patch][patch] | **2020.3.1.25**<p>AI&#8209;203.7717.56.2031.7784292</p> | **2020.3.3**<p>203.7717.56</p> | Oct&nbsp;11,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Patch 2</p> | ![Patch][patch] | **2020.3.1.24**<p>AI&#8209;203.7717.56.2031.7678000</p> | **2020.3.3**<p>203.7717.56</p> | Sep&nbsp;1,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Patch 1</p> | ![Patch][patch] | **2020.3.1.23**<p>AI&#8209;203.7717.56.2031.7621141</p> | **2020.3.3**<p>203.7717.56</p> | Aug&nbsp;18,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1</p> | ![Release][release] | **2020.3.1.22**<p>AI&#8209;203.7717.56.2031.7583922</p> | **2020.3.3**<p>203.7717.56</p> | Jul&nbsp;28,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 RC 1</p> | ![RC][rc] | **2020.3.1.21**<p>AI&#8209;203.7717.56.2031.7557721</p> | **2020.3.3**<p>203.7717.56</p> | Jul&nbsp;20,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Beta 5</p> | ![Beta][beta] | **2020.3.1.20**<p>AI&#8209;203.7717.56.2031.7479365</p> | **2020.3.3**<p>203.7717.56</p> | Jul&nbsp;2,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Beta 4</p> | ![Beta][beta] | **2020.3.1.19**<p>AI&#8209;203.7717.56.2031.7435690</p> | **2020.3.3**<p>203.7717.56</p> | Jun&nbsp;16,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Beta 3</p> | ![Beta][beta] | **2020.3.1.18**<p>AI&#8209;203.7717.56.2031.7395685</p> | **2020.3.3**<p>203.7717.56</p> | May&nbsp;27,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Beta 2</p> | ![Beta][beta] | **2020.3.1.17**<p>AI&#8209;203.7717.56.2031.7375522</p> | **2020.3.3**<p>203.7717.56</p> | May&nbsp;20,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Beta 1</p> | ![Beta][beta] | **2020.3.1.16**<p>AI&#8209;203.7717.56.2031.7360992</p> | **2020.3.3**<p>203.7717.56</p> | May&nbsp;18,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Canary 15</p> | ![Canary][canary] | **2020.3.1.15**<p>AI&#8209;203.7717.56.2031.7321754</p> | **2020.3.3**<p>203.7717.56</p> | Apr&nbsp;29,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Canary 14</p> | ![Canary][canary] | **2020.3.1.14**<p>AI&#8209;203.7717.56.2031.7260174</p> | **2020.3.3**<p>203.7717.56</p> | Apr&nbsp;7,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Canary 13</p> | ![Canary][canary] | **2020.3.1.13**<p>AI&#8209;203.7148.57.2031.7242491</p> | **2020.3.2**<p>203.7148.57</p> | Apr&nbsp;5,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Canary 12</p> | ![Canary][canary] | **2020.3.1.12**<p>AI&#8209;203.7148.57.2031.7226969</p> | **2020.3.2**<p>203.7148.57</p> | Mar&nbsp;25,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Canary 11</p> | ![Canary][canary] | **2020.3.1.11**<p>AI&#8209;203.7148.57.2031.7209405</p> | **2020.3.2**<p>203.7148.57</p> | Mar&nbsp;22,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Canary 10</p> | ![Canary][canary] | **2020.3.1.10**<p>AI&#8209;203.7148.57.2031.7194378</p> | **2020.3.2**<p>203.7148.57</p> | Mar&nbsp;15,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Canary 9</p> | ![Canary][canary] | **2020.3.1.9**<p>AI&#8209;203.7148.57.2031.7185775</p> | **2020.3.2**<p>203.7148.57</p> | Mar&nbsp;8,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Canary 8</p> | ![Canary][canary] | **2020.3.1.8**<p>AI&#8209;203.7148.57.2031.7165533</p> | **2020.3.2**<p>203.7148.57</p> | Feb&nbsp;24,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Canary 7</p> | ![Canary][canary] | **2020.3.1.7**<p>AI&#8209;203.7148.57.2031.7136282</p> | **2020.3.2**<p>203.7148.57</p> | Feb&nbsp;18,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Canary 6</p> | ![Canary][canary] | **2020.3.1.6**<p>AI&#8209;203.6682.168.2031.7132434</p> | **2020.3.1**<p>203.6682.168</p> | Feb&nbsp;10,&nbsp;2021 |
| <p><b>Arctic Fox </b></p><p> 2020.3.1 Canary 5</p> | ![Canary][canary] | **2020.3.1.5**<p>AI&#8209;203.6682.168.2031.7101492</p> | **2020.3.1**<p>203.6682.168</p> | Jan&nbsp;26,&nbsp;2021 |
| <b>2020.3.1 Canary 4</b> | ![Canary][canary] | **2020.3.1.4**<p>AI&#8209;202.7319.50.2031.7049475</p> | **2020.2.2**<p>202.7319.50</p> | Jan&nbsp;6,&nbsp;2021 |
| <b>2020.3.1 Canary 3</b> | ![Canary][canary] | **2020.3.1.3**<p>AI&#8209;202.7319.50.2031.7019041</p> | **2020.2.2**<p>202.7319.50</p> | Dec&nbsp;14,&nbsp;2020 |
| <b>2020.3.1 Canary 2</b> | ![Canary][canary] | **2020.3.1.2**<p>AI&#8209;202.7319.50.2031.7006259</p> | **2020.2.2**<p>202.7319.50</p> | Dec&nbsp;3,&nbsp;2020 |
| <b>2020.3.1 Canary 1</b> | ![Canary][canary] | **2020.3.1.1**<p>AI&#8209;202.7319.50.2031.6983675</p> | **2020.2.2**<p>202.7319.50</p> | Dec&nbsp;1,&nbsp;2020 |



## 4.*

| Release Name | Channel | Version | IntelliJ IDEA Version | Release Date |
|--------------|---------|---------|-----------------------|--------------|
| <b>4.2.2</b> | ![Release][release] | **4.2.2.0**<p>AI&#8209;202.7660.26.42.7486908</p> | **2020.2.3**<p>202.7660.26</p> | Jun&nbsp;30,&nbsp;2021 |
| <b>4.2.1</b> | ![Release][release] | **4.2.1.0**<p>AI&#8209;202.7660.26.42.7351085</p> | **2020.2.3**<p>202.7660.26</p> | May&nbsp;13,&nbsp;2021 |
| <b>4.2.0</b> | ![Release][release] | **4.2.0.24**<p>AI&#8209;202.7660.26.42.7322048</p> | **2020.2.3**<p>202.7660.26</p> | May&nbsp;4,&nbsp;2021 |
| <b>4.2 RC 1</b> | ![RC][rc] | **4.2.0.23**<p>AI&#8209;202.7660.26.42.7231092</p> | **2020.2.3**<p>202.7660.26</p> | Apr&nbsp;6,&nbsp;2021 |
| <b>4.2 Beta 6</b> | ![Beta][beta] | **4.2.0.22**<p>AI&#8209;202.7660.26.42.7188722</p> | **2020.2.3**<p>202.7660.26</p> | Mar&nbsp;9,&nbsp;2021 |
| <b>4.2 Beta 5</b> | ![Beta][beta] | **4.2.0.21**<p>AI&#8209;202.7660.26.42.7141121</p> | **2020.2.3**<p>202.7660.26</p> | Feb&nbsp;22,&nbsp;2021 |
| <b>4.2 Beta 4</b> | ![Beta][beta] | **4.2.0.20**<p>AI&#8209;202.7660.26.42.7094744</p> | **2020.2.3**<p>202.7660.26</p> | Jan&nbsp;28,&nbsp;2021 |
| <b>4.2 Beta 3</b> | ![Beta][beta] | **4.2.0.19**<p>AI&#8209;202.7660.26.42.7033425</p> | **2020.2.3**<p>202.7660.26</p> | Jan&nbsp;6,&nbsp;2021 |
| <b>4.2 Beta 2</b> | ![Beta][beta] | **4.2.0.18**<p>AI&#8209;202.7660.26.42.7008469</p> | **2020.2.3**<p>202.7660.26</p> | Dec&nbsp;14,&nbsp;2020 |
| <b>4.2 Beta 1</b> | ![Beta][beta] | **4.2.0.17**<p>AI&#8209;202.7660.26.42.6987402</p> | **2020.2.3**<p>202.7660.26</p> | Dec&nbsp;1,&nbsp;2020 |
| <b>4.2 Canary 16</b> | ![Canary][canary] | **4.2.0.16**<p>AI&#8209;202.7660.26.42.6939830</p> | **2020.2.3**<p>202.7660.26</p> | Nov&nbsp;5,&nbsp;2020 |
| <b>4.2 Canary 15</b> | ![Canary][canary] | **4.2.0.15**<p>AI&#8209;202.7660.26.42.6922807</p> | **2020.2.3**<p>202.7660.26</p> | Oct&nbsp;27,&nbsp;2020 |
| <b>4.2 Canary 14</b> | ![Canary][canary] | **4.2.0.14**<p>AI&#8209;202.7660.26.42.6907010</p> | **2020.2.3**<p>202.7660.26</p> | Oct&nbsp;20,&nbsp;2020 |
| <b>4.2 Canary 13</b> | ![Canary][canary] | **4.2.0.13**<p>AI&#8209;202.7319.50.42.6863838</p> | **2020.2.2**<p>202.7319.50</p> | Oct&nbsp;1,&nbsp;2020 |
| <b>4.2 Canary 12</b> | ![Canary][canary] | **4.2.0.12**<p>AI&#8209;202.6397.94.42.6847140</p> | **2020.2**<p>202.6397.94</p> | Sep&nbsp;22,&nbsp;2020 |
| <b>4.2 Canary 11</b> | ![Canary][canary] | **4.2.0.11**<p>AI&#8209;202.6397.94.42.6825553</p> | **2020.2**<p>202.6397.94</p> | Sep&nbsp;17,&nbsp;2020 |
| <b>4.2 Canary 10</b> | ![Canary][canary] | **4.2.0.10**<p>AI&#8209;202.6397.94.42.6811877</p> | **2020.2**<p>202.6397.94</p> | Sep&nbsp;8,&nbsp;2020 |
| <b>4.2 Canary 9</b> | ![Canary][canary] | **4.2.0.9**<p>AI&#8209;202.6397.94.42.6795674</p> | **2020.2**<p>202.6397.94</p> | Sep&nbsp;1,&nbsp;2020 |
| <b>4.2 Canary 8</b> | ![Canary][canary] | **4.2.0.8**<p>AI&#8209;202.6397.94.42.6787931</p> | **2020.2**<p>202.6397.94</p> | Aug&nbsp;26,&nbsp;2020 |
| <b>4.2 Canary 7</b> | ![Canary][canary] | **4.2.0.7**<p>AI&#8209;201.7846.76.42.6720134</p> | **2020.1.2**<p>201.7846.76</p> | Jul&nbsp;30,&nbsp;2020 |
| <b>4.2 Canary 6</b> | ![Canary][canary] | **4.2.0.6**<p>AI&#8209;201.7846.76.42.6712195</p> | **2020.1.2**<p>201.7846.76</p> | Jul&nbsp;28,&nbsp;2020 |
| <b>4.2 Canary 5</b> | ![Canary][canary] | **4.2.0.5**<p>AI&#8209;201.7846.76.42.6682321</p> | **2020.1.2**<p>201.7846.76</p> | Jul&nbsp;21,&nbsp;2020 |
| <b>4.2 Canary 4</b> | ![Canary][canary] | **4.2.0.4**<p>AI&#8209;201.7846.76.42.6636798</p> | **2020.1.2**<p>201.7846.76</p> | Jul&nbsp;8,&nbsp;2020 |
| <b>4.2 Canary 3</b> | ![Canary][canary] | **4.2.0.3**<p>AI&#8209;201.7846.76.42.6630367</p> | **2020.1.2**<p>201.7846.76</p> | Jun&nbsp;30,&nbsp;2020 |
| <b>4.2 Canary 2</b> | ![Canary][canary] | **4.2.0.2**<p>AI&#8209;201.7846.76.42.6582697</p> | **2020.1.2**<p>201.7846.76</p> | Jun&nbsp;18,&nbsp;2020 |
| <b>4.2 Canary 1</b> | ![Canary][canary] | **4.2.0.1**<p>AI&#8209;201.7223.91.42.6568795</p> | **2020.1.1**<p>201.7223.91</p> | Jun&nbsp;10,&nbsp;2020 |
| <b>4.1.3</b> | ![Release][release] | **4.1.3.0**<p>AI&#8209;201.8743.12.41.7199119</p> | **2020.1.4**<p>201.8743.12</p> | Mar&nbsp;18,&nbsp;2021 |
| <b>4.1.2</b> | ![Release][release] | **4.1.2.0**<p>AI&#8209;201.8743.12.41.7042882</p> | **2020.1.4**<p>201.8743.12</p> | Jan&nbsp;19,&nbsp;2021 |
| <b>4.1.1</b> | ![Release][release] | **4.1.1.0**<p>AI&#8209;201.8743.12.41.6953283</p> | **2020.1.4**<p>201.8743.12</p> | Nov&nbsp;10,&nbsp;2020 |
| <b>4.1</b> | ![Release][release] | **4.1.0.19**<p>AI&#8209;201.8743.12.41.6858069</p> | **2020.1.4**<p>201.8743.12</p> | Oct&nbsp;12,&nbsp;2020 |
| <b>4.1 RC 3</b> | ![RC][rc] | **4.1.0.18**<p>AI&#8209;201.8743.12.41.6823847</p> | **2020.1.4**<p>201.8743.12</p> | Sep&nbsp;15,&nbsp;2020 |
| <b>4.1 RC 2</b> | ![RC][rc] | **4.1.0.17**<p>AI&#8209;201.8743.12.41.6776251</p> | **2020.1.4**<p>201.8743.12</p> | Aug&nbsp;31,&nbsp;2020 |
| <b>4.1 RC 1</b> | ![RC][rc] | **4.1.0.16**<p>AI&#8209;201.8743.12.41.6719854</p> | **2020.1.4**<p>201.8743.12</p> | Aug&nbsp;10,&nbsp;2020 |
| <b>4.1 Beta 5</b> | ![Beta][beta] | **4.1.0.15**<p>AI&#8209;201.8538.31.41.6692364</p> | **2020.1.3**<p>201.8538.31</p> | Jul&nbsp;23,&nbsp;2020 |
| <b>4.1 Beta 4</b> | ![Beta][beta] | **4.1.0.14**<p>AI&#8209;201.7846.76.41.6667167</p> | **2020.1.2**<p>201.7846.76</p> | Jul&nbsp;16,&nbsp;2020 |
| <b>4.1 Beta 3</b> | ![Beta][beta] | **4.1.0.13**<p>AI&#8209;201.7846.76.41.6636797</p> | **2020.1.2**<p>201.7846.76</p> | Jul&nbsp;7,&nbsp;2020 |
| <b>4.1 Beta 2</b> | ![Beta][beta] | **4.1.0.12**<p>AI&#8209;201.7846.76.41.6604631</p> | **2020.1.2**<p>201.7846.76</p> | Jun&nbsp;25,&nbsp;2020 |
| <b>4.1 Beta 1</b> | ![Beta][beta] | **4.1.0.11**<p>AI&#8209;201.7223.91.41.6565218</p> | **2020.1.1**<p>201.7223.91</p> | Jun&nbsp;10,&nbsp;2020 |
| <b>4.1 Canary 10</b> | ![Canary][canary] | **4.1.0.10**<p>AI&#8209;201.7223.91.41.6507185</p> | **2020.1.1**<p>201.7223.91</p> | May&nbsp;26,&nbsp;2020 |
| <b>4.1 Canary 9</b> | ![Canary][canary] | **4.1.0.9**<p>AI&#8209;201.3803.71.41.6466190</p> | **2020.1**<p>201.3803.71</p> | May&nbsp;7,&nbsp;2020 |
| <b>4.1 Canary 8</b> | ![Canary][canary] | **4.1.0.8**<p>AI&#8209;193.6911.18.41.6423924</p> | **2019.3.4**<p>193.6911.18</p> | Apr&nbsp;28,&nbsp;2020 |
| <b>4.1 Canary 7</b> | ![Canary][canary] | **4.1.0.7**<p>AI&#8209;193.6911.18.41.6401718</p> | **2019.3.4**<p>193.6911.18</p> | Apr&nbsp;23,&nbsp;2020 |
| <b>4.1 Canary 6</b> | ![Canary][canary] | **4.1.0.6**<p>AI&#8209;193.6911.18.41.6381907</p> | **2019.3.4**<p>193.6911.18</p> | Apr&nbsp;17,&nbsp;2020 |
| <b>4.1 Canary 5</b> | ![Canary][canary] | **4.1.0.5**<p>AI&#8209;193.6911.18.41.6362631</p> | **2019.3.4**<p>193.6911.18</p> | Apr&nbsp;9,&nbsp;2020 |
| <b>4.1 Canary 4</b> | ![Canary][canary] | **4.1.0.4**<p>AI&#8209;193.6494.35.41.6325121</p> | **2019.3.3**<p>193.6494.35</p> | Mar&nbsp;24,&nbsp;2020 |
| <b>4.1 Canary 3</b> | ![Canary][canary] | **4.1.0.3**<p>AI&#8209;193.6494.35.41.6297379</p> | **2019.3.3**<p>193.6494.35</p> | Mar&nbsp;18,&nbsp;2020 |
| <b>4.1 Canary 2</b> | ![Canary][canary] | **4.1.0.2**<p>AI&#8209;193.6494.35.41.6264773</p> | **2019.3.3**<p>193.6494.35</p> | Mar&nbsp;9,&nbsp;2019 |
| <b>4.1 Canary 1</b> | ![Canary][canary] | **4.1.0.1**<p>AI&#8209;193.6494.35.41.6224510</p> | **2019.3.3**<p>193.6494.35</p> | Feb&nbsp;27,&nbsp;2020 |
| <b>4.0.2</b> | ![Release][release] | **4.0.2.0**<p>AI&#8209;193.6911.18.40.6821437</p> | **2019.3.4**<p>193.6911.18</p> | Oct&nbsp;6,&nbsp;2020 |
| <b>4.0.1</b> | ![Release][release] | **4.0.1.0**<p>AI&#8209;193.6911.18.40.6626763</p> | **2019.3.4**<p>193.6911.18</p> | Jul&nbsp;14,&nbsp;2020 |
| <b>4.0</b> | ![Release][release] | **4.0.0.16**<p>AI&#8209;193.6911.18.40.6514223</p> | **2019.3.4**<p>193.6911.18</p> | May&nbsp;28,&nbsp;2020 |
| <b>4.0 RC 1</b> | ![RC][rc] | **4.0.0.15**<p>AI&#8209;193.6911.18.40.6453388</p> | **2019.3.4**<p>193.6911.18</p> | May&nbsp;12,&nbsp;2020 |
| <b>4.0 Beta 5</b> | ![Beta][beta] | **4.0.0.14**<p>AI&#8209;193.6911.18.40.6401094</p> | **2019.3.4**<p>193.6911.18</p> | Apr&nbsp;23,&nbsp;2020 |
| <b>4.0 Beta 4</b> | ![Beta][beta] | **4.0.0.13**<p>AI&#8209;193.6911.18.40.6348893</p> | **2019.3.4**<p>193.6911.18</p> | Apr&nbsp;7,&nbsp;2020 |
| <b>4.0 Beta 3</b> | ![Beta][beta] | **4.0.0.12**<p>AI&#8209;193.6494.35.40.6296804</p> | **2019.3.3**<p>193.6494.35</p> | Mar&nbsp;19,&nbsp;2020 |
| <b>4.0 Beta 2</b> | ![Beta][beta] | **4.0.0.11**<p>AI&#8209;193.6494.35.40.6254973</p> | **2019.3.3**<p>193.6494.35</p> | Mar&nbsp;11,&nbsp;2020 |
| <b>4.0 Beta 1</b> | ![Beta][beta] | **4.0.0.10**<p>AI&#8209;193.6494.35.40.6220182</p> | **2019.3.3**<p>193.6494.35</p> | Feb&nbsp;25,&nbsp;2020 |
| <b>4.0 Canary 9</b> | ![Canary][canary] | **4.0.0.9**<p>AI&#8209;193.5233.102.40.6137316</p> | **2019.3**<p>193.5233.102</p> | Jan&nbsp;21,&nbsp;2020 |
| <b>4.0 Canary 8</b> | ![Canary][canary] | **4.0.0.8**<p>AI&#8209;193.5233.102.40.6107147</p> | **2019.3**<p>193.5233.102</p> | Jan&nbsp;7,&nbsp;2020 |
| <b>4.0 Canary 7</b> | ![Canary][canary] | **4.0.0.7**<p>AI&#8209;193.5233.102.40.6085562</p> | **2019.3**<p>193.5233.102</p> | Dec&nbsp;23,&nbsp;2019 |
| <b>4.0 Canary 6</b> | ![Canary][canary] | **4.0.0.6**<p>AI&#8209;193.2956.37.40.6052267</p> | **2019.3**<p>193.2956.37</p> | Dec&nbsp;10,&nbsp;2019 |
| <b>4.0 Canary 5</b> | ![Canary][canary] | **4.0.0.5**<p>AI&#8209;193.2956.37.40.6039983</p> | **2019.3**<p>193.2956.37</p> | Dec&nbsp;4,&nbsp;2019 |
| <b>4.0 Canary 4</b> | ![Canary][canary] | **4.0.0.4**<p>AI&#8209;192.6817.14.36.6008643</p> | **2019.2.3**<p>192.6817.14</p> | Nov&nbsp;20,&nbsp;2019 |
| <b>4.0 Canary 3</b> | ![Canary][canary] | **4.0.0.3**<p>AI&#8209;192.6817.14.36.5994236</p> | **2019.2.3**<p>192.6817.14</p> | Nov&nbsp;14,&nbsp;2019 |
| <b>4.0 Canary 2</b> | ![Canary][canary] | **4.0.0.2**<p>AI&#8209;192.6817.14.36.5984562</p> | **2019.2.3**<p>192.6817.14</p> | Nov&nbsp;7,&nbsp;2019 |
| <b>4.0 Canary 1</b> | ![Canary][canary] | **4.0.0.1**<p>AI&#8209;192.6817.14.36.5959023</p> | **2019.2.3**<p>192.6817.14</p> | Oct&nbsp;23,&nbsp;2019 |



## 3.*

| Release Name | Channel | Version | IntelliJ IDEA Version | Release Date |
|--------------|---------|---------|-----------------------|--------------|
| <b>3.6.3</b> | ![Release][release] | **3.6.3.0**<p>AI&#8209;192.7142.36.36.6392135</p> | **2019.2.4**<p>192.7142.36</p> | Apr&nbsp;17,&nbsp;2020 |
| <b>3.6.2</b> | ![Release][release] | **3.6.2.0**<p>AI&#8209;192.7142.36.36.6308749</p> | **2019.2.4**<p>192.7142.36</p> | Mar&nbsp;31,&nbsp;2020 |
| <b>3.6.1</b> | ![Release][release] | **3.6.1.0**<p>AI&#8209;192.7142.36.36.6241897</p> | **2019.2.4**<p>192.7142.36</p> | Feb&nbsp;28,&nbsp;2020 |
| <b>3.6</b> | ![Release][release] | **3.6.0.21**<p>AI&#8209;192.7142.36.36.6200805</p> | **2019.2.4**<p>192.7142.36</p> | Feb&nbsp;24,&nbsp;2020 |
| <b>3.6 RC 3</b> | ![RC][rc] | **3.6.0.20**<p>AI&#8209;192.7142.36.36.6186006</p> | **2019.2.4**<p>192.7142.36</p> | Feb&nbsp;10,&nbsp;2020 |
| <b>3.6 RC 2</b> | ![RC][rc] | **3.6.0.19**<p>AI&#8209;192.7142.36.36.6165589</p> | **2019.2.4**<p>192.7142.36</p> | Jan&nbsp;29,&nbsp;2020 |
| <b>3.6 RC 1</b> | ![RC][rc] | **3.6.0.18**<p>AI&#8209;192.7142.36.36.6071332</p> | **2019.2.4**<p>192.7142.36</p> | Dec&nbsp;17,&nbsp;2019 |
| <b>3.6 Beta 5</b> | ![Beta][beta] | **3.6.0.17**<p>AI&#8209;192.6817.14.36.6018865</p> | **2019.2.3**<p>192.6817.14</p> | Dec&nbsp;4,&nbsp;2019 |
| <b>3.6 Beta 4</b> | ![Beta][beta] | **3.6.0.16**<p>AI&#8209;192.6817.14.36.5994180</p> | **2019.2.3**<p>192.6817.14</p> | Nov&nbsp;14,&nbsp;2019 |
| <b>3.6 Beta 3</b> | ![Beta][beta] | **3.6.0.15**<p>AI&#8209;192.6817.14.36.5982640</p> | **2019.2.3**<p>192.6817.14</p> | Nov&nbsp;6,&nbsp;2019 |
| <b>3.6 Beta 2</b> | ![Beta][beta] | **3.6.0.14**<p>AI&#8209;192.6817.14.36.5947919</p> | **2019.2.3**<p>192.6817.14</p> | Oct&nbsp;31,&nbsp;2019 |
| <b>3.6 Beta 1</b> | ![Beta][beta] | **3.6.0.13**<p>AI&#8209;192.6603.28.36.5916306</p> | **2019.2.2**<p>192.6603.28</p> | Oct&nbsp;10,&nbsp;2019 |
| <b>3.6 Canary 12</b> | ![Canary][canary] | **3.6.0.12**<p>AI&#8209;192.6262.58.36.5871855</p> | **2019.2.1**<p>192.6262.58</p> | Sep&nbsp;18,&nbsp;2019 |
| <b>3.6 Canary 11</b> | ![Canary][canary] | **3.6.0.11**<p>AI&#8209;192.6262.58.36.5863777</p> | **2019.2.1**<p>192.6262.58</p> | Sep&nbsp;11,&nbsp;2019 |
| <b>3.6 Canary 10</b> | ![Canary][canary] | **3.6.0.10**<p>AI&#8209;192.5728.98.36.5842447</p> | **2019.2**<p>192.5728.98</p> | Sep&nbsp;5,&nbsp;2019 |
| <b>3.6 Canary 9</b> | ![Canary][canary] | **3.6.0.9**<p>AI&#8209;192.5728.98.36.5830636</p> | **2019.2**<p>192.5728.98</p> | Aug&nbsp;29,&nbsp;2019 |
| <b>3.6 Canary 8</b> | ![Canary][canary] | **3.6.0.8**<p>AI&#8209;192.5728.98.36.5825043</p> | **2019.2**<p>192.5728.98</p> | Aug&nbsp;27,&nbsp;2019 |
| <b>3.6 Canary 7</b> | ![Canary][canary] | **3.6.0.7**<p>AI&#8209;192.5728.98.36.5807797</p> | **2019.2**<p>192.5728.98</p> | Aug&nbsp;23,&nbsp;2019 |
| <b>3.6 Canary 6</b> | ![Canary][canary] | **3.6.0.6**<p>AI&#8209;192.5587.17.36.5787298</p> | **2019.2**<p>192.5587.17</p> | Aug&nbsp;13,&nbsp;2019 |
| <b>3.6 Canary 5</b> | ![Canary][canary] | **3.6.0.5**<p>AI&#8209;191.7479.19.36.5721125</p> | **2019.1.3**<p>191.7479.19</p> | Jul&nbsp;17,&nbsp;2019 |
| <b>3.6 Canary 4</b> | ![Canary][canary] | **3.6.0.4**<p>AI&#8209;191.7479.19.36.5679705</p> | **2019.1.3**<p>191.7479.19</p> | Jun&nbsp;26,&nbsp;2019 |
| <b>3.6 Canary 3</b> | ![Canary][canary] | **3.6.0.3**<p>AI&#8209;191.7141.44.36.5618338</p> | **2019.1.2**<p>191.7141.44</p> | Jun&nbsp;7,&nbsp;2019 |
| <b>3.6 Canary 2</b> | ![Canary][canary] | **3.6.0.2**<p>AI&#8209;191.7141.44.36.5599242</p> | **2019.1.2**<p>191.7141.44</p> | May&nbsp;30,&nbsp;2019 |
| <b>3.6 Canary 1</b> | ![Canary][canary] | **3.6.0.1**<p>AI&#8209;191.7141.44.36.5595896</p> | **2019.1.2**<p>191.7141.44</p> | May&nbsp;23,&nbsp;2019 |
| <b>3.5.3</b> | ![Release][release] | **3.5.3.0**<p>AI&#8209;191.8026.42.35.6010548</p> | **2019.1.4**<p>191.8026.42</p> | Dec&nbsp;5,&nbsp;2019 |
| <b>3.5.2</b> | ![Release][release] | **3.5.2.0**<p>AI&#8209;191.8026.42.35.5977832</p> | **2019.1.4**<p>191.8026.42</p> | Nov&nbsp;4,&nbsp;2019 |
| <b>3.5.1</b> | ![Release][release] | **3.5.1.0**<p>AI&#8209;191.8026.42.35.5900203</p> | **2019.1.4**<p>191.8026.42</p> | Oct&nbsp;2,&nbsp;2019 |
| <b>3.5</b> | ![Release][release] | **3.5.0.21**<p>AI&#8209;191.8026.42.35.5791312</p> | **2019.1.4**<p>191.8026.42</p> | Aug&nbsp;20,&nbsp;2019 |
| <b>3.5 RC 3</b> | ![RC][rc] | **3.5.0.20**<p>AI&#8209;191.8026.42.35.5781497</p> | **2019.1.4**<p>191.8026.42</p> | Aug&nbsp;8,&nbsp;2019 |
| <b>3.5 RC 2</b> | ![RC][rc] | **3.5.0.19**<p>AI&#8209;191.7479.19.35.5763348</p> | **2019.1.3**<p>191.7479.19</p> | Aug&nbsp;1,&nbsp;2019 |
| <b>3.5 RC 1</b> | ![RC][rc] | **3.5.0.18**<p>AI&#8209;191.7479.19.35.5717577</p> | **2019.1.3**<p>191.7479.19</p> | Jul&nbsp;17,&nbsp;2019 |
| <b>3.5 Beta 5</b> | ![Beta][beta] | **3.5.0.17**<p>AI&#8209;191.7479.19.35.5675373</p> | **2019.1.3**<p>191.7479.19</p> | Jun&nbsp;26,&nbsp;2019 |
| <b>3.5 Beta 4</b> | ![Beta][beta] | **3.5.0.16**<p>AI&#8209;191.7141.44.35.5619324</p> | **2019.1.2**<p>191.7141.44</p> | Jun&nbsp;7,&nbsp;2019 |
| <b>3.5 Beta 3</b> | ![Beta][beta] | **3.5.0.15**<p>AI&#8209;191.7141.44.35.5585527</p> | **2019.1.2**<p>191.7141.44</p> | May&nbsp;28,&nbsp;2019 |
| <b>3.5 Beta 2</b> | ![Beta][beta] | **3.5.0.14**<p>AI&#8209;191.6707.61.35.5549111</p> | **2019.1.1**<p>191.6707.61</p> | May&nbsp;20,&nbsp;2019 |
| <b>3.5 Beta 1</b> | ![Beta][beta] | **3.5.0.13**<p>AI&#8209;191.6707.61.35.5529924</p> | **2019.1.1**<p>191.6707.61</p> | May&nbsp;7,&nbsp;2019 |
| <b>3.5 Canary 13</b> | ![Canary][canary] | **3.5.0.12**<p>AI&#8209;191.6183.87.35.5487692</p> | **2019.1**<p>191.6183.87</p> | Apr&nbsp;24,&nbsp;2019 |
| <b>3.5 Canary 12</b> | ![Canary][canary] | **3.5.0.11**<p>AI&#8209;191.6183.87.35.5471097</p> | **2019.1**<p>191.6183.87</p> | Apr&nbsp;18,&nbsp;2019 |
| <b>3.5 Canary 11</b> | ![Canary][canary] | **3.5.0.10**<p>AI&#8209;191.6183.87.35.5455988</p> | **2019.1**<p>191.6183.87</p> | Apr&nbsp;15,&nbsp;2019 |
| <b>3.5 Canary 10</b> | ![Canary][canary] | **3.5.0.9**<p>AI&#8209;191.6183.62.35.5416148</p> | **2019.1**<p>191.6183.62</p> | Apr&nbsp;4,&nbsp;2019 |
| <b>3.5 Canary 9</b> | ![Canary][canary] | **3.5.0.8**<p>AI&#8209;191.6183.20.35.5409101</p> | **2019.1**<p>191.6183.20</p> | Mar&nbsp;28,&nbsp;2019 |
| <b>3.5 Canary 8</b> | ![Canary][canary] | **3.5.0.7**<p>AI&#8209;191.6014.8.35.5375575</p> | **2019.1**<p>191.6014.8</p> | Mar&nbsp;25,&nbsp;2019 |
| <b>3.5 Canary 7</b> | ![Canary][canary] | **3.5.0.6**<p>AI&#8209;183.5429.30.35.5346365</p> | **2018.3.4**<p>183.5429.30</p> | Mar&nbsp;11,&nbsp;2019 |
| <b>3.5 Canary 6</b> | ![Canary][canary] | **3.5.0.5**<p>AI&#8209;183.5429.30.35.5326993</p> | **2018.3.4**<p>183.5429.30</p> | Feb&nbsp;26,&nbsp;2019 |
| <b>3.5 Canary 5</b> | ![Canary][canary] | **3.5.0.4**<p>AI&#8209;183.5429.30.35.5320907</p> | **2018.3.4**<p>183.5429.30</p> | Feb&nbsp;21,&nbsp;2019 |
| <b>3.5 Canary 4</b> | ![Canary][canary] | **3.5.0.3**<p>AI&#8209;183.5429.30.35.5290690</p> | **2018.3.4**<p>183.5429.30</p> | Feb&nbsp;14,&nbsp;2019 |
| <b>3.5 Canary 3</b> | ![Canary][canary] | **3.5.0.2**<p>AI&#8209;183.5153.38.35.5256920</p> | **2018.3.3**<p>183.5153.38</p> | Jan&nbsp;31,&nbsp;2019 |
| <b>3.5 Canary 2</b> | ![Canary][canary] | **3.5.0.1**<p>AI&#8209;183.5153.38.35.5240547</p> | **2018.3.3**<p>183.5153.38</p> | Jan&nbsp;24,&nbsp;2019 |
| <b>3.5 Canary 1</b> | ![Canary][canary] | **3.5.0.0**<p>AI&#8209;183.4886.37.35.5215047</p> | **2018.3.2**<p>183.4886.37</p> | Jan&nbsp;15,&nbsp;2019 |
| <b>3.4.2</b> | ![Release][release] | **3.4.2.0**<p>AI&#8209;183.6156.11.34.5692245</p> | **2018.3.6**<p>183.6156.11</p> | Jul&nbsp;9,&nbsp;2019 |
| <b>3.4.1</b> | ![Release][release] | **3.4.1.0**<p>AI&#8209;183.6156.11.34.5522156</p> | **2018.3.6**<p>183.6156.11</p> | May&nbsp;15,&nbsp;2019 |
| <b>3.4</b> | ![Release][release] | **3.4.0.18**<p>AI&#8209;183.5429.30.34.5452501</p> | **2018.3.4**<p>183.5429.30</p> | Apr&nbsp;17,&nbsp;2019 |
| <b>3.4 RC 3</b> | ![RC][rc] | **3.4.0.17**<p>AI&#8209;183.5429.30.34.5400832</p> | **2018.3.4**<p>183.5429.30</p> | Apr&nbsp;1,&nbsp;2019 |
| <b>3.4 RC 2</b> | ![RC][rc] | **3.4.0.16**<p>AI&#8209;183.5429.30.34.5370308</p> | **2018.3.4**<p>183.5429.30</p> | Mar&nbsp;14,&nbsp;2019 |
| <b>3.4 RC 1</b> | ![RC][rc] | **3.4.0.15**<p>AI&#8209;183.5429.30.34.5341121</p> | **2018.3.4**<p>183.5429.30</p> | Mar&nbsp;7,&nbsp;2019 |
| <b>3.4 Beta 5</b> | ![Beta][beta] | **3.4.0.14**<p>AI&#8209;183.5429.30.34.5310756</p> | **2018.3.4**<p>183.5429.30</p> | Feb&nbsp;21,&nbsp;2019 |
| <b>3.4 Beta 4</b> | ![Beta][beta] | **3.4.0.13**<p>AI&#8209;183.5429.30.34.5304277</p> | **2018.3.4**<p>183.5429.30</p> | Feb&nbsp;14,&nbsp;2019 |
| <b>3.4 Beta 3</b> | ![Beta][beta] | **3.4.0.12**<p>AI&#8209;183.5153.38.34.5256591</p> | **2018.3.3**<p>183.5153.38</p> | Jan&nbsp;31,&nbsp;2019 |
| <b>3.4 Beta 2</b> | ![Beta][beta] | **3.4.0.11**<p>AI&#8209;183.5153.38.34.5240537</p> | **2018.3.3**<p>183.5153.38</p> | Jan&nbsp;24,&nbsp;2019 |
| <b>3.4 Beta 1</b> | ![Beta][beta] | **3.4.0.10**<p>AI&#8209;183.4886.37.34.5217543</p> | **2018.3.2**<p>183.4886.37</p> | Jan&nbsp;15,&nbsp;2019 |
| <b>3.4 Canary 10</b> | ![Canary][canary] | **3.4.0.9**<p>AI&#8209;183.4588.61.34.5202479</p> | **2018.3.1**<p>183.4588.61</p> | Jan&nbsp;3,&nbsp;2019 |
| <b>3.4 Canary 9</b> | ![Canary][canary] | **3.4.0.8**<p>AI&#8209;183.4588.61.34.5186062</p> | **2018.3.1**<p>183.4588.61</p> | Dec&nbsp;20,&nbsp;2018 |
| <b>3.4 Canary 8</b> | ![Canary][canary] | **3.4.0.7**<p>AI&#8209;183.4588.61.34.5173923</p> | **2018.3.1**<p>183.4588.61</p> | Dec&nbsp;12,&nbsp;2018 |
| <b>3.4 Canary 7</b> | ![Canary][canary] | **3.4.0.6**<p>AI&#8209;183.4284.148.34.5159543</p> | **2018.3**<p>183.4284.148</p> | Dec&nbsp;6,&nbsp;2018 |
| <b>3.4 Canary 6</b> | ![Canary][canary] | **3.4.0.5**<p>AI&#8209;183.4284.148.34.5146016</p> | **2018.3**<p>183.4284.148</p> | Nov&nbsp;29,&nbsp;2018 |
| <b>3.4 Canary 5</b> | ![Canary][canary] | **3.4.0.4**<p>AI&#8209;183.4284.36.34.5141831</p> | **2018.3**<p>183.4284.36</p> | Nov&nbsp;26,&nbsp;2018 |
| <b>3.4 Canary 4</b> | ![Canary][canary] | **3.4.0.3**<p>AI&#8209;183.4139.22.34.5129585</p> | **2018.3**<p>183.4139.22</p> | Nov&nbsp;15,&nbsp;2018 |
| <b>3.4 Canary 3</b> | ![Canary][canary] | **3.4.0.2**<p>AI&#8209;183.3975.18.34.5112304</p> | **2018.3**<p>183.3975.18</p> | Nov&nbsp;7,&nbsp;2018 |
| <b>3.4 Canary 2</b> | ![Canary][canary] | **3.4.0.1**<p>AI&#8209;183.2153.8.34.5081642</p> | **2018.3**<p>183.2153.8</p> | Oct&nbsp;24,&nbsp;2018 |
| <b>3.4 Canary 1</b> | ![Canary][canary] | **3.4.0.0**<p>AI&#8209;182.4505.22.34.5070326</p> | **2018.2.4**<p>182.4505.22</p> | Oct&nbsp;19,&nbsp;2018 |
| <b>3.3.2</b> | ![Release][release] | **3.3.2.0**<p>AI&#8209;182.5107.16.33.5314842</p> | **2018.2.6**<p>182.5107.16</p> | Mar&nbsp;4,&nbsp;2019 |
| <b>3.3.1</b> | ![Release][release] | **3.3.1.0**<p>AI&#8209;182.5107.16.33.5264788</p> | **2018.2.6**<p>182.5107.16</p> | Feb&nbsp;6,&nbsp;2019 |
| <b>3.3.0</b> | ![Release][release] | **3.3.0.20**<p>AI&#8209;182.5107.16.33.5199772</p> | **2018.2.6**<p>182.5107.16</p> | Jan&nbsp;14,&nbsp;2019 |
| <b>3.3 RC 3</b> | ![RC][rc] | **3.3.0.19**<p>AI&#8209;182.5107.16.33.5183351</p> | **2018.2.6**<p>182.5107.16</p> | Dec&nbsp;20,&nbsp;2018 |
| <b>3.3 RC 2</b> | ![RC][rc] | **3.3.0.18**<p>AI&#8209;182.5107.16.33.5160847</p> | **2018.2.6**<p>182.5107.16</p> | Dec&nbsp;6,&nbsp;2018 |
| <b>3.3 RC 1</b> | ![RC][rc] | **3.3.0.17**<p>AI&#8209;182.5107.16.33.5138683</p> | **2018.2.6**<p>182.5107.16</p> | Nov&nbsp;26,&nbsp;2018 |
| <b>3.3 Beta 4</b> | ![Beta][beta] | **3.3.0.16**<p>AI&#8209;182.4892.20.33.5114240</p> | **2018.2.5**<p>182.4892.20</p> | Nov&nbsp;12,&nbsp;2018 |
| <b>3.3 Beta 3</b> | ![Beta][beta] | **3.3.0.15**<p>AI&#8209;182.4892.20.33.5105271</p> | **2018.2.5**<p>182.4892.20</p> | Nov&nbsp;7,&nbsp;2018 |
| <b>3.3 Beta 2</b> | ![Beta][beta] | **3.3.0.14**<p>AI&#8209;182.4892.20.33.5078385</p> | **2018.2.5**<p>182.4892.20</p> | Oct&nbsp;30,&nbsp;2018 |
| <b>3.3 Beta 1</b> | ![Beta][beta] | **3.3.0.13**<p>AI&#8209;182.4505.22.33.5073496</p> | **2018.2.4**<p>182.4505.22</p> | Oct&nbsp;19,&nbsp;2018 |
| <b>3.3 Canary 13</b> | ![Canary][canary] | **3.3.0.12**<p>AI&#8209;182.4505.22.33.5035453</p> | **2018.2.4**<p>182.4505.22</p> | Oct&nbsp;2,&nbsp;2018 |
| <b>3.3 Canary 12</b> | ![Canary][canary] | **3.3.0.11**<p>AI&#8209;182.4505.22.33.5026711</p> | **2018.2.4**<p>182.4505.22</p> | Sep&nbsp;26,&nbsp;2018 |
| <b>3.3 Canary 11</b> | ![Canary][canary] | **3.3.0.10**<p>AI&#8209;182.4323.46.33.5012296</p> | **2018.2.3**<p>182.4323.46</p> | Sep&nbsp;19,&nbsp;2018 |
| <b>3.3 Canary 10</b> | ![Canary][canary] | **3.3.0.9**<p>AI&#8209;182.4129.33.33.4996246</p> | **2018.2.2**<p>182.4129.33</p> | Sep&nbsp;12,&nbsp;2018 |
| <b>3.3 Canary 9</b> | ![Canary][canary] | **3.3.0.8**<p>AI&#8209;182.4129.33.33.4989483</p> | **2018.2.2**<p>182.4129.33</p> | Sep&nbsp;11,&nbsp;2018 |
| <b>3.3 Canary 8</b> | ![Canary][canary] | **3.3.0.7**<p>AI&#8209;182.3911.36.33.4978721</p> | **2018.2.1**<p>182.3911.36</p> | Aug&nbsp;29,&nbsp;2018 |
| <b>3.3 Canary 7</b> | ![Canary][canary] | **3.3.0.6**<p>AI&#8209;182.3911.36.33.4968538</p> | **2018.2.1**<p>182.3911.36</p> | Aug&nbsp;23,&nbsp;2018 |
| <b>3.3 Canary 6</b> | ![Canary][canary] | **3.3.0.5**<p>AI&#8209;182.3684.101.33.4954005</p> | **2018.2**<p>182.3684.101</p> | Aug&nbsp;16,&nbsp;2018 |
| <b>3.3 Canary 5</b> | ![Canary][canary] | **3.3.0.4**<p>AI&#8209;182.3684.101.33.4928781</p> | **2018.2**<p>182.3684.101</p> | Aug&nbsp;7,&nbsp;2018 |
| <b>3.3 Canary 4</b> | ![Canary][canary] | **3.3.0.3**<p>AI&#8209;182.3208.16.33.4924367</p> | **2018.2**<p>182.3208.16</p> | Aug&nbsp;2,&nbsp;2018 |
| <b>3.3 Canary 3</b> | ![Canary][canary] | **3.3.0.2**<p>AI&#8209;181.5281.24.33.4884283</p> | **2018.1.5**<p>181.5281.24</p> | Jul&nbsp;12,&nbsp;2018 |
| <b>3.3 Canary 2</b> | ![Canary][canary] | **3.3.0.1**<p>AI&#8209;181.5281.24.33.4869471</p> | **2018.1.5**<p>181.5281.24</p> | Jul&nbsp;3,&nbsp;2018 |
| <b>3.3 Canary 1</b> | ![Canary][canary] | **3.3.0.0**<p>AI&#8209;181.4892.42.33.4861037</p> | **2018.1.3**<p>181.4892.42</p> | Jun&nbsp;28,&nbsp;2018 |
| <b>3.2.1</b> | ![Release][release] | **3.2.1.0**<p>AI&#8209;181.5540.7.32.5056338</p> | **2018.1.6**<p>181.5540.7</p> | Oct&nbsp;11,&nbsp;2018 |
| <b>3.2.0</b> | ![Release][release] | **3.2.0.26**<p>AI&#8209;181.5540.7.32.5014246</p> | **2018.1.6**<p>181.5540.7</p> | Sep&nbsp;24,&nbsp;2018 |
| <b>3.2 RC 3</b> | ![RC][rc] | **3.2.0.25**<p>AI&#8209;181.5540.7.32.4987877</p> | **2018.1.6**<p>181.5540.7</p> | Sep&nbsp;10,&nbsp;2018 |
| <b>3.2 RC 2</b> | ![RC][rc] | **3.2.0.24**<p>AI&#8209;181.5540.7.32.4974118</p> | **2018.1.6**<p>181.5540.7</p> | Aug&nbsp;24,&nbsp;2018 |
| <b>3.2 RC 1</b> | ![RC][rc] | **3.2.0.23**<p>AI&#8209;181.5540.7.32.4963425</p> | **2018.1.6**<p>181.5540.7</p> | Aug&nbsp;23,&nbsp;2018 |
| <b>3.2 Beta 5</b> | ![Beta][beta] | **3.2.0.22**<p>AI&#8209;181.5281.24.32.4913314</p> | **2018.1.5**<p>181.5281.24</p> | Jul&nbsp;30,&nbsp;2018 |
| <b>3.2 Beta 4</b> | ![Beta][beta] | **3.2.0.21**<p>AI&#8209;181.5281.24.32.4886486</p> | **2018.1.5**<p>181.5281.24</p> | Jul&nbsp;16,&nbsp;2018 |
| <b>3.2 Beta 3</b> | ![Beta][beta] | **3.2.0.20**<p>AI&#8209;181.5281.24.32.4868252</p> | **2018.1.5**<p>181.5281.24</p> | Jul&nbsp;10,&nbsp;2018 |
| <b>3.2 Beta 2</b> | ![Beta][beta] | **3.2.0.19**<p>AI&#8209;181.5281.24.32.4860949</p> | **2018.1.5**<p>181.5281.24</p> | Jun&nbsp;28,&nbsp;2018 |
| <b>3.2 Beta 1</b> | ![Beta][beta] | **3.2.0.18**<p>AI&#8209;181.4892.42.32.4847800</p> | **2018.1.3**<p>181.4892.42</p> | Jun&nbsp;21,&nbsp;2018 |
| <b>3.2 Canary 18</b> | ![Canary][canary] | **3.2.0.17**<p>AI&#8209;181.4892.42.32.4830125</p> | **2018.1.3**<p>181.4892.42</p> | Jun&nbsp;11,&nbsp;2018 |
| <b>3.2 Canary 17</b> | ![Canary][canary] | **3.2.0.16**<p>AI&#8209;181.4892.42.32.4823740</p> | **2018.1.3**<p>181.4892.42</p> | Jun&nbsp;7,&nbsp;2018 |
| <b>3.2 Canary 16</b> | ![Canary][canary] | **3.2.0.15**<p>AI&#8209;181.4668.68.32.4802120</p> | **2018.1.2**<p>181.4668.68</p> | May&nbsp;29,&nbsp;2018 |
| <b>3.2 Canary 15</b> | ![Canary][canary] | **3.2.0.14**<p>AI&#8209;181.4668.68.32.4773949</p> | **2018.1.2**<p>181.4668.68</p> | May&nbsp;17,&nbsp;2018 |
| <b>3.2 Canary 14</b> | ![Canary][canary] | **3.2.0.13**<p>AI&#8209;181.4668.68.32.4763614</p> | **2018.1.2**<p>181.4668.68</p> | May&nbsp;8,&nbsp;2018 |
| <b>3.2 Canary 13</b> | ![Canary][canary] | **3.2.0.12**<p>AI&#8209;181.4445.78.32.4749738</p> | **2018.1.1**<p>181.4445.78</p> | Apr&nbsp;30,&nbsp;2018 |
| <b>3.2 Canary 12</b> | ![Canary][canary] | **3.2.0.11**<p>AI&#8209;181.4203.550.32.4729833</p> | **2018.1**<p>181.4203.550</p> | Apr&nbsp;23,&nbsp;2018 |
| <b>3.2 Canary 11</b> | ![Canary][canary] | **3.2.0.10**<p>AI&#8209;181.3007.14.32.4720098</p> | **2018.1**<p>181.3007.14</p> | Apr&nbsp;16,&nbsp;2018 |
| <b>3.2 Canary 10</b> | ![Canary][canary] | **3.2.0.9**<p>AI&#8209;181.2784.17.32.4705630</p> | **2018.1**<p>181.2784.17</p> | Apr&nbsp;9,&nbsp;2018 |
| <b>3.2 Canary 9</b> | ![Canary][canary] | **3.2.0.8**<p>AI&#8209;173.4688006</p> | **2018.1**<p>173.4688006.0</p> | Apr&nbsp;2,&nbsp;2018 |
| <b>3.2 Canary 8</b> | ![Canary][canary] | **3.2.0.7**<p>AI&#8209;173.4670218</p> | **2018.1**<p>173.4670218.0</p> | Mar&nbsp;26,&nbsp;2018 |
| <b>3.2 Canary 7</b> | ![Canary][canary] | **3.2.0.6**<p>AI&#8209;173.4658582</p> | **2018.1**<p>173.4658582.0</p> | Mar&nbsp;19,&nbsp;2018 |
| <b>3.2 Canary 6</b> | ![Canary][canary] | **3.2.0.5**<p>AI&#8209;173.4640885</p> | **2018.1**<p>173.4640885.0</p> | Mar&nbsp;12,&nbsp;2018 |
| <b>3.2 Canary 5</b> | ![Canary][canary] | **3.2.0.4**<p>AI&#8209;173.4630681</p> | **2018.1**<p>173.4630681.0</p> | Mar&nbsp;5,&nbsp;2018 |
| <b>3.2 Canary 4</b> | ![Canary][canary] | **3.2.0.3**<p>AI&#8209;173.4615518</p> | **2018.1**<p>173.4615518.0</p> | Feb&nbsp;23,&nbsp;2018 |
| <b>3.2 Canary 3</b> | ![Canary][canary] | **3.2.0.2**<p>AI&#8209;173.4595177</p> | **2018.1**<p>173.4595177.0</p> | Feb&nbsp;15,&nbsp;2018 |
| <b>3.2 Canary 2</b> | ![Canary][canary] | **3.2.0.1**<p>AI&#8209;173.4591728</p> | **2018.1**<p>173.4591728.0</p> | Feb&nbsp;9,&nbsp;2018 |
| <b>3.2 Canary 1</b> | ![Canary][canary] | **3.2.0.0**<p>AI&#8209;173.4572754</p> | **2018.1**<p>173.4572754.0</p> | Feb&nbsp;1,&nbsp;2018 |
| <b>3.1.4</b> | ![Release][release] | **3.1.4.0**<p>AI&#8209;173.4907809</p> | **2018.1**<p>173.4907809.0</p> | Aug&nbsp;6,&nbsp;2018 |
| <b>3.1.3</b> | ![Release][release] | **3.1.3.0**<p>AI&#8209;173.4819257</p> | **2018.1**<p>173.4819257.0</p> | Jun&nbsp;7,&nbsp;2018 |
| <b>3.1.2</b> | ![Release][release] | **3.1.2.0**<p>AI&#8209;173.4720617</p> | **2018.1**<p>173.4720617.0</p> | Apr&nbsp;23,&nbsp;2018 |
| <b>3.1.1</b> | ![Release][release] | **3.1.1.0**<p>AI&#8209;173.4697961</p> | **2018.1**<p>173.4697961.0</p> | Apr&nbsp;9,&nbsp;2018 |
| <b>3.1</b> | ![Release][release] | **3.1.0.16**<p>AI&#8209;173.4670197</p> | **2018.1**<p>173.4670197.0</p> | Mar&nbsp;26,&nbsp;2018 |
| <b>3.1 RC 3</b> | ![RC][rc] | **3.1.0.15**<p>AI&#8209;173.4658569</p> | **2018.1**<p>173.4658569.0</p> | Mar&nbsp;19,&nbsp;2018 |
| <b>3.1 RC 2</b> | ![RC][rc] | **3.1.0.14**<p>AI&#8209;173.4640767</p> | **2018.1**<p>173.4640767.0</p> | Mar&nbsp;12,&nbsp;2018 |
| <b>3.1 RC 1</b> | ![RC][rc] | **3.1.0.13**<p>AI&#8209;173.4625007</p> | **2018.1**<p>173.4625007.0</p> | Mar&nbsp;5,&nbsp;2018 |
| <b>3.1 Beta 4</b> | ![Beta][beta] | **3.1.0.12**<p>AI&#8209;173.4615496</p> | **2018.1**<p>173.4615496.0</p> | Feb&nbsp;23,&nbsp;2018 |
| <b>3.1 Beta 3</b> | ![Beta][beta] | **3.1.0.11**<p>AI&#8209;173.4595152</p> | **2018.1**<p>173.4595152.0</p> | Feb&nbsp;15,&nbsp;2018 |
| <b>3.1 Beta 2</b> | ![Beta][beta] | **3.1.0.10**<p>AI&#8209;173.4580418</p> | **2018.1**<p>173.4580418.0</p> | Feb&nbsp;9,&nbsp;2018 |
| <b>3.1 Beta 1</b> | ![Beta][beta] | **3.1.0.9**<p>AI&#8209;173.4567466</p> | **2018.1**<p>173.4567466.0</p> | Jan&nbsp;30,&nbsp;2018 |
| <b>3.1 Canary 9</b> | ![Canary][canary] | **3.1.0.8**<p>AI&#8209;173.4559767</p> | **2018.1**<p>173.4559767.0</p> | Jan&nbsp;24,&nbsp;2018 |
| <b>3.1 Canary 8</b> | ![Canary][canary] | **3.1.0.7**<p>AI&#8209;173.4529993</p> | **2018.1**<p>173.4529993.0</p> | Jan&nbsp;12,&nbsp;2018 |
| <b>3.1 Canary 7</b> | ![Canary][canary] | **3.1.0.6**<p>AI&#8209;173.4524538</p> | **2018.1**<p>173.4524538.0</p> | Jan&nbsp;5,&nbsp;2018 |
| <b>3.1 Canary 6</b> | ![Canary][canary] | **3.1.0.5**<p>AI&#8209;173.4506631</p> | **2018.1**<p>173.4506631.0</p> | Dec&nbsp;20,&nbsp;2017 |
| <b>3.1 Canary 5</b> | ![Canary][canary] | **3.1.0.4**<p>AI&#8209;171.4474551</p> | **2017.2**<p>171.4474551.0</p> | Dec&nbsp;5,&nbsp;2017 |
| <b>3.1 Canary 4</b> | ![Canary][canary] | **3.1.0.3**<p>AI&#8209;171.4444016</p> | **2017.2**<p>171.4444016.0</p> | Nov&nbsp;17,&nbsp;2017 |
| <b>3.1 Canary 3</b> | ![Canary][canary] | **3.1.0.2**<p>AI&#8209;171.4435470</p> | **2017.2**<p>171.4435470.0</p> | Nov&nbsp;10,&nbsp;2017 |
| <b>3.1 Canary 2</b> | ![Canary][canary] | **3.1.0.1**<p>AI&#8209;171.4429293</p> | **2017.2**<p>171.4429293.0</p> | Nov&nbsp;3,&nbsp;2017 |
| <b>3.1 Canary 1</b> | ![Canary][canary] | **3.1.0.0**<p>AI&#8209;171.4415322</p> | **2017.2**<p>171.4415322.0</p> | Oct&nbsp;25,&nbsp;2017 |
| <b>3.0.1</b> | ![Release][release] | **3.0.1.0**<p>AI&#8209;171.4443003</p> | **2017.2**<p>171.4443003.0</p> | Nov&nbsp;20,&nbsp;2017 |
| <b>3.0</b> | ![Release][release] | **3.0.0.18**<p>AI&#8209;171.4408382</p> | **2017.2**<p>171.4408382.0</p> | Oct&nbsp;25,&nbsp;2017 |
| <b>3.0 RC 2</b> | ![RC][rc] | **3.0.0.17**<p>AI&#8209;171.4402976</p> | **2017.2**<p>171.4402976.0</p> | Oct&nbsp;19,&nbsp;2017 |
| <b>3.0 RC 1</b> | ![RC][rc] | **3.0.0.16**<p>AI&#8209;171.4392136</p> | **2017.2**<p>171.4392136.0</p> | Oct&nbsp;13,&nbsp;2017 |
| <b>3.0 Beta 7</b> | ![Beta][beta] | **3.0.0.15**<p>AI&#8209;171.4365657</p> | **2017.2**<p>171.4365657.0</p> | Oct&nbsp;3,&nbsp;2017 |
| <b>3.0 Beta 6</b> | ![Beta][beta] | **3.0.0.14**<p>AI&#8209;171.4333198</p> | **2017.2**<p>171.4333198.0</p> | Sep&nbsp;15,&nbsp;2017 |
| <b>3.0 Beta 5</b> | ![Beta][beta] | **3.0.0.13**<p>AI&#8209;171.4316950</p> | **2017.2**<p>171.4316950.0</p> | Sep&nbsp;8,&nbsp;2017 |
| <b>3.0 Beta 4</b> | ![Beta][beta] | **3.0.0.12**<p>AI&#8209;171.4304935</p> | **2017.2**<p>171.4304935.0</p> | Sep&nbsp;1,&nbsp;2017 |
| <b>3.0 Beta 2</b> | ![Beta][beta] | **3.0.0.10**<p>AI&#8209;171.4263559</p> | **2017.2**<p>171.4263559.0</p> | Aug&nbsp;11,&nbsp;2017 |
| <b>3.0 Beta 1</b> | ![Beta][beta] | **3.0.0.9**<p>AI&#8209;171.4243858</p> | **2017.2**<p>171.4243858.0</p> | Aug&nbsp;9,&nbsp;2017 |
| <b>3.0 Canary 9</b> | ![Canary][canary] | **3.0.0.8**<p>AI&#8209;171.4220116</p> | **2017.2**<p>171.4220116.0</p> | Jul&nbsp;31,&nbsp;2017 |
| <b>3.0 Canary 8</b> | ![Canary][canary] | **3.0.0.7**<p>AI&#8209;171.4195411</p> | **2017.2**<p>171.4195411.0</p> | Jul&nbsp;24,&nbsp;2017 |
| <b>3.0 Canary 7</b> | ![Canary][canary] | **3.0.0.6**<p>AI&#8209;171.4182969</p> | **2017.2**<p>171.4182969.0</p> | Jul&nbsp;17,&nbsp;2017 |
| <b>3.0 Canary 6</b> | ![Canary][canary] | **3.0.0.5**<p>AI&#8209;171.4163606</p> | **2017.2**<p>171.4163606.0</p> | Jul&nbsp;10,&nbsp;2017 |
| <b>3.0 Canary 5</b> | ![Canary][canary] | **3.0.0.4**<p>AI&#8209;171.4141229</p> | **2017.2**<p>171.4141229.0</p> | Jun&nbsp;30,&nbsp;2017 |
| <b>3.0 Canary 4</b> | ![Canary][canary] | **3.0.0.3**<p>AI&#8209;171.4101728</p> | **2017.2**<p>171.4101728.0</p> | Jun&nbsp;15,&nbsp;2017 |
| <b>3.0 Canary 3</b> | ![Canary][canary] | **3.0.0.2**<p>AI&#8209;171.4056697</p> | **2017.2**<p>171.4056697.0</p> | Jun&nbsp;2,&nbsp;2017 |
| <b>3.0 Canary 2</b> | ![Canary][canary] | **3.0.0.1**<p>AI&#8209;171.4041253</p> | **2017.2**<p>171.4041253.0</p> | May&nbsp;26,&nbsp;2017 |
| <b>3.0 Canary 1</b> | ![Canary][canary] | **3.0.0.0**<p>AI&#8209;171.4010489</p> | **2017.2**<p>171.4010489.0</p> | May&nbsp;17,&nbsp;2017 |



## 2.*

| Release Name | Channel | Version | IntelliJ IDEA Version | Release Date |
|--------------|---------|---------|-----------------------|--------------|
| <b>2.4 Preview 7</b> | ![Preview][preview] | **2.4.0.6**<p>AI&#8209;171.3934896</p> | **2017.2**<p>171.3934896.0</p> | Apr&nbsp;28,&nbsp;2017 |
| <b>2.4 Preview 6</b> | ![Preview][preview] | **2.4.0.5**<p>AI&#8209;171.3909050</p> | **2017.2**<p>171.3909050.0</p> | Apr&nbsp;13,&nbsp;2017 |
| <b>2.4 Preview 5</b> | ![Preview][preview] | **2.4.0.4**<p>AI&#8209;171.3883974</p> | **2017.2**<p>171.3883974.0</p> | Apr&nbsp;7,&nbsp;2017 |
| <b>2.4 Preview 4</b> | ![Preview][preview] | **2.4.0.3**<p>AI&#8209;171.3870562</p> | **2017.2**<p>171.3870562.0</p> | Apr&nbsp;3,&nbsp;2017 |
| <b>2.3.3</b> | ![Release][release] | **2.3.3.0**<p>AI&#8209;162.4069837</p> | **2016.3**<p>162.4069837.0</p> | Jun&nbsp;8,&nbsp;2017 |
| <b>2.3.2</b> | ![Release][release] | **2.3.2.0**<p>AI&#8209;162.3934792</p> | **2016.3**<p>162.3934792.0</p> | May&nbsp;11,&nbsp;2017 |


[release]: https://img.shields.io/badge/-Release-blue?style=flat-square
[patch]: https://img.shields.io/badge/-Patch-orange?style=flat-square
[rc]: https://img.shields.io/badge/-RC-red?style=flat-square
[beta]: https://img.shields.io/badge/-Beta-darkred?style=flat-square
[canary]: https://img.shields.io/badge/-Canary-lightgrey?style=flat-square
[preview]: https://img.shields.io/badge/-Preview-darkgrey?style=flat-square

</snippet>

# Android Studio Releases List

<!-- Copyright 2000-2022 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

<link-summary>List of all Android Studio IDE releases and their matching IntelliJ IDEA version.</link-summary>

This page contains a complete list of the Android Studio releases with the relevant IntelliJ IDEA release version specified.

Android Studio releases are grouped by major versions.
Each entry specifies the exact release channel (like Canary, Beta, RC, Release, Patch), release date, and exact IDE version with build number for the actual IDE and the IntelliJ IDEA platform that Android Studio is based on.

This data is updated daily and also available in [JSON](https://jb.gg/android-studio-releases-list.json) and [XML](https://jb.gg/android-studio-releases-list.xml) formats.

To get an insight on how to develop a plugin for Android Studio, see [](android_studio.md).

<include from="android_studio_releases.md" element-id="releases_table"></include>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 7. Annotator

<link-summary>Sample implementation of annotator highlighting resolved and unresolved Simple language properties in Java strings.</link-summary>

<tldr>

**Reference**: [](syntax_highlighting_and_error_highlighting.md#annotator)

**Code**: [`SimpleAnnotator`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleAnnotator.java)

**Testing**: [](annotator_test.md)
</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

An `Annotator` helps highlight and annotate any code based on specific rules.
This section adds annotation functionality to support the Simple Language in the context of Java code.

## Required Project Configuration Changes

Classes defined in this step of the tutorial depend on `com.intellij.psi.PsiLiteralExpression` (the PSI representation for String literals in Java code) at runtime.
Using `PsiLiteralExpression` [introduces a dependency](plugin_compatibility.md#modules-specific-to-functionality) on `com.intellij.java`.

Beginning in version 2019.2, a dependency on Java plugin [must be declared explicitly](plugin_compatibility.md#java).
First, add a dependency on the Java plugin in the Gradle build script:

<tabs>
<tab title="Kotlin">

```kotlin
intellij {
  plugins.set(listOf("com.intellij.java"))
}
```

</tab>
<tab title="Groovy">

```groovy
intellij {
  plugins = ['com.intellij.java']
}
```

</tab>
</tabs>

Then, declare the dependency in <path>[plugin.xml](plugin_configuration_file.md)</path> (use code insight)

```xml
<depends>com.intellij.java</depends>
```

## Define an Annotator

The [`SimpleAnnotator`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleAnnotator.java) subclasses [`Annotator`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/annotation/Annotator.java).
Consider a literal string that starts with "simple:" as a prefix of a Simple Language key.
It isn't part of the Simple Language, but it is a useful convention for detecting Simple Language keys embedded as string literals in other languages, like Java.
Annotate the `simple:key` literal expression, and differentiate between a well-formed vs. an unresolved property.

> The use of new `AnnotationHolder` syntax starting 2020.2, which uses the builder format.
>
{style="note"}

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleAnnotator.java" include-symbol="SimpleAnnotator"}

> If the above code is copied at this stage of the tutorial, then remove the line below the comment "** Tutorial step 19. …" The quick fix class in that line is not defined until later in the tutorial.
>

## Register the Annotator

Using the `com.intellij.annotator` extension point in the plugin configuration file, register the Simple Language annotator class for `JAVA` language:

```xml
<extensions defaultExtensionNs="com.intellij">
  <annotator
      language="JAVA"
      implementationClass="org.intellij.sdk.language.SimpleAnnotator"/>
</extensions>
```

## Run the Project

Run the plugin by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

As a test, define the following Java file containing a Simple Language `prefix:value` pair:

```java
public class Test {
  public static void main(String[] args) {
    System.out.println("simple:website");
  }
}
```

Open this Java file in an IDE Development Instance running the `simple_language_plugin` to check if the IDE resolves a property:

![Annotator](annotator.png){width="800"}

If the property is an undefined name, the annotator flags the code with an error.

![Unresolved property](unresolved_property.png){width="800"}

Try changing the Simple Language [color settings](syntax_highlighter_and_color_settings_page.md#run-the-project) to differentiate the annotation from the default language color settings.
<!-- Copyright 2000-2022 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 4. Annotator Test

<link-summary>Implementing and running tests for the annotator implemented as a part of the Custom Language Support Tutorial.</link-summary>

<tldr>

**Tested Functionality**: [](annotator.md)

</tldr>

<include from="tests_prerequisites.md" element-id="custom_language_testing_tutorial_header"></include>

## Define Input Test Data
The <path>DefaultTestData.simple</path> file is reused for this test.

Create an input test file <path>AnnotatorTestData.java</path> in the <path>testData</path> directory.
This file contains two instances of Simple Language embedded in the Java code.
The first instance is a valid use of the `simple:` prefix followed by the Simple Language key `website`.
The second is a valid prefix but an invalid key `websit`, as noted by the test `<error>` [highlighting](testing_highlighting.md).

```java
public class Test {
  public static void main(String[] args) {
    System.out.println("simple:website");
    System.out.println("simple:<error descr="Unresolved property">websit</error>");
  }
}
```

> See how to [generate highlighting test data](testing_highlighting.md#generating-test-data).

## Define a Test Method
Add the `testAnnotator()` method to the `SimpleCodeInsightTest` class [previously defined](completion_test.md#define-a-test).
Again, this method configures the test fixture by using the test files.
It then calls the `checkHighlighting()` method to verify weak warnings.

```java
```
{src="simple_language_plugin/src/test/java/org/intellij/sdk/language/SimpleCodeInsightTest.java" include-symbol="testAnnotator"}

## Run the Test

<include from="custom_language_testing_snippets.md" element-id="runTests"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Incompatible Changes in IntelliJ Platform and Plugins API

<!--
=============== DO NOT RENAME OR MOVE THIS FILE ===============

Before documenting a breaking API change, please make sure that the change cannot be avoided in an alternative way.

APIs marked with @Deprecated(forRemoval=true), @ApiStatus.Experimental, @ApiStatus.Internal/IntellijInternalApi, or @ApiStatus.ScheduledForRemoval don't need to be documented.

To document a new incompatible change, add a new line with the problem pattern followed by a 2nd line with ": "-prefixed human-readable description
and recommended fix/action (REQUIRED, please write full sentence ending with '.', see existing entries as reference).
Non-platform changes must be grouped under relevant section for plugin.

The following problem patterns are supported and must be followed EXACTLY (e.g., no '#' instead of '.'):

<package name> package removed

<class name> class removed
<class name> class renamed to <new class name>
<class name> class moved to package <package name>

<class name>.<method name>(<human-readable parameters>) marked abstract
<class name>.<method name>(<human-readable parameters>) abstract method added
<class name>.<method name>(<human-readable parameters>) method removed
<class name>.<method name>(<human-readable parameters>) method moved to the superclass
<class name>.<method name>(<human-readable parameters>) method return type changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method visibility changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method marked final
<class name>.<method name>(<human-readable parameters>) method parameter <type> removed
<class name>.<method name>(<human-readable parameters>) method parameter type changed from <before> to <after>
<class name>.<method name> method <parameter name> parameter marked @<class name>
<class name> (class|interface) now (extends|implements) <class name> and inherits its final method <method name>(<human-readable parameters>)?
<class name> (class|interface) now (extends|implements) <class name> and inherits its abstract method <method name>(<human-readable parameters>)?
<class name> class now interface

<class name>(<human-readable parameters>) constructor removed
<class name>(<human-readable parameters>) constructor parameter <type> removed
<class name>(<human-readable parameters>) constructor parameter type changed from <before> to <after>
<class name>(<human-readable parameters>) constructor visibility changed from <before> to <after>

<class name>.<field name> field removed
<class name>.<field name> field moved to the superclass
<class name>.<field name> field type changed from <before> to <after>
<class name>.<field name> field visibility changed from <before> to <after>

<property name> property removed from resource bundle <bundle name>

Where the placeholders must be enclosed in code quotes (`name`):

<class name> is a fully-qualified name of the class, e.g. `com.intellij.openapi.actionSystem.AnAction$InnerClass`.
<method name> is the exact method's name. Note that constructors have dedicated patterns.
<human-readable parameters> is a string representing parameters, which are not necessarily fully qualified. They do not affect the parser. For example, instead of (java.lang.Object, java.util.List, int) you are free to write (Object, List<String>, int)
<parameter name> is exact name of the method's parameter
<property name> is a full name of a property from .properties file, like `some.action.description`
<bundle name> is a fully qualified name of the property bundle, which includes its package, like `message.IdeBundle`

NOTE: If a code change you're trying to document doesn't match any of the above patterns, please ask in #plugins-verifier

NOTE: You are allowed to prettify the pattern using links: [`org.example.Foo`](https://github.com/JetBrains/intellij-community/tree/master/)

NOTE: Entries not starting with code quotes (`name`) can be added to document non-code changes and will be skipped in API verification.
-->

<link-summary>List of known Breaking API Changes by version</link-summary>

IntelliJ API may be occasionally changed between releases, leading to existing plugins' incompatibilities with newer IDE builds.

See [](verifying_plugin_compatibility.md) on how to use Plugin Verifier and IDE inspections to check such problems.

## Known Breaking Changes

<include from="snippets.md" element-id="subscribeNews"/>

The following pages list the breaking changes in IDE and plugin releases with required/recommended steps to take by plugin authors.

* [Changes in 2025.*](api_changes_list_2025.md)
* [Changes in 2024.*](api_changes_list_2024.md)
* [Changes in 2023.*](api_changes_list_2023.md)
* [Changes in 2022.*](api_changes_list_2022.md)
* [Changes in 2021.*](api_changes_list_2021.md)
* [Changes in 2020.*](api_changes_list_2020.md)
* [Changes in 2019.*](api_changes_list_2019.md)

## Bundled Library Updates

Information about bundled Third-Party Software/Libraries and their respective versions is available [here](https://www.jetbrains.com/legal/third-party-software/).
<!-- Copyright 2000-2023 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Incompatible Changes in IntelliJ Platform and Plugins API 2019.*

<!--
Before documenting a breaking API change, please make sure that the change cannot be avoided in an alternative way.

APIs marked with @Deprecated(forRemoval=true), @ApiStatus.Experimental, @ApiStatus.Internal/IntellijInternalApi, or @ApiStatus.ScheduledForRemoval don't need to be documented.

To document a new incompatible change, add a new line with the problem pattern followed by a 2nd line with ": "-prefixed human-readable description
and recommended fix/action (REQUIRED, please write full sentence ending with '.', see existing entries as reference).
Non-platform changes must be grouped under relevant section for plugin.

The following problem patterns are supported and must be followed EXACTLY (e.g., no '#' instead of '.'):

<package name> package removed

<class name> class removed
<class name> class renamed to <new class name>
<class name> class moved to package <package name>

<class name>.<method name>(<human-readable parameters>) marked abstract
<class name>.<method name>(<human-readable parameters>) abstract method added
<class name>.<method name>(<human-readable parameters>) method removed
<class name>.<method name>(<human-readable parameters>) method moved to the superclass
<class name>.<method name>(<human-readable parameters>) method return type changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method visibility changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method marked final
<class name>.<method name>(<human-readable parameters>) method parameter <type> removed
<class name>.<method name>(<human-readable parameters>) method parameter type changed from <before> to <after>
<class name>.<method name> method <parameter name> parameter marked @<class name>
<class name> (class|interface) now (extends|implements) <class name> and inherits its final method <method name>(<human-readable parameters>)?
<class name> (class|interface) now (extends|implements) <class name> and inherits its abstract method <method name>(<human-readable parameters>)?
<class name> class now interface

<class name>(<human-readable parameters>) constructor removed
<class name>(<human-readable parameters>) constructor parameter <type> removed
<class name>(<human-readable parameters>) constructor parameter type changed from <before> to <after>
<class name>(<human-readable parameters>) constructor visibility changed from <before> to <after>

<class name>.<field name> field removed
<class name>.<field name> field moved to the superclass
<class name>.<field name> field type changed from <before> to <after>
<class name>.<field name> field visibility changed from <before> to <after>

<property name> property removed from resource bundle <bundle name>

Where the placeholders must be enclosed in code quotes (`name`):

<class name> is a fully-qualified name of the class, e.g. `com.intellij.openapi.actionSystem.AnAction$InnerClass`.
<method name> is the exact method's name. Note that constructors have dedicated patterns.
<human-readable parameters> is a string representing parameters, which are not necessarily fully qualified. They do not affect the parser. For example, instead of (java.lang.Object, java.util.List, int) you are free to write (Object, List<String>, int)
<parameter name> is exact name of the method's parameter
<property name> is a full name of a property from .properties file, like `some.action.description`
<bundle name> is a fully qualified name of the property bundle, which includes its package, like `message.IdeBundle`

NOTE: If a code change you're trying to document doesn't match any of the above patterns, please ask in #plugins-verifier

NOTE: You are allowed to prettify the pattern using links: [`org.example.Foo`](https://github.com/JetBrains/intellij-community/tree/master/)

NOTE: Entries not starting with code quotes (`name`) can be added to document non-code changes and will be skipped in API verification.
-->

<link-summary>List of known Breaking API Changes in 2019.*</link-summary>

<include from="snippets.md" element-id="apiChangesHeader"/>

## 2019.3

### IntelliJ Platform 2019.3

`com.intellij.codeInsight.TailType.getLocalCodeStyleSettings(Editor, int)` method removed
: Use `com.intellij.psi.codeStyle.CommonCodeStyleSettings.getLocalCodeStyleSettings(Editor, int)` instead.

`com.intellij.codeInsight.TailType.EQ` field removed
: Use `com.intellij.codeInsight.lookup.EqTailType.INSTANCE` instead.

`com.intellij.codeInsight.TailType.COMMA` field removed
: Use `com.intellij.codeInsight.lookup.CommaTailType.INSTANCE` instead.

`com.intellij.codeInsight.completion.CompletionContributor.getActionShortcut(String)` method removed
: Use `com.intellij.codeInsight.completion.CompletionUtil.getActionShortcut(String)` instead

`com.intellij.codeInsight.AutoPopupController.runTransactionWithEverythingCommitted(Project, Runnable)` method removed
: Use `com.intellij.codeInsight.AutoPopupControllerImpl.runTransactionWithEverythingCommitted(Project, Runnable)` instead

`com.intellij.codeInsight.completion.InsertionContext.getCodeStyleSettings()` method removed
: Use `com.intellij.codeInsight.completion.util.CompletionStyleUtil.getCodeStyleSettings(InsertionContext)` instead

`com.intellij.codeInsight.completion.CompletionUtil.sortMatching(PrefixMatcher, Collection)` method removed
: Use `com.intellij.codeInsight.completion.PrefixMatcher.sortMatching(Collection)` instead

`com.intellij.json.JsonFileTypeFactory` class removed
: Use `com.intellij.fileType` extension point instead.

`com.intellij.util.containers.ConcurrentHashSet` class removed
: Use `com.intellij.util.containers.ContainerUtil#newConcurrentSet` instead.

`com.intellij.openapi.editor.impl.EditorFactoryImpl(EditorActionManager)` constructor removed
: Use `com.intellij.openapi.editor.EditorFactory.getInstance()` instead.

`com.intellij.util.net.ssl.CertificateManager.HOSTNAME_VERIFIER` field removed
: Use `org.apache.http.conn.ssl.DefaultHostnameVerifier` instead.

`com.intellij.openapi.util.BuildNumber.getBuildNumber()` method removed
: See `BuildNumber.asString`, `BuildNumber.getBaselineVersion()` and `BuildNumber.getComponents()` as alternatives.

`com.intellij.remoteServer.configuration.deployment.DeploymentConfigurationManager.createAndRunConfiguration(ServerType, RemoteServer)` method removed
: Use `DeploymentConfigurationManager.createAndRunConfiguration(ServerType, RemoteServer, DeploymentSourceType)` instead.

#### VCS
`com.intellij.openapi.vcs.changes.ui.ChangesListView.UNVERSIONED_FILES_DATA_KEY` field removed
: Use `com.intellij.openapi.vcs.changes.ui.ChangesListView.UNVERSIONED_FILE_PATHS_DATA_KEY` instead.

`com.intellij.openapi.vcs.VcsVFSListener.myAddedFiles` field removed
: Use `com.intellij.openapi.vcs.VcsVFSListener.myProcessor.acquireAddedFiles()` instead.

`com.intellij.openapi.vcs.VcsVFSListener.myDeletedFiles` field removed
: Use `com.intellij.openapi.vcs.VcsVFSListener.myProcessor.acquireAllDeletedFiles().deletedFiles` instead.

`com.intellij.openapi.vcs.VcsVFSListener.myDeletedWithoutConfirmFiles` field removed
: Use `com.intellij.openapi.vcs.VcsVFSListener.myProcessor.acquireAllDeletedFiles().deletedWithoutConfirmFiles` instead.

`com.intellij.openapi.vcs.VcsVFSListener.myExceptions` field removed
: Use `com.intellij.openapi.vcs.VcsVFSListener.myProcessor.acquireExceptions()` or `com.intellij.openapi.vcs.VcsVFSListener.myProcessor.addException(VcsException exception)` instead.

#### Test Framework
`com.intellij.testFramework.PlatformTestUtil.registerExtension(ExtensionsArea, T, Disposable)` method removed
: Use `com.intellij.testFramework.ServiceContainerUtil#registerExtension(BaseExtensionPointName, T, Disposable)` instead.

`com.intellij.testFramework.PlatformTestUtil.registerExtension(ExtensionsArea, BaseExtensionPointName, T, Disposable)` method removed
: Use `com.intellij.testFramework.ServiceContainerUtil#registerExtension(BaseExtensionPointName, T, Disposable)` instead.

`com.intellij.testFramework.fixtures.DefaultLightProjectDescriptor.getModuleType()` method removed
: Use `com.intellij.testFramework.fixtures.DefaultLightProjectDescriptor.getModuleTypeId()` instead (see `com.intellij.openapi.module.ModuleTypeId`).

### Java Plugin 2019.3

`com.intellij.codeInspection.magicConstant.MagicCompletionContributor.getAllowedValues(PsiElement)` method return type changed from `com.intellij.codeInspection.magicConstant.MagicConstantInspection.AllowedValues` to `com.intellij.codeInspection.magicConstant.MagicConstantUtils.AllowedValues`
: Use new type instead.

### Groovy Plugin 2019.3

`org.jetbrains.plugins.groovy.extensions.GroovyScriptTypeDetector(GroovyScriptType, String[])` constructor removed
: Use constructor `GroovyScriptTypeDetector(GroovyScriptType)` instead, and `com.intellij.fileType` to register additional extensions.

### Cucumber Plugin 2019.3

`org.jetbrains.plugins.cucumber.javascript.CucumberJavaScriptStepDefinitionCreator#createStepDefinition(GherkinStep, PsiFile)` method removed
: Use `org.jetbrains.plugins.cucumber.javascript.CucumberJavaScriptStepDefinitionCreator#createStepDefinition(GherkinStep, PsiFile, boolean)` instead.

`org.jetbrains.plugins.cucumber.psi.GherkinStep#getStepName()` method removed
: Use `org.jetbrains.plugins.cucumber.psi.GherkinStep#getName()` instead.

`org.jetbrains.plugins.cucumber.CucumberJvmExtensionPoint#resolveStep()` method removed
: See `org.jetbrains.plugins.cucumber.steps.reference.CucumberStepReference#multiResolveInner()` instead.

`org.jetbrains.plugins.cucumber.CucumberJvmExtensionPoint#getGlues()` method removed
: Java specific method was moved to CucumberJava implementation.

### DataGrip and Database Tools Plugin 2019.3

`com.intellij.sql.dialects.mssql.MssqlDialect` class renamed to `com.intellij.sql.dialects.mssql.MsDialect`
: Do not use SQL dialect classes directly.

`com.intellij.sql.dialects.oracle.OracleDialect` class renamed to `com.intellij.sql.dialects.oracle.OraDialect`
: Do not use SQL dialect classes directly.

`com.intellij.sql.dialects.postgres.PostgresDialect` class renamed to `com.intellij.sql.dialects.postgres.PgDialect`
: Do not use SQL dialect classes directly.

### RubyMine and Ruby Plugin 2019.3

`org.jetbrains.plugins.ruby.ruby.codeInsight.types.RubyTypeProvider.createTypeBySymbolFromProviders(Symbol symbol, Context context)` method parameter `Context` removed
: This was done as part of [`RUBY-24760`](https://youtrack.jetbrains.com/issue/RUBY-24760) in order to move to new Context-less approach.

### PyCharm and Python Plugin 2019.3

`com.jetbrains.python.inspections.PythonVisitorFilter` class moved to package `com.jetbrains.python.psi`

`com.jetbrains.python.psi.PyUtil.addElementToStatementList(PsiElement, PyStatementList, boolean)` method removed
: Use `com.jetbrains.python.refactoring.PyRefactoringUtil.addElementToStatementList(PsiElement, PyStatementList, boolean)` instead

`com.jetbrains.python.psi.search.PyProjectScopeBuilder.excludeSdkTestsScope(Project)` method removed
: Use `com.jetbrains.python.psi.search.PySearchUtilBase.excludeSdkTestsScope(Project)` instead.

`icons.PythonIcons.Python.PropertySetter` field removed
: Use `icons.PythonPsiApiIcons.PropertySetter` instead.

`icons.PythonIcons.Python.PropertyGetter` field removed
: Use `icons.PythonPsiApiIcons.PropertyGetter` instead.

`PARSE.expected.colon` property removed from resource bundle `com.jetbrains.python.PyBundle`
: Use `com.jetbrains.python.PyPsiBundle` instead.

`PARSE.expected.expression` property removed from resource bundle `com.jetbrains.python.PyBundle`
: Use `com.jetbrains.python.PyPsiBundle` instead.

## 2019.2

### IntelliJ Platform 2019.2
Constructor injection referring to extension points not supported
: Obtain reference to extension points via `(Project)ExtensionPointName.findExtension()` in your constructor instead.

`com.intellij.openapi.components.BaseState.map$default(BaseState, Map, int, Object)` method removed
: Use `com.intellij.openapi.components.BaseState.map()` instead.

`org.nustaq` package removed
: [fast-serialization](https://github.com/RuedigerMoeller/fast-serialization) library was removed, please use `com.intellij.serialization.ObjectSerializer` instead.

`java.org.java_websocket` package removed
: [Java-WebSocket](https://github.com/TooTallNate/Java-WebSocket) library was removed, bundle it with your plugin instead.

`com.intellij.ui.layout.Cell.invoke$default(Cell, JComponent, CCFlags[], int, GrowPolicy, String, int, Object)` method parameter type changed
: The signature of this function has been seriously changed without the possibility to keep the old function. Change invocations and overriding of that function according to new parameters and recompile the code.

`com.intellij.ui.layout.Row.label$default(Row, String, int, UIUtil.ComponentStyle, UIUtil.FontColor, boolean, int, Object)` method removed
: This method has been pulled up to the base class `Cell`; since it has default parameters, it's a binary breaking change in Kotlin.
Recompile your code to pick up the new signature.

`com.yourkit` package removed
: YourKit library has been extracted into the separate plugin, which is not bundled in all IDEs by default. YourKit library is a library for profiling IDE, and its util classes shouldn't be used for general purposes. Instead of `com.yourkit.util.Strings` please use  `org.apache.commons.lang.StringUtils`.  Instead of `com.yourkit.util.ArrayUtil` please use `org.apache.commons.lang.ArrayUtils`.

`org.jetbrains.intellij.build.ProductProperties.yourkitAgentBinariesDirectoryPath` field removed
: Please bundle [performanceTesting plugin](https://plugins.jetbrains.com/plugin/7819-performance-testing) in case you would like to bundle YourKit profiler within your IDE.

`org.jetbrains.intellij.build.ProductProperties.enableYourkitAgentInEAP` field removed
: Please bundle [performanceTesting plugin](https://plugins.jetbrains.com/plugin/7819-performance-testing) in case you would like to bundle YourKit profiler within your IDE.

`com.intellij.extapi.psi.PsiElementBase` class removed
: Please use `com.intellij.psi.impl.PsiElementBase` or one of its descendants as a base class for PSI elements, e.g. `com.intellij.extapi.psi.ASTWrapperPsiElement`, as suggested in [Custom Language Support Tutorial](grammar_and_parser.md).

`com.intellij.extapi.psi.MetadataPsiElementBase` class removed
: Please use different base class for PSI elements.

`com.intellij.ide.actions.SearchAgainAction` class now extends `com.intellij.openapi.editor.actionSystem.EditorAction` and inherits its final method `actionPerformed`
: Please use the `com.intellij.editorActionHandler` extension point to register a different handler for the action.

`com.intellij.ide.actions.SearchBackAction` class now extends `com.intellij.openapi.editor.actionSystem.EditorAction` and inherits its final method `actionPerformed`
: Please use the `com.intellij.editorActionHandler` extension point to register a different handler for the action.

`com.intellij.lexer.RestartableLexer.getRestartableState()` method removed
: Please use `com.intellij.lexer.RestartableLexer.isRestartableState(int state)` instead.

`com.intellij.lexer.RestartableLexer.isRestartableState(int state)` abstract method added
: Implement method in `RestartableLexer` implementations.

`com.intellij.lexer.RestartableLexer.start(CharSequence buffer, int startOffset, int endOffset, int initialState, TokenIterator tokenIterator)` abstract method added
: Implement method in `RestartableLexer` implementations.

## 2019.1

### IntelliJ Platform 2019.1

`kotlinx.coroutines.experimental` package removed
: Bundled Kotlin library is updated to 1.3, so the plugins must [migrate](https://blog.jetbrains.com/kotlin/2018/09/kotlin-1-3-rc-is-here-migrate-your-coroutines/) to the stable versions of coroutines.

`com.intellij.openapi.vcs.impl.ProjectLevelVcsManagerImpl(Project, FileStatusManager, FileIndexFacade, ProjectManager, DefaultVcsRootPolicy, VcsFileListenerContextHelper)` constructor removed
: Use `com.intellij.openapi.vcs.impl.ProjectLevelVcsManagerImpl.<init>(Project, FileStatusManager, FileIndexFacade, ProjectManager, DefaultVcsRootPolicy)`.

`com.intellij.injected.editor.DocumentWindow.injectedToHost(int, boolean)` abstract method added
: Implement the method in `DocumentWindow` implementations.

`git4idea.rebase.GitCommitEditingAction.actionPerformed(AnActionEvent)` method marked final
: Implement `actionPerformedAfterChecks` instead of `actionPerformed`.

`git4idea.rebase.GitCommitEditingAction.actionPerformedAfterChecks(AnActionEvent)` abstract method added
: Implement `actionPerformedAfterChecks` instead of `actionPerformed`.

`com.intellij.util.lang.UrlClassLoader.loadPlatformLibrary` method removed
: Use `com.intellij.util.loader.NativeLibraryLoader.loadPlatformLibrary` instead.

`com.intellij.openapi.util.KeyedExtensionCollector.getExtensions()` method marked final
: Remove custom implementation.

### DataGrip and Database Tools Plugin 2019.1

`com.intellij.sql.psi.SqlTokens.SQL_IDENT` field type changed from `com.intellij.sql.psi.impl.SqlTokenType` to `com.intellij.sql.psi.SqlTokenType`
: In most of the cases, it's enough to recompile the code. It may also be needed to check that the code doesn't rely on the field's type.

### Kotlin Plugin API 1.3

`org.jetbrains.kotlin.KtNodeTypes.BOOLEAN_CONSTANT` field type changed from `org.jetbrains.kotlin.KtNodeType` to `com.intellij.psi.tree.IElementType`
: Field type has been generalized. In most of the cases, it's enough to recompile the code of the plugin.

`org.jetbrains.kotlin.KtNodeTypes.CHARACTER_CONSTANT` field type changed from `org.jetbrains.kotlin.KtNodeType` to `com.intellij.psi.tree.IElementType`
: Field type has been generalized. In most of the cases, it's enough to recompile the code of the plugin.

`org.jetbrains.kotlin.KtNodeTypes.FLOAT_CONSTANT` field type changed from `org.jetbrains.kotlin.KtNodeType` to `com.intellij.psi.tree.IElementType`
: Field type has been generalized. In most of the cases, it's enough to recompile the code of the plugin.

`org.jetbrains.kotlin.KtNodeTypes.INTEGER_CONSTANT` field type changed from `org.jetbrains.kotlin.KtNodeType` to `com.intellij.psi.tree.IElementType`
: Field type has been generalized. In most of the cases, it's enough to recompile the code of the plugin.

`org.jetbrains.kotlin.KtNodeTypes.STRING_TEMPLATE` field type changed from `org.jetbrains.kotlin.KtNodeType` to `com.intellij.psi.tree.IElementType`
: Field type has been generalized. In most of the cases, it's enough to recompile the code of the plugin.
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Incompatible Changes in IntelliJ Platform and Plugins API 2020.*

<!--
Before documenting a breaking API change, please make sure that the change cannot be avoided in an alternative way.

APIs marked with @Deprecated(forRemoval=true), @ApiStatus.Experimental, @ApiStatus.Internal/IntellijInternalApi, or @ApiStatus.ScheduledForRemoval don't need to be documented.

To document a new incompatible change, add a new line with the problem pattern followed by a 2nd line with ": "-prefixed human-readable description
and recommended fix/action (REQUIRED, please write full sentence ending with '.', see existing entries as reference).
Non-platform changes must be grouped under relevant section for plugin.

The following problem patterns are supported and must be followed EXACTLY (e.g., no '#' instead of '.'):

<package name> package removed

<class name> class removed
<class name> class renamed to <new class name>
<class name> class moved to package <package name>

<class name>.<method name>(<human-readable parameters>) marked abstract
<class name>.<method name>(<human-readable parameters>) abstract method added
<class name>.<method name>(<human-readable parameters>) method removed
<class name>.<method name>(<human-readable parameters>) method moved to the superclass
<class name>.<method name>(<human-readable parameters>) method return type changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method visibility changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method marked final
<class name>.<method name>(<human-readable parameters>) method parameter <type> removed
<class name>.<method name>(<human-readable parameters>) method parameter type changed from <before> to <after>
<class name>.<method name> method <parameter name> parameter marked @<class name>
<class name> (class|interface) now (extends|implements) <class name> and inherits its final method <method name>(<human-readable parameters>)?
<class name> (class|interface) now (extends|implements) <class name> and inherits its abstract method <method name>(<human-readable parameters>)?
<class name> class now interface

<class name>(<human-readable parameters>) constructor removed
<class name>(<human-readable parameters>) constructor parameter <type> removed
<class name>(<human-readable parameters>) constructor parameter type changed from <before> to <after>
<class name>(<human-readable parameters>) constructor visibility changed from <before> to <after>

<class name>.<field name> field removed
<class name>.<field name> field moved to the superclass
<class name>.<field name> field type changed from <before> to <after>
<class name>.<field name> field visibility changed from <before> to <after>

<property name> property removed from resource bundle <bundle name>

Where the placeholders must be enclosed in code quotes (`name`):

<class name> is a fully-qualified name of the class, e.g. `com.intellij.openapi.actionSystem.AnAction$InnerClass`.
<method name> is the exact method's name. Note that constructors have dedicated patterns.
<human-readable parameters> is a string representing parameters, which are not necessarily fully qualified. They do not affect the parser. For example, instead of (java.lang.Object, java.util.List, int) you are free to write (Object, List<String>, int)
<parameter name> is exact name of the method's parameter
<property name> is a full name of a property from .properties file, like `some.action.description`
<bundle name> is a fully qualified name of the property bundle, which includes its package, like `message.IdeBundle`

NOTE: If a code change you're trying to document doesn't match any of the above patterns, please ask in #plugins-verifier

NOTE: You are allowed to prettify the pattern using links: [`org.example.Foo`](https://github.com/JetBrains/intellij-community/tree/master/)

NOTE: Entries not starting with code quotes (`name`) can be added to document non-code changes and will be skipped in API verification.
-->

<link-summary>List of known Breaking API Changes in 2020.*</link-summary>

<include from="snippets.md" element-id="apiChangesHeader"/>

<include from="snippets.md" element-id="apiChangesJavaVersion"/>

## 2020.3

### IntelliJ Platform 2020.3

`com.intellij.openapi.application.NonBlockingReadAction.finishOnUiThread` method parameter type changed from ``Consumer<T>`` to ``Consumer<? super T>``
: This may break source-compatibility with inheritors written in Kotlin.

`com.intellij.openapi.diagnostic.ErrorReportSubmitter.submit` method parameter type changed from ``Consumer<SubmittedReportInfo>`` to ``Consumer<? super SubmittedReportInfo>``
: This may break source-compatibility with inheritors written in Kotlin.

`com.intellij.execution.ui.ConsoleView.attachToProcess` method `ProcessHandler` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.

`com.intellij.util.indexing.FileContentImpl(VirtualFile, byte[])` constructor removed
: Constructors of `FileContentImpl` were replaced with factory methods, use `FileContentImpl#createByContent(VirtualFile, byte[])`.

`com.intellij.spellchecker.quickfixes.ChangeTo(String)` constructor removed
: Replaced with `ChangeTo(String, PsiElement, TextRange)`.

`com.intellij.spellchecker.tokenizer.SpellcheckingStrategy.getDefaultRegularFixes(boolean, String, PsiElement)` method removed
: Replaced with `SpellcheckingStrategy.getDefaultRegularFixes(boolean, String, PsiElement, TextRange)`.

`com.intellij.psi.stubs.IStubElementType.createStub` method parameter type changed from `StubElement` to ``StubElement<?>``
: This may break source-compatibility with inheritors written in Kotlin.

`com.intellij.execution.application.ApplicationConfiguration.isSwingInspectorEnabled()` method removed
: The Swing Inspector functionality has been removed from the product.

`com.intellij.execution.application.ApplicationConfiguration.setSwingInspectorEnabled(boolean)` method removed
: The Swing Inspector functionality has been removed from the product.

`show.swing.inspector` property removed from resource bundle `messages.ExecutionBundle`
: The Swing Inspector functionality has been removed from the product.

`show.swing.inspector.disabled` property removed from resource bundle `messages.ExecutionBundle`
: The Swing Inspector functionality has been removed from the product.

### Java Plugin 2020.3

The PSI structure of multi-dimensional arrays in Java source files changed (see `com.intellij.psi.PsiTypeElement`)
: Now the children are flattened: brackets for all the dimensions are direct children of the `PsiTypeElement` that represent the multi-dimensional array. This change doesn't break source or binary compatibility but may produce behavioral changes in the code that traverses the tree of Java source files.

The `com.intellij.psi.PsiAnnotation.getOwner` method now returns `PsiType` instead of `PsiTypeElement` for type annotations in Java source files
: This change supports identifying whether a type annotation is attached to an inner class or a particular dimension of a multi-dimensional array.
This change doesn't break source or binary compatibility but may produce behavioral changes for callers.

### PhpStorm and PHP Plugin 2020.3

Added PHP 8 support
: See [Breaking Changes in PhpStorm 2020.3](php_open_api_breaking_changes_203.md).

### Python Plugin 2020.3

All parameters in `com.jetbrains.python.psi.PyElementVisitor` marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin.

`com.jetbrains.python.parsing.ParsingContext(SyntaxTreeBuilder, LanguageLevel, StatementParsing.FUTURE)` method parameter `StatementParsing.FUTURE` removed
: It is no longer used in parsing.

`com.jetbrains.python.parsing.StatementParsing(ParsingContext, StatementParsing.FUTURE)` method parameter `StatementParsing.FUTURE` removed
: It is no longer used in parsing.

`com.jetbrains.python.parsing.StatementParsing.FUTURE` class removed
: Use `com.jetbrains.python.psi.FutureFeature` instead.

`com.jetbrains.python.sdk.PythonSdkUpdater.updateOrShowError(Sdk, SdkModificator, Project, Component)` method parameter `SdkModificator` removed
: It was not processed carefully, it should be enough to pass editable SDK instead.

`python.sdk.interpreter.field.is.empty` property removed from resource bundle `messages.PyBundle`
: Use `python.sdk.field.is.empty` from `messages.PySdkBundle` instead.

`base.interpreter` property removed from resource bundle `messages.PyBundle`
: Use `python.venv.base.label` from `messages.PySdkBundle` instead.

`interpreter` property removed from resource bundle `messages.PyBundle`
: Use `python.interpreter.label` from `messages.PySdkBundle` instead.

`com.jetbrains.python.psi.LanguageLevel.hasWithStatement()` method removed
: It is `true` for all supported python versions.

### CLion/AppCode 2020.3

Required changes in project setup
: When targeting 2020.3, please see this [migration guide](https://blog.jetbrains.com/clion/2020/12/migration-guide-for-plugins-2020-3/).

## 2020.2

### IntelliJ Platform 2020.2

Support for JavaFX deprecated
: Plugins should migrate to [JCEF](embedded_browser_jcef.md). Alternatively, add an explicit dependency on [JavaFX Runtime for Plugins](https://plugins.jetbrains.com/plugin/14250-javafx-runtime-for-plugins).

`com.intellij.psi.util.PsiTreeUtil.processElements(element, processor)` method parameter type changed from `PsiElementProcessor` to `PsiElementProcessor<PsiElement>`
: This may break source-compatibility with clients that pass a more specific processor. Passing a more specific processor was illegal before because the `processElements` passes every descendant `PsiElement` to the processor regardless of its type. However, this worked with some poorly written clients, e.g. `PsiElementProcessor.CollectFilteredElements` and `PsiElementProcessor.FindFilteredElement` (both deprecated now). To simplify the migration, a new three-arg `processElements(element, elementClass, processor)` is introduced that filters by element class. In most cases, the simplest migration would be to add a wanted element class as a second argument. However, it's advised to use `SyntaxTraverser` API instead, which is more rich and flexible.

`com.maddyhome.idea.copyright.util.FileTypeUtil.getFileTypeByName(String)` method removed
: This was an internal utility method not intended for use in plugins. Use `FileTypeManager.getInstance().findFileTypeByName()` instead.

`javassist` package removed
: [Javassist](https://github.com/jboss-javassist/javassist) library was removed, bundle it with your plugin instead.

`com.intellij.compiler.backwardRefs.LanguageCompilerRefAdapter.INSTANCES` field removed
: This field leaked instances of plugin's extensions on plugin unloading. Use `com.intellij.compiler.backwardRefs.LanguageCompilerRefAdapter#EP_NAME.getExtensionList()` directly instead.

`groovy.util.AntBuilder` class removed
: Add `org.codehaus.groovy:groovy-ant` dependency.

`groovy.util.GroovyTestCase` class removed
: Add `org.codehaus.groovy:groovy-test` dependency.

`groovy.util.GroovyTestSuite` class removed
: Add `org.codehaus.groovy:groovy-test` dependency.

`groovy.json.internal` package removed
: Use classes from `org.apache.groovy.json.internal` package.

`com.intellij.openapi.externalSystem.service.execution.TaskCompletionProvider(Project, ProjectSystemId, TextAccessor, Options)` constructor parameter type changed from `groovyjarjarcommonscli.Options` to `org.apache.commons.cli.Options`
: Update inheritors accordingly.

`org.jetbrains.plugins.gradle.service.execution.cmd.GradleCommandLineOptionsProvider.getSupportedOptions()` method return type changed from `groovyjarjarcommonscli.Options` to `org.apache.commons.cli.Options`
: Update call sites accordingly.

`com.intellij.openapi.editor.markup.MarkupModel.addLineHighlighter(TextAttributesKey, int, int)` abstract method added
: Use it instead of `MarkupModel.addLineHighlighter(int, int, TextAttributes)`.

`com.intellij.openapi.editor.markup.MarkupModel.addRangeHighlighter(TextAttributesKey, int, int, int, HighlighterTargetArea)` abstract method added
: Use it instead of `MarkupModel.addRangeHighlighter(int, int, int, TextAttributes, HighlighterTargetArea)`.

`com.intellij.codeInsight.daemon.LineMarkerProvider.getLineMarkerInfo` method return type changed from ``LineMarkerInfo`` to ``LineMarkerInfo<?>``
: This may break source-compatibility with inheritors written in Kotlin.

`com.intellij.codeInsight.daemon.LineMarkerProvider.collectSlowLineMarkers` method parameter type changed from ``List<PsiElement>`` to ``List<? extends PsiElement>``
: This may break source-compatibility with inheritors written in Kotlin.

`com.intellij.codeInsight.daemon.LineMarkerProvider.collectSlowLineMarkers` method parameter type changed from ``List<PsiElement>`` to ``Collection<? super LineMarkerInfo<?>>``
: This may break source-compatibility with inheritors written in Kotlin.

`com.intellij.util.indexing.FileBasedIndex.FileTypeSpecificInputFilter.registerFileTypesUsedForIndexing` method parameter type changed from ``Consumer<FileType>`` to ``Consumer<? super FileType>``
: This may break source-compatibility with inheritors written in Kotlin.

`com.intellij.psi.impl.include.FileIncludeProvider.registerFileTypesUsedForIndexing` method parameter type changed from ``Consumer<FileType>`` to ``Consumer<? super FileType>``
: This may break source-compatibility with inheritors written in Kotlin.

`com.intellij.codeInsight.highlighting.HighlightUsagesHandlerBase.selectTargets` method parameter type changed from ``List<T>`` to ``List<? extends T>``
: This may break source-compatibility with inheritors written in Kotlin.

`com.intellij.codeInsight.highlighting.HighlightUsagesHandlerBase.selectTargets` method parameter type changed from ``Consumer<List<? extends T>>`` to ``Consumer<? super List<? extends T>>``
: This may break source-compatibility with inheritors written in Kotlin.

`com.intellij.codeInsight.highlighting.HighlightUsagesHandlerBase.computeUsages` method parameter type changed from ``List<T>`` to ``List<? extends T>``
: This may break source-compatibility with inheritors written in Kotlin.

`com.intellij.pom.java.LanguageLevel.JDK_13_PREVIEW` field removed
: Please remove the plugin code supporting Java 13 language level features.
IntelliJ IDEA supports preview features of the latest Java release and one upcoming release (if available).

#### VCS

`com.intellij.diff.util.DiffUserDataKeysEx.REVISION_INFO` field removed
: Use `com.intellij.diff.DiffVcsDataKeys.REVISION_INFO` instead.

`com.intellij.codeInsight.actions.FormatChangedTextUtil.getChangedElements(Project, Change[], Function)` method removed
: Use `com.intellij.codeInsight.actions.VcsFacadeImpl.getVcsInstance().getChangedElements(...)` instead.

### GitHub Plugin 2020.2

`org.jetbrains.plugins.github.util.LazyCancellableBackgroundProcessValue(ProgressManager)` constructor removed
: Required for more tight control of task scheduling. Use `org.jetbrains.plugins.github.util.LazyCancellableBackgroundProcessValue.Companion#create(ProgressManager, (ProgressIndicator) -> T)` instead of subclassing.

`org.jetbrains.plugins.github.util.LazyCancellableBackgroundProcessValue.compute(ProgressIndicator)` method return type changed from `T` to `CompletableFuture<T>`
: Required for more tight control of task scheduling. Use `org.jetbrains.plugins.github.util.LazyCancellableBackgroundProcessValue.Companion#create(ProgressManager, (ProgressIndicator) -> T)` instead of subclassing.

`org.jetbrains.plugins.github.pullrequest.ui.GHCompletableFutureLoadingModel()` constructor removed
: Model was made disposable and it is now required to pass parent disposable in constructor.

`org.jetbrains.plugins.github.util.GithubGitHelper.getPossibleRemoteUrlCoordinates()` method removed
: Use `org.jetbrains.plugins.github.util.GHProjectRepositoriesManager.getKnownRepositories()` instead.

### Groovy Plugin 2020.2

`org.jetbrains.plugins.groovy.formatter.AlignmentProvider.addPair` method parameter type changed from `Boolean` to `boolean`
: Please adjust/recompile the code.

### Java EE Plugins 2020.2

Java EE plugins split
: Plugin `com.intellij.javaee` _Java EE: EJB, JPA, Servlets_ has been split to:
- `com.inteellij.javaee` _Java EE Platform_ - main plugin other JavaEE/Jakarta plugins depend on
- `com.intellij.javaee.app.servers.integration` _Java EE: Application Servers Integration_
- `com.intellij.javaee.ejb` _Java EE: Enterprise Java Beans (EJB)_
- `com.intellij.javaee.jpa` _Java EE: JPA_
- `com.intellij.javaee.web` _Java EE: Web/Servlets_

### JavaScript Plugin 2020.2

`com.intellij.lang.javascript.linter.jslint` package removed
: JSLint functionality has been unbundled and moved to a separate plugin. [Issue](https://youtrack.jetbrains.com/issue/WEB-44511)

### PhpStorm and PHP Plugin 2020.2

Added Union Types Support
: See [Breaking Changes in PhpStorm 2020.2](php_open_api_breaking_changes_202.md).

### Kotlin Plugin 1.4

`org.jetbrains.kotlin.idea.core.formatter.KotlinCodeStyleSettings.PACKAGES_TO_USE_STAR_IMPORTS` field type changed from `PackageEntryTable` to `KotlinPackageEntryTable`
: This change was required to implement import layout order for Kotlin. `KotlinPackageEntryTable` can be used in the same manner as `PackageEntryTable`.

### Python Plugin 2020.2

`com.jetbrains.python.PythonDialectsTokenSetProvider.INSTANCE` field removed
: `PythonDialectsTokenSetProvider` became an application service, use `PythonDialectsTokenSetProvider.getInstance()` instead.

`com.jetbrains.python.psi.PyUtil.getLanguageLevelForVirtualFile(Project, VirtualFile)` method removed
: Use `PythonLanguageLevelPusher.getLanguageLevelForVirtualFile(Project, VirtualFile)` instead.

## 2020.1

### IntelliJ Platform 2020.1

`com.intellij.compiler.ant` package removed
: 'Generate Ant build' functionality is removed from the IDE. Delete the code extending this or replace it with a dependency on the `generate-ant` plugin.

`org.jetbrains.jps.incremental.ModuleLevelBuilder.getCompilableFileExtensions` marked abstract
: Implement it in `ModuleLevelBuilder`'s implementation.

`com.intellij.codeInsight.TargetElementUtilBase` class removed
: Use `com.intellij.codeInsight.TargetElementUtil` instead.

`com.intellij.psi.stubs.PrebuiltStubsProviderBase` class now extends `com.intellij.index.PrebuiltIndexProvider` and inherits its abstract method `getIndexRoot()`
: Use `com.intellij.psi.stubs.PlatformPrebuiltStubsProviderBase` instead.

`com.intellij.psi.PsiElementVisitor.visitElement` method `PsiElement` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.

`com.intellij.psi.PsiElementVisitor.visitFile` method `PsiFile` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.

`com.intellij.psi.PsiElementVisitor.visitBinaryFile` method `PsiBinaryFile` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.

`com.intellij.psi.PsiElementVisitor.visitPlainTextFile` method `PsiPlainTextFile` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.

`com.intellij.psi.PsiElementVisitor.visitErrorElement` method `PsiErrorElement` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.

`com.intellij.psi.PsiElementVisitor.visitPlainText` method `PsiPlainText` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.

`com.intellij.psi.PsiElementVisitor.visitDirectory` method `PsiDirectory` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.

`com.intellij.psi.PsiElementVisitor.visitComment` method `PsiComment` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.

`com.intellij.psi.PsiElementVisitor.visitWhiteSpace` method `PsiWhiteSpace` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.

`com.intellij.psi.PsiElementVisitor.visitOuterLanguageElement` method `OuterLanguageElement` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.

`com.intellij.codeInspection.unused.ImplicitPropertyUsageProvider.isUsed` method `Property` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.

`com.intellij.lang.ReadOnlyASTNode` class removed
: Use `com.intellij.testFramework.ReadOnlyLightVirtualFile`-based PSI instead.

Java code migrated to use `TYPE_USE` nullability annotations
: In rare cases existing Kotlin code might become uncompilable due to some problems in the Kotlin compiler: if a method is used or overridden, and is written in Java, and returns an array annotated as `@Nullable` or `@NotNull`.

`com.intellij.navigation.ChooseByNameContributorEx.processNames` method parameter type changed from `Processor<String>` to ``Processor<? extends String>``
: This may break source-compatibility with inheritors written in Kotlin.

`com.intellij.navigation.ChooseByNameContributorEx.processElementsWithName` method parameter type changed from `Processor<NavigationItem>` to ``Processor<? extends NavigationItem>``
: This may break source-compatibility with inheritors written in Kotlin.

Images module functionality (package `org.intellij.images.*`) extracted to plugin
: The dependency [must be declared](plugin_dependencies.md) explicitly now by the [`<depends>`](plugin_configuration_file.md#idea-plugin__depends) element:
  * Add `<depends>com.intellij.platform.images</depends>` in <path>[plugin.xml](plugin_configuration_file.md)</path>
  * Add to <path>build.gradle</path>:

    ```groovy
    intellij {
      plugins = ['platform-images']
    }
    ```
  * If your plugin depends on other plugins using `com.intellij.platform.images` (e.g., CSS), please make sure to use `gradle-intellij-plugin` >=0.4.19

### Python Plugin 2020.1

`com.jetbrains.python.psi.PyCallExpression.PyMarkedCallee` class removed
: Use `com.jetbrains.python.psi.types.PyCallableType` instead.

`com.jetbrains.python.psi.PyCallExpression.multiResolveCallee` method return type changed from `List<PyMarkedCallee>` to `List<PyCallableType>`
: Use `com.jetbrains.python.psi.types.PyCallableType` instead of `com.jetbrains.python.psi.PyCallExpression.PyMarkedCallee`.
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Incompatible Changes in IntelliJ Platform and Plugins API 2021.*

<!--
Before documenting a breaking API change, please make sure that the change cannot be avoided in an alternative way.

APIs marked with @Deprecated(forRemoval=true), @ApiStatus.Experimental, @ApiStatus.Internal/IntellijInternalApi, or @ApiStatus.ScheduledForRemoval don't need to be documented.

To document a new incompatible change, add a new line with the problem pattern followed by a 2nd line with ": "-prefixed human-readable description
and recommended fix/action (REQUIRED, please write full sentence ending with '.', see existing entries as reference).
Non-platform changes must be grouped under relevant section for plugin.

The following problem patterns are supported and must be followed EXACTLY (e.g., no '#' instead of '.'):

<package name> package removed

<class name> class removed
<class name> class renamed to <new class name>
<class name> class moved to package <package name>

<class name>.<method name>(<human-readable parameters>) marked abstract
<class name>.<method name>(<human-readable parameters>) abstract method added
<class name>.<method name>(<human-readable parameters>) method removed
<class name>.<method name>(<human-readable parameters>) method moved to the superclass
<class name>.<method name>(<human-readable parameters>) method return type changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method visibility changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method marked final
<class name>.<method name>(<human-readable parameters>) method parameter <type> removed
<class name>.<method name>(<human-readable parameters>) method parameter type changed from <before> to <after>
<class name>.<method name> method <parameter name> parameter marked @<class name>
<class name> (class|interface) now (extends|implements) <class name> and inherits its final method <method name>(<human-readable parameters>)?
<class name> (class|interface) now (extends|implements) <class name> and inherits its abstract method <method name>(<human-readable parameters>)?
<class name> class now interface

<class name>(<human-readable parameters>) constructor removed
<class name>(<human-readable parameters>) constructor parameter <type> removed
<class name>(<human-readable parameters>) constructor parameter type changed from <before> to <after>
<class name>(<human-readable parameters>) constructor visibility changed from <before> to <after>

<class name>.<field name> field removed
<class name>.<field name> field moved to the superclass
<class name>.<field name> field type changed from <before> to <after>
<class name>.<field name> field visibility changed from <before> to <after>

<property name> property removed from resource bundle <bundle name>

Where the placeholders must be enclosed in code quotes (`name`):

<class name> is a fully-qualified name of the class, e.g. `com.intellij.openapi.actionSystem.AnAction$InnerClass`.
<method name> is the exact method's name. Note that constructors have dedicated patterns.
<human-readable parameters> is a string representing parameters, which are not necessarily fully qualified. They do not affect the parser. For example, instead of (java.lang.Object, java.util.List, int) you are free to write (Object, List<String>, int)
<parameter name> is exact name of the method's parameter
<property name> is a full name of a property from .properties file, like `some.action.description`
<bundle name> is a fully qualified name of the property bundle, which includes its package, like `message.IdeBundle`

NOTE: If a code change you're trying to document doesn't match any of the above patterns, please ask in #plugins-verifier

NOTE: You are allowed to prettify the pattern using links: [`org.example.Foo`](https://github.com/JetBrains/intellij-community/tree/master/)

NOTE: Entries not starting with code quotes (`name`) can be added to document non-code changes and will be skipped in API verification.
-->

<link-summary>List of known Breaking API Changes in 2021.*</link-summary>

<include from="snippets.md" element-id="apiChangesHeader"/>

<include from="snippets.md" element-id="apiChangesJavaVersion"/>

## 2021.3

### IntelliJ Platform 2021.3

Running tests fails with `jarFiles is not set for [...]` or `Created extension classloader is not equal to plugin's one`
: Set system property `idea.force.use.core.classloader` to `true`.

Running tests fails using Gradle setup
: Please use [workarounds](https://youtrack.jetbrains.com/issue/IDEA-278926#focus=Comments-27-5561012.0-0).

`com.intellij.ui.mac.MacMessages.showMessageDialog(String, String, String[], boolean, Window, int, int, DialogWrapper.DoNotAskOption)` method removed
: Use `com.intellij.ui.mac.MacMessages.showMessageDialog(String, String, String[], boolean, Window, int, int,  DoNotAskOption)` instead.

`com.intellij.openapi.ui.MessageDialogBuilder.doNotAsk(DialogWrapper.DoNotAskOption)` method removed
: Use `com.intellij.openapi.ui.MessageDialogBuilder.doNotAsk(DoNotAskOption)` instead.

`com.intellij.ide.util.projectWizard.WizardContext.getWizard()` method removed
: Use `com.intellij.ide.util.projectWizard.WizardContext.getUserData(AbstractWizard.KEY)` instead.

`com.intellij.openapi.ui.TextComponentAccessor.TEXT_FIELD_WITH_HISTORY_WHOLE_TEXT` field removed
: Use `com.intellij.openapi.ui.TextComponentAccessors.TEXT_FIELD_WITH_HISTORY_WHOLE_TEXT` instead.

`com.intellij.execution.process.ColoredOutputTypeRegistry.getAnsiColorKey(int)` method removed
: Use `com.intellij.execution.process.ColoredOutputTypeRegistryImpl.getAnsiColorKey(int)` instead.

`com.intellij.diagnostic.PerformanceWatcher.Snapshot` class now interface
: Recompile the dependant code or use `com.intellij.diagnostic.PerformanceWatcherImpl.SnapshotImpl` instead.

`com.intellij.openapi.fileEditor.impl.EditorTabPresentationUtil.getEditorTabTitle(Project, VirtualFile, EditorWindow)` method parameter `EditorWindow` removed
: This parameter was never needed, but led to code coupling.

`com.intellij.openapi.fileEditor.impl.EditorTabPresentationUtil.getUniqueEditorTabTitle(Project, VirtualFile, EditorWindow)` method parameter `EditorWindow` removed
: This parameter was never needed, but led to code coupling.

`com.intellij.openapi.fileEditor.impl.EditorTabTitleProvider.getEditorTabTitle(Project, VirtualFile, EditorWindow)` method parameter `EditorWindow` removed
: This parameter was never needed, but led to code coupling.

Constructor `com.intellij.codeInsight.hints.settings.InlayProviderSettingsModel` changed
: Added `Language` parameter.

`com.intellij.codeInsight.hints.settings.InlayProviderSettingsModel.getDescription()` abstract method added
: Provides short description.

`com.intellij.codeInsight.hints.settings.InlayProviderSettingsModel.getCaseDescription(ImmediateConfigurable.Case)` abstract method added
: Provides description text for given case.

`com.intellij.codeInsight.hints.settings.InlayProviderSettingsModel.getCasePreview(ImmediateConfigurable.Case)` abstract method added
: Provides preview text for given case.

`com.intellij.openapi.wm.ToolWindow.getEmptyText()` method removed
: Please safe-cast and use `com.intellij.openapi.wm.ex.ToolWindowEx.getEmptyText()`.

`com.intellij.openapi.actionSystem.ex.CustomComponentAction#createCustomComponent(Presentation, String, DataContext)` method removed
: Please use `createCustomComponent(Presentation, String)`, one shall not depend on `dataContext` there.

`com.intellij.ui.EditorTextField.addNotify()` method marked final
: Please use `addSettingsProvider(EditorSettingsProvider)` to configure `Editor` as editor creation may be postponed now.

### VCS Log 2021.3

`com.intellij.vcs.log.ui.frame.CommitPanel` class removed
: Removed unnecessary inheritance.

### Git Plugin 2021.3

`git4idea.ui.branch.GitBranchActionsUtilKt.checkoutOrReset(Project, List, String, GitNewBranchOptions)` method removed
: Method was dropped to avoid supporting outdated behavior.

`git4idea.ui.branch.GitBranchActionsUtilKt.createNewBranch(Project, List, String, GitNewBranchOptions)` method removed
: Method was dropped to avoid supporting outdated behavior.

### Python Plugin 2021.3

`com.jetbrains.python.console.PydevConsoleRunnerImpl(Project, Sdk, PyConsoleType, String, Map<String, String>, PyConsoleOptions.PyConsoleSettings, Consumer<? super String>, String[])` constructor parameter type `com.intellij.util.Consumer<? super String>` removed
: There is no need to pass a Restart action as a constructor parameter, it should be created inside the `com.jetbrains.python.console.PydevConsoleRunnerImpl#createRerunAction` method

### IntelliJ IDEA Ultimate 2021.3

#### Miscellaneous

`com.intellij.util.JavaeeIcons` class renamed to `com.intellij.javaee.JavaeeIcons`
: To support dynamic plugins.

`icons.RestClientIcons` class renamed to `com.intellij.httpClient.RestClientIcons`
: To support dynamic plugins.

#### Expression Language (EL) / JSP

Expression Language (EL) was extracted from `com.intellij.jsp` (_"Java Server Pages (JSP)"_) plugin to new `com.intellij.javaee.el` (_Java EE: Expression Language (EL)_) plugin.
`com.intellij.jsp` has mandatory dependency on `com.intellij.javaee.el`.
10+ Ultimate plugins (Spring, Java EE, Frameworks) now have optional dependency on `com.intellij.javaee.el` plugin (mandatory dependency to `com.intellij.jsp` was removed).

`com.intellij.jsp.el.impl.ELResolveUtil.VariableInfoData` class renamed to `com.intellij.jsp.el.impl.JspELResolveUtil.VariableInfoData`
: To support dynamic plugins.

`com.intellij.jsp.el.impl.ELResolveUtil` class renamed to `com.intellij.javaee.el.util.ELResolveUtil`
: Use new class from `com.intellij.javaee.el` plugin instead or `com.intellij.jsp.el.impl.JspELResolveUtil` from `com.intellij.jsp` plugin.

`com.intellij.jsp.el.impl.ELElementProcessor` class renamed to `com.intellij.javaee.el.ELElementProcessor`
: Use new class from `com.intellij.javaee.el` plugin instead.

`com.intellij.psi.jsp.el.ELElementTypes` class renamed to `com.intellij.javaee.el.psi.ELElementTypes`
: Use new class from `com.intellij.javaee.el` plugin instead.

`com.intellij.psi.jsp.el.ELLiteralExpression` class renamed to `com.intellij.javaee.el.psi.ELLiteralExpression`
: Use new class from `com.intellij.javaee.el` plugin instead.

`com.intellij.psi.jsp.el.ELElementType` class renamed to `com.intellij.javaee.el.psi.ELElementType`
: Use new class from `com.intellij.javaee.el` plugin instead.

`com.intellij.psi.jsp.el.ELExpressionHolder` class renamed to `com.intellij.javaee.el.psi.ELExpressionHolder`
: Use new class from `com.intellij.javaee.el` plugin instead.

`com.intellij.jsp.el.impl.ElVariablesProvider` class renamed to `com.intellij.javaee.el.providers.ElVariablesProvider`
: Use new class from `com.intellij.javaee.el` plugin instead.

`com.intellij.psi.jsp.el.ELVariable` class renamed to `com.intellij.javaee.el.psi.ELVariable`
: Use new class from `com.intellij.javaee.el` plugin instead.

`com.intellij.psi.jsp.el.ElLiteralCustomReferenceProvider` class renamed to `com.intellij.javaee.el.psi.ElLiteralCustomReferenceProvider`
: Use new class from `com.intellij.javaee.el` plugin instead.

`com.intellij.psi.jsp.JspImplicitVariable` class renamed to `com.intellij.javaee.el.util.ELImplicitVariable`
: Use new class from `com.intellij.javaee.el` plugin instead.

#### Persistence

Package `com.intellij.javaee.model.xml.persistence` renamed to `com.intellij.jpa.model.xml.persistence`
: To support dynamic plugins.

#### Application Servers

Various package renames to support dynamic plugins

| Old package name                            | New package name                                       |
|---------------------------------------------|--------------------------------------------------------|
| `com.intellij.javaee.serverInstances`       | `com.intellij.javaee.appServers.serverInstances`       |
| `com.intellij.javaee.appServerIntegrations` | `com.intellij.javaee.appServers.appServerIntegrations` |
| `com.intellij.javaee.deployment`            | `com.intellij.javaee.appServers.deployment`            |
| `com.intellij.javaee.run`                   | `com.intellij.javaee.appServers.run`                   |

`com.intellij.javaee.deployment.DeploymentModel` class renamed to `com.intellij.javaee.appServers.deployment.DeploymentModel`
: To support dynamic plugins.

`com.intellij.javaee.deployment.DeploymentSource` class renamed to `com.intellij.javaee.appServers.deployment.DeploymentSource`
: To support dynamic plugins.

`com.intellij.javaee.deployment.DeploymentProvider` class renamed to `com.intellij.javaee.appServers.deployment.DeploymentProvider`
: To support dynamic plugins.

`com.intellij.javaee.openapi.ex.AppServerIntegrationsManager` class renamed to `com.intellij.javaee.appServers.openapi.ex.AppServerIntegrationsManager`
: To support dynamic plugins.

`com.intellij.javaee.appServerIntegrations.AppServerIntegration` class renamed to `com.intellij.javaee.appServers.appServerIntegrations.AppServerIntegration`
: To support dynamic plugins.

`com.intellij.javaee.appServerIntegrations.ApplicationServerPersistentData` class renamed to `com.intellij.javaee.appServers.appServerIntegrations.ApplicationServerPersistentData`
: To support dynamic plugins.

`com.intellij.javaee.facet.JavaeeFrameworkSupportInfoCollector` class renamed to `com.intellij.javaee.appServers.facet.JavaeeFrameworkSupportInfoCollector`
: To support dynamic plugins.

`com.intellij.javaee.appServerIntegrations.ApplicationServer` class renamed to `com.intellij.javaee.appServers.appServerIntegrations.ApplicationServer`
: To support dynamic plugins.

`com.intellij.javaee.appServerIntegrations.ApplicationServerHelper` class renamed to `com.intellij.javaee.appServers.appServerIntegrations.ApplicationServerHelper`
: To support dynamic plugins.

`com.intellij.javaee.serverInstances.J2EEServerInstance` class renamed to `com.intellij.javaee.appServers.serverInstances.J2EEServerInstance`
: To support dynamic plugins.

`com.intellij.javaee.run.configuration.CommonModel` class renamed to `com.intellij.javaee.appServers.run.configuration.CommonModel`
: To support dynamic plugins.

`com.intellij.javaee.run.localRun.ExecutableObjectStartupPolicy` class renamed to `com.intellij.javaee.appServers.run.localRun.ExecutableObjectStartupPolicy`
: To support dynamic plugins.

### Database Plugin 2021.3

`com.intellij.database.model.ModelLightCopierUtils` class removed
: Internal class not to be used by 3rd party.


## 2021.2

### IntelliJ Platform 2021.2

`com.intellij.openapi.editor.impl.event.DocumentEventImpl.translateLineViaDiff(int)` method removed
: Use persistent range markers instead, see `com.intellij.openapi.editor.Document.createRangeMarker(int, int, boolean)` with `surviveOnExternalChange=true`.

`com.intellij.openapi.editor.impl.event.DocumentEventImpl.translateLineViaDiffStrict(int)` method removed
: Use persistent range markers instead, see `com.intellij.openapi.editor.Document.createRangeMarker(int, int, boolean)` with `surviveOnExternalChange=true`.

`com.intellij.openapi.file.exclude.EnforcedPlainTextFileType` class removed
: Use `com.intellij.openapi.fileTypes.PlainTextFileType` instead.

`com.intellij.openapi.updateSettings.impl.CheckForUpdateResult` class removed
: Use `com.intellij.openapi.updateSettings.impl.PlatformUpdates` instead.

`com.intellij.openapi.updateSettings.impl.UpdateStrategy.checkForUpdates()` method return type changed from `com.intellij.openapi.updateSettings.impl.CheckForUpdateResult` to `com.intellij.openapi.updateSettings.impl.PlatformUpdates`
: Use `com.intellij.openapi.updateSettings.impl.PlatformUpdates` instead of `com.intellij.openapi.updateSettings.impl.CheckForUpdateResult`.

`com.intellij.openapi.updateSettings.impl.pluginsAdvertisement.PluginsAdvertiser.Plugin` class removed
: Use `com.intellij.ide.plugins.advertiser.PluginData` instead.

`com.intellij.ide.plugins.DisabledPluginsState.disablePlugin(PluginId)` method removed
: Use either `com.intellij.ide.plugins.PluginManagerCore.disablePlugin(PluginId)` or `com.intellij.ide.plugins.PluginEnabler.disablePlugins(Collection)` instead.

`com.intellij.ide.plugins.PluginManagerMain.suggestToEnableInstalledDependantPlugins(PluginEnabler, List)` method parameter type changed from `com.intellij.ide.plugins.PluginManagerMain.PluginEnabler` to `com.intellij.ide.plugins.PluginEnabler`
: `com.intellij.ide.plugins.PluginManagerMain.PluginEnabler` has been renamed to `com.intellij.ide.plugins.PluginEnabler`.

`com.intellij.ssh.ui.unified.SshConfigConfigurable.Visibility` class removed
: Use `com.intellij.ssh.ui.unified.SshConfigVisibility` instead.

`com.intellij.ssh.ui.unified.SshConfigComboBox.reload(PresentableId, SshConfigConfigurable.Visibility)` method parameter type changed from `com.intellij.ssh.ui.unified.SshConfigConfigurable.Visibility` to `com.intellij.ssh.ui.unified.SshConfigVisibility`
: `SshConfigConfigurable.Visibility` has been renamed to `SshConfigVisibility`.

`com.intellij.ssh.ui.unified.SshConfigComboBox(Project, Disposable, SshConfigConfigurable.Visibility)` constructor parameter type changed from `com.intellij.ssh.ui.unified.SshConfigConfigurable.Visibility` to `com.intellij.ssh.ui.unified.SshConfigVisibility`
: `SshConfigConfigurable.Visibility` has been renamed to `SshConfigVisibility`.

`org.jetbrains.uast.UAnnotated.getAnnotations()` method removed
: Use `org.jetbrains.uast.UAnnotated.getUAnnotations()` instead.

`org.jetbrains.uast.UAnnotated.getUAnnotations()` marked abstract
: Previously this circularly referenced `org.jetbrains.uast.UAnnotated.getAnnotations()`, which has been removed.

`com.intellij.openapi.actionSystem.ActionPlaces.isMainMenuOrShortcut(String)` method removed
: Use `isMainMenuOrActionSearch(String)` method instead.

Add implementation for `com.intellij.openapi.fileEditor.FileEditor.getFile()`
: Implementations should return non-null `VirtualFile` instance.

### Performance Testing Plugin 2021.2

`com.jetbrains.performancePlugin.CommandProvider.getCommands()` method return type changed from `java.util.List` to `java.util.Map`
: Use `java.util.List` instead of `java.util.Map`.

### Database Plugin 2021.2

`com.intellij.database.dataSource.DatabaseCredentialsAuthProvider.UserWidget` class removed
: Use `com.intellij.database.dataSource.DatabaseCredentialsAuthProviderUi.UserWidget` instead.

`com.intellij.database.actions.DdlActions.DeleteProvider1` class removed
: Use `com.intellij.database.actions.DbDeleteProvider.getDeleteProvider()` instead.

`com.intellij.database.model.RawConnectionConfig.getEffectiveUrl(Project)` method removed
: Use `com.intellij.database.model.RawConnectionConfig.getUrl()` instead. Or use `com.intellij.database.dataSource.DatabaseConnectionEstablisher.processInterceptors()`.

### GitHub Plugin 2021.2

`org.jetbrains.plugins.github.util.GithubAuthData` class removed
: Use `org.jetbrains.plugins.github.authentication.GithubAuthenticationManager` instead.

`org.jetbrains.plugins.github.util.GithubAuthData$BasicAuth` class removed
: Use `org.jetbrains.plugins.github.authentication.GithubAuthenticationManager` instead.

`org.jetbrains.plugins.github.util.GithubSettings.getAuthData(GithubAuthData)` method removed
: Use `org.jetbrains.plugins.github.authentication.GithubAuthenticationManager` instead.

`org.jetbrains.plugins.github.util.GithubSettings.getLogin` method removed
: Use `org.jetbrains.plugins.github.authentication.GithubAuthenticationManager` instead.

`org.jetbrains.plugins.github.util.GithubSettings.isAuthConfigured` method removed
: Use `org.jetbrains.plugins.github.authentication.GithubAuthenticationManager` instead.

### Spring Plugin 2021.2

`icons.SpringApiIcons` class moved to package `com.intellij.spring`
: Use `com.intellij.spring.SpringApiIcons` instead.

`icons.SpringApiIcons.Gutter` class moved to package `com.intellij.spring`
: Use `com.intellij.spring.SpringApiIcons.Gutter` instead.

### Python Plugin 2021.2.1

`com.jetbrains.python.psi.types.PyTypedDictType.Companion.match(PyTypedDictType, PyDictLiteralExpression, TypeEvalContext)` method removed
: As the result of the refactoring aimed at fixing [PY-48799](https://youtrack.jetbrains.com/issue/PY-48799), for dict literals containing only string keys we infer `PyTypedDictType` now, so there's no need to match dict literals with `TypedDict`s. There's a new method for comparing the inferred `TypedDict`s with the given ones: `com.jetbrains.python.psi.types.PyTypedDictType.Companion.match(PyType, PyTypedDictType, TypeEvalContext)`.

## 2021.1

### IntelliJ Platform 2021.1

`com.intellij.util.io.PersistentHashMap.isCorrupted` method removed
: The storage checks for corruption automatically, there is no need of any explicit additional checks.

`com.intellij.lang.StdLanguages.JSPX` field removed
: Add a dependency on the `com.intellij.jsp` plugin and replace the reference with `com.intellij.lang.jspx.JspxLanguageImpl.INSTANCE`.

`com.intellij.lang.StdLanguages.JSP` field removed
: Add a dependency on the `com.intellij.jsp` plugin and replace the reference with `com.intellij.lang.jsp.NewJspLanguage.getInstance()`.

`com.intellij.ide.actions.searcheverywhere.SEResultsEqualityProvider.compareItems(alreadyFoundItem)` method parameter type changed from `SearchEverywhereFoundElementInfo` to `List<SearchEverywhereFoundElementInfo>`
: New API is more abstract which allows to review all already found items before making "deduplication" decision. Also consider implementing `com.intellij.ide.actions.searcheverywhere.AbstractEqualityProvider` instead of `com.intellij.ide.actions.searcheverywhere.SEResultsEqualityProvider`.

`com.intellij.ide.actions.searcheverywhere.SEResultsEqualityProvider.SEEqualElementsActionType.SKIP` field removed
: Enum class `SEEqualElementsActionType` was converted to sealed class with the same name.

`com.intellij.ide.actions.searcheverywhere.SEResultsEqualityProvider.SEEqualElementsActionType.DO_NOTHING` field removed
: Enum class `SEEqualElementsActionType` was converted to sealed class with the same name.

`com.intellij.ide.actions.searcheverywhere.SEResultsEqualityProvider.SEEqualElementsActionType.Replace` field removed
: Enum class `SEEqualElementsActionType` was converted to sealed class with the same name.

`org.sqlite.SQLiteConfig.setBusyTimeout(String)` method parameter type changed from `String` to `int`
: Please use updated sqlite-jdbc API.

`com.intellij.usages.impl.rules.UsageTypeProvider.getUsageType` method `PsiElement` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.

`com.jetbrains.performancePlugin.CommandProvider.getCommands(Project)` method parameter `Project` removed
: Project is now only accessible via `com.intellij.openapi.ui.playback.PlaybackContext.getProject()` since it may change during script execution.

JSON Widget suppressor `com.intellij.json.jsonWidgetSuppressor` EP
: Override new method [`JsonWidgetSuppressor.isCandidateForSuppress(VirtualFile, Project)`](%gh-ic%/json/src/com/jetbrains/jsonSchema/extension/JsonWidgetSuppressor.java) for quick check in [EDT](threading_model.md) before `suppressSwitcherWidget()` is called on a background thread.

### HTTP Client Plugin 2021.1

`com.intellij.ws.rest.client` package removed
: Replaced by `com.intellij.httpClient.execution` in HTTP Client plugin.

`com.intellij.ws.actions` package removed
: Replaced by `com.intellij.httpClient.actions` in HTTP Client plugin.

`com.intellij.ws.converters` package removed
: Replaced by `com.intellij.httpClient.converters` in HTTP Client plugin.

`com.intellij.ws.http.request` package removed
: Replaced by `com.intellij.httpClient.http.request` in HTTP Client plugin.

### Java UML Plugin 2021.1

Rename of packages to `.java.` specific variants

| Old package name           | New package name                |
|----------------------------|---------------------------------|
| `com.intellij.uml.utils`   | `com.intellij.uml.java.utils`   |
| `com.intellij.uml.project` | `com.intellij.uml.java.project` |
| `com.intellij.uml.jigsaw`  | `com.intellij.uml.java.jigsaw`  |

### Kotlin Plugin 2021.1

`org.jetbrains.kotlin.idea.refactoring.changeSignature.KotlinChangeInfo(KotlinMethodDescriptor, String, KotlinTypeInfo, Visibility, List, KotlinParameterInfo, PsiElement, Collection)` constructor parameter type changed from `org.jetbrains.kotlin.descriptors.Visibility` to `org.jetbrains.kotlin.descriptors.DescriptorVisibility`
: `Visibility` has been renamed to `DescriptorVisibility`.

### Go Plugin 2021.1

`com.goide.sdk.combobox.GoSdkChooserCombo.getSdk` method moved to the superclass
: Recompile the dependant code.

### CoffeeScript Plugin 2021.1

`icons.CoffeescriptIcons` class renamed to `org.coffeescript.CoffeescriptIcons`
: To support dynamic plugins.
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Incompatible Changes in IntelliJ Platform and Plugins API 2022.*

<!--
Before documenting a breaking API change, please make sure that the change cannot be avoided in an alternative way.

APIs marked with @Deprecated(forRemoval=true), @ApiStatus.Experimental, @ApiStatus.Internal/IntellijInternalApi, or @ApiStatus.ScheduledForRemoval don't need to be documented.

To document a new incompatible change, add a new line with the problem pattern followed by a 2nd line with ": "-prefixed human-readable description
and recommended fix/action (REQUIRED, please write full sentence ending with '.', see existing entries as reference).
Non-platform changes must be grouped under relevant section for plugin.

The following problem patterns are supported and must be followed EXACTLY (e.g., no '#' instead of '.'):

<package name> package removed

<class name> class removed
<class name> class renamed to <new class name>
<class name> class moved to package <package name>

<class name>.<method name>(<human-readable parameters>) marked abstract
<class name>.<method name>(<human-readable parameters>) abstract method added
<class name>.<method name>(<human-readable parameters>) method removed
<class name>.<method name>(<human-readable parameters>) method moved to the superclass
<class name>.<method name>(<human-readable parameters>) method return type changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method visibility changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method marked final
<class name>.<method name>(<human-readable parameters>) method parameter <type> removed
<class name>.<method name>(<human-readable parameters>) method parameter type changed from <before> to <after>
<class name>.<method name> method <parameter name> parameter marked @<class name>
<class name> (class|interface) now (extends|implements) <class name> and inherits its final method <method name>(<human-readable parameters>)?
<class name> (class|interface) now (extends|implements) <class name> and inherits its abstract method <method name>(<human-readable parameters>)?
<class name> class now interface

<class name>(<human-readable parameters>) constructor removed
<class name>(<human-readable parameters>) constructor parameter <type> removed
<class name>(<human-readable parameters>) constructor parameter type changed from <before> to <after>
<class name>(<human-readable parameters>) constructor visibility changed from <before> to <after>

<class name>.<field name> field removed
<class name>.<field name> field moved to the superclass
<class name>.<field name> field type changed from <before> to <after>
<class name>.<field name> field visibility changed from <before> to <after>

<property name> property removed from resource bundle <bundle name>

Where the placeholders must be enclosed in code quotes (`name`):

<class name> is a fully-qualified name of the class, e.g. `com.intellij.openapi.actionSystem.AnAction$InnerClass`.
<method name> is the exact method's name. Note that constructors have dedicated patterns.
<human-readable parameters> is a string representing parameters, which are not necessarily fully qualified. They do not affect the parser. For example, instead of (java.lang.Object, java.util.List, int) you are free to write (Object, List<String>, int)
<parameter name> is exact name of the method's parameter
<property name> is a full name of a property from .properties file, like `some.action.description`
<bundle name> is a fully qualified name of the property bundle, which includes its package, like `message.IdeBundle`

NOTE: If a code change you're trying to document doesn't match any of the above patterns, please ask in #plugins-verifier

NOTE: You are allowed to prettify the pattern using links: [`org.example.Foo`](https://github.com/JetBrains/intellij-community/tree/master/)

NOTE: Entries not starting with code quotes (`name`) can be added to document non-code changes and will be skipped in API verification.
-->

<link-summary>List of known Breaking API Changes in 2022.*</link-summary>

<include from="snippets.md" element-id="apiChangesHeader"/>

<include from="snippets.md" element-id="apiChangesJavaVersion"/>

<include from="snippets.md" element-id="gradlePluginVersion"/>

## 2022.3

### IntelliJ Platform 2022.3

`com.intellij.openapi.externalSystem.dependency.analyzer.DependencyAnalyzerExtension.isApplicable(ProjectSystemId)` abstract method added
: Must be implemented.

`com.intellij.openapi.externalSystem.dependency.analyzer.DependencyAnalyzerExtension.createContributor(Project, Disposable)` method parameter `ProjectSystemId` removed
: Adjust your code.

`com.intellij.openapi.externalSystem.dependency.analyzer.DependencyAnalyzerExtension.createContributor(Project, Disposable)` method return type changed from `DependencyAnalyzerContributor?` to `DependencyAnalyzerContributor`
: Implement `isApplicable()` instead.

`com.intellij.openapi.editor.EditorCopyPasteHelper.getSelectionTransferable(Editor editor, EditorCopyPasteHelper.CopyPasteOptions options)` abstract method added
: Must be implemented instead of and preferred over `com.intellij.openapi.editor.EditorCopyPasteHelper.copySelectionToClipboard(Editor)` which now delegates to the new method.

`com.intellij.codeInsight.template.TemplateContextType.EP_NAME` field removed
: Use `com.intellij.codeInsight.template.impl.TemplateContextTypes` to get `TemplateContextType` extensions.

`com.intellij.ide.actions.searcheverywhere.FoundItemDescriptor(I, int, int)` constructor removed
: Use `FoundItemDescriptor(I, int)` instead.

### Database Plugin 2022.3

`com.intellij.database.dataSource.url.TypesRegistry.ParamEditor` class removed
: Use `com.intellij.database.dataSource.url.TypeDescriptor.ParamEditor` instead.

`com.intellij.database.dataSource.url.TypesRegistry.BaseTypeDescriptor.createFieldImpl(String caption, String configuration, DataInterchange interchange)` abstract method added
: Must be implemented.

`com.intellij.database.psi.DbDataSourceImpl.getDelegate()` method return type changed from `DatabaseSystem` to `RawDataSource`
: Prefer `com.intellij.database.psi.DbDataSource.getDelegateDataSource()`.

`com.intellij.database.psi.DbPsiFacadeImpl.createDataSourceWrapperElement(DasDataSource, DataSourceManager)` method parameter type changed from `DasDataSource` to `RawDataSource`
: Avoid manually wrapping data sources.

`com.intellij.database.vfs.DatabaseElementVirtualFileImpl.setBusy(boolean)` method removed
: That method was an internal method.

`com.intellij.database.util.TreePatternNode.Group(ObjectKind, TreePatternNode[], TreePatternNode)` constructor removed
: Do not manipulate TreePatternNodes. Use `TreePatternUtils` to manipulate `TreePatterns`.

`com.intellij.database.util.TreePatternNode.NegativeNaming(ObjectName[])` constructor removed
: Do not manipulate TreePatternNodes. Use `TreePatternUtils` to manipulate `TreePatterns`.

`com.intellij.database.dataSource.DataSourceConfigurable.getDataSource()` method return type changed from `DasDataSource` to `RawDataSource`
: Stricter generic bound.

### TextMate Plugin 2022.3

`org.jetbrains.plugins.textmate.language.preferences.PreferencesRegistry` class now interface
: Construct and mutate the `org.jetbrains.plugins.textmate.language.preferences.PreferencesRegistryImpl` instead.

`org.jetbrains.plugins.textmate.language.preferences.PreferencesRegistry.fillFromPList(CharSequence, Plist)` method removed
: Use `org.jetbrains.plugins.textmate.language.preferences.PreferencesRegistryImpl.fillFromPList(CharSequence, Plist)` instead.

`org.jetbrains.plugins.textmate.language.preferences.PreferencesRegistry.clear()` method removed
: Use `org.jetbrains.plugins.textmate.language.preferences.PreferencesRegistryImpl.clear()` instead.

`org.jetbrains.plugins.textmate.language.preferences.PreferencesRegistry()` constructor removed
: Instantiate `org.jetbrains.plugins.textmate.language.preferences.PreferencesRegistryImpl` instead.

`org.jetbrains.plugins.textmate.language.preferences.ShellVariablesRegistry` class now interface
: Construct and mutate the `org.jetbrains.plugins.textmate.language.preferences.ShellVariablesRegistryImpl` instead.

`org.jetbrains.plugins.textmate.language.preferences.ShellVariablesRegistry.fillVariablesFromPlist(CharSequence, Plist)` method removed
: Use `org.jetbrains.plugins.textmate.language.preferences.ShellVariablesRegistryImpl.fillVariablesFromPlist(CharSequence, Plist)` instead.

`org.jetbrains.plugins.textmate.language.preferences.ShellVariablesRegistry.clear()` method removed
: Use `org.jetbrains.plugins.textmate.language.preferences.ShellVariablesRegistryImpl.clear()` instead.

`org.jetbrains.plugins.textmate.language.preferences.ShellVariablesRegistry()` constructor removed
: Instantiate `org.jetbrains.plugins.textmate.language.preferences.ShellVariablesRegistryImpl` instead.

`org.jetbrains.plugins.textmate.language.preferences.SnippetsRegistry` class now interface
: Construct and mutate the `org.jetbrains.plugins.textmate.language.preferences.SnippetsRegistryImpl` instead.

`org.jetbrains.plugins.textmate.language.preferences.SnippetsRegistry.register(TextMateSnippet)` method removed
: Use `org.jetbrains.plugins.textmate.language.preferences.SnippetsRegistryImpl.register(TextMateSnippet)` instead.

`org.jetbrains.plugins.textmate.language.preferences.SnippetsRegistry.clear()` method removed
: Use `org.jetbrains.plugins.textmate.language.preferences.SnippetsRegistryImpl.clear()` instead.

`org.jetbrains.plugins.textmate.language.preferences.SnippetsRegistry()` constructor removed
: Instantiate `org.jetbrains.plugins.textmate.language.preferences.SnippetsRegistryImpl()` instead.

### HTTP Client Plugin 2022.3

`com.intellij.httpClient.http.request.HttpRequestVariableSubstitutor` class now interface
: Use `com.intellij.httpClient.http.request.HttpRequestVariableSubstitutorImpl.create(Project, HttpRequestEnvironment)` for constructing instances.

### JavaScript Plugin 2022.3

`com.intellij.lang.javascript.buildTools.webpack.WebPackConfigManager` class moved to package `com.intellij.webpack`
: Use `com.intellij.webpack.WebpackConfigManager` instead.

`com.intellij.lang.javascript.buildTools.webpack.WebPackConfigManager.Companion` class moved to package `com.intellij.webpack`
: Use `com.intellij.webpack.WebpackConfigManager.Companion` instead.

### Microservices Plugin 2022.3

`com.intellij.microservices.url.inlay.UrlPathInlayAction.isAvailable(file: PsiFile, urlPathContext: UrlPathContext)` method parameter type changed from `com.intellij.microservices.url.references.UrlPathContext` to `com.intellij.microservices.url.inlay.UrlPathInlayHint`
: Use `com.intellij.microservices.url.inlay.UrlPathInlayHint.getContext` to obtain corresponding `UrlPathContext` instance.

### Remote Development Gateway Plugin 2022.3

`com.jetbrains.gateway.ssh.SshMultistagePanelContext.getSshConfig()` method removed
: Use `com.jetbrains.gateway.ssh.SshMultistagePanelContext.getConfig()` instead.

`com.jetbrains.gateway.ssh.SshMultistagePanelContext.setSshConfig(SshConfig)` method removed
: Use `com.jetbrains.gateway.ssh.SshMultistagePanelContext.setConfig(SshConfig)` instead.

### YAML Plugin 2022.3

org.jetbrains.yaml.YAMLParserDefinition no longer implements `org.jetbrains.yaml.YAMLElementTypes`.
: Use `org.jetbrains.yaml.YAMLElementTypes` fields directly.

### Terraform Plugin 2022.3

Top level packages of Terraform `org.intellij.plugins.hcl` and `org.intellij.plugins.hil` moved to single `org.intellij.terraform`.

## 2022.2

### IntelliJ Platform 2022.2

`com.intellij.openapi.actionSystem.TypeSafeDataProvider` class removed
: Use `com.intellij.openapi.actionSystem.DataProvider` class instead.

`com.intellij.openapi.actionSystem.DataSink` class removed
: Removed along with `com.intellij.openapi.actionSystem.TypeSafeDataProvider`.

`com.intellij.openapi.vcs.changes.ui.ChangesBrowser` class removed
: Use `com.intellij.openapi.vcs.changes.ui.ChangesBrowserBase` or `com.intellij.openapi.vcs.changes.ui.SimpleChangesBrowser` instead.

`com.intellij.openapi.vcs.changes.ui.ChangesBrowser.MyUseCase` class removed
: Removed along with `com.intellij.openapi.vcs.changes.ui.ChangesBrowser`.

`com.intellij.openapi.vcs.changes.ui.ChangesTreeList` class removed
: Use `com.intellij.openapi.vcs.changes.ui.ChangesTree` or `com.intellij.openapi.vcs.changes.ui.ChangesTreeImpl` instead.

`com.intellij.ide.IdeEventQueue.unsafeNonblockingExecute(Runnable)` method removed
: Method does not make sense anymore, please see [JBR-4328](https://youtrack.jetbrains.com/issue/JBR-4328).

`com.intellij.vcs.log.VcsLogHighlighter.getStyle(int, VcsShortCommitDetails, boolean)` method removed
: Use `com.intellij.vcs.log.VcsLogHighlighter.getStyle(int, VcsShortCommitDetails, int, boolean)` instead.

`com.intellij.AbstractBundle.getResourceBundle(java.lang.String, java.lang.ClassLoader)` method removed
: Use `com.intellij.DynamicBundle.getResourceBundle(java.lang.ClassLoader, java.lang.String)` instead

### Java Plugin 2022.2

`com.intellij.codeInspection.javaDoc.JavaDocLocalInspection` class removed
: Use `com.intellij.codeInspection.javaDoc.JavadocDeclarationInspection.ADDITIONAL_TAGS` field instead of `JavaDocLocalInspection.myAdditionalJavadocTags`.

### Plugin DevKit Plugin 2022.2

`icons.DevkitIcons` class renamed to `org.jetbrains.idea.devkit.DevKitIcons`
: Use `org.jetbrains.idea.devkit.DevKitIcons` instead.

`icons.DevkitIcons.Gutter` class renamed to `org.jetbrains.idea.devkit.DevKitIcons.Gutter`
: Use `org.jetbrains.idea.devkit.DevKitIcons.Gutter` instead.

### Collaboration Tools 2022.2

`com.intellij.collaboration.auth.ui.AccountsListModelBase.notifyCredentialsChanged(A account)` method visibility changed from protected to private
: Method hidden for better encapsulation.

`com.intellij.collaboration.auth.ui.AccountsPanelFactory.INSTANCE` field removed
: Factory is now a factory.

`com.intellij.collaboration.auth.ui.LoadingAccountsDetailsProvider.DetailsLoadingResult` class removed
: Better API introduced in the form of `com.intellij.collaboration.auth.ui.AccountsDetailsLoader`.

`com.intellij.collaboration.auth.ui.LoadingAccountsDetailsProvider` class removed
: Better API introduced in the form of `com.intellij.collaboration.auth.ui.AccountsDetailsLoader`.

`com.intellij.collaboration.ui.codereview.avatar.CachingAvatarIconsProvider` class renamed to `com.intellij.collaboration.ui.codereview.avatar.CachingCircleImageIconsProvider`
: Icon provider implementation changes to async.

### GitHub 2022.2

`org.jetbrains.plugins.github.api.GithubApiRequestExecutorManager.getExecutor(GithubAccount)` method return type changed from `org.jetbrains.plugins.github.api.GithubApiRequestExecutor.WithTokenAuth` to `org.jetbrains.plugins.github.api.GithubApiRequestExecutor`
: Hidden implementation details.

`org.jetbrains.plugins.github.api.GithubApiRequestExecutorManager.getExecutor(GithubAccount, Project)` method return type changed from `org.jetbrains.plugins.github.api.GithubApiRequestExecutor.WithTokenAuth` to `org.jetbrains.plugins.github.api.GithubApiRequestExecutor`
: Hidden implementation details.

`org.jetbrains.plugins.github.api.GithubApiRequestExecutorManager.getExecutor(GithubAccount, JComponent)` method return type changed from `org.jetbrains.plugins.github.api.GithubApiRequestExecutor.WithTokenAuth` to `org.jetbrains.plugins.github.api.GithubApiRequestExecutor`
: Hidden implementation details.

### Grazie Plugin 2022.2

Method `com.intellij.grazie.GrazieBundle.message(key, parameters)` marked static
: To shorten Java callers.

### Docker Plugin 2022.2

`com.intellij.docker.registry.DockerRegistry` class renamed to `com.intellij.docker.registry.DockerRegistryConfiguration`
: Please update usages.

### JavaScript Plugin 2022.2

`com.intellij.lang.javascript.buildTools.webpack.WebPackConfigManager.setConfig(WebPackConfig)` method moved to the superclass
: Should be used only in tests (marked with `@TestOnly`).

`com.intellij.lang.javascript.buildTools.webpack.WebPackConfig` class renamed to `com.intellij.lang.javascript.buildTools.bundler.WebBundlerConfig`
: Use `com.intellij.lang.javascript.buildTools.bundler.WebBundlerConfig` instead.

`com.intellij.lang.javascript.buildTools.webpack.WebPackResolve` class renamed to `com.intellij.lang.javascript.buildTools.bundler.WebBundlerResolve`
: Use `com.intellij.lang.javascript.buildTools.bundler.WebBundlerResolve` instead.

`com.intellij.lang.javascript.buildTools.webpack.WebPackConfigPath` class removed
: A regular String class is used instead.

## 2022.1

### IntelliJ Platform 2022.1

`org.apache.log4j` package removed
: log4j library removed from IntelliJ Platform, please see this [blog post](https://blog.jetbrains.com/platform/2022/02/removing-log4j-from-the-intellij-platform/) for migration instructions.

`org.slf4j` package removed
: log4j library removed from IntelliJ Platform, please see this [blog post](https://blog.jetbrains.com/platform/2022/02/removing-log4j-from-the-intellij-platform/) for migration instructions.

`com.intellij.openapi.diagnostic.Log4jBasedLogger` class removed
: log4j library removed from IntelliJ Platform, please see this [blog post](https://blog.jetbrains.com/platform/2022/02/removing-log4j-from-the-intellij-platform/) for migration instructions.

`com.intellij.platform.DirectoryProjectConfigurator.configureProject(Project, VirtualFile, Ref<Module>, boolean)` marked abstract
: Implement it instead of removed one.

`com.intellij.psi.impl.java.stubs.index.JavaStubIndexKeys.CLASS_FQN` field type changed from `StubIndexKey<Integer, PsiClass>` to `StubIndexKey<CharSequence, PsiClass>`
: `JavaFullClassNameIndex` now takes `CharSequence` instead of its `hashCode` to allow specific optimizations.

`com.intellij.psi.impl.java.stubs.index.JavaFullClassNameIndex.getKey` method return type changed from `StubIndexKey<Integer, PsiClass>` to `StubIndexKey<CharSequence, PsiClass>`
: `JavaFullClassNameIndex` now takes `CharSequence` instead of its `hashCode` to allow specific optimizations.

`com.intellij.psi.impl.java.stubs.index.JavaFullClassNameIndex.get(Integer, Project, GlobalSearchScope)` method parameter type changed from `Integer` to `CharSequence`
: `JavaFullClassNameIndex` now takes `CharSequence` instead of its `hashCode` to allow specific optimizations.

`com.jcraft.jsch` package removed
: [JSch library](https://mvnrepository.com/artifact/com.jcraft/jsch) was removed, bundle it with your plugin instead.

`com.intellij.diagnostic.DialogAppender.addFilter(Filter)` method removed
: `DialogAppender` now implements `java.util.logging.Handler`, use `setFilter` method if you need to apply a filter.

`com.intellij.psi.impl.cache.impl.BaseFilterLexerUtil.ScanContent` class removed
: Todo index is removed from the indexing procedure, use specific `calcIdEntries` or `calcTodoEntries` method instead.

`com.intellij.psi.impl.cache.impl.BaseFilterLexerUtil.scanContent(FileContent, IdAndToDoScannerBasedOnFilterLexer)` method removed
: Todo index is removed from the indexing procedure, use specific `calcIdEntries` or `calcTodoEntries` method instead.

`com.intellij.util.ui.StartupUiUtil.createStyleSheet(String)` method removed
: Method moved to `com.intellij.util.ui.StyleSheetUtil`

### Collaboration Tools 2022.1

`com.intellij.collaboration.auth.ui.AccountsPanelFactory.accountsPanel(Row, AccountManager, PersistentDefaultAccountHolder, AccountsListModel, AccountsDetailsProvider, Disposable, Icon)` method removed
: Support for default accounts required a signature change.

### Markdown Plugin 2022.1

`org.intellij.markdown.parser.constraints.MarkdownConstraints.Companion` class removed
: Some methods from a companion object were moved to `CommonMarkdownConstraints` and to extension functions on `MarkdownConstraints`.

`org.intellij.markdown.parser.constraints.MarkdownConstraints.Companion` field removed
: Some methods from a companion object were moved to `CommonMarkdownConstraints` and to extension functions on `MarkdownConstraints`.

`org.intellij.markdown.parser.constraints.MarkdownConstraints` class now interface
: Use `CommonMarkdownConstraints` for default method implementations instead.

`org.intellij.markdown.parser.markerblocks.providers.AtxHeaderProvider(boolean)` constructor parameter `boolean` removed
: `AtxHeaderProvider` now always requires at least one space between `#` and its content as specified by the CommonMark spec.

`org.intellij.markdown.html.HtmlGenerator.generateHtml()` method removed
: Use `org.intellij.markdown.html.HtmlGenerator.generateHtml(org.intellij.markdown.html.HtmlGenerator.TagRenderer)` instead.

`org.intellij.markdown.parser.markerblocks.MarkerBlockProvider.Companion.passSmallIndent(CharSequence)` method removed
: Use `org.intellij.markdown.parser.markerblocks.MarkerBlockProvider.Companion.passSmallIndent(CharSequence, Integer)` instead.

### Database Tools and SQL Plugin 2022.1

`com.intellij.database.datagrid.DataProducer.processRequest(DataRequest)` method parameter type changed from `DataRequest` to `GridDataRequest`
: `GridDataRequest` is a part of new API for async loading of table data. It's not possible to keep old method with default implementation because `DataProducer` will no longer have dependency on `DataRequest`. Plugins need to be recompiled to maintain bytecode compatibility.

`com.intellij.database.datagrid.DataRequest.RawQueryRequest.afterLastRowAdded(DataRequest.Context, int)` method parameter type changed from `DataRequest.Context` to `GridDataRequest.Context`
: The signature of the method was changed in the interface `com.intellij.database.datagrid.DataConsumer` that is now a part of new API for async loading of table data. Change the parameter type of the overridden method and recompile plugin to maintain bytecode compatibility.

`com.intellij.database.datagrid.DataConsumer.addRows(DataRequest.Context, List<DataConsumer.Row>)` method parameter type changed from `DataRequest.Context` to `GridDataRequest.Context`
: The signature of the method was changed in the interface `com.intellij.database.datagrid.DataConsumer` that is now a part of new API for async loading of table data. Change the parameter type of the overridden method and recompile plugin to maintain bytecode compatibility.

`com.intellij.database.datagrid.DataConsumer.addRows(DataRequest.Context, List<DataConsumer.Row>)` method parameter type changed from `List<DataConsumer.Row>` to `List<? extends GridRow>`
: The signature of the method was changed in the interface `com.intellij.database.datagrid.DataConsumer` that is now a part of new API for async loading of table data. Change the parameter type of the overridden method and recompile plugin to maintain bytecode compatibility.

`com.intellij.database.extractors.ObjectFormatter.getPlainValue(Object, DataConsumer.Column, Dbms)` method removed
: Method was removed because we refactor table editor API. It will not depend on Dbms anymore. Please use `ObjectFormatter.objectToString` instead.

`com.intellij.database.DatabaseDataKeys.DATA_SOURCE_KEY` field removed
: `DatabaseDataKeys` no longer extends `DatabaseDataKeysCore` because `DatabaseDataKeys` was moved to a separate module for table editor. `DATA_SOURCE_KEY` now has to be accessed directly via `DatabaseDataKeysCore`.

`com.intellij.database.extractors.ObjectFormatter` class now interface
: Method was removed because we refactor table editor API. New API will allow to use table editor in other products and fully customize it.
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Incompatible Changes in IntelliJ Platform and Plugins API 2023.*

<!--
Before documenting a breaking API change, please make sure that the change cannot be avoided in an alternative way.

APIs marked with @Deprecated(forRemoval=true), @ApiStatus.Experimental, @ApiStatus.Internal/IntellijInternalApi, or @ApiStatus.ScheduledForRemoval don't need to be documented.

To document a new incompatible change, add a new line with the problem pattern followed by a 2nd line with ": "-prefixed human-readable description
and recommended fix/action (REQUIRED, please write full sentence ending with '.', see existing entries as reference).
Non-platform changes must be grouped under relevant section for plugin.

The following problem patterns are supported and must be followed EXACTLY (e.g., no '#' instead of '.'):

<package name> package removed

<class name> class removed
<class name> class renamed to <new class name>
<class name> class moved to package <package name>

<class name>.<method name>(<human-readable parameters>) marked abstract
<class name>.<method name>(<human-readable parameters>) abstract method added
<class name>.<method name>(<human-readable parameters>) method removed
<class name>.<method name>(<human-readable parameters>) method moved to the superclass
<class name>.<method name>(<human-readable parameters>) method return type changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method visibility changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method marked final
<class name>.<method name>(<human-readable parameters>) method parameter <type> removed
<class name>.<method name>(<human-readable parameters>) method parameter type changed from <before> to <after>
<class name>.<method name> method <parameter name> parameter marked @<class name>
<class name> (class|interface) now (extends|implements) <class name> and inherits its final method <method name>(<human-readable parameters>)?
<class name> (class|interface) now (extends|implements) <class name> and inherits its abstract method <method name>(<human-readable parameters>)?
<class name> class now interface

<class name>(<human-readable parameters>) constructor removed
<class name>(<human-readable parameters>) constructor parameter <type> removed
<class name>(<human-readable parameters>) constructor parameter type changed from <before> to <after>
<class name>(<human-readable parameters>) constructor visibility changed from <before> to <after>

<class name>.<field name> field removed
<class name>.<field name> field moved to the superclass
<class name>.<field name> field type changed from <before> to <after>
<class name>.<field name> field visibility changed from <before> to <after>

<property name> property removed from resource bundle <bundle name>

Where the placeholders must be enclosed in code quotes (`name`):

<class name> is a fully-qualified name of the class, e.g. `com.intellij.openapi.actionSystem.AnAction$InnerClass`.
<method name> is the exact method's name. Note that constructors have dedicated patterns.
<human-readable parameters> is a string representing parameters, which are not necessarily fully qualified. They do not affect the parser. For example, instead of (java.lang.Object, java.util.List, int) you are free to write (Object, List<String>, int)
<parameter name> is exact name of the method's parameter
<property name> is a full name of a property from .properties file, like `some.action.description`
<bundle name> is a fully qualified name of the property bundle, which includes its package, like `message.IdeBundle`

NOTE: If a code change you're trying to document doesn't match any of the above patterns, please ask in #plugins-verifier

NOTE: You are allowed to prettify the pattern using links: [`org.example.Foo`](https://github.com/JetBrains/intellij-community/tree/master/)

NOTE: Entries not starting with code quotes (`name`) can be added to document non-code changes and will be skipped in API verification.
-->

<link-summary>List of known Breaking API Changes in 2023.*</link-summary>

<include from="snippets.md" element-id="apiChangesHeader"/>

<include from="snippets.md" element-id="apiChangesJavaVersion"/>

<include from="snippets.md" element-id="gradlePluginVersion"/>

## 2023.3

### IntelliJ Platform 2023.3

Threading Model changes
: Please see updated [](threading_model.md).

Removal of commons-lang2 and commons-collections libraries
: _commons-lang2_ library is going to be removed, a temporary compatibility layer (marked with `@Deprecated(forRemoval = true)` to highlight usages) is bundled.
Please consider migrating to either _commons-lang3_ or _commons-text_ libraries and bundle them with your plugin.
Library _commons-collections_ is going to be removed.

JsonPath library unbundled
: Bundle it [explicitly](https://youtrack.jetbrains.com/issue/IDEA-328219) with your plugin.

`com.intellij.codeInsight.intention.BaseElementAtCaretIntentionAction.isAvailable` method `Editor` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare it as nullable.

`com.intellij.codeInsight.intention.BaseElementAtCaretIntentionAction.invoke` method `Editor` parameter marked `@NotNull`
: This may break source-compatibility with inheritors written in Kotlin if they declare it as nullable.

`com.intellij.openapi.actionSystem.ex.ActionUtil.showDumbModeWarning(Project, AnActionEvent[])` method removed
: Use `showDumbModeWarning(Project project, AnAction action, AnActionEvent @NotNull ... events)` instead.

`com.intellij.profiler.eventtrace` package removed
: Update code usages.

`org.jetbrains.plugins.gradle.service.project.GradleProjectResolverUtil.buildDependencies(ProjectResolverContext, Map, Map, DataNode, Collection, DataNode)` method parameter type changed from `Map<String, String>` to `ArtifactMappingService`
: Update usages of this method. Change parameter `artifactsMap` value to an `ArtifactMappingService` instance. It can be obtained from `ProjectResolverContext`, or created in-place using the `MapBasedArtifactMappingService`.

`org.jetbrains.plugins.gradle.service.project.GradleProjectResolver.CONFIGURATION_ARTIFACTS` field removed
: Related mapping information is no longer accessible using this key. Artifacts mapping data is now stored in the instance of the `ArtifactMappingService` and can be obtained via `org.jetbrains.plugins.gradle.service.project.ProjectResolverContext#getArtifactsMap()`.

`com.intellij.ide.plugins.enums.PluginsGroupType.FEATURED` enum renamed to `com.intellij.ide.plugins.enums.PluginsGroupType.STAFF_PICKS`
: Use `com.intellij.ide.plugins.enums.PluginsGroupType.STAFF_PICKS` instead.

`com.intellij.ide.plugins.newui.SearchWords.ORGANIZATION` enum renamed to `com.intellij.ide.plugins.newui.SearchWords.VENDOR`
: Use `com.intellij.ide.plugins.newui.SearchWords.VENDOR` instead.

`com.intellij.execution.console.ConsoleHistoryCopyHandler.PROMPT_LENGTH_MARKER` field removed
: Use `com.intellij.execution.console.ConsoleHistoryCopyHandlerKt#PROMPT_LENGTH_MARKER` instead.

### Collaboration Tools Module 2023.3

`com.intellij.collaboration.ui.codereview.action.CodeReviewCheckoutRemoteBranchAction` class removed
: Action moved to a view model.

`com.intellij.collaboration.ui.codereview.details.CodeReviewDetailsBranchComponentFactory.create(CoroutineScope, CodeReviewBranchesViewModel, AnAction, DataContext)` method removed
: Action moved to a view model.

`com.intellij.collaboration.ui.codereview.diff.viewer.DiffEditorUtilKt` class removed
: Moved to `com.intellij.collaboration.ui.codereview.editor.EditorComponentInlaysUtilKt.controlInlaysIn`.

`com.intellij.collaboration.ui.toolwindow.ReviewListTabComponentDescriptor` class removed
: Descriptor removed in favour of tab type `com.intellij.collaboration.ui.toolwindow.ReviewTab`.

`com.intellij.collaboration.ui.toolwindow.ReviewTabsController` class removed
: Controller reworked to viewmodel `com.intellij.collaboration.ui.toolwindow.ReviewToolwindowProjectViewModel`.

`com.intellij.collaboration.ui.toolwindow.ReviewToolwindowDataKeys.getREVIEW_TABS_CONTROLLER()` method removed
: Controller reworked to viewmodel `com.intellij.collaboration.ui.toolwindow.ReviewToolwindowProjectViewModel`.

`com.intellij.collaboration.ui.toolwindow.ReviewToolwindowProjectContext` class removed
: Context reworked to viewmodel `com.intellij.collaboration.ui.toolwindow.ReviewToolwindowProjectViewModel`.

`com.intellij.collaboration.ui.toolwindow.ReviewToolwindowViewModel.getProjectVm()` method return type changed from `SharedFlow<C>` to `SharedFlow<PVM>`
: Context reworked to viewmodel `com.intellij.collaboration.ui.toolwindow.ReviewToolwindowProjectViewModel`.

`com.intellij.collaboration.ui.toolwindow.ReviewTabsComponentFactory.createReviewListComponent(CoroutineScope, PVM)` abstract method added
: Context reworked to viewmodel `com.intellij.collaboration.ui.toolwindow.ReviewToolwindowProjectViewModel`.

`com.intellij.collaboration.ui.toolwindow.ReviewTabsComponentFactory.createTabComponent(CoroutineScope, PVM, TVM)` abstract method added
: Context reworked to viewmodel `com.intellij.collaboration.ui.toolwindow.ReviewToolwindowProjectViewModel`.

`com.intellij.collaboration.ui.toolwindow.ReviewToolwindowTabsManagerKt.manageReviewToolwindowTabs(CoroutineScope, ToolWindow, ReviewToolwindowViewModel, ReviewTabsController, ReviewTabsComponentFactory, String)` method removed
: Added a tab viewmodel type.

`com.intellij.collaboration.ui.codereview.timeline.TimelineDiffComponentFactory.createDiffComponent(Project, EditorFactory, PatchHunk, Pair, Pair)` method removed
: Coroutine scope was added to track editor lifetime.

`com.intellij.collaboration.ui.codereview.details.model.CodeReviewChangesViewModelBase` class removed
: Incorrect [EDT](threading_model.md)-reliant implementation removed.

`com.intellij.collaboration.async.CoroutineUtilKt.DisposingScope(Disposable, CoroutineContext)` method removed
: Use `com.intellij.collaboration.async.CoroutineUtilKt.disposingScope(CoroutineContext)` instead.

`com.intellij.collaboration.ui.codereview.details.model.CodeReviewChangesViewModel.getReviewCommits()` method return type changed from `Flow` to `SharedFlow`
: Concrete type usage forced to ensure correct behavior

`com.intellij.collaboration.ui.codereview.details.model.CodeReviewChangesViewModel.getSelectedCommit()` method return type changed from `Flow` to `SharedFlow`
: Concrete type usage forced to ensure correct behavior

`com.intellij.collaboration.ui.codereview.details.model.CodeReviewChangesViewModel.getSelectedCommitIndex()` method return type changed from `Flow` to `SharedFlow`
: Concrete type usage forced to ensure correct behavior

`com.intellij.collaboration.auth.ui.login.LoginTokenGenerator.generateToken(String)` method return type changed from `String` to `void`
: Removed unused return value

`com.intellij.collaboration.auth.ui.login.TokenLoginDialog(Project, Component, LoginModel, String, DialogPanelSupplier)` constructor parameter type changed from `() -> DialogPanel`  to `CoroutineScope.() -> DialogPanel`
: Allow using dialog scope in dialog panel

`com.intellij.collaboration.ui.codereview.list.search.ChooserPopupUtil.showAsyncChooserPopup(RelativePoint, Flow<List<T>>, Mapper, ListCellRenderer, PopupConfig)` method parameter type changed from `Flow<List<T>>` to `Flow<Result<List<T>>>`
: Handle list loading errors inside the popup

`com.intellij.collaboration.ui.codereview.list.search.ChooserPopupUtil.showAsyncChooserPopup(RelativePoint, Flow<List<T>>, Presenter, PopupConfig)` method parameter type changed from `Flow<List<T>>` to `Flow<Result<List<T>>>`
: Handle list loading errors inside the popup

### Java Plugin 2023.3

`com.siyeh.ipp.base.Intention` class removed
: As a part of migration to new experimental [`ModCommand`](%gh-ic%/platform/analysis-api/src/com/intellij/modcommand/ModCommand.java) API, the class was removed completely. It's a part of implementation module and was never intended to be inherited by external plugins. Consider implementing [`LocalInspectionTool`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/LocalInspectionTool.java) directly.

`com.intellij.codeInsight.TailTypes` class renamed to `com.intellij.codeInsight.JavaTailTypes`
: Update code usages.

`com.intellij.unscramble.ThreadDumpParser` class moved to package `com.intellij.threadDumpParser`
: Update code usages.

### JavaScript Plugin 2023.3

`com.intellij.lang.javascript.buildTools.npm.PackageJsonUtil.createPackageJson(PsiDirectory, boolean)` method removed
: Use `com.intellij.lang.javascript.buildTools.npm.PackageJsonFileTemplate.create(PsiDirectory, boolean, Consumer<PsiFile>)` instead.

### External System Run Configuration 2023.3

Property `com.intellij.openapi.externalSystem.service.ui.command.line.CompletionTableInfo.completionInfo` replaced by suspend function `CompletionTableInfo.collectCompletionInfo`
: Implement the new function to support async completion collecting.

Property `com.intellij.openapi.externalSystem.service.ui.command.line.CompletionTableInfo.tableCompletionInfo` replaced by suspend function `CompletionTableInfo.collectTableCompletionInfo`
: Implement the new function to support async completion collecting.

Function `com.intellij.openapi.externalSystem.service.ui.completion.TextCompletionField.getCompletionVariants` replaced by property `TextCompletionField.completionCollector`
: Implement the new function to support async completion collecting.

`com.intellij.openapi.externalSystem.service.execution.configuration.SettingsFragmentsContainer` class renamed to `com.intellij.openapi.externalSystem.service.execution.configuration.fragments.SettingsEditorFragmentContainer`
: Use new run configuration fragment builders.

`com.intellij.openapi.externalSystem.service.execution.configuration.SettingsEditorLabeledComponent` class moved to package `com.intellij.openapi.externalSystem.service.execution.configuration.fragments`
: Use the new run configuration fragment builders.

Parameter type of fragment builder functions from `ExternalSystemRunConfigurationUtil` file changed from `C` to `(Disposable) -> C`
: Use the new run configuration fragment builders.

Fragment builder functions from `ExternalSystemRunConfigurationUtil` file moved to `SettingsEditorFragmentBuilders` and `ExternalSystemRunConfigurationFragmentBuilders` files
: Use the new run configuration fragment builders.

### Kotlin Plugin 2023.3

`org.jetbrains.kotlin.idea.actions.JavaToKotlinAction.Companion` class renamed to `org.jetbrains.kotlin.idea.actions.JavaToKotlinAction.Handler`
: In order to not load additional code eagerly on action instantiation.

`org.jetbrains.kotlin.idea.compiler.configuration.KotlinIdePluginVersion.Companion` class removed
: Now, the Kotlin plugin version does not include a compiler version, so the class is unnecessary. Use `com.intellij.openapi.application.ApplicationInfo` to get the IntelliJ version.

`org.jetbrains.kotlin.idea.compiler.configuration.KotlinIdePluginVersion` class removed
: Now, the Kotlin plugin version does not include a compiler version, so the class is unnecessary. Use `com.intellij.openapi.application.ApplicationInfo` to get the IntelliJ version.


### Markdown Plugin 2023.3

`org.intellij.plugins.markdown.editor.images` package removed
: Use `org.intellij.plugins.markdown.images` from `intellij.markdown.images` module.

`org.intellij.plugins.markdown.lang.psi.MarkdownPsiElementFactory.createHtmlBlockWithImage(Project, MarkdownImageData)` method removed
: Use `org.intellij.plugins.markdown.images.editor.ImagePsiElementFactory.createHtmlBlockWithImage` instead.

`org.intellij.plugins.markdown.lang.psi.MarkdownPsiElementFactory.createHtmlImageTag(Project, MarkdownImageData)` method removed
: Use `org.intellij.plugins.markdown.images.editor.ImagePsiElementFactory.createHtmlImageTag` instead.

`org.intellij.plugins.markdown.lang.psi.MarkdownPsiElementFactory.createImage(Project, String, String, String)` method removed
: Use `org.intellij.plugins.markdown.images.editor.ImagePsiElementFactory.createImage`.

`action.org.intellij.plugins.markdown.ui.actions.styling.InsertImageAction.insert.popup.text` property removed from resource bundle `messages.MarkdownBundle`
: Use `org.intellij.plugins.markdown.images.MarkdownImagesBundle` instead.

`markdown.configure.image.dialog.browse.image.title` property removed from resource bundle `messages.MarkdownBundle`
: Use `org.intellij.plugins.markdown.images.MarkdownImagesBundle` instead.

`markdown.configure.image.dialog.convert.to.html.label` property removed from resource bundle `messages.MarkdownBundle`
: Use `org.intellij.plugins.markdown.images.MarkdownImagesBundle` instead.

`markdown.configure.image.dialog.description.label` property removed from resource bundle `messages.MarkdownBundle`
: Use `org.intellij.plugins.markdown.images.MarkdownImagesBundle` instead.

`markdown.configure.image.dialog.height.label` property removed from resource bundle `messages.MarkdownBundle`
: Use `org.intellij.plugins.markdown.images.MarkdownImagesBundle` instead.

`markdown.configure.image.dialog.path.label` property removed from resource bundle `messages.MarkdownBundle`
: Use `org.intellij.plugins.markdown.images.MarkdownImagesBundle` instead.

`markdown.configure.image.dialog.screen.reader.text.panel.title` property removed from resource bundle `messages.MarkdownBundle`
: Use `org.intellij.plugins.markdown.images.MarkdownImagesBundle` instead.

`markdown.configure.image.dialog.title.label` property removed from resource bundle `messages.MarkdownBundle`
: Use `org.intellij.plugins.markdown.images.MarkdownImagesBundle` instead.

`markdown.configure.image.dialog.width.label` property removed from resource bundle `messages.MarkdownBundle`
: Use `org.intellij.plugins.markdown.images.MarkdownImagesBundle` instead.

`markdown.insert.image.dialog.title` property removed from resource bundle `messages.MarkdownBundle`
: Use `org.intellij.plugins.markdown.images.MarkdownImagesBundle` instead.

### Python Plugin 2023.3

`org.jetbrains.plugins.notebooks.jupyter.variables` package removed
: It is now part of separate _Jupyter_ plugin.

`com.jetbrains.python.psi.PyClass.getPropertiesInherited(TypeEvalContext)` abstract method added
: Should implement this method.

### Database Plugin 2023.3

`com.intellij.database.datagrid.DataGrid.getName(ModelIndex<GridColumn>)` method removed
: Only recompilation is needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.setDisplayType(ModelIndex<GridColumn>, DisplayType)` abstract method added
: Only recompilation is needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.getDisplayType(ModelIndex<GridColumn>)` abstract method added
: Only recompilation is needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.getPureDisplayType(ModelIndex<GridColumn>)` abstract method added
: Only recompilation is needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.setBinaryDisplayType(ModelIndex<GridColumn>, BinaryDisplayType)` method removed
: Use `com.intellij.database.datagrid.DataGrid.setDisplayType(ModelIndex<GridColumn>, DisplayType)` instead.

`com.intellij.database.datagrid.DataGrid.getBinaryDisplayType(ModelIndex<GridColumn>)` method removed
: Use `com.intellij.database.datagrid.DataGrid.getDisplayType(ModelIndex<GridColumn>)` instead.

`com.intellij.database.datagrid.DataGrid.getPureBinaryDisplayType(ModelIndex<GridColumn>)` method removed
: Use `com.intellij.database.datagrid.DataGrid.getPureDisplayType(ModelIndex<GridColumn>)` instead.

### Package Checker Plugin 2023.3

`com.intellij.packageChecker.maven.MavenSharedDependenciesModel` class renamed to `com.intellij.packageChecker.java.BuildSystemDependenciesModelBase`
: Renamed to a more correct and generic name.

## 2023.2

### IntelliJ Platform 2023.2

`com.intellij.openapi.actionSystem.AnActionEvent.getInputEvent()` method return type changed from `InputEvent` to `@Nullable InputEvent`
: This may break source-compatibility with inheritors written in Kotlin.

Specify `displayName`/`key` for `Configurable`
: To improve performance, provide either attribute for `com.intellij.applicationConfigurable` or `com.intellij.projectConfigurable` extension point (see [](settings_guide.md)).

`com.intellij.remote.RemoteProcess.setWindowSize(int, int)` abstract method added
: Should implement this method.

### Database Plugin 2023.2

`com.intellij.database.dataSource.DataSourceStorageCore` class removed
: Use `com.intellij.database.dataSource.DataSourceStorage` instead.

`com.intellij.database.dataSource.DataSourceStorageUtil` class removed
: Use `com.intellij.database.dataSource.DataSourceStorage` instead.

`com.intellij.database.dataSource.DataSourceStorageCore$Listener` class renamed to `com.intellij.database.dataSource.DataSourceStorage$Listener`
: `Core` class removed from hierarchy.

`com.intellij.database.datagrid.CoreGrid.showCell(ModelIndex<Row>, ModelIndex<Column>)` method parameter type changed from `ModelIndex<Row>` to `int`
: `ModelIndex` class is used to reference data in the table model. Row indexes in the table model start with 0, even when the table is scrolled to page _N>1_. Parameter type was changed to `int` to indicate that it is an absolute index in the DB table.

`com.intellij.database.datagrid.DataGrid.getName(ModelIndex<GridColumn>)` abstract method added
: Only recompilation is needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

### Maven Plugin 2023.2

`org.jetbrains.idea.maven.server.MavenEmbedderWrapper.customizeForResolve(MavenConsole, MavenProgressIndicator)` method removed
: Use `resolveProject(Collection, MavenExplicitProfiles, ProgressIndicator, MavenSyncConsole, MavenConsole, MavenWorkspaceMap, boolean)` instead.

`org.jetbrains.idea.maven.server.MavenEmbedderWrapper.execute(VirtualFile, Collection, Collection, List)` method removed
: Use `executeGoal(Collection, String, MavenProgressIndicator, MavenConsole)` instead.

### Apache Velocity Plugin 2023.2

`com.intellij.velocity.psi.VtlVariable.getPsiType()` method return type changed from `com.intellij.psi.PsiType` to `com.intellij.velocity.psi.VtlVariableType`
: Use `com.intellij.velocity.java.reference.VtlPsiType` to wrap Java types to return result from implementations.

### JSON Path Plugin 2023.2

Moved package `com.intellij.jsonpath`
: It is now part of separate _JSONPath_ plugin. [Add dependency](plugin_dependencies.md) on `com.intellij.jsonpath` to use its API.

## 2023.1

### IntelliJ Platform 2023.1

Apache Batik library unbundled
: Please bundle and use [echosvg](https://github.com/css4j/echosvg) library instead.

`com.intellij.grazie.text.RuleGroup.Companion.getLITERALS() method removed`
: Replaced by constant field `LITERALS`.

`com.intellij.ui.treeStructure.SimpleNode.doUpdate()` method removed
: It was replaced by `doUpdate(PresentationData)` which should now only modify the state of its parameter.

`com.intellij.ide.ui.laf.darcula.ui.DarculaProgressBarUI.getFinishedColor()` method removed
: Use `getFinishedColor(JComponent c)` overload instead.

`com.intellij.openapi.externalSystem.view.ExternalSystemNode.setNameAndTooltip(String, String)` method removed
: Use `setNameAndTooltip(PresentationData, String, String)` overload instead.

`com.intellij.openapi.externalSystem.view.ExternalSystemNode.setNameAndTooltip(String, String, String)` method removed
: Use `setNameAndTooltip(PresentationData, String, String, String)` overload instead.

`com.intellij.openapi.externalSystem.view.ExternalSystemNode.setNameAndTooltip(String, String, SimpleTextAttributes)` method removed
: Use `setNameAndTooltip(PresentationData, String, String, SimpleTextAttributes)` overload instead.

`com.intellij.ssh.config.unified.SshConfigManager.register(boolean, String, String, String, String, AuthType, String, String, boolean, boolean, String, String)` method parameter `String` removed
: Local port is the part of the tunnel configuration, not SSH settings.

`com.intellij.openapi.fileEditor.impl.HTMLEditorProvider.Companion.getAFFINITY_KEY()` method removed
: It was an accidentally exposed internal API. Please use `HTMLEditorProvider.openEditor()` methods, or implement your own file editor provider.

`com.intellij.execution.RunnerAndConfigurationSettings.setFocusToolWindowBeforeRun(boolean)` abstract method added
: The interface is not intended to be implemented in external plugins.

`com.intellij.execution.RunnerAndConfigurationSettings.getFocusToolWindowBeforeRun()` abstract method added
: The interface is not intended to be implemented in external plugins.

### Database Plugin 2023.1

`com.intellij.database.dataSource.url.TypeDescriptor.ParamEditor` class moved to package `com.intellij.database.dataSource.url`
: The inner interface was moved to upper level.

`com.intellij.database.dataSource.url.TypesRegistry.BaseTypeDescriptor` class moved to package `com.intellij.database.dataSource.url.ui`
: UI extracted from `TypesRegistry` to `TypesRegistryUi`. Use `com.intellij.database.urlParamEditorProvider` extension point to register parameter descriptor, use `com.intellij.database.urlParamEditorUiProvider` extension point to register parameter editor descriptor.

`com.intellij.database.datagrid.DataGrid.setAnonymousColumnName(String)` method removed
: Only recompilation needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.setResultViewAdditionalRowsCount(int)` method removed
: Only recompilation needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.setResultViewAllowMultilineColumnLabels(boolean)` method removed
: Only recompilation needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.setResultViewPaintHorizontalLines(boolean)` method removed
: Only recompilation needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.setResultViewShowRowNumbers(boolean)` method removed
: Only recompilation needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.setResultViewTransparentHeaderBackground(boolean)` method removed
: Only recompilation needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.setResultViewVisibleRowCount(int)` method removed
: Only recompilation needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.countSortedColumns()` abstract method added
: Only recompilation needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.getAppearance()` abstract method added
: Only recompilation needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.getHoveredRowBackground()` abstract method added
: Only recompilation needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.getStripeRowBackground()` abstract method added
: Only recompilation needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.plan.ExplainPlanProvider.createRawExplainTask(LocalDataSource dataSource, boolean analyze)` abstract method added
: Should implement this method.

### JavaScript Plugin 2023.1

`com.intellij.lang.javascript.JavascriptParserDefinition.createFile(FileViewProvider)` method return type changed from `com.intellij.lang.javascript.psi.JSFile` to `com.intellij.psi.PsiFile`
: Required to support Astro file format.

### JavaScript Debugger Plugin 2023.1

`org.jetbrains.wip.WipVm.initDomains()` method return type changed from `void` to `org.jetbrains.concurrency.Promise<*>`
: `initDomains()` is now awaitable to make WIP/CDP domains-dependent initialization logic possible.

`org.jetbrains.wip.WipVm.ready()` method return type changed from `void` to `org.jetbrains.concurrency.Promise<*>`
: `ready()` is now awaitable to make WIP/CDP connection-dependent initialization logic possible.

### JetBrains Gateway Plugin 2023.1

`com.jetbrains.gateway.ssh.HighLevelHostAccessor.isPathPresentOnRemote(String, FileSystemItem)` method parameter type changed from `String` to `com.jetbrains.gateway.ssh.deploy.RemotePath`
: Using strings instead of paths breaks a lot of things when doing cross-platform development, and is generally not a good idea. Use `com.jetbrains.gateway.ssh.HighLevelHostAccessor.makeRemotePath` to prepare a path to pass into any of the methods requiring it.

### PHP Plugin 2023.1

`com.jetbrains.php.config.library.PhpIncludePathManager.getRoots()` method removed
: This class no longer handles all paths configured in non-runtime `com.jetbrains.php.config.library.PhpLibraryRootProvider`. Paths configured in <control>Include Path Settings</control> are available with `PhpIncludePathManager.getIncludePaths()`. All additional paths to use as roots for resolving via `PhpIncludePathManager.getAllIncludedRoots()`.
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Incompatible Changes in IntelliJ Platform and Plugins API 2024.*

<!--
Before documenting a breaking API change, please make sure that the change cannot be avoided in an alternative way.

APIs marked with @Deprecated(forRemoval=true), @ApiStatus.Experimental, @ApiStatus.Internal/IntellijInternalApi, or @ApiStatus.ScheduledForRemoval don't need to be documented.

To document a new incompatible change, add a new line with the problem pattern followed by a 2nd line with ": "-prefixed human-readable description
and recommended fix/action (REQUIRED, please write full sentence ending with '.', see existing entries as reference).
Non-platform changes must be grouped under relevant section for plugin.

The following problem patterns are supported and must be followed EXACTLY (e.g., no '#' instead of '.'):

<package name> package removed

<class name> class removed
<class name> class renamed to <new class name>
<class name> class moved to package <package name>

<class name>.<method name>(<human-readable parameters>) marked abstract
<class name>.<method name>(<human-readable parameters>) abstract method added
<class name>.<method name>(<human-readable parameters>) method removed
<class name>.<method name>(<human-readable parameters>) method moved to the superclass
<class name>.<method name>(<human-readable parameters>) method return type changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method visibility changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method marked final
<class name>.<method name>(<human-readable parameters>) method parameter <type> removed
<class name>.<method name>(<human-readable parameters>) method parameter type changed from <before> to <after>
<class name>.<method name> method <parameter name> parameter marked @<class name>
<class name> (class|interface) now (extends|implements) <class name> and inherits its final method <method name>(<human-readable parameters>)?
<class name> (class|interface) now (extends|implements) <class name> and inherits its abstract method <method name>(<human-readable parameters>)?
<class name> class now interface

<class name>(<human-readable parameters>) constructor removed
<class name>(<human-readable parameters>) constructor parameter <type> removed
<class name>(<human-readable parameters>) constructor parameter type changed from <before> to <after>
<class name>(<human-readable parameters>) constructor visibility changed from <before> to <after>

<class name>.<field name> field removed
<class name>.<field name> field moved to the superclass
<class name>.<field name> field type changed from <before> to <after>
<class name>.<field name> field visibility changed from <before> to <after>

<property name> property removed from resource bundle <bundle name>

Where the placeholders must be enclosed in code quotes (`name`):

<class name> is a fully-qualified name of the class, e.g. `com.intellij.openapi.actionSystem.AnAction$InnerClass`.
<method name> is the exact method's name. Note that constructors have dedicated patterns.
<human-readable parameters> is a string representing parameters, which are not necessarily fully qualified. They do not affect the parser. For example, instead of (java.lang.Object, java.util.List, int) you are free to write (Object, List<String>, int)
<parameter name> is exact name of the method's parameter
<property name> is a full name of a property from .properties file, like `some.action.description`
<bundle name> is a fully qualified name of the property bundle, which includes its package, like `message.IdeBundle`

NOTE: If a code change you're trying to document doesn't match any of the above patterns, please ask in #plugins-verifier

NOTE: You are allowed to prettify the pattern using links: [`org.example.Foo`](https://github.com/JetBrains/intellij-community/tree/master/)

NOTE: Entries not starting with code quotes (`name`) can be added to document non-code changes and will be skipped in API verification.
-->

<link-summary>List of known Breaking API Changes in 2024.*</link-summary>

<include from="snippets.md" element-id="apiChangesHeader"/>

<include from="snippets.md" element-id="apiChangesJavaVersion"/>

<include from="snippets.md" element-id="gradlePluginVersion"/>

## 2024.3

### IntelliJ Platform 2024.3

`com.intellij.psi.stubs.StubElement.getChildrenStubs()` method return type changed from `List<StubElement>` to `List<StubElement<?>>`
: Raw-type changed to a properly parameterized type. This is binary compatible change but may cause compilation errors. In most of the cases, it's enough to add `<?>` at the use site to fix the issue.

Unbundled JUnit library
: Add an explicit dependency in the plugin project.

`com.intellij.openapi.actionSystem.impl.MoreActionGroup(boolean, int, DefaultConstructorMarker)` constructor removed
: Use other constructors instead.

`ai.grazie.nlp.stemmer` package removed
: Add an explicit dependency on the NLP platform if needed.

`com.intellij.openapi.externalSystem.model.task.event.ExternalSystemStartEventImpl` class renamed to `com.intellij.openapi.externalSystem.model.task.event.ExternalSystemStartEvent`
: Use new class

`com.intellij.openapi.externalSystem.model.task.event.TaskOperationDescriptorImpl` class renamed to `com.intellij.openapi.externalSystem.model.task.event.TaskOperationDescriptor`
: Use new class

`com.intellij.openapi.externalSystem.model.task.event.DefaultOperationResult` class renamed to `com.intellij.openapi.externalSystem.model.task.event.OperationResult`
: Use new class

`com.intellij.openapi.externalSystem.model.task.event.FailureResultImpl` class renamed to `com.intellij.openapi.externalSystem.model.task.event.FailureResult`
: Use new class

`com.intellij.openapi.externalSystem.model.task.event.SkippedResultImpl` class renamed to `com.intellij.openapi.externalSystem.model.task.event.SkippedResult`
: Use new class

`com.intellij.openapi.externalSystem.model.task.event.SuccessResultImpl` class renamed to `com.intellij.openapi.externalSystem.model.task.event.SuccessResult`
: Use new class

`com.intellij.openapi.externalSystem.model.task.event.ExternalSystemStatusEventImpl` class renamed to `com.intellij.openapi.externalSystem.model.task.event.ExternalSystemStatusEvent`
: Use new class

`com.intellij.openapi.externalSystem.model.task.event.FailureImpl` class renamed to `com.intellij.openapi.externalSystem.model.task.event.Failure`
: Use new class

`com.intellij.openapi.externalSystem.model.task.event.ExternalSystemFinishEventImpl` class renamed to `com.intellij.openapi.externalSystem.model.task.event.ExternalSystemFinishEvent`
: Use new class

Interface `com.intellij.openapi.externalSystem.model.task.event.TaskOperationDescriptor` changed to class
: Recompile your plugin with new class

`com.intellij.openapi.externalSystem.importing.AbstractOpenProjectProvider.linkToExistingProjectAsync(VirtualFile arg0, Project arg1, Continuation arg2)` method marked final
: Override method `com.intellij.openapi.externalSystem.importing.AbstractOpenProjectProvider#linkProject` instead



### JSON Plugin (new) 2024.3

`com.intellij.json.JsonElementTypes` class removed
:
<snippet id="json-plugin-fix">
Add an [explicit dependency](plugin_dependencies.md) on the newly extracted JSON plugin (`com.intellij.modules.json`) in `plugin.xml`.<br/>If the plugin is built against 2024.3+, also add `com.intellij.modules.json` to the [bundled plugins](tools_intellij_platform_gradle_plugin_dependencies_extension.md#bundled-plugin) in the Gradle build script.
</snippet>

`com.intellij.json.JsonFileType` class removed
: <include from="api_changes_list_2024.md" element-id="json-plugin-fix"/>

`com.intellij.json.JsonLanguage` class removed
: <include from="api_changes_list_2024.md" element-id="json-plugin-fix"/>

`com.intellij.json.JsonParserDefinition` class removed
: <include from="api_changes_list_2024.md" element-id="json-plugin-fix"/>

`com.intellij.json.JsonTokenType` class removed
: <include from="api_changes_list_2024.md" element-id="json-plugin-fix"/>

`com.intellij.json` package removed
: <include from="api_changes_list_2024.md" element-id="json-plugin-fix"/>

`com.intellij.json.codeinsight` package removed
: <include from="api_changes_list_2024.md" element-id="json-plugin-fix"/>

`com.intellij.json.highlighting` package removed
: <include from="api_changes_list_2024.md" element-id="json-plugin-fix"/>

`com.intellij.json.psi` package removed
: <include from="api_changes_list_2024.md" element-id="json-plugin-fix"/>

`com.jetbrains.jsonSchema` package removed
: <include from="api_changes_list_2024.md" element-id="json-plugin-fix"/>

### Database Plugin 2024.3

`com.intellij.database.datagrid.DataGrid.getFormatterConfig(ModelIndex)` abstract method added
: Only recompilation is needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

### Package Checker 2024.3

`com.intellij.packageChecker.model.Dependency(Package, Set, DataContext)` constructor removed
: Use other constructors instead.

### HTTP Client Plugin 2024.3

`com.intellij.httpClient.http.request.run.HttpRunRequestInfo` class moved to package `com.intellij.httpClient.http.request.run.info`
: Update code usages.

### JavaScript Plugin 2024.3

`com.intellij.lang.ecmascript6.JSXHarmonyFileType` class renamed to `com.intellij.lang.javascript.JSXFileType`
: Update code usages.

Interface `com.intellij.lang.javascript.JSElementTypes` no longer extends `com.intellij.lang.javascript.JSStubElementTypes`
: Update code usages.

Field `com.intellij.lang.javascript.JavaScriptSupportLoader.ECMA_SCRIPT_L4` moved to `com.intellij.lang.javascript.flex.FlexSupportLoader`
: Update code usages.

### Kotlin Plugin 2024.3

`org.jetbrains.kotlin.idea.quickfix.AddAnnotationFix(KtElement, ClassId, AddAnnotationFix.Kind, FqName, SmartPsiElementPointer, int, DefaultConstructorMarker)` constructor parameter type changed from `FqName` to `List<String>`
: Update code usages.


## 2024.2

### IntelliJ Platform 2024.2

Constructor of `com.intellij.ui.tabs.TabInfo` requires not-null `JComponent` argument.

`com.intellij.execution.lineMarker.ExecutorAction.Companion.wrap(RunContextAction, Int)` method removed
: Use `com.intellij.execution.lineMarker.ExecutorAction.Companion.wrap(AnAction, Executor, Int)` instead.

`org.apache.sanselan.util` package removed
: `org.apache.sanselan.util.IOUtils` compatibility shim is obsolete; instead, please use JRE methods or `org.apache.commons.io.IOUtils`.

`com.intellij.platform.workspace.storage.url.VirtualFileUrlManager.getOrCreateFromUri(String)` method removed
: Use `com.intellij.platform.workspace.storage.url.VirtualFileUrlManager.getOrCreateFromUrl(String)` instead.

`com.intellij.platform.workspace.jps.entities.DependenciesKt.modifyEntity(MutableEntityStorage, LibraryEntity, Function1)` method removed
: Use `com.intellij.platform.workspace.jps.entities.DependenciesKt.modifyLibraryEntity(MutableEntityStorage, LibraryEntity, Function1)` instead.

`ai.grazie.nlp.utils.UtilsKt.tokenizeByWhitespace(String)` method removed
: NLP platform internals.

### UML Plugin 2024.2

`com.intellij.uml.UmlGraphBuilder(Project, Graph2D, Graph2DView, DiagramDataModel<?>, DiagramPresentationModel)` constructor removed
: Use `com.intellij.uml.UmlGraphBuilder(Project, Graph2D, Graph2DView, DiagramDataModel<?>, GraphThreadingType, DiagramPresentationModel)` instead.

`com.intellij.openapi.graph.impl.builder.GraphBuilderImpl.addEdge(Object, Object, Object)` method removed
: Use `com.intellij.openapi.graph.impl.builder.GraphBuilderImpl.addEdge(Object, Object, String, Object, Object[], Function<? super E,? extends Edge>)` instead.

### Python Plugin 2024.2

`com.jetbrains.python.PyElementTypes.STATEMENT_LIST` field type changed from `PyElementType` to `IElementType`
: Update code usages.

### Kotlin Plugin 2024.2

`org.jetbrains.kotlin.analysis.low.level.api.fir.LLFirResolveSessionService.getFirResolveSessionNoCaching(module: KtModule)` method removed
: Internals of Kotlin plugin.

`org.jetbrains.kotlin.analysis.project.structure.ProjectStructureProvider.Companion.getModule(Project, PsiElement, KtModule)` method removed
: Use `org.jetbrains.kotlin.analysis.api.projectStructure.KaModuleProvider.Companion.getModule(Project, PsiElement, KtModule)` instead.

`org.jetbrains.kotlin.codegen.state.TypeMappingUtil.getJVM_SUPPRESS_WILDCARDS_ANNOTATION_FQ_NAME` method removed
: Use `org.jetbrains.kotlin.name.JvmStandardClassIds.getJVM_SUPPRESS_WILDCARDS_ANNOTATION_FQ_NAME` instead.

`org.jetbrains.kotlin.fir.types.ConeTypeUtilsKt.renderReadableWithFqNames(ConeKotlinType)` method removed
: Internals of Kotlin compiler.

`org.jetbrains.kotlin.analysis.project.structure.KtModule` class renamed to `org.jetbrains.kotlin.analysis.api.projectStructure.KaModule`
: Update code usages.

`org.jetbrains.kotlin.fir.expressions.FirAssignmentOperatorStatement` class removed
: Internals of Kotlin compiler.


### Database Plugin 2024.2

`com.intellij.database.datagrid.DataGrid.getCoroutineScope()` abstract method added
: Only recompilation is needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.getModificationTracker()` abstract method added
: Only recompilation is needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.adaptForNewQuery()` abstract method added
: Only recompilation is needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

### HTTP Client Plugin 2024.2

`com.intellij.httpClient.http.request.HttpRequestPsiConverter.toRequestConfig(HttpRequest)` method visibility changed from `public` to `private`
: This method is an implementation detail.

### Dependency Analysis Plugin 2024.2

`com.jetbrains.dependencyAnalysis` package removed
: The package `com.jetbrains.dependencyAnalysis` has been removed. Please update your code to use the new package `com.jetbrains.dependencyAnalysis.core` instead.

## 2024.1

### IntelliJ Platform 2024.1

`com.intellij.refactoring.RefactoringHelper.prepareOperation(UsageInfo [] usages, List<PsiElement> elements)` abstract method added
: Use instead of `com.intellij.refactoring.RefactoringHelper.prepareOperation(UsageInfo [] usages)` and `com.intellij.refactoring.RefactoringHelper.prepareOperation(UsageInfo [] usages, PsiElement primaryElement)`.

`com.intellij.refactoring.RefactoringHelper.prepareOperation(UsageInfo [] usages)` method removed
: Use `com.intellij.refactoring.RefactoringHelper.prepareOperation(UsageInfo [] usages, List<PsiElement> elements)` instead.

`com.intellij.refactoring.RefactoringHelper.prepareOperation(UsageInfo [] usages, PsiElement primaryElement)` method removed
: Use `com.intellij.refactoring.RefactoringHelper.prepareOperation(UsageInfo [] usages, List<PsiElement> elements)` instead.

`com.jetbrains.commandInterface.commandLine.psi.CommandLineFile` class moved to package `com.intellij.commandInterface.commandLine.psi`
: Update code usages.

`com.jetbrains.commandInterface.commandLine.CommandLineLanguage` class moved to package `com.intellij.commandInterface.commandLine`
: Update code usages.

`com.jetbrains.commandInterface.commandLine.psi.CommandLineArgument` class moved to package `com.intellij.commandInterface.commandLine.psi`
: Update code usages.

`com.jetbrains.commandInterface.commandLine.psi.CommandLineOption` class moved to package `com.intellij.commandInterface.commandLine.psi`
: Update code usages.

`com.intellij.application.options.editor.CodeFoldingConfigurable.applyCodeFoldingSettingsChanges()` method removed
: Use top-level method `CodeFoldingConfigurableKt.applyCodeFoldingSettingsChanges` instead.

`com.intellij.ide.bookmark.providers.LineBookmarkProvider.Companion` class removed
: Use `com.intellij.ide.bookmark.providers.LineBookmarkProvider.Util` instead.

`com.intellij.execution.process.mediator.util` package removed
: The sole extension method `Deferred<T>.blockingGet()` contained in this package is an anti-pattern, and was not supposed to be exposed in the first place. The process mediator and the elevation service are now product modules, and no longer part of the platform.

`com.intellij.vcs.log.VcsLogFileHistoryHandler.getSupportedVcs()` abstract method added
: Must be implemented.

`com.intellij.vcs.log.VcsLogFileHistoryHandler.getHistoryFast(root: VirtualFile, filePath: FilePath, hash: Hash?, filters: VcsLogFilterCollection, commitCount: Int)` abstract method added
: Parameter `filters: VcsLogFilterCollection` was added to provide filtering capabilities to file history. Implement `com.intellij.vcs.log.VcsLogFileHistoryHandler.getSupportedFilters` to specify which filters are supported by this extension (currently, branch filter, revision filter and range filter are available).

`com.intellij.vcs.log.VcsLogFileHistoryHandler.collectHistory(root: VirtualFile, filePath: FilePath, hash: Hash?, filters: VcsLogFilterCollection, consumer)` abstract method added
: Parameter `filters: VcsLogFilterCollection` was added to provide filtering capabilities to file history. Implement `com.intellij.vcs.log.VcsLogFileHistoryHandler.getSupportedFilters` to specify which filters are supported by this extension (currently, branch filter, revision filter and range filter are available).

`org.apache.tools` package removed
: Please provide all necessary libraries in your plugin distribution.

`com.intellij.openapi.projectRoots.impl.ProjectJdkImpl.readExternal(Element, ProjectJdkTable)` method removed
: Use `com.intellij.openapi.projectRoots.impl.ProjectJdkImpl.readExternal(Element, Function<String, SdkTypeId>)` instead.

`com.intellij.openapi.projectRoots.impl.SdkConfigurationUtil.createSdk(Collection<Sdk>, String, SdkType, SdkAdditionalData, String)` method return type changed from `ProjectJdkImpl` to `Sdk`
: Update code usages.

`com.intellij.openapi.projectRoots.impl.SdkConfigurationUtil.createSdk(Collection<Sdk>, VirtualFile, SdkType, SdkAdditionalData, String)` method return type changed from `ProjectJdkImpl` to `Sdk`
: Update code usages.

Class `com.intellij.diff.editor.DiffVirtualFile` now extends `com.intellij.diff.editor.DiffViewerVirtualFile` and inherits its abstract method `com.intellij.diff.editor.DiffViewerVirtualFile.createViewer(Project)`
: Update code usages.

`com.intellij.diff.tools.combined.CombinedDiffVirtualFile.getSourceId()` method removed
: Update code usages.

`com.intellij.diff.tools.combined.CombinedDiffModel` interface removed
: Use `com.intellij.diff.tools.combined.CombinedDiffModel` class instead.

`com.intellij.diff.tools.combined.CombinedDiffVirtualFile.createViewer(Project)` abstract method added
: Must be implemented.

`com.intellij.openapi.util.io.NioPathUtil.isAncestor(Path, Path, boolean)` method removed
: Use `Path.startsWith()` instead.

`com.intellij.util.CachedValueBase.setData(CachedValueBase.Data)` abstract method added
: Must be implemented.

`com.intellij.util.CachedValueBase.getRawData()` abstract method added
: Must be implemented.

Visibility of class `com.intellij.util.CachedValuesFactory` changed from public to internal
: The class is not supposed to be used directly.

`com.intellij.ui.popup.ActionPopupStep.performAction(AnAction, InputEvent)` method parameter type changed from `AnAction` to `ActionItem`
: Use `com.intellij.ui.popup.ActionPopupStep.performActionItem(ActionItem, InputEvent)` instead.

`com.intellij.openapi.actionSystem.AnAction.getTemplateText()` method marked final
: Use `AnAction.getTemplatePresentation().setText()` instead.

`com.intellij.openapi.actionSystem.ActionGroup.isPopup()` method marked final
: Use `ActionGroup.getTemplatePresentation().setPopupGroup(boolean)` instead.

`com.intellij.webcore.packaging.InstalledPackagesPanel.myInstallButton` field removed
: Use `InstalledPackagesPanel.myInstallEnabled` instead.

### UML Plugin 2024.1

`com.intellij.uml.core.actions.ShowDiagramBase.findProviders(AnActionEvent, DiagramProvider, BiFunction)` method removed
: Use `com.intellij.uml.core.actions.ShowDiagramBase.findProviders(DiagramProvider<?>, BiFunction<? super DiagramProvider<?>,? super DataContext,java.lang.Object>, DataContext)` instead.

### Java Plugin 2024.1

`com.intellij.lang.properties.RemovePropertyLocalFix` class removed
: Use `com.intellij.codeInsight.daemon.impl.quickfix.DeleteElementFix` instead.

### Django Plugin 2024.1

Package `com.jetbrains.jinja2` renamed to `com.intellij.jinja`
: Update code usages.

### Restructured Text Plugin 2024.1

`com.jetbrains.rest.RestLanguage` class moved to package `com.intellij.python.reStructuredText`
: Update code usages.

### GitHub Plugin 2024.1

`org.jetbrains.plugins.github.pullrequest.comment.GHPRDiffReviewSupport` class removed
: Migrated to MVVM.

`org.jetbrains.plugins.github.pullrequest.comment.GHPRDiffReviewSupport.Companion` class removed
: Migrated to MVVM.

`org.jetbrains.plugins.github.pullrequest.action.GHPRActionKeys.getPULL_REQUEST_DATA_PROVIDER()` method removed
: Migrated to MVVM, hidden implementation details.

### Kotlin Plugin 2024.1

`org.jetbrains.kotlin.ir.visitors.IrElementVisitor.visitInlinedFunctionBlock(inlinedFunctionBlock: IrInlinedFunctionBlock, data: D)` abstract method added
: Update code usages.

`org.jetbrains.kotlin.ir.visitors.IrElementVisitor.visitReturnableBlock(returnableBlock: IrReturnableBlock, data: D)` abstract method added
: Update code usages.

`org.jetbrains.kotlin.ir.visitors.IrElementVisitorVoid.visitInlinedFunctionBlock(inlinedFunctionBlock: IrInlinedFunctionBlock)` abstract method added
: Update code usages.

`org.jetbrains.kotlin.ir.visitors.IrElementVisitorVoid.visitInlinedFunctionBlock(inlinedFunctionBlock: IrInlinedFunctionBlock, data: Nothing?)` abstract method added
: Update code usages.

`org.jetbrains.kotlin.ir.visitors.IrElementVisitorVoid.visitReturnableBlock(returnableBlock: IrReturnableBlock)` abstract method added
: Update code usages.

`org.jetbrains.kotlin.ir.visitors.IrElementVisitorVoid.visitReturnableBlock(retunrableBlock: IrReturnableBlock, data: Nothing?)` abstract method added
: Update code usages.

`org.jetbrains.kotlin.fir.expressions.FirConstExpression` class renamed `org.jetbrains.kotlin.fir.expressions.FirLiteralExpression`
: Update code usages.

`org.jetbrains.kotlin.ir.declarations.IrDeclarationOrigin.DELEGATE` class removed
: `org.jetbrains.kotlin.ir.declarations.IrDeclarationOrigin.Companion.DELEGATE` should be used instead.

`org.jetbrains.kotlin.ir.declarations.IrDeclarationOrigin.DELEGATED_MEMBER` class removed
: `org.jetbrains.kotlin.ir.declarations.IrDeclarationOrigin.Companion.DELEGATED_MEMBER` should be used instead.

`org.jetbrains.kotlin.config.JvmDefaultMode.DEFAULT` field removed
: Use `org.jetbrains.kotlin.config.JvmDefaultMode.DISABLE`.

Method `org.jetbrains.kotlin.backend.common.lower.LocalDeclarationsLoweringKt.getParentsWithSelf(IrDeclaration)` renamed to `org.jetbrains.kotlin.ir.util.IrUtilsKt.getParentsWithSelf`
: Update code usages.

`org.jetbrains.kotlin.daemon.common.CompileService.Companion.getNO_SESSION()` method removed
: Use `org.jetbrains.kotlin.daemon.common.CompileService.NO_SESSION` const instead.

Class `org.jetbrains.kotlin.ir.declarations.IrDeclarationOriginImpl` made final
: Create a new `IrDeclarationOrigin` by delegation. See https://github.com/JetBrains/kotlin/blob/a3b55cf758f3a7ceb596f65507c2f61ada5266af/compiler/ir/ir.tree/src/org/jetbrains/kotlin/ir/declarations/IrDeclarationOrigin.kt#L20.

`org.jetbrains.kotlin.idea.refactoring.introduce.extractFunction.ExtractKotlinFunctionHandlerKt` class removed
: Use `com.intellij.lang.refactoring.RefactoringSupportProvider.getExtractMethodHandler` instead to invoke Kotlin extract function refactoring

### Maven Plugin 2024.1

`org.jetbrains.idea.maven.indices.MavenIndex.getUpdateTimestamp()` method removed
: Use `org.jetbrains.idea.maven.indices.MavenIndexImpl.getUpdateTimestamp()` instead. `MavenIndex` is an obsolete interface now with `MavenIndexImpl` as the only implementation, consider using `MavenGAVIndex` to get information about available Maven GAV coordinates, or `MavenSearchIndex` to search Maven artifacts by content.

`org.jetbrains.idea.maven.indices.MavenIndex.getFailureMessage()` method removed
: Use `org.jetbrains.idea.maven.indices.MavenIndexImpl.getFailureMessage()` instead. `MavenIndex` is an obsolete interface now with `MavenIndexImpl` as the only implementation, consider using `MavenGAVIndex` to get information about available Maven GAV coordinates, or `MavenSearchIndex` to search Maven artifacts by content.

`org.jetbrains.idea.maven.indices.MavenIndex.getRepositoryPathOrUrl()` method removed
: Use `org.jetbrains.idea.maven.indices.MavenRepositoryIndex.getRepository().getUrl()` instead. Also, `MavenRepositoryInfo.getKind()` could be used to distinguish between local and remote repo.

`org.jetbrains.idea.maven.indices.MavenIndicesManager.scheduleUpdateContent(List<MavenIndex>, boolean)` method removed
: Use `org.jetbrains.idea.maven.indices.searcher.MavenLuceneIndexer.update(List<MavenRepositoryInfo>, Boolean)` to update content for lucene indices. You should not care of GAV indices update.

`org.jetbrains.idea.maven.indices.MavenIndicesManager.scheduleUpdateIndicesList(Consumer<MavenIndex>)` method removed
: Use `org.jetbrains.idea.maven.indices.searcher.MavenIndicesManager.scheduleUpdateIndicesList()` to update an indices list for a specific project. To get all search indices for specific project use `MavenSystemIndicesManager.getClassIndexForRepository()`, you can get a list of all repositories with `MavenIndexUtils.getAllRepositories(Project)`.

### Database Plugin 2024.1

`com.intellij.database.datagrid.DataGrid.getLocalFilterState()` abstract method added
: Only recompilation is needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.database.datagrid.DataGrid.getColumnAttributes()` abstract method added
: Only recompilation is needed for classes that implement `DataGrid` and delegate calls to an actual `DataGrid` implementation.

`com.intellij.sql.psi.SqlTableExpression.getSqlType()` method removed
: Use `getDasType()` instead

### HTTP Client Plugin 2024.1

`com.intellij.httpClient.actions.generation.RequestUrlContextInfo(requestContextData: RequestContextData)` constructor parameter removed
: Use `com.intellij.httpClient.actions.generation.RequestBody` and `com.intellij.httpClient.actions.generation.HttpRequestUrlPathInfo.Companion.create()` to describe a request body that will be coomputed lazily during the corresponding request generation.

### Markdown Plugin 2024.1

`org.intellij.plugins.markdown.ui.split` package removed
: Update code usages.

`org.intellij.plugins.markdown.ui.split.SplitTextEditorProvider` class removed
: Use `com.intellij.openapi.fileEditor.TextEditorWithPreviewProvider` instead.

### Python Plugin 2024.1

`com.jetbrains.extensions.ModuleExt` class moved to package `com.jetbrains.python.extensions`
: Update code usages.

`com.jetbrains.extensions.QualifiedNameExt` class moved to package `com.jetbrains.python.extensions`
: Update code usages.

`com.jetbrains.extensions.python.PyCallExpressionExt` class moved to package `com.jetbrains.python.extensions.python`
: Update code usages.

`com.jetbrains.extensions.python.FileChooserDescriptorExtKt` class moved to package `com.jetbrains.python.extensions`
: Update code usages.

`com.jetbrains.python.module.PythonModuleBuilder` class moved to package `com.intellij.python.community.plugin.java.facet`
: Update code usages.

`com.jetbrains.python.facet` package removed
: Private package is no longer available as an API.

`com.jetbrains.python.debugger.remote` package removed
: Private package is no longer available as an API.

`com.jetbrains.django.util.DjangoUtil` class removed
: Private class is no longer available as an API.

`com.jetbrains.django.testRunner` package removed
: Private package is no longer available as an API.

### JavaScript Plugin 2024.1

`com.intellij.lang.javascript.documentation.JSDocumentationProvider.generateDoc(PsiElement, PsiElement)` method marked final
: Override `com.intellij.lang.javascript.documentation.JSDocumentationProvider.generateDoc(PsiElement, PsiElement, Ref<String>)` instead

### Rd Framework 2024.1

`com.jetbrains.rd.framework.IMarshaller.DefaultImpls.getId(IMarshaller)` method removed
: Due to `RdId` becoming a value class, the `getId` method is removed at runtime, causing unresolved method invocations. Use the method that returns long in Java and recompile the Kotlin code.

`com.jetbrains.rd.framework.RdId.write(AbstractBuffer)` method removed
: Due to `RdId` becoming a value class, the `getId` method is removed at runtime, causing unresolved method invocations. Use `AbstractBuffer.writeLong(long)` method in Java and recompile the Kotlin code.

`org.digma.intellij.plugin.rider.protocol.LensPerObjectId.getRdid()` method removed
: Due to `RdId` becoming a value class, the `getId` method is removed at runtime, causing unresolved method invocations. Use the method that returns `long` in Java and recompile the Kotlin code.

`com.jetbrains.rd.framework.RdId.Companion.read(AbstractBuffer)` method removed
: Due to `RdId` becoming a value class, the `getId` method is removed at runtime, causing unresolved method invocations. Use `AbstractBuffer.readLong()` method in Java and recompile the Kotlin code.

`com.jetbrains.rd.framework.base.RdBindableBaseKt.withId(RdBindableBase, RdId)` method removed
: Due to `RdId` becoming a value class, the `getId` method is removed at runtime, causing unresolved method invocations. Use `withId(RdBindableBase, long)` method in Java and recompile the Kotlin code.

### Properties Plugin 2024.1

Added method parameter `Property` to `com.intellij.lang.properties.PropertiesQuickFixFactory.createRemovePropertyLocalFix()`
: Supply the property that the fix should be applied for.
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Incompatible Changes in IntelliJ Platform and Plugins API 2025.*

<!--
Before documenting a breaking API change, please make sure that the change cannot be avoided in an alternative way.

APIs marked with @Deprecated(forRemoval=true), @ApiStatus.Experimental, @ApiStatus.Internal/IntellijInternalApi, or @ApiStatus.ScheduledForRemoval don't need to be documented.

To document a new incompatible change, add a new line with the problem pattern followed by a 2nd line with ": "-prefixed human-readable description
and recommended fix/action (REQUIRED, please write full sentence ending with '.', see existing entries as reference).
Non-platform changes must be grouped under relevant section for plugin.

The following problem patterns are supported and must be followed EXACTLY (e.g., no '#' instead of '.'):

<package name> package removed

<class name> class removed
<class name> class renamed to <new class name>
<class name> class moved to package <package name>

<class name>.<method name>(<human-readable parameters>) marked abstract
<class name>.<method name>(<human-readable parameters>) abstract method added
<class name>.<method name>(<human-readable parameters>) method removed
<class name>.<method name>(<human-readable parameters>) method moved to the superclass
<class name>.<method name>(<human-readable parameters>) method return type changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method visibility changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method marked final
<class name>.<method name>(<human-readable parameters>) method parameter <type> removed
<class name>.<method name>(<human-readable parameters>) method parameter type changed from <before> to <after>
<class name>.<method name> method <parameter name> parameter marked @<class name>
<class name> (class|interface) now (extends|implements) <class name> and inherits its final method <method name>(<human-readable parameters>)?
<class name> (class|interface) now (extends|implements) <class name> and inherits its abstract method <method name>(<human-readable parameters>)?
<class name> class now interface

<class name>(<human-readable parameters>) constructor removed
<class name>(<human-readable parameters>) constructor parameter <type> removed
<class name>(<human-readable parameters>) constructor parameter type changed from <before> to <after>
<class name>(<human-readable parameters>) constructor visibility changed from <before> to <after>

<class name>.<field name> field removed
<class name>.<field name> field moved to the superclass
<class name>.<field name> field type changed from <before> to <after>
<class name>.<field name> field visibility changed from <before> to <after>

<property name> property removed from resource bundle <bundle name>

Where the placeholders must be enclosed in code quotes (`name`):

<class name> is a fully-qualified name of the class, e.g. `com.intellij.openapi.actionSystem.AnAction$InnerClass`.
<method name> is the exact method's name. Note that constructors have dedicated patterns.
<human-readable parameters> is a string representing parameters, which are not necessarily fully qualified. They do not affect the parser. For example, instead of (java.lang.Object, java.util.List, int) you are free to write (Object, List<String>, int)
<parameter name> is exact name of the method's parameter
<property name> is a full name of a property from .properties file, like `some.action.description`
<bundle name> is a fully qualified name of the property bundle, which includes its package, like `message.IdeBundle`

NOTE: If a code change you're trying to document doesn't match any of the above patterns, please ask in #plugins-verifier

NOTE: You are allowed to prettify the pattern using links: [`org.example.Foo`](https://github.com/JetBrains/intellij-community/tree/master/)

NOTE: Entries not starting with code quotes (`name`) can be added to document non-code changes and will be skipped in API verification.
-->

<link-summary>List of known Breaking API Changes in 2025.*</link-summary>

<include from="snippets.md" element-id="apiChangesHeader"/>

<include from="snippets.md" element-id="apiChangesJavaVersion"/>

<include from="snippets.md" element-id="gradlePluginVersion"/>

## 2025.1

### IntelliJ Platform 2025.1


### Kotlin Plugin 2025.1

`org.jetbrains.kotlin.KtFakeSourceElement` class renamed to `org.jetbrains.kotlin.KtFakePsiSourceElement`
: Update code usages.
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Internal API Migration

<link-summary>Lists private API annotated with @ApiStatus.Internal/@IntellijInternalApi and corresponding replacement.</link-summary>

This page lists commonly used API annotated with [`@ApiStatus.Internal`](%gh-java-annotations%/common/src/main/java/org/jetbrains/annotations/ApiStatus.java)
or [`@IntellijInternalApi`](%gh-ic%/platform/util/src/com/intellij/openapi/util/IntellijInternalApi.kt)
which indicates it is _private API_ and must not be used outside of IntelliJ Platform itself:

> Indicates that the annotated element (class, method, field, etc.) **must not be considered as a public API**. It's made visible to allow
> usages in other packages of the declaring library, but it **must not be used outside of that library**. Such elements
> may be renamed, changed, or removed in future versions.
>
{title="ApiStatus.Internal Javadoc"}

Such violations are reported from [](verifying_plugin_compatibility.md#plugin-verifier) and are highlighted in the IDE using [dedicated inspection](verifying_plugin_compatibility.md#ide-support).

Each entry is mapped to its corresponding _Replacement_, pointing to the recommended API.

<snippet id="notComplete">

> The lists are not complete and will be updated continuously. Please check corresponding code documentation when encountering any API not listed on this page.
>
> In some cases, such documentation might not be available inside the IDE for the current target platform version. Please use <control>Go to file</control> to browse the latest version in the [intellij-community](https://github.com/jetbrains/intellij-community) GitHub repository instead.
>
> Please use the feedback form at the bottom of this page if you encounter missing or unclear information.
>
{style="note"}

</snippet>

## IntelliJ Platform

| Internal API                             | Replacement                                                                                                                                                                 |
|------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `AnAction.applyTextOverride()`           | [](plugin_configuration_file.md#idea-plugin__actions__action__override-text)                                                                                       |
| `ApplicationLoadListener`                | See [](plugin_components.md#application-startup)                                                                                                                            |
| `BuildNumber.currentVersion()`           | Use `ApplicationInfo.getBuild()`                                                                                                                                            |
| `CompactVirtualFileSet`                  | Use `VfsUtilCore.createCompactVirtualFileSet()`                                                                                                                             |
| `DefaultPicoContainer`                   | Use [extension points](plugin_extensions.md) and [services](plugin_services.md)                                                                                             |
| `EdtDataContext`                         | [See Doc](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/actionSystem/impl/EdtDataContext.kt)                                                                      |
| `ExperimentalUI.isNewUI()`               | Use [`NewUI.isEnabled()`](%gh-ic%/platform/platform-api/src/com/intellij/ui/NewUI.java)                                                                                     |
| `FileTypeIndex.NAME`                     | Use static methods in `FileTypeIndex` directly                                                                                                                              |
| `IElementType.getDebugName()`            | Override/use `IElementType.toString()`                                                                                                                                      |
| `IconLoader.CachedImageIcon`             | Use methods exposed in `IconLoader`                                                                                                                                         |
| `IconLoader.LazyIcon`                    | Use `IconLoader.createLazy()`                                                                                                                                               |
| `IndexingDataKeys`                       | [See Doc](%gh-ic%/platform/core-impl/src/com/intellij/util/indexing/IndexingDataKeys.java)                                                                                  |
| `Module.getModuleFile()`                 | [See Doc](%gh-ic%/platform/core-api/src/com/intellij/openapi/module/Module.java)                                                                                            |
| `Module.getModuleFilePath()`             | [See Doc](%gh-ic%/platform/core-api/src/com/intellij/openapi/module/Module.java)                                                                                            |
| `Module.getModuleTypeName()`             | [See Doc](%gh-ic%/platform/core-api/src/com/intellij/openapi/module/Module.java)                                                                                            |
| `ModuleTypeManager.registerModuleType()` | Use `com.intellij.moduleType` extension point instead, [`ModuleType`](%gh-ic%/platform/lang-core/src/com/intellij/openapi/module/ModuleType.java)                           |
| `PathMacros.setMacro()`                  | Use `com.intellij.pathMacroContributor` extension point, [`PathMacroContributor`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/PathMacroContributor.java) |
| `PlatformUtils`                          | [See Doc](%gh-ic%/platform/core-api/src/com/intellij/util/PlatformUtils.java)                                                                                               |
| `PluginClassLoader`                      | Cast to [`PluginAwareClassLoader`](%gh-ic%/platform/extensions/src/com/intellij/ide/plugins/cl/PluginAwareClassLoader.java)                                                 |
| `PluginManager.getLogger()`              | Use own logger, see [](ide_infrastructure.md#logging)                                                                                                                       |
| `PreloadingActivity`                     | Use `StartupActivity.Background` ([docs](plugin_components.md#project-open)) with atomic flag to run only once during IDE lifetime                                          |
| `ProjectLibraryTable`                    | Use `LibraryTablesRegistrar.getLibraryTable()`                                                                                                                              |
| `SVGLoader`                              | Use `ImageLoader.loadFromResource()`                                                                                                                                        |
| `ScrollBarPainter`                       | [See Doc](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/ScrollBarPainter.java)                                                                               |
| `UtilKt.targetPresentation()`            | [See Doc](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/navigation/util.kt)                                                                                       |

## Plugins

### Database Plugin

| Internal API                 | Replacement                                                                                                                                   |
|------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| `DbDataSource.getDelegate()` | For connection config use `DbDataSource.getConnectionConfig()`, for `LocalDataSource` use `DbImplUtil.getMaybeLocalDataSource(DasDataSource)` |

## Exceptions

The API listed in this table is currently (or was previously) marked with `@ApiStatus.Internal`, but its status has changed in the meantime (or will change).
Therefore, any reported violations can be disregarded.

| Internal API                                                                                                                                         | Note                                            |
|------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
| [`AnAction.setShortcutSet()`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnAction.java)                                    | Made public in 2023.3                           |
| [`AnimatedIcon.ANIMATION_IN_RENDERER_ALLOWED`](%gh-ic%/platform/ide-core/src/com/intellij/ui/AnimatedIcon.java)                                      | Made public in 2021.3                           |
| [`BaseExpirableExecutor.expireWith()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/BaseExpirableExecutor.java)                    | Made public in 2023.2                           |
| [`BundleBase`](%gh-ic%/platform/util/src/com/intellij/BundleBase.kt)                                                                                 | Made public in 2022.1                           |
| [`CodeVisionPlaceholderCollector`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/codeVision/CodeVisionPlaceholderCollector.kt)             | Made public in 2024.2                           |
| [`IdFilter`](%gh-ic%/platform/indexing-api/src/com/intellij/util/indexing/IdFilter.java)                                                             | Made public in 2021.2/3                         |
| [`HashingStrategy`](%gh-ic%/platform/util/base/src/com/intellij/util/containers/HashingStrategy.java)                                                | Made public in 2023.1                           |
| [`JsonCustomStructureViewFactory`](%gh-ic%/json/src/com/intellij/json/structureView/JsonCustomStructureViewFactory.java)                             | Made public in 2023.2                           |
| [`RunAnythingCommandLineProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/runAnything/activity/RunAnythingCommandLineProvider.kt)   | Made public in 2021.3                           |
| [`SearchEverywhereFoundElementInfo`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/searcheverywhere/SearchEverywhereFoundElementInfo.java) | Made public in 2023.3                           |
| `PhpExpectedFunctionArgument`                                                                                                                        | Made public in 2022.1                           |
| `org.jetbrains.yaml.meta.*`                                                                                                                          | YAML Metadata API will be made public in 2023.1 |

<include from="api_internal.md" element-id="notComplete"/>
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Notable Changes and Features in IntelliJ Platform and Plugins API

<link-summary>List of Notable API Changes by version</link-summary>

The following pages list notable changes and new features in IDE releases.

Plugin authors are encouraged to verify their compatible releases and take advantage of the latest API additions.

<include from="snippets.md" element-id="subscribeNews"/>

* [Changes in 2025.*](api_notable_list_2025.md)
* [Changes in 2024.*](api_notable_list_2024.md)
* [Changes in 2023.*](api_notable_list_2023.md)
* [Changes in 2022.*](api_notable_list_2022.md)
* [Changes in 2021.*](api_notable_list_2021.md)
* [Changes in 2020.*](api_notable_list_2020.md)
* [Changes in 2019.*](api_notable_list_2019.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Notable Changes in IntelliJ Platform and Plugins API 2019.*

<link-summary>List of known Notable API Changes in 2019.*</link-summary>

## 2019.3

### IntelliJ Platform 2019.3

`PlatformTestCase` renamed to `HeavyPlatformTestCase`
: Now reflects its "heavy test" characteristics (see [Light and Heavy Tests](light_and_heavy_tests.md)).

Support for transitive optional plugin dependencies
: [Optional <path>plugin.xml</path> configuration files](plugin_configuration_file.md#additional-plugin-configuration-files) can now specify [`<depends>`](plugin_configuration_file.md#idea-plugin__depends). [Issue](https://youtrack.jetbrains.com/issue/IDEA-209769)

Theme/Keymap plugins do not require restart
: (Un)Installing or enabling/disabling [Theme](themes_getting_started.md) or [Keymap](https://plugins.jetbrains.com/search?tags=Keymap) plugins doesn't require an IDE restart anymore.

Run task once (per project)
: Use `com.intellij.ide.util.RunOnceUtil` to run a task exactly once for application or per project.

Symbol completion in plain text editor (VCS Commit Message)
: Contribute symbol names (classes, methods, ..) via `com.intellij.completion.plainTextSymbol` extension point (`com.intellij.codeInsight.completion.PlainTextSymbolCompletionContributor`).

User-customizable date/time formatting
: Use `com.intellij.util.text.JBDateFormat#getFormatter()` to use configured format from <ui-path>Settings | Appearance & Behavior | System Settings | Date Formats</ui-path>.

### IntelliJ IDEA 2019.3

Unbundled plugins
: Several plugins (Heroku integration, RubyMotion support, Java Applets Support) for no longer actively maintained technology have been moved to a [separate repository](https://github.com/JetBrains/intellij-obsolete-plugins/).
If your plugin depends on them, users will need to install them from the [JetBrains Marketplace](https://plugins.jetbrains.com).

## 2019.2

### IntelliJ Platform 2019.2

Quickfixes for file-level notifications
: Consistent with other quickfixes, the menu now shows names of fixes, not names of problems themselves. [Issue](https://youtrack.jetbrains.com/issue/IDEA-216731)

Create HTML representation of code
: Use `com.intellij.openapi.editor.richcopy.HtmlSyntaxInfoUtil` to create Lexer-based highlighted code samples, e.g., for usage in documentation.

<ui-path>View | Appearance | Details in Tree Views</ui-path>
: Toggles showing additional details in UI (e.g. modification timestamp in Project View) see `UISettings.getShowInplaceComments()`.

New API for Editor Inlay Hints
: Allows a variety of presentations (incl. custom painting), mouse event handling, and exposing settings in <ui-path>Settings | Editor | Inlay Hints</ui-path>. See `com.intellij.codeInsight.hints.InlayHintsProvider`.

`com.intellij.openapi.vfs.AsyncFileListener`
: A non-blocking variant for `com.intellij.openapi.vfs.newvfs.BulkFileListener`.

`com.intellij.openapi.util.ColoredItem`
: Provides background color in all Trees, Lists and ComboBoxes.

`com.intellij.openapi.startup.StartupActivity` background variant
: Use new dedicated `com.intellij.backgroundPostStartupActivity` extension point (see Javadoc for `StartupActivity#BACKGROUND_POST_STARTUP_ACTIVITY`).

`com.intellij.codeHighlighting.TextEditorHighlightingPassFactory` registration
: Use new dedicated `com.intellij.highlightingPassFactory` extension point.

`com.intellij.openapi.fileTypes.FileTypeFactory` deprecated
: When registering a file type via file extension, pattern or exact file name matching, use `com.intellij.fileType` extension point instead (see [Sample](language_and_filetype.md#register-the-file-type)).

`@org.jetbrains.annotations.ApiStatus.NonExtendable`
: Indicates that the annotated API class, interface, or method must not get extended, implemented, or overridden by external plugins but can only be obtained or instantiated for classes and interfaces, or called for methods.

`@org.jetbrains.annotations.ApiStatus.OverrideOnly`
: Indicates that the annotated method is part of SPI (Service Provider Interface), which is intended to be only implemented or overridden but never called by external plugins.

`com.intellij.util.Query.forEach`
: Defaults to thread-safe to prevent problems with clients using unsynchronized collections.

`com.intellij.openapi.projectRoots.SdkType#getInvalidHomeMessage`
: Returns dedicated message when invalid SDK path was chosen (e.g., JRE instead of JDK).

### IntelliJ IDEA 2019.2

Java functionality extracted as a plugin
: If your plugin depends on Java, it must be specified now; see [](plugin_compatibility.md#java) for details.

Unbundled plugins
: Several plugins (J2ME, JsTestDriver, Struts 1.x) for no longer actively maintained technology have been moved to a [separate repository](https://github.com/JetBrains/intellij-obsolete-plugins/). If your plugin depends on them, users will need to install them from the [JetBrains Marketplace](https://plugins.jetbrains.com).

## 2019.1

### IntelliJ Platform 2019.1

`com.intellij.testFramework.InspectionTestCase` changed to light test
: Use dedicated `ProjectDescriptor` or rollback project setup changes in `tearDown()` (see [Light and Heavy Tests](light_and_heavy_tests.md)).

`@org.jetbrains.annotations.ApiStatus.AvailableSince`
: External annotations for the IntelliJ Platform are generated and attached to plugin projects automatically (replacing `@since` Javadoc).

`@org.jetbrains.annotations.ApiStatus.ScheduledForRemoval`
: External annotations for the IntelliJ Platform are generated and attached to plugin projects automatically. This allows highlighting of API, which has been removed in newer platform versions.

`@org.jetbrains.annotations.ApiStatus.Internal`
: Indicates that the annotated element must not be considered as a public API. Do not use outside of the IntelliJ Platform, see [](api_internal.md).

`PsiReferenceProvider` assert underlying element
: Assert references are created for the given underlying `PsiElement`. [Issue](https://youtrack.jetbrains.com/issue/IDEA-203954)

`CachedValue` more strict assertions
: Enabled in tests and EAP/internal mode, see [`CachedValueStabilityChecker`](%gh-ic%/platform/core-impl/src/com/intellij/util/CachedValueStabilityChecker.java) Javadoc.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Notable Changes in IntelliJ Platform and Plugins API 2020.*

<link-summary>List of known Notable API Changes in 2020.*</link-summary>

We've published our roadmap for the IntelliJ Platform for 2020: [Part I](https://blog.jetbrains.com/idea/2019/12/intellij-platform-roadmap-for-2020/) [Part II](https://blog.jetbrains.com/idea/2020/01/intellij-based-ide-features-roadmap-for-2020/)

## 2020.3

### IntelliJ Platform 2020.3

IntelliJ Platform migrated to Java 11
: Using Java 11 is now required, please see [blog post](https://blog.jetbrains.com/platform/2020/09/intellij-project-migrates-to-java-11/).

Internal changes in Project Model
: Internal changes related to a significant redesign of the representation of project models have been made, please see [blog post](https://blog.jetbrains.com/platform/2020/10/new-implementation-of-project-model-interfaces-in-2020-3/) for details. This shouldn't affect any plugins using the IntelliJ API properly and which don't access internal classes.

Reparsing of `IReparseableLeafElementType`
: For elements whose `IElementType` implements this interface, platform attempts reparse when a modification is made right before or after the leaf element preventing reparsing the whole file.

Generating HTML fragments
: Use [`HtmlBuilder`](%gh-ic%/platform/util/src/com/intellij/openapi/util/text/HtmlBuilder.java) for generating formatted content, e.g., for [Documentation](documentation.md).

Extensible HTML Lexer/Parser
: Implement [`HtmlEmbeddedContentSupport`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/html/embedding/HtmlEmbeddedContentSupport.kt) and register in `com.intellij.html.embeddedContentSupport` extension point to embed arbitrary tokens into any tag or attribute.
Please note that old API from `com.intellij.lexer.BaseHtmlLexer` is no longer working.

Action System
: New features in [Action System](basic_action_system.md): `<override-text>` works now for [`<group>`](plugin_configuration_file.md#idea-plugin__actions__group) as well, [`<synonym>`](plugin_configuration_file.md#idea-plugin__actions__action__synonym) provides alternative names when searching for actions, and groups can be excluded from search results.

Welcome Screen customization
: To provide additional custom tabs, implement [`WelcomeTabFactory`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/WelcomeTabFactory.java) and register in `com.intellij.welcomeTabFactory` extension point.

File Type association with the IDE
: To control file type association with the IDE in the operating system, implement [`OSFileIdeAssociation`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileTypes/OSFileIdeAssociation.java).

Reader Mode customization
: Implement [`ReaderModeProvider`](%gh-ic%/platform/editor-ui-api/src/com/intellij/codeInsight/actions/ReaderModeProvider.kt) and register in `com.intellij.readerModeProvider` extension point to apply custom settings for files rendered in reader mode. Provide `com.intellij.codeInsight.actions.ReaderModeMatcher` to disable Reader Mode for particular set of files.

Text Editor customization
: Implement [`TextEditorCustomizer`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/fileEditor/impl/text/TextEditorCustomizer.kt) and register in `com.intellij.textEditorCustomizer` extension point to customize created editors.

### JavaScript Plugin 2020.3

Published Javascript Testframework
: This allows using existing test base classes, see [WebStorm Plugin Development](webstorm.md#javascript-test-framework) page for details.

### CLion/AppCode 2020.3

Required changes in project setup
: When targeting 2020.3, please see this [migration guide](https://blog.jetbrains.com/clion/2020/12/migration-guide-for-plugins-2020-3/).


## 2020.2

### IntelliJ Platform 2020.2

Constructor Injection in `Configurable` forbidden
: Please obtain necessary components only when needed (logged as ERROR now).

`VirtualFile` lookup via `Path`
: Added `VirtualFileManager.findFileByNioPath()`/`refreshAndFindFileByNioPath()`. See also `VirtualFile.toNioPath()`.

Tooltip descriptions for icons
: Register resource bundle via `com.intellij.iconDescriptionBundle` extension point to provide tooltips automatically for all [`SimpleColoredComponent`](%gh-ic%/platform/platform-api/src/com/intellij/ui/SimpleColoredComponent.java) renderers.

Specify incompatibility with Module
: A plugin can [mark itself incompatible](plugin_compatibility.md#declaring-incompatibility-with-module) if IDE contains specified module.

`com.intellij.openapi.editor.markup.MarkupModel` methods using `TextAttributesKey`
: To support on-the-fly Editor color scheme switching, change calls from methods taking `TextAttributes`.

Support for WebP images
: The platform now bundles support for images in [WebP](https://en.wikipedia.org/wiki/WebP) format.

FileType mapping via hashbang (`#!`)
: Specify `hashBangs` attribute in `com.intellij.fileType` extension point. [Issue](https://youtrack.jetbrains.com/issue/IDEA-175757)

Add information to About dialog
: Implement [`AboutPopupDescriptionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/AboutPopupDescriptionProvider.kt) and register in `com.intellij.aboutPopupDescriptionProvider` extension point.

Previewing Intention/Quick Fix
: To support preview in intention popup, suitable [`FileModifier`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/FileModifier.java) must be provided (default implementation `FileModifier.getFileModifierForPreview()` works for most cases).

Delegate Run Anything/Terminal commands to IDE features
: Switch to matching IDE feature by implementing [`TerminalShellCommandHandler`](%gh-ic%/platform/execution-impl/src/com/intellij/terminal/TerminalShellCommandHandler.kt) (`com.intellij.terminal.shellCommandHandler` extension point). [Blog post](https://blog.jetbrains.com/idea/2020/07/run-ide-features-from-the-terminal/)

Deprecating JavaFX in favor of JCEF
: We recommend switching to [JCEF](embedded_browser_jcef.md), please see [blog post](https://blog.jetbrains.com/platform/2020/07/javafx-and-jcef-in-the-intellij-platform/) for details.

ASM Library 8.0.1
: Updated from 7.0.1.

Validating Lexer for editor highlighting
: Lexer is wrapped using [`ValidatingLexerWrapper`](%gh-ic%/platform/editor-ui-ex/src/com/intellij/openapi/editor/ex/util/ValidatingLexerWrapper.java) to verify it generates a continuous sequence of tokens and doesn't stall during iteration.

### IntelliJ IDEA 2020.2

Unbundled plugins
: Several plugins (ASP, CFML, Flash/Flex, GWT, JBoss Seam Pageflow, JBoss Seam, JBoss jBPM, OSGi, Play Framework, Resin, Seam Navigation, Tapestry, Virgo/dmServer) for no longer actively maintained technology have been unbundled. If your plugin depends on them, users will need to install them from the [JetBrains Marketplace](https://plugins.jetbrains.com).

## 2020.1

### IntelliJ Platform 2020.1

Dynamic Plugins
: [Compatible plugins](dynamic_plugins.md) can be installed, updated and uninstalled without requiring IDE restart.

[`com.intellij.openapi.application.TransactionGuard`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/TransactionGuard.java) deprecated
: Usage is deprecated and can be replaced with `com.intellij.openapi.application.Application.invokeLater()` in most cases, please consult Javadoc for more details.

`RecursionManager.assertOnMissedCache()` enabled by default in tests
: Please see [`RecursionManager.CachingPreventedException`](%gh-ic%/platform/util/src/com/intellij/openapi/util/RecursionManager.java) Javadoc and [this issue](https://youtrack.jetbrains.com/issue/IDEA-228809) for details.

`ResolveCache` using `IdempotenceChecker` in tests
: Reports when the same reference resolves non-equivalent results in different threads, see [`IdempotenceChecker`](%gh-ic%/platform/core-impl/src/com/intellij/util/IdempotenceChecker.java).

Refactoring dialog: builtin "Open in editor" option
: Set `addOpenInEditorCheckbox` constructor parameter to enable it in custom `RefactoringDialog` implementation.

Configurable status bar widgets
: Use `com.intellij.statusBarWidgetFactory` extension point to provide widgets that can be disabled or reordered, see [](status_bar_widgets.md).

JCEF Support (_Experimental Feature_)
: Allows [embedding](embedded_browser_jcef.md) Chromium-based browser in the IDE.

Override text presentation for actions depending on menu context
: Set the [`<override-text>`](plugin_configuration_file.md#idea-plugin__actions__action__override-text) element within the [`<action>`](plugin_configuration_file.md#idea-plugin__actions__action) declaration in <path>[plugin.xml](plugin_configuration_file.md)</path>.

Changes in Project Open/Import
: **Import from Existing Sources** has been removed from the Welcome Screen, leaving only **Open or Import**, which calls a different extension than the one previously used to contribute a wizard step to **Import from Existing Sources** (which is still available in the <control>File</control> menu). To support **Open or Import**, a plugin must provide [`ProjectOpenProcessor`](%gh-ic%/platform/platform-api/src/com/intellij/projectImport/ProjectOpenProcessor.kt).
`ProjectOpenProcessor.canOpenProject()` should return `true` for the folder selected by the user only if it guarantees `doOpenProject()` can handle it. If there are several matching processors, a simple chooser dialog is shown. If additional manual configuration is necessary, a modal dialog can be shown in `doOpenProject()` - however, it is highly recommended performing all setup automatically (like Maven and Gradle plugins do).

### IntelliJ IDEA 2020.1

EOL for JetBrains TFS Plugin
: Please use [Azure DevOps](https://plugins.jetbrains.com/plugin/7981-azure-devops) plugin instead, see [blog post](https://blog.jetbrains.com/idea/2020/01/end-of-support-for-tfs-2014-and-older/) for more details.

Unbundled plugins
: Several plugins (Cloud Foundry, Google App Engine) for no longer actively maintained technology have been unbundled. If your plugin depends on them, users will need to install them from the [JetBrains Marketplace](https://plugins.jetbrains.com).
# Notable Changes in IntelliJ Platform and Plugins API 2021.*

<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

<link-summary>List of known Notable API Changes in 2021.*</link-summary>

_Early Access Program_ (EAP) releases of upcoming versions are available [here](https://eap.jetbrains.com).

## 2021.3

### IntelliJ Platform 2021.3

External code formatter tools API
: Allows integration of standalone tools like `shfmt`: [](code_formatting.md#external-code-formatter).

Simplified API for `CustomComponentAction`
: Use new method [`CustomComponentAction.updateCustomComponent(Component, Presentation)`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/ex/CustomComponentAction.java) to synchronize given Presentation and component state.

Highlighting API exposes priority range
: Use `getPriorityRange()` in [`AnnotationSession`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/annotation/AnnotationSession.java)/[`LocalInspectionToolSession`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/LocalInspectionToolSession.java) to optimize highlighting for coarse-grained files (e.g., `PsiPlainTextFile` files with single node).

## 2021.2

### IntelliJ Platform 2021.2

Unit test mode: non-production `IconManager`
: Now `com.intellij.ui.IconManager.createDeferredIcon()` doesn't use `iconProducer` which might result in "wrong" composite icons and failed assertions. Override `UsefulTestCase.isIconRequired()` returning `true` to restore production icons. Alternatively, invoke `Registry.get("psi.deferIconLoading").setValue(false)` in `setUp()` and `Registry.get("psi.deferIconLoading").resetToDefault()` in `tearDown()`.

Constructor Injection disabled for Extensions
: Please obtain necessary components only when needed (logged as ERROR now).

Language Injection
: Use [`LanguageInjectionContributor`](%gh-ic%/platform/core-api/src/com/intellij/lang/injection/general/LanguageInjectionContributor.java) (`com.intellij.languageInjectionContributor` EP) and [`LanguageInjectionPerformer`](%gh-ic%/platform/core-api/src/com/intellij/lang/injection/general/LanguageInjectionPerformer.java) (`com.intellij.languageInjectionPerformer` EP) to customize [language injection](language_injection.md#languageinjectioncontributor-and-languageinjectionperformer).

### IntelliJ IDEA 2021.2

Unbundled plugins
: Several plugins (Arquillian, AspectJ, CoffeeScript, Debugger Support for JSP (JSR45), Drools, Guice, Helidon, Java EE: Enterprise Java Beans (EJB), Spring OSGi, Spring Web Flow) have been unbundled. The IDE will suggest installation if the project contains related framework dependency. If your plugin depends on them, users will need to install them from the [JetBrains Marketplace](https://plugins.jetbrains.com).

## 2021.1

### IntelliJ Platform 2021.1

_Add unambiguous imports on the fly_ for custom languages
: Override [`ReferenceImporter#isAddUnambiguousImportsOnTheFlyEnabled()`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/daemon/ReferenceImporter.java) and provide corresponding user setting. Implement `HintAction` with `fixSilently()` and hook it up to highlighting as a quick fix for unresolved reference.

Ability to override encoding per `VirtualFile`
: Implement [`FileEncodingProvider`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/encoding/FileEncodingProvider.java) and register in `com.intellij.fileEncodingProvider` extension point.

[JCEF](embedded_browser_jcef.md): wrapper for `CefBrowser`
: [`JBCefOsrHandlerBrowser`](%gh-ic%/platform/ui.jcef/jcef/JBCefOsrHandlerBrowser.java) forwards to custom `CefRenderHandler`, e.g., for off-screen rendering.

### Java Plugin 2021.1

Testframework: JUnit4 variant for `LightJavaCodeInsightFixtureTestCase`
: Use [`LightJavaCodeInsightFixtureTestCase4`](%gh-ic%/java/testFramework/src/com/intellij/testFramework/fixtures/LightJavaCodeInsightFixtureTestCase4.kt).
# Notable Changes in IntelliJ Platform and Plugins API 2022.*

<!-- Copyright 2000-2023 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

<link-summary>List of known Notable API Changes in 2022.*</link-summary>

_Early Access Program_ (EAP) releases of upcoming versions are available [here](https://eap.jetbrains.com).

## 2022.3

<include from="snippets.md" element-id="gradlePluginVersion"/>

### IntelliJ Platform 2022.3

Display of previews for Intentions and Quick Fixes
: Intentions and Quick Fix actions now display a preview for the code changes. Read [this article](code_intentions_preview.md) to learn more about this feature.

Specify language for Intention
: Specify `<language>` in `com.intellij.intentionAction` EP registration to avoid instantiating language-specific intentions in non-relevant places.

"Heavy" Brace Matching
: Alternative extension point to implement [](additional_minor_features.md#brace-matching) in background thread.

Injection Text Formatting
: Delegation of formatting can be controlled using dedicated [extension point](language_injection.md#formatting).

Specifying Threading for Actions
: Implementations of `AnAction` need to override `getActionUpdateThread()` as detailed in [](basic_action_system.md#principal-implementation-overrides).

Threading assertions in tests
: All rules for [threading](threading_model.md) are now checked in tests as well.

Mapping New UI icons
: See [](icons.md#new-ui-icons) on how to provide additional icons.

### IntelliJ IDEA 2022.3

Unbundled plugins
: Several plugins (Haml, Jakarta EE: WebSockets, JBoss Seam, Spring WebSocket, Stylus, Tapestry, Vaadin, ZKM-Unscramble) have been unbundled. The IDE will suggest installation if the project contains related framework dependency. If your plugin depends on them, users will need to install them from the [JetBrains Marketplace](https://plugins.jetbrains.com).

## 2022.2

### IntelliJ Platform 2022.2

Highlighting References
: Highlight references automatically via [](references_and_resolve.md#additional-highlighting).

## 2022.1

### IntelliJ Platform 2022.1

New Project Wizard
: The <control>New Project</control> wizard has been refreshed and some base [`ModuleBuilder`](%gh-ic%/platform/lang-core/src/com/intellij/ide/util/projectWizard/ModuleBuilder.java) classes return `false` from the `isAvailable()` method. If your module builder extends a base class and is hidden in the 2022.1 wizard, override the method to return `true`.

External System Test Framework
: Available as `com.jetbrains.intellij.platform:external-system-test-framework` from [](intellij_artifacts.md), see [](external_system_integration.md#testing).

### IntelliJ IDEA 2022.1

Unbundled plugins
: Several plugins (Grails, Jakarta EE: Batch Applications, Jakarta EE: Server Faces (JSF), Jakarta EE: Web Services (JAX-WS), Jetty, Smali Support, Spring Batch, Spring Integration Patterns, Spring Web Services, WebLogic, WebSphere) have been unbundled. The IDE will suggest installation if the project contains related framework dependency. If your plugin depends on them, users will need to install them from the [JetBrains Marketplace](https://plugins.jetbrains.com).

### Maven Plugin 2022.1

Published Maven Test Framework
: Available as `com.jetbrains.intellij.maven:maven-test-framework` from [](intellij_artifacts.md), See also `TestFrameworkType.Plugin.Maven` test-framework available from [](tools_intellij_platform_gradle_plugin_types.md#TestFrameworkType-Plugin).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Notable Changes in IntelliJ Platform and Plugins API 2023.*

<link-summary>List of known Notable API Changes in 2023.*</link-summary>

_Early Access Program_ (EAP) releases of upcoming versions are available [here](https://eap.jetbrains.com).

<include from="snippets.md" element-id="gradlePluginVersion"/>

## 2023.3

### IntelliJ Platform 2023.3

Threading Model changes
: Please see updated [](threading_model.md).

External Annotators in Dumb Mode
: [](syntax_highlighting_and_error_highlighting.md#external-annotator) can now run in during indexing.

Local inspections performance
: Custom language plugins with many inspections should consider registering a default visitor to improve processing, see [](code_inspections_and_intentions.md#inspections-performance).

### IntelliJ IDEA 2023.3

Unbundled plugins
: Several plugins (Android, Ant, GlassFish, Plugin DevKit) have been unbundled. The IDE will suggest installation if the project contains related framework dependency. If your plugin depends on them, users will need to install them from the [JetBrains Marketplace](https://plugins.jetbrains.com).

## 2023.2

### IntelliJ Platform 2023.2

Language Server Protocol (LSP) API
: Provide custom language support by using language servers, see [](language_server_protocol.md).

Check presence of JVM library
: Use [dedicated API](psi_cookbook.md#how-do-i-check-the-presence-of-a-jvm-library) to check presence via class FQN or Maven coordinates.

Inspection description: code snippets highlighting
: Embedded code is shown with [syntax highlighting](code_inspections.md#code-snippets).

Intentions that cannot show meaningful before/after preview
: Intentions not modifying code can specify `<skipBeforeAfter>true</skipBeforeAfter>` in their registration.

JCEF-based SVG viewer
: SVG pictures are now shown using [JCEF](embedded_browser_jcef.md) instead of rendering via the Apache Batik library ([Details](https://youtrack.jetbrains.com/issue/IDEA-230850)).

### IntelliJ IDEA 2023.2

Unbundled plugins
: Several plugins (Play 1, Resin, Struts 2, tcServer) have been unbundled. The IDE will suggest installation if the project contains related framework dependency. If your plugin depends on them, users will need to install them from the [JetBrains Marketplace](https://plugins.jetbrains.com).

## 2023.1

API for quick documentation
: [](documentation.md) for custom languages is provided through the
[`DocumentationTarget`](%gh-ic%/platform/lang-impl/src/com/intellij/platform/backend/documentation/DocumentationTarget.kt)
API for versions 2023.1 or later.

### IntelliJ Platform 2023.1

Declarative Inspection Options
: [Code inspections](code_inspections.md) can provide additional options in a [declarative](inspection_options.md#declarative-inspection-options) way which has several benefits over the [UI-based](inspection_options.md#ui-based-inspection-options) approach.

Nested Index Access
: ~~Accessing index data in [nested calls](file_based_indexes.md#nested-index-access) is now possible.~~
**NOTE: Please do not use yet** This is known to cause problems under certain conditions, please watch this [issue](https://youtrack.jetbrains.com/issue/IJPL-265/Nested-index-lookups-still-leads-to-deadlocks).

File Type Index Topic
: [`FileTypeIndex.IndexChangeListener`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/FileTypeIndex.java) allows monitoring the addition/removal of files by `FileType`.

Run Annotator During Indexing
: [Annotators](syntax_highlighting_and_error_highlighting.md#annotator) can implement `DumbAware` to run during indexing (e.g., providing additional syntax highlighting).

Obsolete API Status
: Newly introduced `@ApiStatus.Obsolete` marks API that should not be used for new code, see [](verifying_plugin_compatibility.md#obsolete-api).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Notable Changes in IntelliJ Platform and Plugins API 2024.*

<link-summary>List of known Notable API Changes in 2024.*</link-summary>

_Early Access Program_ (EAP) releases of upcoming versions are available [here](https://eap.jetbrains.com).

<include from="snippets.md" element-id="gradlePluginVersion"/>

## 2024.3

### IntelliJ Platform 2024.3

Dumb-aware "Highlight Usages"
: [](additional_minor_features.md#semantic-highlight-usages) can be marked as [](indexing_and_psi_stubs.md#DumbAwareAPI).

`ParsingTestCase`: stable PSI check
: [`ParsingTestCase`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/ParsingTestCase.java) verifies that reparsing causes no changes (Parser bug).

Performance test classes and methods renamed to _Benchmark_
:
- [`PerformanceTestInfo`](%gh-ic-242%/platform/testFramework/src/com/intellij/testFramework/PerformanceTestInfo.java) has been renamed to [`BenchmarkTestInfo`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/BenchmarkTestInfo.java)
- [`PlatformTestUtil.newPerformanceTest*()`](%gh-ic-242%/platform/testFramework/src/com/intellij/testFramework/PlatformTestUtil.java) methods have been renamed to [`PlatformTestUtil.newBenchmark*()`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/PlatformTestUtil.java)

Testing: `Logger.error()` behaviour
: Does not throw during tests anymore, see [issue](https://youtrack.jetbrains.com/issue/IJPL-453) for details.

### IntelliJ IDEA 2024.3

Unbundled _Swing UI Designer_ Plugin
: [Install](https://plugins.jetbrains.com/plugin/25304-swing-ui-designer) from JetBrains Marketplace.
Consider using [](kotlin_ui_dsl_version_2.md) for forms instead.

## 2024.2

### IntelliJ Platform 2024.2

Dumb-aware intentions and quick-fixes
: Mark implementations as enabled during indexing, see [](indexing_and_psi_stubs.md#DumbAwareAPI).

Workspace Model API
: [](workspace_model.md) represents the project's structure and all its elements and replaces the existing [](project_model.md).

Testing: `ProjectActivity`
: Executed asynchronously now during tests, see [](testing_faq.md#how-to-handle-projectactivity).

Testing: indexes
: Indexes are now built asynchronously during tests, see [](testing_faq.md#how-to-handle-indexing).

`ToggleAction` in popups
: No longer closes popups, see [](basic_action_system.md#toggleActionPopupMenus)

### Kotlin Plugin

Depending on K1 API
: Plugins using K1 API classes must adjust their usages, see [Migrating Your IntelliJ IDEA Kotlin Plugin to K2 Mode](https://blog.jetbrains.com/platform/2024/09/migrating-your-kotlin-plugin-to-k2-mode/).

### PyCharm 2024.2

Project setup
: Note [changes in project setup](pycharm.md#python242) when targeting PyCharm Professional.

## 2024.1

### IntelliJ Platform 2024.1

Bundled Localization
: Initial plugin [localization](providing_translations.md#translated-elements) capabilities.

Using Coroutines
: It is now recommended to use [](kotlin_coroutines.md) for asynchronous code.

Running highlighting
: Highlighting is now performed more efficiently, please refer to [](syntax_highlighting_and_error_highlighting.md#order-of-running-highlighting).

Status bar widget for LSP servers
: Language plugins using LSP can now provide their status for [](language_server_protocol.md#status-bar-integration).

Cached Values and Dumb Mode
: Note change for [](psi_performance.md#projectRootManagerDependency).

Saving Settings on background thread
: Saving project/application [settings](settings.md) is no longer performed on [EDT](threading_model.md) to avoid freezes. [Issue](https://youtrack.jetbrains.com/issue/IJPL-127/Save-project-application-settings-on-background-thread)

### IntelliJ IDEA 2024.1

Unbundled plugins
: Several plugins (Cucumber Groovy, Cucumber Java) have been unbundled. The IDE will suggest installation if the project contains related framework dependency. If your plugin depends on them, users will need to install them from the [JetBrains Marketplace](https://plugins.jetbrains.com).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Notable Changes in IntelliJ Platform and Plugins API 2025.*

<link-summary>List of known Notable API Changes in 2025.*</link-summary>

_Early Access Program_ (EAP) releases of upcoming versions are available [here](https://eap.jetbrains.com).

<include from="snippets.md" element-id="gradlePluginVersion"/>

## 2025.1

### IntelliJ Platform 2025.1

[`ContainerUtil`](%gh-ic%/platform/util/src/com/intellij/util/containers/ContainerUtil.java) using unmodifiable collections
: Methods marked with [`@Unmodifiable`](%gh-java-annotations%/java8/src/main/java/org/jetbrains/annotations/Unmodifiable.java) now really return unmodifiable collections (only in [internal](enabling_internal.md)/test mode for now).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# AppCode Plugin Development

<primary-label ref="Deprecated"/>

<link-summary>Introduction to developing plugins for AppCode.</link-summary>

<var name="productID" value="objc"/>
<var name="marketplaceProductID" value="appcode"/>
<include from="snippets.md" element-id="jetbrainsIDE_TLDR"/>

Plugin projects targeting [AppCode](https://www.jetbrains.com/objc/) can be developed using IntelliJ IDEA with the [](tools_gradle_intellij_plugin.md).

<snippet id="appCodeSunset">

> With the release of AppCode 2022.3, we're sunsetting the product.
> Please see this [blog post](https://blog.jetbrains.com/appcode/2022/12/appcode-2022-3-release-and-end-of-sales-and-support/) for details.
>
{style="warning"}

</snippet>

## Configuring Plugin Projects Targeting AppCode

> When targeting 2020.3, please see this [migration guide](https://blog.jetbrains.com/clion/2020/12/migration-guide-for-plugins-2020-3/).
>
{style="warning"}

The Gradle configuration of AppCode plugin projects uses neither Product-Specific nor IntelliJ IDEA Attributes.
Instead, configure AppCode plugin projects to use the [`intellij.localPath`](tools_gradle_intellij_plugin.md#intellij-extension-localpath) attribute.

> AppCode plugin development requires installing AppCode locally.
>
{style="note"}

The table below summarizes the [](tools_gradle_intellij_plugin.md) attributes to set in the plugin project's Gradle build script.
Click on an entry in the table's *Attribute* column to go to the documentation about that attribute.

| `gradle-intellij-plugin` Attribute                                                   | Attribute Value                                                                                                                                                                                                              |
|--------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [`intellij.localPath`](tools_gradle_intellij_plugin.md#intellij-extension-localpath) | <p>Path to locally installed target version of AppCode. For example, for macOS:</p><p><path>/Users/\$USERNAME\$/Library/Application Support/JetBrains/Toolbox/apps/AppCode/ch-0/193.5662.55/AppCode.app/Contents</path>.</p> |
| [`runIde.ideDir`](tools_gradle_intellij_plugin.md#tasks-runide-idedir)               | <p>Path to locally installed target version of AppCode. For example, for macOS:</p><p><path>/Users/\$USERNAME\$/Library/Application Support/JetBrains/Toolbox/apps/AppCode/ch-0/193.5662.55/AppCode.app/Contents</path>.</p> |

The dependency on the AppCode APIs must be declared in the <path>[plugin.xml](plugin_configuration_file.md)</path> file.
As described in [Modules Specific to Functionality](plugin_compatibility.md#modules-specific-to-functionality) table, the [`<depends>`](plugin_configuration_file.md#idea-plugin__depends) tags must declare `com.intellij.modules.appcode` module dependency, or `com.intellij.appcode` plugin dependency for plugins targeting only versions 2020.3+.

## Available AppCode APIs

> See [](appcode_extension_point_list.md) for the complete list.
>
{style="note"}

Use the [Exploring APIs as a Consumer](plugin_compatibility.md#exploring-apis-as-a-consumer) process to identify the libraries in AppCode.
Test your plugin with any version of AppCode you wish to support.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<!-- NO LONGER UPDATED ====================================================== -->

# AppCode Extension Point and Listener List

<link-summary>Overview of Extension Points and Listeners for AppCode.</link-summary>

<tldr>

**Product-Specific Plugin Development**: [AppCode](app_code.md)

</tldr>

34 Extension Points and 6 Listeners for AppCode 2022.3

See [](intellij_platform_extension_point_list.md) for IntelliJ Platform.

<include from="app_code.md" element-id="appCodeSunset"/>

<include from="snippets.md" element-id="ep_list_legend"/>

## AppCode

### AppCode – Listeners


| Topic | Listener |
|-------|----------|
| [CocoaPodsUtils#GEM_TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cocoapods.CocoaPodsUtils.GemListener)  | `GemListener` |
| [CocoaPodsUtils#PODS_TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cocoapods.CocoaPodsUtils.PodsListener)  | `PodsListener` |
| [AMDeviceManager#DEVICE_LISTENER_TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.execution.deviceSupport.AMDeviceListener)  | `AMDeviceListener` |
| [XcodeProjectTestListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.xcode.model.XcodeProjectTestListener)  | `XcodeProjectTestListener` |
| [XcodeIsBrokenListener.Companion#XCODE_IS_BROKEN_TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.xcode.refresh.XcodeIsBrokenListener)  | `XcodeIsBrokenListener` |
| [SwiftPackageManagerSettingsListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.swift.swiftpm.SwiftPackageManagerSettingsListener)  | `SwiftPackageManagerSettingsListener` |


### AppCodeCorePlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [appcode.additionalRootsProvider](https://jb.gg/ipe?extensions=appcode.additionalRootsProvider) ![Non-Dynamic][non-dynamic] | `XcodeMetaDataAdditionalRootsProvider` |
| [appcode.attachDebuggerProvider](https://jb.gg/ipe?extensions=appcode.attachDebuggerProvider) ![Non-Dynamic][non-dynamic] | `AppCodeAttachDebuggerExtension` |
| [appcode.projectNameUpdateVeto](https://jb.gg/ipe?extensions=appcode.projectNameUpdateVeto) ![Non-Dynamic][non-dynamic] | `XcodeProjectNameUpdateVeto` |
| [appcode.projectRootNodeDelegateProvider](https://jb.gg/ipe?extensions=appcode.projectRootNodeDelegateProvider) ![Non-Dynamic][non-dynamic] | `AppCodeProjectRootNodeDelegateProvider` |
| [appcode.rootsInfoPostProcessor](https://jb.gg/ipe?extensions=appcode.rootsInfoPostProcessor) ![Non-Dynamic][non-dynamic] | `XcodeRootsInfoPostProcessor` |
| [appcode.runConfigurationExtension](https://jb.gg/ipe?extensions=appcode.runConfigurationExtension) ![Non-Dynamic][non-dynamic] | `AppCodeRunConfigurationExtension` |
| [appcode.xcodeExternalBuildProvider](https://jb.gg/ipe?extensions=appcode.xcodeExternalBuildProvider) ![Non-Dynamic][non-dynamic] | `XcodeExternalBuildProvider` |
| [appcode.xcodeTemplatePathsProvider](https://jb.gg/ipe?extensions=appcode.xcodeTemplatePathsProvider) ![Non-Dynamic][non-dynamic] | `XcodeTemplatePathsProvider` |
| [appcode.xcodeTemplatesProvider](https://jb.gg/ipe?extensions=appcode.xcodeTemplatesProvider) | `XcodeTemplatesProvider` |

### CocoaCommonPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [appcode.breakpointHandlersProvider](https://jb.gg/ipe?extensions=appcode.breakpointHandlersProvider) ![Non-Dynamic][non-dynamic] | `IPhoneBreakpointHandlersProvider` |
| [appcode.lldbInitializerProvider](https://jb.gg/ipe?extensions=appcode.lldbInitializerProvider) ![Non-Dynamic][non-dynamic] | `LLDBInitializerProvider` |
| [cidr.cocoa.xcodeProjectFileProvider](https://jb.gg/ipe?extensions=cidr.cocoa.xcodeProjectFileProvider) | `XcodeProjectFileProvider` |

### CocoaPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.cocoa.documentation.search.candidates.helper](https://jb.gg/ipe?extensions=cidr.cocoa.documentation.search.candidates.helper) | `XcodeDocumentationCandidateBasedSearchHelper` |
| [cidr.cocoa.documentation.search.usr.provider](https://jb.gg/ipe?extensions=cidr.cocoa.documentation.search.usr.provider) | `XcodeDocumentationUsrProvider` |

### SwiftLanguageInternalPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.lang.swiftTypeInheritorsSearch](https://jb.gg/ipe?extensions=cidr.lang.swiftTypeInheritorsSearch) ![Non-Dynamic][non-dynamic] | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [swift.lang.libraryModuleImportRestriction](https://jb.gg/ipe?extensions=swift.lang.libraryModuleImportRestriction) | `SwiftLibraryModuleImportRestriction` |
| [swift.sdkInfo.extractor](https://jb.gg/ipe?extensions=swift.sdkInfo.extractor) | `OCResolveConfigurationSdkInfoExtractor` |
| [swift.sourcekit.blacklistedModulesProvider](https://jb.gg/ipe?extensions=swift.sourcekit.blacklistedModulesProvider) ![Non-Dynamic][non-dynamic] | `SourceKitBlacklistedModulesProvider` |
| [swift.sourcekit.dependenciesLoader](https://jb.gg/ipe?extensions=swift.sourcekit.dependenciesLoader) | `SourceKitPlatformBinaryDependenciesLoader` |

### SwiftPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.lang.swiftCustomIncludePathProvider](https://jb.gg/ipe?extensions=cidr.lang.swiftCustomIncludePathProvider) ![Non-Dynamic][non-dynamic] | `SwiftCustomIncludePathProvider` |
| [cidr.lang.swiftSourceModuleProvider](https://jb.gg/ipe?extensions=cidr.lang.swiftSourceModuleProvider) ![Non-Dynamic][non-dynamic] | `SwiftSourceModuleProvider` |
| [swift.kotlinNative](https://jb.gg/ipe?extensions=swift.kotlinNative) ![Non-Dynamic][non-dynamic] | `KotlinNativeExtensionPoint` |
| [swift.lang.sourceKit.compileArgumentsCollector](https://jb.gg/ipe?extensions=swift.lang.sourceKit.compileArgumentsCollector) | `SwiftSourceKitCompileArgumentsCollector` |
| [swift.lang.sourceKit.dataGenerator](https://jb.gg/ipe?extensions=swift.lang.sourceKit.dataGenerator) ![Project-Level][project-level] | `SourceKitDataGenerator` |
| [swift.lang.sourceKit.declarationLocationValidator](https://jb.gg/ipe?extensions=swift.lang.sourceKit.declarationLocationValidator) | `SourceKitDeclarationLocationValidator` |
| [swift.lang.sourceKitFixExtension](https://jb.gg/ipe?extensions=swift.lang.sourceKitFixExtension) | `SwiftSourceKitFixExtension` |
| [swift.lang.swiftSupportProvider](https://jb.gg/ipe?extensions=swift.lang.swiftSupportProvider) | `SwiftSupportProvider` |

### SwiftPMCommon.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [swift.packageManager.appleSdk.filter](https://jb.gg/ipe?extensions=swift.packageManager.appleSdk.filter) | `SwiftPackageLoadedAppleSdkFilter` |
| [swift.packageManager.environmentConfigurator](https://jb.gg/ipe?extensions=swift.packageManager.environmentConfigurator) | `SwiftPackageManagerEnvironmentConfigurator` |
| [swift.packageManager.launcher](https://jb.gg/ipe?extensions=swift.packageManager.launcher) | `SwiftPackageManagerConfigurationLauncher` |
| [swift.packageManager.modulemapsCollector](https://jb.gg/ipe?extensions=swift.packageManager.modulemapsCollector) | `SwiftPackageModuleMapsCollector` |
| [swift.packageManager.systemModuleResolver](https://jb.gg/ipe?extensions=swift.packageManager.systemModuleResolver) | `SwiftPackageManagerSystemModuleResolver` |

### SwiftTestsExtension.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [test.cidr.OCCodeInsightDelegate](https://jb.gg/ipe?extensions=test.cidr.OCCodeInsightDelegate) ![Non-Dynamic][non-dynamic] | `OCCodeInsightDelegate` |

### XcodeModelCorePlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [xcode.pbxReferenceBuildSettingsProvider](https://jb.gg/ipe?extensions=xcode.pbxReferenceBuildSettingsProvider) ![Non-Dynamic][non-dynamic] | `PBXReferenceBuildSettingProvider` |

[deprecated]: https://img.shields.io/badge/-Deprecated-lightgrey?style=flat-square
[removal]: https://img.shields.io/badge/-Removal-red?style=flat-square
[obsolete]: https://img.shields.io/badge/-Obsolete-grey?style=flat-square
[experimental]: https://img.shields.io/badge/-Experimental-violet?style=flat-square
[internal]: https://img.shields.io/badge/-Internal-darkred?style=flat-square
[project-level]: https://img.shields.io/badge/-Project--Level-blue?style=flat-square
[non-dynamic]: https://img.shields.io/badge/-Non--Dynamic-orange?style=flat-square
[dumb-aware]: https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Background Processes

<link-summary>Background process is a computation executed on a background thread with the possibility of interrupting it and tracking its progress.</link-summary>

Background process is a time-consuming computation usually executed on a background thread.
The IntelliJ Platform executes background processes widely and provides two main ways to run them by plugins:
- [Progress API](#progress-api) that allows for cancelling tasks and tracking their progress
- [`Application.executeOnPooledThread()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/Application.java) methods for running simple background tasks that don't need cancellation or progress tracking

## Progress API
<primary-label ref="obsolete-2024.1"/>

> Plugins targeting 2024.1+ should use [Kotlin coroutines](kotlin_coroutines.md), which is a more performant solution and provides the cancellation mechanism out of the box.
>
> See [](coroutine_execution_contexts.md) for coroutine-based APIs to use in different contexts.
>
{style="warning" title="Use Kotlin Coroutines"}

The Progress API allows running processes on BGT with a modal (dialog), non-modal (visible in the status bar), or invisible progress.
It also allows for process cancellation and progress tracking (as a fraction of work done or textual).

The key classes are:
- [`ProgressManager`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/ProgressManager.java) – provides methods to execute and manage background processes
- [`ProgressIndicator`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/ProgressIndicator.java) – an object associated with a running process.
  It allows cancelling the process and optionally tracking its progress.
  The current thread's indicator can be retrieved any time via `ProgressManager.getProgressIndicator()`.

  There are many `ProgressIndicator` implementations and the most commonly used are:
  - [`EmptyProgressIndicator`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/EmptyProgressIndicator.java) – invisible (ignores text/fraction-related methods), used only for cancellation tracking.
    Remembers its creation [modality state](threading_model.md#invoking-operations-on-edt-and-modality).
  - [`ProgressIndicatorBase`](%gh-ic%/platform/analysis-impl/src/com/intellij/openapi/progress/util/ProgressIndicatorBase.java) – invisible but can be made visible by subclassing.
    Stores text/fraction and allows retrieving them and possibly show in the UI.
    Non-modal by default.
  - [`ProgressWindow`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/progress/util/ProgressWindow.java) – visible progress, either modal or background.
    Usually not created directly but instantiated internally inside `ProgressManager.run` methods.
  - [`ProgressWrapper`](%gh-ic%/platform/core-impl/src/com/intellij/openapi/progress/util/ProgressWrapper.java) – wraps an existing progress indicator, usually to fork another thread with the same cancellation policy.
    Use [`SensitiveProgressWrapper`](%gh-ic%/platform/core-impl/src/com/intellij/concurrency/SensitiveProgressWrapper.java) to allow that separate thread's indicator to be canceled independently of the main thread.

- [`Task`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/Task.java) – encapsulates an operation to perform.
  See `Task`'s inner subclasses for backgroundable, modal and other base task classes.

### Starting

Background processes encapsulated within `Task` can be run with queueing them.
Example:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
object : Task.Backgroundable(project, "Synchronizing data", true) {
  override fun run(indicator: ProgressIndicator) {
    // operation
  }
}
  .setCancelText("Stop loading")
  .queue()
```
</tab>
<tab title="Java" group-key="java">

```java
new Task.Backgroundable(project, "Synchronizing data", true) {
  public void run(ProgressIndicator indicator) {
    // operation
  }
}
  .setCancelText("Stop loading")
  .queue();
```
</tab>
</tabs>

> To run a backgroundable task under a custom progress indicator, for example, `EmptyProgressIndicator` to hide progress, use:
>   ```kotlin
>   ProgressManager.getInstance()
>       .runProcessWithProgressAsynchronously(
>           backgroundableTask, EmptyProgressIndicator())
>   ```
> Note that hiding progress from users should be avoided as it may break the [UX](plugin_user_experience.md).

`ProgressManager` also allows running `Runnable` and `Computable` instances not wrapped within `Task` with several `run*()` methods.
Example:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
ProgressManager.getInstance().runProcessWithProgressSynchronously(
    ThrowableComputable {
      // operation
    },
    "Synchronizing data", true, project
)
```
</tab>
<tab title="Java" group-key="java">

```java
ProgressManager.getInstance().runProcessWithProgressSynchronously(
    () -> {
      // operation
    },
    "Synchronizing data", true, project
);
```
</tab>
</tabs>

### Cancellation

The most important feature of Progress API is the ability to cancel a process if the result of the computation gets irrelevant.
Cancellation can be performed either by a user (pressing a cancel button) or from code when the current operation becomes obsolete due to some changes in the project.
Examples:

- Cancelling the search for symbol usages (cancellation by user):
  1. The user triggers the <control>Find Usages</control> action in a large project.
  2. Results are being calculated and gradually presented to the user.
  3. The user sees the place they were interested in or realizes that they don't need these results anymore.
  4. The user clicks the cancel button in the status bar, and the operation is canceled.
- Code completion (cancellation from code):
  1. The user types a letter in the editor.
  2. Computation of results for code completion is started.
  3. User types another letter.
  4. The computation started in 2. is now outdated and is canceled to start computation for the new input.

Being prepared for cancellation requests in plugin code is crucial for saving CPU resources and responsiveness of the IDE.

#### Requesting Cancellation

The process can be marked as canceled by calling `ProgressIndicator.cancel()`.
This method is called by the infrastructure that started the process, for example, when the mentioned cancel button is clicked, or by code responsible for invoking code completion.

The `cancel()` method marks the process as canceled, and it is up to the running operation to actually cancel itself.
See the section below for handling cancellation.

#### Handling Cancellation

The cancellation is handled in the running process code by calling `ProgressIndicator.checkCanceled()`, or `ProgressManager.checkCanceled()`, if no indicator instance is available in the current context.

If the process was [marked as canceled](#requesting-cancellation), then the call to `checkCanceled()` throws an instance of a special unchecked [`ProcessCanceledException`](%gh-ic%/platform/util/base/src/com/intellij/openapi/progress/ProcessCanceledException.java) (PCE) and the actual cancellation happens.
This exception doesn't represent any error and is only used to handle cancellation for convenience.
It allows canceling processes deeply in the call stack, without the need to handle cancellation on each level.

PCE is handled by the infrastructure that started the process and must never be logged or swallowed.
In case of catching it for some reason, it must be rethrown.
Use inspection
<control>Plugin DevKit | Code | Cancellation exception handled incorrectly</control> (2024.3)
(previously named <control>'ProcessCanceledException' handled incorrectly</control> (2023.3)).

All code working with [PSI](psi.md) or in other kinds of background processes must be prepared for PCE being thrown at any point.

**The `checkCanceled()` should be called by the running operation often enough** to guarantee the process's smooth cancellation.
PSI internals have a lot of `checkCanceled()` calls inside.
If a process does lengthy non-PSI activity, insert explicit `checkCanceled()` calls so that it happens frequently, for example, on each _Nth_ loop iteration.
Use inspection <control>Plugin DevKit | Code | Cancellation check in loops</control> (2023.1).

> Throwing PCE from `checkCanceled()` can be disabled in the [internal mode](enabling_internal.md) for development (for example, while debugging the code) by invoking:
> - <ui-path>Tools | Internal Actions | Skip Window Deactivation Events</ui-path> (2023.2+)
> - <ui-path>Tools | Internal Actions | Disable ProcessCanceledException</ui-path> (pre-2023.2)
>
{style="note" title="Disabling ProcessCanceledException"}

### Tracking Progress

Displaying progress to the user is achieved with `ProgressIndicator` or `ProgressManager` if no indicator instance is available in the current context.

To report progress, use the following methods:
- `setText(String)` – sets text above the progress bar
- `setText2(String)` – sets text under the progress bar
- `setFraction(double)` – sets the progress fraction: a number between 0.0 (nothing) and 1.0 (all) reflecting the ratio of work that has already been done.
  Only works for determinate indicator.
  The fraction should provide the user with an estimation of the time left.
  If this is impossible, consider making the progress indeterminate.
- `setIndeterminate(boolean)` – marks the progress indeterminate (for processes that can't estimate the amount of work to be done) or determinate (for processes that can display the fraction of the work done using `setFraction(double)`).

<include from="snippets.md" element-id="missingContent"/>

## `ProcessCanceledException` and Debugging

Sometimes, a PCE is thrown from `checkCanceled()` in the code inspected by a plugin developer during a debugging session.
If the developer tries to step over a line and this line throws PCE (potentially from a deep call frame), the next place where the debugger stops is a catch/finally block intercepting the exception.
This greatly breaks the developer's workflow as the analysis must be started over.
This situation can be avoided by enabling an action available in the [internal mode](enabling_internal.md):

<tabs>
<tab title="2023.2+">

<ui-path>Tools | Internal Actions | Skip Window Deactivation Events</ui-path>

Action disabling window deactivation events.
This helps avoid PCEs thrown as a result of deactivating the IDE development instance window.
For example, when the IDE window is deactivated, it closes the completion popup, which, in turn, cancels the completion process.

</tab>

<tab title="Earlier Versions">

<ui-path>Tools | Internal Actions | Disable ProcessCanceledException</ui-path>

Action disabling throwing `ProcessCanceledException`.

</tab>
</tabs>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Notification Balloon

<link-summary>UI guidelines on using notification balloons.</link-summary>

<tldr>

**Implementation:** [`Notifications`](%gh-ic%/platform/ide-core/src/com/intellij/notification/Notifications.java)

**Related:** [](notifications.md#balloons)

</tldr>

Notification balloons inform users of the events or system states related to a project or IDE.

![A notification balloon for a found database connection with an action to connect to it](notification_balloon.png){width=706}

## Suggestion and timeline notifications

There are two types of notification balloons:
* **Suggestion** notifications show the recommended action as a noticeable button. Use to suggest an automatic configuration for a project or an IDE, or to ask for user input.
* **Timeline** notifications show useful actions as links. Use for showing results of long processes, automatic configuration, or actions without context.

These types appear in different sections of the Notifications tool window:

![The Notifications toolwindow with suggestion and timeline notifications in different sections](notification_balloon_toolwindow.png){width=706}

## When to use

### Show result of a potentially long process

Use a timeline notification.

![Two notifications with results of long processes: project build and git push](notification_balloon_timeline_long_process.png){width=706}

### Show result of an action without context

Use a timeline notification when an action was called from a context that is already closed, like a dialog or a popup.

![Two notifications with results of actions that are not tied to a particular dialog: the UI language was changed and project folders excluded from Windows Defender](notification_balloon_timeline_no_context_action.png){width=706}

### Show result of an automatic configuration

Use a timeline notification when the project or IDE settings were automatically configured, and the user might need to check the changes.

![A notification about automatic project configuration: the workspace is restored after a branch is checked out](notification_balloon_timeline_automatic_configuration.png){width=706}

### Suggest an action to configure a project or an IDE

Use a suggestion notification to promote an action for project or IDE configuration when not taking this action might lead to less optimal functioning or errors.

![Two examples of a suggestion notification for project or IDE configuration: Windows Defender affecting the IDE with a suggestion to explude a project from it, and a suggestion for switching the UI to an available language](notification_balloon_suggestion_configuration.png){width=706}

### Request user input

Use a suggestion notification to ask the user for an additional input or action that is not connected to their own workflows.

![Two suggestion notifications for requiring user input: a request to fill a survey and a notice about a discount for PhpStorm](notification_balloon_suggestion_request_input.png){width=706}


## How to use

### Sticky or timed

**Sticky** notifications stay on screen until the user clicks any of its actions or closes it. By default, use this behavior for [suggestion notifications](#suggestion-and-timeline-notifications).

**Timed** notifications stay on screen for 10 seconds and then hide. By default, use this behavior for [timeline notifications](#suggestion-and-timeline-notifications).

Change the default behavior if it makes sense in a particular use case.


### Message severity

#### Error

Use to inform of a critical event or state that might disrupt the user experience.

![An error notification about a plugin being suspended because it requires another plugin that is missing](notification_balloon_severity_error.png){width=706}

#### Warning

Use in case an event or state might slow down the user's work or require an action to fix the project or IDE settings.

![A warning notification about IDE shortcuts conflicting with macOS shortcuts](notification_balloon_severity_warning.png){width=706}

#### Information

Use in all other cases.

![An information notification requesting to fill a survey about a plugin](notification_balloon_severity_info.png){width=706}

<br/>

When possible, use a plugin or functionality icon instead of the <control>Info</control> icon. This helps identifing the source of the notification quicker.

![Two notifications with dedicated icons instead of the generic info icon: database connection found with the database icon and suggested plugins found with the generic plugin icon](notification_balloon_plugin_icon.png){width=706}


### Text

#### Writing

[Write short and clear](writing_short.md) as notifications have limited space and may appear for a short time.

Use sentence case for both the title and the body.

Follow the [punctuation rules](punctuation.md).

#### Title
Describe the event and the context in which it occurred. The context could be the name of a plugin, library, or functionality.

#### Body
Provide the details on the event or system state to help users decide what to do next. Consider answering these questions:
* What was the cause of this state?
* What are the consequences?
* What is affected: files, libraries, versions, plugins, etc.?

#### Using only title or body

Use only the title when it is short and fits in one line.

![A notification with the title only about the number of files updated after git pull](notification_balloon_title_only.png){width=706}

Use only the body text when it fits in two lines and the title would duplicate its meaning.

<format color="Green" style="bold">Correct</format>
![A notification with the body only about the workspace being restored after branch checkout](notification_balloon_body_only_correct.png){width=706}

<format color="Red" style="bold">Incorrect</format>
![The same notification as above but with duplicating information in the title](notification_balloon_body_only_incorrect.png){width=706}

#### Long messages are collapsed

Only the first two lines of the body text are visible by default, the rest is shown when expanded. Place the most important information in the beginning of the body text so it is visible by default.

![A notification about Windows Defender slowing down the IDE in the collapsed and expanded states. The notification body is long and takes 9 lines](notification_balloon_body_two_lines.png){width=706}


### Actions

Add actions to help users take the next steps: fix a problem, view relevant information, configure settings, etc.


#### Number of actions

The preferable number of actions is two, as it is easier for the user to choose. If more than two actions are useful, place the most likely to be used first, and hide the others under the <control>More</control> dropdown:

![The Windows Defender notification with the primary action "Exclude folders" on the left and 3 more actions under the "More" dropdown link](notification_balloon_more_actions.png){width=706}


#### Actions in error and warning notifications
If the notification reports an error or warning, always provide an action to help users fix the problem:

![An error notification about the plugin being suspended because it requires another plugin to work with actions "Manage plugins" and "Disable the suspended plugin"](notification_balloon_error_actions.png){width=706}

If no actions are available, provide more details in the body text: how to fix or what was the cause.

<format color="Green" style="bold">Correct</format>
![A notification about a plugin being incompatible with the current IDE version with a suggestion to update the plugin](notification_balloon_error_actions_text_correct.png){width=706}

<format color="Red" style="bold">Incorrect</format>
![The name notification but without the suggestion to update the plugin](notification_balloon_error_actions_text_incorrect.png){width=706}


#### The "Don't show again" action

If the notification is informational, and there is a possibility it might appear too often, add the <control>Don’t show again</control> action:

![A notification about a database connection found with the "Don't show again link"](notification_balloon.png){width=706}


#### Capitalization

Use sentence capitalization for all actions in notification balloons.



## Naming a notification group

Each notification balloon belongs to a group. Groups can be seen in <ui-path>Settings | Appearance & Behavior | Notifications</ui-path>.

To name a notification group, follow these rules:

* Name the group with an ending to the phrase "Notifications in this group notify the user about…". Examples: _Automatic indent detection_, _Content root duplicates_.
* If a name about a particular process or event cannot be given, use the name of a subsystem or plugin. Examples: _HTTP Client_, _Power Save Mode_.
* When a group contains notifications about errors or problems, do not use a verb. Example: _Debugger errors_, not _Debugger errors ~~found~~_.
* Do not use words "notification" or "group". They are implied from the settings context.

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Banner

<link-summary>UI guidelines on using banners.</link-summary>

<tldr>

**Implementation:** [`EditorNotificationProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ui/EditorNotificationProvider.java)

**Related:** [](notifications.md#editor-banner)

</tldr>

A banner notification informs the user about the state of a specific context in the project. For example, when there is a missing or broken configuration for some file.

![](banner_error.png){width=796}

## When to use

Use a banner if user actions should attract attention in a file tab, tool window, or dialog, but are not required immediately.

![](tool-window.png){width=600 style=block}
*Reconnecting to the database is required to make edits.*

![](dialog-example.png){width=500 style=block}
*The component needs to be installed to run the available virtual devices.*

Do **not** use a banner if there is no particular UI component it can be tied to. Use a [balloon notification](balloon.md) in the main window instead.

For all other cases, choose another notification type.

### Types of banners

#### Information

Use when actions can improve the user’s workflow but are considered optional and can be safely ignored.

![](information-example.png){width=733 style=block}
*The new tool window UI is suggested to improve the workflow for version control.*

#### Warning

Use to suggest actions that can impact the user’s workflow.

![](warning-example.png){width=698 style=block}
*Generated files should be edited directly.*

#### Error

Use to suggest actions that are required to unblock the user’s workflow.

![](banner_error.png){width=796 style=block}
*Syntax highlighting and other inspections are broken until a JDK is defined for the project.*

## How to use

![](banner_structure.png){width=504}

### Message

* The message should be [short and descriptive](writing_short.md) (two sentences at most) and follow the [Punctuation](punctuation.md) guide.
* Use sentence case capitalization.

### Actions

* The action name should be [short and descriptive](writing_short.md), preferably not longer than two–three words.
* Use sentence case capitalization.
* Limit the number of actions to two to make the call to action clear in the specific context.
* Use the built-in 'Hide' action instead of creating a separate one.

### Icon (optional)

* 16x16 icons can be used to complement the message, e.g., a gift icon to advertise functionality.

### Placement

* Place the banner at the top of the related UI component.
* It can float or be adjacent to the content, depending on the amount of available space and whether the content’s vertical shifting needs to be minimized.

![](float-example.png){width=509}

*The banner floats on top of the preview surface to reduce shifting during code editing.*
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Actions

<link-summary>Adding custom actions to IntelliJ Platform-based IDEs menus and toolbar.</link-summary>

<tldr>

**Product Help:** [Menus and toolbars](https://www.jetbrains.com/help/idea/customize-actions-menus-and-toolbars.html)

**UI Guidelines:** [](toolbar.md)

</tldr>

The actions system allows plugins to add their items to IntelliJ Platform-based IDE menus and toolbars.
For example, one of the action classes is responsible for the <ui-path>File | Open File...</ui-path> menu item and the <control>Open...</control> toolbar button.

Actions in the IntelliJ Platform require a [code implementation](#action-implementation) and must be [registered](#registering-actions).
The action implementation determines the contexts in which an action is available and its functionality when selected in the UI.
Registration determines where an action appears in the IDE UI.
Once implemented and registered, an action receives callbacks from the IntelliJ Platform in response to user gestures.

The [](working_with_custom_actions.md) tutorial describes the process of adding a custom action to a plugin.
The [](grouping_action.md) tutorial demonstrates three types of groups that can contain actions.

## Action Implementation

An action is a class derived from the abstract class [`AnAction`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnAction.java) (see also [](#useful-action-base-classes) below).
The IntelliJ Platform calls methods of actions when a user interacts with a menu item or toolbar button.

> Classes based on `AnAction` must not have class fields of any kind.
> This is because an instance of `AnAction` class exists for the entire lifetime of the application.
> If the `AnAction` class uses a field to store data that has a shorter lifetime and doesn't clear this data promptly, the data leaks.
> For example, any `AnAction` data that exists only within the context of a `Project` causes the `Project` to be kept in memory after the user has closed it.
>
{style="warning" title="No fields allowed"}

> For actions available during [dumb mode](indexing_and_psi_stubs.md#dumb-mode), extend [`DumbAwareAction`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/project/DumbAwareAction.java)
> (do not override `AnAction.isDumbAware()` instead).

### Principal Implementation Overrides

Every IntelliJ Platform action should override `AnAction.update()` and must override `AnAction.actionPerformed()`.

#### `AnAction.update()`

An action's method `AnAction.update()` is called by the IntelliJ Platform framework to update an action state.
The state (enabled, visible) of an action determines whether the action is available in the UI.
An object of the [`AnActionEvent`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnActionEvent.java) type is passed to this method and contains information about the current context for the action.

Actions are made available by changing the state in the [`Presentation`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/Presentation.java) object associated with the event context.
As explained in [Overriding the `AnAction.update()`  Method](#overriding-the-anactionupdate-method), it is vital `update()` methods _execute quickly_ and return execution to platform.

#### `AnAction.getActionUpdateThread()`
<primary-label ref="2022.3"/>

`AnAction.getActionUpdateThread()` returns an [`ActionUpdateThread`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/ActionUpdateThread.java),
which specifies if the `update()` method is called on a [background thread (BGT) or the event-dispatching thread (EDT)](threading_model.md).
The preferred method is to run the update on the BGT, which has the advantage of guaranteeing application-wide read access to
[PSI](psi.md), [the virtual file system](virtual_file_system.md) (VFS), or [project models](project_model.md).
Actions that run the update session on the BGT should not access the Swing component hierarchy directly.
Conversely, actions that specify to run their update on EDT must not access PSI, VFS, or project data but have access to Swing components and other UI models.

All accessible data is provided by the `DataContext` as explained in [](#determining-the-action-context).
When switching from BGT to EDT is necessary, actions can use `AnActionEvent.getUpdateSession()` to
access the [`UpdateSession`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/UpdateSession.java) and
then call `UpdateSession.compute()` to run a function on EDT.

Inspection <ui-path>Plugin DevKit | Code | ActionUpdateThread is missing</ui-path> highlights missing implementation of
`AnAction.getActionUpdateThread()`.

#### `AnAction.actionPerformed()`

An action's method `AnAction.actionPerformed()` is called by the IntelliJ Platform if available and selected by the user.
This method does the heavy lifting for the action: it contains the code executed when the action gets invoked.
The `actionPerformed()` method also receives `AnActionEvent` as a parameter, which is used to access any context data like projects, files, selection, and similar.
See [Overriding the `AnAction.actionPerformed()` Method](#overriding-the-anactionactionperformed-method) for more information.

#### Miscellaneous
There are other methods to override in the `AnAction` class, such as changing the default `Presentation` object for the action.
There is also a use case for overriding action constructors when registering them with dynamic action groups, demonstrated in the [Grouping Actions](grouping_action.md#adding-child-actions-to-the-dynamic-group) tutorial.

### Overriding the `AnAction.update()` Method

The method `AnAction.update()` is periodically called by the IntelliJ Platform in response to user gestures.
The `update()` method gives an action to evaluate the current context and enable or disable its functionality.
Implementors must ensure that changing presentation and availability status handles all variants and state transitions; otherwise, the given Action will get "stuck".

> The `AnAction.update()` method can be called frequently on [Event Dispatch Thread (EDT)](threading_model.md).
> It must _execute very quickly_; no real work must be performed.
> For example, checking selection in a tree or a list is considered valid, but working with the file system is not.
>
> If the new state of an action cannot be determined quickly, evaluation should be performed in the `AnAction.actionPerformed()` method
> and the user [notified](notifications.md) accordingly if the context isn't suitable.
>
{style="warning" title="Performance"}

#### Determining the Action Context

The `AnActionEvent` object passed to `update()` carries information about the current context for the action.
Context information is available from the methods of `AnActionEvent`, providing information such as the Presentation and whether the action is triggered by a Toolbar.
Additional context information is available using the method `AnActionEvent.getData()`.
Keys defined, for example, in [`CommonDataKeys`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/CommonDataKeys.java) are passed to the `getData()` method to retrieve objects such as `Project`, `Editor`, `PsiFile`, and other information.
Accessing this information is relatively light-weight and is suited for `AnAction.update()`.

#### Enabling and Setting Visibility for an Action

Based on information about the action context, the `AnAction.update()` method can enable, disable, or hide an action.
An action's enabled/disabled state and visibility are set using methods of the `Presentation` object, which is accessed using `AnActionEvent.getPresentation()`.

The default `Presentation` object is a set of descriptive information about a menu or toolbar action.
Every context for an action – it might appear in multiple menus, toolbars, or Navigation search locations – has a unique presentation.
Attributes such as an action's text, description, and icons and visibility and enable/disable state, are stored in the presentation.
The attributes in a presentation get initialized from the [action registration](#registering-actions).
However, some can be changed at runtime using the methods of the `Presentation` object associated with an action.

The enabled/disabled state of an action is set using `Presentation.setEnabled()`.
The visibility state of an action is set using `Presentation.setVisible()`.
If an action is enabled, the `AnAction.actionPerformed()` can be called if a user selects an action in the IDE.
A menu action shows in the UI location specified in its registration.
A toolbar action displays its enabled (or selected) icon, depending on the user interaction.

When an action is disabled, `AnAction.actionPerformed()` will not be called.
Toolbar actions display their respective icons for the disabled state.
The visibility of a disabled action in a menu depends on whether the host menu (for example, "ToolsMenu") containing the action has the `compact` attribute set.
See [Grouping Actions](#grouping-actions) for more information about the `compact` attribute and menu actions' visibility.

> If an action is added to a toolbar, its `update()` can be called if there was any user activity or focus transfer.
> If the action's availability changes in the absence of these events, then call [`ActivityTracker.getInstance().inc()`](%gh-ic%/platform/platform-api/src/com/intellij/ide/ActivityTracker.java) to notify the action subsystem to update all toolbar actions.
>
{style="note"}

An example of enabling a menu action based on whether a project is open is demonstrated in [`PopupDialogAction.update()`](%gh-sdk-samples-master%/action_basics/src/main/java/org/intellij/sdk/action/PopupDialogAction.java).

### Overriding the `AnAction.actionPerformed()` Method

When the user selects an enabled action, be it from a menu or toolbar, the action's `AnAction.actionPerformed()` method is called.
This method contains the code executed to perform the action, and it is here that the real work gets done.

By using the `AnActionEvent` methods and `CommonDataKeys`, objects such as the `Project`, `Editor`, `PsiFile`, and other information is available.
For example, the `actionPerformed()` method can modify, remove, or add PSI elements to a file open in the editor.

The code that executes in the `AnAction.actionPerformed()` method should execute efficiently, but it does not have to meet the same stringent requirements as the `update()` method.

An example of inspecting PSI elements is demonstrated in the `action_basics` SDK code sample in [`PopupDialogAction.actionPerformed()`](%gh-sdk-samples-master%/action_basics/src/main/java/org/intellij/sdk/action/PopupDialogAction.java).

### Action IDs

Every action and action group has a unique identifier.
Basing the identifier for a custom action on the fully qualified name of the implementation is the best practice, assuming the package incorporates the [`<id>`](plugin_configuration_file.md#idea-plugin__id) of the plugin.
Including the plugin identifier in the action identifier should prevent it from clashing with other plugins' actions.
An action must have a unique identifier for each place.
It is used in the IDE UI, even though the FQN of the implementation is the same.
Definitions of identifiers for the standard IntelliJ Platform actions are in [`IdeActions`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/actionSystem/IdeActions.java).

### Grouping Actions

Groups organize actions into logical UI structures, which in turn can contain other groups.
A group of actions can form a toolbar or a menu.
Subgroups of a group can form submenus of a menu.

Actions can be included in multiple groups and thus appear in different places within the UI.
An action must have a unique identifier for each place it appears in the UI.
See the [Action Declaration Reference](#action-declaration-reference) section for information about how to specify locations.

#### Presentation

A new [`Presentation`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/Presentation.java) gets created for every place where the action appears.
Therefore, the same action can have a different text or icon when it appears in different places of the user interface.
Different presentations for the action are created by copying the Presentation returned by the `AnAction.getTemplatePresentation()` method.

#### The `compact` Attribute

A group's `compact` attribute specifies whether an action within that group is visible when disabled.
See [Registering Actions in plugin.xml](#registering-actions-in-pluginxml) for an explanation of how the `compact` attribute is set for a group.
If the `compact` attribute is `true` for a menu group, an action in the menu only appears if its state is both enabled and visible.
In contrast, if the `compact` attribute is `false`, an action in the menu appears if its state is disabled but visible.
Some menus like <ui-path>Tools</ui-path> have the `compact` attribute set, so there isn't a way to show an action on the <ui-path>Tools</ui-path> menu if it is not enabled.

| Host Menu `compact`&nbsp;Setting | Action Enabled | Visibility Enabled | Menu Item Visible? | Menu Item Appears Gray? |
|:--------------------------------:|:--------------:|:------------------:|:------------------:|:-----------------------:|
|                T                 |     **F**      |         T          |       **F**        |           N/A           |
|                T                 |       T        |         T          |         T          |            F            |
|                F                 |     **F**      |         T          |       **T**        |          **T**          |
|                F                 |       T        |         T          |         T          |            F            |

All other combinations of `compact`, visibility, and enablement produce N/A for gray appearance because the menu item isn't visible.

See the [](grouping_action.md) tutorial for examples of creating action groups.

## Registering Actions

There are two main ways to register an action: either by [registering it in the <path>plugin.xml</path> file](#registering-actions-in-pluginxml) or [through code](#registering-actions-from-code).

### Registering Actions in plugin.xml

Registering actions in <path>[plugin.xml](plugin_configuration_file.md)</path> is demonstrated in the following reference examples, which document all elements and attributes used in the [`<actions>`](plugin_configuration_file.md#idea-plugin__actions) section and describe each element's meaning.

#### Action Declaration Reference

The places where actions can appear are defined by constants in [`ActionPlaces`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/actionSystem/ActionPlaces.java).
Group IDs for the IntelliJ Platform are defined in [`PlatformActions.xml`](%gh-ic%/platform/platform-resources/src/idea/PlatformActions.xml).

This and additional information can also be found by using the [Code Completion](https://www.jetbrains.com/help/idea/auto-completing-code.html#invoke-basic-completion), [Quick Definition](https://www.jetbrains.com/help/idea/viewing-reference-information.html#view-definition-symbols), and [Quick Documentation](https://www.jetbrains.com/help/idea/viewing-reference-information.html#inline-quick-documentation) features.

> To look up existing Action ID (for example, for use in `relative-to-action`), [UI Inspector](internal_ui_inspector.md) can be used.

> See the [`<actions>`](plugin_configuration_file.md#idea-plugin__actions) element and its children documentation for details.
>
{style="note"}

```xml
<actions>

  <action
      id="VssIntegration.GarbageCollection"
      class="com.example.impl.CollectGarbage"
      text="Garbage Collector: Collect _Garbage"
      description="Run garbage collector"
      icon="icons/garbage.png">

    <!--
    The second <override-text> element uses the alternate attribute
    "use-text-of-place" to define a location (EditorPopup) to use the
    same text as is used in MainMenu. It is a way to specify the use
    of an alternate menu text in multiple discrete menu groups.
    -->
    <override-text place="MainMenu" text="Collect _Garbage"/>
    <override-text place="EditorPopup" use-text-of-place="MainMenu"/>

    <!-- Provide alternative names for searching action by name -->
    <synonym text="GC"/>

    <add-to-group
        group-id="ToolsMenu"
        relative-to-action="GenerateJavadoc"
        anchor="after"/>

    <!-- Add the first and second keystrokes to all keymaps... -->
    <keyboard-shortcut
        keymap="$default"
        first-keystroke="control alt G"
        second-keystroke="C"/>

    <!-- ...except the "Mac OS X" keymap and its children. -->
    <keyboard-shortcut
        keymap="Mac OS X"
        first-keystroke="control alt G"
        second-keystroke="C"
        remove="true"/>

    <!-- The "Mac OS X 10.5+" keymap and its children will have only
    this keyboard shortcut for this action. -->
    <keyboard-shortcut
        keymap="Mac OS X 10.5+"
        first-keystroke="control alt G"
        second-keystroke="C"
        replace-all="true"/>

    <mouse-shortcut
        keymap="$default"
        keystroke="control button3 doubleClick"/>
  </action>

  <!--
  This action declares neither a text nor a description attribute.
  If it has a resource bundle declared, the text and descriptions
  will be retrieved based on the action-id incorporated in the key
  for a translated string.
  -->
  <action
      id="sdk.action.PopupDialogAction"
      class="sdk.action.PopupDialogAction"
      icon="SdkIcons.Sdk_default_icon"/>

  <group
      class="com.example.impl.MyActionGroup"
      id="TestActionGroup"
      text="Test Group"
      description="Group with test actions"
      icon="icons/testGroup.png"
      popup="true"
      compact="true">

    <action
        id="VssIntegration.TestAction"
        class="com.example.impl.TestAction"
        text="My Test Action"
        description="My test action"/>

    <!-- The <separator> element defines a separator between actions.
    It can also have an <add-to-group> child element. -->
    <separator/>

    <!-- A group that is excluded from "Help | Find Action..."
    and "Navigate | Search Everywhere" -->
    <group id="TestActionSubGroup" searchable="false"/>

    <!-- The <reference> element allows adding an existing action to
    the group. The mandatory "ref" attribute specifies the ID of
    the action to add. -->
    <reference ref="EditorCopy"/>

    <add-to-group
        group-id="MainMenu"
        relative-to-action="HelpMenu"
        anchor="before"/>
  </group>
</actions>
```

#### Localizing Actions and Groups

> Hard-coding presentation in the `AnAction` constructor is discouraged, use inspection <control>Plugin DevKit | Code | Eager creation of action presentation</control> (2023.3) to highlight such problems.

Action and group localization use [resource bundles](internationalization.md#message-bundles) containing property files named <path>\$NAME\$Bundle.properties</path>, each file consisting of `key=value` pairs.
The [`action_basics`](%gh-sdk-samples-master%/action_basics) plugin demonstrates using a resource bundle to localize the group and action entries added to the Editor Popup Menu.

When localizing actions and groups, the `text` and `description` attributes are not declared in <path>plugin.xml</path>.
Instead, those attribute values vary depending on the locale and get declared in a resource bundle.

The name and location of the resource bundle must be declared in the <path>plugin.xml</path> file.
In the case of `action_basics`, only a default localization resource bundle (<path>/resources/messages/BasicActionsBundle.properties</path>) is provided:

```xml
<resource-bundle>messages.BasicActionsBundle</resource-bundle>
```

_2020.1_<br/>
If necessary, a dedicated resource bundle to use for actions and groups can be defined on [`<actions>`](plugin_configuration_file.md#idea-plugin__actions):

```xml
<actions resource-bundle="messages.MyActionsBundle">
  <!-- action/group defined here will use keys
  from MyActionsBundle.properties -->
</actions>
```

See [Extending DefaultActionGroup](grouping_action.md#extending-defaultactiongroup) for a tutorial of localizing Actions and Groups.

<tabs>

<tab title="Actions">

For Actions, the key in property files incorporates the action ID in this specific structure:
* `action.<action-id>.text=Translated Action Text`
* `action.<action-id>.description=Translated Action Description`

_2020.1_<br/>
If `<override-text>` is used for an action ID, the key includes the `place` attribute:
* `action.<action-id>.<place>.text=Place-dependent Translated Action Text`

</tab>

<tab title="Groups">

For Groups, the key in the property files incorporates the group ID in this specific structure:
* `group.<group-id>.text=Translated Group Text`
* `group.<group-id>.description=Translated Group Description`

_2020.3_<br/>
If `<override-text>` is used for a group ID, the key includes the `place` attribute:
* `group.<group-id>.<place>.text=Place-dependent Translated Group Text`

</tab>

</tabs>

### Registering Actions from Code

Two steps are required to register an action from code:
* First, an instance of the class derived from `AnAction` must be passed to the `registerAction()` method of [`ActionManager`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/ActionManager.java), to associate the action with an ID.
* Second, the action needs to be added to one or more groups.
  To get an instance of an action group by ID, it is necessary to call `ActionManager.getAction()` and cast the returned value to [`DefaultActionGroup`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/actionSystem/DefaultActionGroup.java).


## Building a Toolbar/Popup Menu from Actions
{id="buildingToolbarPopupMenu"}

If a plugin needs to include a toolbar or popup menu built from a group of actions in its user interface, that is achieved through [`ActionPopupMenu`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/ActionPopupMenu.java) and [`ActionToolbar`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/ActionToolbar.java).
These objects can be created through calls to the `ActionManager.createActionPopupMenu()` and `createActionToolbar()` methods.
To get a Swing component from such an object, call the respective `getComponent()` method.

If an action toolbar is attached to a specific component (for example, a panel in a tool window), call `ActionToolbar.setTargetComponent()` and pass the related component's instance as a parameter.
Setting the target ensures that the toolbar buttons' state depends on the state of the related component, not on the current focus location within the IDE frame.

See [](toolbar.md) in UI Guidelines for an overview.

## Useful Action Base Classes

### Toggle/Selection

Use [`ToggleAction`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/actionSystem/ToggleAction.java)
or [`DumbAwareToggleAction`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/project/DumbAwareToggleAction.java)
for actions with the "selected"/"pressed" state (for example, menu item with checkbox, toolbar action button).
See also [`ToggleOptionAction`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/actionSystem/ToggleOptionAction.java).

#### Popup Menus
{id="toggleActionPopupMenus"}

<primary-label ref="2024.2"/>

In popup menus, `ToggleAction` no longer closes the popup by default.
Use [`Presentation.setKeepPopupOnPerform()`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/Presentation.java)
with [`KeepPopupOnPerform.IfRequested`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/KeepPopupOnPerform.java)
in the action constructor or its `update()` method.

### Back/Forward Navigation

Use [`BackAction`](%gh-ic%/platform/platform-api/src/com/intellij/ui/navigation/BackAction.java) and
[`ForwardAction`](%gh-ic%/platform/platform-api/src/com/intellij/ui/navigation/ForwardAction.java) to provide a navigation trail taken from
[`History`](%gh-ic%/platform/platform-api/src/com/intellij/ui/navigation/History.java) provided by `History.KEY`.

### Runtime Placeholder Action

For actions registered at runtime (for example, in a tool window toolbar), add an [`<action>`](plugin_configuration_file.md#idea-plugin__actions__action) entry with
[`EmptyAction`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/actionSystem/EmptyAction.java)
to "reserve" Action ID, so they become visible in <ui-path>Settings | Keymap</ui-path>.

## Executing Actions Programmatically

Sometimes, it is required to execute actions programmatically, for example, executing an action implementing logic needed in another place, and the implementation is out of our control.
Executing actions can be achieved with [`ActionUtils.invokeAction()`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/actionSystem/ex/ActionUtil.kt).

> Executing actions programmatically should be avoided whenever possible.
> If an action executed programmatically is under your control, extract its logic to a [service](plugin_services.md) or utility class and call it directly.
>
{style="warning"}
<!-- Copyright 2000-2025 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Build Number Ranges

<link-summary>Defining product compatibility by specifying plugin since-build and until-build ranges.</link-summary>

Use this reference of build number ranges to specify the correct `since-build` and `until-build` values in your plugin descriptor.

Setting the actual values in <path>[plugin.xml](plugin_configuration_file.md)</path> is managed by the `patchPluginXml` Gradle task
(Reference: [2.x](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml), [1.x](tools_gradle_intellij_plugin.md#tasks-patchpluginxml)).
See [](configuring_plugin_project.md#patching-the-plugin-configuration-file) for further details.

### Build Numbers

Note the following regarding values for `since-build` and `until-build`:

#### Valid Values

Values must represent the [actual build numbers](#build-number-format).
Any made-up numbers must not be used.
Violations are highlighted by [plugin verifier](verifying_plugin_compatibility.md), and such plugins will be rejected on JetBrains Marketplace.

For example, `233.*` is invalid for `since-build`.
Any of `999.*`, `234.*` (maximum is `233.*`) and `223.9999` are invalid for `until-build`.

#### "Open-End" Compatibility

Not specifying the `until-build` attribute means it will include _all_ future builds.
This includes future, yet unreleased versions and possibly new IDEs, which might impact compatibility later.

See [`until-build`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-ideaVersion-untilBuild)
documentation for the necessary Gradle configuration.

#### Branch Version Compatibility

To support all releases for a specific branch (major version), use a dot-star suffix (`.* `) for `until-build`.

For example, `232.*` for all 2023.2.x releases.

> Before publishing, the plugin must be checked using [](verifying_plugin_compatibility.md#plugin-verifier) against the specified version range (and specified compatible products) to ensure binary compatibility.
> Any additional reported errors/warnings should also be fixed when possible.
>
> Plugins hosted on [JetBrains Marketplace](https://plugins.jetbrains.com) are checked automatically.
> According to [Approval Guidelines](https://plugins.jetbrains.com/legal/approval-guidelines), JetBrains will restrict incompatible plugin versions if necessary.
>
{title="Compatibility Enforcement" style="warning"}

### Build Number Format

To denote a release, a multipart build number is used.
It consists of the following parts:

* Product ID (`IC` for IDEA Community, `IU` for IDEA Ultimate, `RM` for RubyMine, `PY` for PyCharm, `PS` for PhpStorm, etc.)
* Branch number (`223`)
* Build number in the branch (`9559`)

Branch numbers are based on the `YYYY.R` [IDE release version numbers](https://blog.jetbrains.com/blog/2016/03/09/jetbrains-toolbox-release-and-versioning-changes/).
The branch number takes the last two digits of the year and the `R` release number.
For example, `231` for 20**23.1**, `232` for 20**23.2**, and `233` for 20**23.3**.

The build number may have multiple components: `IU-162.94.11`, `IU-162.94.11.256.42`.
This gives more flexibility for third-party plugins and IDE developers.
Plugins may specify compatibility versions more precisely (for example, requiring a specific bugfix release); IDE vendors may have build numbers based on a specific IntelliJ Platform version and specify an additional internal version (for example, `256.42` in `XX-162.94.11.256.42`) to allow plugin developers for their IDE to specify compatibility.

Multipart build numbers can also be used in the `since-build` and `until-build` attributes of `idea-version`.
Usually you should omit the product ID and use only the branch number and build number, for example:

<compare type="top-bottom" first-title="Any 213 branch version" second-title="Specific build number">

```xml
<!-- 2021.3, 2021.3.1, 2021.3.2, ... -->
<idea-version since-build="213" until-build="213.*"/>
```

```xml
<!-- 2021.3.3 or later -->
<idea-version since-build="213.7172.25"/>
```

</compare>

> Specific build numbers and their corresponding release version are available via _Previous Releases_ on the corresponding product's download page, for example, [Previous IntelliJ IDEA Releases](https://www.jetbrains.com/idea/download/previous.html).
> For upcoming versions, see [Early Access Program](https://eap.jetbrains.com).
>
> See also ["What versions of IntelliJ-based IDEs are supported?"](https://intellij-support.jetbrains.com/hc/en-us/articles/360019574859-What-versions-of-IntelliJ-based-IDEs-are-supported-) for JetBrains IDE support policy.
>
{style="note" title="Build numbers for products"}

### Targeting Multiple IDE Versions

{id="multipleIDEVersions"}

<include from="configuring_plugin_project.md" element-id="whichPlatformVersion"/>

When supporting multiple major versions, it is strongly recommended to build against the _lowest_ supported version to guarantee backwards-compatibility.
In the case of supporting a range of platform versions with different underlying Java level ([see below](#platformVersions)), it is _required_.

[](verifying_plugin_compatibility.md) discusses tooling support to ensure compatibility with the chosen version range and IDEs.

Consult [Incompatible API Changes](api_changes_list.md) and [Notable API Changes](api_notable.md) for an overview of known breaking and relevant changes across IDE versions.

In some cases, keeping a dedicated branch and corresponding plugin release for each major IDE version might be required due to incompatibilities that cannot be solved in other ways.
The IDE will automatically install only the corresponding compatible build.

### Platform Versions

{id="platformVersions"}

Note that there is no `YY0`.
In the `YYYY.R` versioning scheme, the `R` part starts at 1.

<include from="snippets.md" element-id="apiChangesJavaVersion"/>

<include from="snippets.md" element-id="gradlePluginVersion"/>

_Early Access Program_ (EAP) releases of upcoming versions are available [here](https://eap.jetbrains.com).

| Branch number                                                   | IntelliJ Platform version               |
|-----------------------------------------------------------------|-----------------------------------------|
| 251 (Early Access Preview)                                      | 2025.1 (unreleased)                     |
| [243](https://github.com/JetBrains/intellij-community/tree/243) | 2024.3                                  |
| [242](https://github.com/JetBrains/intellij-community/tree/242) | 2024.2 **NOTE** Java 21 is now required |
| [241](https://github.com/JetBrains/intellij-community/tree/241) | 2024.1                                  |
| [233](https://github.com/JetBrains/intellij-community/tree/233) | 2023.3                                  |
| [232](https://github.com/JetBrains/intellij-community/tree/232) | 2023.2                                  |
| [231](https://github.com/JetBrains/intellij-community/tree/231) | 2023.1                                  |

#### Earlier Versions

{collapsible="true"}

| Branch number                                                   | IntelliJ Platform version                                                                                                                |
|-----------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------|
| [223](https://github.com/JetBrains/intellij-community/tree/223) | 2022.3 **NOTE** Java 17 is now required ([blog post](https://blog.jetbrains.com/platform/2022/08/intellij-project-migrates-to-java-17/)) |
| [222](https://github.com/JetBrains/intellij-community/tree/222) | 2022.2                                                                                                                                   |
| [221](https://github.com/JetBrains/intellij-community/tree/221) | 2022.1                                                                                                                                   |
| [213](https://github.com/JetBrains/intellij-community/tree/213) | 2021.3                                                                                                                                   |
| [212](https://github.com/JetBrains/intellij-community/tree/212) | 2021.2                                                                                                                                   |
| [211](https://github.com/JetBrains/intellij-community/tree/211) | 2021.1                                                                                                                                   |
| [203](https://github.com/JetBrains/intellij-community/tree/203) | 2020.3 **NOTE** Java 11 is now required ([blog post](https://blog.jetbrains.com/platform/2020/09/intellij-project-migrates-to-java-11/)) |
| [202](https://github.com/JetBrains/intellij-community/tree/202) | 2020.2                                                                                                                                   |
| [201](https://github.com/JetBrains/intellij-community/tree/201) | 2020.1                                                                                                                                   |
| [193](https://github.com/JetBrains/intellij-community/tree/193) | 2019.3                                                                                                                                   |
| [192](https://github.com/JetBrains/intellij-community/tree/192) | 2019.2                                                                                                                                   |
| [191](https://github.com/JetBrains/intellij-community/tree/191) | 2019.1                                                                                                                                   |

# Build System

<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<link-summary>The Build System section overview.</link-summary>

* [](external_builder_api.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Built-In Button

<link-summary>UI guidelines on using built-in buttons.</link-summary>

A built-in button is an icon placed inside an input control.

![](input_browse.png){width=250}

## How to use

Place the built-in button inside the input control. Do **not** place the built-in button on the right of a control:

![](outside.png){width=250}

To place a button inside a text field, use [`ExtendableTextField`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/fields/ExtendableTextField.java) and
its `addExtension()` method.

The shortcut for a built-in button is <shortcut>Shift+Enter</shortcut>.

## Types

### Browse

A browse button opens a dialog with the disk, a tree view or a table of values.
Use a control with the browse icon for a file/folder path selected from the disk.

![](input_browse.png){width=378}

[//]: # (An input field with browse button: [`TextFieldWithBrowseButton`]&#40;%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/TextFieldWithBrowseButton.java&#41;)

A combo box with browse button:
<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
val browseExtension = ExtendableTextComponent.Extension.create(
    AllIcons.General.OpenDisk,
    AllIcons.General.OpenDiskHover,
    "Open file",
    { System.out.println("Browse file clicked") }
)
val extComboBox = ComboBox<String>(STRING_VALUES)
extComboBox.setEditable(true)
extComboBox.setEditor(object : BasicComboBoxEditor() {
  override fun createEditorComponent(): JTextField {
    val ecbEditor = ExtendableTextField()
    ecbEditor.addExtension(browseExtension)
    ecbEditor.setBorder(null)
    return ecbEditor
  }
})
```

</tab>
<tab title="Java" group-key="java">

```java
ExtendableTextComponent.Extension browseExtension =
  ExtendableTextComponent.Extension.create(
    AllIcons.General.OpenDisk,
    AllIcons.General.OpenDiskHover,
    "Open file",
    () -> System.out.println("Browse file clicked")
  );
ComboBox<String> extComboBox = new ComboBox<>(STRING_VALUES);
extComboBox.setEditable(true);
extComboBox.setEditor(new BasicComboBoxEditor() {
  @Override
  protected JTextField createEditorComponent() {
    ExtendableTextField ecbEditor = new ExtendableTextField();
    ecbEditor.addExtension(browseExtension);
    ecbEditor.setBorder(null);
    return ecbEditor;
  }
});
```

</tab>
</tabs>

Do **not** place the button on the right of the control.

![](browse_buttons.png){width=250}

### Expand field

If the input text can be long and place is constrained, use a built-in button to expand the control
([`ExpandableTextField`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/fields/ExpandableTextField.java)):

![](expandable_1.png){width=332}

![](expandable_2.png){width=582}

Do **not** use the Show Viewer button instead.

![](input_expand.png){width=357}

### List values

Use a control with the table icon to select from the list of classes, methods or environment variables:

![](input_table.png){width=250}

Use a combo box instead of the Variables button. This icon works as a combo box.

![](variables_combobox.png){width=514}

### Add value

The Plus button works the same way as the Browse button.
The only difference is that the selected value is added, instead of overwriting the existing one.
Place the plus icon inside the control.
![](plus.png){width=250}

### Copy, Info

| ![](copy_button.png){width="57"} | Do not use the Copy button, the content can be selected and copied using the Cmd/Ctrl+C shortcut or the context menu. |
|----------------------------------|-----------------------------------------------------------------------------------------------------------------------|
| ![](info_button.png){width="57"} | Do not use the info button to open an external link. Use <a href="context_help.md">context help</a> instead.          |
{style=none}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Bundling Plugin API Sources

<link-summary>Exposing plugin's API sources for other plugins.</link-summary>

If a plugin exposes its own API that is meant to be used by other plugins, it is worth considering bundling the plugin's API sources in the ZIP distribution.
Being able to see API sources drastically improves the development experience, and it is highly recommended to bundle them.

If a third-party plugin uses [](tools_intellij_platform_gradle_plugin.md) or [](tools_gradle_intellij_plugin.md) (1.7.0+) and adds a dependency to a plugin bundling sources in the ZIP distribution,
sources will be automatically attached to the plugin library and visible in IDE when developers navigate to the API classes.

## API Sources Location

The API source JARs must be located in the <path>example-plugin.zip!/plugin/lib/src</path> directory in the plugin ZIP distribution, e.g.:

```plantuml
@startuml

skinparam TitleFontName JetBrains Sans
skinparam TitleFontStyle plain
skinparam TitleFontSize 16
skinparam DefaultTextAlignment left

title
  example-plugin.zip // (Plugin distribution file) //
  |_ example-plugin
    |_ lib
      |_ example-plugin.jar // (Plugin) //
      |_ src
        |_ example-plugin-api-src.jar // (API sources JAR) //
end title
@enduml
```

The plugin distribution ZIP file can contain multiple source JARs, and there are no strict rules for the source JAR names.

## Defining Plugin API

Usually, the following classes are considered as plugin API:

- [Extension Point](plugin_extension_points.md) and related classes
- [Listener](plugin_listeners.md) and related classes
- [Services](plugin_services.md) and utilities that provide access to the plugin data/behavior

Keep in mind that API should be stable and change very rarely as every incompatible change will break the client plugins.
It is also recommended to organize the plugin code in multiple modules with clear responsibilities, e.g.:

- `example-plugin-api` - a module containing API
- `example-plugin-impl` - a module containing plugin features code that are not meant to be extended or used by client plugins

General rule to define API is to include classes that are likely to be consumed by the client plugins code.

Of course, more complex plugins may require more fine-grained structure.
See [Gradle IntelliJ Plugin - Usage Examples](tools_gradle_intellij_plugin_examples.md).

## Bundling API Sources in Gradle Build Script

In the simplest case, if a project consists of a single module and plugin API is clearly isolated in a package, e.g. `com.example.plugin.openapi`, including the source JAR can be achieved by adding the following snippet to the `tasks` section of the Gradle build script:

<tabs>
<tab title="Kotlin">

```kotlin
tasks {
  val createOpenApiSourceJar by registering(Jar::class) {
    // Java sources
    from(sourceSets.main.get().java) {
      include("**/com/example/plugin/openapi/**/*.java")
    }
    // Kotlin sources
    from(kotlin.sourceSets.main.get().kotlin) {
      include("**/com/example/plugin/openapi/**/*.kt")
    }
    destinationDirectory.set(layout.buildDirectory.dir("libs"))
    archiveClassifier.set("src")
  }

  buildPlugin {
    dependsOn(createOpenApiSourceJar)
    from(createOpenApiSourceJar) { into("lib/src") }
  }
}
```

</tab>
<tab title="Groovy">

```groovy
task createOpenApiSourceJar(type: Jar) {
  // Java sources
  from(sourceSets.main.java) {
    include '**/com/example/plugin/openapi/**/*.java'
  }
  // Kotlin sources
  from(sourceSets.main.kotlin) {
    include '**/com/example/plugin/openapi/**/*.kt'
  }
  destinationDirectory = layout.buildDirectory.dir('libs')
  archiveClassifier = 'src'
}

buildPlugin {
  dependsOn(createOpenApiSourceJar)
  from(createOpenApiSourceJar) { into 'lib/src' }
}
```

</tab>
</tabs>


The above configuration will create a source JAR containing Java and Kotlin source files from the `com.example.plugin.openapi` package and add it to the final plugin ZIP distribution in the required <path>example-plugin.zip!/example-plugin/lib/src</path> directory.

If your plugin is a Gradle project and there is no clear open API package separation, it is recommended to restructure the plugin project to a Gradle multi-project variant and create a dedicated open API subproject that contains all API sources to be included in the final distribution created by the main plugin Gradle project.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Capitalization

<link-summary>UI guidelines for using title and sentence capitalization in various contexts.</link-summary>

## Title

> The current Windows guidelines use sentence capitalization for actions. Some Microsoft products still title-capitalize actions according to the previous guidelines. macOS also title-capitalizes actions. Since IntelliJ IDEs are cross-platform, we use title capitalization as well.
>
{style="note"}

Use for:

* Actions in buttons, menus and tooltips
* Headers in tables, popups, message boxes and dialogs
* Headers of UI control groups

Do **not** use for:

* Actions in links
* Actions in the popup on <shortcut>Alt+Enter</shortcut>: quick-fixes, intention actions, and others
* Headers in notifications

### Rules {id="rules_1"}

Always capitalize the first and the last words.

Capitalize the words in-between except:

* articles: *a, an, the*,
* coordinating conjunctions: *and, or, but*,
* prepositions of four and fewer letters which are not a part of a phrasal verb: *in, with*.

In hyphenated phrases, capitalize all nouns, adjectives and adverbs: *Auto-Indent, Command-Line Launcher*.
Do not capitalize articles, prepositions and conjunctions: *Side-by-Side, Drag-and-Drop*.

### Examples {id="examples_1"}

- _Compare With…_ — the short preposition *with* is capitalized as the last word.
- _Compare with Latest Repository Version_ — *with* is not capitalized when in the middle.
- _Check Out from Version Control_ — *out* is a part of the phrasal verb *check out* and is capitalized.

## Sentence

Use for:

* Labels of UI controls: text boxes, checkboxes, radio buttons, combo boxes, etc.
* Items in combo boxes, lists, trees and tables
* Links
* Actions in the popup on Alt+Enter
* Header and body text in notifications
* Body text in error messages, tooltips, status descriptions and any kind of instructions

### Rules

Capitalize the first word in a sentence, proper nouns and adjectives, and abbreviations.

### Examples

- _Control+Shift+F_ — keyboard button names are considered proper nouns.
- _Accept the terms of the License Agreement_ — License Agreement is a proper noun.
- _Side-by-side layout_ — only the first word of a hyphenated phase is capitalized.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# CLion Plugin Development

<link-summary>Introduction to developing plugins for CLion.</link-summary>

<var name="productID" value="clion"/>
<var name="marketplaceProductID" value="clion"/>
<include from="snippets.md" element-id="jetbrainsIDE_TLDR"/>

[CLion](https://www.jetbrains.com/clion/) is an IntelliJ Platform-based product.
Plugin projects for CLion can be developed using [IntelliJ IDEA](idea.md).

## CLion Plugin Setup

> When targeting 2020.3, see this [migration guide](https://blog.jetbrains.com/clion/2020/12/migration-guide-for-plugins-2020-3/).
>
{style="warning"}

### Gradle Build Script

<tabs>
<tab title="IntelliJ Platform Gradle Plugin (2.x)">

Define a dependency using [`clion()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md), see _Versions_ link on top of this page for all available versions.
See [](tools_intellij_platform_gradle_plugin.md#dependenciesLocalPlatform) for using a local installation.

A dependency on the bundled `com.intellij.clion` plugin must be added using the [`bundledPlugin()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins) helper.

Minimum <path>build.gradle.kts</path> setup:

```kotlin
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    clion("<versionNumber>")
    bundledPlugin("com.intellij.clion")
  }
}
```

</tab>

<tab title="Gradle IntelliJ Plugin (1.x)">

The configuration of CLion plugin projects follows the methods described in [Configuring Plugin Projects using a Product-Specific Attribute](dev_alternate_products.md#using-a-product-specific-attribute), and [Configuring the plugin.xml File](dev_alternate_products.md#configuring-pluginxml).

The table below summarizes the [](tools_gradle_intellij_plugin.md) attributes to set in the plugin project's Gradle build script.
Click on an entry in the table's *Attribute* column to go to the documentation about that attribute.

| `gradle-intellij-plugin` Attribute                                                               | Attribute Value                                                                |
|--------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|
| [`intellij.type`](tools_gradle_intellij_plugin.md#intellij-extension-type)                       | `CL` for the product CLion.                                                    |
| [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version)                 | Set to the targeted CLion version, e.g. `2019.3.1`.                            |
| [`intellij.plugins`](tools_gradle_intellij_plugin.md#intellij-extension-plugins)                 | No specific declaration is needed.                                             |
| [`intellij.downloadSources`](tools_gradle_intellij_plugin.md#intellij-extension-downloadsources) | `false` is required because no public source code is available.                |
| [`runIde.ideDir`](tools_gradle_intellij_plugin.md#tasks-runide-idedir)                           | Not needed; the Development Instance will automatically match `intellij.type`. |

</tab>
</tabs>

### plugin.xml

The dependency on the CLion APIs must be declared in the <path>[plugin.xml](plugin_configuration_file.md)</path> file.
As described in [Modules Specific to Functionality](plugin_compatibility.md#modules-specific-to-functionality) table, the [`<depends>`](plugin_configuration_file.md#idea-plugin__depends) tags must declare `com.intellij.modules.clion` module dependency,
or `com.intellij.clion` plugin dependency when targeting only versions 2020.3+.

## Available CLion APIs

> See [](clion_extension_point_list.md) for the complete list.
>
{style="note"}

Use the [Exploring APIs as a Consumer](plugin_compatibility.md#exploring-apis-as-a-consumer) process to identify the JAR files under the External Library `Gradle:com.jetbrains:clion:<version>`.
Test your plugin with versions of CLion you intend to support.

## Open Source Plugins for CLion

When learning new APIs, it is helpful to have some representative projects for reference:

* [C/C++ Coverage](https://github.com/zero9178/C-Cpp-Coverage-for-CLion)
* [C/C++ Single File Execution](https://github.com/corochann/SingleFileExecutionPlugin)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<!-- EP List Directory: /CIDR/ -->

# CLion Extension Point and Listener List

<link-summary>Overview of Extension Points and Listeners for CLion.</link-summary>

<tldr>

**Product-Specific Plugin Development**: [CLion](clion.md)

</tldr>

145 Extension Points and 45 Listeners

See [](intellij_platform_extension_point_list.md) for IntelliJ Platform.

<include from="snippets.md" element-id="ep_list_legend"/>

## CLion

### CLion - Listeners


| Topic | Listener |
|-------|----------|
| [CubeMXManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.clion.embedded.stm32cubemx.CubeMXManager.CubeStatusListener)  | `CubeStatusListener` |
| [WestConfigListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.clion.west.config.WestConfigListener)  | `WestConfigListener` |
| [Listener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.clion.west.settings.WestSettings.Listener)  | `Listener` |
| [FileSymbolTablesCache#OUT_OF_CODE_BLOCK_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.psi.util.PsiModificationTracker.Listener)  ![Project-Level][project-level] | [`Listener`](%gh-ic%/platform/core-api/src/com/intellij/psi/util/PsiModificationTracker.java) |
| [ConsistencyErrorTopicListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.rml.dfa.utils.ConsistencyErrorTopicListener)  | `ConsistencyErrorTopicListener` |
| [CMakeSettingsListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cpp.cmake.CMakeSettingsListener)  | `CMakeSettingsListener` |
| [Listener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cpp.cmake.python.CMakePythonSdkService.Companion.Listener)  | `Listener` |
| [Listener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cpp.cmake.python.CMakePythonSettingListenerService.Companion.Listener)  | `Listener` |
| [Listener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cpp.cmake.python.CMakePythonSettingsService.Listener)  | `Listener` |
| [CMakeWorkspaceListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cpp.cmake.workspace.CMakeWorkspaceListener)  | `CMakeWorkspaceListener` |
| [CompDBSettingsListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cpp.compdb.settings.CompDBSettingsListener)  | `CompDBSettingsListener` |
| [CLionExternalBuildManagerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cpp.execution.external.build.CLionExternalBuildManagerListener)  | `CLionExternalBuildManagerListener` |
| [ClionProjectToolManagerListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cpp.execution.external.build.ClionProjectToolManagerListener)  | `ClionProjectToolManagerListener` |
| [MakefileBuildTargetsManagerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cpp.makefile.execution.build.MakefileBuildTargetsManagerListener)  | `MakefileBuildTargetsManagerListener` |
| [MakefileSettingsListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cpp.makefile.settings.MakefileSettingsListener)  | `MakefileSettingsListener` |
| [CPPToolchainsConfigurable#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cpp.toolchains.CPPToolchainsConfigurable.Listener)  | `Listener` |
| [CPPToolchainsListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cpp.toolchains.CPPToolchainsListener)  | `CPPToolchainsListener` |
| [ExecutableListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.execution.CidrRunConfigurationExecutableEditor.ExecutableListener)  | `ExecutableListener` |
| [CidrBuildListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.execution.build.CidrBuildListener)  ![Project-Level][project-level] | `CidrBuildListener` |
| [CidrHighlighterNotifierService#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.execution.testing.CidrHighlighterNotifierService.LineMarkNotifier)  | `LineMarkNotifier` |
| [CidrTestScopeService#TEST_SCOPE_LISTENER_TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.execution.testing.CidrTestScopeService.TestScopeListener)  | `TestScopeListener` |
| [ExternalWorkspaceListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.external.system.workspace.ExternalWorkspaceListener)  | `ExternalWorkspaceListener` |
| [ClangLanguageServiceProviderListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.lang.daemon.clang.clangd.ClangLanguageServiceProviderListener)  | `ClangLanguageServiceProviderListener` |
| [ClangServerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.lang.daemon.clang.clangd.lsp.server.ClangServerListener)  | `ClangServerListener` |
| [ClangTelemetryListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.lang.daemon.clang.clangd.lsp.telemetry.ClangTelemetryListener)  | `ClangTelemetryListener` |
| [ClangMemoryUsageWatchDogListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.lang.daemon.clang.clangd.memory.ClangMemoryUsageWatchDogListener)  | `ClangMemoryUsageWatchDogListener` |
| [OCLanguageServiceReparsingPassListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.lang.daemon.clang.clangd.reparsing.OCLanguageServiceReparsingPassListener)  | `OCLanguageServiceReparsingPassListener` |
| [ClangdSettingsListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.lang.daemon.clang.clangd.settings.ClangdSettingsListener)  | `ClangdSettingsListener` |
| [ClangdSettingsListener#TOPIC_UI](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.lang.daemon.clang.clangd.settings.ClangdSettingsListener)  | `ClangdSettingsListener` |
| [CidrInjectionListener#INJECTION_TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.lang.editor.CidrInjectionListener)  | `CidrInjectionListener` |
| [OCInclusionContextListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.lang.preprocessor.OCInclusionContextListener)  | `OCInclusionContextListener` |
| [FileSymbolTableCacheListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.lang.symbols.symtable.FileSymbolTableCacheListener)  | `FileSymbolTableCacheListener` |
| [FileSymbolTablesPackListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.lang.symbols.symtable.FileSymbolTablesPackListener)  | `FileSymbolTablesPackListener` |
| [OCFileSymbolTableListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.lang.symbols.symtable.OCFileSymbolTableListener)  | `OCFileSymbolTableListener` |
| [OCSymbolBuildingListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.lang.symbols.symtable.building.OCSymbolBuildingListener)  | `OCSymbolBuildingListener` |
| [OCWorkspaceListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.lang.workspace.OCWorkspaceListener)  | `OCWorkspaceListener` |
| [Listener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.meson.project.MesonModelManager.Listener)  | `Listener` |
| [MesonSettingsListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.meson.settings.MesonSettingsListener)  | `MesonSettingsListener` |
| [PackageManagerEventListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.packagemanager.vcpkg.PackageManagerEventListener)  | `PackageManagerEventListener` |
| [CidrRootConfigurationListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.project.CidrRootConfigurationListener)  | `CidrRootConfigurationListener` |
| [CidrWorkspaceInstantaneousStateChangeListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.project.workspace.CidrWorkspaceInstantaneousStateChangeListener)  ![Project-Level][project-level] | `CidrWorkspaceInstantaneousStateChangeListener` |
| [CidrWorkspaceListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.project.workspace.CidrWorkspaceListener)  | `CidrWorkspaceListener` |
| [OCRootsSynchronizerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.project.workspace.OCRootsSynchronizerListener)  | `OCRootsSynchronizerListener` |
| [RemoteDeploymentListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.system.RemoteDeploymentListener)  | `RemoteDeploymentListener` |
| [AllowedModules#INVALIDATION_TOPIC](https://jb.gg/ipe/listeners?topics=java.lang.Runnable)  | `Runnable` |


### CidrClangdPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [clangd.clangTidyAnnotationApplier](https://jb.gg/ipe?extensions=clangd.clangTidyAnnotationApplier) | `ClangTidyAnnotationApplier` |
| [clangd.clangTidyResolveInfoProvider](https://jb.gg/ipe?extensions=clangd.clangTidyResolveInfoProvider) | `ClangTidyResolveInfoProvider` |
| [clangd.clangdAnnotatorUtil](https://jb.gg/ipe?extensions=clangd.clangdAnnotatorUtil) | `ClangAnnotatorUtil` |
| [clangd.clangdBridge](https://jb.gg/ipe?extensions=clangd.clangdBridge) | `ClangdBridgeInterface` |
| [clangd.externalCompletionProvider](https://jb.gg/ipe?extensions=clangd.externalCompletionProvider) ![DumbAware][dumb-aware] | `ExternalCompletionProvider` |

### CidrDebuggerPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.debugger.backendConsoleInjectionHelper](https://jb.gg/ipe?extensions=cidr.debugger.backendConsoleInjectionHelper) | `BackendConsoleInjectionHelper` |
| [cidr.debugger.customDebuggerProvider](https://jb.gg/ipe?extensions=cidr.debugger.customDebuggerProvider) | `CidrCustomDebuggerProvider` |
| [cidr.debugger.debugProcessConfigurator](https://jb.gg/ipe?extensions=cidr.debugger.debugProcessConfigurator) | `CidrDebugProcessConfigurator` |
| [cidr.debugger.debuggerMessagesProvider](https://jb.gg/ipe?extensions=cidr.debugger.debuggerMessagesProvider) ![Internal][internal] | `CidrDebuggerMessagesProvider` |
| [cidr.debugger.disasmRegisterProvider](https://jb.gg/ipe?extensions=cidr.debugger.disasmRegisterProvider) ![Experimental][experimental] | `CidrDisasmRegisterProvider` |
| [cidr.debugger.editorsExtension](https://jb.gg/ipe?extensions=cidr.debugger.editorsExtension) | `CidrDebuggerEditorsExtension` |
| [cidr.debugger.formatters.natvis.provider](https://jb.gg/ipe?extensions=cidr.debugger.formatters.natvis.provider) | `NatvisFileProvider` |
| [cidr.debugger.frameChildrenContributor](https://jb.gg/ipe?extensions=cidr.debugger.frameChildrenContributor) | `CidrFrameChildrenContributor` |
| [cidr.debugger.fullValueEvaluatorProvider](https://jb.gg/ipe?extensions=cidr.debugger.fullValueEvaluatorProvider) ![Experimental][experimental] | `CidrFullValueEvaluatorProvider` |
| [cidr.debugger.imageViewerProvider](https://jb.gg/ipe?extensions=cidr.debugger.imageViewerProvider) | `CidrImageViewerProvider` |
| [cidr.debugger.languageSupport](https://jb.gg/ipe?extensions=cidr.debugger.languageSupport) | `CidrDebuggerLanguageSupport` |
| [cidr.debugger.lineBreakpointFileTypesProvider](https://jb.gg/ipe?extensions=cidr.debugger.lineBreakpointFileTypesProvider) | `CidrLineBreakpointFileTypesProvider` |
| [cidr.debugger.localVariablesFilterHandler](https://jb.gg/ipe?extensions=cidr.debugger.localVariablesFilterHandler) | `LocalVariablesFilterHandler` |
| [cidr.debugger.suspendThreadSelector](https://jb.gg/ipe?extensions=cidr.debugger.suspendThreadSelector) | `CidrSuspendThreadSelector` |
| [cidr.debugger.valueRendererExtension](https://jb.gg/ipe?extensions=cidr.debugger.valueRendererExtension) ![Non-Dynamic][non-dynamic] | `ValueRendererExtension` |
| [cidr.debugger.valueRendererFactory](https://jb.gg/ipe?extensions=cidr.debugger.valueRendererFactory) ![Non-Dynamic][non-dynamic] | `ValueRendererFactory` |

### CidrExecutionPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.buildConfigurationProvider](https://jb.gg/ipe?extensions=cidr.buildConfigurationProvider) | `CidrBuildConfigurationProvider` |
| [cidr.projectTaskContextProvider](https://jb.gg/ipe?extensions=cidr.projectTaskContextProvider) | `CidrProjectTaskContextProvider` |
| [cidr.resolveConfigurationProvider](https://jb.gg/ipe?extensions=cidr.resolveConfigurationProvider) | `CidrResolveConfigurationProvider` |
| [cidr.runConfigurationExtension](https://jb.gg/ipe?extensions=cidr.runConfigurationExtension) ![Non-Dynamic][non-dynamic] | `CidrRunConfigurationExtensionBase` |
| [cidr.targetConfigurationHelper](https://jb.gg/ipe?extensions=cidr.targetConfigurationHelper) | `CidrTargetConfigurationHelper` |
| [cidr.testFrameworkDetector](https://jb.gg/ipe?extensions=cidr.testFrameworkDetector) ![Non-Dynamic][non-dynamic] | `CidrTestFrameworkDetector` |

### CidrLangBase.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.lang.annotatorInspectionToolProvider](https://jb.gg/ipe?extensions=cidr.lang.annotatorInspectionToolProvider) ![Obsolete][obsolete] ![Non-Dynamic][non-dynamic] | [`NotNullProducer`](%gh-ic%/platform/util/src/com/intellij/util/NotNullProducer.java) |
| [cidr.lang.dfaInspectionConfig](https://jb.gg/ipe?extensions=cidr.lang.dfaInspectionConfig) ![Non-Dynamic][non-dynamic] | `OCDFAInspectionConfig` |
| [cidr.lang.externalInspections](https://jb.gg/ipe?extensions=cidr.lang.externalInspections) | `OCExternalInspections` |
| [cidr.lang.fileTypeHelper](https://jb.gg/ipe?extensions=cidr.lang.fileTypeHelper) ![Non-Dynamic][non-dynamic] | `OCFileTypeHelper` |
| [cidr.lang.knownModuleDetector](https://jb.gg/ipe?extensions=cidr.lang.knownModuleDetector) ![Internal][internal] | `CidrKnownModuleDetector` |
| [cidr.lang.langUtils](https://jb.gg/ipe?extensions=cidr.lang.langUtils) ![Non-Dynamic][non-dynamic] | `OCLanguageUtilsBase` |
| [cidr.lang.languageKindHelper](https://jb.gg/ipe?extensions=cidr.lang.languageKindHelper) ![Non-Dynamic][non-dynamic] | `OCLanguageKindCalculatorHelper` |
| [cidr.lang.languageKindProvider](https://jb.gg/ipe?extensions=cidr.lang.languageKindProvider) ![Non-Dynamic][non-dynamic] | `OCLanguageKindProvider` |
| [cidr.lang.navigatableSymbolSearcherBridge](https://jb.gg/ipe?extensions=cidr.lang.navigatableSymbolSearcherBridge) ![Non-Dynamic][non-dynamic] | `NavigatableSymbolSearcherBridge` |
| [cidr.lang.newFileLangBackendHandler](https://jb.gg/ipe?extensions=cidr.lang.newFileLangBackendHandler) ![Non-Dynamic][non-dynamic] | `OCNewFileLangBackendHandler` |
| [cidr.lang.newFileModelHandlerProvider](https://jb.gg/ipe?extensions=cidr.lang.newFileModelHandlerProvider) ![Non-Dynamic][non-dynamic] | `OCNewFileProjectModelHandlerProvider` |
| [cidr.lang.ownModuleDetector](https://jb.gg/ipe?extensions=cidr.lang.ownModuleDetector) | `CidrOwnModuleDetector` |
| [cidr.lang.projectWizardFilesFormatter](https://jb.gg/ipe?extensions=cidr.lang.projectWizardFilesFormatter) ![Non-Dynamic][non-dynamic] | `CidrProjectWizardFilesFormatter` |
| [cidr.lang.standaloneInspectionToolProvider](https://jb.gg/ipe?extensions=cidr.lang.standaloneInspectionToolProvider) ![Obsolete][obsolete] ![Non-Dynamic][non-dynamic] | [`NotNullProducer`](%gh-ic%/platform/util/src/com/intellij/util/NotNullProducer.java) |

### CidrLangPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.lang.annotatorHelper](https://jb.gg/ipe?extensions=cidr.lang.annotatorHelper) ![Non-Dynamic][non-dynamic] | `OCAnnotatorHelper` |
| [cidr.lang.autoImportHelper](https://jb.gg/ipe?extensions=cidr.lang.autoImportHelper) ![Non-Dynamic][non-dynamic] | `OCAutoImportHelper` |
| [cidr.lang.buildSymbolsVeto](https://jb.gg/ipe?extensions=cidr.lang.buildSymbolsVeto) ![Non-Dynamic][non-dynamic] | `OCBuildSymbolsVetoExtension` |
| [cidr.lang.callStructureProvider](https://jb.gg/ipe?extensions=cidr.lang.callStructureProvider) ![Non-Dynamic][non-dynamic] | `PolyglotCallStructureProvider` |
| [cidr.lang.customHeaderProvider](https://jb.gg/ipe?extensions=cidr.lang.customHeaderProvider) ![Non-Dynamic][non-dynamic] | `CustomHeaderProvider` |
| [cidr.lang.doxygenExtension](https://jb.gg/ipe?extensions=cidr.lang.doxygenExtension) ![Non-Dynamic][non-dynamic] | `Doxygen` |
| [cidr.lang.externalResolver](https://jb.gg/ipe?extensions=cidr.lang.externalResolver) | `OCExternalResolver` |
| [cidr.lang.fileToBuildSymbolsCollector](https://jb.gg/ipe?extensions=cidr.lang.fileToBuildSymbolsCollector) ![Non-Dynamic][non-dynamic] | `FileToBuildSymbolsCollector` |
| [cidr.lang.foreignUsagesRenameProcessor](https://jb.gg/ipe?extensions=cidr.lang.foreignUsagesRenameProcessor) ![Non-Dynamic][non-dynamic] | `OCForeignUsagesRenameProcessor` |
| [cidr.lang.groupedFileNaming](https://jb.gg/ipe?extensions=cidr.lang.groupedFileNaming) ![Non-Dynamic][non-dynamic] | `OCGroupedFileNaming` |
| [cidr.lang.includeHelper](https://jb.gg/ipe?extensions=cidr.lang.includeHelper) ![Non-Dynamic][non-dynamic] | `OCIncludeHelper` |
| [cidr.lang.includeHierarchyProvider](https://jb.gg/ipe?extensions=cidr.lang.includeHierarchyProvider) ![Non-Dynamic][non-dynamic] | [`HierarchyProvider`](%gh-ic%/platform/lang-api/src/com/intellij/ide/hierarchy/HierarchyProvider.java) |
| [cidr.lang.initialBuildingActivity](https://jb.gg/ipe?extensions=cidr.lang.initialBuildingActivity) ![Non-Dynamic][non-dynamic] | `OCInitialBuildingActivity` |
| [cidr.lang.languageKindContributor](https://jb.gg/ipe?extensions=cidr.lang.languageKindContributor) ![Non-Dynamic][non-dynamic] | `OCLanguageKindContributor` |
| [cidr.lang.libraryFileConfigurationProvider](https://jb.gg/ipe?extensions=cidr.lang.libraryFileConfigurationProvider) ![Non-Dynamic][non-dynamic] | `OCLibraryFileResolveConfigurationProvider` |
| [cidr.lang.moduleBuilder.statisticsCollectorFactory](https://jb.gg/ipe?extensions=cidr.lang.moduleBuilder.statisticsCollectorFactory) ![Non-Dynamic][non-dynamic] | `ModuleCacheBuilderStatisticsCollectorFactory` |
| [cidr.lang.moduleMapManagerRequestor](https://jb.gg/ipe?extensions=cidr.lang.moduleMapManagerRequestor) ![Non-Dynamic][non-dynamic] | `ModuleMapManagerRequestor` |
| [cidr.lang.moduleMapPlatformTypeProvider](https://jb.gg/ipe?extensions=cidr.lang.moduleMapPlatformTypeProvider) ![Non-Dynamic][non-dynamic] | `ModuleMapPlatformTypeProvider` |
| [cidr.lang.moduleMapRootSerializer](https://jb.gg/ipe?extensions=cidr.lang.moduleMapRootSerializer) ![Non-Dynamic][non-dynamic] | `ModuleMapRootSerializer` |
| [cidr.lang.moduleMapSearchRootProvider](https://jb.gg/ipe?extensions=cidr.lang.moduleMapSearchRootProvider) ![Non-Dynamic][non-dynamic] | `ModuleMapSearchRootProvider` |
| [cidr.lang.moduleResolver](https://jb.gg/ipe?extensions=cidr.lang.moduleResolver) ![Non-Dynamic][non-dynamic] | `OCModuleResolver` |
| [cidr.lang.ocAdditionalFileSymbolTableBuilder](https://jb.gg/ipe?extensions=cidr.lang.ocAdditionalFileSymbolTableBuilder) ![Non-Dynamic][non-dynamic] | `OCAdditionalFileSymbolTableBuilder` |
| [cidr.lang.ocDirectInheritorsSearch](https://jb.gg/ipe?extensions=cidr.lang.ocDirectInheritorsSearch) ![Non-Dynamic][non-dynamic] | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [cidr.lang.ocInclusionContextLazyGetDefinitionProvider](https://jb.gg/ipe?extensions=cidr.lang.ocInclusionContextLazyGetDefinitionProvider) ![Non-Dynamic][non-dynamic] | `OCInclusionContextLazyGetDefinitionProvider` |
| [cidr.lang.ocResolveRootAndConfigurationProvider](https://jb.gg/ipe?extensions=cidr.lang.ocResolveRootAndConfigurationProvider) ![Non-Dynamic][non-dynamic] | `OCResolveRootAndConfigurationProvider` |
| [cidr.lang.renameHandlerExtension](https://jb.gg/ipe?extensions=cidr.lang.renameHandlerExtension) ![Non-Dynamic][non-dynamic] | `OCRenameHandlerExtension` |
| [cidr.lang.renameProcessorExtension](https://jb.gg/ipe?extensions=cidr.lang.renameProcessorExtension) ![Non-Dynamic][non-dynamic] | `OCRenameProcessorExtension` |
| [cidr.lang.resourceCompletionProviders](https://jb.gg/ipe?extensions=cidr.lang.resourceCompletionProviders) ![Non-Dynamic][non-dynamic] | `OCResourceCompletionProviders` |
| [cidr.lang.resourceFilesProvider](https://jb.gg/ipe?extensions=cidr.lang.resourceFilesProvider) ![Non-Dynamic][non-dynamic] | `OCResourceFilesProvider` |
| [cidr.lang.searchHelper](https://jb.gg/ipe?extensions=cidr.lang.searchHelper) ![Non-Dynamic][non-dynamic] | `OCSearchHelper` |
| [cidr.lang.serializerProvider](https://jb.gg/ipe?extensions=cidr.lang.serializerProvider) ![Non-Dynamic][non-dynamic] | `SerializerProvider` |
| [cidr.lang.symbolTableProvider](https://jb.gg/ipe?extensions=cidr.lang.symbolTableProvider) ![Non-Dynamic][non-dynamic] | `FileSymbolTableProvider` |
| [cidr.lang.testFramework](https://jb.gg/ipe?extensions=cidr.lang.testFramework) ![Non-Dynamic][non-dynamic] | `OCTestFramework` |
| [cidr.lang.typeStructureProvider](https://jb.gg/ipe?extensions=cidr.lang.typeStructureProvider) ![Non-Dynamic][non-dynamic] | `PolyglotTypeStructureProvider` |
| [cidr.requiredForCidrSmartMode](https://jb.gg/ipe?extensions=cidr.requiredForCidrSmartMode) ![Non-Dynamic][non-dynamic] | `RequiredForCidrSmartMode` |

### CidrProjectModelPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.lang.appleFrameworkFilter](https://jb.gg/ipe?extensions=cidr.lang.appleFrameworkFilter) ![Project-Level][project-level] | `AppleFrameworkFilter` |
| [cidr.lang.codeInsightUnavailabilityHighlighter](https://jb.gg/ipe?extensions=cidr.lang.codeInsightUnavailabilityHighlighter) ![Non-Dynamic][non-dynamic] | `OCCodeInsightUnavailabilityHighlighter` |
| [cidr.lang.compilerKindProvider](https://jb.gg/ipe?extensions=cidr.lang.compilerKindProvider) | `OCCompilerKindProvider` |
| [cidr.lang.compilerResolver](https://jb.gg/ipe?extensions=cidr.lang.compilerResolver) ![Project-Level][project-level] | `OCCompilerResolver` |
| [cidr.lang.fileScopeProvider](https://jb.gg/ipe?extensions=cidr.lang.fileScopeProvider) ![Non-Dynamic][non-dynamic] | `OCFileScopeProvider` |
| [cidr.lang.fileWideHighlighter](https://jb.gg/ipe?extensions=cidr.lang.fileWideHighlighter) ![Non-Dynamic][non-dynamic] ![DumbAware][dumb-aware] | `FileWideHighlighter` |
| [cidr.lang.headerSearchRootFactory](https://jb.gg/ipe?extensions=cidr.lang.headerSearchRootFactory) | `HeadersSearchRootFactory` |
| [cidr.lang.resolveConfigurationSelector](https://jb.gg/ipe?extensions=cidr.lang.resolveConfigurationSelector) | `OCResolveConfigurationSelector` |
| [cidr.projectModel.deserializingVetoCondition](https://jb.gg/ipe?extensions=cidr.projectModel.deserializingVetoCondition) | `OCWorkspaceDeserializingVetoCondition` |
| [cidr.projectModel.msvcPchHelper](https://jb.gg/ipe?extensions=cidr.projectModel.msvcPchHelper) | `OCMsvcPchHelper` |
| [cidr.projectModel.runAfterOCWorkspaceIsInitialized](https://jb.gg/ipe?extensions=cidr.projectModel.runAfterOCWorkspaceIsInitialized) ![Non-Dynamic][non-dynamic] | `RunAfterOCWorkspaceIsInitialized` |
| [cidr.projectModel.runAfterOCWorkspaceIsLoaded](https://jb.gg/ipe?extensions=cidr.projectModel.runAfterOCWorkspaceIsLoaded) ![Non-Dynamic][non-dynamic] | `RunAfterOCWorkspaceIsLoaded` |
| [cidr.projectModel.supportedFileChecker](https://jb.gg/ipe?extensions=cidr.projectModel.supportedFileChecker) ![Non-Dynamic][non-dynamic] | `OCSupportedFileChecker` |
| [cidr.projectModel.unloadedResolveContextsManager](https://jb.gg/ipe?extensions=cidr.projectModel.unloadedResolveContextsManager) | `OCUnloadedResolveContextsManager` |
| [cidr.projectModel.workspaceLoadedCheck](https://jb.gg/ipe?extensions=cidr.projectModel.workspaceLoadedCheck) | `OCWorkspaceLoadedChecker` |
| [com.intellij.cidrCommandLineParser](https://jb.gg/ipe?extensions=com.intellij.cidrCommandLineParser) ![Project-Level][project-level] | `CidrCommandLineParser` |

### CidrTestingPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.lang.testing.potentialTestHolderRootsProvider](https://jb.gg/ipe?extensions=cidr.lang.testing.potentialTestHolderRootsProvider) | `CidrPotentialTestHolderRootsProvider` |
| [cidr.lang.testing.testIndexContributor](https://jb.gg/ipe?extensions=cidr.lang.testing.testIndexContributor) | `CidrTestIndexContributor` |

### CidrToolchainsPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.devEnvironmentChecker](https://jb.gg/ipe?extensions=cidr.devEnvironmentChecker) ![Non-Dynamic][non-dynamic] | `DevEnvironmentChecker` |

### CidrUtilExecutionPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.util.pluginPathMapper](https://jb.gg/ipe?extensions=cidr.util.pluginPathMapper) | `CidrPluginPathMapper` |

### CidrWorkspaceModelCore.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.markRootActionAvailability](https://jb.gg/ipe?extensions=cidr.markRootActionAvailability) ![Non-Dynamic][non-dynamic] | `CidrMarkRootActionAvailability` |
| [cidr.project.is.known.checker](https://jb.gg/ipe?extensions=cidr.project.is.known.checker) ![Non-Dynamic][non-dynamic] | `KnownProjectChecker` |
| [cidr.project.notifications.editorNotificationWarningProvider](https://jb.gg/ipe?extensions=cidr.project.notifications.editorNotificationWarningProvider) | `EditorNotificationWarningProvider` |
| [cidr.project.popup.projectFixesProvider](https://jb.gg/ipe?extensions=cidr.project.popup.projectFixesProvider) | `ProjectFixesProvider` |
| [cidr.project.rootsBuilderProvider](https://jb.gg/ipe?extensions=cidr.project.rootsBuilderProvider) ![Non-Dynamic][non-dynamic] | `Provider` |
| [cidr.project.widget.widgetStatusProvider](https://jb.gg/ipe?extensions=cidr.project.widget.widgetStatusProvider) | `WidgetStatusProvider` |
| [cidr.project.workspaceProvider](https://jb.gg/ipe?extensions=cidr.project.workspaceProvider) ![Non-Dynamic][non-dynamic] | `CidrWorkspaceProvider` |
| [com.jetbrains.cidr.fus.projectModelTypeProvider](https://jb.gg/ipe?extensions=com.jetbrains.cidr.fus.projectModelTypeProvider) | `CidrProjectModelTypeProvider` |

### ClangFormatPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.clangFormatProvider](https://jb.gg/ipe?extensions=com.intellij.clangFormatProvider) ![Non-Dynamic][non-dynamic] | `ClangFormatChangeSettingsProvider` |

### CLionCMakeCore.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.cmake.buildStep](https://jb.gg/ipe?extensions=com.intellij.cmake.buildStep) | `CMakeBuildProcessListenerCreator` |
| [com.intellij.cmake.cmakeSettingsFlavorProvider](https://jb.gg/ipe?extensions=com.intellij.cmake.cmakeSettingsFlavorProvider) | `CMakeSettingsFlavorProvider` |
| [com.intellij.cmake.flavorProvider](https://jb.gg/ipe?extensions=com.intellij.cmake.flavorProvider) | `CMakeFlavorProvider` |
| [com.intellij.cmake.languageKindRecognizer](https://jb.gg/ipe?extensions=com.intellij.cmake.languageKindRecognizer) | `CMakeLanguageKindRecognizer` |
| [com.intellij.cmake.loadOnStartupDependency](https://jb.gg/ipe?extensions=com.intellij.cmake.loadOnStartupDependency) | `FutureProvider` |
| [com.intellij.cmake.profileLoadContributor](https://jb.gg/ipe?extensions=com.intellij.cmake.profileLoadContributor) | `FutureProvider` |
| [com.intellij.cmake.runnerStep](https://jb.gg/ipe?extensions=com.intellij.cmake.runnerStep) ![Non-Dynamic][non-dynamic] | `CMakeRunnerStep` |
| [com.intellij.cmake.targetToConfigProvider](https://jb.gg/ipe?extensions=com.intellij.cmake.targetToConfigProvider) | `CMakeTargetToConfigProvider` |
| [com.intellij.cmake.workspace.compilerEnvironmentContributor](https://jb.gg/ipe?extensions=com.intellij.cmake.workspace.compilerEnvironmentContributor) | `CMakeCompilerEnvironmentContributor` |

### CLionExecutionPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.debugger.targets.provider](https://jb.gg/ipe?extensions=cidr.debugger.targets.provider) | `DebugTargetsProvider` |
| [clion.buildToolWindowActivator.contributor](https://jb.gg/ipe?extensions=clion.buildToolWindowActivator.contributor) | `Contributor` |
| [clion.compoundConfigurationContext](https://jb.gg/ipe?extensions=clion.compoundConfigurationContext) | `CidrCompoundConfigurationContext` |
| [clion.externalConfigurationProvider](https://jb.gg/ipe?extensions=clion.externalConfigurationProvider) | `CLionExternalConfigurationProvider` |
| [clion.showAssembly.funcInfoProvider](https://jb.gg/ipe?extensions=clion.showAssembly.funcInfoProvider) | `CLionShowAssemblyFuncInfoProvider` |

### CLionMakefilePlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [clion.makefile.buildSystemDetector](https://jb.gg/ipe?extensions=clion.makefile.buildSystemDetector) | `MkBuildSystemDetector` |
| [clion.makefile.projectPreConfigurator](https://jb.gg/ipe?extensions=clion.makefile.projectPreConfigurator) | `MkProjectPreConfigurator` |

### CLionWizard.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.openWizardStepProvider](https://jb.gg/ipe?extensions=cidr.openWizardStepProvider) | `OpenWizardStepProvider` |

### CMakePsiPlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.cmake.bundledDocumentationProvider](https://jb.gg/ipe?extensions=com.intellij.cmake.bundledDocumentationProvider) | `CMakeBundledDocumentationProvider` |
| [com.intellij.cmake.completion.environmentProvider](https://jb.gg/ipe?extensions=com.intellij.cmake.completion.environmentProvider) | `CMakeEnvironmentVariableProvider` |
| [com.intellij.cmake.fileLocationProvider](https://jb.gg/ipe?extensions=com.intellij.cmake.fileLocationProvider) | `CMakeFileLocationProvider` |

### com.intellij.cidr.uml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.uml.dragAndDropReceiver](https://jb.gg/ipe?extensions=cidr.uml.dragAndDropReceiver) | `UmlDiagramDragAndDropReceiver` |
| [cidr.uml.umlDiagramProvider](https://jb.gg/ipe?extensions=cidr.uml.umlDiagramProvider) | `UmlDiagramLanguage` |

### intellij.cidr.coverage.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.coverage.coverageComposer](https://jb.gg/ipe?extensions=cidr.coverage.coverageComposer) ![Non-Dynamic][non-dynamic] | `CidrCoverageComposer` |
| [cidr.coverage.coverageComposerRunner](https://jb.gg/ipe?extensions=cidr.coverage.coverageComposerRunner) ![Non-Dynamic][non-dynamic] | `CidrCoverageComposerRunner` |
| [cidr.coverage.coverageDataFileProvider](https://jb.gg/ipe?extensions=cidr.coverage.coverageDataFileProvider) ![Non-Dynamic][non-dynamic] | `CidrCoverageDataFileProvider` |
| [cidr.coverage.coverageErrorProcessor](https://jb.gg/ipe?extensions=cidr.coverage.coverageErrorProcessor) ![Non-Dynamic][non-dynamic] | `CidrCoverageErrorProcessor` |
| [cidr.coverage.coverageViewExtensionProvider](https://jb.gg/ipe?extensions=cidr.coverage.coverageViewExtensionProvider) ![Non-Dynamic][non-dynamic] | `CidrCoverageViewExtensionProvider` |
| [cidr.coverage.gcovCoverageToolsProvider](https://jb.gg/ipe?extensions=cidr.coverage.gcovCoverageToolsProvider) ![Non-Dynamic][non-dynamic] | `GCovCoverageToolProvider` |
| [cidr.coverage.llvmCoverageToolsProvider](https://jb.gg/ipe?extensions=cidr.coverage.llvmCoverageToolsProvider) ![Non-Dynamic][non-dynamic] | `LLVMCoverageToolsProvider` |

### intellij.cidr.profiling.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.profiler.memory.environmentProvider](https://jb.gg/ipe?extensions=cidr.profiler.memory.environmentProvider) ![Non-Dynamic][non-dynamic] | `MemoryProfileEnvironmentProvider` |
| [cidr.profiler.memory.presentation](https://jb.gg/ipe?extensions=cidr.profiler.memory.presentation) ![Non-Dynamic][non-dynamic] | `MemoryProfilePresentation` |
| [cidr.profiler.valgrind.disabler](https://jb.gg/ipe?extensions=cidr.profiler.valgrind.disabler) | `ValgrindDisabler` |
| [cidr.profiler.valgrind.executionContext](https://jb.gg/ipe?extensions=cidr.profiler.valgrind.executionContext) | `ValgrindExecutionContext` |

### intellij.cidr.translateCode.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.showAssembly.translatorProviders](https://jb.gg/ipe?extensions=cidr.showAssembly.translatorProviders) | `CidrTranslatorProvider` |

### intellij.clion.featuresTrainer.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [training.clion.lessons](https://jb.gg/ipe?extensions=training.clion.lessons) | `CLionExternalLessons` |

### intellij.clion.runFile.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.cpp.runFile.entryPointDetector](https://jb.gg/ipe?extensions=cidr.cpp.runFile.entryPointDetector) | `CppFileEntryPointDetector` |

### intellij.clion.west.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.clion.west.westPathContributor](https://jb.gg/ipe?extensions=com.intellij.clion.west.westPathContributor) | `WestPathContributor` |

### intellij.rml.dfa.devtools.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.rml.dfa.devtools.debug.provider](https://jb.gg/ipe?extensions=com.intellij.rml.dfa.devtools.debug.provider) | `DfaDebugProvider` |

### intellij.rml.dfa.impl.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.rml.dfa.impl.DfaDebugExtension](https://jb.gg/ipe?extensions=com.intellij.rml.dfa.impl.DfaDebugExtension) | `DfaDebugExtension` |
| [com.intellij.rml.dfa.ir.serialization.provider](https://jb.gg/ipe?extensions=com.intellij.rml.dfa.ir.serialization.provider) | `IrSerializationProvider` |

[deprecated]: https://img.shields.io/badge/-Deprecated-lightgrey?style=flat-square
[removal]: https://img.shields.io/badge/-Removal-red?style=flat-square
[obsolete]: https://img.shields.io/badge/-Obsolete-grey?style=flat-square
[experimental]: https://img.shields.io/badge/-Experimental-violet?style=flat-square
[internal]: https://img.shields.io/badge/-Internal-darkred?style=flat-square
[project-level]: https://img.shields.io/badge/-Project--Level-blue?style=flat-square
[non-dynamic]: https://img.shields.io/badge/-Non--Dynamic-orange?style=flat-square
[dumb-aware]: https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Code Completion

<link-summary>Implementing context-aware code completion in custom languages.</link-summary>

<tldr>

**Product Help:** [Code completion](https://www.jetbrains.com/help/idea/auto-completing-code.html)

</tldr>

<link-summary>Providing reference and generic code completion.</link-summary>

Two main types of code completion can be provided by custom language plugins: reference completion and contributor-based completion.

Reference completion is easier to implement, but supports only the basic completion action.
Contributor-based completion provides more features, supports all three completion types (basic, smart, and class name), and can be used, for example, to implement keyword completion.

### Reference Completion

To fill the completion list, the IDE calls [`PsiReference.getVariants()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReference.java) either on the reference at the caret location or on a dummy reference that would be placed at the caret.
This method needs to return an array of objects containing either strings, [`PsiElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java) instances or instances of the [`LookupElement`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/lookup/LookupElement.java) class (see [Lookup Items](#lookup-items) below).
If a [`PsiElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java) instance is returned in the array, the completion list shows the icon for the element.

The most common way to implement `getVariants()` is to use the same function for walking up the tree as in [`PsiReference.resolve()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReference.java), and a different implementation of [`PsiScopeProcessor`](%gh-ic%/platform/core-api/src/com/intellij/psi/scope/PsiScopeProcessor.java) which collects all declarations passed to its `execute()` method and returns them as an array for filling the completion list.

#### Symbol Reference Completion
<primary-label ref="2020.3"/>

> This API is currently in development and thus in experimental state.
>
{style="warning"}

To provide completion variants by a `PsiSymbolReference` implement
[`PsiCompletableReference`](%gh-ic%/platform/analysis-api/src/com/intellij/model/psi/PsiCompletableReference.java).

### Contributor-Based Completion

Implementing the [`CompletionContributor`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/completion/CompletionContributor.java) interface gives you the greatest control over the operation of code completion for your language.
Register in `com.intellij.completion.contributor` extension point and specify `language` attribute (unless it works on any supported language).

> Note that the Javadoc of that class contains a detailed FAQ for implementing code completion.
>
{style="note"}

The core scenario of using [`CompletionContributor`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/completion/CompletionContributor.java) consists of calling the `extend()` method and passing in the [Element Pattern](element_patterns.md) specifying the context in which this completion variant is applicable, as well as a *completion provider* which generates the items to show in the completion list.

Keep in mind that the pattern is checked against the leaf PSI element.
If you want to match a composite element, use `withParent()` or `withSuperParent()` methods.

If completion items do not depend on indexes (e.g., keywords), it can be marked as [dumb aware](indexing_and_psi_stubs.md#DumbAwareAPI).

**Examples:**
- [`CompletionContributor`](%gh-ij-plugins%/osmorc/src/org/osmorc/manifest/completion/OsgiManifestCompletionContributor.java) for completing keywords in MANIFEST.MF files.
- [Custom Language Support Tutorial: Completion Contributor](completion_contributor.md)

### Lookup Items
Items shown in the completion list are represented by instances of the [`LookupElement`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/lookup/LookupElement.java) interface.
These instances are typically created through the [`LookupElementBuilder`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/lookup/LookupElementBuilder.java) class.

For every lookup element, you can specify the following attributes:

* **Text** Shown left-aligned.
* **Tail text** Shown next to the main item text, is not used for prefix matching, and can be used, for example, to show the parameter list of the method.
* **Type text** Shown right-aligned in the lookup list and can be used to show the return type or containing class of a method, for example.
* **Icon**
* **Text attributes** Bold, Strikeout, etc.
* **Insert handler** The insert handler is a callback which is called when the item is selected and can be used to perform additional modifications of the text (for example, to put in the parentheses for a method call)

### Code Completion FAQ

#### Showing Completion Popup Programmatically

Use [`AutoPopupController.scheduleAutoPopup()`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/AutoPopupController.java).

#### Completion Popup Events

Use [`LookupListener`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/lookup/LookupListener.java) to receive notifications about completion popup lifecycle events.
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Documentation

<tldr>

**Product Help:** [Quick Documentation](https://www.jetbrains.com/help/idea/viewing-reference-information.html#inline-quick-documentation)

</tldr>

<link-summary>Documentation for code elements inside the editor.</link-summary>

Quick Documentation helps users by showing documentation, e.g., for classes, functions, or methods inside the editor.
Plugin authors implement
[`DocumentationProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/documentation/DocumentationProvider.java)
to show documentation for particular [PSI elements](psi_elements.md).

Implementations of `DocumentationProvider` can be registered either at the `com.intellij.documentationProvider` or the
`com.intellij.lang.documentationProvider` extension point (EP).
It is recommended to use the latter one when creating documentation that targets a specific language because providers registered
as `com.intellij.lang.documentationProvider` will only be called for elements from that language.
This is the reason they require the `language` attribute when registering the EP in the <path>[plugin.xml](plugin_configuration_file.md)</path>.
The bigger picture here is that documentation providers co-exist and if there is more than one provider for the same element,
the first one that returns a value different from `null` wins.

Although discouraged, the ordering of documentation providers can be influenced by using the `order` attribute when registering the extension.
For instance, PythonCore [`plugin.xml`](%gh-ic%/python/pluginCore/resources/META-INF/plugin.xml) uses the following to call the external documentation
provider before the default one (registered with `id="pythonDocumentationProvider"`):

```xml
<lang.documentationProvider
  language="Python"
  implementationClass="com.jetbrains.python.documentation.PythonExternalDocumentationProvider"
  order="before pythonDocumentationProvider"/>
```

For detailed instructions on how to implement a `DocumentationProvider`, please refer to the [Custom Language Support](documentation.md)
section and the descriptions in the [Custom Language Support Tutorial](documentation_provider.md).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Code Formatter

<link-summary>Implementing a code formatter that aligns whitespaces according to the defined set of rules, and performs non-whitespace formatting modifications.</link-summary>

<tldr>

**Product Help:** [Code style and formatting](https://www.jetbrains.com/help/idea/code-style.html)

</tldr>

The IntelliJ Platform includes a powerful framework for implementing custom language formatters.
At its core, the framework represents formatting rules by nested _blocks_ ([`Block`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/Block.java)) that cover the whole file.
Each block specifies *constraints* on whitespaces, like indents, wraps, spacing, or alignments.
This allows the formatting engine to calculate the smallest number of whitespace modifications necessary to properly format a file.

## Introduction

The easiest way to understand how formatting works in practice is to use a small code example in an existing language and
use the [built-in PSI viewer](explore_api.md#internalMode) to inspect how formatting blocks are built.
To invoke the builtin PSI viewer with the possibility of inspecting <control>Block Structure</control>,
use <ui-path>Tools | View PSI Structure...</ui-path> or <ui-path>Tools | View PSI Structure of Current File...</ui-path>.

![Formatting Blocks Structure](psi_viewer_formatting_blocks.png){width="706"}

The image above shows a snippet of code at the top, the PSI structure at the bottom left and the block structure at the bottom right.
Like in this example, the structure of blocks is usually built to reflect the PSI structure of the file.
In other words, there is a root block that covers the entire file and its nested children cover smaller portions like classes, functions, etc. down to
statements, identifiers, or braces.
Comparing the PSI and block structure above reveals obvious similarities in the nesting.

In general, however, PSI structure and formatting model are two different things serving different purposes.
While the structure of formatting blocks and PSI are usually similar, they do not have to match one-to-one.
Additionally, it is vital to understand that the formatter modifies only characters between blocks.
Therefore, the tree of blocks must cover all non-whitespace characters the bottom-level, or otherwise, the formatter may delete the characters between blocks.
On the other hand, spacing elements should never be covered by blocks unless the space is intended to be left as it is.

## Implementation

To format a file or a file fragment, the following steps are required:

* Implement [`FormattingModelBuilder`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/FormattingModelBuilder.java)
  and register it as `com.intellij.lang.formatter` extension point in the <path>plugin.xml</path>.
* The main purpose of the formatting model builder is its `createModel()` method that must provide a
  [`FormattingModel`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/FormattingModel.java) necessary for the framework to format the document.
  As an argument, it receives a [`FormattingContext`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/FormattingContext.java) which
  provides text range, PSI element, and other information required for formatting.
* The formatting model builds the tree of _blocks_ ([`Block`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/Block.java)) for the file where each block has associated indent, wrap, alignment, and spacing settings.
  Based on the provided tree of blocks, the formatting engine calculates the sequence of whitespace characters (spaces, tabs, and/or line breaks)
  that needs to be adjusted at necessary positions in the file.

### `FormattingModelBuilder` and `FormattingModel`

When implementing a `FormattingModelBuilder`, it is common to use the `createModel()` method and its `FormattingContext` argument to set the stage
for building the formatting blocks with the `FormattingModel`.
Typically, the following steps are part of this preparation:

* Retrieve both global and custom code style settings.
  Use the `codeStyleSettings` property of the `FormattingContext` to retrieve the settings which in turn provide access to custom settings through `getCustomSettings()`.
  These are commonly passed along and will be used to determine the correct amount of whitespace for indentations, wraps, etc. when building the tree of formatting blocks.
* Create an instance of [`SpacingBuilder`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/SpacingBuilder.java) using the formatting settings.
* Build the root `Block` that covers the whole file using the settings, the spacing builder, and the PSI node from the formatting context.
* The root `Block` needs all required information for building its subblocks recursively and is used in the `FormattingModel` returned from `createModel()`

The IntelliJ Platform already provides concrete implementations of `FormattingModel` that should be used instead of implementing a custom one.
Formatters for custom (programming) languages are usually built so that they mirror the PSI structure of the file.
Although not required, this approach is reasonable when thinking about, for example, Java code where the top-level formatting block covers the entire file,
its children cover individual classes, blocks on the next level cover methods inside classes, and so on.
For these cases, plugins should create a [`PsiBasedFormattingModel`](%gh-ic%/platform/code-style-impl/src/com/intellij/psi/formatter/PsiBasedFormattingModel.java) by using
[`FormattingModelProvider.createFormattingModelForPsiFile()`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/FormattingModelProvider.java).

Another implementation of `FormattingModel` is [`DocumentBasedFormattingModel`](%gh-ic%/platform/code-style-impl/src/com/intellij/psi/formatter/DocumentBasedFormattingModel.java).
However, in most cases, the `PsiBasedFormattingModel` should meet the requirements of custom language plugins.

### Building the `Block` Tree

Instead of implementing the `Block` interface, [`AbstractBlock`](%gh-ic%/platform/code-style-impl/src/com/intellij/psi/formatter/common/AbstractBlock.java)
should be used as a base class which provides useful default implementations.
Although the block implementation of a plugin is specific to the custom language, for the implementation of `AbstractBlock` some general remarks can be given.
It is common to store an instance of the `SpacingBuilder` which can directly be used when implementing the `getSpacing()` method
by calling the `getSpacing()` method of the `SpacingBuilder`.

Much of the work when implementing `AbstractBlock` goes into implementing `buildChildren()` that calculates blocks for the children of the current block's AST node.
Use `getNode().getChildren()` to retrieve the AST node's children of the current block,
and or each child that is not whitespace, build a subblock which is then added to the list of subblocks.
While the exact method of building a subblock highly depends on the specific language,
in general, the code for determining the correct `Alignment`, `Indent` and `Wrap` of a block inspects `IElementType`,
checks if the node is in a specific `TokenSet` or asserts other properties.

The other two more intricate methods that need to be implemented are `getChildAttributes()` and `isIncomplete()`.
Both are important when determining what indentation to use when `Enter` is pressed.
To calculate the indent for the new line, the formatter engine calls the method `getChildAttributes()` on either the block immediately before the caret or the parent of that block.
This depends on the return value of the `isIncomplete()` method for the block before the caret.
If the block before the cursor is incomplete (contains elements that the user will probably type but has not yet typed,
like a closing parenthesis of the parameter list or the trailing semicolon of a statement), `getChildAttributes()` is called on the block before the caret;
otherwise, it's called on the parent block.

As an example, think of _contexts_ (also called _blocks_) in languages like Java or C that are wrapped in curly braces.
If the `ASTNode` of the current block is such a context or container element, the `getChildAttributes()` method could return
`Indent.getNormalIndent()` to indent block elements in such a context.
Similarly, the `isComplete()` method could check if for such context elements the first and last child are indeed the open and close
curly braces and return `false` if not.

If the formatting operation doesn't affect the entire file (for example, if the formatter is called to format the pasted block of text), a complete tree of blocks is not built.
Rather, only blocks for the text range covered by the formatting operation and their parents are built.
Also note that code formatting can be suppressed per region via [special comments](https://youtrack.jetbrains.com/issue/IDEA-56995#comment=27-605969).

For every block, the plugin specifies the following properties for which several particular use settings exist.
These settings have a detailed description in the Javadoc comments for the respective classes.

#### Indent

[`Indent`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/Indent.java) specifies how the block is indented relative to its parent block.
It provides various factory methods to create different types of indents based on specific formatting settings.
There are different modes of indenting defined by factory methods, and the most commonly used are:

* The none indent (`getNoneIndent()`) means the child block is not indented.
* The regular indent (`getNormalIndent()`) indents the child block by the number of spaces specified in the <control>Tabs and Indents | Indent</control> code style settings.
* The continuation indent (`getContinuationIndent()`) is based on <control>Tabs and Indents | Continuation indent</control> code style settings, typically used for multi-line statements.

If not specified, the default "continuation without first" indent mode is used, meaning the first block is not indented, but later blocks are.
The class also allows for configuring indents to be relative to their direct parent block or to enforce parent indents on children starting on a new line.
This is useful in complex formatting scenarios, such as aligning blocks within a method call or ensuring consistent indentation in nested structures.
`Indent` also includes methods to create indents with a specific number of spaces and options to control their behavior relative to parent blocks.

#### Spacing

[`Spacing`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/Spacing.java) indicates what spaces or line breaks are inserted between the specified children of a block.
The spacing object specifies the minimum and maximum number of spaces that must be placed between the child blocks.
It also specifies the minimum number of line breaks to include and whether the existing line breaks and blank lines should be preserved.
The formatting model can also specify that the formatter may not modify the spacing between the specified blocks.

[`SpacingBuilder`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/SpacingBuilder.java) helps to build a rule-based configuration for spacing and is an easy way to specify when to put spaces before, after, between, or inside certain elements.
The rules typically reflect all possible spacing settings for a language.
An example on how to implement such a spacing builder can be found in the
[Custom Language Support Tutorial: Formatter](formatter.md#define-a-formatting-model-builder).


#### Wrap

The _wrap_ ([`Wrap`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/Wrap.java)) specifies whether the content of the block is wrapped to the next line.
Wrapping is performed by inserting a line break before the block content.
The plugin can specify that a particular block is never wrapped, always wrapped, or wrapped only if it exceeds the right margin.


#### Alignment

[`Alignment`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/Alignment.java) is designed to specify which blocks should be aligned with each other in a formatting model.
Blocks that return the same `Alignment` object instance from the `getAlignment()` method will be aligned together.
If two blocks with the same alignment are on different lines and the second block is the first non-whitespace block on its line,
the formatter inserts whitespaces before the second block to align it with the first block.

The `Alignment` includes the `Anchor` enum with two values, `LEFT` and `RIGHT`, determining how the code blocks are aligned.
The default alignment is created with the left anchor.
To create an alignment instance, the class provides several static methods:

- `createAlignment()`: Creates an alignment with default settings (backward shift not allowed, left anchor).
- `createAlignment(boolean allowBackwardShift)`: Creates an alignment specifying whether backward shift is allowed, with the left anchor.
- `createAlignment(boolean allowBackwardShift, Anchor anchor)`: Creates an alignment with the specified backward shift setting and anchor.

Backward shift allows a former-aligned element to be shifted right to align with a later element.
For example, in the code:

```
int start  = 1;
int finish = 2;
```

the `=` in `int start = 1` can be shifted right to align with the `=` in `int finish = 2` if backward shift is allowed.

Additionally, the `createChildAlignment()` method allows creating an alignment where blocks are aligned based on a base alignment.
This is useful for cases where nested alignments are needed, such as aligning a ternary operator with its condition.

### Examples

- [Custom Language Support Tutorial: Formatter](formatter.md)
- [`JsonFormattingBuilderModel`](%gh-ic%/json/split/src/com/intellij/json/formatter/JsonFormattingBuilderModel.java) as an example that uses a `PsiBasedFormattingModel`.
- [`MarkdownFormattingModelBuilder`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/lang/formatter/MarkdownFormattingModelBuilder.kt) as an example that uses a `DocumentBasedFormattingModel`.

### Further Tips

- To change the default "block name" taken from class name, return a custom `Block.getDebugName()`.
- The formatter in the IntelliJ Platform SDK only controls spacing, including indentation, between adjacent leaf blocks.
  Therefore, the first leaf block won't get indentation.
  If this is needed, use a [`PostFormatProcessor`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/impl/source/codeStyle/PostFormatProcessor.java)
  ([see also below](#post-processor)) to add the required indentation at the beginning
  ([see forum post with example](https://intellij-support.jetbrains.com/hc/en-us/community/posts/7982433627666-Formatting-indents-make-me-go-nuts)).
- An indent is ignored if a corresponding block doesn't start with a new line.
  To enforce the indent in this case using `enforceIndentToChildren` parameter in the factory method `Indent#getIndent(Intent.Type.NORMAL, false, true)`
  ([see forum post with example](https://intellij-support.jetbrains.com/hc/en-us/community/posts/360010627319-Formatting-Block-to-indent-relative-to-where-its-parent-would-be)).


## Non-Whitespace Modifications

Sometimes a plugin requires performing non-whitespace character modifications like reordering methods, changing letter cases, or adding missing braces.
The formatting framework provides extension points allowing to achieve these goals.

### Pre-Processor

Allows executing additional processing before the actual formatting is performed.
For example, it can be used to adjust the formatting range or modify the code by adding, removing, or converting elements like braces, semicolons, quotes, etc.
All the introduced changes will be handled by the main formatting step.

To register a formatting pre-processor, a plugin has to provide an implementation of [`PreFormatProcessor`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/impl/source/codeStyle/PreFormatProcessor.java) and register it in the `com.intellij.preFormatProcessor` extension point.

**Example:**
[`JsonTrailingCommaRemover`](%gh-ic%/json/split/src/com/intellij/json/formatter/JsonTrailingCommaRemover.java) removing trailing commas in JSON files

### Post-Processor

It is similar to the pre-processor but is run after the actual formatting is performed.
It can be used for adding, removing, or converting elements like braces, semicolons, quotes, changing letter-cases, etc.

To register a formatting post-processor, a plugin has to provide an implementation of [`PostFormatProcessor`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/impl/source/codeStyle/PostFormatProcessor.java) and register it in the `com.intellij.postFormatProcessor` extension point.

**Example:**
[`TrailingCommaPostFormatProcessor`](%gh-ic%/plugins/kotlin/code-insight/impl-base/src/org/jetbrains/kotlin/idea/formatter/TrailingCommaPostFormatProcessor.kt) inserting trailing commas in Kotlin files

### Rearranger

Allows custom languages to provide user-configurable arrangement/grouping rules for element types supported by language plugin.
Rules can be refined via modifiers and name; ordering can be applied additionally.
See [`Rearranger`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/codeStyle/arrangement/Rearranger.java) and related for Javadoc.

## Code Style Settings

To set the default indent size for a plugin's language and allow user configuration of tab and indent sizes,
implement the [`FileTypeIndentOptionsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/psi/codeStyle/FileTypeIndentOptionsProvider.java)
interface and register it at the `com.intellij.fileTypeIndentOptionsProvider` extension point.
The return value of `createIndentOptions()` sets the default indent size.


**Example:**
[Custom Language Support Tutorial: Code Style Settings](code_style_settings.md)

## Restricting Formatting

Use [`LanguageFormattingRestriction`](%gh-ic%/platform/code-style-api/src/com/intellij/lang/LanguageFormattingRestriction.java) to restrict (automatic) code formatting for given contexts.

## External Code Formatter

_2021.3_

Register [`AsyncDocumentFormattingService`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/service/AsyncDocumentFormattingService.java) implementation in the [`com.intellij.formattingService`](https://jb.gg/ipe?extensions=com.intellij.formattingService) extension point to invoke external formatter instead of IDE's builtin formatter.

**Example:**
[`ShExternalFormatter`](%gh-ic%/plugins/sh/core/src/com/intellij/sh/formatter/ShExternalFormatter.java) from _Shell Script_ plugin
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Code Inspections

<link-summary>Tutorial: implementing Inspections to highlight code in the editor.</link-summary>

<tldr>

**Product Help:** [Code Inspection](https://www.jetbrains.com/idea/webhelp/code-inspection.html), [Creating Custom Inspections](https://www.jetbrains.com/idea/help/creating-custom-inspections.html)

**UI Guidelines:** [](inspections.md)

</tldr>

The IntelliJ Platform provides tools designed for static code analysis called _code inspections_, which help the user maintain and clean up code without actually executing it.
Custom code inspections can be implemented as IntelliJ Platform plugins.
An example of the plugin approach is the [comparing_string_references_inspection](%gh-sdk-samples-master%/comparing_string_references_inspection) code sample.

See the [Inspections](inspections.md) topic in UI Guidelines on naming, writing description, and message texts for inspections.

## Creating an Inspection Plugin

The [comparing_string_references_inspection](%gh-sdk-samples-master%/comparing_string_references_inspection) code sample adds a new inspection to the <control>Java | Probable Bugs</control> group in the [Inspections list](https://www.jetbrains.com/help/idea/inspections-settings.html).
The inspection reports when the `==` or `!=` operator is used between String expressions.

It illustrates the components for a custom inspection plugin:

* Describing an [inspection](#plugin-configuration-file) in the plugin configuration file.
* Implementing a [local inspection class](#inspection-implementation-java-class) to inspect Java code in the editor.
* Creating a [visitor](#visitor-implementation-class) to traverse the PSI tree of the Java file being edited, inspecting for problematic syntax.
* Implementing a [quick fix](#quick-fix-implementation) class to correct syntax problems by altering the PSI tree as needed.
  Quick fixes are displayed to the user like [intentions](code_intentions.md).
* Writing an HTML [description](#inspection-description) of the inspection for display in the inspection preferences panel.
* Creating a [test](#inspection-test) for the implemented inspection and quick fix.

Although the code sample illustrates implementations of these components, it is often useful to see examples of inspections implemented in the [IntelliJ Community](https://github.com/JetBrains/intellij-community) code base.
To identify a given inspection's implementation classes, try to find an inspection [by name](explore_api.md#24-search-for-symbol-names) or [by UI texts](explore_api.md#25-search-by-ui-text).
Consider also searching for existing implementations in [IntelliJ Platform Explorer](https://jb.gg/ipe?extensions=com.intellij.localInspection).

## Creating an Inspection

The [comparing_string_references_inspection](%gh-sdk-samples-master%/comparing_string_references_inspection) code sample reports when the `==` or `!=` operators are used between String expressions.
The user can apply a quick fix to change `a==b` to `a.equals(b)`, or `a!=b` to `!a.equals(b)`.

The details of the `comparing_string_references_inspection` implementation illustrate the components of an inspection plugin.

### Plugin Configuration File

The `comparing_string_references_inspection` is described as a `com.intellij.localInspection` extension point in the `comparing_string_references_inspection` plugin configuration ([`plugin.xml`](%gh-sdk-samples-master%/comparing_string_references_inspection/src/main/resources/META-INF/plugin.xml)) file.

There exist two types of inspection extensions:

* The `com.intellij.localInspection` extension point is used for inspections that operate on one file at a time, and also operate "on-the-fly" as the user edits the file.
* The `com.intellij.globalInspection` extension point is used for inspections that operate across multiple files, and the associated fix might, for example, refactor code between files.

The minimum inspection setup must declare the `implementationClass` and `language` attribute (unless the inspection works on any supported language).
As shown in the `comparing_string_references_inspection` plugin configuration file, other attributes can be defined in the `localInspection` element, either with or without localization.
In most cases, it is simplest to define the attributes in the plugin configuration file because the underlying parent classes handle most of the class responsibilities based on the configuration file description.

If required, inspections can define all the attribute information (except `implementationClass`) by overriding methods in the inspection implementation class (not recommended in general).

### Inspection Implementation Java Class

Inspection implementations for Java files, like [`ComparingStringReferencesInspection`](%gh-sdk-samples-master%/comparing_string_references_inspection/src/main/java/org/intellij/sdk/codeInspection/ComparingStringReferencesInspection.java), are often based on the Java class [`AbstractBaseJavaLocalInspectionTool`](%gh-ic%/java/java-analysis-api/src/com/intellij/codeInspection/AbstractBaseJavaLocalInspectionTool.java).
The [`AbstractBaseJavaLocalInspectionTool`](%gh-ic%/java/java-analysis-api/src/com/intellij/codeInspection/AbstractBaseJavaLocalInspectionTool.java) base class offers methods to inspect Java classes, fields, and methods.

More generally, `localInspection` types are based on the class [`LocalInspectionTool`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/LocalInspectionTool.java).
Examining the class hierarchy for `LocalInspectionTool` shows that the IntelliJ Platform provides many child inspection classes for a variety of languages and frameworks.
One of these classes is a good basis for a new inspection implementation, but a bespoke implementation can also be based directly on `LocalInspectionTool`.

The primary responsibilities of the inspection implementation class are to provide:

* A `PsiElementVisitor` object to traverse the PSI tree of the file being inspected.
* A `LocalQuickFix` class to fix an identified problem (optional).
* An options panel to be displayed in the <control>Inspections</control> settings dialog (optional). See [](inspection_options.md) for more details.

The overridden `ComparingStringReferencesInspection` methods are discussed in the sections below.

### Visitor Implementation Class

The visitor class evaluates whether elements of the file's PSI tree are of interest to an inspection.

The `ComparingStringReferencesInspection.buildVisitor()` method creates an anonymous visitor class based on [`JavaElementVisitor`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/JavaElementVisitor.java) to traverse the PSI tree of the Java file being edited, inspecting for suspect syntax.
The anonymous class overrides `visitBinaryExpression()`, which checks if a `PsiBinaryExpression`'s operator is `==` or `!=`, and if both operand types are `String`.

### Quick Fix Implementation

The quick fix class acts much like an intention, allowing the user to invoke it on the `PsiElement` (or `TextRange`) highlighted by the inspection.

The `ComparingStringReferencesInspection` implementation uses the nested class `ReplaceWithEqualsQuickFix` to implement a quick fix based on [`LocalQuickFix`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/LocalQuickFix.java).
The `ReplaceWithEqualsQuickFix` class allows the user to change the use of `a == b` and `a != b` expression to `a.equals(b)` and `!a.equals(b)` respectively.

The heavy lifting is done in `ReplaceWithEqualsQuickFix.applyFix()`, which manipulates the PSI tree to convert the expressions.
The change to the PSI tree is accomplished by the usual approach to modification:

* Getting a `PsiElementFactory`.
* Creating a new `PsiMethodCallExpression`.
* Substituting the original left and right operands into the new `PsiMethodCallExpression`.
* Replacing the original binary expression with the `PsiMethodCallExpression`.

> In case of providing multiple quick fixes for a single element, their ordering is indeterministic due to performance reasons.
> It is possible to push specific items up or down by implementing
> [`HighPriorityAction`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/HighPriorityAction.java)
> or
> [`LowPriorityAction`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/LowPriorityAction.java)
> respectively.
>
{style="note"}

### Inspection Description

The inspection description is an HTML file.
The description is displayed in the upper right panel of the <control>Inspections</control> settings dialog when an inspection is selected from the list.

See the [Inspections](inspections.md) topic in UI Guidelines on important guidelines for writing the description.

Implicit in using [`LocalInspectionTool`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/LocalInspectionTool.java) in the class hierarchy of the inspection implementation means following some conventions.

* The inspection description file is expected to be located under <path>\$RESOURCES_ROOT_DIRECTORY\$/inspectionDescriptions/</path>.
  If the inspection description file is to be located elsewhere, override `getDescriptionUrl()` in the inspection implementation class.
* The name of the description file is expected to be the inspection <path>\$SHORT_NAME\$.html</path> as provided by the inspection description, or the inspection implementation class.
  If a short name is not provided, the IntelliJ Platform computes one by removing `Inspection` suffix from the implementation class name.

> If a plugin project is multi-module, and it combines resources into a single JAR, make sure that all inspection description files have unique names or paths.
> Otherwise, only the last packed description file will exist in the distribution package.
>
{style="warning"}

> See the [](providing_translations.md#bundled-translations) section for information about how to provide inspection description translations in plugins.

#### Code Snippets
<primary-label ref="2023.2"/>

Using the following HTML structure, the description can embed code snippets that will be displayed with syntax highlighting:

```html
<p>
  The following code will be shown with syntax highlighting:
</p>
<pre>
  <code>
    // code snippet
  </code>
</pre>
```

The language will be set according to the [inspection's registration](#plugin-configuration-file) `language` attribute.
If required (e.g., when targeting [UAST](uast.md)), it can be specified explicitly via `<code lang="LanguageID">...</code>`.

#### Settings Link

To open related [settings](settings.md) directly from the inspection description, add a link with `settings://$CONFIGURABLE_ID$`, optionally followed by `?$SEARCH_STRING$` to pre-select UI element:

```html
See <em>Includes</em> tab in <a href="settings://fileTemplates">Settings | Editor | File and Code Templates</a> to configure.
```

### Inspection Test

> Please note that running the test requires setting system property `idea.home.path` in the `test` task configuration of the Gradle build script.
>
{style="note"}

The `comparing_string_references_inspection` code sample provides a test for the inspection.
See the [](testing_plugins.md) section for general information about plugin testing.

The `comparing_string_references_inspection` test is based on the [`UsefulTestCase`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/UsefulTestCase.java) class, part of the JUnit framework APIs.
This class handles much of the underlying boilerplate for tests.

By convention, the folder <path>test/testData/</path> contains the test files.
The folder contains pairs of files for each test using the name convention <path>∗.java</path> and <path>∗.after.java</path>, e.g., <path>Eq.java</path> / <path>Eq.after.java</path>.

The `comparing_string_references_inspection` tests run the inspection on the <path>∗.java</path> files, apply the quick fix, and compare the results with the respective <path>∗.after.java</path> files containing expected results.

## Running the Comparing String References Inspection Code Sample

The [comparing_string_references_inspection](%gh-sdk-samples-master%/comparing_string_references_inspection) code sample adds a new inspection to the <control>Java | Probable Bugs</control> group in the [Inspections](https://www.jetbrains.com/help/idea/inspections-settings.html) configuration.

See [](code_samples.md) on how to set up and run the plugin.

### How does it work?

The plugin inspects your code opened in the IntelliJ IDEA editor.
The plugin highlights the code fragments where two `String` expressions are compared by `==` or `!=` and proposes to replace this code fragment with `.equals()`:

![Comparing String References inspection highlighting and quick fix](comparing_references.png)
{width=680}

In this example, the `str1` and `str2` are variables of the String type.
Invoking <control>SDK: Use equals()</control> will result in transforming expression to the form visible in the [preview](code_intentions_preview.md) popup (code fragment on the right).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Code Inspections and Intentions

<link-summary>Introduction to analysing the code and providing quick fixes for the found issues.</link-summary>

<tldr>

**Product Help:** [Code inspections](https://www.jetbrains.com/help/idea/code-inspection.html), [Intention actions](https://www.jetbrains.com/help/idea/intention-actions.html)

**UI Guidelines:** [](inspections.md)

</tldr>

### Inspections

The code inspections for custom languages use the same API as all other code inspections, based on the [`LocalInspectionTool`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/LocalInspectionTool.java) class.

The functionality of [`LocalInspectionTool`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/LocalInspectionTool.java) partially duplicates that of [Annotator](syntax_highlighting_and_error_highlighting.md#annotator).

The main differences are:
- supports batch analysis of code (through the <ui-path>Code | Inspect Code...</ui-path> action)
- the possibility to turn off the inspection (globally or by suppressing them on various levels)
- ability to configure the inspection options.

If none of that is required and the analysis only needs to run in the active editor, [Annotator](syntax_highlighting_and_error_highlighting.md#annotator) provides better performance (because it supports incremental analysis) and more flexibility for highlighting errors.

See [Inspections](inspections.md) topic in the UI Guidelines on naming, writing description, and message texts for inspections.

**Examples:**
- [Code Inspections Tutorial](code_inspections.md)
- A [simple inspection](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/codeInspection/TrailingSpacesInPropertyInspection.java) for [Properties language plugin](%gh-ic%/plugins/properties)

> Please also note important change in 2024.1, refer to [](syntax_highlighting_and_error_highlighting.md#order-of-running-highlighting).

#### Inspections Performance
<primary-label ref="2023.3"/>

A [custom language plugin](custom_language_support.md) providing many inspections (>100) can register the default [`PsiElementVisitor`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElementVisitor.java)
for its language in `com.intellij.inspection.basicVisitor` extension point to optimize processing.

### Intentions

The code intentions for custom languages also use the standard API for intentions.
The intention classes need to implement the [`IntentionAction`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/IntentionAction.java) interface and are registered using the `com.intellij.intentionAction` extension point.

**Examples:**
- [Code Intentions Tutorial](code_intentions.md)
- A [simple intention action](%gh-ic%/plugins/groovy/src/org/jetbrains/plugins/groovy/intentions/control/SplitIfIntention.java) for Groovy
- [Custom Language Support Tutorial: Quick Fix](quick_fix.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Intentions

<link-summary>Intention actions allow fixing code issues or transforming the code to a different form.</link-summary>

<tldr>

**Product Help:** [Intention Actions](https://www.jetbrains.com/help/idea/intention-actions.html)

**UI Guidelines:** [](inspections.md)

</tldr>

This topic describes the [conditional_operator_intention](%gh-sdk-samples-master%/conditional_operator_intention), a sample plugin that adds a new [intention action](https://www.jetbrains.com/help/idea/intention-actions.html) to the IDE Intentions list.
In addition, the sample plugin contains a JUnit-based test.

## About Intention Actions

The IntelliJ Platform analyzes your code and helps handle situations that may result in errors.
When a possible problem is suspected, the IDE suggests an appropriate intention action, denoted with special icons.

See the [Inspections](inspections.md) topic in UI Guidelines on naming, writing description, and message texts for inspections/intentions.

You can view a list of all available intention actions as well as enable/disable them using the [Intentions List](https://www.jetbrains.com/help/idea/intention-actions.html#intention-settings) in <ui-path>Settings | Editor | Intentions</ui-path>.

See the [Intention Action Preview](code_intentions_preview.md) topic on providing a preview of changes that can be made by executing an intention.

## Techniques Used

The [conditional_operator_intention](%gh-sdk-samples-master%/conditional_operator_intention) sample plugin illustrates the use of the following techniques:

- How to analyze a [PSI tree](psi_files.md).
- How to find a Java token of interest in the PSI tree.
- How to invoke a quick-fix action for a token element under the cursor using the [`PsiElementBaseIntentionAction`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/intention/PsiElementBaseIntentionAction.java) class.
- How to create a JUnit test for this plugin using the [`IdeaTestFixtureFactory`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/fixtures/IdeaTestFixtureFactory.java) class.
- How to add an intention description and before/after examples in the Settings dialog

> In the case of providing multiple intention actions for a single element, their ordering is indeterministic due to performance reasons.
> It is possible to push specific items up or down by implementing
> [`HighPriorityAction`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/HighPriorityAction.java)
> or
> [`LowPriorityAction`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/LowPriorityAction.java)
> respectively.
>
{style="note"}

## Sample Plugin

When launched, the sample plugin adds the <control>SDK: Convert ternary operator to if statement</control> item to the <control>SDK intentions</control> group in the <ui-path>Settings | Editor | Intentions</ui-path>.

#### Running the Plugin

See [Code Samples](code_samples.md) on how to set up and run the plugin.

#### How does it work?

The plugin analyzes symbols under the cursor in your code opened in the editor.
If the cursor is positioned on the `?` conditional operator, IntelliJ IDEA proposes to replace this conditional (ternary) operator with the "if-then-else" statement:

![Convert ternary operator intention popup](ternary_operator_intention.png)
{width=675}

Invoking <control>SDK: Convert ternary operator to if statement</control> intention action will result in transforming expression to the form visible in the [preview](code_intentions_preview.md) popup (code fragment on the right).

#### Intention Description and examples

The intention description is available in the UI in two places:
- under <ui-path>Settings | Editor | Intentions | SDK Intentions | SDK: Convert ternary operator to if statement</ui-path>.
- near the selected intention action in the [Context Actions](https://www.jetbrains.com/help/idea/intention-actions.html#apply-intention-actions) popup
in the editor when [Preview](code_intentions_preview.md) cannot be shown.

The before/after examples are available in the UI
under <ui-path>Settings | Editor | Intentions | SDK Intentions | SDK: Convert ternary operator to if statement</ui-path>.

The plugin provides description and before/after examples files in the <path>resources/intentionDescriptions/ConditionalOperatorConverter</path> directory:
- <path>description.html</path> - provides the general information about the intention
- <path>after.java.template</path> - shows the code fragment that intention can change
- <path>before.java.template</path> - shows the code fragment after applying the intention

By default, the intention description directory name is the same as the intention class name.
It can be customized with the `<descriptionDirectoryName>` element in `<intentionAction>` in <path>plugin.xml</path>.

> If your intention class names are obfuscated in the [plugin distribution](plugin_content.md), always declare the `<descriptionDirectoryName>` element.
>
{style="warning"}

"Before" and "after" filenames pattern is <path>before.\$LANG_FILE_EXTENSION\$.template</path> and <path>after.\$LANG_FILE_EXTENSION\$.template</path> respectively.
If before/after preview is not needed, specify `<skipBeforeAfter>true</skipBeforeAfter>` in the `<intentionAction>` in <path>plugin.xml</path>.

> If a plugin project is multi-module, and it combines resources into a single JAR, make sure that all intention description files have unique names or paths.
> Otherwise, only the last packed description file will exist in the distribution package.
>
{style="warning"}

> See the [](providing_translations.md#bundled-translations) section for information about how to provide intention description translations in plugins.

#### Testing the Plugin

> Note that running the test requires setting system property `idea.home.path` in the `test` task configuration of the Gradle build script.
>
{style="note"}

The sample plugin contains the `ConditionalOperatorConverterTest` Java class and the test data in the <path>test/testData/</path> directory.
To perform the plugin test, run the `ConditionalOperatorConverterTest.testIntention()` method.
# Intention Action Preview

<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<link-summary>Guide for the preview of Intention and Quick Fix actions.</link-summary>
<primary-label ref="2022.3"/>

> [Intention](code_intentions.md) previews are supposed to work out-of-the-box in most cases.
> This page gives guidance to plugin authors in situations where this is not the case and to
> encourage thorough [testing](writing_tests.md) of intention actions.


The IntelliJ Platform can show a preview for
[`IntentionAction`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/IntentionAction.java)
and
[`LocalQuickFix`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/LocalQuickFix.java).
That means when the user shows [available context actions](https://www.jetbrains.com/help/idea/intention-actions.html#apply-intention-actions),
an additional small popup highlights the differences between the current code and the code after executing the intention.

Under the hood, this preview is created using a copy of the current file inside a separate,
headless editor where the intention is applied to get the result.
The difference between this result and the original code is used to build the preview where changes that are about to happen are highlighted.

The IntelliJ Platform has a default implementation for the preview,
which works out of the box when existing intentions fulfill specific requirements,
make only localized changes to the code, and require no further user input.

However, in specific cases, plugin authors will need to adapt their intentions to prepare them for the correct display of the preview.
In the following, plugin authors can learn the requirements for intention previews in detail and the alternative options for previews the IntelliJ Platform provides.

## Implementation

> While this page focuses on the preview for `IntentionAction`, the `generatePreview()`
> method exists also for `LocalQuickFix` and the documentation and all discussed points are valid for both use cases.
>
{style="note"}

The entry point for previews is `generatePreview()` available in
[`IntentionAction`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/IntentionAction.java)
and
[`LocalQuickFix`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/LocalQuickFix.java).
The default implementation will load the intention or quick fix and call its `invoke()` or `applyFix()` method on a copy of the original file.
It returns an instance of [`IntentionPreviewInfo`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/preview/IntentionPreviewInfo.java).
When the diff could be computed successfully it returns `IntentionPreviewInfo.DIFF` and when it was unsuccessful it returns
`IntentionPreviewInfo.EMPTY`.

The preferred way for plugin authors is to keep using their intentions or quick fixes as is and only adapt
the code if the default implementation of `generatePreview()` does not succeed.
Further down, we will give detailed information about necessary code changes and requirements.
However, sometimes it might not be viable to create the diff for the preview automatically.
In such cases, plugin authors have several options to override `generatePreview()` and return a different `IntentionPreviewInfo`.
The following options are available and described in the paragraphs below:

- Return an instance of `IntentionPreviewInfo.Html` to show a customized message that is dynamically generated from the available information.
- Return an instance of `IntentionPreviewInfo.CustomDiff` to provide an original and changed text that is used to show the diff.
- Return `IntentionPreviewInfo.EMPTY` in cases where it is not possible to show any preview.

See [`IntentionPreviewUtils`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/preview/IntentionPreviewUtils.java) for a number of useful helper methods.

### HTML Preview

To show a dynamically generated HTML description as a preview, return an instance of
`IntentionPreviewInfo.Html` from `generatePreview()`.
Some important tips are:

- You may use the
  [`HtmlChunk`](%gh-ic%/platform/util/src/com/intellij/openapi/util/text/HtmlChunk.java) API with it.
  If you want to display an icon, use `HtmlChunk#icon` but be careful because converting it to text and back (via `HtmlChunk.raw`) would remove the icon.
  Consider using `HtmlChunk.template` if necessary.
- Note that the description pane has a fixed width of 300px for the default font, and you should try to make the description as concise as possible.
- Any user interaction with the description pane is hardly possible and should not be relied upon.
  The first reason for that is that previews are usually displayed as a reaction to <shortcut>Alt+Enter</shortcut>
  by users who avoid using the mouse. Secondly, even with the mouse, it happens to hover over a different intention
  accidentally, which would close the current preview and make an interaction hard.
  Therefore, adding clickable links or buttons in previews is highly discouraged.
- When possible, use generic preview methods available in `IntentionPreviewInfo` (e.g., `rename()`, `navigate()`, `movePsi()`).
  They provide a uniform preview for common cases.

### Custom Diff Preview

For situations where the changes of an intention are not bound to the current file,
a custom diff-like preview can be generated by returning `IntentionPreviewInfo.CustomDiff` from `generatePreview()`.
The diff is then generated by comparing `originalText` with `modifiedText`.
In many cases, `originalText` can be an empty string and then only the `modifiedText` will be displayed in the preview.
However, crafting some `originalText` might be helpful if:

- The diff should highlight the exact parts that were changed from `originalText` to `modifiedText`.
- The code changed in several unrelated lines. The preview can show several parts without then unchanged lines in the middle and separate the parts nicely.

Finally, when returning a custom diff, plugin authors should specify a file name if possible.

## Testing

If you use [`CodeInsightTestFixture`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/fixtures/CodeInsightTestFixture.java),
please note the following useful methods:

- `checkPreviewAndLaunchAction()` is a replacement for `launchAction()`.
  If you call `launchAction()` directly and your action should generate diff-preview which equals to original file content,
  use `checkPreviewAndLaunchAction()` with this call, and preview will be checked as well.
- `checkIntentionPreviewHtml()` asserts that HTML preview is generated and that it equals to the supplied text.
- `getIntentionPreviewText()` returns the preview text for a given action.

If you are unsatisfied with these methods, or you have a custom framework and want to support preview testing,
please look through the implementations of the aforementioned methods.

If you use
[`LightQuickFixTestCase`](%gh-ic%/java/testFramework/src/com/intellij/codeInsight/daemon/quickFix/LightQuickFixTestCase.java)
or
[`LightQuickFixParameterizedTestCase`](%gh-ic%/java/testFramework/src/com/intellij/codeInsight/daemon/quickFix/LightQuickFixParameterizedTestCase.java)
with the usual setup of having your test-input as `beforeXyz` and `afterXyz`, you can test previews as well.
A special suffix `-preview` should be added to the comment line in the test-data to test preview.
For example:

<compare type="top-bottom" first-title="First line before" second-title="First line after">
<code-block>
// "Replace Arrays.asList().stream() with Stream.of()" "true"
</code-block>
<code-block>
// "Replace Arrays.asList().stream() with Stream.of()" "true-preview"
</code-block>
</compare>

This explicitly allows for preview testing and checks that the text generated by preview on a non-physical
file is the same as the text generated by actual action.

If you have a customized preview text or HTML, you may create a `previewXyz` file (preserve the original extension) near `beforeXyz` and `afterXyz`.
Now, the preview (no matter if it is a diff or HTML) will be compared to the content of that file.

Finally,
[`IntentionPreviewPopupUpdateProcessor`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/intention/impl/preview/IntentionPreviewPopupUpdateProcessor.kt)
provides useful helper functions.

## Preparation for the Default Diff Preview

To prepare existing intentions for the normal diff preview, plugin authors must understand the underlying framework and how it works to a certain degree.
This section will provide these details and guide developers through possible scenarios.

Normally, a non-physical copy of the file is provided to the `generatePreview()` method.
When overriding `generatePreview()`, you can apply any changes to that file and return `IntentionPreviewInfo.DIFF`.
The diff between the original file content and the changed file content will be shown in the preview.

The default implementation of `generatePreview()` employs further checks to ensure your action is safe.
These checks consist of the following:

1. Verify that [`startsInWriteAction()`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/IntentionAction.java) returns `true`.
2. Verify that [`getElementToMakeWritable()`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/FileModifier.java) returns its argument.
3. Check if all instance fields in the class are either marked as `@SafeFieldForPreview` (defined in
   [`FileModifier`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/FileModifier.java)),
   their types are marked as `@SafeTypeForPreview`, or used types are known to be safe (primitives, strings, enums, classes, arrays of these, etc.)
   If this is the case, then the original `invoke()` or `applyFix()` method is called in a background thread
   on a non-physical copy of the file and with a mock editor
   ([`IntentionPreviewEditor`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/intention/impl/preview/IntentionPreviewEditor.kt)).

If the above does not show a preview, there could be further problems of the following kind:

1. There are fields that are safe but have not been marked with `@SafeFieldForPreview`.
   Safe fields are ones which do [not hold references to real PSI elements](dynamic_plugins.md#do-not-store-psi),
   and if they do, these references are used for reading only.
2. There are fields that actually hold references to a physical `PsiElement` and they are modified by the action/fix.
   You can try to get rid of them by extracting the necessary PSI from the [`ProblemDescriptor`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/ProblemDescriptor.java)
   or using `PsiFile.getElementAt()` with the editor caret position.
   Another option is to override `getFileModifierForPreview(target)`. In this method, remap all the PSI elements to the target file (which is the copy of the source file)
   using `PsiTreeUtil.findSameElementInCopy()` and create a new instance of your action/fix.
   Example: [`DeleteMultiCatchFix.getFileModifierForPreview()`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/daemon/impl/quickfix/DeleteMultiCatchFix.java)
   Be careful, as there could be subclasses. Better play safe and declare your action/fix class as final.
3. `invoke()`/`applyFix()` starts a write action. If `startsInWriteAction()` returns `true`, then this is unnecessary, and you can remove the write action.
4. `invoke()`/`applyFix()` asserts (directly or indirectly) that it is invoked in the dispatch thread or inside a write action (see also [](threading_model.md)).
   The preview is applied in a background thread without a write action as it works on non-physical elements.
   You may consider removing these assertions or keeping them only if the preview is not active (use `IntentionPreviewUtils.isIntentionPreviewActive()`).
5. `PsiDocumentManager.getDocument(psiFile)` is used which isn't supported for a non-physical `psiFile`.
   Instead, use `psiFile.getViewProvider().getDocument()`.
6. `PsiDocumentManager.commitAllDocuments()` is used. It’s unlikely that this call is required, and it probably slows down your action.
   You can commit the current document via `PsiDocumentManager.commitDocument()`.
7. `FileEditorManager.openTextEditor()` or `FileEditorManager.getSelectedEditor()` is used to access the current editor (e.g., to start a template, position caret, add highlighting).
   Instead, use `FileEditorManager.getSelectedTextEditor()`, which should work in the preview and will point to a fake editor (where templates work).
   Also, you can branch on `IntentionPreviewUtils.isIntentionPreviewActive()` and avoid all editor-related operations because they won’t affect the preview anyway.
8. `Application.invokeLater()` is used. Currently, it’s prohibited in the preview and will fail with an exception.
   You may branch on `IntentionPreviewUtils.isIntentionPreviewActive()` and avoid doing this for preview, or you generate a custom preview as explained above.
   Also, note the tips in the paragraph below this list.
9. Non-trivial operations with the editor are used that are currently not implemented for the mock editor.
   We mock many operations but not all. E.g., `getFoldingModel()` is not currently supported.
   Avoid using these operations for non-physical files or for `IntentionPreviewEditor`.
10. Your action produces a side effect outside the current file. Examples include actions trying to change other PSI elements, changing the project or IDE settings, or launching an external process.
    In this case, `startsInWriteAction()` returning `true` and/or `getElementToMakeWritable()` returning its argument is incorrect.
    Override these methods properly and [create a custom preview](#custom-diff-preview).
11. Your action uses non-physical elements for some purpose and branches on `PsiElement.isPhysical()` already, so in preview mode, this branch is wrongly taken.
    Instead, use `IntentionPreviewUtils.isPreviewElement()`.
12. Your action modifies the results of `ReferencesSearch.search(declaration)`, which always belongs to the original physical file, no matter if the passed declaration is a copy or an original.
    If you expect all the results to update belonging to the current file, you may traverse the file (`PsiTreeUtil.processElements()`, `SyntaxTraverser.psiTraverser()`, etc.) instead.
    Alternatively, remap the results of the search to the file copy using `PsiTreeUtil.findSameElementInCopy()`.
    If you need to update something outside the current file, a single file preview won’t work anyway. Either avoid updating the elements for the preview or create a custom preview.

If your action returns `false` from `startsInWriteAction()`, you should override `generatePreview()` and provide a custom diff or HTML preview.
However, sometimes the default implementation of `generatePreview()` can still work.
Here are two common scenarios:

1. Your action displays an additional popup or dialog but makes only changes to the current file after that.
   A solution here could be to display the preview assuming that the user selected default options in your UI and delegate to a method that is called after the UI is displayed, providing the default options.
2. Your action modifies a declaration in the current file and then updates all the call sites/overrides/references (probably involving slow search operation).
   One solution is to show only the modified declaration in the preview, ignoring all updated call sites or restricting them to the current file.
   Use `IntentionPreviewUtils.isIntentionPreviewActive()` to restrict the search scope when in preview.


<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Code Samples

<link-summary>Accessing SDK Docs code samples.</link-summary>

This guide comes with a number of sample plugins available from dedicated [intellij-sdk-code-samples](https://github.com/JetBrains/intellij-sdk-code-samples) GitHub repository.

Please see <path>README.md</path> which lists all available code samples with a short description.

Each sample is stored in a dedicated folder and is accompanied by its own <path>README.md</path>.
Links to the corresponding tutorial or reference page in this tutorial, as well as a list of relevant show-cased elements are provided.

## Using Gradle

All sample plugins are based on Gradle, see [](creating_plugin_project.md) to get started.

Additionally, the [Working with Gradle in IntelliJ IDEA](https://youtu.be/6V6G3RyxEMk) screencast offers a thorough introduction to Gradle functionality inside IntelliJ IDEA.

## Setting up Code Samples

Make sure plugins _Git_, _Gradle_, and _Plugin DevKit_ are enabled.

<include from="snippets.md" element-id="pluginDevKitAvailability"/>

Clone the [intellij-sdk-code-samples](https://github.com/JetBrains/intellij-sdk-code-samples) GitHub repository via <control>Git | Clone...</control>.
After successful cloning, the IDE suggests opening the project.

Select the code sample(s) to import via the [Gradle tool window](https://www.jetbrains.com/help/idea/gradle.html#link_gradle_project).

Alternatively, import _all_ code samples available by choosing <path>_gradleCompositeBuild</path>, which links all Gradle projects in a Composite Build.

After successful import, the project appears in the <control>Gradle</control> tool window tree as a new node.

Assign a Java 17 SDK in <ui-path>Settings | Build, Execution, Deployment | Build Tools | Gradle</ui-path> for <control>Gradle JVM</control>.

Invoke <control>Reload All Gradle Projects</control> from the Gradle tool window toolbar if necessary.

## Running Code Samples

Run the plugin by using the Gradle [`runIde`](creating_plugin_project.md#executing-the-plugin) task shown under the corresponding project's <control>Tasks</control> node in the <control>Gradle</control> tool window.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 17. Code Style Settings

<link-summary>Sample implementation of code style settings allowing to configure the Simple language formatter.</link-summary>

<tldr>

**Reference**: [](code_formatting.md#code-style-settings)

**Code**: [`SimpleCodeStyleSettings`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCodeStyleSettings.java),
[`SimpleCodeStyleSettingsProvider`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCodeStyleSettingsProvider.java),
[`SimpleLanguageCodeStyleSettingsProvider`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleLanguageCodeStyleSettingsProvider.java)

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

Code style settings enable defining formatting options.
A code style settings provider creates an instance of the settings and also creates an options page in Settings.
This example creates a Settings page that uses the default language code style settings, customized by a language code style settings provider.

## Define Code Style Settings

Define [`SimpleCodeStyleSettings`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCodeStyleSettings.java)
for Simple Language by subclassing [`CustomCodeStyleSettings`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/codeStyle/CustomCodeStyleSettings.java).

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCodeStyleSettings.java" include-symbol="SimpleCodeStyleSettings"}

## Define Code Style Settings Provider

The code style settings provider gives the IntelliJ Platform a standard way to instantiate `CustomCodeStyleSettings` for the Simple Language.

Define [`SimpleCodeStyleSettingsProvider`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCodeStyleSettingsProvider.java)
for Simple Language by subclassing [`CodeStyleSettingsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/psi/codeStyle/CodeStyleSettingsProvider.java).

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCodeStyleSettingsProvider.java" include-symbol="SimpleCodeStyleSettingsProvider"}

## Register the Code Style Settings Provider

The `SimpleCodeStyleSettingsProvider` implementation is registered with the IntelliJ Platform in the plugin configuration file using the `com.intellij.codeStyleSettingsProvider` extension point.

```xml
<extensions defaultExtensionNs="com.intellij">
  <codeStyleSettingsProvider
      implementation="org.intellij.sdk.language.SimpleCodeStyleSettingsProvider"/>
</extensions>
```

## Define the Language Code Style Settings Provider

Define [`SimpleLanguageCodeStyleSettingsProvider`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleLanguageCodeStyleSettingsProvider.java) for Simple Language by subclassing [`LanguageCodeStyleSettingsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/psi/codeStyle/LanguageCodeStyleSettingsProvider.java), which provides common code style settings for a specific language.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleLanguageCodeStyleSettingsProvider.java" include-symbol="SimpleLanguageCodeStyleSettingsProvider"}

## Register the Language Code Style Settings Provider

The `SimpleLanguageCodeStyleSettingsProvider` implementation is registered with the IntelliJ Platform in the plugin configuration file using the `com.intellij.langCodeStyleSettingsProvider` extension point.

```xml
<extensions defaultExtensionNs="com.intellij">
  <langCodeStyleSettingsProvider
      implementation="org.intellij.sdk.language.SimpleLanguageCodeStyleSettingsProvider"/>
</extensions>
```

## Run the Project

Run the plugin by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

In the IDE Development Instance, open the Simple Language code formatting page: <ui-path>Settings | Editor | Code Style | Simple</ui-path>.

![Code Style Settings](code_style_settings.png)
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Color Scheme Management

<link-summary>Developing new color schemes for existing and custom languages.</link-summary>

Color scheme management in IntelliJ IDEA 12.1 was changed to ease scheme designers' work and make schemes look equally well for different programming languages even if not designed specifically for these languages.
Previously, language plugins were using fixed default colors incompatible, for example, with dark schemes.

The new implementation allows specifying a dependency on a set of standard text attributes linked to a scheme but not to any specific language.
Language-specific attributes still can be set by a scheme designer if needed, but it's optional.
New color schemes have got a new <path>.icls</path> (Idea CoLor Scheme) extension to avoid confusion about compatibility problems with older platform versions:
if only standard attributes are set, they will not be used by the version before 12.1, resulting in different highlighting colors.

## Plugin Developers

### Text Attribute Key Dependency

The easiest and the best way to specify highlighting text attributes is to specify a dependency on one of standard keys defined in [`DefaultLanguageHighlighterColors`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/DefaultLanguageHighlighterColors.java):

```java
static final TextAttributesKey MY_KEYWORD =
  TextAttributesKey.createTextAttributesKey("MY_KEYWORD", DefaultLanguageHighlighterColors.KEYWORD);
```

The color scheme manager will search first for text attributes specified by the `MY_KEYWORD` key.
If those are not defined explicitly or if all the attributes are empty (undefined), it will search them using the `DEFAULT_KEYWORD` key.
If neither is defined, it will further fall back to a default scheme.

Text attribute keys can be chained, for example, you can define another key as:

```java
static final TextAttributesKey MY_PREDEFINED_SYMBOL =
  TextAttributesKey.createTextAttributesKey("MY_PREDEFINED_SYMBOL", MY_KEYWORD);
```

The rule is the same: if text attributes can not be found by the `MY_PREDEFINED_SYMBOL` key or are empty, the color scheme manager will search for `MY_KEYWORD` and if not found (empty) will further look for `DEFAULT_KEYWORD`.

> A use of fixed default attributes is _strongly discouraged_.
>
{style="note"}

If you are unsure which base key to use, it's better to pick the most generic one, for example, `DefaultLanguageHighlighterColors.IDENTIFIER`.
Remember that using fixed default attributes *will force* a scheme designer to explicitly set up a color for this element.
Otherwise, its default colors may visually conflict with a color scheme.
If the scheme designer doesn't have a language plugin, he will not be able to fix this at all.

### Providing Attributes for Specific Schemes

A language plugin may provide default text attributes for "Default" and "Darcula" bundled schemes or basically for any other scheme if the scheme's name is known.
This can be done in <path>[plugin.xml](plugin_configuration_file.md)</path> by adding an `com.intellij.additionalTextAttributes` extension providing the name of the file containing desired text attributes, for example:

```xml
<extensions defaultExtensionNs="com.intellij">
  ...
  <additionalTextAttributes
      scheme="Default"
      file="colorSchemes/MyLangDefault.xml"/>
  ...
</extensions>
```

It tells the IDE that the file <path>MyLangDefault.xml</path> must be searched in resources under <path>colorSchemes</path>.
Note that the path should *not* start with a backslash and its fully qualified name (in our case <path>colorSchemes/MyLangDefault.xml</path>) *MUST BE UNIQUE* to avoid naming collisions between different providers.
Thus, adding a language prefix, for example, "MyLang", is highly recommended.

The file itself is an extract from a color scheme with required attributes, for example:

```xml
<?xml version='1.0'?>
<list>
  <option name="MY_VAR">
    <value>
      <option name="FOREGROUND" value="660000"/>
    </value>
  </option>
  <option name="MY_SPECIAL_CHAR">
    <value>
      <option name="FOREGROUND" value="008000"/>
      <option name="BACKGROUND" value="e3fcff"/>
      <option name="FONT_TYPE" value="1"/>
    </value>
  </option>
</list>
```

*Note:* When the scheme is copied via <control>Save as...</control> all its attributes, including the ones defined in the extension, will be copied to the new scheme.
A scheme designer may need to check that these copied attributes do not conflict with their color scheme, although in this case, the plugin is installed, and it should not cause any problems.
Anyway, try to stick with a simple key dependency if possible (note that it works well for "Darcula") and provide explicit attributes only if necessary.

## Scheme Designers

<procedure title="A Typical Workflow for a New Scheme Creation">

1. Choose a scheme which will be used as a base, for example, "Default".
2. Click <control>Save As...</control> and give a name for the new scheme.
3. First set attributes in the <control>General</control> section and proceed with <control>Language Defaults</control>.
4. Check all the languages and adjust language-specific text attributes if necessary.
  In most cases, this may not be needed, but two cases may require an extra action:

    * There is an obsolete plugin which does not use the new color scheme management API and therefore does not utilize the attributes set in <control>Language Defaults</control>.
      Ideally, a report must be created for the language plugin so that its author will fix it eventually.
    * A plugin intentionally sets some default colors and, if the scheme was created from a default one, the colors are copied to the newly created scheme.
      This can be fixed either by resetting all the attributes to restore the inheritance from <control>Language Defaults</control> (see below) or by setting other colors suitable for the scheme.

    The first way is preferable since it will require less effort to change the color scheme later.

</procedure>

### Text Attributes Inheritance

For many language text attributes that do not have any values, there will be a line indicating that the attributes are inherited from a specific section/attributes, such as <control>Keyword</control> in <control>Language Defaults</control>.
If an element has *any* attributes set, only these attributes are used.
All attributes from the base element are ignored.
To *restore* the inheritance, uncheck all the boxes, and click <control>Apply</control>.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Combo Box

<link-summary>UI guidelines on using combo boxes.</link-summary>

<tldr>

**Implementation**: [`ComboBox`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/ComboBox.java)

</tldr>

A combo box combines a [drop down list](drop_down.md) and an [input field](input_field.md), allowing the user to select a value from the list or enter a custom value.

![A preview of a combo box](combobox.png){width=706}

Use [`ComboBox`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/ComboBox.java) instead of `javax.swing.JComboBox`.
To make combo box editable invoke:

```java
comboBox.setEditable(true);
```

## When to use


### Select value or enter custom

When the user needs to select a value or enter a custom value, use the combo box:

![A font size  that allows selecting predefined values as well as entering a custom value](combobox_when_to_use_1.png){width=706}

### Return to previous states
Use a combo box if users may need to revisit previous values, such as saving entered paths for quick selection later:

![A  with an open menu with previously selected values](combobox_when_to_use_2.png){width=706}

## When not to use

### The number of options is finite

If the number of options is finite, and there is no need to enter custom values, use a [dropdown list](drop_down.md) or [radio buttons](radio_button.md):

![The Theme dropdown with a predefined list of values](combobox_when_not_to_use_1.png){width="706"}

### Impossible to list values

If it is not possible to list the most likely choices, use an [input field](input_field.md) instead:

![A port number input](combobox_when_not_to_use_2.png){width=706}

### Large list with expected values

If the list is big, and the user knows what value they need and won’t review the list, use an input field with completion:

![An input field with a completion popup](combobox_when_not_to_use_3.png){width=706}

## How to use

### Label and default value

For the [label](drop_down.md#label) and the [default value](drop_down.md#default-value) apply the same rules as for the
[dropdown list](drop_down.md).

### Initial state

If there are no values in the list initially, replace the combo box with an input field.
This way, users won't waste their time clicking the empty combo box to find out that there are no options available.

<table style="none" border="false">
  <tr>
    <td width="50%">
      <format color="Red" style="bold">Incorrect</format><img src="combobox_how_to_use_1_incorrect.png" alt="An incorrect example of a repository input field without values"/>
    </td>
    <td width="50%">
      <format color="Green" style="bold">Correct</format><img src="combobox_how_to_use_1_correct.png" alt="A correct example of a repository input field without values"/>
    </td>
  </tr>
</table>

Replace the input field with a combo box after a value has been entered and confirmed:

<table style="none" border="false">
  <tr>
    <td width="50%">
      <format color="Red" style="bold">Incorrect</format><img src="combobox_how_to_use_2_incorrect.png" alt="An incorrect example of a repository input field without values"/>
    </td>
    <td width="50%">
      <format color="Green" style="bold">Correct</format><img src="combobox_how_to_use_2_correct.png" alt="A correct example of a repository input field without values"/>
    </td>
  </tr>
</table>

### Menu items

#### Predefined options

Show the predefined or most likely options in the list. Follow the rules for [dropdown menu items](drop_down.md#menu-items).

#### Previous inputs

If the user needs to return to previous inputs, add such values to the end of the list when the confirmation button in the dialog is clicked:

![A combo box with previously entered values in the menu](combobox_menu_items_1.png){width=706}

#### Built-in button

Use [built-in buttons](built_in_button.md) to add values or expand the combo box, e.g., the browse button:

![A combo box with the browse built-in button](combobox_menu_items_2.png){width=706}

## Validation

If the user enters an invalid value, highlight the combo box with red and show an error message in a tooltip. For
more details, see [validation errors](validation_errors.md).

![A combo box with an error message](combobox_validation.png){width=706}

## How to layout

Follow the [labeled input controls](layout.md#labeled-input-controls).

## Built-in behaviour

### Opening the menu

The combo box menu opens by clicking on the arrow button on the right or pressing the <shortcut>Down</shortcut> arrow key when the combo box is focused.
   The menu opens down by default. If there is not enough space, the menu opens up.

### Selected value

The value that was shown in the closed combo box is selected in the open menu. A value in the list is not selected if a custom value was entered.

### Moving the selection

The selection is moved and the value in the combo box is updated by pressing the <control>Up</control> and <control>Down</control> arrow keys. When using a mouse, the selection is changed on mouse hover, the value is updated by clicking the mouse button or pressing <shortcut>Enter</shortcut>.

### Closing the menu

The menu remains opened until the user clicks the item in the list, presses <shortcut>Enter</shortcut> or <shortcut>Esc</shortcut>, clicks outside the menu,
   or switches to another app.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 18. Commenter

<link-summary>Sample implementation of Simple language code commenter.</link-summary>

<tldr>

**Reference**: [](additional_minor_features.md#comment-code)

**Code**: [`SimpleCommenter`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCommenter.java)

**Testing**: [](commenter_test.md)

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

A commenter enables the user to comment-out a line of code at the cursor or selected code automatically.
The [`Commenter`](%gh-ic%/platform/core-api/src/com/intellij/lang/Commenter.java) defines support for <ui-path>Code | Comment with Line Comment</ui-path> and <ui-path>Code | Comment with Block Comment</ui-path> actions.

## Define a Commenter

The [`SimpleCommenter`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCommenter.java) for Simple Language defines the line comment prefix as `#`.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCommenter.java" include-symbol="SimpleCommenter"}

## Register the Commenter

The `SimpleCommenter` implementation is registered in the plugin configuration file using the `com.intellij.lang.commenter` extension point.

```xml
<extensions defaultExtensionNs="com.intellij">
  <lang.commenter
      language="Simple"
      implementationClass="org.intellij.sdk.language.SimpleCommenter"/>
</extensions>
```

## Run the Project

Run the plugin by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

Open the example Simple Language [properties file ](lexer_and_parser_definition.md#run-the-project) in the IDE Development Instance.
Place the cursor at the `website` line.
Select <ui-path>Code | Comment with Line Comment</ui-path>.
The line is converted to a comment.
Select <ui-path>Code | Comment with Line Comment</ui-path> again, and the comment is converted back to active code.

![Commenter](commenter.png)
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 9. Commenter Test

<link-summary>Implementing and running test for the commenter implemented as a part of the Custom Language Support Tutorial.</link-summary>

<tldr>

**Tested Functionality**: [](commenter.md)

</tldr>

<include from="tests_prerequisites.md" element-id="custom_language_testing_tutorial_header"></include>

## Define a Test Method
Add the `testCommenter()` method to the `SimpleCodeInsightTest` class [previously defined](completion_test.md#define-a-test).
This test constructs a Simple Language properties file containing one line, with the virtual caret positioned at the beginning of the line.
The test calls the commenter to insert a comment character at the caret, then verifies the results.
It again calls the line comment action to remove the comment character and verifies the results.

```java
```
{src="simple_language_plugin/src/test/java/org/intellij/sdk/language/SimpleCodeInsightTest.java" include-symbol="testCommenter"}

## Run the Test

<include from="custom_language_testing_snippets.md" element-id="runTests"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 9. Completion Contributor

<link-summary>Sample implementation of code completion in Simple language files.</link-summary>

<tldr>

**Reference**: [](code_completion.md)

**Code**: [`SimpleCompletionContributor`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCompletionContributor.java)

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

Custom languages provide code completion using one of two approaches: Contributor and Reference-based (see [](reference_contributor.md)) completion.

## Define a Completion Contributor

For this tutorial, the `simple_language_plugin` provides custom completion for values in Simple Language property files.
Create [`SimpleCompletionContributor`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCompletionContributor.java)
by subclassing [`CompletionContributor`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/completion/CompletionContributor.java).
This rudimentary completion contributor always adds "Hello" to the completion variants result set, regardless of context:

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCompletionContributor.java" include-symbol="SimpleCompletionContributor"}

## Register the Completion Contributor

The `SimpleCompletionContributor` implementation is registered in the plugin configuration file using the `com.intellij.completion.contributor` extension point and specifying `language="Simple"`.

```xml
<extensions defaultExtensionNs="com.intellij">
  <completion.contributor
      language="Simple"
      implementationClass="org.intellij.sdk.language.SimpleCompletionContributor"/>
</extensions>
```

## Run the Project

Run the plugin by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

Open the [`test.simple`](lexer_and_parser_definition.md#run-the-project) file.
Erase the property "English" and invoke [Basic Code Completion](https://www.jetbrains.com/help/idea/auto-completing-code.html#invoke-basic-completion).
The choice "Hello" is shown:

![Completion](completion.png)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 3. Completion Test

<tldr>

**Tested Functionality**: [](reference_contributor.md)

</tldr>

<include from="tests_prerequisites.md" element-id="custom_language_testing_tutorial_header"></include>

## Define Test Data
Create the <path>DefaultTestData.simple</path> file in the <path>testData</path> directory.
This file contains test Simple language properties that will be completed in a test Java file (see the `Test` class later in this section).

```properties
```
{src="simple_language_plugin/src/test/testData/DefaultTestData.simple"}

Create a test input Java file <path>CompleteTestData.java</path> in the <path>testData</path> directory.
This file contains a Simple Language reference within the Java code at `<caret>` [special marker](test_project_and_testdata_directories.md#special-markup), which denotes the caret position to use in the test.

```java
```
{src="simple_language_plugin/src/test/testData/CompleteTestData.java"}

## Define a Test
Subclass [`LightJavaCodeInsightFixtureTestCase`](%gh-ic%/java/testFramework/src/com/intellij/testFramework/fixtures/LightJavaCodeInsightFixtureTestCase.java) to create `SimpleCodeInsightTest`.
Override `getTestDataPath()`, and return the path from the root of this plugin module to the <path>testData</path> directory.

```java
```
{src="simple_language_plugin/src/test/java/org/intellij/sdk/language/SimpleCodeInsightTest.java" include-symbol="getTestDataPath"}


At this point, only one test is defined in `SimpleCodeInsightTest`: `testCompletion()`.
This method:
* Configures the test using the two input files.
* Calls the basic completion functionality.
  Behind the scenes, this method call creates a list of possible elements to complete the embedded Simple Language reference.
* Checks the list of returned lookup strings to ensure it matches the completion variants provided by the reference.

```java
```
{src="simple_language_plugin/src/test/java/org/intellij/sdk/language/SimpleCodeInsightTest.java" include-symbol="testCompletion"}


A number of related methods exist in [`CodeInsightTestFixture`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/fixtures/CodeInsightTestFixture.java) for testing completion and lookup elements, e.g., when testing completion variants and requiring only one testdata file `CodeInsightTestFixture.testCompletionVariants()`.

## Run the Test

<include from="custom_language_testing_snippets.md" element-id="runTests"/>
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Configuring Gradle IntelliJ Plugin

<link-summary>Configuring the essential Gradle IntelliJ Plugin attributes and tasks.</link-summary>

This section presents a guided tour of Gradle plugin attributes to achieve the commonly desired functionality.
For more advanced options, see the full [](tools_gradle_intellij_plugin.md) reference.

<include from="creating_plugin_project.md" element-id="gradle1xOnly"/>

<include from="snippets.md" element-id="gradlePluginVersion"/>

## Keep Up To Date

Gradle IntelliJ Plugin and [Gradle](https://gradle.org/install/) build system are constantly developed, and every new release brings important bug fixes, new features, and improvements that makes the development more efficient.
It is strongly recommended to keep updating both Gradle and Gradle IntelliJ Plugin to the latest versions.
Newer IDE releases might not be supported fully in older releases of Gradle IntelliJ Plugin.

> Current Gradle IntelliJ Plugin version is %gradle-intellij-plugin-version%
{style="note"}

## Target Platform and Dependencies

<snippet id="whichPlatformVersion">

> Which versions should your plugin support? We've collected some insights based on download statistics in [Statistics: Product Versions in Use](https://plugins.jetbrains.com/docs/marketplace/product-versions-in-use-statistics.html).
>

</snippet>

By default, the Gradle plugin will build a plugin project against the IntelliJ Platform defined by the latest EAP snapshot of the IntelliJ IDEA Community Edition.

If a matching version of the specified IntelliJ Platform is not available on the local machine, the Gradle plugin downloads the correct version and type.
IntelliJ IDEA then indexes the build and any associated source code and JetBrains Java Runtime.

To build a plugin for more than one target platform version, see [](build_number_ranges.md#multipleIDEVersions) for important notes.

### IntelliJ Platform Configuration

Explicitly setting the [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version) and [`intellij.type`](tools_gradle_intellij_plugin.md#intellij-extension-type) properties tells the Gradle plugin to use that configuration of the IntelliJ Platform to create the plugin project.

> See the [Developing for Multiple Products](dev_alternate_products.md) page for information about how to develop a plugin that is compatible with multiple IntelliJ-based IDEs.
>

All available platform versions can be browsed in the [](intellij_artifacts.md).

If the chosen platform version is not available in the repositories, or a local installation of the target IDE is the desired type and version of the IntelliJ Platform, use [`intellij.localPath`](tools_gradle_intellij_plugin.md#intellij-extension-localpath) to point to that installation.
If the `intellij.localPath` attribute is set, do not set the `intellij.version` and `intellij.type` attributes as this could result in undefined behavior.

### Plugin Dependencies

IntelliJ Platform plugin projects may depend on either bundled or third-party plugins.
In that case, a project should build against a version of those plugins that match the IntelliJ Platform version used to build the plugin project.
The Gradle plugin will fetch any plugins in the list defined by [`intellij.plugins`](tools_gradle_intellij_plugin.md#intellij-extension-plugins).
See the Gradle plugin [IntelliJ Extension](tools_gradle_intellij_plugin.md#configuration-intellij-extension) for information about specifying the plugin and version.

Note that this attribute describes a dependency so that the Gradle plugin can fetch the required artifacts.
The runtime dependency must be added in the [Plugin Configuration](plugin_configuration_file.md) (<path>plugin.xml</path>) file as described in [Plugin Dependencies](plugin_dependencies.md#dependency-declaration-in-pluginxml).

## Run IDE Task

By default, the Gradle plugin will use the same version of the IntelliJ Platform for the IDE Development Instance as was used for building the plugin.
Using the corresponding JetBrains Runtime is also the default, so for this use-case no further configuration is required.

### Running Against Alternate Versions and Types of IntelliJ Platform-Based IDEs

The IntelliJ Platform IDE used for the [Development Instance](ide_development_instance.md) can be different from that used to build the plugin project.
Setting the [`runIde.ideDir`](tools_gradle_intellij_plugin.md#tasks-runide-idedir) property will define an IDE to be used for the Development Instance.
This attribute is commonly used when running or debugging a plugin in an [alternate IntelliJ Platform-based IDE](intellij_platform.md#ides-based-on-the-intellij-platform).

### Running Against Alternate Versions of the JetBrains Runtime

Every version of the IntelliJ Platform has a corresponding version of the [JetBrains Runtime](ide_development_instance.md#using-a-jetbrains-runtime-for-the-development-instance).
A different version of the runtime can be used by specifying the [`runIde.jbrVersion`](tools_gradle_intellij_plugin.md#tasks-runide-jbrversion) attribute, describing a version of the JetBrains Runtime that should be used by the IDE Development Instance.
The Gradle plugin will fetch the specified JetBrains Runtime as needed.

## Patching the Plugin Configuration File

A plugin project's <path>plugin.xml</path> file has element values that are "patched" at build time from the attributes of the [`patchPluginXml`](tools_gradle_intellij_plugin.md#tasks-patchpluginxml) task.
As many as possible of the attributes in the Patching DSL will be substituted into the corresponding element values in a plugin project's <path>plugin.xml</path> file:
* If a `patchPluginXml` attribute default value is defined, the attribute value will be patched in <path>plugin.xml</path> _regardless of whether the `patchPluginXml` task appears in the Gradle build script_.
  * For example, the default values for the attributes [`patchPluginXml.sinceBuild`](tools_gradle_intellij_plugin.md#tasks-patchpluginxml-sincebuild) and [`patchPluginXml.untilBuild`](tools_gradle_intellij_plugin.md#tasks-patchpluginxml-untilbuild) are defined based on the declared (or default) value of [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version).
    So by default `patchPluginXml.sinceBuild` and `patchPluginXml.untilBuild` are substituted into the [`<idea-version>`](plugin_configuration_file.md#idea-plugin__idea-version) element's `since-build` and `until-build` attributes in the <path>plugin.xml</path> file.
* If a [`patchPluginXml`](tools_gradle_intellij_plugin.md#tasks-patchpluginxml) task's attribute value is explicitly defined, the attribute value will be substituted in <path>plugin.xml</path>.
  * If both `patchPluginXml.sinceBuild` and `patchPluginXml.untilBuild` attributes are explicitly set, both are substituted in <path>plugin.xml</path>.
  * If one attribute is explicitly set (e.g. `patchPluginXml.sinceBuild`) and one is not (e.g. `patchPluginXml.untilBuild` has a default value), both attributes are patched at their respective (explicit and default) values.
* For **no substitution** of the `<idea-version>` element's `since-build` and `until-build` attributes, set [`intellij.updateSinceUntilBuild`](tools_gradle_intellij_plugin.md#intellij-extension-updatesinceuntilbuild) to `false`, and do not provide `patchPluginXml.sinceBuild` and `patchPluginXml.untilBuild` values.

The best practice to avoid confusion is to replace the elements in <path>plugin.xml</path> that will be patched by the Gradle plugin with a comment.
That way, the values for these parameters do not appear in two places in the source code.
The Gradle plugin will add the necessary elements as part of the patching process.
For those [`patchPluginXml`](tools_gradle_intellij_plugin.md#tasks-patchpluginxml) attributes that contain descriptions such as [`patchPluginXml.changeNotes`](tools_gradle_intellij_plugin.md#tasks-patchpluginxml-changenotes) and [`patchPluginXml.pluginDescription`](tools_gradle_intellij_plugin.md#tasks-patchpluginxml-plugindescription), a `CDATA` block is not necessary when using HTML elements.

> To maintain and generate an up-to-date changelog, try using [Gradle Changelog Plugin](https://github.com/JetBrains/gradle-changelog-plugin).
>

As discussed in [](creating_plugin_project.md#components-of-a-wizard-generated-gradle-intellij-platform-plugin), the Gradle properties `project.version`, `project.group`, and `rootProject.name` are all generated based on the input to the Wizard.
However, the [](tools_gradle_intellij_plugin.md) does not combine and substitute those Gradle properties for the default [`<id>`](plugin_configuration_file.md#idea-plugin__id) and [`<name>`](plugin_configuration_file.md#idea-plugin__name) elements in the <path>plugin.xml</path> file.

The best practice is to keep `project.version` current.
By default, if you modify `project.version` in Gradle build script, the Gradle plugin will automatically update the [`<version>`](plugin_configuration_file.md#idea-plugin__version) value in the <path>plugin.xml</path> file.
This practice keeps all version declarations synchronized.

## Verifying Plugin

The Gradle plugin provides tasks that allow for running integrity and compatibility tests:
* [`verifyPluginConfiguration`](tools_gradle_intellij_plugin.md#tasks-verifypluginconfiguration) - validates the versions of SDK, target platform, APIs, etc., configured in a plugin project,
* [`verifyPlugin`](tools_gradle_intellij_plugin.md#tasks-verifyplugin) - validates completeness and contents of <path>plugin.xml</path> descriptors as well as plugin's archive structure,
* [`runPluginVerifier`](tools_gradle_intellij_plugin.md#tasks-runpluginverifier) - runs the [IntelliJ Plugin Verifier](https://github.com/JetBrains/intellij-plugin-verifier) tool to check the binary compatibility with specified IntelliJ IDE builds.

Plugin Verifier integration task allows for configuring the exact IDE versions that your plugin will be checked against.
See [](verifying_plugin_compatibility.md#plugin-verifier) for more information.

## Publishing Plugin

Please review the [](publishing_plugin.md) page before using the [`publishPlugin`](tools_gradle_intellij_plugin.md#tasks-publishplugin) task.
That documentation explains different ways to use Gradle for plugin uploads without exposing account credentials.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Consulting

<link-summary>List of independent companies and individuals providing paid plugin consulting and development services.</link-summary>

The following independent companies and individuals provide paid plugin consulting and development services.

Also, consider posting requests in _#jobs_ channel on [JetBrains Platform Slack](https://plugins.jetbrains.com/slack).

> JetBrains is not responsible for nor guarantees the performance of these independent third-party companies.

| Name               | Contact                                                    | Notes                                                                        |
|--------------------|------------------------------------------------------------|------------------------------------------------------------------------------|
| Joachim Ansorg     | [j-a.dev][ja], [plugin-dev.com][ja2], [mail@j-a.dev][ja3] | Custom Plugin Development and Consulting since 2017, Developer of [BashSupport Pro][ja4]|
| Daniel Espendiller | [daniel@espendiller.net][de]                               | -/-                                                                          |
| Edument            | [jonathan@edument.cz][ed], [edument.se][ed2]               | Developers of [Comma IDE][ed3]                                               |
| Mikhail Bolotov    | [mikhail.bolotov@gmail.com][mb]                            | Plugins: [Cypress Support Pro][cspro], [k6]                                  |
| Ilscipio GmbH      | [Paul Piper][il], [www.ilscipio.com][il2]                  | Custom Plugin Development                                                    |
| Tamás Balog        | [www.picimako.com][pm]                                     | Custom Plugin Development                                                    |
| Dmitry Kandalov    | [dmitry.kandalov@gmail.com][dk]                            | Custom Plugin Development (e.g. using [LivePlugin][lp])                      |
| Jonathan Lermitage | [jonathan@lermitage.biz][jle1]                             | Developer of [12 plugins][jle2] (e.g. [Extra Icons][jle3])                   |

[ja]: https://www.j-a.dev
[ja2]: https://www.plugin-dev.com
[ja3]: mailto:mail@j-a.dev
[ja4]: https://www.bashsupport.com
[de]: mailto:daniel@espendiller.net
[ed]: mailto:jonathan@edument.cz
[ed2]: https://www.edument.se/en/page/intellij-platform-development
[ed3]: https://commaide.com
[cspro]: https://plugins.jetbrains.com/plugin/13987-cypress-support-pro
[k6]: https://plugins.jetbrains.com/plugin/16141-k6
[mb]: https://plugins.jetbrains.com/organization/mbolotov
[il]: mailto:info@ilscipio.com
[il2]: https://www.ilscipio.com
[pm]: https://www.picimako.com
[bn]: mailto:beansoft@126.com
[dk]: mailto:dmitry.kandalov@gmail.com
[lp]: https://plugins.jetbrains.com/plugin/7282-liveplugin
[bn2]: https://plugins.jetbrains.com/organizations/BeanSoft
[rnc]: https://plugins.jetbrains.com/plugin/9564-react-native-console
[jle1]: mailto:jonathan@lermitage.biz
[jle2]: https://plugins.jetbrains.com/author/ed9cc7eb-74f5-46c1-b0df-67162fe1a1c5
[jle3]: https://plugins.jetbrains.com/plugin/11058-extra-icons/

Please [submit a PR or file a YouTrack issue](getting_help.topic) for changes or additions to this list.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Content Updates

<link-summary>Notable updates and additions to this documentation.</link-summary>

This page lists notable additions and updates to the SDK documentation and [](code_samples.md).

See [GitHub Changelog](https://github.com/JetBrains/intellij-sdk-docs/commits/main) ([RSS](https://github.com/JetBrains/intellij-sdk-docs/commits/main.atom)) for a detailed changelog.

<include from="snippets.md" element-id="subscribeNews"/>

## 2025

### January
{january-25}

Coroutines on EDT and Locks
: Added a [page](coroutine_edt_and_locks.md) describing the current implicit locking behavior on EDT launched from coroutines and planned changes with migration hints.

## 2024

### December
{december-24}

Live Templates Configuration File
: Added a page describing the structure and elements of [live templates configuration files](live_templates_configuration_file.md).

### August
{august-24}

Workspace Model
: [](workspace_model.md) represents the project's structure and all its elements and replaces the existing [](project_model.md).

Minor Changes and Additions
:
- Updated list of [supported features](language_server_protocol.md#supported-features) for Language Server Protocol (LSP).

### July
{july-24}

Threading Model
:
Revamp the [Threading Model](threading_model.md) page (formerly _General Threading Rules_) and add a new page describing [background processes](background_processes.md), including cancellation and progress tracking.

Coroutines Read Actions
:
Added FAQ section and explanation of [why suspending inside the block is not allowed](coroutine_read_actions.topic#why-can-t-i-suspend-inside-the-block).

### June
{june-24}

Code Formatter
: Rework [](code_formatting.md) page, extending explanations and updating content.


### May
{may-24}

Minor Changes and Additions
:
- How to support [grammar checks](spell_checking.md#grammar-checks) provided by Grazie plugin in custom languages.
- How to provide [code vision provider](inlay_hints.md#code-vision-provider) name and description in the settings.
- How to manage [Web Symbols context](websymbols_context.md) detection.

### April
{april-24}

Plugin Internationalization
: Add [](internationalization.md) and [](providing_translations.md) pages describing IDE and plugin translation possibilities and best practices.

Minor Changes and Additions
:
- How to mark functionality available during indexing via [](indexing_and_psi_stubs.md#DumbAwareAPI).
- Move Extension Point and Listener Lists to the _Resources_ section and split the main _Extension Point and Listener List_ into: _IntelliJ Platform_, _IntelliJ Community Plugins_, and _Android Plugin_.

### March
{#march-24}

Kotlin Coroutines
: Add [](kotlin_coroutines.md) describing how to write asynchronous code in an imperative style.

Minor Changes and Additions
:
- Add [documentation](plugin_extension_points.md#error-handling) on how to handle errors and deprecations in extensions.
- Note changes in how highlighting is now [performed more efficiently](syntax_highlighting_and_error_highlighting.md#order-of-running-highlighting) in 2024.1.

### February
{#february-24}

IntelliJ Platform Gradle Plugin 2.x (Early Access Preview)
: Add [documentation](tools_intellij_platform_gradle_plugin.md) for the next generation of Gradle tooling for plugin development.

## 2023

### December
{#december-23}

JCEF
: Revamp [JCEF (Java Chromium Embedded Framework)](embedded_browser_jcef.md) page.

User Interface FAQ
: Added [](ui_faq.md).

Language Server Protocol (LSP)
: Added [](language_server_protocol.md).

### November
{#november-23}

Minor Changes and Additions
:
- Add information about [executing actions programmatically](basic_action_system.md#executing-actions-programmatically).
- Please see [](tools_gradle_intellij_plugin.md#attaching-sources) on how to set up 2023.2/3 IDEs for Gradle plugin projects.

### October
{#october-23}

Kotlin Persisting State Component
: Add an [example](persisting_state_of_components.md#implementing-the-persistentstatecomponent-interface) of a persistent state component implemented in Kotlin.

Minor Changes and Additions
:
- Add section [](module.md#storing-a-reference-to-a-module).

### September
{#september-23}

Run Configuration Macros
: Add [](run_configurations.md#macros) section describing how to support dynamic expandable values in run configuration settings.

Inlay Hints
: Update [](inlay_hints.md) page with the information about new APIs.

Threading Model
: Update [](threading_model.md) to reflect changes in 2023.3 platform.

Minor Changes and Additions
:
- Add information about ordering [quick fixes](code_inspections.md#quick-fix-implementation) and [intentions actions](code_intentions.md#techniques-used).
- Clarify the information about [declarative inlay hints](inlay_hints.md#declarative-inlay-hints-provider) customization possibilities.

### July
{#july-23}

Run Configurations
: Describe techniques for [simplifying run configuration settings editors](run_configurations.md#simplifying-settings-editors).

### June
{#june-23}

Execution
: Rework [](execution.md), [](run_configurations.md), and [](run_configurations_tutorial.md) pages.

Minor Changes and Additions
:
- Clarify [the syntax highlighting](testing_highlighting.md#syntax-highlighting) test file format and test implementation initial approach.
- Clarify referencing icons by paths and icon holder class constants in [](icons.md).
- Add information about requirements for persistent state components to be included in [the _Settings Sync_ plugin synchronization mechanism](persisting_state_of_components.md#settings-sync-plugin).

### April
{#april-23}

Documentation
: Rework [](documentation.md) page and adapt it to the new `DocumentationTargetProvider` framework.

### March
{#march-23}

Web Symbols
: Add [](websymbols.md) documentation, which is a framework that simplifies web technology development
by utilizing the [](symbols.md) API and supporting custom syntaxes.

Open Source Plugins Extension Points
: Added [](oss_plugins_extension_point_list.md) for plugins bundled with [](idea_ultimate.md) and other IDEs.



### February
{#february-23}

Inspection Options
: Add a section on [](inspection_options.md), which allows extending inspection behavior based on the input provided by user at runtime.

Minor Changes and Additions
:
- Add section on [](icons.md#new-ui-icons).
- Document [](spell_checking.md#runtimedictionaryprovider) EP for spellchecking.

### January
{#january-23}

Minor Changes and Additions
:
- Update _IDE Support_ section in [](verifying_plugin_compatibility.md).
- UI Inspector: update [](internal_ui_inspector.md#specific-component-properties) and add section [](internal_ui_inspector.md#inspecting-settings).

## 2022

### December
{#december-22}

Intention Preview
: Add information about how to prepare intentions to show [](code_intentions_preview.md).

Minor Changes and Additions
:
- Add information for new [](kotlin_ui_dsl_version_2.md#cell-align) methods in Kotlin UI DSL Version 2.

### November
{#november-22}

Plugin User Experience
: Add a new section about how to improve [plugin UX](plugin_user_experience.md) and overall plugin quality.

Minor Changes and Additions
:
- Add information about threading in Actions in [](basic_action_system.md#principal-implementation-overrides).

### October
{#october-22}

Minor Changes and Additions
:
- Add information about [sharing settings](persisting_state_of_components.md#sharing-settings-between-ide-installations) between different IDEs installations.

### September
{#september-22}

Extract "Themes" part
:
All the content related to [themes customization](theme_structure.md) and creating a project using the [DevKit approach](developing_themes.md) has been moved to a new [_Themes_](themes_getting_started.md) part.
Content has been refreshed to match the current state of the project and SDK wizards.

Spell Checking
: Add [](spell_checking.md) section with an [accompanying tutorial](spell_checking_strategy.md) showing how to implement a spell checking for a custom language.

Minor Changes and Additions
:
- Add descriptions for the following EPs to [](additional_minor_features.md): [](additional_minor_features.md#prevent-error-highlighting-of-files), [](additional_minor_features.md#provide-fully-qualified-names-fqn-for-elements), [](additional_minor_features.md#label-files-as-test-files), [](additional_minor_features.md#move-statements-up-and-down-in-the-editor).
- Add section about [](ide_infrastructure.md#power-save-mode).
- Highlight references automatically via [](references_and_resolve.md#additional-highlighting)
- Language injections: controlling [](language_injection.md#formatting)

### August
{#august-22}

Plugin Configuration Page
: Update the [](plugin_configuration_file.md) page to describe all the elements in detail.

Source links migrated from Upsource to GitHub
: All source links now point to GitHub instead of Upsource (which is going to be [sunset](https://blog.jetbrains.com/upsource/2022/01/31/upsource-end-of-sales-announcement/)).

### July
{#july-22}

Status Bar Widgets
: Add section [](status_bar_widgets.md) describing how to implement your own status bar widgets.

Minor Changes and Additions
:
- Add overview of [](basic_action_system.md#useful-action-base-classes).

### June
{#june-22}

PHP Type Providers
: Add section [](php_open_api_php_type_providers.md) about type providers describing type inference in PhpStorm and how to implement your own type provider.

Postfix Completion
: Add [](postfix_completion.md) section explaining how to implement generating or wrapping the existing code into additional constructs without navigating the caret back.

Gradle IntelliJ Plugin
: Add [](tools_gradle_intellij_plugin.md) documentation to _Tooling_.

Bundling Plugin API Sources
: Add the [](bundling_plugin_openapi_sources.md) section explaining how to expose plugin API sources to dependent plugin developers.

Minor Changes and Additions
:
- Add a small section to [](php_open_api.md#utility-classes) describing `PhpFilePathUtils` utility class.
- Add mention of the way to programmatically open an autocomplete popup to [](code_completion.md).
- Add a small section to [](icons.md#animated-icons) describing animated icons.
- Moved [](tools_gradle_grammar_kit_plugin.md) documentation to _Tooling_.

### May
{#may-22}

Navigation Bar
: Add [](navbar.md) section with an [accompanying tutorial](structure_aware_navbar.md) showing how to implement a navigation bar for a custom language.

Inlay Hints
: Add section [](inlay_hints.md) describing special markers that appear in the editor and provide additional information, like the names of the parameters that a called method expects.

Minor Changes and Additions
:
- Add a small section to [](editor_components.md) describing convenient `EditorTextField` subclasses.
- Add descriptions for the following EPs to [](additional_minor_features.md):
  [](additional_minor_features.md#recognizing-complex-multi-block-expressions),
  [](additional_minor_features.md#breadcrumbs),
  [](additional_minor_features.md#plain-text-completion),
  [](additional_minor_features.md#splitting-and-joining-list-constructs),
  [](additional_minor_features.md#suggesting-rename-and-change-signature-refactorings),
  [](additional_minor_features.md#reader-mode),
  [](additional_minor_features.md#background-colors-for-editors-and-project-view),
  [](additional_minor_features.md#custom-names-and-tooltips-for-editor-tabs).
- Add small section to [](project_view.md#decorating-project-view-nodes) describing how to modify the representation of nodes in the project view.
- Add [](rename_refactoring.md) paragraphs mentioning `RenameInputValidator(Ex)`.

### April
{#april-22}

Internal API Migration
: As API annotated with `@ApiStatus.Internal` must not be used in plugins, refer to [](api_internal.md) for a list corresponding API replacements and additional information.

### March
{#march-22}

Code Samples Build Scripts Migrated to Kotlin
: All [](code_samples.md) now use Kotlin DSL in their Gradle build scripts.

Android Studio Releases List
: Add [](android_studio_releases_list.md) section containing a complete list of the Android Studio releases with the relevant IntelliJ IDEA release version specified.

Alternatives to Implementing a Plugin
: Add [](plugin_alternatives.md) section describing alternative approaches to extending IDE functionality without actual plugin development.

### February
{#february-22}

Parameter Info
: Add [](parameter_info.md) section explaining how information about function parameters can be shown in the editor.

File and Code Templates
: Add [](file_and_code_templates.md) section explaining how to implement functionality that allows generating files and code fragments containing repetitive text and patterns.

### January
{#january-22}

Highlighting
: Add [](syntax_errors.md) and [](controlling_highlighting.md) sections explaining syntax highlighting basics and filtering highlighting information.

IDE Infrastructure
: Add sections [](ide_infrastructure.md#application-events) and [](ide_infrastructure.md#plugin-management).

## 2021

### December
{#december-21}

Trusted Project
: Potentially unsafe features must be guarded using [Trusted Project API](trusted_projects.md).

### November
{#november-21}

Language Injection
: Add [](language_injection.md) section that shows how the IntelliJ Platform handles different languages within the same source file.


### September
{#september-21}

IDE Infrastructure
: [](ide_infrastructure.md) handles Logging, Error Reporting, Runtime Information, and how to provide Context Help.

Extension Point Lists: Listeners, Deprecation status
: [](intellij_platform_extension_point_list.md) now contains sections listing all provided [Listener](plugin_listeners.md) Topics. See also corresponding Extension Point Lists under _Product Specific_. Also, all deprecated API now has a dedicated tag.

### July
{#july-21}

Plugin Signing
: [](plugin_signing.md) describes the plugin signing process, explains how to generate a certificate, configure the Gradle [`signPlugin`](tools_gradle_intellij_plugin.md#tasks-signplugin) task, and introduces a standalone CLI tool.

### June
{#june-21}

Testing FAQ
: [](testing_faq.md) page lists common issues, useful classes, and techniques for writing and maintaining tests.

Documentation Provider
: Add [](documentation.md) section with an [accompanying tutorial](documentation_provider.md) that show how to implement a `DocumentationProvider` for custom languages.

### May
{#may-21}

IDE specific Extension Point Lists
: See _Product Specific_.

New Guide - Explore the IntelliJ Platform API
: Add a new section [](explore_api.md) that describes how plugin authors work with the IntelliJ Platform API and what tools they use.

### March
{#march-21}

Element Patterns
: Add a new section about [Element Patterns](element_patterns.md) that are used when implementing [Completion Contributors](completion_contributor.md) or [PSI Reference Contributors](psi_references.md#contributed-references).

Editor - Text Selection
: Add a new section about [Text Selection EPs](text_selection.md) and describe [`ExtendWordSelectionHandler`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/ExtendWordSelectionHandler.java).

SDK Setup Assistance
: Added a code sample to the SDK tutorial that expands on [assisting in the setup of an SDK](sdk.md#assisting-in-setting-up-an-sdk).

Unified AST
: [Unified Abstract Syntax Tree (UAST)](uast.md) allows providing features that will work across all supported JVM languages (Java, Kotlin, Scala, Groovy).

## 2020

### December
{#december-20}

IntelliJ Platform Explorer
: Explore usages of [Extension Points](intellij_platform_extension_point_list.md) in open-source plugins using [IntelliJ Platform Explorer](https://jb.gg/ipe).

### November
{#november-20}

Extension Point List
: All EPs [available in IJ Platform and Android](intellij_platform_extension_point_list.md) can now be browsed conveniently.

### August
{#august-20}

README added to Code Samples
: All code samples used in this guide now come with <path>README</path>, making it easier to browse them. They can be conveniently accessed via a [separate GitHub repository](https://github.com/JetBrains/intellij-sdk-code-samples).

### June
{#june-20}

Dynamic Plugins update
: Added new sections _Code_ and _Troubleshooting_ to [Dynamic Plugins](dynamic_plugins.md).

GitHub IntelliJ Platform Plugin Template
: Create new plugins with a preconfigured project scaffold and CI in [one click](plugin_github_template.md).

Disposer & Disposable
: Added [reference](disposers.md) discussing resource cleanup/management.

### May
{#may-20}

Settings (Preferences)
: Added [guide](settings_guide.md) and [tutorial](settings_tutorial.md) on integrating with IDE Settings dialog.

UI Inspector
: Inspect Swing components and associated data (like `AnAction` for menu item) using [UI Inspector](internal_ui_inspector.md).

### March
{#march-20}

JCEF Support
: Allows [embedding](embedded_browser_jcef.md) Chromium-based browser in the IDE.

### February
{#february-20}

All Code Samples converted to Gradle
: [All samples](https://github.com/JetBrains/intellij-sdk-docs/tree/main/code_samples) now use the [recommended solution](creating_plugin_project.md) of setting up plugin projects.

### January
{#january-20}

Custom Language Support Tutorial converted to Gradle
: The [corresponding tutorial](custom_language_support_tutorial.md) and [Testing a Custom Language Plugin](writing_tests_for_plugins.md) have been updated and enhanced as well.

Targeting specific IDEs
: [Product Specific](plugin_compatibility.md) has been expanded massively, now also covering each IDE with its dedicated page.

## 2019

### December
{#december-19}

Dynamic Plugins support
: Added starting point [Dynamic Plugins](dynamic_plugins.md) for migrating plugins (IntelliJ Platform 2020.1 and later).

Plugin Components migration
: Components being a legacy feature, the [updated page](plugin_components.md) describes migrating them to modern replacement API.

### October
{#october-19}

Plugin Repository moved
: All contents have been moved to [JetBrains Marketplace Documentation](https://plugins.jetbrains.com/docs/marketplace/).

### July
{#july-19}

New page: Optimizing Performance
: Optimizing performance when [working with PSI](psi_performance.md), [during indexing](indexing_and_psi_stubs.md#improving-indexing-performance), and [](threading_model.md#avoiding-ui-freezes).

### May
{#may-19}

New Page: Kotlin UI DSL
: [Describes preferred way](kotlin_ui_dsl.md) of building UI/dialogs for IntelliJ Platform 2019.2 and later.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Context Help

<link-summary>Choosing a proper component for context help.</link-summary>

Use context help to briefly explain how a functionality works if it is not clear from the UI and the application behavior. Provide a full description of the functionality in [product web help](https://www.jetbrains.com/help/idea/).

There are three ways to show context help:

* in a [help tooltip](tooltip.md)
* as [inline help text](inline_help_text.md)
* in an [empty state](empty_state.md)

This article explains when to use the first two. For when to use the empty state, see the [](empty_state.md) topic.

## Inline text or a tooltip

Use **inline help text** in settings dialogs:

* Settings are rarely changed. Users may forget what a setting does when they use it the next time, so it makes sense to provide additional information straight away.
* Settings dialogs are usually not constrained in space. In most cases, it is possible to fit in a help text.

![](09_use_inline_help_text.png){width=600}

Use a **help tooltip** if:

* A dialog is often used. The more often a person uses an interface, the more likely they are to remember what each option does.

  ![](10_use_help_tooltip.png){width=573 style=block}
  *A refactoring dialog is used more often than a settings dialog. A help tooltip is less distracting than an inline help text.*

* There is no space for an inline text.

  ![](11_no_space_in_settings.png){width=734}

* The control that needs explanation is an icon or does not have a label.

  ![](03_action_help_tooltip.png){width=305}

## When to use context help

Explain complex behavior that a short action or a setting name cannot convey clearly.

![](04_question_icon_tooltip.png){width=543}

![](02_text_size.png){width=380}

Explain IDE-specific entities.

![](01_IDE_specific.png){width=300}

Provide input format requirements and examples.

![](02_formatting_example.png){width=478}

Suggest alternative ways.

![](03_alternative_ways.png){width=418}

Warn about possible problems.

![](04_possible_problems.png){width=361}

Explain limitations.

![](05_limitations.png){width=432}

Provide quick navigation to related settings.

![](04_link_internal.png){width=345}

## When not to use

Do not use context help to explain how the user interface works. If you need to explain that, consider redesigning the UI.

<format color="Red" style="bold">Incorrect</format>

![](06_explain_how_ui_works.png){width=418}

Do not explain common actions and entities. Show a regular tooltip with an action name and shortcut in this case.

<table>
  <tr>
    <td width="50%"><format color="Red" style="bold">Incorrect</format></td>
    <td width="50%"><format color="Green" style="bold">Correct</format></td>
  </tr>
  <tr>
    <td><img src="07_explain_obvious_incorrect.png" alt="" width="300" /></td>
    <td><img src="07_explain_obvious_correct.png" alt="" width="145" /></td>
  </tr>
</table>

Do not explain each option. Too many help icons or too much inline text make a dialog cluttered and harder to navigate visually.
If all options need to be explained, consider rewriting the labels to make them clearer.

<format color="Red" style="bold">Incorrect</format>

![](08_explain_all_options.png){width=317}

## How to use

See [Inline help text](inline_help_text.md) and [Tooltip](tooltip.md).

# Controlling Highlighting

<!-- Copyright 2000-2022 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

<link-summary>Suppressing highlighting in the editor programmatically.</link-summary>

The results of analyzing code by several mechanisms provided by the IntelliJ Platform ([Syntax errors](syntax_errors.md), Annotators, [Inspections](code_inspections.md)) are converted to highlighting information used to highlight the code in the editor.
However, in some contexts, the provided highlighting information is invalid or unnecessary.

Consider a tool that allows changing Java language's syntax by implicitly generating getters and setters for annotated fields during the build so that they can be omitted in class implementation:

```java
class Person {
    @GetterSetter
    private int age;
}

// usage:
person.setAge(47); // valid at runtime
```

Java support in IntelliJ IDEA would report the above setter usage as an unresolved code symbol.
The resulting error annotation would be valid from the Java language point of view but invalid in a project using such a tool.

Another case where highlighting code issues is unnecessary is old file revisions from VCS.
For example, the old version of a file could be created in a different project context, with other libraries configured.
If the old file version used the library that is not used by the project currently, it would cause reporting false-positive code issues.

The IntelliJ Platform exposes the extension point allowing a plugin to decide which highlighting information will be visible in the editor.
To do that, a plugin has to provide an implementation of [`HighlightInfoFilter`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/daemon/impl/HighlightInfoFilter.java) and register it in the `com.intellij.daemon.highlightInfoFilter` extension point.
It contains a single method `accept()`, which should return `true` if a given `HighlightInfo` should be visible in the editor and `false` to ignore it.

**Examples:**
- [`DebuggerHighlightFilter`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/engine/evaluation/DebuggerHighlightFilter.java) disabling reporting unhandled exceptions in the debugger code editor
- [`LombokHighlightErrorFilter`](%gh-ic%/plugins/lombok/src/main/java/de/plushnikov/intellij/plugin/extension/LombokHighlightErrorFilter.java) disabling false-positive error reports in a project using Lombok

**See also:**
- [Controlling Syntax Errors Highlighting](syntax_errors.md#controlling-syntax-errors-highlighting)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 2. Editor Coordinates System. Positions and Offsets

<link-summary>Tutorial demonstrating how to access editor coordinate system.</link-summary>

The previous tutorial [Working with Text](working_with_text.md) demonstrated how to use actions to access a caret placed in a document open in an editor.
The examples replaced selected text in a document by using information about the caret.

Every caret has a set of properties describing its position in one of several coordinate systems.
This tutorial describes how to access information about the caret(s) in an editor.

## Editor Basics Code Sample

In this tutorial, the [editor_basics](%gh-sdk-samples-master%/editor_basics) code sample is used to explore caret positions.
In particular, the **Caret Position** action added by `editor_basics` to the editor context menu is used to retrieve information about the current caret position.
A keyboard shortcut can also initiate the action.

![Editor Basics Menu](basics.png){width="600"}

The source code for the Java class behind the menu action is [EditorAreaIllustration](%gh-sdk-samples-master%/editor_basics/src/main/java/org/intellij/sdk/editor/EditorAreaIllustration.java).
The focus of discussion will be the `EditorAreaIllustration.actionPerformed()` method.
For more information about creating action classes, see the [Actions Tutorial](action_system.md), which covers the topic in depth.

## Caret Positions from the `CaretModel` and `Caret` Objects

The properties of a caret can be accessed by obtaining an instance of the [`CaretModel`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/CaretModel.java) object.
As in the [Working with Text](working_with_text.md) tutorial, the `AnActionEvent` is used to get the `Editor` object.
The `Editor` object provides access to the `CaretModel` object, as shown below:

```java
public class EditorAreaIllustration extends AnAction {
  @Override
  public void actionPerformed(@NotNull AnActionEvent event) {
    // Get access to the editor and caret model. update() validated editor's existence.
    Editor editor = event.getRequiredData(CommonDataKeys.EDITOR);
    CaretModel caretModel = editor.getCaretModel();
  }
}
```

## Editor Coordinate Systems

When a `Document` is opened, the `Editor` assigns an internal, zero-based coordinate system to lines and columns in the `Document`.
The first line in a `Document` and the first character in each line are assigned the zero position.
Every character in a `Document` is assigned an [Offset](#caret-offset), which is a zero-based count of the characters from the beginning of the file to that character.
These [LogicalPosition](#caret-logical-position) coordinates are used to describe the line and column number for a caret position.
Note that the Logical Position coordinate system is different from the editor UI, which is one-based rather than zero-based.

Logical Position coordinates and other coordinate systems discussed in this tutorial can be used to characterize any location in an `Editor`, not just carets.
Hints used for code insights are characterized in terms of these coordinates, for example [`HintManager.getHintPosition()`](%gh-ic%/platform/platform-impl/src/com/intellij/codeInsight/hint/HintManagerImpl.java).
Custom visual elements displayed in an `Editor`, called [`Inlay`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/Inlay.java) objects, are also expressed in terms of these coordinate systems.

The diagram below shows the Logical Position coordinate system applied to some example content.
The character "s" in the red box represents placing the cursor on that character.
It has the caret position of line 1, column 9, and Offset 28.
More about caret [Offsets](#caret-offset) is discussed below.

![Editor Coordinates](editor_coords.png){width="800"}

The [Multiple Carets](multiple_carets.md) documentation covers the subject of more than one caret in an Editor.
For this tutorial, be aware there may be more than one caret in an `Editor` at any given time.
Consequently, examples use the _Primary Caret_ in an `Editor`.
If there is only one caret in an `Editor`, it is the Primary Caret.
For the case of multiple carets in an `Editor`, the Primary Caret is the one on which query and update methods in the model operate at the moment.

### Caret Logical Position

The caret _Logical Position_ is a zero-based, (line and column) position of the caret in the Editor.
Logical Position information is obtained from the [`LogicalPosition`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/LogicalPosition.java) object for that caret.

The Logical Position line number of a caret ignores the effects of settings that change the presentation of a `Document` within the Editor.
Examples of these settings are [Code (Line) Folding](https://www.jetbrains.com/help/idea/working-with-source-code.html#code_folding) and [Soft Line Wrap](https://www.jetbrains.com/help/idea/using-code-editor.html#f804afd8).
These effects mean regardless of whether one or more lines in an Editor are folded or soft-wrapped, the caret Logical Position line number will not change.

In the example Java file below, Logical Position line numbers 1-3 are folded into line 0.
The caret - a blue block - is placed on the letter "p" in "public."
Using the `editor_basics` **Caret Position** action to inspect the caret, it is reported to be at Logical Position (5,0) - which is line 5, character 0 - the first character in the line.
This means that caret Logical Position is not changed by Code Folding:

![Caret Logical Position with Folding](logical_pos_folded.png){width="800"}

However, note that applying Code Folding _does change the reported Visual Position_ of the caret even if the Logical Position stays constant.
More about [Visual Position](#caret-visual-position) is discussed below.
However, it's clear combinations of Code Folding and Soft Wrap means that one Logical Position of a caret could map to multiple Visual Positions.
The `Editor` interface provides methods to work with a caret Logical and Visual Position, such as the method `Editor.logicalToVisualPosition()`.

### Caret Visual Position

A caret's _Visual Position_ differs from Logical Position in that it takes into account editor presentation settings such as Code Folding and Soft Line Wrap.
In doing so, [`VisualPosition`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/VisualPosition.java) counts - zero-based - the lines of a `Document` that can be _displayed_ in an Editor.
Consequently, Visual Positions can't be uniquely mapped to Logical Positions or corresponding lines in the underlying `Document`.

For example, Soft Line Wrap affects the Visual Position of succeeding lines.
In the image below, Soft Line Wrap is applied to Logical line three.
With the caret placed at the same character location as in previous tests, it is evident the Logical Position has not changed.
However, the Visual Position line number has increased by one!
The comments on each line illustrate how the Soft Wrap portion of Logical line three is evaluated as Visual Position line four, as though it was a separate line.

![Caret Visual Position with Soft-Wrap](vis_pos_soft_wrap.png){width="800"}

The Logical and Visual Position objects for a caret are obtained from the [`Caret`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/Caret.java) object, as shown in the code snippet below.

```java
public class EditorAreaIllustration extends AnAction {
  @Override
  public void actionPerformed(@NotNull AnActionEvent event) {
    // Get access to the editor and caret model.
    Editor editor = event.getRequiredData(CommonDataKeys.EDITOR);
    CaretModel caretModel = editor.getCaretModel();
    Caret primaryCaret = caretModel.getPrimaryCaret();
    LogicalPosition logicalPos = primaryCaret.getLogicalPosition();
    VisualPosition visualPos = primaryCaret.getVisualPosition();
  }
}
```

### Caret Column Position

The _Column Position_ is a count of characters from the beginning of a Logical (Position) line to the current caret position in that line.
Characters are counted using a zero-based numbering system, so the first character of a line is numbered zero.
Note that Column Position is different from the editor UI, which uses a one-based numbering scheme.

Column Position includes:
* Whitespace, such as tabs.
  Tabs can occupy multiple columns, up to the tab size set for the editor.
* The character selected by the caret.

#### Caret Lean

The Column Position of a caret is the boundary between two characters.
A caret can be associated with either a preceding or succeeding character.
The association is important in bidirectional text, where mapping from Logical Column Position to Visual Column Position is not continuous.

As defined in the [`LogicalPosition`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/LogicalPosition.java) class, if a caret position is associated with a succeeding character it _Leans Forward_.
Otherwise, it is associated with the preceding character.

As defined in the [`VisualPosition`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/VisualPosition.java) class, if a caret position is associated with a succeeding character it _Leans Right_.
Otherwise, it is associated with the preceding character.

#### Examples of Caret Lean

In the example below, placing a (blue) block caret on the first visible character in Logical line three produces a column position of 0 for both Visual and Logical Positions.
Note that the text is unidirectional in this example.
In the Logical Position the caret leans forward, meaning it is associated with the succeeding character in the Logical line.
For the Visual Position the caret leans right, indicating its association with the succeeding character in the Visual line.

![Caret Column Position - Block Caret](caret_col_pos_block.png){width="800"}

Consider the Java snippet below, and use the `editor_basics` **Caret Position** action to report caret information at each step.
Be sure to use the keyboard shortcut to invoke the action so that the caret position is not disturbed.

The line containing the `String` variable declaration contains bidirectional text.
Starting on the left end of the line, and using the arrow key to advance a line-shaped cursor to between the `("` characters reveals discontinuities in caret coordinate column positions.
* After the caret first moves from between `g(` to between `("`, the Logical and Visual Positions have equal column positions of 26, and neither leans.
  Note the value of the caret positions you measure may have different starting values because of line indentation, but the sign and magnitude of the changes in position will be the same.
* Advancing the caret once more does not appear to visually move the cursor.
  However, the Logical Position column increases to 59, and although the Visual Position column does not change, it leans right.
* Continuing to advance the cursor (to the right) through the string causes the Logical Position column to _decrease_, and the Visual Position column to _increase_.
* Once the cursor advances to between the `".` characters, the Logical Position column position is again 26, and leans forward.
  The Visual Position column position is now 59.
* Moving the caret right once more does not appear to visually advance the cursor.
  However, the Logical Position and Visual Position column values are both 59, and both lean.
* As the cursor advances to the right, both Logical and Visual column values increase.

```java
  public void showNow() {
//234567890123456789012345678901234567890123456789012345678901234567890
  String str = new String("تعطي يونيكود رقما فريدا لكل حرف".getBytes(), java.nio.charset.StandardCharsets.UTF_8);
  System.out.println(str);
}
```

The apparent discontinuity in Logical Position is because the RTL portion of the string is treated (or counted) in the logical character order in which it would be written.
The apparent continuity in Visual Position is because the RTL portion of the string is counted in the visual order in which it is displayed in the code.

### Caret Offset

The _Offset_ of a caret is a character count from the beginning of a `Document` to the caret position.
Caret offsets are always calculated in terms of Logical Position.
The caret Offset includes:
* The first (0th) character in a document.
* Whitespace characters, including newline and tabs.
* Any characters after end-of-line if the IDE settings permit them.
  (<ui-path>Settings | Editor | General | Virtual Space</ui-path>)
* The character selected by the caret.

The example below demonstrates the Offset of a caret placed at the first character of Logical line one.
Note the Offset is 22, which is one greater than the number of visible characters on line zero, and the first character on line one.
This apparent discrepancy is actually correct because the Offset includes the newline character for line zero.

![Line 2 Caret Offset](caret_offset_l2.png){width="800"}

## Displaying Caret Positions

To display the values of caret Logical and Visual positions, and Offset, a
`Messages.showInfoMessage()` method shows them in the form of notification as the action is performed.

```java
public class EditorAreaIllustration extends AnAction {

  public void actionPerformed(@NotNull AnActionEvent event) {
    // Get access to the editor and caret model.
    Editor editor = event.getRequiredData(CommonDataKeys.EDITOR);
    CaretModel caretModel = editor.getCaretModel();

    // Getting the primary caret ensures we get the correct one of a possible many.
    Caret primaryCaret = caretModel.getPrimaryCaret();
    // Get the caret information
    LogicalPosition logicalPos = primaryCaret.getLogicalPosition();
    VisualPosition visualPos = primaryCaret.getVisualPosition();
    int caretOffset = primaryCaret.getOffset();

    // Build and display the caret report.
    String report = logicalPos.toString() + "\n" +
        visualPos.toString() + "\n" +
        "Offset: " + caretOffset;
    Messages.showInfoMessage(report, "Caret Parameters Inside The Editor");
  }

}
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Coroutine Dispatchers
<primary-label ref="2024.1"/>

<link-summary>Explanation of coroutine dispatcher in the IntelliJ Platform.</link-summary>

<include from="coroutines_snippets.md" element-id="learnCoroutines"/>

Coroutines are always executed in a [context](https://kotlinlang.org/docs/coroutine-context-and-dispatchers.html) represented by [`CoroutineContext`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/).
One of the most important parts of the context is a dispatcher, which determines what thread or thread pool the corresponding coroutine is executed on.

In the IntelliJ Platform, coroutines are executed on three main dispatchers:
- [](#default-dispatcher)
- [](#io-dispatcher)
- [](#edt-dispatcher)

## Default Dispatcher

The [`Dispatchers.Default`](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-dispatchers/-default.html) dispatcher is used for performing CPU-bound tasks.

It ensures that the number of tasks running in parallel does not exceed the number of CPU cores.
A hundred threads performing CPU-bound work on a machine with 10 CPU cores can result in threads competing for CPU time and excessive thread switching.
This makes the IDE effectively slower, hence the limitation.
Using the default dispatcher (or its [`limitedParallelism()`](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-coroutine-dispatcher/limited-parallelism.html) slice) enables a consistent CPU load.

## IO Dispatcher

The [`Dispatchers.IO`](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-dispatchers/-i-o.html) dispatcher is used for performing IO operations like reading/writing to files, network, executing external processes, etc.

It must be used at the very deep moment in the trace right before the actual IO operation happens and exited as soon as the operation is finished.
Example:

<compare first-title="Wrong" second-title="Correct" type="top-bottom">

```kotlin
suspend fun readDataFromFile(): Data {
  return withContext(Dispatchers.IO) {
    val fileName = computeFileName()
    val bytes = readFile(fileName)
    Data(parseBytes(bytes))
  }
}
```

```kotlin
suspend fun readDataFromFile(): Data {
  val fileName = computeFileName()
  val bytes = withContext(Dispatchers.IO) {
    readFile(fileName)
  }
  return Data(parseBytes(bytes))
}
```

</compare>

## EDT Dispatcher

The [`Dispatchers.EDT`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/coroutines.kt) dispatcher is used for executing UI actions on the Swing Event Dispatch Thread.
`Dispatchers.EDT` dispatches onto EDT within the context [modality state](threading_model.md#invoking-operations-on-edt-and-modality).

### `Dispatchers.Main` vs. `Dispatchers.EDT`

In Kotlin, a standard dispatcher for UI-based activities is [`Dispatchers.Main`](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-dispatchers/-main.html).
In the IntelliJ Platform, the EDT dispatcher is also installed as `Dispatchers.Main` so both can be used, however always prefer `Dispatchers.EDT`.
Use `Dispatchers.Main` only if the coroutine is IntelliJ Platform-context agnostic (e.g., when it can be executed outside the IntelliJ Platform context).
Use `Dispatchers.EDT` when in doubt.

## Dispatchers vs. Threads

The dispatcher concept is a higher level of abstraction over threads.
While the code is always executed on threads, do not think about dispatchers as specific thread instances.

A single coroutine is not bound to the same thread during the whole execution time.
It may happen that a coroutine starts on thread A, is suspended, and finished on thread B, even if the whole is executed with the same dispatcher context.

Consider the following code snippet:
```kotlin
suspend fun doSomething() {
  val fetchedData = suspendingTask()
  withContext(Dispatchers.EDT) {
    updateUI(fetchedData)
  }
}

suspend fun suspendingTask(): Data {
  // fetch data from the internet
}
```

The following diagram presents one of the potential execution scenarios:

```mermaid
gantt
    dateFormat X
    %% do not remove trailing space in axisFormat
    axisFormat ‎
    section Thread 1
        suspendingTask() : 2, 3
    section Thread 2
        suspendingTask() : 0, 1
    section EDT
        updateUI() : 3, 4
```

The code is executed as follows:
1. `suspendingTask` is started and partially executed on **Thread 2**.
2. `suspendingTask` is suspended when it waits for data fetched from the internet.
3. After receiving data, `suspendingTask` is resumed, but now it is executed on **Thread 1**.
4. Execution explicitly switches to the EDT dispatcher and `updateUI` is executed on EDT.


> This behavior can result in unexpected consequences for code that relies on thread-specific data and assumes it will execute consistently on the same thread.
>
{style="warning"}

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Coroutine Dumps
<primary-label ref="2024.1"/>

<link-summary>Explanation of coroutine dumps format.</link-summary>

<include from="coroutines_snippets.md" element-id="learnCoroutines"/>

The <ui-path>Help | Diagnostic Tools | Dump Threads</ui-path> action creates a thread dump, which is useful when investigating freezes or deadlocks.
Thread dumps include all application threads and coroutines existing at the moment of dump creation.

## Coroutine Dump Format

A coroutine dump format is:

```
- parent coroutine header
	at stackframe
	at stackframe
	...
	- child coroutine 0 header
		at stackframe
		at stackframe
		...
		- grandchild coroutine header
			at stackframe
			at stackframe
			...
	- child coroutine 1 header
	- child coroutine 2 header
		at stackframe
		at stackframe
		...
```

Each coroutine entry starts with a `-` character.
Indentation represents parent-child relationships.
A coroutine entry may not include a stacktrace (see `child coroutine 1 header`) because it has no executable body, or it did not start executing yet.

An example coroutine header:
```
-[x5 of] "my task":StandaloneCoroutine{Active}, state: SUSPENDED [ComponentManager(ApplicationImpl@xxxxxxxx), Dispatchers.EDT]
```

Its format is as follows:
```
-[xN of] "name":CoroutineClass{JobState}, state: STATE [context]
```

### `[xN of]`

A particular subtree is repeated N times (included only if N > 1).

### `name`

A coroutine name.

Notable names:
- `ApplicationImpl@xxxxxxxx container` - application coroutine.
- `ProjectImpl@xxxxxxxx container` - project coroutine.
- `com.intellij.*.AClass` - a coroutine bound to some specific class instance, e.g., an extension or a service.
  Unnamed coroutines are hard to identify, so it is recommended to add `CoroutineName(someName)` into a coroutine context.
- `(a x b)` - an intersection of coroutines `a` and `b`, e.g., `(ApplicationImpl@56422718 x com.example.myplugin)` is an intersection of the application and a plugin scope.
  See also [](coroutine_scopes.md#intersection-scopes).

### `CoroutineClass{JobState}`

A coroutine's `toString()`:
- `CoroutineClass` - a coroutine class. Notable values:
    - `StandaloneCoroutine` and `LazyStandaloneCoroutine` are created by [`launch`](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/launch.html).
    - `DeferredCoroutine` and `LazyDeferredCoroutine` are created by [`async`](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/async.html).
    - `BlockingCoroutine` is created by [`runBlockingCancellable()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/coroutines.kt).
    - `ProducerCoroutine` is created by [`produce`](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.channels/produce.html).
    - `ChildScope` is created by [`childScope`](%gh-ic%/platform/util/coroutines/src/coroutineScope.kt).
- `JobState` - a coroutine `Job`'s state.
  Possible states and transition can be found in the [`Job`'s KDoc](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-job/).

### `state: STATE`

A coroutine's state.

Possible states:
- `CREATED` - a coroutine was created but not yet started.
- `SUSPENDED` - a coroutine was executed up until the last frame in the stacktrace.
  This is where it was last seen running.
- `RUNNING` - a coroutine is currently executed by a thread.
  Its stacktrace reflects what the coroutine is doing right now (probably blocked waiting for something, otherwise a `RUNNING` coroutine is rarely seen unless it’s doing CPU-intensive work).

### `[context]`

A coroutine context.
Context elements are separated with `,`.

Notable context elements:
- `no parent and no name` comes from the startup tracer.
  It should not be present in application/project coroutines and their children.
- `ComponentManager(ApplicationImpl@xxxxxxxx)` - application or project, which serves as the coroutine parent.
- `BlockingEventLoop`, `Dispatchers.Default`, `Dispatchers.IO`, `LimitedDispatcher`, `Dispatchers.EDT` - a [coroutine dispatcher](coroutine_dispatchers.md).
  Absence means [Dispatchers.Default](coroutine_dispatchers.md#default-dispatcher).
- `ModalityState.xxx` - modality state.
  Absence means [`ModalityState.nonModal()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/ModalityState.java).

  When EDT is in a modal state, all non-modal coroutines are suspended until the modal state ends, and EDT goes back to non-modal state as well.

  Some `RUNNING` coroutines might block in an `invokeAndWait` call, which means that `invokeAndWait` used non-modal default modality state for one of two reasons:
    - the coroutine contains the correct modality state in its context, but `invokeAndWait` is not aware of it
    - a modal coroutine awaits another unrelated coroutine, which in turn requires non-modal EDT to complete.

  Same problems can be found in regular thread dumps and blocking code, but coroutines suspend instead of blocking a thread, so it’s only possible to observe the last seen frame, which is usually enough.

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Coroutines on EDT and Locks

Sometimes, errors similar to the below can be observed in the IDE:

```
Access is allowed with explicit read lock.
Now each coroutine scheduled on EDT wrapped in implicit write intent
lock (which implies read lock too). This implicit lock will be removed
in future releases.
Please, use explicit lock API like ReadAction.run(),
WriteIntentReadAction.run(), readAction() or writeIntentReadAction()
to wrap code which needs lock to access model or PSI.
Please note, that read action API can re-schedule your code
to background threads, if you are sure that your code need
to be executed on EDT, you need to use write intent read action.
```

Currently, this is not an actual error.
Nothing is broken and no data races occurred.
This assertion message is a way to prepare plugins for the [future changes](#planned-changes) in the IntelliJ Platform.

Note that this error is shown only when the IDE [internal mode](enabling_internal.md) is enabled.

## Error Context

There are two contexts in which these errors can occur:
- **Coroutines dispatched on EDT**

  Consider code that is run on [`Dispatchers.EDT`](coroutine_dispatchers.md#edt-dispatcher) with the following construct (or any of the wrappers for this code):

  ```kotlin
  withContext(Dispatchers.EDT) {
    // ...
  }
  ```

  Currently, the execution system wraps the executed code into a [write intent lock](threading_model.md#read-write-lock).
  Such a write intent lock is called _implicit_.

- **Specific GUI events**

  Lock covers all base events (like mouse events, keyboard events, focus change events, etc.), and such lock isn't counted as _implicit_ for now.

  But some events can be missed and need personal attention.
  Especially if such events trigger listeners and the IntelliJ Platform internal message bus.

When code in above contexts checks for the state of lock with [`ThreadingAssertions.assertReadAccess()`/`assertWriteIntentReadAccess()`](%gh-ic%/platform/core-api/src/com/intellij/util/concurrency/ThreadingAssertions.java) (or their deprecated [`Application`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/Application.java) counterparts), an error is reported, but the assertion passes.

Only one error for each executed block is reported (see 2. in [](#planned-changes) about a problem with suspending).

## Planned Changes

In future releases of the IntelliJ Platform, this implicit lock acquisition will be removed, and warnings will become actual errors (assertions will
fail).

The current implicit lock acquisition behavior is not optimal due to the following reasons:

1. Not every code block executed on EDT needs any lock at all.
   More acquired locks limit concurrency and degrade performance.
2. Executed code block could have wrong assumptions, as it can *suspend*, and at this moment lock will be released and obtained later, on resume.
   Code looks like it is executed in a single locking session, but in reality it is not.

## Required Action

It is preferable to:
- minimize locks usage
- acquire locks explicitly to make the locked code blocks clear

Code triggering the error should be reviewed and adjusted in a proper way: code which really needs locking should be determined, and proper explicit locking should be used.

### Identifying Code Requiring Locking

Each report includes a stacktrace which leads to assertion causing the error.

Wrapping into lock code calling the assertion is seldom the right decision (except some property getters).
Often it is necessary to determine which code higher in the stack constitutes a region which should be protected at once.
Often (but not always) whole code scheduled to execute on the EDT dispatcher must be protected.
Sometimes something in the middle between these extremes.

It is impossible to give one instruction that covers all cases: a proper solution is always context-dependent.
The sections below provide some advice on how to find a place requiring locking.

#### Coroutine Changing Dispatcher Explicitly

A simple case is when in the middle of a coroutine there is `withContext(Dispatchers.EDT)` or similar explicit rescheduling on EDT.

In such a case, focus on frames between the assertion call (top frame) and the closets call to `invokeSuspend` of any class.
Typically, the location of `invokeSuspend` (invisible in code) is properly indicated in stacktrace, too.

For example:

```
at com.intellij.util.concurrency.ThreadingAssertions.reportImplicitWriteIntent(ThreadingAssertions.java:187)
at com.intellij.util.concurrency.ThreadingAssertions.assertWriteIntentReadAccess(ThreadingAssertions.java:178)
at com.intellij.openapi.application.impl.ApplicationImpl.assertWriteIntentLockAcquired(ApplicationImpl.java:946)
at com.intellij.openapi.command.impl.CoreCommandProcessor.executeCommand(CoreCommandProcessor.java:200)
at com.intellij.openapi.command.impl.CoreCommandProcessor.executeCommand(CoreCommandProcessor.java:188)
at com.intellij.openapi.command.WriteCommandAction$BuilderImpl.doRunWriteCommandAction(WriteCommandAction.java:154)
at com.intellij.openapi.command.WriteCommandAction$BuilderImpl.run(WriteCommandAction.java:121)
at com.intellij.openapi.command.WriteCommandAction$BuilderImpl.compute(WriteCommandAction.java:164)
at com.intellij.httpClient.http.request.run.HttpScratchRequestPostProcessor.updateRequest(HttpScratchRequestPostProcessor.java:54)
at com.intellij.httpClient.http.request.run.HttpRequestFilePostProcessor.onResponseExecuted(HttpRequestFilePostProcessor.java:31)
at com.intellij.httpClient.http.request.run.HttpRequestCompositePostProcessor.onResponseExecuted(HttpRequestCompositePostProcessor.java:18)
at com.intellij.httpClient.http.request.run.controller.HttpClientExecutionControllerHelper$processResponse$2$2.invokeSuspend(HttpClientExecutionControllerHelper.kt:158)
at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)
at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:104)
at com.intellij.openapi.application.impl.DispatchedRunnable.run(DispatchedRunnable.kt:44)
at com.intellij.openapi.application.TransactionGuardImpl.runWithWritingAllowed(TransactionGuardImpl.java:240)
at com.intellij.openapi.application.TransactionGuardImpl.access$100(TransactionGuardImpl.java:25)
```

In the stacktrace above, a good start for investigation is `HttpClientExecutionControllerHelper.kt:158`.
Sometimes such frames don't contain proper line information, but the next frame may help to identify the actual location.

In such cases, it is often possible to wrap into lock the whole code scheduled on EDT.

#### Callbacks (Coroutine and Blocking)

A more complex case is when code is called as callback via coroutines or even as blocking code via some events.

Such cases can be recognized by some generic classes near the top of the stack.
Main suspects are:
- `EventDispatcher`
- `MessageBus`

Note that this list is not exhaustive.

Another pattern for this case is the pair of the following calls on the stack, which means default event processing:
```
EventQueue.dispatchEvent()
IdeEventQueue.defaultDispatchEvent()
```

Note that this pattern is usable only if there is no `invokeSuspend` higher on the stack.

In this case, it is better to find the place where the callback is registered.
It may be not so trivial, but searching by usages of some code in stacktrace typically works.

## Locking API Recommendations

There are several locking APIs to use for fixing these errors.
The following sections list them in the order of preference, from the most recommended to the least.

### No API

Sometimes the code in question doesn't need locking and assertion at all.

In some cases, assertion for write intent lock is used instead of assertion for execution on EDT.
If it is clear that code doesn't touch PSI or project model or other internal data and if code is under your control, remove the assertion or change it to the proper one.

### Suspending `readAction()`

The [`readAction()` API](coroutine_read_actions.topic#coroutine-read-actions-api) is the best and least intrusive.
It can suspend by itself but doesn't allow the executed code block to suspend (see 2. in [](#planned-changes) why it is the desired behavior).

One property of `readAction()` makes it not as universal as expected: it uses [`Dispatchers.Default`](coroutine_dispatchers.md#default-dispatcher) for code execution.
Sometimes it is not desired, as the coroutine in question was scheduled on [`Dispatchers.EDT`](coroutine_dispatchers.md#edt-dispatcher) for a reason.

Anyway, it is suspicious when a read action cannot be executed on a background thread and a part of coroutine code cannot be suspended and rescheduled on EDT.
This may signal a code issue.

Note that this API cannot be used in the [blocking context](coroutine_execution_contexts.md#blocking-context).

### Suspending `readAndWriteAction()`

A good choice for a coroutine which needs to make some preparation work under a read lock and then complete work under the write lock.

It cannot be used as a drop-in fix - migration to this API requires code reorganization.
Consider rewriting code to use it, if possible.

### Blocking `ReadAction.run()`/`compute()`

[`ReadAction.run()` and `ReadAction.compute()`](threading_model.md#read-actions) are as smart as [`readAction()`](#suspending-readaction), but they are always executed on the calling thread.

Use them if a read action is required, but it is unacceptable to reschedule code execution on a different dispatcher.

These APIs are marked to use only in the [blocking context](coroutine_execution_contexts.md#blocking-context), so their usage in the [suspending context](coroutine_execution_contexts.md#suspending-context) will trigger a warning.
It is intentional, as coroutines should be prepared to be rescheduled and should use `readAction()`.

### Suspending `writeIntentReadAction()` and Blocking `WriteIntentReadAction.run()`/`compute()`

These APIs are the last resort.
They are intended to be used by the IntelliJ Platform itself.
Avoid using them in plugin code.

Use it only as a temporal solution if it is hard to quickly rewrite code which checks for write intent lock.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Execution Contexts
<primary-label ref="2024.1"/>

<link-summary>Tracking execution progress, checking for cancellations, and switching between different execution contexts.</link-summary>

<include from="coroutines_snippets.md" element-id="learnCoroutines"/>

The IntelliJ Platform provides APIs that allow tracking the progress of background processes and canceling their execution when they are canceled by a user, or they become obsolete due to some changes in the data model.

Background processes can be executed in three contexts:
- [](#suspending-context)
- [](#blocking-context)
- [](#progress-indicator) (obsolete)

Currently, the Progress Indicator context is the most widely used approach in the IntelliJ Platform.
As the platform's execution model moves towards coroutines, this approach can be considered obsolete.
Starting with 2024.1, it is recommended to execute new code in the [suspending context](#suspending-context).

Once the client code switches to a suspending or a blocking context, it should not switch back to a progress indicator context.

The following sections explain the contexts and provide information about process cancellation, progress tracking, and switching between different contexts.

## Suspending Context

Code [executed in Kotlin coroutines](launching_coroutines.md) is executed in a suspending context.
Since 2024.1, this context is recommended for executing background tasks to maximize CPU utilization.

> Note that executing code in a suspending context is possible only with [Kotlin](using_kotlin.md).
>
{style="warning"}

In a suspending context, methods such as `ProgressManager.checkCanceled()` or `ModalityState.defaultModalityState()` won't have any effect.
Therefore, if their behavior is required, [switch to a blocking context](#suspending-context-switching-to-other-contexts).

> Inspection <control>Plugin DevKit | Code | Forbidden in suspend context method usage</control> reports calling blocking code from suspending context.

### Cancellation Check
{#suspending-context-cancellation-check}

- [`ensureActive()`](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/ensure-active.html) from Kotlin coroutine's API

> Note that [`ProgressManager.checkCanceled()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/ProgressManager.java) does not work in a coroutine context.
>
{style="warning"}

### Progress Reporting
{#suspending-context-progress-reporting}

- [`ProgressStep`](%gh-ic%/platform/util/progress/src/impl/ProgressStep.kt) - a step-based progress reporting (see its KDoc for details)
- [`RawProgressReporter`](%gh-ic%/platform/util/progress/src/RawProgressReporter.kt) - a raw text, details, and fraction reporting (invoked via [`reportRawProgress()`](%gh-ic%/platform/util/progress/src/steps.kt))

Any [`report*Progress()`](%gh-ic%/platform/util/progress/src/steps.kt) function should be used inside [`with*Progress()` or `runWithModalProgressBlocking()`](%gh-ic%/platform/progress/shared/src/tasks.kt).
Otherwise, if there is no reporter in the context, using `report*Progress()` will have no effect.

### Switching to Other Contexts
{#suspending-context-switching-to-other-contexts}

- to blocking context: [`blockingContext()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/coroutines.kt) - enables `ProgressManager.checkCanceled()`, forwards modality state, etc. This function has an opposite behavior to [`runBlockingCancellable()`](#blocking-context-switching-to-other-contexts).
- to progress indicator: unavailable ([`coroutineToIndicator()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/coroutines.kt) is an internal API and exists only to aid platform migration)

## Blocking Context

Executing tasks in a blocking context means executing them on a thread without access to the [coroutine context](#suspending-context) (basically, in non-suspending functions) and not under [a progress indicator](#progress-indicator).
Such tasks can't be canceled by using coroutines' or progress indicator's cancellation capabilities, which may block threads and consume resources even if the task is no longer relevant.

Usually, plugins should not execute new code in the blocking context.
Always prefer executing tasks in the [suspending context](#suspending-context) or under the [progress indicator](#progress-indicator) if a plugin cannot use Kotlin.

> Functions which schedule execution via [`Application.executeOnPooledThread()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/Application.java)
> and similar methods, and which rely on [`ProgressManager.checkCanceled()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/ProgressManager.java)
> should be annotated with [`@RequiresBlockingContext`](%gh-ic%/platform/core-api/src/com/intellij/util/concurrency/annotations/RequiresBlockingContext.kt)
> to inform clients about the required switch to a blocking context.
>
> Inspection <control>Plugin DevKit | Code | Calling method should be annotated with @RequiresBlockingContext</control> reports missing annotations.

### Cancellation Check
{#blocking-context-cancellation-check}

- [`ProgressManager.checkCanceled()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/ProgressManager.java)

### Progress Reporting
{#blocking-context-progress-reporting}

Progress reporting is not available in the blocking context.

### Switching to Other Contexts
{#blocking-context-switching-to-other-contexts}

- to coroutine: [`runBlockingCancellable()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/coroutines.kt). This function has an opposite behavior to [`blockingContext()`](#suspending-context-switching-to-other-contexts).
- to progress indicator: unavailable ([`blockingContextToIndicator()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/coroutines.kt) is an internal API and exists only to aid platform migration)

## Progress Indicator

Code executed via the Progress API
([`ProgressManager`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/ProgressManager.java),
[`ProgressIndicator`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/ProgressIndicator.java), etc.)
is executed in a progress indicator context.
See the [](background_processes.md#progress-api) section for details.

> Executing code under the progress indicator is obsolete since 2024.1.
> It is advised to use Kotlin coroutines in new code.
>
> Please note that obsolete status does not mean deprecation.
> Executing code using the Progress API is still allowed, but coroutines are recommended as a more performant solution.
>
{style="tip" title="Obsolete approach since 2024.1"}

### Cancellation Check
{#progress-indicator-cancellation-check}

- `ProgressManager.checkCanceled()` - as described in the [](background_processes.md#cancellation) section

### Progress Reporting
{#progress-indicator-progress-reporting}

- current thread's [`ProgressIndicator`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/ProgressIndicator.java) methods
- [`ProgressManager`'s](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/ProgressManager.java) `progress` and `progress2` static methods

### Switching to Other Contexts
{#progress-indicator-switching-to-other-contexts}

- to coroutine: [`runBlockingCancellable`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/coroutines.kt)
- to blocking: unavailable

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Coroutine Scopes
<primary-label ref="2024.1"/>

<link-summary>Explanation of coroutine scopes in the IntelliJ Platform.</link-summary>

<include from="coroutines_snippets.md" element-id="learnCoroutines"/>

Kotlin's coroutines follow the principle of structured concurrency.
It means that each coroutine is run in a specific [CoroutineScope](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-coroutine-scope/), which delimits the lifetime of the coroutine.
This ensures that they are not lost and do not leak.
An outer scope does not complete until all its child coroutines are completed.
Cancellation of the outer scope also cancels its child coroutines.
Structured concurrency ensures that any errors in the code are properly reported and never lost.

## IntelliJ Platform Scopes

IntelliJ Platform provides special coroutine scopes that help ensure proper structured concurrency of coroutines run from the platform or plugin code.
After cancellation, the platform awaits the completion of each scope.
Using correct parent scopes guarantees that child coroutines will be properly canceled when no longer needed, preventing resource leaks.

The following diagram presents the scopes and their parent-child relationships:

![IntelliJ Platform Coroutine Scopes](intellij_platform_coroutine_scopes.svg)

All scopes presented on the diagram are [supervisor scopes](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/supervisor-scope.html) — they ignore the failures of their children.

Each coroutine scope can have only one actual parent, pointed with solid arrow lines.
Dashed arrow lines point to fictional parents, which follow the actual coroutine parent-child semantics:
- a parent scope cancels children on its own cancellation
- a parent scope awaits children before considering itself complete
- a failed child cancels its parent (which effectively is not happening because presented scopes are supervisors)

The **Application×Plugin** and **Project×Plugin** are [intersection scopes](#intersection-scopes) with two semantic parents (actual and fictional).

### Main Scopes

- **Root** - the root scope spans all the coroutines.
  This is the standard root scope launched with [`runBlocking`](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/run-blocking.html) coroutine builder.

- **Application** - a scope associated with the [`Application`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/Application.java) container (component manager) lifetime.
  It is canceled on application shutdown.
  This triggers cancellation of the **Application×Plugin** scope and, subsequently, its children, including the **Project×Plugin** scope.

- **Project** - a scope associated with a [`Project`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/Project.java) container (component manager) lifetime.
  It is canceled when a project is being closed.
  This triggers the cancellation of the **Project×Plugin** scope and, subsequently, its children.

- **Plugin** - a scope associated with a plugin lifetime.
  It is canceled on unloading of the corresponding plugin.
  This triggers cancellation of the **Application×Plugin** scope and, subsequently, its children, including the **Project×Plugin** scope.

### Intersection Scopes

- **Application×Plugin** - a scope which is an intersection of the **Application** and **Plugin** scopes.
  It is canceled when the application is shutdown or the corresponding plugin is unloaded.
  This triggers the cancellation of its children and the **Project×Plugin** scope and, subsequently, its children.
- **Project×Plugin** - a scope which is an intersection of the **Project** and **Plugin** scopes.
  It is canceled when a project is being closed or the corresponding plugin is unloaded.

Intersection scopes enable creating coroutines whose lifetime is limited by application/project and plugin lifetimes, e.g.,
application/project [services](plugin_services.md) provided by a plugin.

### Service Scopes

<snippet id="serviceScopes">

The **Application Service** and **Project Service** scopes are bound to an application and project [service](plugin_services.md#types) lifetimes accordingly.
They are children of the [](coroutine_scopes.md#intersection-scopes), which means that they are canceled when the application/project is closed or a plugin is unloaded.

The service scope is provided to services via constructor injection.
The following constructor signatures are supported:

- `MyService(CoroutineScope)` for application and project services
- `MyProjectService(Project, CoroutineScope)` for project services

Each service instance receives its own scope instance.
The injected scopes' contexts contain [`Dispatchers.Default`](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-dispatchers/-default.html) and [`CoroutineName(serviceClass)`](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-coroutine-name/).

See [](launching_coroutines.md#launching-coroutine-from-service-scope) for full samples.

</snippet>

## Using a Correct Scope

### Use Service Scopes

If a plugin requires running some code in a coroutine, the recommended approach is to create a separate [service](plugin_services.md) that will receive its [own scope](#service-scopes) via constructor and launch the coroutine in this scope.
This approach guarantees the usage of the correct scope, preventing leaks and canceling wrong scopes and killing all their (e.g., application's or project's) coroutines accidentally.

See the [](launching_coroutines.md) section for details.

> The following sections describe the potential problems that would occur if the wrong coroutine scopes were used.
> This allows better understanding of the platform scopes and why the [service approach](#use-service-scopes) mentioned above must be used.
>
{style="warning"}

### Do Not Use Application/Project Scope

Application and Project scopes are exposed with `Application.getCoroutineScope()` and `Project.getCoroutineScope()`.
Never use these methods, as they are deprecated and will be removed in the future.

Using these scopes could easily lead to project or plugin class leaks.

1. Project leak:
    ```kotlin
    application.coroutineScope.launch {
      project.getService(PsiDirectoryFactory::class.java)
    }
    ```
    Closing the project cancels its scope.
    The application scope remains active, and the project is leaked.

    ```mermaid
    gantt
        dateFormat X
        %% do not remove trailing space in axisFormat
        axisFormat ‎
        section Lifetimes
            Application Scope : 0, 10
            Project Scope     : done, 2, 8
            Project leak      : crit, 4, 10
    ```

2. Plugin leak:
    ```kotlin
    project.coroutineScope.launch {
      project.getService(MyPluginService::class.java)
    }
    ```
    Unloading of the plugin cancels its scope.
    The project scope remains active, and the plugin classes are leaked.

    ```mermaid
    gantt
        dateFormat X
        %% do not remove trailing space in axisFormat
        axisFormat ‎
        section Lifetimes
            Project Scope        : 0, 10
            Plugin Scope         : done, 2, 8
            MyPluginService leak : crit, 4, 10
    ```

### Do Not Use Intersection Scopes

There is no API for retrieving **Application×Plugin** and **Project×Plugin** [intersection scopes](#intersection-scopes),
but let's assume there is a method exposing the **Project×Plugin** scope:

```kotlin
/**
 * Returns the correct intersection scope for the project and plugin
 * by a given plugin class.
 */
fun Project.getCoroutineScope(pluginClass: Class<*>): CoroutineScope
```

Using this scope could lead to a plugin leak:

```kotlin
project.getCoroutineScope(PluginBService::class.java).launch {
  project.getService(PluginAService::class.java)
}
```

Unloading of Plugin A cancels its scope.
The scope of Plugin B remains active, and the Plugin A classes are leaked.

```mermaid
gantt
    dateFormat X
    %% do not remove trailing space in axisFormat
    axisFormat ‎
    section Lifetimes
        Application Scope        : done, 0, 10
        Plugin A Scope           : done, 1, 6
        Plugin B Scope           : 4, 9
        Project Scope            : done, 2, 8
        Project × Plugin A Scope : done, 2, 6
        Project × Plugin B Scope : done, 4, 8
        PluginAService leak      : crit, 5, 9
```

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Coroutine Tips and Tricks
<primary-label ref="2024.1"/>

<link-summary id="link-summary">Tips and tricks to use coroutines efficiently.</link-summary>

<include from="coroutines_snippets.md" element-id="learnCoroutines"/>

This section presents techniques to use coroutines efficiently and avoid common pitfalls.

## Switching Between the Background Threads and EDT

Avoid the `invokeLater`-style often found in Java:

```kotlin
launch(Dispatchers.EDT) {
  val uiData = collectUiData()
  // switch to Default:
  launch(Dispatchers.Default) {
    val result = compute(uiData)
    // switch to EDT again:
    launch(Dispatchers.EDT) {
      applyUiData(result)
    }
  }
}
```

The recommended approach:

```kotlin
launch(Dispatchers.EDT) {
  val uiData = collectUiData()
  // switch to Default:
  val result = withContext(Dispatchers.Default) {
    compute(uiData)
  }
  // this will be resumed on EDT automatically:
  applyUiData(result)
}
```

## Dispatching to the End of a Queue

In some cases, it is required to exit the current EDT event and continue after all events in the queue are processed.
In a non-coroutine context, it could be implemented like in the following snippet:

```kotlin
invokeLater {
  step1()
  invokeLater {
    step2()
    invokeLater {
      step3()
    }
  }
}
```

In a coroutine context, use the following approach:

```kotlin
withContext(Dispatchers.EDT) {
  step1()
  yield() // suspends here, dispatches the following block again on EDT
  step2()
  yield()
  step3()
}
```

This approach works with any sequential dispatcher, e.g., created with `Dispatchers.Default.limitedParallelism(1)`.

The same applies to [`runBlockingCancellable`](launching_coroutines.md#using-runblockingcancellable):

```kotlin
runBlockingCancellable {
  println(1)
  launch {
    print(2)
    yield()
    print(3)
  }
  print(4)
  yield()
  print(5)
  yield()
  print(6)
}
// Output: 142536
```

## Scheduling Tasks With a Fixed Delay

There is no `scheduleWithFixedDelay()` in coroutines, because it can be easily implemented with the following snippet:

```kotlin
val job = coroutineScope.launch {
  delay(initialDelayMs)
  while (true) {
    action() // can be suspending as well
    delay(delayMs)
  }
}
```

When the job is no longer needed, remember to cancel the launched coroutine:
```kotlin
job.cancel()
```
or the whole scope:
```kotlin
coroutineScope.cancel()
```

## Limiting Dispatcher Parallelism

Each call of [`limitedParallelism()`](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-coroutine-dispatcher/limited-parallelism.html) creates a new independent dispatcher instance, effectively not limiting the parallelism:

```kotlin
suspend fun doSomething() {
  withContext(Dispatchers.Default.limitedParallelism(3)) {
    // ...
  }
}
```

Instead, store the dispatcher instance into a static property and use it as a context:

```kotlin
private val myDispatcher = Dispatchers.Default.limitedParallelism(3)

suspend fun doSomething() {
  withContext(myDispatcher) {
    // ...
  }
}
```

> Do not use `limitedParallelism(1)` for code synchronization.
> Use [`Mutex`](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.sync/-mutex/) instead.
>
{style="warning"}

## Changing Modality State

Avoid [changing modality state](threading_model.md#invoking-operations-on-edt-and-modality) in the middle of a running coroutine:

```kotlin
cs.launch {
  // ...
  withContext(Dispatchers.EDT + ModalityState.any().asContextElement()) {
    // ...
  }
}
```

Add the modality state to the context when launching a coroutine:

```kotlin
cs.launch(ModalityState.current().asContextElement()) {
  // ...
  withContext(Dispatchers.EDT) {
    // ...
  }
}
```

It is possible that the coroutine is launched as a response to a user event from EDT, where `ModalityState.current()` is available.

If the coroutine is launched from a background thread, then it should not be invoked on top of an unrelated dialog anyway.
The absence of the context modality state is effectively equivalent to specifying `ModalityState.nonModal()`.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->
# Kotlin Coroutines Snippets

{is-library="true"}

<snippet id="learnCoroutines">

> This section focuses on explaining coroutines in the specific context of the [IntelliJ Platform](intellij_platform.md).
> If you are not experienced with Kotlin Coroutines, it is highly recommended to get familiar with
> [](kotlin_coroutines.md#learning-resources) first.
{title="Kotlin Coroutines×IntelliJ Platform"}

</snippet>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Creating New Functions for Live Templates

<link-summary>Adding new functions for use in Live Templates.</link-summary>

The [Predefined Functions](https://www.jetbrains.com/help/idea/template-variables.html#predefined_functions) are the building blocks for creating [Parameterized Templates and Surround Templates](https://www.jetbrains.com/help/idea/using-live-templates.html#live_templates_types).
However, sometimes the Predefined Functions are not enough.

This tutorial illustrates how to add custom functions to an IntelliJ Platform plugin and make them available for use by Live Templates.
As an example, a function is created to convert a selection to Title Case.
Refer to the SDK code sample [`live_templates`](%gh-sdk-samples-master%/live_templates).

## Implementing a New Function

Under the hood, the predefined functions for Live Templates are called _macros_.
A new custom function for Live Templates is implemented in `TitleCaseMacro`, which extends [`MacroBase`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/macro/MacroBase.java).
Three `TitleCaseMacro` methods are of particular interest:
* The `TitleCaseMacro()` constructor passes the name and description of the macro to the parent constructor.
* The `isAcceptableInContext()` method tests whether the macro is available in the current context.
  The test relies on the [`MarkdownContext`](providing_live_templates.md#implement-templatecontexttype) object previously defined in the `live_templates` plugin.
* The `calculateResult()` method gets invoked when the titleCase function is used in a Live Template.
  The text to be capitalized is retrieved from the Live Template and converted to Title Case.

```java
```
{src="live_templates/src/main/java/org/intellij/sdk/liveTemplates/TitleCaseMacro.java" include-symbol="TitleCaseMacro"}

## Adding a Live Template

Using the procedures previously discussed for [Template Creation](providing_live_templates.md#template-creation) and [Export the Live Template](providing_live_templates.md#export-the-live-template), add a Live Template to the [Markdown.xml](%gh-sdk-samples-master%/live_templates/src/main/resources/liveTemplates) file for the plugin.
The XML representation of an example Live Template using the new `titleCase` function is listed below.

There is only one variable, `TITLE`.
The expression for `TITLE` evaluates to the `titleCase` function provided by the plugin.
The argument to the `titleCase` function is `SELECTION`, which tells the IntelliJ Platform to operate on the current selection.

```xml
<template
    name="mc"
    value="$TITLE$"
    description="SDK: Convert to title case"
    toReformat="true"
    toShortenFQNames="false">
  <variable
      name="TITLE"
      expression="titleCase(SELECTION)"
      defaultValue="the quick brown fox"
      alwaysStopAt="true"/>
  <context>
    <option name="MARKDOWN" value="true"/>
  </context>
</template>
```

## Register Extension Point

Using the `com.intellij.liveTemplateMacro` extension point, register the implementation with the IntelliJ Platform.

```xml
<extensions defaultExtensionNs="com.intellij">
  <liveTemplateMacro
      implementation="org.intellij.sdk.liveTemplates.TitleCaseMacro"/>
</extensions>
```

## Check Plugin

Now verify the plugin is working correctly.
* Run the plugin in a Development Instance.
* Create a new file `testing.md` and enter several words in lower case.
* Highlight the text and enter invoke <ui-path>Code | Surround With...</ui-path> to open the <control>Surround With</control> popup.
  Confirm that the <control>SDK: Convert to title case</control> is available in the popup, and select it.
* The selected text will change to have each word capitalized.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Creating a Plugin Gradle Project

<link-summary>Creating and running a Gradle-based IntelliJ Platform plugin project.</link-summary>

This documentation page describes a Gradle-based plugin project generated with the [New Project Wizard](https://www.jetbrains.com/help/idea/new-project-wizard.html), but the project generated with [](plugin_github_template.md) covers all the described files and directories.

<snippet id="gradle1xOnly">

> This page covers [](tools_gradle_intellij_plugin.md) only.
>
> See the [](tools_intellij_platform_gradle_plugin.md) reference.
> A dedicated page for it will be provided later.
>
{title="Gradle IntelliJ Plugin (1.x) Only"}

</snippet>

## Creating a Plugin with New Project Wizard

<include from="snippets.md" element-id="gradlePluginVersion"/>

<procedure title="Create IDE Plugin" id="create-ide-plugin">

<include from="snippets.md" element-id="pluginDevKitAvailability"/>

Launch the <control>New Project</control> wizard via the <ui-path>File | New | Project...</ui-path> action and provide the following information:
1. Select the <control>IDE Plugin</control> generator type from the list on the left.
2. Specify the project <control>Name</control> and <control>Location</control>.
3. Choose the <control>Plugin</control> option in the project <control>Type</control>.
4. _Only in IntelliJ IDEA older than 2023.1:_

   Choose the <control>Language</control> the plugin will use for implementation.
   For this example select the <control>Kotlin</control> option.
   See also [Kotlin for Plugin Developers](using_kotlin.md) for more information.

   > Projects generated with IntelliJ IDEA 2023.1 or newer support both Kotlin and Java sources out of the box.
   > The Project generator automatically creates <path>\$PLUGIN_DIR\$/src/main/kotlin</path> sources directory.
   > To add Java sources, create the <path>\$PLUGIN_DIR\$/src/main/java</path> directory manually.
   >
   {style="note" title="Using Kotlin and Java sources"}

5. Provide the <control>Group</control> which is typically an inverted company domain (e.g. `com.example.mycompany`).
   It is used for the Gradle property `project.group` value in the project's Gradle build script.
6. Provide the <control>Artifact</control> which is the default name of the build project artifact (without a version).
   It is also used for the Gradle property `rootProject.name` value in the project's <path>settings.gradle.kts</path> file.
   For this example, enter `my_plugin`.
7. Select <control>JDK</control> 17.
   This JDK will be the default JRE used to run Gradle, and the JDK version used to compile the plugin sources.

<include from="snippets.md" element-id="apiChangesJavaVersion"/>

8. After providing all the information, click the <control>Create</control> button to generate the project.

</procedure>

### Components of a Wizard-Generated Gradle IntelliJ Platform Plugin

For the example `my_plugin` created with the steps describes above, the _IDE Plugin_ generator creates the following directory content:

```plantuml
@startuml

skinparam TitleFontName JetBrains Sans
skinparam TitleFontStyle plain
skinparam TitleFontSize 16
skinparam DefaultTextAlignment left

title
  my_plugin
  |_ .run
    |_ Run IDE with Plugin.run.xml
  |_ gradle
    |_ wrapper
      |_ gradle-wrapper.jar
      |_ gradle-wrapper.properties
  |_ src
    |_ main
      |_ kotlin
      |_ resources
        |_ META-INF
          |_ plugin.xml
          |_ pluginIcon.svg
  |_ .gitignore
  |_ build.gradle.kts
  |_ gradle.properties
  |_ gradlew
  |_ gradlew.bat
  |_ settings.gradle.kts
end title
@enduml
```

* The default IntelliJ Platform <path>build.gradle.kts</path> file (see next paragraph).
* The <path>gradle.properties</path> file, containing properties used by Gradle build script.
* The <path>settings.gradle.kts</path> file, containing a definition of the `rootProject.name` and required repositories.
* The Gradle Wrapper files, and in particular the <path>gradle-wrapper.properties</path> file, which specifies the version of Gradle to be used to build the plugin.
  If needed, the IntelliJ IDEA Gradle plugin downloads the version of Gradle specified in this file.
* The <path>META-INF</path> directory under the default `main` [source set](https://docs.gradle.org/current/userguide/java_plugin.html#sec:java_project_layout) contains the plugin [configuration file](plugin_configuration_file.md) and [plugin logo](plugin_icon_file.md).
* The _Run Plugin_ [run configuration](https://www.jetbrains.com/help/idea/run-debug-configuration.html).

The generated `my_plugin` project <path>build.gradle.kts</path> file:

```kotlin
plugins {
  id("java")
  id("org.jetbrains.kotlin.jvm") version "1.9.21"
  id("org.jetbrains.intellij") version "1.17.4"
}

group = "com.example"
version = "1.0-SNAPSHOT"

repositories {
  mavenCentral()
}

// Configure Gradle IntelliJ Plugin
// Read more: https://plugins.jetbrains.com/docs/intellij/tools-gradle-intellij-plugin.html
intellij {
  version.set("2022.2.5")
  type.set("IC") // Target IDE Platform

  plugins.set(listOf(/* Plugin Dependencies */))
}

tasks {
  // Set the JVM compatibility versions
  withType<JavaCompile> {
    sourceCompatibility = "17"
    targetCompatibility = "17"
  }
  withType<org.jetbrains.kotlin.gradle.tasks.KotlinCompile> {
    kotlinOptions.jvmTarget = "17"
  }

  patchPluginXml {
    sinceBuild.set("222")
    untilBuild.set("232.*")
  }

  signPlugin {
    certificateChain.set(System.getenv("CERTIFICATE_CHAIN"))
    privateKey.set(System.getenv("PRIVATE_KEY"))
    password.set(System.getenv("PRIVATE_KEY_PASSWORD"))
  }

  publishPlugin {
    token.set(System.getenv("PUBLISH_TOKEN"))
  }
}
```

* Three Gradle plugins are explicitly declared:
  * The [Gradle Java](https://docs.gradle.org/current/userguide/java_plugin.html) plugin (`java`).
  * The [Kotlin Gradle](https://kotlinlang.org/docs/gradle-configure-project.html#apply-the-plugin) plugin (`org.jetbrains.kotlin.jvm`).
  * The [](tools_gradle_intellij_plugin.md) (`org.jetbrains.intellij`).
* The <control>Group</control> from the [New Project](#create-ide-plugin) wizard is the `project.group` value.
* The `sourceCompatibility` line is injected to enforce using Java 17 JDK to compile Java sources.
* The values of the [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version) and [`intellij.type`](tools_gradle_intellij_plugin.md#intellij-extension-type) properties specify the version and type of the IntelliJ Platform to be used to build the plugin.
* The empty placeholder list for [plugin dependencies](tools_gradle_intellij_plugin.md#intellij-extension-plugins).
* The values of the [`patchPluginXml.sinceBuild`](tools_gradle_intellij_plugin.md#tasks-patchpluginxml-sincebuild) and [`patchPluginXml.untilBuild`](tools_gradle_intellij_plugin.md#tasks-patchpluginxml-untilbuild) properties specifying the minimum and maximum versions of the IDE build the plugin is compatible with.
* The initial [`signPlugin`](tools_gradle_intellij_plugin.md#tasks-signplugin) and [`publishPlugin`](tools_gradle_intellij_plugin.md#tasks-publishplugin) tasks configuration.
  See the [](publishing_plugin.md#publishing-plugin-with-gradle) section for more information.

> Consider using the [IntelliJ Platform Plugin Template](https://github.com/JetBrains/intellij-platform-plugin-template) which additionally provides CI setup covered with GitHub Actions.

#### Plugin Gradle Properties and Plugin Configuration File Elements

The Gradle properties `rootProject.name` and `project.group` will not, in general, match the respective [plugin configuration file](plugin_configuration_file.md) <path>plugin.xml</path> elements [`<name>`](plugin_configuration_file.md#idea-plugin__name) and [`<id>`](plugin_configuration_file.md#idea-plugin__id).
There is no IntelliJ Platform-related reason they should as they serve different functions.

The `<name>` element (used as the plugin's display name) is often the same as `rootProject.name`, but it can be more explanatory.

The `<id>` value must be a unique identifier over all plugins, typically a concatenation of the specified <control>Group</control> and <control>Artifact</control>.
Please note that it is impossible to change the `<id>` of a published plugin without losing automatic updates for existing installations.

## Running a Plugin With the `runIde` Gradle task

Gradle projects are run from the IDE's Gradle Tool window.

### Adding Code to the Project

Before running [`my_plugin`](#components-of-a-wizard-generated-gradle-intellij-platform-plugin), some code can be added to provide simple functionality.
See the [Creating Actions](working_with_custom_actions.md) tutorial for step-by-step instructions for adding a menu action.

### Executing the Plugin

The _IDE Plugin_ generator automatically creates the _Run Plugin_ run configuration that can be executed via the <ui-path>Run | Run...</ui-path> action or can be found in the <control>Gradle</control> tool window under the <control>Run Configurations</control> node.

To execute the Gradle `runIde` task directly, open the <control>Gradle</control> tool window and search for the <control>runIde</control> task under the <control>Tasks</control> node.
If it's not on the list, hit the re-import button in the [toolbar](https://www.jetbrains.com/help/idea/jetgradle-tool-window.html#gradle_toolbar) at the top of the Gradle tool window.
When the <control>runIde</control> task is visible, double-click it to execute.

To debug your plugin in a _standalone_ IDE instance, please see [How to Debug Your Own IntelliJ IDEA Instance](https://medium.com/agorapulse-stories/how-to-debug-your-own-intellij-idea-instance-7d7df185a48d) blog post.

> For more information about how to work with Gradle-based projects see the [Working with Gradle in IntelliJ IDEA](https://www.youtube.com/watch?v=6V6G3RyxEMk) screencast and working with [Gradle tasks](https://www.jetbrains.com/help/idea/work-with-gradle-tasks.html) in the IntelliJ IDEA help.
>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Creating a Theme Project


<link-summary>Creating a theme plugin project with Plugin DevKit wizard and generated project overview.</link-summary>

This documentation page describes a DevKit-based theme project generated with the [New Project Wizard](https://www.jetbrains.com/help/idea/new-project-wizard.html).

## Creating a Theme with New Project Wizard

> Before creating a theme project, make sure that [development environment is set up](setting_up_theme_environment.md).

<procedure title="Create Theme Plugin" id="create-theme">

Launch the <control>New Project</control> wizard via the <ui-path>File | New | Project...</ui-path> action and provide the following information:
1. Select the <control>IDE Plugin</control> generator type from the list on the left.
2. Specify the project <control>Name</control> and <control>Location</control>.
3. Choose the <control>Theme</control> option in the project <control>Type</control>.
4. As the <control>JDK</control> select the [configured SDK](setting_up_theme_environment.md#configuring-intellij-platform-plugin-sdk).
5. Click the <control>Create</control> button to generate the project.

</procedure>

### Components of a Wizard-Generated Gradle IntelliJ Platform Theme

For the example `my_theme` created with the steps describes above, the _IDE Plugin_ generator creates the following directory content:

```plantuml
@startuml

skinparam TitleFontName JetBrains Sans
skinparam TitleFontStyle plain
skinparam TitleFontSize 16
skinparam DefaultTextAlignment left

title
  my_theme
  |_ resources
    |_ META-INF
      |_ plugin.xml // (Plugin Configuration File) //
      |_ pluginIcon.svg // (Plugin Logo) //
      |_ ...
    |_ theme
      |_ my_theme.theme.json // (Theme description file) //
  |_ my_theme.iml // (IntelliJ IDEA Module configuration file) //
end title
@enduml
```

<path>META-INF</path> directory with:
  - <path>[plugin.xml](plugin_configuration_file.md)</path> configuration file containing preconfigured theme provider
  - <path>pluginIcon.svg</path> file that is a [plugin logo](plugin_icon_file.md)

    Replace it with a custom logo representing the Theme.
- <path>my_theme.theme.json</path> - a minimal [theme description file](themes_customize.md#introduction-to-theme-description-file-syntax)
- <path>my_theme.iml</path> - [IntelliJ IDEA Module](https://www.jetbrains.com/help/idea/creating-and-managing-modules.html) configuration file

See [](theme_structure.md) for more details.

## Additional Plugin Themes

Theme plugin project [created with the new project wizard](#create-theme) contains a single theme description file by default.
In case a plugin needs to provide multiple themes (e.g., dark and light variants), it is possible to add them with the dedicated action.

Additional plugin themes can be added using the DevKit Theme Wizard, which is a part of the _Plugin DevKit_ plugin.
The wizard can be used for both DevKit-based and Gradle-based plugins.

<procedure title="Add Theme" id="add-theme">

1. In the <control>Project</control> tool window, select the <path>resources</path> directory and invoke the context menu with the right click.
2. Select the <ui-path>New | Plugin DevKit | Theme</ui-path> action.

   It is a good practice to include the name of the plugin in the created theme name.
3. Check the <control>Dark theme</control> checkbox if the created theme should be based on IntelliJ IDEA _Darcula_ theme.
   Otherwise, the _Light_ theme will be used as the base.
4. Click <control>OK</control> button to generate the [theme description file](themes_customize.md#introduction-to-theme-description-file-syntax) with <path>\$THEME_NAME\$.theme.json</path> name. The generated theme will be automatically configured in the <path>plugin.xml</path> file.

</procedure>

## Bundling Color Schemes

Use `com.intellij.bundledColorScheme` extension point specifying the `path` to the color scheme XML file (without `.xml` suffix).
Specify attribute `id` for this extension in <path>plugin.xml</path> matching its `name` attribute value from the color scheme XML.
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Custom Language Support

<link-summary>Supporting custom languages overview.</link-summary>

IntelliJ Platform is a powerful platform for building development tools targeting *any* language.
Most of the IDE features consist of language-independent (provided by the platform) and language-specific parts.
Supporting a particular feature for a new language can be achieved with a small amount of effort:
a plugin must implement only the language-specific part.

## Reference

This part of the documentation explains the main concepts of the *Language API* and guides you through the sequence of steps that are usually required to develop a custom language plugin.
You can obtain additional information about the *Language API* from the Javadoc comments for the *Language API* classes and from the Properties language support source code, which is part of the [IntelliJ IDEA Community Edition](https://github.com/JetBrains/intellij-community) source code.

## Tutorial

If you prefer a full example to the detailed descriptions offered in this section, please check out a step-by-step tutorial on how to create custom language support for _Simple Language_:
[](custom_language_support_tutorial.md).
Corresponding steps from the tutorial are linked under the "**Example**" section on each page of this reference.

The webinar [How We Built Comma, the Raku IDE, on the IntelliJ Platform](https://blog.jetbrains.com/platform/2020/01/webinar-recording-how-we-built-comma-the-raku-ide-on-the-intellij-platform/) offers an excellent introduction as well.

<video src="https://www.youtube.com/watch?v=zDP9uUMYrvs" title="How We Built Comma, the Raku IDE, on the IntelliJ Platform"/>

## Topics

### Initial Setup

* [](registering_file_type.md)
* [](implementing_parser_and_psi.md)
* [](implementing_lexer.md)
* [](syntax_highlighting_and_error_highlighting.md)
* {columns="2"}

### Resolving and Completion

* [](references_and_resolve.md)
    * [](symbols.md)
    * [](declarations_and_references.md)
    * [](websymbols.md)
* [](navigation.md)
* [](code_completion.md)
* {columns="2"}

### Refactoring

* [](find_usages.md)
* [](safe_delete_refactoring.md)
* [](rename_refactoring.md)
* {columns="2"}

### Editor and IDE Features

* [](code_formatting.md)
* [](go_to_class_and_go_to_symbol.md)
* [](code_inspections_and_intentions.md)
* [](documentation.md)
* [](structure_view.md)
* [](parameter_info.md)
* [](navbar.md)
* [](inlay_hints.md)
* Code Hierarchy
* [](spell_checking.md)
* [](surround_with.md)
* [](additional_minor_features.md)
* {columns="2"}

See [](language_server_protocol.md) for supporting language servers.

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2025 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Custom Language Support Tutorial

<link-summary>Tutorial for creating a .properties-like custom language.</link-summary>

In this tutorial, we will add support for a [.properties](https://en.wikipedia.org/wiki/.properties) language and its usages within Java code.

> IntelliJ Platform support for custom languages is discussed in more depth in the [Custom Language Support](custom_language_support.md) section.
> Corresponding parts are linked under **Reference** on top of each page in this tutorial.
>
> All relevant code added or changed on a page is linked in **Code**.
>
> The accompanying [](writing_tests_for_plugins.md) tutorial covers testing the functionality; corresponding parts are linked under **Testing**.
>
{title="Navigating this tutorial"}

> The complete and fully working example plugin used in this tutorial is the [`simple_language_plugin`](%gh-sdk-samples-master%/simple_language_plugin) code sample.
>
> See [](code_samples.md) on how to build and run it.
>
{title="Accessing the code" style="note"}

This is a step-by-step tutorial, and it requires completing each step, in order:

* [](prerequisites.md)
* [](folding_builder.md)
* [](language_and_filetype.md)
* [](go_to_symbol_contributor.md)
* [](grammar_and_parser.md)
* [](structure_view_factory.md)
* [](lexer_and_parser_definition.md)
* [](structure_aware_navbar.md)
* [](syntax_highlighter_and_color_settings_page.md)
* [](formatter.md)
* [](psi_helper_and_utilities.md)
* [](code_style_settings.md)
* [](annotator.md)
* [](commenter.md)
* [](line_marker_provider.md)
* [](quick_fix.md)
* [](completion_contributor.md)
* [](documentation_provider.md)
* [](reference_contributor.md)
* [](spell_checking_strategy.md)
* [](find_usages_provider.md)
* {columns="2"}

<include from="snippets.md" element-id="missingContent"/>

<seealso style="cards">
    <category ref="related">
        <a href="custom_language_support.md"/>
        <a href="writing_tests_for_plugins.md"/>
    </category>
</seealso>
# Snippets
{is-library="true"}

<!-- Copyright 2000-2022 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<snippet id="runTests">

Run the test and make sure it's successful.

<procedure title="Running tests" collapsible="true" default-state="collapsed">

1. Open the <control>Gradle</control> Tool Window.
2. Select the <control>simple_language_plugin</control> node.
  You may need to reimport it as a Gradle project.
3. Drill down under <control>simple_language_plugin</control> to <control>Tasks</control>, <control>verification</control>, <control>test</control> task.
4. Run the <control>test</control> task.

The results are displayed in the <control>Run</control> Tool Window, and also written to the <path>simple_language_plugin/build/test-results/test</path> directory.

If the <control>Run</control> Tool Window displays the error *Test events were not received*, do the following:
1. In the <control>Gradle</control> Tool Window, drill down under <control>simple_language_plugin</control> to <control>Tasks</control>, <control>build</control>, <control>clean</control> task.
2. Run the <control>clean</control> task, which deletes the <path>simple_language_plugin/build</path> directory.
3. Restart the test.

</procedure>

</snippet>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Custom Plugin Repository

<link-summary>Creating custom plugin repositories other than JetBrains Marketplace.</link-summary>

<tldr>

**Product Help**: [Repository Settings](https://www.jetbrains.com/help/idea/managing-plugins.html#repos)

</tldr>

> [IDE Provisioner](https://www.jetbrains.com/ide-services/ide-provisioner/) comes with a local built-in repository of IntelliJ Platform plugins
> that allows choosing specific plugins to be approved within an organization.
> It also allows uploading and distributing private plugins inside an organization, as well as any publicly available plugin from the internet.
>
{title="JetBrains IDE Services: IDE Provisioner"}

To use a plugin repository _other than_ the [JetBrains Marketplace](https://plugins.jetbrains.com), perform the following steps:

<procedure title="Setting Up Custom Plugin Repository">

1. Create and maintain an <path>updatePlugins.xml</path><sup>1</sup> file on the HTTPS web server used for the custom repository.
   This file describes all the plugins available in the custom repository and each plugin's download URL.
2. Upload the plugin distribution JAR/ZIP file to an HTTPS web server.
   This can be the same web server used for the custom repository or a different HTTPS web server.
3. Add the URL for the custom repository to the JetBrains IDE [Repository Settings](https://www.jetbrains.com/help/idea/managing-plugins.html#repos).

<sup>1</sup> The <path>updatePlugin.xml</path> filename is not fixed and can be different.

</procedure>

> Gradle plugin [IntelliJ plugin uploader](https://github.com/brian-mcnamara/plugin_uploader) can be used to automate deployment.
>
{title="Automating Deployment"}

To avoid collisions between private plugins and those hosted on JetBrains Marketplace, an organization can [reserve plugin IDs](https://plugins.jetbrains.com/docs/marketplace/reserved-plugin-ids.html).

To provide custom authentication, implement [`PluginRepositoryAuthProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/plugins/auth/PluginRepositoryAuthProvider.java) registered in `com.intellij.pluginRepositoryAuthProvider` extension point.

## Describing Plugins in `updatePlugins.xml` File

Every custom plugin repository must have at least one <path>updatePlugins.xml</path> file to describe every hosted plugin's latest available version.
The description in <path>updatePlugins.xml</path> is used by JetBrains IDEs to locate plugins by attributes such as identifier, IDE version, and plugin version.
These attributes are displayed by JetBrains IDEs to help users select or upgrade plugins.
The description also tells the JetBrains IDE where to download the plugin itself.

A custom plugin repository's <path>updatePlugins.xml</path> file is constructed and maintained by the repository administrator.
More than one <path>updatePlugins.xml</path> file may be required if the custom repository consumers are using more than one version of a JetBrains IDE.
For example, <path>updatePlugins-182.xml</path>, <path>updatePlugins-183.xml</path> for IntelliJ IDEA 2018.2 and 2018.3, respectively.
Each <path>updatePlugins-*.xml</path> file will have a unique URL that is added to the JetBrains IDE [Repository Settings](https://www.jetbrains.com/help/idea/managing-plugins.html#repos).

### Format of `updatePlugins.xml` File

The format of an <path>updatePlugins.xml</path> file is simply a list of sequential elements that describe each plugin:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!--
The <plugins> element (required) contains the description of the plugins
available at this repository.
-->
<plugins>
  <!--
  Each <plugin> element (required) describes one plugin in the repository.
  Attributes:
   - "id" (required) - used by JetBrains IDEs to uniquely identify
     a plugin. Must match <id> in the plugin.xml file.
   - "url" (required) - URL to download the plugin JAR/ZIP file.
     Must be HTTPS.
   - "version" (required) - version of this plugin. Must match <version>
     in the plugin.xml file.
  -->
  <plugin
          id="fully.qualified.id.of.this.plugin"
          url="https://mycompany.example.com/my_repo/my_plugin.jar"
          version="major.minor.update">
    <!--
    The <idea-version> element (required) must match the same element
    in the plugin.xml file.
    -->
    <idea-version since-build="181.3" until-build="191.*"/>
  </plugin>
  <plugin
          id="id.of.different.plugin"
          url="https://othercompany.example.com/other_repo/other_plugin.jar"
          version="major.minor">
    <idea-version since-build="181.3" until-build="191.*"/>
  </plugin>
  <!-- And so on for other plugins... -->
</plugins>
```

**Notes:**

* An <path>updatePlugins.xml</path> file must contain at least one `<plugin>` element.
* A plugin `id` may be listed only once in an <path>updatePlugins.xml</path> file.
* Multiple plugins with the same `id` but different `idea-version` attributes must be split into separate <path>updatePlugins-*.xml</path> files.
  The requesting IDE's version is passed as `build` parameter and can be used for server-side filtering.

### Optional `updatePlugin.xml` Elements

<tldr>

**Reference**: [](plugin_configuration_file.md)

</tldr>

During plugin installation, the IDE reads the plugin JAR/ZIP file and thereafter displays more information about the plugin.
In some cases, additional information included in <path>updatePlugins.xml</path> might help a user select a plugin when [browsing the custom plugin repository](https://www.jetbrains.com/help/idea/managing-plugins.html#repos) before installation.
The decision on what elements should be included in the file depends on the plugins and repository consumers.
It is recommended to avoid adding unnecessary elements as they will have to be synchronized with each plugin's <path>[plugin.xml](plugin_configuration_file.md)</path> file.

The additional candidate elements:

<table>
    <tr>
        <td>
            Element
        </td>
        <td>
            Effects &amp; Requirements
        </td>
    </tr>
    <tr>
        <td>
            <code-block lang="XML">
                &lt;name>
                  My Plugin Name
                &lt;/name>
            </code-block>
        </td>
        <td>
            <p>By default, the name of the plugin JAR/ZIP file is displayed before installation.</p>
            <p>Using the <code>&lt;name></code> element displays the name of the plugin.</p>
            <p>Contents should match the <a href="plugin_configuration_file.md#idea-plugin__name"><code>&lt;name></code></a> element contents in the plugin's <path>plugin.xml</path> file to avoid confusion.</p>
        </td>
    </tr>
    <tr>
        <td>
            <code-block lang="XML">
                &lt;description>
                  My plugin is awesome
                &lt;/description>
            </code-block>
        </td>
        <td>
            <p>By default, no description for the plugin is displayed before installation.</p>
            <p>Using the <code>&lt;description></code> element will cause a description to be displayed before installation.</p>
            <p>Contents should match the <a href="plugin_configuration_file.md#idea-plugin__description"><code>&lt;description></code></a> element contents in the plugin's <path>plugin.xml</path> file to avoid confusion.</p>
            <p>Optionally, an enclosing <code>&lt;![CDATA[ ]]></code> element can be used if the description needs to contain HTML tags.</p>
        </td>
    </tr>
    <tr>
        <td>
            <code-block lang="XML">
                &lt;change-notes>
                  Added cool feature
                &lt;/change-notes>
            </code-block>
        </td>
        <td>
            <p>By default, no change notes for the plugin are displayed before installation.</p>
            <p>Using the <code>&lt;change-notes></code> element will cause a description of changes to be displayed before installation.</p>
            <p>Contents should match the <a href="plugin_configuration_file.md#idea-plugin__change-notes"><code>&lt;change-notes></code></a> element contents in the plugin's <path>plugin.xml</path> file to avoid confusion.</p>
            <p>Optionally, an enclosing <code>&lt;![CDATA[ ]]></code> element can be used if the change notes need to contain HTML tags.</p>
        </td>
    </tr>
    <tr>
        <td>
            <code-block lang="XML">
                &lt;depends>
                  dependency.plugin.id
                &lt;/depends>
            </code-block>
        </td>
        <td>
            <p>Adding a plugin dependency in the <code>&lt;depends></code> element will cause asking a user about enabling the dependency plugin, if it is installed and disabled in the IDE. A plugin can specify multiple <code>&lt;depends></code> elements.</p>
            <p>A plugin entry should include only the dependencies on other plugins that are defined by the <a href="plugin_configuration_file.md#idea-plugin__depends"><code>&lt;depends></code></a> elements in the plugin's <path>plugin.xml</path> file. The <code>optional</code> and <code>config-file</code> attributes are ignored and shouldn't be specified.</p>
        </td>
    </tr>
</table>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<tldr>

**Related:** [](ui_faq.md#text)

</tldr>

# Data Formats

<link-summary>Choosing proper date formats to display data to users.</link-summary>

## Numbers

> If there is a space between the number and the unit, use a non-breaking space.
>
{style="note"}

<table>
<tr>
    <td width="20%"></td>
    <td width="25%"> Examples </td>
    <td width="55%"> When and how to use </td>
</tr>
<tr>
    <td>Numbers</td>
    <td>4,255,165.00</td>
    <td><p>Space is not limited, e.g. <control>Settings</control> dialog:</p>
        <p><img src="numbers.png" width="277" /></p>
    </td>
</tr>
<tr>
    <td>Numbers short</td>
    <td>
        <p>10.5k</p>
        <p>3.3M</p>
    </td>
    <td>Space is limited, e.g. in table or lists.</td>
</tr>
<tr>
    <td>Percentage</td>
    <td>13%</td>
    <td></td>
</tr>
<tr>
    <td>Ratios</td>
    <td>3 of 10</td>
    <td></td>
</tr>
<tr>
    <td>Ratios short</td>
    <td>3/10</td>
    <td>Space is limited, e.g. in table or lists.</td>
</tr>
<tr>
    <td>Currency</td>
    <td>$10</td>
    <td></td>
  </tr>
</table>

## Date and time

By default, the date and time formats are taken from the system settings. The format can be changed on the <ui-path>Settings | Appearance & Behavior | System Settings | Date Formats</ui-path> page.

See the table below to understand in which cases to show date and time.

<table>
<tr>
<td width="20%"></td>
<td width="25%"> Examples </td>
<td width="55%"> When and how to use </td></tr>
<tr>
    <td>Date</td>
    <td>
        <p>Today</p>
        <p>05 Jan</p>
        <p>05 Jan 2017</p>
    </td>
    <td>
        <p>Omit the time for events if the exact time does not matter, e.g., Annotate panel.</p>
        <p>Use <i>Today</i> and <i>Yesterday</i> for the last two days, use exact date for all other days.</p>
        <p>Do <b>not</b> show the year if it’s within the current calendar year.</p>
    </td>
</tr>
<tr>
    <td>Date and time</td>
    <td>
        <p>Today, 14:04</p>
        <p>05 Jan, 14:04</p>
        <p>05 Jan 2019, 14:04</p>
    </td>
    <td>When it is important to know the exact sequence of actions, e.g., Version Control Log.</td>
</tr>
<tr>
    <td>Time</td>
    <td>22:49</td>
    <td>Omit date if the event happened today and it’s clear from the context.</td>
</tr>
<tr>
    <td>Date and day of week</td>
    <td>Tuesday, 30 August</td>
    <td>
        <p>Use as headers in timelines, e.g., Event Log. The day of the week helps to quickly understand how long ago was the event.</p>
        <p>Use <i>Today</i> and <i>Yesterday</i> for the last two days, use exact date for all other days.</p>
    </td>
</tr>
<tr>
    <td>Approximate time</td>
   <td>
       <p>A moment ago</p>
       <p>10 minutes ago</p>
       <p>2 hours ago</p>
    </td>
    <td><p>Use for a single event that happened recently, e.g., in the Status bar:</p>
        <p><img src="approximate.png" width="215" /></p>
        <p>Do <b>not</b> use in tables as it’s harder to compare.</p>
        <p>If more than 12 hours have passed since the event, use Date format.</p>
    </td>
</tr>
</table>

![](vcs_log.png){width=1053 style=block}
*Version Control Log (in IntelliJ IDEA incorrect format is used at the moment)*

![](event_log.png){width=1053 style=block}
*Event Log*

## Duration

<table>
<tr>
<td width="20%"></td>
<td width="25%"> Examples </td>
<td width="55%"> When and how to use </td>
</tr>
<tr>
    <td>Period</td>
    <td>
        <p>10 milliseconds</p>
        <p>10 seconds</p>
        <p>10 minutes</p>
        <p>1 hour</p>
    </td>
    <td>Space is not limited, e.g. <control>Settings</control> dialog:
        <p><img src="period.png" width="242" /></p>
    </td>
</tr>
<tr>
    <td>Time-lapse</td>
    <td>
        <p>1 h 30 m 30 s</p>
        <p>1 h 30 m 30.035 s</p>
        <p>1 h</p>
        <p>1 h 0 m 30 s</p>
        <p>1 m 30 s</p>
        <p>05 Jan 2019, 14:04</p>
    </td>
    <td><p>Use for changing duration. Select units depending on the process type. E.g., Unit tests usually run less than a minute, so show only seconds and milliseconds. Build tasks usually run more than a minute, so show minutes and seconds.</p>
        <p>Omit hours and seconds that do not provide additional data.</p>
</td>
</tr>
<tr>
    <td>Time-lapse condensed <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 standard</a></td>
    <td>1:30:01.350</td>
    <td>Use when space is limited or to describe a range, e.g. 1:30:01.350 – 1:30:02.350 </td>
</tr>
</table>


![](run.png){width=518}

## Quantities of data

Use decimal numeral system.

<table style="none">
<tr>
    <td width="50%">bits</td>
    <td width="50%">10 bits</td>
</tr>
<tr>
    <td>bytes</td>
    <td>10 B</td>
</tr>
<tr>
    <td>kilobytes</td>
    <td>10 KB</td>
</tr>
<tr>
    <td>megabytes</td>
    <td>10 MB</td>
</tr>
<tr>
    <td>gigabytes</td>
    <td>10 GB</td>
</tr>
<tr>
    <td>terabytes</td>
    <td>10 TB</td>
</tr>
</table>

![](data_formats_tree.png){width=511}

## Units

All numeric values should be given a unit or clearly labeled if they do not have suitable units, e.g. counters.

![](period.png){width=242}

![](no_units.png){width=264}

Select the most convenient units.

<table>
    <tr>
        <td width="50%"><format color="Red" style="bold">Incorrect</format></td>
        <td width="50%"><format color="Green" style="bold">Correct</format></td>
    </tr>
    <tr>
        <td><img src="connection_incorrect.png" alt="" width="284" /></td>
        <td><img src="connection_correct.png" alt="" width="259" /></td>
    </tr>
</table>

Place units after the input field.

<table>
    <tr>
        <td width="50%"><format color="Red" style="bold">Incorrect</format></td>
        <td width="50%"><format color="Green" style="bold">Correct</format></td>
    </tr>
    <tr>
        <td><img src="caret_incorrect.png" alt="" width="196" /></td>
        <td><img src="caret_correct.png" alt="" width="242" /></td>
    </tr>
</table>

## Tables

<p>Use the rules below to make it easier to compare numbers in one column.</p>

Right-align numeric values.

![](data_formats_table.png){width=299}

Include the unit in the column header if all values share the same unit. Convert each number to use the same unit.
If it’s not possible, e.g., the scatter of numbers is too large, include the unit with each value.

| <format color="Red" style="bold">Incorrect</format> | <format color="Green" style="bold">Correct</format> |
|-----------------------------------------------------|-----------------------------------------------------|
| ![](table_units_incorrect.png){width="110"}         | ![](table_units_correct.png){width="110"}           |

Be consistent with the precision of the significand.

| <format color="Red" style="bold">Incorrect</format> | <format color="Green" style="bold">Correct</format> |
|-----------------------------------------------------|-----------------------------------------------------|
| ![](precision_incorrect.png){width="110"}           | ![](precision_correct.png){width="110"}             |
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# DataGrip Plugin Development

<link-summary>Introduction to developing plugins for DataGrip.</link-summary>

<var name="productID" value="datagrip"/>
<var name="marketplaceProductID" value="dbe"/>
<include from="snippets.md" element-id="jetbrainsIDE_TLDR"/>

[DataGrip](https://www.jetbrains.com/datagrip/) is an IntelliJ Platform-based product.
Plugin projects targeting DataGrip can be developed using [IntelliJ IDEA](idea.md).

## DataGrip Plugin Setup

### Gradle Build Script

<tabs>
<tab title="IntelliJ Platform Gradle Plugin (2.x)">


Define a dependency using [`datagrip()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md), see _Versions_ link on top of this page for all available versions.
See [](tools_intellij_platform_gradle_plugin.md#dependenciesLocalPlatform) for using a local installation.

A dependency on the bundled `com.intellij.database` plugin must be added using the [`bundledPlugin()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins) helper.

Minimum <path>build.gradle.kts</path> setup:

```kotlin
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    datagrip("<versionNumber>")
    bundledPlugin("com.intellij.database")
  }
}
```

</tab>

<tab title="Gradle IntelliJ Plugin (1.x)">

The configuration of DataGrip plugin projects follows the methods described in [Configuring Plugin Projects using the IntelliJ IDEA Product Attribute](dev_alternate_products.md#using-the-intellij-idea-product-attribute), and [Configuring the plugin.xml File](dev_alternate_products.md#configuring-pluginxml).

The table below summarizes the [](tools_gradle_intellij_plugin.md) attributes to set in the plugin project's Gradle build script.
Click on an entry in the table's *Attribute* column to go to the documentation about that attribute.
To see how these attributes appear in a similar Gradle build script for PhpStorm, see [](dev_alternate_products.md#configuring-gradle-build-script-using-the-intellij-idea-product-attribute).

| `gradle-intellij-plugin` Attribute                                               | Attribute Value                                                                                                                                                                                                                  |
|----------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [`intellij.type`](tools_gradle_intellij_plugin.md#intellij-extension-type)       | <p>`IU` for IntelliJ IDEA Ultimate.</p><p>_`IC` is incompatible with the required `DatabaseTools` plugin._</p>                                                                                                                   |
| [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version) | `2019.3` Set to the same version as the DataGrip target version, as set by `runIde.ideDir`.                                                                                                                                      |
| [`intellij.plugins`](tools_gradle_intellij_plugin.md#intellij-extension-plugins) | `DatabaseTools` Dependency on the bundled `DatabaseTools` plugin.                                                                                                                                                                |
| [`runIde.ideDir`](tools_gradle_intellij_plugin.md#tasks-runide-idedir)           | <p>Path to locally installed target version of DataGrip. For example, for macOS:</p><p><path>/Users/\$USERNAME\$/Library/Application Support/JetBrains/Toolbox/apps/datagrip/ch-0/193.5233.139/DataGrip.app/Contents</path>.</p> |

</tab>
</tabs>

### plugin.xml

The dependency on the DataGrip APIs must be declared in the <path>[plugin.xml](plugin_configuration_file.md)</path> file.
As described in [Modules Specific to Functionality](plugin_compatibility.md#modules-specific-to-functionality) table, the [`<depends>`](plugin_configuration_file.md#idea-plugin__depends) tags must declare `com.intellij.database`.

Note that DataGrip plugins must also declare a dependency on `com.intellij.modules.platform` because `com.intellij.database` is not recognized as a module.
Consequently, without the `com.intellij.modules.platform` declaration the plugin is assumed to be a [legacy plugin](plugin_compatibility.md#declaring-plugin-dependencies) and will not load in DataGrip.

## Available DataGrip APIs

> See [](data_grip_extension_point_list.md) for the complete list.
>
{style="note"}

Use the [Exploring APIs as a Consumer](plugin_compatibility.md#exploring-apis-as-a-consumer) process to identify the libraries in `DatabaseTools`.
Test your plugin with any version of DataGrip you wish to support.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<!-- EP List Directory: /dbe/ -->

# DataGrip Extension Point and Listener List

<link-summary>Overview of Extension Points and Listeners for DataGrip.</link-summary>

<tldr>

**Product-Specific Plugin Development**: [DataGrip](data_grip.md)

</tldr>

79 Extension Points and 28 Listeners for DataGrip

See [](intellij_platform_extension_point_list.md) for IntelliJ Platform.

<include from="snippets.md" element-id="ep_list_legend"/>

## DataGrip

### DataGrip - Listeners

| Topic | Listener |
|-------|----------|
| [JdbcDriverManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.console.JdbcDriverManager.Listener)  | `Listener` |
| [DatabaseSessionManager#topic](https://jb.gg/ipe/listeners?topics=com.intellij.database.console.session.DatabaseSessionManagerListener)  | `DatabaseSessionManagerListener` |
| [DatabaseSession.Companion#topic](https://jb.gg/ipe/listeners?topics=com.intellij.database.console.session.DatabaseSessionStateListener)  | `DatabaseSessionStateListener` |
| [CsvFormatsSettings#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.csv.CsvFormatsSettings.Listener)  | `Listener` |
| [AbstractDataSource#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.dataSource.AbstractDataSource.Listener)  | `Listener` |
| [DataSourceModelStorage#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.dataSource.DataSourceModelStorage.Listener)  | `Listener` |
| [DataSourceStorage#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.dataSource.DataSourceStorage.Listener)  | `Listener` |
| [DatabaseConnectionManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.dataSource.DatabaseConnectionManager.Listener)  | `Listener` |
| [DatabaseArtifactManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.dataSource.artifacts.DatabaseArtifactManager.ArtifactListener)  | `ArtifactListener` |
| [DataSourceTestConnectionManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.dataSource.ui.DataSourceTestConnectionManager.Listener)  | `Listener` |
| [DatabaseTopics#AUDIT_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.datagrid.DataAuditor)  | `DataAuditor` |
| [DatabaseTopics#RESPONSE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.datagrid.DataConsumer)  | `DataConsumer` |
| [DataGrid#ACTIVE_GRID_CHANGED_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.datagrid.DataGrid.ActiveGridListener)  | `ActiveGridListener` |
| [DataGridListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.datagrid.DataGridListener)  | `DataGridListener` |
| [DatabaseTopics#REQUEST_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.datagrid.DataProducer)  | `DataProducer` |
| [ImportHead#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.dbimport.ImportHead.Listener)  | `Listener` |
| [DbImportDialog#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.dbimport.editor.DbImportDialog.Listener)  | `Listener` |
| [ScriptGeneratorDiagnosticListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.dialects.base.generator.ScriptGeneratorDiagnosticListener)  | `ScriptGeneratorDiagnosticListener` |
| [DatabaseModelLoader#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.introspection.DatabaseModelLoader.Listener)  | `Listener` |
| [DataSourceManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.psi.DataSourceManager.Listener)  | `Listener` |
| [DbPsiFacade#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.psi.DbPsiFacade.Listener)  | `Listener` |
| [DataGridAppearanceSettings#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.settings.DataGridAppearanceSettings.Listener)  | `Listener` |
| [DataGridSettings#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.settings.DataGridSettings.Listener)  | `Listener` |
| [DatabaseColorManager#COLOR_CHANGE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.view.DatabaseColorManager.ColorChangeListener)  | `ColorChangeListener` |
| [DatabaseConfigEditor#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.database.view.ui.DatabaseConfigEditor.Listener)  | `Listener` |
| [SqlRoutineIndex#topic](https://jb.gg/ipe/listeners?topics=com.intellij.sql.SqlRoutineIndex.SqlRoutineIndexListener)  | `SqlRoutineIndexListener` |
| [DatabaseSettings#TOPIC](https://jb.gg/ipe/listeners?topics=java.lang.Runnable)  | `Runnable` |
| [DatabaseViewOptions#TOPIC](https://jb.gg/ipe/listeners?topics=java.lang.Runnable)  | `Runnable` |


### DatabaseConnectivity.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.database.configValidator](https://jb.gg/ipe?extensions=com.intellij.database.configValidator) | `DatabaseConfigValidator` |
| [com.intellij.database.dataConsumer](https://jb.gg/ipe?extensions=com.intellij.database.dataConsumer) | `DataConsumer` |
| [com.intellij.database.dataProducer](https://jb.gg/ipe?extensions=com.intellij.database.dataProducer) | `DataProducer` |
| [com.intellij.database.errorProvider](https://jb.gg/ipe?extensions=com.intellij.database.errorProvider) ![Non-Dynamic][non-dynamic] | `ConsoleErrorProviderFactory` |
| [com.intellij.database.gridHelper](https://jb.gg/ipe?extensions=com.intellij.database.gridHelper) | `CoreGridHelper` |
| [com.intellij.database.jdbcHelper](https://jb.gg/ipe?extensions=com.intellij.database.jdbcHelper) | `JdbcHelper` |
| [com.intellij.database.jdbcMetadataWrapper](https://jb.gg/ipe?extensions=com.intellij.database.jdbcMetadataWrapper) | `MDFactory` |
| [com.intellij.database.jdbcSourceLoader](https://jb.gg/ipe?extensions=com.intellij.database.jdbcSourceLoader) | `JdbcSourceLoader` |
| [com.intellij.database.objectEditorFactory](https://jb.gg/ipe?extensions=com.intellij.database.objectEditorFactory) ![Non-Dynamic][non-dynamic] | `DbmsObjectEditorFactory` |
| [com.intellij.database.objectEditorModelFactory](https://jb.gg/ipe?extensions=com.intellij.database.objectEditorModelFactory) ![Non-Dynamic][non-dynamic] | `DbmsObjectEditorModelFactory` |
| [com.intellij.database.queryParametersProvider](https://jb.gg/ipe?extensions=com.intellij.database.queryParametersProvider) | `QueryParametersProvider` |
| [com.intellij.database.queryValidator](https://jb.gg/ipe?extensions=com.intellij.database.queryValidator) | `DbQueryValidator` |
| [com.intellij.database.selectInProvider](https://jb.gg/ipe?extensions=com.intellij.database.selectInProvider) | `Extension` |
| [com.intellij.database.toDatabaseScriptTranslator](https://jb.gg/ipe?extensions=com.intellij.database.toDatabaseScriptTranslator) | `ToDatabaseScriptTranslator` |

### DatabaseCore.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.database.addToHSet](https://jb.gg/ipe?extensions=com.intellij.database.addToHSet) | `n/a` |
| [com.intellij.database.artifactsConfig](https://jb.gg/ipe?extensions=com.intellij.database.artifactsConfig) ![Non-Dynamic][non-dynamic] | `n/a` |
| [com.intellij.database.connectionInterceptor](https://jb.gg/ipe?extensions=com.intellij.database.connectionInterceptor) ![Experimental][experimental] | `DatabaseConnectionInterceptor` |
| [com.intellij.database.consoleProvider](https://jb.gg/ipe?extensions=com.intellij.database.consoleProvider) | `PersistenceConsoleProvider` |
| [com.intellij.database.consoleRunContextParametersTuner](https://jb.gg/ipe?extensions=com.intellij.database.consoleRunContextParametersTuner) | `ConsoleRunContextParametersTuner` |
| [com.intellij.database.dataAuditor](https://jb.gg/ipe?extensions=com.intellij.database.dataAuditor) | `DataAuditor` |
| [com.intellij.database.dataImporter](https://jb.gg/ipe?extensions=com.intellij.database.dataImporter) | `ImportManager` |
| [com.intellij.database.dataSourceDetector](https://jb.gg/ipe?extensions=com.intellij.database.dataSourceDetector) | `DataSourceDetector` |
| [com.intellij.database.dataSourceManager](https://jb.gg/ipe?extensions=com.intellij.database.dataSourceManager) ![Project-Level][project-level] | `DataSourceManager` |
| [com.intellij.database.dbms](https://jb.gg/ipe?extensions=com.intellij.database.dbms) ![Non-Dynamic][non-dynamic] | `n/a` |
| [com.intellij.database.definitionProvider](https://jb.gg/ipe?extensions=com.intellij.database.definitionProvider) | `DefinitionProvider` |
| [com.intellij.database.dmlHelper](https://jb.gg/ipe?extensions=com.intellij.database.dmlHelper) | `DmlHelper` |
| [com.intellij.database.domainRegistry](https://jb.gg/ipe?extensions=com.intellij.database.domainRegistry) | `DomainRegistry` |
| [com.intellij.database.driversConfig](https://jb.gg/ipe?extensions=com.intellij.database.driversConfig) ![Non-Dynamic][non-dynamic] | `n/a` |
| [com.intellij.database.errorHandler](https://jb.gg/ipe?extensions=com.intellij.database.errorHandler) | `DatabaseErrorHandler` |
| [com.intellij.database.executionEnvironmentHelper](https://jb.gg/ipe?extensions=com.intellij.database.executionEnvironmentHelper) | `ExecutionEnvironmentHelper` |
| [com.intellij.database.explainPlanProvider](https://jb.gg/ipe?extensions=com.intellij.database.explainPlanProvider) | `ExplainPlanProvider` |
| [com.intellij.database.extensionFallback](https://jb.gg/ipe?extensions=com.intellij.database.extensionFallback) | `n/a` |
| [com.intellij.database.geoHelper](https://jb.gg/ipe?extensions=com.intellij.database.geoHelper) | `GeoHelper` |
| [com.intellij.database.gridColumnsManagerFactory](https://jb.gg/ipe?extensions=com.intellij.database.gridColumnsManagerFactory) | `GridColumnsManagerFactory` |
| [com.intellij.database.hookUpHelper](https://jb.gg/ipe?extensions=com.intellij.database.hookUpHelper) | `HookUpHelper` |
| [com.intellij.database.introspector](https://jb.gg/ipe?extensions=com.intellij.database.introspector) ![Internal][internal] | `Factory` |
| [com.intellij.database.introspectorStatsProvider](https://jb.gg/ipe?extensions=com.intellij.database.introspectorStatsProvider) | `DBIntrospectorStatsProvider` |
| [com.intellij.database.linkedDataSourceHelper](https://jb.gg/ipe?extensions=com.intellij.database.linkedDataSourceHelper) | `LinkedDataSourceHelper` |
| [com.intellij.database.modelExternalData](https://jb.gg/ipe?extensions=com.intellij.database.modelExternalData) ![Non-Dynamic][non-dynamic] | `n/a` |
| [com.intellij.database.modelFacade](https://jb.gg/ipe?extensions=com.intellij.database.modelFacade) ![Non-Dynamic][non-dynamic] | `ModelFacade` |
| [com.intellij.database.modelRelationProvider](https://jb.gg/ipe?extensions=com.intellij.database.modelRelationProvider) | `ModelRelationProvider` |
| [com.intellij.database.namingService](https://jb.gg/ipe?extensions=com.intellij.database.namingService) | `Provider` |
| [com.intellij.database.optionProvider](https://jb.gg/ipe?extensions=com.intellij.database.optionProvider) | `DbOptionProvider` |
| [com.intellij.database.parameterPatternProvider](https://jb.gg/ipe?extensions=com.intellij.database.parameterPatternProvider) | `DatabaseParameterPatternProvider` |
| [com.intellij.database.processParamProvider](https://jb.gg/ipe?extensions=com.intellij.database.processParamProvider) | `ConsoleConfigurationParamProvider` |
| [com.intellij.database.routineExecutionHelper](https://jb.gg/ipe?extensions=com.intellij.database.routineExecutionHelper) | `RoutineExecutionHelper` |
| [com.intellij.database.runtimeErrorFixProvider](https://jb.gg/ipe?extensions=com.intellij.database.runtimeErrorFixProvider) | `RuntimeErrorActionProvider` |
| [com.intellij.database.scriptGenerator](https://jb.gg/ipe?extensions=com.intellij.database.scriptGenerator) | `ScriptGenerator` |
| [com.intellij.database.sqlObjectBuilder](https://jb.gg/ipe?extensions=com.intellij.database.sqlObjectBuilder) | `SqlObjectBuilder` |
| [com.intellij.database.synchronizeHandler](https://jb.gg/ipe?extensions=com.intellij.database.synchronizeHandler) | `SynchronizeHandler` |
| [com.intellij.database.typeSystem](https://jb.gg/ipe?extensions=com.intellij.database.typeSystem) | `DasTypeSystem` |
| [com.intellij.database.urlEditorInspector](https://jb.gg/ipe?extensions=com.intellij.database.urlEditorInspector) | `UrlEditorInspector` |
| [com.intellij.database.urlParamEditorProvider](https://jb.gg/ipe?extensions=com.intellij.database.urlParamEditorProvider) ![Non-Dynamic][non-dynamic] | `TypeDescriptorFactory` |
| [com.intellij.database.virtualFileDataSourceProvider](https://jb.gg/ipe?extensions=com.intellij.database.virtualFileDataSourceProvider) | `VirtualFileDataSourceProvider` |

### DatabasePlugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.database.cli.runTargetProvider](https://jb.gg/ipe?extensions=com.intellij.database.cli.runTargetProvider) | `CliRunTargetProvider` |
| [com.intellij.database.databaseViewStructureExtension](https://jb.gg/ipe?extensions=com.intellij.database.databaseViewStructureExtension) | `DvStructureExtension` |
| [com.intellij.database.debuggerFacade](https://jb.gg/ipe?extensions=com.intellij.database.debuggerFacade) | `SqlDebuggerFacade` |
| [com.intellij.database.predicatesHelper](https://jb.gg/ipe?extensions=com.intellij.database.predicatesHelper) | `PredicatesHelper` |
| [com.intellij.database.runConsoleAvailable](https://jb.gg/ipe?extensions=com.intellij.database.runConsoleAvailable) | `RunQueryIntentionActionAvailable` |
| [com.intellij.database.schemaDiffCustomization](https://jb.gg/ipe?extensions=com.intellij.database.schemaDiffCustomization) | `SchemaDiffCustomization` |
| [com.intellij.database.urlParamEditorUiProvider](https://jb.gg/ipe?extensions=com.intellij.database.urlParamEditorUiProvider) ![Non-Dynamic][non-dynamic] | `TypeDescriptorUiFactory` |

### intellij.grid.core.impl

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.database.datagrid.extractorsHelper](https://jb.gg/ipe?extensions=com.intellij.database.datagrid.extractorsHelper) | `ExtractorsHelper` |
| [com.intellij.database.datagrid.formatterCreatorProvider](https://jb.gg/ipe?extensions=com.intellij.database.datagrid.formatterCreatorProvider) | `FormatterCreatorProvider` |
| [com.intellij.database.datagrid.objectNormalizerProvider](https://jb.gg/ipe?extensions=com.intellij.database.datagrid.objectNormalizerProvider) | `ObjectNormalizerProvider` |

### intellij.grid.impl

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.database.datagrid.valueEditorTab](https://jb.gg/ipe?extensions=com.intellij.database.datagrid.valueEditorTab) | `ValueEditorTab` |
| [com.intellij.database.minimizedFormatDetector](https://jb.gg/ipe?extensions=com.intellij.database.minimizedFormatDetector) | `MinimizedFormatDetector` |

### mongo.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.database.mongo.resolveHelper](https://jb.gg/ipe?extensions=com.intellij.database.mongo.resolveHelper) | `MongoJSResolveHelper` |

### SqlPluginCore.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.database.dialect](https://jb.gg/ipe?extensions=com.intellij.database.dialect) ![Non-Dynamic][non-dynamic] | `DatabaseDialect` |
| [com.intellij.database.sqlEffectAnalyzer](https://jb.gg/ipe?extensions=com.intellij.database.sqlEffectAnalyzer) ![Non-Dynamic][non-dynamic] | `SqlAffectAnalyzer` |
| [com.intellij.sql.dataSourceProvider](https://jb.gg/ipe?extensions=com.intellij.sql.dataSourceProvider) | `DataSourceProvider` |
| [com.intellij.sql.dialect](https://jb.gg/ipe?extensions=com.intellij.sql.dialect) ![Non-Dynamic][non-dynamic] | `SqlLanguageDialect` |
| [com.intellij.sql.dialectCodeStyleProvider](https://jb.gg/ipe?extensions=com.intellij.sql.dialectCodeStyleProvider) | `SqlDialectCodeStyleProvider` |
| [com.intellij.sql.evaluationHelper](https://jb.gg/ipe?extensions=com.intellij.sql.evaluationHelper) | `EvaluationHelper` |
| [com.intellij.sql.executionFlowAnalyzerProvider](https://jb.gg/ipe?extensions=com.intellij.sql.executionFlowAnalyzerProvider) | `ExecutionFlowAnalyzerProvider` |
| [com.intellij.sql.formatterHelper](https://jb.gg/ipe?extensions=com.intellij.sql.formatterHelper) | `SqlFormatterHelper` |
| [com.intellij.sql.inspectionSuppressorDelegate](https://jb.gg/ipe?extensions=com.intellij.sql.inspectionSuppressorDelegate) | `SqlInspectionSuppressorDelegate` |
| [com.intellij.sql.membersHelper](https://jb.gg/ipe?extensions=com.intellij.sql.membersHelper) | `SqlMembersHelper` |
| [com.intellij.sql.navigationHelper](https://jb.gg/ipe?extensions=com.intellij.sql.navigationHelper) | `NavigationHelper` |
| [com.intellij.sql.resolveExtension](https://jb.gg/ipe?extensions=com.intellij.sql.resolveExtension) | `SqlResolveExtension` |

[deprecated]: https://img.shields.io/badge/-Deprecated-lightgrey?style=flat-square
[removal]: https://img.shields.io/badge/-Removal-red?style=flat-square
[obsolete]: https://img.shields.io/badge/-Obsolete-grey?style=flat-square
[experimental]: https://img.shields.io/badge/-Experimental-violet?style=flat-square
[internal]: https://img.shields.io/badge/-Internal-darkred?style=flat-square
[project-level]: https://img.shields.io/badge/-Project--Level-blue?style=flat-square
[non-dynamic]: https://img.shields.io/badge/-Non--Dynamic-orange?style=flat-square
[dumb-aware]: https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Declarations and References
<primary-label ref="2020.3"/>

<link-summary>Overview of symbol declarations and references.</link-summary>

> This API is currently in development and thus in an experimental state.
>
{style="warning"}

## Declarations

Each [symbol](symbols.md) may be declared in zero or more places, for example:

- a C# partial class is a symbol with several declarations;
- a property key is a symbol possibly declared in several files simultaneously;
- a Java local variable is a symbol with a single declaration;
- and a file is a symbol without declarations; it has only references.

Declarations in PSI elements are implementations of
[`PsiSymbolDeclaration`](%gh-ic%/platform/core-api/src/com/intellij/model/psi/PsiSymbolDeclaration.java).

To report a declaration in a PSI element, either:

- implement and register
  [`PsiSymbolDeclarationProvider`](%gh-ic%/platform/core-api/src/com/intellij/model/psi/PsiSymbolDeclarationProvider.java) in `com.intellij.psi.declarationProvider` extension point
- implement `PsiSymbolDeclaration` directly in the `PsiElement`.

## References

References from PSI elements are implementations of
[`PsiSymbolReference`](%gh-ic%/platform/core-api/src/com/intellij/model/psi/PsiSymbolReference.java).

The main method of `PsiSymbolReference` is `resolveReference()`, which returns the collection of symbols to which the reference points,
plus additional data.
If it is not possible to resolve the reference, for example, if it points to an undefined class, an empty collection gets returned.
A counterpart to the `resolveReference()` method is `PsiSymbolReference.resolvesTo()`,
which checks if the reference resolves to the specified symbol.
This method can be implemented to walk the tree only if the element's text is equal to the reference's text.

For convenience, if the reference can possibly be resolved to a single symbol without additional data, then it can extend from
[`SingleTargetReference`](%gh-ic%/platform/core-api/src/com/intellij/model/SingleTargetReference.java).

### Own References

Own references are the references found in PSI elements, which are considered as references by the language.

**Example:**
PSI element representing `x` in `x * 2` Java expression has an Own reference to a local Java variable, e.g., `var x = 42`,
because this is a reference from Java language point of view, and Java language support uses it, e.g., for code analysis.

To provide Own references by the `PsiElement`, implement
[`PsiElement.getOwnReferences()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java) in the `PsiElement`.
For a single reference, use `Collections.singletonList()`.

### External References

External references are the references that are not considered as references by the host language.
The language support should not rely on their existence/absence, because they might be contributed by other plugins.

**Example:**
PSI element representing `"users.txt"` in `new File("users.txt")` Java expression is a string literal from Java language point of view,
but there is a plugin which _knows_ that this literal references a file name, and provides such a reference.

External references might be contributed to PSI elements
that implement [`PsiExternalReferenceHost`](%gh-ic%/platform/core-api/src/com/intellij/model/psi/PsiExternalReferenceHost.java).
To allow other plugins to contribute references of `PsiElement`, implement `PsiExternalReferenceHost` in the `PsiElement`.
To contribute an External reference to the existing `PsiExternalReferenceHost`, implement and register
[`PsiSymbolReferenceProvider`](%gh-ic%/platform/core-api/src/com/intellij/model/psi/PsiSymbolReferenceProvider.java).

### Implicit References

Implicit references are the references that should be part of the mechanism to obtain a target by a reference,
without the inverse ability to search or rename such references by a target.

**Example:**
`var` keyword in `var x = new Person()` Java declaration has an Implicit reference, because it doesn't make sense to obtain the reference by the target class.

At the same time, it's possible:

- to navigate to the class by <shortcut>Ctrl-Click</shortcut> on `var`;
- to start a refactoring (e.g., rename) from the class targeted by this reference;
- to view documentation of the class targeted by this reference.

To provide an Implicit reference, implement and register
[`ImplicitReferenceProvider`](%gh-ic%/platform/core-api/src/com/intellij/model/psi/ImplicitReferenceProvider.java)
in `com.intellij.psi.implicitReferenceProvider` extension point.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Deploying a Theme

<link-summary>Building and deploying a theme in IDE.</link-summary>

Before your custom theme plugin can be [uploaded to JetBrains Marketplace](publishing_plugin.md#uploading-a-plugin-to-jetbrains-marketplace) and used by users, it should be packaged and verified in the actual IDE.

The deployment process prepares the plugin artifact that can be installed in IDE.

<procedure title="Deploying Theme Plugin">

1. Build the theme by invoking <ui-path>Build | Build Project</ui-path> or <ui-path>Build | Build Module \$MODULE_NAME\$</ui-path>.
2. Create the deployment artifact by invoking <ui-path>Build | Prepare Plugin Module \$MODULE_NAME\$ for Deployment</ui-path>.

   The resulting theme JAR file will be created in the project or module directory.

   In the case of developing a regular plugin, and it specifies additional dependencies, a&nbsp;ZIP archive is created, including all the plugin libraries.
3. [Install](https://www.jetbrains.com/help/idea/managing-plugins.html#installing-plugins-from-disk) the newly created JAR or ZIP file from disk.
4. Click the <control>Apply</control> button.
5. Select your theme in <ui-path>Settings | Appearance & Behavior | Appearance</ui-path> and apply the changes.

</procedure>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Description Text

<link-summary>UI guidelines on descriptions texts.</link-summary>

Description text provides explanatory information about a set of settings or a single item in a list or tree.

![](01_description_text_example.png){width=715}

## When to Use

Use description text to:

* Show details about items in a list or tree:

![](02_use_in_tree.png){width=665}

* Describe a group of settings:

![](03_use_in_settings.png){width=1012}

## How to Use

### Text

Follow general rules in [Writing short and clear](writing_short.md) and [Punctuation](punctuation.md).

Use the default text style for plain text. Increase line height by 3px from the default value.

Use [H4 bold](typography.md) (Default bold) for headings or to highlight important words:

![](04_bold_header.png){width=320}

Use the editor font to highlight code snippets:

![](05_editor_font.png){width=283}

Use bullets for lists:

![](06_bullets.png){width=283}

Limit the width of the line to 70–80 symbols, as it is not convenient to read very long lines:

<format color="Red" style="bold">Incorrect</format>

![](07_width_incorrect.png){width=878}

<format color="Green" style="bold">Correct</format>

![](07_width_correct.png){width=878}

If the text does not fit, add a scrollbar:

![](08_scroll.png){width=333}

### Appearance

Do not add borders around the description text. Use the panel color for the background.

| <format color="Red" style="bold">Incorrect</format> | <format color="Green" style="bold">Correct</format> |
|-----------------------------------------------------|-----------------------------------------------------|
| ![](09_frame_incorrect.png){width="302"}            | ![](09_frame_correct.png){width="302"}              |

For [links](link.md), use the default link color: `Link.activeForeground`. Underline links on hover:

![](10_link.png){width=283}

### Insets

Separate the text from the surroundings with insets.

Use a 12px horizontal inset if the description text’s area has other elements:

![](11_insets_12.png){width=586}

Increase inset up to 20px if the description text is the only element:

![](11_insets_20.png){width=571}

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Plugins Targeting IntelliJ Platform-Based IDEs

<link-summary>Configuring plugin projects for targeting IntelliJ Platform-based IDEs other than IntelliJ IDEA.</link-summary>

Plugin projects can target any (custom) IDEs, as long as the products are based on the [IntelliJ Platform](intellij_platform.md).
Such plugins are developed much like plugin projects that target IntelliJ IDEA.

Modifications are required to the project's Gradle build script and <path>[plugin.xml](plugin_configuration_file.md)</path> files, as described below
and on the individual product pages in _Product Specific_.
The Gradle build script is modified to specify the target product, determining the APIs available to the plugin.
The <path>plugin.xml</path> file is modified to declare the plugin's dependencies on plugins and modules.

## IntelliJ Platform Gradle Plugin (2.x)

A dependency on a specific IDE is defined in the Gradle build script using the builtin extensions listed in [](tools_intellij_platform_gradle_plugin_dependencies_extension.md#target-platforms).
Then, dependencies on required bundled modules and plugins must be defined in the <path>plugin.xml</path> file.
The necessary configuration for the corresponding product can be found under _Product Specific_ (for example, for [WebStorm](webstorm.md)).

See also [](plugin_compatibility.md).

## Gradle IntelliJ Plugin (1.x)
{id="gradle1"}

<primary-label ref="Obsolete"/>

<include from="tools_gradle_intellij_plugin.md" element-id="gradlePluginObsolete"/>

To create a new Gradle plugin project, follow the tutorial on the [](creating_plugin_project.md) page.
The tutorial produces a skeleton Gradle project suitable to use as a starting point.

The best practice is to use the [`intellij.type`](tools_gradle_intellij_plugin.md#intellij-extension-type) property to specify the target product.
For example, `PY` for PyCharm Professional.
Configuration using an `intellij.type` property is explained in the [](#using-a-product-specific-attribute) section below.

NOTE: Not all products have an `intellij.type` property defined by the [](tools_gradle_intellij_plugin.md), for example, [Android Studio](android_studio.md) and [PhpStorm](phpstorm.md).
Please see their respective pages for configuration and
[](#configuring-gradle-build-script-using-the-intellij-idea-product-attribute) below.

All the Gradle configuration attributes described here are discussed in-depth on the [](configuring_plugin_project.md) and the [](tools_gradle_intellij_plugin.md).

> To target multiple products (for example, IntelliJ IDEA and PyCharm) with the same plugin, see [](plugin_compatibility.md) page.
>
{style="note"}

### Using a Product-Specific Attribute

If the [](tools_gradle_intellij_plugin.md) supports a target product directly, there will be an [`intellij.type`](tools_gradle_intellij_plugin.md#intellij-extension-type) property defined.
Specifying the target as a product-specific `intellij.type` property has two advantages:

* The APIs available to the plugin will be limited to only what is defined in the target product
  (unless additional plugin dependencies are specified).
* The default [](ide_development_instance.md) for running the plugin will be the target product.

A Gradle build script snippet setting a plugin project to target [PyCharm](pycharm.md) is shown below.
The [](tools_gradle_intellij_plugin.md) will fetch the matching build of PyCharm Professional to define the APIs available, and use that build of PyCharm (and associated JetBrains Runtime) as the Development Instance.
No additional product-specific configuration needs to be set in the Gradle build script:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellij {
  type.set("PY")
  version.set("2019.2.3")
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellij {
  type = 'PY'
  version = '2019.2.3'
}
```

</tab>
</tabs>

### Using the IntelliJ IDEA Product Attribute

If the [](tools_gradle_intellij_plugin.md) does not directly support an IntelliJ Platform-based product, the Gradle build script can still be configured to target the desired product.
In this case, the build script is configured to use IntelliJ IDEA (Community or Ultimate Edition) as the basis for the available APIs.
This does have the drawback that APIs not specific to the target product might accidentally be included in the plugin project.
However, testing the plugin project in the target product itself helps to find such mistakes.

Additional configuration must be done to match the version of IntelliJ IDEA to the version of the target product.
Understanding the relationship between build numbers is critical when using this approach to project configuration:

* _targetIDE_ is the (version-specific) IntelliJ Platform-based IDE in which the plugin is intended to run, such as Android Studio or PhpStorm.
* _baseIntelliJPlatformVersion_ is the (version-specific) IntelliJ Platform used in the build of the _targetIDE_.
  The IntelliJ Platform is defined by a specific build of the IntelliJ IDEA Community Edition.
  The Gradle plugin attribute [`intellij.version`](configuring_plugin_project.md#intellij-platform-configuration) is set to be _baseIntelliJPlatformVersion_.

For API compatibility, the IntelliJ Platform version used in the _targetIDE_ dictates the _baseIntelliJPlatformVersion_ used for developing a plugin.

#### Matching Versions of the IntelliJ Platform with the Target IDE Version

The _baseIntelliJPlatformVersion_ used in the _targetIDE_ may not be readily apparent, depending on the product.
See the individual product pages in _Product Specific_ for exceptions.

To find the version of the IntelliJ Platform used to build the _targetIDE_, use the <control>About</control> dialog screen for the _targetIDE_.
Next to <control>Build #</control> is the *BRANCH.BUILD.FIX* version of the _targetIDE_.
In the example shown below, the *BRANCH.BUILD.FIX* version is `192.7142.41`, and the product version is `2019.2.4`.
The version of the IntelliJ Platform used to build this product version is *BRANCH.BUILD*, or `192.7142`

![Example PhpStorm Splash Screen](phpstorm_build.png){width="500"}

If the product version isn't clear on the <control>About</control> screen, consult the individual product pages in _Product Specific_.

The [Other IntelliJ IDEA Versions](https://www.jetbrains.com/idea/download/other.html) page is a way to find build numbers for every product version.
Additional ways include hovering over the version number for a product in [Toolbox App](https://www.jetbrains.com/toolbox-app/) or examining the <control>About</control> screen for IntelliJ IDEA Community.
In this example, IntelliJ IDEA Community Edition (which defines the IntelliJ Platform) for `2019.2.4` is build number `192.7142.36`.
Although the *FIX* versions are different, this is not uncommon between products, and the builds are still compatible.
The *BRANCH* and *BUILD* numbers match, therefore in this PhpStorm example:

* The _targetIDE_ is PhpStorm, build `192.7142.41`,
* The _baseIntelliJPlatformVersion_ (IntelliJ IDEA Community Edition) is build `192.7142.36`

This information is used to configure the plugin project's Gradle build script and <path>plugin.xml</path> file.

#### Configuring Gradle Build Script Using the IntelliJ IDEA Product Attribute

Configuring a Gradle plugin project for using _baseIntelliJPlatformVersion_ requires changing some default settings in the Gradle build script.
Changes need to be made in two places: [`intellij`](tools_gradle_intellij_plugin.md#configuration-intellij-extension) extension and [`runIde`](tools_gradle_intellij_plugin.md#tasks-runide) task.

The Gradle plugin attributes describing the configuration of the [IntelliJ Platform used to build the plugin project](configuring_plugin_project.md#intellij-platform-configuration) must be explicitly set in the `intellij` task.
The [`intellij.type`](tools_gradle_intellij_plugin.md#intellij-extension-type) is `IU` because although the IntelliJ IDEA Community Edition defines the IntelliJ Platform, the PHP plugin is only compatible with IntelliJ IDEA Ultimate.
The [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version) is _baseIntelliJPlatformVersion_.

Any [dependencies](configuring_plugin_project.md#plugin-dependencies) on _targetIDE_-specific plugins or modules must be declared in the [`intellij`](tools_gradle_intellij_plugin.md#configuration-intellij-extension) extension.
Use the Gradle plugin attribute [`intellij.plugins`](tools_gradle_intellij_plugin.md#intellij-extension-plugins) to declare a dependency.
See the specific product pages in _Product Specific_ for the _targetIDE_ plugin or module name.

The best practice is to modify the [`runIde`](tools_gradle_intellij_plugin.md#tasks-runide) task to use a local installation of _targetIDE_ as the [](ide_development_instance.md).
Set the [`runIde.ideDir`](tools_gradle_intellij_plugin.md#tasks-runide-idedir) attribute to the (user-specific) absolute path of the _targetIDE_ application.
The exact path format varies by operating system.

This snippet is an example for configuring the Setup and Running DSLs in a Gradle build script specific to developing a plugin for _targetIDE_.

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellij {
  // Define IntelliJ Platform against which to build the plugin project.
  type.set("IU")

  // Use the IntelliJ Platform BRANCH.BUILD version matching
  // "targetIDE" (PhpStorm):
  version.set("192.7142.36")   // baseIntelliJPlatformVersion

  // Require the targetIDE plugin or library. Use the stable version
  // compatible with intellij.version and intellij.type specified above:
  plugins.set(listOf("com.jetbrains.php:192.6603.42"))
}

runIde {
  // Absolute path to the installed targetIDE to use as IDE Development
  // Instance (the "Contents" directory is macOS specific):
  ideDir.set(file("/Users/$USERNAME$/Library/Application Support/JetBrains/Toolbox/apps/PhpStorm/ch-0/192.7142.41/PhpStorm.app/Contents"))
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellij {
  // Define IntelliJ Platform against which to build the plugin project.
  type = 'IU'

  // Use the IntelliJ Platform BRANCH.BUILD version matching
  // "targetIDE" (PhpStorm):
  version = '192.7142.36'      // baseIntelliJPlatformVersion

  // Require the targetIDE plugin or library. Use the stable version
  // compatible with intellij.version and intellij.type specified above:
  plugins = ['com.jetbrains.php:192.6603.42']
}

runIde {
  // Absolute path to the installed targetIDE to use as IDE Development
  // Instance (the "Contents" directory is macOS specific):
  ideDir = file('/Users/$USERNAME$/Library/Application Support/JetBrains/Toolbox/apps/PhpStorm/ch-0/192.7142.41/PhpStorm.app/Contents')
}
```

</tab>
</tabs>

### Configuring plugin.xml

As discussed on the [](plugin_compatibility.md#declaring-plugin-dependencies) page of this guide, a plugin's dependency on [](plugin_compatibility.md#modules-specific-to-functionality) must be declared in <path>plugin.xml</path>.
When using features (APIs) specific to the target product, a dependency on the target product module must be declared, as shown in the code snippet below.
Otherwise, if only general IntelliJ Platform features (APIs) are used, then a dependency on `com.intellij.modules.platform` must be declared as discussed in [](plugin_compatibility.md).

> In the particular case of a plugin project declaring dependencies only on other plugins, it must also declare a dependency on `com.intellij.modules.platform`.
> Otherwise, the plugin project is considered to be legacy and will only load in IntelliJ IDEA.
>
{style="note"}

Continuing with the example of developing a plugin for PhpStorm:

```xml
<!-- Targeting PhpStorm, so is dependent on the PHP plugin -->
<depends>com.jetbrains.php</depends>
<depends>com.intellij.modules.platform</depends>
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Developing a Plugin

<link-summary>Develop an IntelliJ Platform plugin using Gradle and Gradle IntelliJ Plugin.</link-summary>

IntelliJ Platform plugins can be developed by using either [IntelliJ IDEA Community Edition](https://www.jetbrains.com/idea/download/) or [IntelliJ IDEA Ultimate](https://www.jetbrains.com/idea/download/) as your IDE.
It is highly recommended to always use the latest available version, as the plugin development tooling support from _Plugin DevKit_ continues supporting new features.

Before starting with the actual development, make sure to understand all requirements to achieve best [](plugin_user_experience.md).

<include from="intellij_platform.md" element-id="pluginAlternatives"/>

## Gradle Plugin

The recommended solution for building IntelliJ Platform plugins is using [Gradle](https://www.gradle.org) with
a dedicated Gradle plugin:
[](tools_intellij_platform_gradle_plugin.md) or
[](tools_gradle_intellij_plugin.md).

<include from="snippets.md" element-id="gradlePluginVersion"/>

The IntelliJ IDEA Ultimate and Community editions provide the necessary plugins to support Gradle-based plugin development: _Gradle_ and _Plugin DevKit_.
To verify these plugins are installed and enabled, see the help section about [Managing Plugins](https://www.jetbrains.com/help/idea/managing-plugins.html).

<include from="snippets.md" element-id="pluginDevKitAvailability"/>

The Gradle plugin manages the dependencies of a plugin project – both the base IDE and other [plugin dependencies](plugin_dependencies.md).
It provides tasks to run the IDE with your plugin and to package and [publish](publishing_plugin.md#publishing-plugin-with-gradle) your plugin to the [JetBrains Marketplace](https://plugins.jetbrains.com).
To make sure that a plugin is not affected by [API changes](api_changes_list.md), which may happen between major releases of the platform, you can quickly verify your plugin against other IDEs and releases.

There are two main ways of creating a new Gradle-based IntelliJ Platform plugin project:
- dedicated generator available in the [New Project Wizard](https://www.jetbrains.com/help/idea/new-project-wizard.html) – it creates a minimal plugin project with all the required files
- [](plugin_github_template.md) available on GitHub – in addition to the required project files, it includes configuration of the GitHub Actions CI workflows

This documentation section describes the plugin structure generated with the <control>New Project</control> wizard, but the project generated with _IntelliJ Platform Plugin Template_ covers all the described files and directories.
See [](plugin_github_template.md) for more information about the advantages of this approach and instructions on how to use it.

### Alternatives

The old DevKit project model and workflow are still supported in existing projects and are recommended for [creating theme plugins](developing_themes.md).
See how to [migrate a DevKit plugin to Gradle](migrating_plugin_devkit_to_gradle.md).

A dedicated [SBT plugin](https://github.com/JetBrains/sbt-idea-plugin) is available for plugins implemented in Scala.

## Plugin Development Workflow

* [](creating_plugin_project.md)
  * [](plugin_github_template.md)
* [](configuring_plugin_project.md)
* [](using_kotlin.md)
* [](plugin_signing.md)
* [](publishing_plugin.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Developing a Theme

<link-summary>Develop an IntelliJ Platform-based IDE theme using Plugin DevKit.</link-summary>

This documentation section will help you get started with developing theme plugins for the IntelliJ Platform-based IDEs.

The DevKit-based theme development workflow includes:

* [Setting Up a Development Environment](setting_up_theme_environment.md)
* [Creating a Theme Project](creating_theme_project.md)
* [Customizing a Theme](themes_customize.md)
* [Building and Running a Theme](running_and_debugging_a_theme.md)
* [Deploying a Theme in IDE](deploying_theme.md)
* [Uploading a Theme to JetBrains Marketplace](publishing_plugin.md#uploading-a-plugin-to-jetbrains-marketplace)

<snippet id="themeSamplePlugin">

> To see a full example theme project, see the [Theme Basics](%gh-sdk-samples-master%/theme_basics) in IntelliJ SDK Code Samples.
>
{title="Theme Plugin Sample" style="note"}

</snippet>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<link-summary>Creating, showing, and getting the input provided by users in dialogs.</link-summary>

# Dialogs

<tldr>

**UI Guidelines:** [](layout.md), [](validation_errors.md)

</tldr>

## `DialogWrapper`

The [`DialogWrapper`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/DialogWrapper.java) is the base class which is supposed to be used for all modal dialogs (and some non-modal dialogs) shown in IntelliJ Platform.

It provides the following features:

* Button layout (platform-specific order of <control>OK</control>/<control>Cancel</control> buttons, macOS-specific <control>Help</control> button)
* Context help
* Remembering the size of the dialog
* Non-modal validation (displaying an error message text when the data entered into the dialog is not valid)
* Keyboard shortcuts:
  * <shortcut>Esc</shortcut> for closing the dialog
  * <shortcut>Left/Right</shortcut> for switching between buttons
  * <shortcut>Y</shortcut>/<shortcut>N</shortcut> for <control>Yes</control>/<control>No</control> actions if they exist in the dialog
* Optional <control>Do not ask again</control> checkbox

> There's also a DSL-like API via [`DialogBuilder`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/DialogBuilder.java).

### Usage

When using the [`DialogWrapper`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/DialogWrapper.java) class for a dialog, follow these required steps:

* Call the base class constructor and provide either a `Project` in the frame of which the dialog will be displayed, or a parent component for the dialog.
* Call the `setTitle()` method to set the title for the dialog
* Call the `init()` method from the constructor of the dialog class
* Implement the `createCenterPanel()` method to return the component comprising the main contents of the dialog.

Optionally:

* Override the `getPreferredFocusedComponent()` method and return the component that should be focused when the dialog is first displayed.
* Override the `getDimensionServiceKey()` method to return the identifier which will be used for persisting the dialog dimensions.
* Override the `getHelpId()` method to return the context help topic associated with the dialog (see [Context Help](ide_infrastructure.md#context-help)).

#### Dialog Content

Use [Kotlin UI DSL](kotlin_ui_dsl_version_2.md) to provide the dialog's contents (see [samples](#kotlin)).
Alternatively or when using Java, the `DialogWrapper` class can be used together with [GUI Designer forms](https://www.jetbrains.com/help/idea/gui-designer-basics.html).
In this case, bind a GUI Designer form to the class extending `DialogWrapper`, bind the top-level panel of the form to a field and return that field from the `createCenterPanel()` method.

> See [](layout.md) topic in UI Guidelines for recommendations on arranging UI controls in dialogs.
>
> Existing dialogs can be inspected at runtime using [UI Inspector](internal_ui_inspector.md), for example, to locate the underlying implementation of UI components.
>

#### Displaying the Dialog

To display the dialog, call the `show()` method and then use the `getExitCode()` method to check how the dialog was closed (see `DialogWrapper#OK_EXIT_CODE, CANCEL_EXIT_CODE, CLOSE_EXIT_CODE`).
The `showAndGet()` method can be used to combine these two calls.

#### Customizing Buttons

To customize the buttons displayed in the dialog (replacing the standard <control>OK</control>/<control>Cancel</control>/<control>Help</control> set of buttons), override either the `createActions()` or `createLeftActions()` methods.
Both of these methods return an array of Swing Action objects.
If a button closes the dialog, use [`DialogWrapperExitAction`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/DialogWrapper.java) as the base class for the action.

Use `action.putValue(DialogWrapper.DEFAULT_ACTION, true)` to set the default button and
`action.putValue(DialogWrapper.FOCUSED_ACTION, true)` to set the focused button.

### Input Validation

See also [](validation_errors.md) topic in UI Guidelines.

To validate the data entered into the dialog, override the `doValidate()` method.
The method will be called automatically by timer.
If the currently entered data is valid, return `null`.
Otherwise, return a [`ValidationInfo`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/ui/ValidationInfo.java) object which encapsulates an error message, and an optional component associated with the invalid data.
When specifying a component, an error icon will be displayed next to it, and it will be focused when the user tries to invoke the <control>OK</control> action.

## Examples

Minimum sample of a [`DialogWrapper`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/DialogWrapper.java):

```java
public class SampleDialogWrapper extends DialogWrapper {

  public SampleDialogWrapper() {
    super(true); // use current window as parent
    setTitle("Test DialogWrapper");
    init();
  }

  @Nullable
  @Override
  protected JComponent createCenterPanel() {
    JPanel dialogPanel = new JPanel(new BorderLayout());

    JLabel label = new JLabel("Testing");
    label.setPreferredSize(new Dimension(100, 100));
    dialogPanel.add(label, BorderLayout.CENTER);

    return dialogPanel;
  }
}
```

Show `SampleDialogWrapper` dialog when user clicks on button:

```java
JButton testButton = new JButton();
testButton.addActionListener(actionEvent -> {
  if (new SampleDialogWrapper().showAndGet()) {
    // user pressed OK
  }
});
```

### Kotlin

Dialogs using [Kotlin UI DSL](kotlin_ui_dsl_version_2.md):

- [`AddActionDialog`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/ui/customization/AddActionDialog.kt)
- [`InvalidateCachesDialog`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/actions/InvalidateCachesDialog.kt)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Disposer and Disposable

<link-summary>Cleaning up resources on plugin components' lifetime expiration.</link-summary>

The IntelliJ Platform's [`Disposer`](%gh-ic%/platform/util/src/com/intellij/openapi/util/Disposer.java) facilitates resource cleanup.
If a subsystem keeps a set of resources alive coincident with a parent object's lifetime, the subsystem's resources should be registered with the `Disposer` to be released before or at the same time as the parent object.

The most common resource type managed by `Disposer` is listeners, but there are other possible types:
* File handles, and database connections,
* Caches and other significant data structures.

The `Disposer` is a singleton that manages a tree of [`Disposable`](%gh-ic%/platform/util/src/com/intellij/openapi/Disposable.java) instances.
A `Disposable` is an interface for any object providing a `Disposable.dispose()` method to release heavyweight resources after a specific lifetime.

The `Disposer` supports chaining `Disposable` objects in parent-child relationships.

## Automatically Disposed Objects

Many objects are disposed automatically by the platform if they implement the `Disposable` interface.
The most important type of such objects is [services](plugin_services.md).
Application-level services are automatically disposed by the platform when the IDE is closed or the plugin providing the service is unloaded.
Project-level services are disposed on project close or plugin unload events.

Note that extensions registered in <path>[plugin.xml](plugin_configuration_file.md)</path> are *not* automatically disposed.
If an extension requires executing some code to dispose it, you need to define a service and to put the code in its `dispose()` method or use it as a parent disposable.

## The `Disposer` Singleton
The primary purpose of the [`Disposer`](%gh-ic%/platform/util/src/com/intellij/openapi/util/Disposer.java) singleton is to enforce the rule that _a child `Disposable` never outlives its parent_.

The `Disposer` organizes `Disposable` objects in a tree of parent-child relationships.
The tree of `Disposable` objects ensures the `Disposer` releases children of a parent first.
Parent objects always live longer than their children.

The following diagram shows a simplified example of `Disposer`'s tree:

```plantuml
@startuml

skinparam DefaultFontName JetBrains Sans
skinparam DefaultFontSize 13
skinparam DefaultTextAlignment center
hide empty members
hide circle

rectangle "Root\nDisposable" as root

rectangle "Application" as application
rectangle "App\nListener" as listener
rectangle "Dialog\nWrapper" as dialogDisposable
rectangle "Dialog\nResource" as dialogResource

rectangle "Services of\nApplication" as applicationServices
rectangle "App\nService 1" as appService1
rectangle "App\nService 2" as appService2

rectangle "My\nProject" as project
rectangle "My\nListener" as projectListener
rectangle "My\nAlarm" as projectAlarm

rectangle "Services of\nMy Project" as projectServices
rectangle "Project\nService A" as projectService1
rectangle "Project\nService B" as projectService2

root -- application
root -- applicationServices
root -- project
root -- projectServices

application -- listener
application -- dialogDisposable
dialogDisposable -- dialogResource

applicationServices -- appService1
applicationServices -- appService2

project -- projectListener
project -- projectAlarm

projectServices -- projectService1
projectServices -- projectService2

@enduml
```

When _My Project_ is closed and its disposal is triggered by the platform, the Disposer API will dispose _My Listener_ and _My Alarm_ before _My Project_, and _Project Service A_ and _Project Service B_ before _Services of My Project_.

See [The Disposable Interface](#implementing-the-disposable-interface) for more information about creating `Disposable` classes.

Registering a disposable is performed by calling `Disposer.register()`:

```java
Disposer.register(parentDisposable, childDisposable);
```

### Choosing a Disposable Parent

To register a child `Disposable`, a parent `Disposable` of a suitable lifetime is used to establish the parent-child relationship.
One of the parent `Disposables` provided by the IntelliJ Platform can be chosen, or it can be another `Disposable`.

Use the following guidelines to choose the correct parent:

* For resources required for a plugin's entire lifetime, use an application or project level [service](plugin_services.md). Example: [`PythonPluginDisposable`](%gh-ic%/python/openapi/src/com/jetbrains/python/PythonPluginDisposable.java).
* For resources required while a [dialog](dialog_wrapper.md) is displayed, use `DialogWrapper.getDisposable()`.
* For resources required while a [tool window](tool_windows.md) tab is displayed, pass your instance implementing `Disposable` to `Content.setDisposer()`.
* For resources with a shorter lifetime, create a disposable using `Disposer.newDisposable()` and dispose it manually using `Disposable.dispose()`.
  Note that it's always best to specify a parent for such a disposable (for example, a project-level service), so that there is no memory leak if the `Disposable.dispose()` call is not reached because of an exception or a programming error.

> Even though `Application` and `Project` implement `Disposable`, they must **never** be used as parent disposables in plugin code.
> Disposables registered using those objects as parents will not be disposed when the plugin is unloaded, leading to memory leaks.
>
> Consider a case of a disposable resource created by a plugin and registered with a project as its parent.
> The following lifetime diagram shows that the resource will outlive the plugin and live as long as the project.
> ```mermaid
> %%{init: {'theme': 'base', 'themeVariables': { 'primaryBorderColor': 'green', 'background': 'yellow'}}}%%
> gantt
>     dateFormat X
>     %% do not remove trailing space in axisFormat
>     axisFormat ‎
>     section Lifetimes
>         Project         : 0, 10
>         Plugin          : 2, 5
>         Plugin Resource : crit, 3, 10
> ```
>
> If the resource used, for example, a plugin's project-level service (if shorter living parents are possible, prefer them), the resource would be disposed together with the plugin:
> ```mermaid
> gantt
>     dateFormat X
>     %% do not remove trailing space in axisFormat
>     axisFormat ‎
>     section Lifetimes
>         Project         : 0, 10
>         Plugin          : 2, 5
>         Plugin Resource : 3, 5
> ```
>
> Inspection <control>Plugin DevKit | Code | Incorrect parentDisposable parameter</control> will highlight such problems.
>
{style="warning" title="Plugin disposable leaks"}

The `Disposer` API flexibility means that if the parent instance is chosen unwisely, the child may consume resources for longer than required.
Continuing to use resources when they are no longer needed can be a severe source of contention due to leaving some zombie objects behind due to each invocation.
An additional challenge is that these kinds of issues won't be reported by the regular leak checker utilities, because technically, it's not a memory leak from the test suite perspective.

For example, suppose a UI component created for a specific operation uses a project-level service as a parent disposable.
In that case, the entire component will remain in memory after the operation is complete.
This creates memory pressure and can waste CPU cycles on processing events that are no longer relevant.

### Registering Listeners with Parent Disposable

Many IntelliJ Platform APIs for registering listeners either require passing a parent disposable or have overloads that take a parent disposable, for example:

```java
public interface PomModel {
  // ...
  void addModelListener(PomModelListener listener);
  void addModelListener(PomModelListener listener, Disposable parentDisposable);
  void removeModelListener(PomModelListener listener);
}
```

Methods with a `parentDisposable` parameter automatically unsubscribe the listener when the corresponding parent disposable is disposed.
Using such methods is always preferable to removing listeners explicitly from the `dispose` method because it requires less code and is easier to verify for correctness.

The same rules apply to [message bus](messaging_infrastructure.md) connections.

Always pass a parent disposable to `MessageBus.connect(parentDisposable)`, and make sure it has the shortest possible lifetime.
To choose the correct parent disposable, use the guidelines from the [previous section](#choosing-a-disposable-parent).

### Determining Disposal Status
You can use `Disposer.isDisposed()` to check whether a `Disposable` has already been disposed.
This check is useful, for example, for an asynchronous callback to a `Disposable` that may be disposed before the callback is executed.
In such a case, the best strategy is usually to do nothing and return early.

> Non-disposed objects shouldn't hold onto references to disposed objects, as this constitutes a memory leak.
> Once a `Disposable` is released, it should be completely inactive, and there's no reason to refer to it anymore.
>
{style="warning"}

### Ending a Disposable Lifecycle
A plugin can manually end a `Disposable` lifecycle by calling `Disposer.dispose(Disposable)`.
This method handles recursively disposing of all the `Disposable` child descendants as well.

## Implementing the `Disposable` Interface

Creating a class requires implementing the `Disposable` interface and defining the `dispose()` method.

In many cases, when the object implements `Disposable` only to be used as a parent disposable, the method's implementation will be completely empty.

An example of a non-trivial `dispose` implementation is shown below:

```java
public class Foo<T> extends JBFoo implements Disposable {

  public Foo(@NotNull Project project,
             @NotNull String name,
             @Nullable FileEditor fileEditor,
             @NotNull Disposable parentDisposable) {
    this(project, name, fileEditor, InitParams.createParams(project),
        DetachedToolWindowManager.getInstance(project));
    Disposer.register(parentDisposable, this);
  }

  @Override
  public void dispose() {
    myFooManager.unregister(this);
    myDetachedToolWindowManager.unregister(myFileEditor);
    KeyboardFocusManager.getCurrentKeyboardFocusManager()
        .removePropertyChangeListener("focusOwner", myMyPropertyChangeListener);
    setToolContext(null);
  }
}
```

A lot of code setting up all the conditions requiring release in `dispose()` has been omitted for simplicity.

Regardless, it illustrates the basic pattern, which is:
* In this case, the parent disposable is passed into the constructor,
* The `Foo` disposable is registered as a child of `parentDisposable` in the constructor.
* The `dispose()` method consolidates the necessary release actions and will be called by the `Disposer`.

> Never call `Disposable.dispose()` directly because it bypasses the parent-child relationships established in `Disposer`.
> Always call `Disposer.dispose(Disposable)` instead.
>
{style="warning"}

## Diagnosing `Disposer` Leaks

When the application exits, it performs a final sanity check to verify everything was disposed.
If something was registered with the `Disposer` but remains undisposed, the IntelliJ Platform reports it before shutting down.

In test, [internal](enabling_internal.md), and debug mode (add `idea.disposer.debug=on` in <ui-path>Help | Edit Custom Properties...</ui-path>), registering a `Disposable` with the `Disposer` also registers a stack trace for the object's allocation path.
The `Disposer` accomplishes this by creating a `Throwable` at the time of registration.

The following snippet represents the sort of "memory leak detected" error encountered in practice:

```text
    java.lang.RuntimeException:
    Memory leak detected: <instance> of class com.example.ClassType
    See the cause for the corresponding Disposer.register() stacktrace:
        at ObjectTree.assertIsEmpty(ObjectTree.java:209)
        at Disposer.assertIsEmpty(Disposer.java:125)
        at Disposer.assertIsEmpty(Disposer.java:121)
        at ApplicationImpl.disposeSelf(ApplicationImpl.java:323)
        at ApplicationImpl.doExit(ApplicationImpl.java:780)
        …
    Caused by: java.lang.Throwable
        at ObjectTree.getOrCreateNodeFor(ObjectTree.java:101)
        at ObjectTree.register(ObjectTree.java:62)
        at Disposer.register(Disposer.java:81)
        at Disposer.register(Disposer.java:75)
        …
        at ProjectManagerEx.createProject(ProjectManagerEx.java:69)
        at NewProjectWizardDynamic.doFinish(NewProjectWizardDynamic.java:235)
        at DynamicWizard$1.run(DynamicWizard.java:433)
        at CoreProgressManager$5.run(CoreProgressManager.java:237)
        at CoreProgressManager$TaskRunnable.run(CoreProgressManager.java:563)
        …
```

> The first part of the callstack is unrelated to diagnosing the memory leak.
> Instead, pay attention to the second part of the call stack, after `Caused by: java.lang.Throwable`.
>

In this specific case, the IntelliJ Platform ([`CoreProgressManager`](%gh-ic%/platform/core-impl/src/com/intellij/openapi/progress/impl/CoreProgressManager.java)) started a task that contained the `DynamicWizard` code.
In turn, that code allocated a `Project` that was never disposed by the time the application exited.
That is a promising place to start digging.

The above memory leak was ultimately caused by failing to pass a `Project` instance to a function responsible for registering it for disposal.
Often the fix for a memory leak is as simple as understanding the memory scope of the object being allocated - usually a UI container, project, or application - and making sure a `Disposer.register()` call is made appropriately for it.
<!-- Copyright 2000-2025 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Documentation

<link-summary>Providing code documentation displayed in the popup invoked by hovering over a symbol or invoking the "View | Quick Documentation" action.</link-summary>

<tldr>

**Product Help:** [Quick Documentation](https://www.jetbrains.com/help/idea/viewing-reference-information.html#inline-quick-documentation)

</tldr>

Custom languages can display documentation for various constructs, such as functions, methods, classes, or others, directly within the IDE.
To access the documentation, users can either select <ui-path>View | Quick Documentation</ui-path> or hover over a symbol.
This will open a popup that displays type information, parameters, usage descriptions, or examples.
The source of the documentation content can vary.
While it is often extracted from comments in the source code (e.g., Javadoc comments),
external resources, such as web pages, can also be accessed.

From IntelliJ Platform version 2023.1 onwards, plugin developers can choose to implement
one of three extension points (EPs) from the new Documentation Target API based on the specific use-case.
These EPs enable building documentation from
[offsets in the current editor](coordinates_system.md#editor-coordinate-systems),
[PSI elements](psi_elements.md), or [Symbols](symbols.md).
Detailed information on implementing these EPs can be found in the [](#documentation-target-api) section.

> Plugins targeting versions earlier than 2023.1 must use the [Documentation Provider API](#documentation-provider-api).
> Note that as long as the transition to the new API is
> not complete, the [custom language tutorial](documentation_provider.md) will continue using `DocumentationProvider`.
>
{title="Targeting IDEs before 2023.1" style="note"}

## Documentation Target API
<primary-label ref="2023.1"/>

Custom language developers have the flexibility to select from three distinct EPs for providing documentation to their users.
To ensure clarity and avoid confusion, we provide a high-level summary of the overall approach,
outlining the primary components and their interactions.

<procedure title="Overall Approach">

1. Implement one of the EPs below which should extract the necessary entity (e.g. a PSI element) for
   which the documentation is requested. It returns instances of
   [`DocumentationTarget`](%gh-ic%/platform/lang-impl/src/com/intellij/platform/backend/documentation/DocumentationTarget.kt),
   which will be explained in a later section.
2. The implementation of `DocumentationTarget` provides the functionality to compute the rendered documentation,
   its presentation in the [documentation tool window](https://www.jetbrains.com/help/idea/documentation-tool-window.html),
   or separate hints that are displayed when hovering over code.
3. The rendered documentation is an instance of
   [`DocumentationResult`](%gh-ic%/platform/lang-impl/src/com/intellij/platform/backend/documentation/DocumentationResult.kt),
   which wraps the documentation in HTML format but can also include images or external URLs.
   `DocumentationResult` can be used asynchronously when building the documentation would take too long
   and block the IDE.

</procedure>

{style="full"}
`DocumentationTargetProvider`
: Implement
[`DocumentationTargetProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/platform/backend/documentation/DocumentationTargetProvider.java)
and register it as `com.intellij.platform.backend.documentation.targetProvider` extension point to build documentation
for a certain offset in a `PsiFile` by overriding `documentationTargets()`.

`PsiDocumentationTargetProvider`
: Implement
[`PsiDocumentationTargetProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/platform/backend/documentation/PsiDocumentationTargetProvider.java)
and register it as `com.intellij.platform.backend.documentation.psiTargetProvider` extension point to build documentation
for PSI elements by overriding `documentationTarget()`.

`SymbolDocumentationTargetProvider`
: Implement
[`SymbolDocumentationTargetProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/platform/backend/documentation/SymbolDocumentationTargetProvider.java)
and register it as `com.intellij.platform.backend.documentation.symbolTargetProvider` extension point to build documentation
for [](symbols.md) by overriding `documentationTarget()`.

### `DocumentationTarget`

Each of the implementations above returns instances of
[`DocumentationTarget`](%gh-ic%/platform/lang-impl/src/com/intellij/platform/backend/documentation/DocumentationTarget.kt).
The main work is done in `computeDocumentation()` where the documentation is built from the available
information.
If a plugin implemented the now deprecated
[`DocumentationProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/documentation/DocumentationProvider.java)
before, then `computeDocumentation()` should do the work that was formerly done in
`DocumentationProvider.generateDoc()`.

In addition to showing the documentation, the `computeDocumentationHint()` method returns the text to be displayed
when the user hovers over an element with <shortcut>Ctrl</shortcut>/<shortcut>Cmd</shortcut> pressed or when
<ui-path>Settings | Editor | Code Editing | Show quick documentation on hover</ui-path> is enabled.
In the old API, this method was called `DocumentationProvider.getQuickNavigateInfo()`.

The `createPointer()` method manages instance restoration and ensures access to the entity across different read actions.
When implementing the `createPointer()` method, it is essential to handle invalidated PSI elements.
Unlike PSI elements, the `DocumentationTarget` API does not include an `isValid()` method and the returned pointer is expected
to be `null` if the instance (and all contained objects) cannot be restored.
See
[`KotlinDocumentationTarget.createPointer()`](%gh-ic%/plugins/kotlin/code-insight/kotlin.code-insight.k2/src/org/jetbrains/kotlin/idea/k2/codeinsight/quickDoc/KotlinDocumentationTarget.kt)
as a reference.

### Examples
{#documentationtarget-api-examples}

- [`KotlinPsiDocumentationTargetProvider`](%gh-ic%/plugins/kotlin/code-insight/kotlin.code-insight.k2/src/org/jetbrains/kotlin/idea/k2/codeinsight/quickDoc/KotlinPsiDocumentationTargetProvider.kt)
- [`KotlinDocumentationTarget`](%gh-ic%/plugins/kotlin/code-insight/kotlin.code-insight.k2/src/org/jetbrains/kotlin/idea/k2/codeinsight/quickDoc/KotlinDocumentationTarget.kt)
- [`PsiElementDocumentationTarget`](%gh-ic%/platform/lang-impl/src/com/intellij/lang/documentation/psi/PsiElementDocumentationTarget.kt)

## Documentation Provider API

> As of IntelliJ Platform version 2023.1, the Documentation Provider API is deprecated and plugin
> authors should use the [](#documentation-target-api) instead.
>
{title="Deprecation Notice" style="note"}

Custom language developers usually extend from
[`AbstractDocumentationProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/documentation/AbstractDocumentationProvider.java)
instead of implementing the
[`DocumentationProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/documentation/DocumentationProvider.java) interface.
This implementation needs to be registered in `com.intellij.lang.documentationProvider` extension point.

The main work is done in `generateDoc()`, which has two PSI element arguments:
the target element for which the documentation is requested and the original element under the cursor.
If IntelliJ Platform's choice of the target element isn't suitable for your language, you can override `getCustomDocumentationElement()`
and provide the correct element.

Once these steps are completed, the following additional features can be implemented:

* Implement `getQuickNavigateInfo()` to provide the text that should be displayed when an element is hovered over with <shortcut>Ctrl</shortcut>/<shortcut>Cmd</shortcut> pressed.
* Implement `generateHoverDoc()` to show different contents on mouse hover.
* Implement `getDocumentationElementForLookupItem()` to return a suitable PSI element for the given lookup element when
  <ui-path>View | Quick Documentation</ui-path> is called on an element of the autocompletion popup.
* Implement `getUrlFor()` and [`ExternalDocumentationProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/documentation/ExternalDocumentationProvider.java) to fetch documentation for elements from online resources.

### Examples
{#documentationprovider-api-examples}

The [custom language tutorial](documentation_provider.md) contains a step-by-step guide for the `DocumentationProvider` of the Simple language.
In addition, several implementations of other languages exist in the IntelliJ Platform code, for instance:

* The [Properties Language plugin](%gh-ic%/plugins/properties) has a small and easy-to-understand [`DocumentationProvider`](%gh-ic%/plugins/properties/src/com/intellij/lang/properties/PropertiesDocumentationProvider.java) similar to the one shown in the custom language tutorial.
* Usage examples for `DocumentationMarkup` can be found in [`ThemeJsonDocumentationProvider`](%gh-ic%/plugins/devkit/intellij.devkit.themes/src/ThemeJsonDocumentationProvider.java).

## Further tips

Additionally, custom actions can be incorporated into documentation inlays and popups using the
[`DocumentationActionProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/documentation/DocumentationActionProvider.java).
This provider should be registered with the `com.intellij.documentationActionProvider` extension point.

How the documentation for the target element is created is up to the custom language developer.
A common choice is to extract and format documentation comments.
To format the documentation contents, you should use
[`DocumentationMarkup`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/documentation/DocumentationMarkup.java)
to achieve a consistent output.

> Use [`HtmlSyntaxInfoUtil`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/editor/richcopy/HtmlSyntaxInfoUtil.java) to create Lexer-based highlighted code samples.
>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 20. Documentation

<link-summary>Sample implementation of documentation provider showing definitions of the Simple language properties.</link-summary>

<tldr>

**Reference**: [](documentation.md)

**Code**: [`SimpleDocumentationProvider`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleDocumentationProvider.java),
[`SimpleUtil`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleUtil.java)

**Testing**: [](documentation_test.md)

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

> For plugins targeting IntelliJ Platform version 2023.1 or later, it is recommended to use the
> [](documentation.md#documentation-target-api).
>
{style="note"}

A [`DocumentationProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/documentation/DocumentationProvider.java)
helps users by showing documentation for symbols like method calls inside the editor.
For the custom language tutorial, we're implementing a version of this extension point (EP) for the Simple Language that shows the key/value,
the file where it is defined, and any related documentation comment.

## Implement a Documentation Provider and Register the EP

In the first step, we create an empty class that extends
[`AbstractDocumentationProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/documentation/AbstractDocumentationProvider.java)
and register it in the <path>[plugin.xml](plugin_configuration_file.md)</path>.

```java
final class SimpleDocumentationProvider extends AbstractDocumentationProvider { }
```

Make sure the extension is registered in the <path>plugin.xml</path> as shown below:

```xml
<extensions defaultExtensionNs="com.intellij">
  <!-- Other extensions… -->
  <lang.documentationProvider
      language="Simple"
      implementationClass="org.intellij.sdk.language.SimpleDocumentationProvider"/>
</extensions>
```

## Ensure That the Correct PSI Element Is Used

For the Simple Language, we consider two use-cases:

1. A Simple key is [used inside a Java string literal](reference_contributor.md),
   and we would like to show documentation for the key/value right from the reference inside the Java file.
2. The cursor is already over a key/value definition inside a Simple file, in which case we would also like to show its documentation.

To ensure that the IntelliJ Platform chooses the correct element of type `SimpleProperty` when <ui-path>View | Quick Documentation</ui-path> is called,
we create a dummy implementation of `generateDoc()`:

```java
@Override
public @Nullable String generateDoc(PsiElement element,
                                    @Nullable PsiElement originalElement) {
  return super.generateDoc(element, originalElement);
}
```

Now, we set a breakpoint in our dummy implementation, debug the plugin, and call <ui-path>View | Quick Documentation</ui-path>
for the Simple property both in the Java file and the Simple file.
We do this by placing the cursor over the key and invoking <ui-path>View | Quick Documentation</ui-path> to show the documentation.

In both cases, we find that the element provided is `SimplePropertyImpl`, which is exactly what we hoped for.
However, there are two drawbacks: inside a Java string, your cursor needs to be directly over `key` in the string `"simple:key"` to make <emphasis>Quick Documentation</emphasis> work.
Since the Simple Language only allows for one property per string,
it would be nice if <emphasis>Quick Documentation</emphasis> worked no matter where your cursor was positioned in the string as long as the string contained a Simple property.
Inside a Simple file, the situation is similar, and calling <ui-path>View | Quick Documentation</ui-path> only works when the cursor is positioned on the key.

Refer to the [Addendum](#addendum) below, which explains how to improve on this situation by additionally overriding `getCustomDocumentationElement()` method.

## Extract Documentation Comments from Key/Value Definitions

While `SimpleProperty` elements will provide us with their key and value, we have no direct access to a possible comment that is preceding the key/value definition.
Since we would like to show this comment in the documentation as well, we need a small helper function that extracts the text from the comment.
This function will reside in the `SimpleUtil` class and will find, for instance, the comment preceding `apikey` in the following short example:

```properties
# An application programming interface key (API key) is a unique
# identifier used to authenticate a user, developer, or calling
# program to an API.
apikey=ph342m91337h4xX0r5k!11Zz!
```

The following implementation will check if there is any comment preceding a `SimpleProperty`, and if there is,
it will collect all comment lines until it reaches either the previous key/value definition or the beginning of the file.
One caveat is that since we're collecting the comment lines backwards, we need to reverse the list before joining them into a single string.
A simple regex is used to remove the leading hash characters and whitespaces from each line.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleUtil.java" include-symbol="findDocumentationComment"}


## Render the Documentation

With easy ways to access the key, the value, the file, and a possible documentation comment,
we now have everything in place to provide a useful implementation of `generateDoc()`.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleDocumentationProvider.java" include-symbol="generateDoc"}


The creation of the rendered documentation is done in a separate method for clarity.
It uses `DocumentationMarkup` to align and format the contents.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleDocumentationProvider.java" include-symbol="renderFullDoc"}


The `addKeyValueSection()` method used is just a small helper function to reduce repetition.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleDocumentationProvider.java" include-symbol="addKeyValueSection"}


After implementing all the steps above, the IDE will show the rendered documentation for a Simple key when called with <ui-path>View | Quick Documentation</ui-path>.


## Implement Additional Functionality

We can provide implementations for additional functionality that comes with a `DocumentationProvider`.
For instance, when simply hovering the mouse over the code, it also shows documentation after a short delay.
It's not necessary that this popup shows the exact same information as when calling _Quick Documentation_, but for the purpose of this tutorial, we'll do just that.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleDocumentationProvider.java" include-symbol="generateHoverDoc"}


When the mouse hovers over code with <shortcut>Ctrl</shortcut>/<shortcut>Cmd</shortcut> pressed, the IDE shows navigation information of the symbol under the cursor,
such as its namespace or package.
The implementation below will show the Simple key and the file where it is defined.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleDocumentationProvider.java" include-symbol="getQuickNavigateInfo"}


Finally, <ui-path>View | Quick Documentation</ui-path> can also be called from a selected entry within the autocompletion popup.
In that case, language developers need to ensure that the correct PSI element for generating the documentation is provided.
In the case of Simple Language, the lookup element is already a `SimpleProperty` and no additional work needs to be done.
In other circumstances, you can override `getDocumentationElementForLookupItem() `and return the correct PSI element.

## Addendum: Choosing a Better Target Element
{id="addendum"}

To be able to call <ui-path>View | Quick Documentation</ui-path> for Simple properties in all places of a Java string literal, two steps are required:

1. The extension point needs to be changed from `lang.documentationProvider` to `documentationProvider` because only then
   the Simple DocumentationProvider is called for PSI elements with a different language.
2. The `getCustomDocumentationElement()` method needs to be implemented to find the correct target PSI element for creating the documentation.

Therefore, the current version of the code could be extended to check whether <ui-path>View | Quick Documentation</ui-path> was called from inside a Java string or a Simple file.
It then uses PSI and `PsiReference` functionalities to determine the correct target element.
This allows getting documentation for a Simple property no matter where it was called inside a Java string literal or a Simple property definition.

```java
@Override
public @Nullable PsiElement getCustomDocumentationElement(@NotNull Editor editor,
                                                          @NotNull PsiFile file,
                                                          @Nullable PsiElement context,
                                                          int targetOffset) {
  if (context != null) {
    // In this part the SimpleProperty element
    // is extracted from inside a Java string
    if (context instanceof PsiJavaToken &&
        ((PsiJavaToken) context).getTokenType().equals(JavaTokenType.STRING_LITERAL)) {
      PsiElement parent = context.getParent();
      PsiReference[] references = parent.getReferences();
      for (PsiReference ref : references) {
        if (ref instanceof SimpleReference) {
          PsiElement property = ref.resolve();
          if (property instanceof SimpleProperty) {
            return property;
          }
        }
      }
    }
    // In this part the SimpleProperty element is extracted
    // when inside of a .simple file
    else if (context.getLanguage() == SimpleLanguage.INSTANCE) {
      PsiElement property =
        PsiTreeUtil.getParentOfType(context, SimpleProperty.class);
      if (property != null) {
        return property;
      }
    }
  }
  return super.getCustomDocumentationElement(
      editor, file, context, targetOffset);
}
```
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 11. Documentation Test

<link-summary>Implementing and running test for documentation provider implemented as a part of the Custom Language Support Tutorial.</link-summary>

<tldr>

**Tested Functionality**: [](documentation_provider.md)

</tldr>

<include from="tests_prerequisites.md" element-id="custom_language_testing_tutorial_header"></include>

## Define a Test Method
Add the `testDocumentation()` method to the `SimpleCodeInsightTest` class [previously defined](completion_test.md#define-a-test).
This test uses the files <path>DocumentationTestData.java</path> and <path>DocumentationTestData.simple</path> from the <path>testData</path> directory
to construct a test project and opens the first one in the editor with the virtual caret positioned at the usage of the Simple Language property.

Using the `DocumentationManager`, it checks if a target element for documentation is found, retrieves the documentation provider for the
Simple Language and creates the documentation string for the target element.
Finally, the documentation string is verified against the expected output.

```java
```
{src="simple_language_plugin/src/test/java/org/intellij/sdk/language/SimpleCodeInsightTest.java" include-symbol="testDocumentation"}

## Run the Test

<include from="custom_language_testing_snippets.md" element-id="runTests"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Documents

<link-summary>Introduction to documents - an editable sequence of Unicode characters, typically storing the content of a virtual file.</link-summary>

A [`Document`](%gh-ic%/platform/core-api/src/com/intellij/openapi/editor/Document.java) is an editable sequence of Unicode characters, typically corresponding to the text contents of a [virtual file](virtual_file.md).

Line breaks in a document are _always_ normalized to `\n`.
The IntelliJ Platform handles encoding and line break conversions when loading and saving documents transparently.

## How do I get a `Document`?

| Context                          | API                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|----------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [Action](basic_action_system.md) | [`AnActionEvent.getData(CommonDataKeys.EDITOR).getDocument()`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnActionEvent.java)                                                                                                                                                                                                                                                                             |
| [PSI File](psi_files.md)         | [`PsiDocumentManager.getDocument()`/`getCachedDocument()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiDocumentManager.java)                                                                                                                                                                                                                                                                                                  |
| [Virtual File](virtual_file.md)  | <p>[`FileDocumentManager.getDocument()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileEditor/FileDocumentManager.java) (forces the document content to be loaded from a disk if it wasn't loaded previously)</p><p>[`FileDocumentManager.getCachedDocument()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileEditor/FileDocumentManager.java) (use if only open or possibly modified documents are relevant)</p> |

## What can I do with a `Document`?

You may perform any operations that access or modify the file contents on the "plain text" level (as a sequence of characters, not as a tree of [](psi.md) elements).

## Where does a `Document` come from?

`Document` instances are created when some operation needs to access the text contents of a file (in particular, this is necessary to build the PSI for a file).
Also, document instances not linked to any [](virtual_file.md) can be created temporarily, for example, representing the contents of a text editor field in a dialog.

## How long does a `Document` persist?

Document instances are weakly referenced from `VirtualFile` instances.
Thus, an unmodified `Document` instance can be garbage-collected if no one references it, and a new instance is created if the document contents are reaccessed later.

> Storing `Document` references in long-term data structures of a plugin will cause memory leaks.
>
{style="warning"}

## How do I create a `Document`?

For creating a new file on disk, please do not create a `Document` but a PSI file and get its `Document` (see [](psi_files.md#how-do-i-create-a-psi-file)).
To create a `Document` instance that isn't bound to anything, use [`EditorFactory.createDocument()`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/EditorFactory.java).

## How do I get notified when documents change?

* `Document.addDocumentListener()` allows receiving notifications about changes in a particular `Document` instance.
* `EditorFactory.getEventMulticaster().addDocumentListener()` allows receiving notifications about changes in all open documents.
* Register [`FileDocumentManagerListener`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/fileEditor/FileDocumentManagerListener.java) [listener](plugin_listeners.md) or subscribe to `AppTopics.FILE_DOCUMENT_SYNC` on any level bus to receive notifications when a `Document` is saved or reloaded from disk.

## What are the rules of working with documents?

The general read/write action rules are in effect (see [](threading_model.md)).
Besides, any operations which modify the contents of the document must be wrapped in a command ([`CommandProcessor.executeCommand()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/command/CommandProcessor.java)).
`executeCommand()` calls can be nested, and the outermost `executeCommand()` call is added to the undo stack.
If multiple documents are modified within a command, undoing this command will, by default, show a confirmation dialog to the user.

If the file corresponding to a `Document` is read-only (for example, not checked out from the version control system), document modifications will fail.
Thus, before modifying the `Document`, it is necessary to call [`ReadonlyStatusHandler.ensureFilesWritable()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/ReadonlyStatusHandler.java) to check out the file.

All text strings passed to `Document` modification methods (`setText()`, `insertString()`, `replaceString()`) must use only `\n` as line separators.

See also [Working with Text](working_with_text.md#safely-replacing-selected-text-in-the-document) in Editors Basics tutorial.

## Are there any utilities available for working with documents?

[`DocumentUtil`](%gh-ic%/platform/core-impl/src/com/intellij/util/DocumentUtil.java) contains utility methods for `Document` processing.
This allows you to get information like the text offsets of particular lines.
This is particularly useful when you need text location/offset information about a given `PsiElement`.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Drop-Down List

<link-summary>UI guidelines on using drop-down lists.</link-summary>

<tldr>

**Implementation:** [`ComboBox`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/ComboBox.java)

</tldr>

A drop-down list is a type of button that appears in dialogs. It shows a list of choices on clicking it and allows selecting one option.

![](drop_down_example.png){width=134}

## When to use

Use a drop-down list if:

A single option should be selected.

The possible choices are objects or states.

![](output_level.png){width=182}

The number of choices is more than 4.

The screen space is limited, so there is not enough room for radio buttons.

The default value is recommended for the most users. A drop-down is a good way to hide unpopular alternatives.

![](antialiasing.png){width=228}

*"Subpixels" is the best choice for most users.*

If there are other drop-downs in the same window and these options are not more important than others. A list of radio buttons is more noticeable than the drop-down.

If a layout combines various UI elements for one setting, use a drop-down even if there are 4 options or fewer:

![](complex_layout.png){width=523}

### When not to use

If multiple selections are possible, use checkboxes.

If there is a list of actions, use a menu or a split button:

![](drop_down_menu_button.png){width=136}

If there are 4 options or fewer, use radio buttons.

![](radio_buttons.png){width=255}

If users may need to enter a value not currently in the list, use a combo box.

![](combo_box_font_size.png){width=165}

If a drop-down appears on a toolbar, use [toolbar drop-down](toolbar_drop_down.md) instead.

![](toolbar_main.png){width=209}

## How to use

### Label

Follow the rules for the [input field](input_field.md#label).

![](labels.png){width=490}

### Default value

Select the most likely or the safest value by default.

![](imports.png){width=298 style=block}
*The safest value is "Ask", the behavior will not be unexpected to the user.*

Do **not** use an empty value as the default value. If no values are added to a drop-down yet, replace it with a button to add values.

<table>
    <tr>
        <td width="50%"><format color="Red" style="bold">Incorrect</format></td>
        <td width="50%"><format color="Green" style="bold">Correct</format></td>
    </tr>
    <tr>
        <td><img src="drop_down_empty.png" alt="" width="221" /></td>
        <td><img src="button.png" alt="" width="190" /></td>
    </tr>
</table>

## Menu {id="menu_1"}

### Control

A drop-down menu opens on clicking the drop-down button anywhere or pressing the Down key when the drop-down is
focused.
The menu opens down by default. If there is not enough space, the menu opens up.

When the menu opens, the default option (displayed when the menu is closed) is selected.

Move the selection in the menu by pressing Up and Down arrows when an item is hovered. On hovering the cursor over the item just move selection and do not update the value.

<!-- * Filter items in the list on typing:

    ![](filter.png)
-->

The menu remains opened until the user selects an item, clicks outside the menu, presses the <shortcut>Esc</shortcut> key or
switches to another app.

Allow single-click activation using mouse: click on a drop-down, the drop-down opens, select an item by hovering, close the drop-down with the new item selected by releasing the mouse button.

### Menu items

Use sentence-style capitalization for each menu item.

![](browser.png){width=251}

Avoid repeating words in drop-down list items. Move repeating words to the label or after the drop-down.

![](refresh_changes.png){width=274}

Sort items in one of the following orders:

* Logical order, for example, in a spatial relationship:

  ![](order_logical.png){width=172}

* Alphabetical or numeric order if the options are equivalent to make it easier to find items:

  ![](order_alphabetical.png){width=267}

* Place the most common options first. If there are more than 10 options, separate the most popular options with a line:

  ![](order_popular.png){width=254}

Group related options, add a separator and group header if possible:

![](drop_down_group.png){width=216}

If there are actions related to the drop-down, put them under the gear icon on the right:

![](scheme.png){width=336}

Enclose meta-options in pointy brackets and place meta-options at the beginning or at the end if they are secondary.

![](run_tests.png){width=263}

*<control>&lt;Choose per test></control> is a meta-options because it’s not a real runner.*

Do **not** assign special meanings to numeric or string values, use meta-options instead. It can be unclear that either 0 or an empty string are used to disable an option.

<table>
    <tr>
        <td width="50%"><format color="Red" style="bold">Incorrect</format></td>
        <td width="50%"><format color="Green" style="bold">Correct</format></td>
    </tr>
    <tr>
        <td><img src="version_incorrect.png" alt="" width="262" /></td>
        <td><img src="version_correct.png" alt="" width="262" /></td>
    </tr>
</table>

  <p><em>In the incorrect example an empty string is used to set <control>&lt;Same
  as language level&gt;</control>, which is unclear.</em></p>
  <p>Replace the <control>&lt;None&gt;</control> option with a checkbox if it does not make the layout more complex:</p>

<format color="Red" style="bold">Incorrect</format>

![](none_incorrect.png){width=288}

<format color="Green" style="bold">Correct</format>

![](none_correct.png){width=277}

Preview list items with images if they are associated with well-known icons. Use formatting for a list of fonts. It will help users make a choice.

![](preview.png){width=609}

Use **bold** font to show default values, <format color="#2600FF">blue</format> font for values changed from the default,
and <format color="#787878">grey</format> font to add a hint.

![](blue_text.png){width=188 style=block}
*Default and Darcula are bundled schemes, Default is blue because it’s customized.*

![](grey_text.png){width=529}

Submenus are not supported for the drop-down list. Use a tree view instead:

![](hierarchy.png){width=169}

## Sizes and placement

### Width

A drop-down width is fixed and does not change depending on the selected value.

![](drop_down_width.png){width=133}

A drop-down width should be enough to fit the longest option plus 20px, but not less than 72px.

![](width_sizes.png){width=157}

### Menu

The width of a drop-down menu can either equal the drop-down control width, or be wider to fit longer items.

![](menu_width.png){width=100}

Choose a list length that eliminates unnecessary vertical scrolling. The minimum height of the list with scrolling is 200px. Expand the list to 600px if space is not constrained and the list does not hide meaningful information under it, e.g., the information that can be important to make a choice.

![](menu_height.png){width=225}

[//]: # (TODO: For sizes inside the menu list see [Menu list]&#40;menu_list.md&#41;.)

### Placement

Follow the rules for the [input field](#placement).


<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Dynamic Plugins
<primary-label ref="2020.1"/>

<link-summary>Making a plugin dynamic allows installing, updating, and uninstalling it without an IDE restart, as well as hot reloading plugin changes during the development.</link-summary>

Installing, updating, and uninstalling plugins without restarting the IDE is available for all plugins following the restrictions listed below.

During plugin development, [Auto-Reload](ide_development_instance.md#enabling-auto-reload) also allows code changes to take effect immediately in the sandbox IDE instance.
To test whether dynamic installation works correctly, verify installing [local build distribution](publishing_plugin.md#building-distribution) succeeds (see [Troubleshooting](#troubleshooting)).

Note that any unloading problems in a production environment will ask the user to restart the IDE.

> If a plugin _requires_ restart (for example, due to using native libraries) specify `require-restart="true"` for [`<idea-plugin>`](plugin_configuration_file.md#idea-plugin) root tag in <path>[plugin.xml](plugin_configuration_file.md)</path>.
>
{style="note"}

> Third-party **paid** plugins can't be installed, updated, or uninstalled without restarting the IDE.
>
{style="warning"}

## Restrictions

For a plugin to support this, all restrictions listed below must be met.
To verify a plugin locally, invoke <ui-path>Code | Analyze Code | Run Inspection by Name…</ui-path> and run <control>Plugin DevKit | Plugin descriptor | Plugin.xml dynamic plugin verification</control> inspection on all plugin descriptor files.

For plugins hosted on the [JetBrains Marketplace](https://plugins.jetbrains.com), the built-in [Plugin Verifier](https://blog.jetbrains.com/platform/2018/07/plugins-repository-now-integrates-with-the-plugin-verification-tool/) will run these checks automatically.
See [](verifying_plugin_compatibility.md#plugin-verifier) for more information on how to run it locally or on CI.

### No Use of Components

No Components must be used; existing ones [must be migrated](plugin_components.md) to services, extensions, or listeners.

### Action Group Requires ID

All [`<group>`](plugin_configuration_file.md#idea-plugin__actions__group) elements must declare a unique `id`.

### Use Only Dynamic Extensions

Whether defined in the platform itself ([](intellij_platform_extension_point_list.md)) or coming from other plugins, all used extension points must be marked explicitly as dynamic (see next paragraph).

Some deprecated extension points (for example, `com.intellij.configurationProducer`) are intentionally non-dynamic, and their usage should be migrated to the corresponding replacement.

### Mark Extension Points as Dynamic

If a plugin defines its own custom extension points, they must adhere to specific usage rules and then [be declared](plugin_extension_points.md#dynamic-extension-points) ready for dynamic use explicitly.

### Configurables Depending on Extension Points

Any [`Configurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/Configurable.java) which depends on dynamic extension points must implement `Configurable.WithEpDependencies`.

### No Use of Service Overrides

Application, project, and module [services](plugin_services.md) declared with `overrides="true"` aren't allowed.

## Code

> Loading and unloading plugins happens in [EDT](threading_model.md) and under write action.
>
{style="note"}

### `CachedValue`

Loading/Unloading a plugin clears all cached values created using [`CachedValuesManager`](%gh-ic%/platform/core-api/src/com/intellij/psi/util/CachedValuesManager.java).

### Do Not Store PSI

Do not store references to PSI elements in objects which can survive plugin loading or unloading; use [`SmartPsiElementPointer`](%gh-ic%/platform/core-api/src/com/intellij/psi/SmartPsiElementPointer.java) instead.

### Do not Use `FileType`/`Language` as Map Key

Replace with `String` from `Language.getID()`/`FileType.getName()` (use inspection <control>Plugin DevKit | Code | Map key may leak</control>).

### Plugin Load/Unload Events
{id="pluginLoadUnloadEvents"}

Register [`DynamicPluginListener`](%gh-ic%/platform/core-api/src/com/intellij/ide/plugins/DynamicPluginListener.kt) [application listener](plugin_listeners.md) to receive updates on plugin load/unload events.

This can be used to, for example:
- cancel long-running activities or disallow unloading due to ongoing processes
- clearing data from `UserDataHolder` objects (see `clearInjectorCache()` and `dropFileCaches()` in [`InjectedLanguageManagerImpl`](%gh-ic%/platform/analysis-impl/src/com/intellij/psi/impl/source/tree/injected/InjectedLanguageManagerImpl.java))
- and similar cases

### Resource Cleanup

Use [](plugin_services.md) implementing [`Disposable`](%gh-ic%/platform/util/src/com/intellij/openapi/Disposable.java) and perform cleanup in `Disposable.dispose()`.

## Troubleshooting

When a plugin is being uninstalled or updated, the IDE waits synchronously for the plugin unload and asks for restart if the unloading failed.

If it fails:

1. Try a newer version of the IDE (eventually latest available from [Early Access Program](https://eap.jetbrains.com)), in some cases platform bugs might be an issue.
   See this [list of known platform issues](https://youtrack.jetbrains.com/issues/IDEA?q=%23dynamic-plugins%20) related to handling dynamic plugins.

2. Try in a fresh and new configuration (for example, clean the [sandbox](ide_development_instance.md#the-development-instance-sandbox-directory) or use a different configuration directory).

### Logging

All events are tracked under the ` com.intellij.ide.plugins.DynamicPlugins` category in the IDE log file.
If a plugin fails to reload, the log will contain a cause as to why.

### Diagnosing Leaks

<procedure title="Finding leaks preventing unload">

1. Verify that the IDE is running with the VM parameter `-XX:+UnlockDiagnosticVMOptions`. When using [Gradle](creating_plugin_project.md), specify `runIde.jvmArgs += "-XX:+UnlockDiagnosticVMOptions"` otherwise [Configure JVM Options](https://www.jetbrains.com/help/idea/tuning-the-ide.html#procedure-jvm-options).
2. Set Registry key `ide.plugins.snapshot.on.unload.fail` to `true` (Go to <ui-path>Navigate | Search Everywhere</ui-path> and type `Registry`).
3. Trigger the plugin reload.
4. Open the <path>.hprof</path> memory snapshot generated in the user home directory on plugin unloading, look for the plugin ID string. [IntelliJ Ultimate](https://www.jetbrains.com/help/idea/analyze-hprof-memory-snapshots.html) can open memory snapshots directly.
5. Find the `PluginClassLoader` referencing the plugin ID string
6. Look at references to the `PluginClassLoader` instance.
7. Every one of them is a memory leak (or part of a memory leak) that needs to be resolved.

</procedure>

When steps 1 and 2 are completed, the log will contain more information about the memory leak.
For example, the following shows a chain of field references that is keeping the class loader in memory:

```
2020-12-26 14:43:24,563 [ 251086]   INFO - lij.ide.plugins.DynamicPlugins - Snapshot analysis result: Root 1:
  ROOT: Global JNI
  sun.awt.X11.XInputMethod.clientComponentWindow
  com.intellij.openapi.wm.impl.IdeFrameImpl.rootPane
  com.intellij.openapi.wm.impl.IdeRootPane.myToolbar
  com.intellij.openapi.actionSystem.impl.ActionToolbarImpl.myVisibleActions
  java.util.ArrayList.elementData
  java.lang.Object[]
  com.example.ActionExample.<class>
  com.example.ActionExample.<loader>
* com.intellij.ide.plugins.cl.PluginClassLoader
```
# Editing

<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<link-summary>The Editing section overview.</link-summary>

* Code Completion (see [Code Completion in Custom Languages](code_completion.md))
* [](postfix_completion.md)
* [](live_templates.md)
* [](file_and_code_templates.md)
* [](code_documentation.md)
* [](code_intentions.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Basics of Working with the Editor

<link-summary>Overview of tutorial on working with editor.</link-summary>

This tutorial will lead you through a series of steps showing how to work with the IntelliJ Platform Editor, how to access and modify text it contains, and how to handle events sent to the editor.
* [](working_with_text.md)
* [](coordinates_system.md)
* [](editor_events.md)

> The part of the API described in this tutorial only allows operations with "plain text".
> For operations that require access to the PSI, please see [](psi.md).

The following are referenced in the tutorial:
* The [editor_basics](%gh-sdk-samples-master%/editor_basics/) plugin code sample,
* [editor-ui-api package](%gh-ic%/platform/editor-ui-api),
* Those not found in `editor-ui-api` package:
  * [`EditorActionManager`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/EditorActionManager.java),
  * [`EditorActionHandler`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/EditorActionHandler.java),
  * [`TypedActionHandler`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/TypedActionHandler.java),
  * [`TypedAction`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/TypedAction.java).

**Related topics:**
* [](basic_action_system.md)
* [](threading_model.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Editor Components

<link-summary>Creating, customizing, and using editor components in different contexts.</link-summary>

## `EditorTextField`

Compared to [Swing `JTextArea`](https://docs.oracle.com/javase/8/docs/api/javax/swing/JTextArea.html), the IntelliJ Platform's editor component has a ton of advantages: syntax highlighting support, code completion, code folding, and much more.
[Editors](editors.md) are normally displayed in editor tabs, but they can be embedded in dialogs or tool windows, too.
This is enabled by the [`EditorTextField`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/EditorTextField.java) component.

The following attributes can be specified:

* The file type according to which the text in the text field is parsed;
* Whether the text field is read-only or editable;
* Whether the text field is single-line or multiline.

Further customizations are possible by subclassing and overriding `createEditor()` and applying [`EditorCustomization`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/EditorCustomization.java).
Several commonly needed customization implementations exist, including:
- [`SpellCheckingEditorCustomization`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/ui/SpellCheckingEditorCustomization.java) disables spellchecking
- [`HorizontalScrollBarEditorCustomization`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/HorizontalScrollBarEditorCustomization.java) to turn on/off horizontal scrollbar
- [`ErrorStripeEditorCustomization`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/ErrorStripeEditorCustomization.java) to turn on/off error stripes on the right

`EditorTextField` has a number of subclasses that can be used as needed for additional features.

If you want to use an editor as an input field in a dialog, then consider using
[`LanguageTextField`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/LanguageTextField.java)
as it provides a more accessible API.

### Providing Completion

If you want to add autocompletion to the editor, then use
[`TextFieldWithCompletion`](%gh-ic%/platform/platform-impl/src/com/intellij/util/textCompletion/TextFieldWithCompletion.java).
The constructor takes as an argument a class that implements
[`TextCompletionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/util/textCompletion/TextCompletionProvider.java)
to provide autocompletion variants.
Use
[`TextFieldCompletionProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/util/TextFieldCompletionProvider.java)
to create your own provider.
For this, override `addCompletionVariants()` and add completion variants using `CompletionResultSet.addElement()`.

See also
[`TextFieldCompletionProviderDumbAware`](%gh-ic%/platform/lang-impl/src/com/intellij/util/TextFieldCompletionProviderDumbAware.java)
for completion even at the indexing stage.

See [](code_completion.md) to learn more about completion.

### Java

> If your plugin depends on Java functionality and targets 2019.2 or later, see [](plugin_compatibility.md#java).
>
{style="note"}

A common use case for `EditorTextField` is entering the name of a Java class or package.
This can be accomplished with the following steps:

* Use [`JavaCodeFragmentFactory.createReferenceCodeFragment()`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/JavaCodeFragmentFactory.java) to create a code fragment representing the class or package name;
* Call [`PsiDocumentManager.getDocument()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiDocumentManager.java) to get the document corresponding to the code fragment;
* Pass the returned document to the [`EditorTextField`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/EditorTextField.java) constructor or its `setDocument()` method.

```java
PsiFile psiFile = PsiDocumentManager.getInstance(project)
        .getPsiFile(editor.getDocument());
PsiElement element =
        psiFile.findElementAt(editor.getCaretModel().getOffset());

PsiExpressionCodeFragment code =
        JavaCodeFragmentFactory.getInstance(project)
        .createExpressionCodeFragment("", element, null, true);

Document document =
        PsiDocumentManager.getInstance(project).getDocument(code);

EditorTextField editorTextField =
        new EditorTextField(document, project, JavaFileType.INSTANCE);
```

#### Tips

* When creating more than one field, two separate documents are needed.
  This is accomplished by using separate instances of `PsiExpressionCodeFragment`.
* `setText()` no longer works for the input field.
  However, `createExpressionCodeFragment()` accepts the text for the field as an argument.
  The empty string can be replaced and create a new document in lieu of `setText()`.
* Instances of `JTextField` in the GUI builder can be replaced with a custom replacement component using the right click in your IDE.
  Make sure to use "Custom Create" so the initialization code works properly.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 3. Handling Editor Events

<link-summary>Introduction to Editor Action system handling actions activated by keystroke events.</link-summary>

The previous tutorial [Editor Coordinate Systems](coordinates_system.md) described working with caret coordinate systems in an editor window.
Caret position was discussed in terms of Logical Position, Visual Position, and Offset.
This tutorial introduces the Editor Action system, which handles actions activated by keystroke events in the editor.
Two classes from the [editor_basics](%gh-sdk-samples-master%/editor_basics) code sample are used to illustrate:
* Using an IntelliJ Platform [`EditorActionHandler`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/EditorActionHandler.java) to manipulate a caret.
* Creating and registering a custom [`TypedActionHandler`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/TypedActionHandler.java) to intercept keystrokes and change the document.

## Using an IntelliJ Platform `EditorActionHandler`

In this portion of the tutorial, the [editor_basics](%gh-sdk-samples-master%/editor_basics) code sample is used to demonstrate cloning an existing caret.
A custom action class will use `EditorActionManager` to access a specific `EditorActionHandler` for caret cloning.
The `editor_basics` code sample adds an **Editor Add Caret** menu item to the editor context menu:

![Editor Basics Menu](basics.png){width="600"}

### Creating the Menu Action Class

The source code for the Java action class is [EditorHandlerIllustration](%gh-sdk-samples-master%/editor_basics/src/main/java/org/intellij/sdk/editor/EditorHandlerIllustration.java), a subclass of `AnAction`.
For more information about creating action classes, see the [Actions Tutorial](action_system.md), which covers the topic in depth.

The `EditorHandlerIllustration` action is registered in the _editor_basic_ [`plugin.xml`](%gh-sdk-samples-master%/editor_basics/src/main/resources/META-INF/plugin.xml) file.
Note that this action class is registered to appear on the Editor context menu.

```xml
<actions>
  <action
      id="EditorBasics.EditorHandlerIllustration"
      class="org.intellij.sdk.editor.EditorHandlerIllustration"
      text="Editor Add Caret"
      description="Adds a second caret below the existing one."
      icon="SdkIcons.Sdk_default_icon">
    <add-to-group group-id="EditorPopupMenu" anchor="first"/>
  </action>
</action>
```

### Setting Visibility for the Action Menu Entry

Under what conditions should the `EditorHandlerIllustration` action be capable of cloning a caret?
Only if the following conditions are met in the `EditorHandlerIllustration.update()` method:
* A project is open,
* An editor is available,
* There is at least one caret active in the editor.

After ensuring that `Project` and `Editor` objects are available, the `Editor` object is used to verify there is at least one caret:

```java
public class EditorHandlerIllustration extends AnAction {
  @Override
  public void update(@NotNull AnActionEvent event) {
    Project project = event.getProject();
    Editor editor = event.getData(CommonDataKeys.EDITOR);

    // Make sure at least one caret is available
    boolean menuAllowed = false;
    if (editor != null && project != null) {
      // Ensure the list of carets in the editor is not empty
      menuAllowed = !editor.getCaretModel().getAllCarets().isEmpty();
    }
    event.getPresentation().setEnabledAndVisible(menuAllowed);
  }
}
```

### Acquiring the Correct `EditorActionHandler`

When the `EditorHandlerIllustration.actionPerformed()` method clones the caret, it should use the appropriate IntelliJ Platform [`EditorActionHandler`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/EditorActionHandler.java).
An instance of [`EditorActionManager`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/EditorActionManager.java) is required to obtain the correct `EditorActionHandler`.
The `EditorActionManager` class provides a static method to do this.

To request the correct `EditorActionHandler` from `EditorActionManager`, consult the [`IdeActions`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/actionSystem/IdeActions.java) interface for the correct constant to pass into the `EditorActionManager.getActionHandler()` method.
For cloning a caret below the primary caret, the constant is `ACTION_EDITOR_CLONE_CARET_BELOW`.
Based on that constant, the `EditorActionManager` returns an instance of [`CloneCaretActionHandler`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/editor/actions/CloneCaretActionHandler.java), a subclass of `EditorActionHandler`.

```java
// Snippet from EditorHandlerIllustration.actionPerformed()
EditorActionManager actionManager = EditorActionManager.getInstance();
EditorActionHandler actionHandler =
    actionManager.getActionHandler(IdeActions.ACTION_EDITOR_CLONE_CARET_BELOW);
```

### Using an `EditorActionHandler` to Clone the Caret

To clone the caret requires only calling the `EditorActionHandler.execute()` method and passing in the appropriate context.

```java
public class EditorHandlerIllustration extends AnAction {
  @Override
  public void actionPerformed(@NotNull AnActionEvent event) {
    Editor editor = event.getRequiredData(CommonDataKeys.EDITOR);
    EditorActionManager actionManager = EditorActionManager.getInstance();
    EditorActionHandler actionHandler =
        actionManager.getActionHandler(IdeActions.ACTION_EDITOR_CLONE_CARET_BELOW);
    actionHandler.execute(editor,
        editor.getCaretModel().getPrimaryCaret(), event.getDataContext());
  }
}
```

## Creating a Custom `TypedActionHandler`

The [`TypedActionHandler`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/TypedActionHandler.java) interface is the basis for classes that handle keystroke events from the editor.
Custom implementations of the class are registered to handle editor keystroke events, and receive a callback for each keystroke.
The steps below explain how to use `TypedActionHandler` to customize the behavior of the editor when keystroke events are received.

### Implementing a Custom `TypedActionHandler` Class

First, a subclass such as `MyTypedHandler` is created based on [`TypedActionHandler`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/TypedActionHandler.java).
The class overrides the method `TypedActionHandler.execute()`, which is the callback for editor keystroke events.

### Implementing the Keystroke Event Handling Logic

Override the `TypedActionHandler.execute()` method in `MyTypedHandler` to implement the logic for handling keystroke events.
This method is called every time a key is pressed when the Editor Tool Window has focus.

In the following example, the `MyTypedHandler.execute()` method inserts "editor_basics\n" at the zero [caret Offset](coordinates_system.md#caret-offset) position when a keystroke event occurs.
As explained in [Working with Text](working_with_text.md#safely-replacing-selected-text-in-the-document), safe modifications to the document must be in the context of a write action.
So although a method on the `Document` interface does the `String` insertion, the write action ensures a stable context.

```java
final class MyTypedHandler implements TypedActionHandler {
  @Override
  public void execute(@NotNull Editor editor,
                      char c,
                      @NotNull DataContext dataContext) {
    Document document = editor.getDocument();
    Project project = editor.getProject();
    Runnable runnable = () -> document.insertString(0, "editor_basics\n");
    WriteCommandAction.runWriteCommandAction(project, runnable);
  }
}
```

### Registering a Custom `TypedActionHandler`

A custom implementation of `TypedActionHandler` must be registered to replace the existing typing handler to receive editor keystroke events.
The registration is done through the [`TypedAction`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/TypedAction.java) class.

As is shown in the snippet below, the `EditorActionManager` is used to get access to the `TypedAction` class.
The method `TypedAction.setupHandler()` is used to register the custom `MyTypedHandler` class:

```java
public class EditorHandlerIllustration extends AnAction {
  static {
    EditorActionManager actionManager = EditorActionManager.getInstance();
    TypedAction typedAction = actionManager.getTypedAction();
    typedAction.setupHandler(new MyTypedHandler());
  }
}
```

Placing the registration code in the `EditorHandlerIllustration` class is somewhat arbitrary in the sense that the registration of `MyTypedHandler` has nothing to do with the `EditorHandlerIllustration` class.
However, the `EditorHandlerIllustration` class is convenient because as an action it gets instantiated at application startup.
On instantiation, the `static` block of code in `EditorHandlerIllustration` gets evaluated.
In the `editor_basics` code sample any of the `AnAction` derived classes would work for registering `MyTypedHandler`.
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Editors

<link-summary>The Editors section overview.</link-summary>

This section covers working with text in the IntelliJ Platform editor.
* [](editor_basics.md)
* [](text_selection.md)
* [](multiple_carets.md)
<!-- Copyright 2000-2023 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Element Patterns

<link-summary rel="excerpt"/>
<p id="excerpt">
Element patterns provide a generic way to specify conditions on objects.
</p>
Plugin authors use them to check whether PSI elements match a particular structure.
Just as regular expressions for strings test whether a (sub-)string matches a particular pattern, element patterns are used to put conditions on the nested structure of PSI elements.
Their two main applications inside the IntelliJ Platform are:

1. Specifying where auto-completion should occur when implementing [a completion contributor](completion_contributor.md) for a custom language.
2. Specifying PSI elements that provide further references via [a PSI reference contributor](psi_references.md#contributed-references).

However, plugin authors rarely implement the [`ElementPattern`](%gh-ic%/platform/core-api/src/com/intellij/patterns/ElementPattern.java) interface directly.
Instead, we recommend using the high-level pattern classes provided by the IntelliJ Platform:

| Class                                                                                               | Main Contents                                                                                                             | Notable Examples                                                                                                                                                                                                                                                                          |
|-----------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [`StandardPatterns`](%gh-ic%/platform/core-api/src/com/intellij/patterns/StandardPatterns.java)     | Factory for string and char pattern (see below); Logical operations like and, or, not                                     | [`LogbackReferenceContributor`](%gh-ic%/plugins/groovy/src/org/jetbrains/plugins/groovy/ext/logback/LogbackReferenceContributor.kt), [`RegExpCompletionContributor`](%gh-ic%/RegExpSupport/src/org/intellij/lang/regexp/RegExpCompletionContributor.java)                                 |
| [`PlatformPatterns`](%gh-ic%/platform/core-api/src/com/intellij/patterns/PlatformPatterns.java)     | Factory for PSI-, IElement-, and VirtualFile-patterns                                                                     | [`FxmlReferencesContributor`](%gh-ic%/plugins/javaFX/src/org/jetbrains/plugins/javaFX/fxml/refs/FxmlReferencesContributor.java), [`PyDataclassCompletionContributor`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/codeInsight/completion/PyDataclassCompletionContributor.kt) |
| [`PsiElementPattern`](%gh-ic%/platform/core-api/src/com/intellij/patterns/PsiElementPattern.java)   | Patterns for PSI; Checks for children, parents, or neighboring leaves                                                     | [`XmlCompletionContributor`](%gh-ic%/xml/impl/src/com/intellij/codeInsight/completion/XmlCompletionContributor.java)                                                                                                                                                                      |
| [`CollectionPattern`](%gh-ic%/platform/core-api/src/com/intellij/patterns/CollectionPattern.java)   | Filter and check pattern collections; Mainly used to provide functionality for other high-level pattern classes           | [`PsiElementPattern`](%gh-ic%/platform/core-api/src/com/intellij/patterns/PsiElementPattern.java)                                                                                                                                                                                         |
| [`TreeElementPattern`](%gh-ic%/platform/core-api/src/com/intellij/patterns/TreeElementPattern.java) | Patterns specifically for checking (PSI) tree structure                                                                   | [`PyMetaClassCompletionContributor`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/codeInsight/completion/PyMetaClassCompletionContributor.java)                                                                                                                                |
| [`StringPattern`](%gh-ic%/platform/core-api/src/com/intellij/patterns/StringPattern.java)           | Check if strings match, have a certain length, have a specific beginning or ending, or are one of a collection of strings | [`AbstractGradleCompletionContributor`](%gh-ic%/plugins/gradle/java/src/codeInsight/AbstractGradleCompletionContributor.kt)                                                                                                                                                               |
| [`CharPattern`](%gh-ic%/platform/core-api/src/com/intellij/patterns/CharPattern.java)               | Check if characters are whitespace, digits, or Java identifier parts                                                      | [`CompletionUtil`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/completion/CompletionUtil.java)                                                                                                                                                                            |

Some built-in languages in the IntelliJ Platform implement their own pattern classes and can provide additional examples:

- [`XmlPatterns`](%gh-ic%/xml/xml-psi-api/src/com/intellij/patterns/XmlPatterns.java) provides patterns for XML attributes, values, entities, and texts.
- [`PsiJavaPatterns`](%gh-ic%/java/java-psi-api/src/com/intellij/patterns/PsiJavaPatterns.java) provides patterns for literals, strings, arguments, and function/method arguments for Java.
- [`DomPatterns`](%gh-ic%/xml/dom-openapi/src/com/intellij/patterns/DomPatterns.java) builds upon `XmlPatterns` and acts as a wrapper to provide further patterns for [DOM-API](xml_dom_api.md).

## Examples

A good starting point for element patterns is the [Custom Language Support Tutorial](custom_language_support_tutorial.md).
They are used in the [completion](completion_contributor.md#define-a-completion-contributor) and [reference](reference_contributor.md#define-a-reference-contributor) contributor section of the tutorial.
However, the IntelliJ Platform source code provides many more examples of element patterns for built-in languages like JSON, XML, Groovy, Markdown, and so on.
Checking the references in the table above or searching for usages of the high-level pattern classes will provide a comprehensive list that shows how element patterns are used in production code.

For instance, an example can be found in the JavaFX plugin [`FxmlReferencesContributor`](%gh-ic%/plugins/javaFX/src/org/jetbrains/plugins/javaFX/fxml/refs/FxmlReferencesContributor.java) that tests if the given PSI element is an XML attribute value inside a <path>*.fxml</path> file.

```java
XmlAttributeValuePattern attributeValueInFxml =
    XmlPatterns.xmlAttributeValue().inVirtualFile(
        virtualFile().withExtension(JavaFxFileTypeFactory.FXML_EXTENSION)
    );
```

As shown in the code above, element patterns can be stacked and combined to create more complex conditions.
[`JsonCompletionContributor`](%gh-ic%/json/src/com/intellij/json/codeinsight/JsonCompletionContributor.java) contains another example with more requirements on the PSI element.

```java
PsiElementPattern.Capture<PsiElement> AFTER_COMMA_OR_BRACKET_IN_ARRAY =
    psiElement()
        .afterLeaf("[", ",")
        .withSuperParent(2, JsonArray.class)
        .andNot(
            psiElement().withParent(JsonStringLiteral.class)
        );
```

The above pattern makes sure that the PSI element:

1. Appears after either an open bracket or a comma, which is expressed by putting a restriction on the neighboring leaf element.
2. Has `JsonArray` as a level-two parent, which indicates that the PSI element must be inside a JSON array.
3. Does not have a `JsonStringLiteral` as a parent, which prevents situations where a string with a bracket or comma inside an array would give a false-positive match.

This last example shows that corner cases need to be considered carefully even for simple patterns.

## Tools and Debugging

Working with element patterns can be tricky, and plugin authors need a solid understanding of the underlying PSI structure to get it right.
Therefore, it is recommended to use the [PsiViewer plugin or built-in PSI viewer](explore_api.md#internalMode) and verify that elements indeed have the expected structure and properties.

### Debugging

For this section, it is assumed that plugin authors have a basic understanding of how to work with [a debugger](https://www.jetbrains.com/help/idea/debugging-code.html), how to [set breakpoints](https://www.jetbrains.com/help/idea/using-breakpoints.html#set-breakpoints), and how to set [conditions on breakpoints](https://www.jetbrains.com/help/idea/using-breakpoints.html#properties).

When debugging element patterns, plugin authors need to keep in mind that the places where element patterns are instantiated are unrelated to where they are actually used.
For instance, while patterns for completion contributors are instantiated when registering the contributor, the patterns are checked during completion while typing.
Therefore, finding the correct locations in the IntelliJ Platform for debugging element patterns is the first important step.

However, setting breakpoints inside `ElementPattern` will result in many false-positives since element patterns are used extensively throughout the IDE.
One way to filter out these false-positives is to use a condition on the breakpoints.
The following steps can help you investigate where patterns are checked:

1. Set breakpoints at the `ElementPattern.accepts()` methods.
2. Set a condition on the breakpoints that checks whether the string representation of the pattern contains an _identifiable part_ of the pattern.
3. Debug, and when the breakpoint triggers, make sure it is the right pattern and investigate the call stack to find relevant methods that use the pattern check.
4. Debug the relevant methods, e.g. methods that fill completion variants or find references.

Note that finding an identifiable part of a pattern can be achieved by setting a breakpoint where the pattern is **instantiated** and checking its string representation.

### Debugging Example

Using the Markdown code example from above, we note that the `MarkdownLinkDestinationImpl` class is used in the element pattern.
Now, set a breakpoint at:

```text
com.intellij.patterns.ElementPattern#accepts(
  java.lang.Object,
  com.intellij.util.ProcessingContext
)
```

Right-click on the breakpoint and set the following as a condition:

```java
toString().contains("MarkdownLinkDestinationImpl")
```

Now start a debug session and open a Markdown file.
When the breakpoint hits, the call stack in the [debug tool window](https://www.jetbrains.com/help/idea/debug-tool-window.html) shows that reference-providers are checked in the method `doGetReferencesFromProviders` within [`ReferenceProvidersRegistryImpl`](%gh-ic%/platform/core-impl/src/com/intellij/psi/impl/source/resolve/reference/ReferenceProvidersRegistryImpl.java).
This provides a good starting point for further investigation.
<!-- Copyright 2000-2025 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

#  Embedded Browser (JCEF)
<primary-label ref="2020.2"/>

<link-summary>Embedding Chromium-based browser in IDE.</link-summary>

> JCEF is available since 2020.1 as an experimental feature and is enabled by default since 2020.2.

JCEF (Java Chromium Embedded Framework) is a Java port of [CEF](https://bitbucket.org/chromiumembedded/cef/wiki/Home).
It allows for embedding [Chromium-based browsers](https://www.chromium.org/Home) in Swing applications.

Embedding of the browser component inside the IDE can be used for:

- rendering HTML content
- previewing generated HTML (e.g., from Markdown)
- creating custom web-based components (e.g., diagram preview, image browser, etc.)

It is recommended to implement UI in the default IntelliJ Platform UI framework, which is Swing.
Consider using the JCEF approach only in cases when a plugin needs to display HTML documents or the standard approach for creating UI is not enough.

JCEF replaces JavaFX, which was used to render web content in IDEs in the past.

> Using JavaFX in 3rd party plugins has been deprecated since 2020.2.
> To continue using JavaFX in 2020.2 or later, add an explicit [dependency](plugin_dependencies.md) on [JavaFX Runtime for Plugins](https://plugins.jetbrains.com/plugin/14250-javafx-runtime-for-plugins) (not recommended).
>
> See [JavaFX and JCEF in the IntelliJ Platform](https://blog.jetbrains.com/platform/2020/07/javafx-and-jcef-in-the-intellij-platform/) blog post for the details.
>
{style="warning" title="Using JavaFX"}

## Enabling JCEF

<tabs>
<tab title="2020.2 and later">

JCEF is available and enabled by default since 2020.2.
No additional actions are required.

</tab>
<tab title="Earlier versions">

Using JCEF requires using a dedicated JetBrains Runtime and enabling JCEF in the IDE Registry.

<procedure>

1. Go to the [JetBrains Runtime releases list](https://github.com/JetBrains/JetBrainsRuntime/releases).
2. Download "Binaries for launching IntelliJ IDEA" matching your operating system, e.g., <path>jbr_jcef-17.0.9-osx-x64-b1087.7.tar.gz</path> for macOS.
3. Unpack the archive.
4. Follow the steps described in the [IDEA Web Help](https://www.jetbrains.com/help/idea/2020.2/switching-boot-jdk.html) and choose the downloaded JBR.
5. Invoke <ui-path>Help | Find Action...</ui-path>, type "Registry", and press enter to open the <control>Registry</control> dialog.
6. Enable the `ide.browser.jcef.enabled` flag.
7. Restart the IDE for changes to take effect.

</procedure>

</tab>
</tabs>

## Using JCEF In a Plugin

The core JCEF class exposed by IntelliJ Platform API is [`JBCefApp`](%gh-ic%/platform/ui.jcef/jcef/JBCefApp.java).
It is responsible for initializing JCEF context and managing its lifecycle.

There is no need for initializing `JBCefApp` explicitly.
It is done when `JBCefApp.getInstance()` is called, or when [browser](#browser) or [client](#browser-client) objects are created.

Before using JCEF API, it is required to check whether JCEF is supported in the running IDE.
It is done by calling `JBCefApp.isSupported()`:

```java
if (JBCefApp.isSupported()) {
  // use JCEF
} else {
  // optional fallback to an alternative browser-less solution
}
```

JCEF can be unsupported when:
- The IDE is started with an alternative JDK that does not include JCEF.
- Its version is not compatible with the running IDE.

### Browser

JCEF browser is represented by the [`JBCefBrowser`](%gh-ic%/platform/ui.jcef/jcef/JBCefBrowser.java) class.
It is responsible for loading and rendering requested documents in the actual Chromium-based browser.

JCEF browsers can be created either by using the `JBCefBrowser` class' constructors or via [`JBCefBrowserBuilder`](%gh-ic%/platform/ui.jcef/jcef/JBCefBrowserBuilder.java).
Use constructors in the cases when a browser with the default [client](#browser-client) and default options is enough.
The builder approach allows using custom clients and configuring other options.

#### Adding Browser to UI

[`JBCefBrowser.getComponent()`](%gh-ic%/platform/ui.jcef/jcef/JBCefBrowser.java) exposes the UI component embedding the actual browser.
The component is an instance of Swing `JComponent`, which can be added to the plugin UI:

```java
// assume 'JPanel myPanel' is a part of a tool window UI
JBCefBrowser browser = new JBCefBrowser();
myPanel.add(browser.getComponent());
```

#### Loading Documents

To load a document in the browser, use one of [`JBCefBrowserBase.load*()`](%gh-ic%/platform/ui.jcef/jcef/JBCefBrowserBase.java) methods.
Methods loading documents can be called from both [EDT and background threads](threading_model.md).
It is possible to set an initial URL (passed to constructor or builder) that will be loaded when the browser is created and initialized.

### Browser Client

Browser client provides an interface for setting up [handlers](#event-handlers) related to various browser events, e.g.:
- HTML document loaded
- console message printed
- the browser gained focus

Handlers allow reacting to these events in plugin code and changing the browser's behavior.
Each browser is tied to a single client, and a single client can be shared with multiple browser instances.

Browser client is represented by [`JBCefClient`](%gh-ic%/platform/ui.jcef/jcef/JBCefClient.java), which is a wrapper for JCEF's [`CefClient`](%gh-jcef-master%/org/cef/CefClient.java).
`JBCefClient` allows registering multiple handlers of the same type, which is not possible with `CefClient`.
To access the underlying `CefClient` and its API, call `JBCefClient.getCefClient()`.

#### Creating and Accessing Client

If a `JBCefBrowser` instance is created without passing a specific client, it is tied to a default client created implicitly.
Implicit clients are [disposed](#disposing-resources) automatically, following the associated browser instance disposal.

For more advanced use cases, create a custom client by calling `JBCefApp.createClient()` and register required [handlers](#event-handlers).
Custom clients must be disposed explicitly in the plugin code.

To access the client associated with a browser, call `JBCefBrowser.getJBCefClient()`.

### Event Handlers

JCEF API provides various event handler interfaces that allow handling a wide set of events emitted by the browser.
Example handlers:
- [`CefLoadHandler`](%gh-jcef-master%/org/cef/handler/CefLoadHandler.java) - handles browser loading events.<br/>
  **Example:** Implement `CefLoadHandler.onLoadEnd()` to [execute scripts](#executing-javascript) after a document is loaded.

- [`CefDisplayHandler`](%gh-jcef-master%/org/cef/handler/CefDisplayHandler.java) - handles events related to the browser display state.<br/>
  **Example:** Implement `CefDisplayHandler.onAddressChange()` to load project files in the browser when a local file link is clicked, or opening an external browser if an external link is clicked.

- [`CefContextMenuHandler`](%gh-jcef-master%/org/cef/handler/CefContextMenuHandler.java) - handles context menu events.<br/>
  **Example:** Implement `CefContextMenuHandler.onBeforeContextMenu()` to change the items of the browser context menu.

- [`CefDownloadHandler`](%gh-jcef-master%/org/cef/handler/CefDownloadHandler.java) - file download events.<br/>
  **Example:** Implement `CefDownloadHandler.onBeforeDownload()` to enable downloading files in the embedded browser.

See the [org.cef.handler](%gh-jcef-master%/org/cef/handler) package for all available handlers.

> For each handler interface, JCEF API provides an adapter class, which can be extended to avoid implementing unused methods, e.g., [`CefLoadHandlerAdapter`](%gh-jcef-master%/org/cef/handler/CefLoadHandlerAdapter.java).

Handlers should be registered with `JBCefClient.getCefClient().add*Handler()` methods.

> Please note that `JBCefClient` exposes methods for adding handlers, but it is not recommended to use them.
>
{style="warning"}

### Executing JavaScript

JCEF API allows executing JavaScript code in the embedded browser from the plugin code.
JavaScript can be used for manipulating DOM, creating functions required in implemented features, injecting styles, etc.

In the simplest case, JavaScript code can be executed by using `JBCefBrowser.getCefBrowser().executeJavaScript()`, e.g.:

```java
browser.getCefBrowser().executeJavaScript(
    "alert('Hello World!')",
    url, lineNumber
);
```

The above snippet will be executed in the embedded browser and will display an alert box with the "Hello World!" message.
The `url` and `lineNumber` parameters are used in the error report in the browser if the script throws an error.
Their purpose is to help debugging in case of errors, and they are not crucial for the script execution.
It is common to pass `browser.getCefBrowser().getUrl()` or null/empty string, and `0` as these parameters.

### Executing Plugin Code From JavaScript

JCEF doesn't provide direct access to DOM from the plugin code (it may [change](https://youtrack.jetbrains.com/issue/JBR-2046) in the future), and asynchronous communication with JavaScript is achieved with the callback mechanism.
It allows executing plugin code from the embedded browser via JavaScript, e.g., when a button or link is clicked, a shortcut is pressed, a JavaScript function is called, etc.

JavaScript query callback is represented by [`JBCefJSQuery`](%gh-ic%/platform/ui.jcef/jcef/JBCefJSQuery.java).
It is an object bound to a specific browser, and it holds a set of handlers that implement the required plugin behavior.

Consider a case which requires opening local files links in the editor and external links in an external browser.
Such a requirement could be implemented as follows (each step is explained under the code snippet):

```java
JBCefJSQuery openLinkQuery = JBCefJSQuery.create(browser); // 1
openLinkQuery.addHandler((link) -> { // 2
    if (LinkUtil.isExternal(link)) {
      BrowserUtil.browse(link);
    } else {
      EditorUtil.openFileInEditor(link);
    }
    return null; // 3
});

browser.getCefBrowser().executeJavaScript( // 4
    "window.openLink = function(link) {" +
      openLinkQuery.inject("link") + // 5
      "};",
    browser.getCefBrowser().getURL(), 0
);

browser.getCefBrowser().executeJavaScript( // 6
    """
    document.addEventListener('click', function (e) {
      const link = e.target.closest('a').href;
      if (link) {
        window.openLink(link);
      }
    });""",
    browser.getCefBrowser().getURL(), 0
);
```

1. Create a ` JBCefQuery ` instance. Make sure that the passed browser instance is of the type `JBCefBrowserBase` (casting may be necessary).
2. Add a handler implementing a plugin code to be executed.
   Example implementation opens a link in the editor or an external browser depending on whether the link is local or external.
3. Handlers can optionally return a `JBCefJSQuery.Response` object, which holds information about success or error occurred on the plugin code side.
   It can be [handled](#handling-query-response) in the browser if needed.
4. Execute JavaScript, which creates a custom `openLink` function.
5. Inject JavaScript code responsible for invoking plugin code implemented in step 2.
   The handler added to `openLinkQuery` will be invoked on each `openLink` function call.

   Note the `"link"` parameter of the `JBCefJSQuery.inject()` method.
   It is the name of the `openLink` function's `link` parameter.
   This value is injected to the query function call and can be any value required by the handler, e.g., `"myJsObject.prop"`, `"'JavaScript string'"`, etc.
6. Execute JavaScript, which registers a click event listener in the browser.
   Whenever an `a` element is clicked in the browser, the listener will invoke the `openLink` function defined in step 4 with the `href` value of the clicked link.

#### Handling Query Response

In the example above, there is no need to return response value to the browser from a query handler.
If it is required to handle response:
1. Instead of returning `null` as in 3., return a `JBCefJSQuery.Response` instance, for example, `new JBCefJSQuery.Response("OK")`.
2. Instead of injecting code without callbacks with `JBCefJSQuery.inject("link")` as in 5., use `JBCefJSQuery.inject(queryResult, onSuccessCallback, onFailureCallback)`, for example:
   ```java
   openLinkQuery.inject(
     "link",
     "function(response) { /* success handler code */ }",
     "function(error_code, error_message) { /* error handler code */ }"
   );
   ```

### Loading Resources From Plugin Distribution

In cases when a plugin feature implements a web-based UI, the plugin may provide HTML, CSS, and JavaScript files in its [distribution](plugin_content.md) or build them on the fly depending on some configuration.
The browser cannot easily access such resources.
They can be made accessible by implementing proper request [handlers](#event-handlers), which make them available to the browser at predefined URLs.

This approach requires implementing [`CefRequestHandler`](%gh-jcef-master%/org/cef/handler/CefRequestHandler.java), and [`CefResourceRequestHandler`](%gh-jcef-master%/org/cef/handler/CefResourceRequestHandler.java), which map resource paths to resource providers.

Serving such resources is implemented by the Image Viewer component responsible for displaying SVG files in IntelliJ Platform-based IDEs.
See [`JCefImageViewer`](%gh-ic%/images/src/org/intellij/images/editor/impl/jcef/JCefImageViewer.kt) and related classes for the implementation details.

### Scrollbars Look and Feel

Default browser scrollbars may be not enough, for example, when they stand out of the IDE scrollbars look, or specific look and behavior is required.

In JCEF browsers, scrollbars look and feel can be customized by CSS and JavaScript.
IntelliJ Platform provides [`JBCefScrollbarsHelper`](%gh-ic%/platform/ui.jcef/jcef/JBCefScrollbarsHelper.java) that allows customizing scrollbars in two ways:
1. Using `JBCefScrollbarsHelper.buildScrollbarsStyle()`, which provides the styles adapted to the IDE scrollbars (recommended).
2. Using [OverlayScrollbars](https://kingsora.github.io/OverlayScrollbars/) library adapted to the IDE look and feel.
   For the details, see `getOverlayScrollbarsSourceCSS()`, `getOverlayScrollbarsSourceJS()`, and `getOverlayScrollbarStyle()` Javadocs.
   It should be used when transparent scrollbars or other advanced options are required.

### Disposing Resources
`JBCefBrowser`, `JBCefClient`, and `JBCefJSQuery` classes implement [`JBCefDisposable`](%gh-ic%/platform/ui.jcef/jcef/JBCefDisposable.java), which extends [`Disposable`](%gh-ic%/platform/util/src/com/intellij/openapi/Disposable.java).
It means that these classes should clean up their resources according to the rules described on the [](disposers.md) page.

For example, a custom `JBCefClient` with registered handlers should remove them in the `dispose()` method implementation.

## Testing

See [`JBCefTestHelper`](%gh-ic%/platform/platform-tests/testSrc/com/intellij/ui/jcef/JBCefTestHelper.java) and tests in that package.

## Debugging

The [Chrome DevTools](https://developers.google.com/web/tools/chrome-devtools/), embedded into JCEF, can be used as a debugging and profiling tool.
It is active by default, so that a Chrome DevTools client can attach to it via the default port 9222.
The default port can be changed via the registry key `ide.browser.jcef.debug.port` (go to <ui-path>Help | Find Action...</ui-path> and type "Registry").

JavaScript debugger in IntelliJ IDEA Ultimate can thus be used to debug JavaScript code running in the IDE via the Chrome DevTools.
Use the [<control>Attach to Node.js/Chrome</control>](https://www.jetbrains.com/help/idea/run-debug-configuration-node-js-remote-debug.html) configuration with a proper port number.

Also, JCEF provides a default Chrome DevTools frontend (similar to the one in the Chrome browser) that can be opened from the JCEF's browser component context menu via <ui-path>Open DevTools</ui-path>.
The menu item is available in the [internal mode](enabling_internal.md) only, and since version 2021.3, the registry key `ide.browser.jcef.contextMenu.devTools.enabled` must be set to `true` explicitly.

### Accessing DevTools Programmatically

To access the Chrome DevTools in the plugin code, use the following API:

```java
CefBrowser devTools = browser.getCefBrowser().getDevTools();
JBCefBrowser devToolsBrowser = JBCefBrowser.createBuilder()
    .setCefBrowser(devTools)
    .setClient(browser.getJBCefClient())
    .build();
```

To open DevTools in a separate window, call `JBCefBrowser.openDevtools()`.

## JCEF Usage Examples

- [Markdown preview panel](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/ui/preview/jcef/MarkdownJCEFHtmlPanel.kt)
- [SVG Image Viewer](%gh-ic%/images/src/org/intellij/images/editor/impl/jcef/JCefImageViewer.kt)
- [PDF Viewer](https://github.com/FirstTimeInForever/intellij-pdf-viewer) plugin
- [CodeStream](https://github.com/TeamCodeStream/codestream) plugin
- [Excalidraw Integration](https://github.com/bric3/excalidraw-jetbrains-plugin) plugin
- [Creating IntelliJ plugin with WebView](https://medium.com/virtuslab/creating-intellij-plugin-with-webview-3b27c3f87aea) blog post

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Empty State

<link-summary>Providing instructions in an empty UI area on how to fill it with data.</link-summary>

<tldr>

**Implementation:** [`ComponentWithEmptyText`](%gh-ic%/platform/platform-api/src/com/intellij/util/ui/ComponentWithEmptyText.java)

</tldr>

Provide instructions in an empty UI area on how to fill it with data. Empty UI areas described here are:

* [Tool window, list, tree or table](#tool-windows-lists-trees-and-tables)
* [Details area in a master-detail layout](#master-detail-layout)
* Empty search results — TBD

## Tool windows, lists, trees and tables

Instructional text for these UI areas consists of three parts:

![](database-tw-callouts.png){width=626}

### 1. Reason why empty

Explain the current state.

The default pattern is "_No [entity] added._" If _added, created, configured_ or other such verbs act as synonyms in a particular case, use the verb _added_ for consistency.

<table>
    <tr>
        <td width="50%"><format color="Red" style="bold">Incorrect</format></td>
        <td width="50%"><format color="Green" style="bold"> Correct</format></td>
    </tr>
    <tr>
        <td><img src="libraries-before.png" alt="" width="241" /> Avoid &quot;Nothing to show&quot; as it is not informative.</td>
        <td><img src="libraries-after.png" alt="" width="241" /></td>
    </tr>
</table>

Make the reason descriptive:

<format color="Red" style="bold">Incorrect</format>

![](sql-dialect-before.png){width=456 style=block}
*The word mapping introduces a new entity while there are already two in the table header — path and SQL dialect. In the instructions, it is better to use already existing entities to connect them to what users see on the screen.*

<format color="Green" style="bold">Correct</format>

![](sql-dialect-after.png){width=456 style=block}
*The word "individual" is used in contrast with the project SQL dialect above the table. The verb specified is used instead of added because, in the table, SQL dialects are not added but selected from a drop-down list in the SQL Dialect column.*

### 2. Actions to fill the area

Required part. An action makes it easier to understand what to start with, instead of searching for the appropriate icon on the toolbar. It can also educate about the shortcut.

Use one or two actions. Three or more actions would make it harder to choose what to start from.

![](maven-tw.png){width=300}

If an action opens a menu, open it at the same position where it would be opened with the corresponding toolbar button. This would explain which toolbar icon opens the menu.

If an action cannot be tied to a link, explain what to do.

![](todo-tw.png){width=574}

Hide the area's toolbar if it does not have the same action as in the empty state. Usually, all other toolbar actions are not relevant in this case.

<format color="Red" style="bold">Incorrect</format>

![](todo-tw-toolbar-incorrect.png){width=574}

### 3. Help topic

**Tool windows:** provide a link to a help topic that explains the functionality. Add the question mark icon in the beginning.

![](empty_state_database-tw-segment.png){width=262}

**Tables, trees and lists:** provide instructions according to the [Context help](context_help.md) rules. Smaller UI areas rarely require an in-depth explanation compared to complex tool windows. A short help text should be enough, and it does not require switching contexts.

<format color="Red" style="bold">Incorrect</format>

![](todo-filters-incorrect.png){width=456 style=block}
*Do not use a help topic link in a table and UI areas other than tool windows.*

<format color="Green" style="bold">Correct</format>

![](todo-filters-correct.png){width=456 style=block}
*Place an inline help text under the table.*

### Writing guidelines

See [Punctuation](punctuation.md) and [Capitalization](capitalization.md).

Make the reason text short and descriptive. See [Writing short and clear](writing_short.md).

In actions, avoid words that describe physical actions like _press_ or _click_ — they are obvious from how the link works.

Avoid saying _add new_. Just use _add_ because all that is added is new in the context of an empty UI area.

## Master-detail layout

Provide only the action part for the detail area in a master-detail layout. The detail area is filled when an item is selected in the master part. This behavior is obvious and does not need to be explained.

The default pattern for the action is "_Select_ [entity] _to configure_".

The master area is usually a list or a tree, its empty state instructions should follow the guidelines for lists and trees.

![](app-servers.png){width=586}

![](run-configs.png){width=720 style=block}
*The "Add Java application configuration" link is a shortcut to creating a new configuration instead of clicking the + button in the toolbar.*

## Sizes and placement

The minimum text width is 40 characters. If an area is too narrow to show the minimum text width, show text in area fields, and if no fields are left, under the area borders.

Use non-breaking spaces in an action name and shortcut, so it is not split into two lines.

Use non-breaking spaces for articles and prepositions in the instructional text.

<format color="Red" style="bold">Incorrect</format>

![](nbsp-incorrect.png){width=379}

<format color="Green" style="bold">Correct</format>

![](nbsp-correct.png){width=379}

The text is center-aligned. If possible, the center for the help topic link should be calculated with a 16px inset on the left. This helps visually align the help link with the lines above it.

![](database-tw-markup1.png){width=300}

Fields and vertical spaces:

![](database-tw-markup2.png){width=530}

The text should wrap when a UI area’s width changes:

![](database-tw-horizontal.png){width=579}

![](database-tw.png){width=300}

## Style

The link should not be underlined.

In Darcula:

![](database-tw-darcula.png){width=300}


<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Enabling Internal Mode

<link-summary>Enabling the Internal Mode enables actions and tools useful in plugin development and diagnosing issues.</link-summary>

There are useful tools, such as the <control>Internal Actions</control> menu, that are only visible if the internal mode is enabled in the IDE.

<procedure title="Configuring Internal Mode">

1. Start the IDE.
2. From the main menu, select <ui-path>Help | Edit Custom Properties...</ui-path>.
   This selection opens the <path>idea.properties</path> file.
   If it does not exist, the IDE will prompt to create one.
3. Add the line shown below to the <path>idea.properties</path> file:
   ```properties
   idea.is.internal=true
   ```

4. Save the <path>idea.properties</path> file and restart the IDE.

5. The Internal Actions menu is now available in <ui-path>Tools | Internal Actions</ui-path>.

</procedure>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Execution

<link-summary>Run profile execution lifecycle and description of APIs used to execute processes.</link-summary>

The IntelliJ Platform Execution API allows [running external processes](https://www.jetbrains.com/help/idea/running-applications.html) from within the IDE, e.g., applications, tests, servers, scripts, etc.
These processes can be run from the [editor](editors.md), [project view](project_view.md), run toolbar, or custom [actions](action_system.md).
Executed processes can be stopped, restarted, and their output and logs can be viewed in the run console.
It is possible to manage and persist [Run Configurations](https://www.jetbrains.com/help/idea/run-debug-configuration.html) from the UI.

## Architecture Overview

The key Execution API classes are divided into two groups:
* [Configuration](#configuration-classes)
* [Execution](#execution-classes)

The following diagram shows the relations between the key classes:

```plantuml
@startuml

skinparam DefaultFontName JetBrains Sans
skinparam DefaultFontSize 14
hide empty members
hide circle

package Configuration <<Rectangle>> {
interface RunProfile
interface RunConfiguration
interface RunProfileState
}

package Execution <<Rectangle>> {
abstract class Executor
interface ProgramRunner
class ExecutionEnvironment
class RunContentBuilder
abstract class ExecutionResult
interface ExecutionConsole
abstract class ProcessHandler
}

RunProfile <|.. RunConfiguration
RunProfile --> RunProfileState: creates

RunProfileState --> ExecutionResult: prepares

ExecutionResult o-- "1" ExecutionConsole
ExecutionResult o-- "1" ProcessHandler

ProgramRunner --> RunProfile: executes
ProgramRunner --> Executor
ProgramRunner --> ExecutionEnvironment
ProgramRunner -r-> RunContentBuilder

@enduml
```

### Configuration Classes

[`RunProfile`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RunProfile.java) is a base interface for things that can be executed (e.g., an application started via a `main()` method, a test or test suite, a remote debug session to a specific host, etc.).
It is responsible for building a process that is run and creates a `RunProfileState`.

[`RunProfileState`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RunProfileState.java) holds the information about the process ready to be started, like the command line, current working directory, and environment variables.
The existence of `RunProfileState` allows extensions and other components to patch the run profile and modify the parameters before the process gets executed.
See [standard run profile state classes](#run-profile-state).

[`RunConfiguration`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RunConfiguration.java) is a specific type of run profile, which can be managed and persisted by users from UI.
See the [Run Configurations](run_configurations.md) section for more details.

### Execution Classes

[`Executor`](%gh-ic%/platform/execution/src/com/intellij/execution/Executor.java) describes a specific way of executing run profiles.
The three default executors provided by the IntelliJ Platform are:
* [`DefaultRunExecutor`](%gh-ic%/platform/execution/src/com/intellij/execution/executors/DefaultRunExecutor.java) _(Run)_
* [`DefaultDebugExecutor`](%gh-ic%/platform/xdebugger-api/src/com/intellij/execution/executors/DefaultDebugExecutor.java) _(Debug)_
* [`CoverageExecutor`](%gh-ic%/plugins/coverage-common/src/com/intellij/coverage/CoverageExecutor.java) _(Run with Coverage)_

Custom implementations are rarely required (it may be necessary, e.g., when a profiler integration is implemented).
Executor implementations are registered in the `com.intellij.executor` extension point (EP).

[`ProgramRunner`](%gh-ic%/platform/execution/src/com/intellij/execution/runners/ProgramRunner.java) is responsible for the [execution workflow](#execution-workflow) of a `RunProfile` with a certain `Executor`.
`ProgramRunner` implementations are registered in the `com.intellij.programRunner` EP.

[`ExecutionEnvironment`](%gh-ic%/platform/execution/src/com/intellij/execution/runners/ExecutionEnvironment.java) object aggregates all the objects and settings required to execute the process.
It is used by the `ProgramRunner.execute()` method.

[`RunContentBuilder`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/runners/RunContentBuilder.java) is responsible for building the content of the <control>Run</control> or <control>Debug</control> tool window.
The content is built by the `ProgramRunner` executing the process.

[`ExecutionResult`](%gh-ic%/platform/execution/src/com/intellij/execution/ExecutionResult.java) is prepared by `RunProfileState` class before execution and contains `ExecutionConsole` and `ProcessHandler`.

[`ExecutionConsole`](%gh-ic%/platform/execution/src/com/intellij/execution/ui/ExecutionConsole.java) is a component displaying the result of executing the process.
It can be a console, a test results view, or another similar component.

[`ProcessHandler`](%gh-ic%/platform/util/src/com/intellij/execution/process/ProcessHandler.java) is an object attached to the executed process and allows controlling and accessing the information about the process.
See [standard process handler class](#process-handler).

## Execution Workflow

A standard execution of a process consists of the following steps:

1. Depending on the execution context:
    1. For execution initiated by a user from UI: the user selects a `RunConfiguration` (e.g., by choosing one from the run configurations combo box) and an `Executor` (e.g., by pressing the <control>Run</control> toolbar button).
    2. For programmatic execution: a `RunProfile` instance is created, and an `Executor` is provided.
       Specific run executors can be accessed with `ExecutorRegistry.getInstance().getExecutorById()`.

    {style="alpha-lower"}
2. The `ProgramRunner` that will execute the process is selected.
   The first `ProgramRunner` that returns true from `ProgramRunner.canRun(executorId, runProfile)` is selected from all registered program runners.
3. The `ExecutionEnvironment` is created.
   It aggregates all the information required to run the process as well as the selected `ProgramRunner`, `Executor`, and `RunProfile`.
4. `ProgramRunner.execute(executionEnvironment)` is called, and the actual process is executed.

A standard implementation of `ProgramRunner.execute()` goes through the following steps to execute the process:

1. `RunProfile.getState()` method is called to create a `RunProfileState` object, which describes a process about to be started.
   The command line parameters, environment variables, and other information required to start the process are initialized at this stage.
2. `RunProfileState.execute(executor, programRunner)` is called.
   It starts the process, attaches a `ProcessHandler` to its input and output streams, creates a console to display the process output, and returns an `ExecutionResult` object aggregating the `ExecutionConsole` and the `ProcessHandler`.
3. The `RunContentBuilder` object is created and invoked to display the execution console in a <control>Run</control> or <control>Debug</control> tool window tab.

**Example:**
[`RunAnythingCommandProvider.runCommand()`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/runAnything/activity/RunAnythingCommandProvider.java), which programmatically executes a command typed by a user in the <control>Run Anything</control> popup

## Standard Base Classes

### Run Profile State

The standard base class used as an implementation of `RunProfileState` is [`CommandLineState`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/CommandLineState.java).
It contains the logic for putting together a running process and a console into an `ExecutionResult` but doesn't know anything about how the process is actually started.
For starting the process, it's recommended to use the [`GeneralCommandLine`](%gh-ic%/platform/platform-util-io/src/com/intellij/execution/configurations/GeneralCommandLine.java) class, which takes care of setting up the command line parameters and executing the process.

Alternatively, if the process is a JVM-based one, use the [`JavaCommandLineState`](%gh-ic%/java/execution/impl/src/com/intellij/execution/configurations/JavaCommandLineState.java) base class.
It handles the JVM command line parameters and can take care of details like calculating the classpath for the JVM.
Note that using this class requires [dependency](plugin_dependencies.md) on [the Java plugin](idea.md#java).

### Process Handler

The standard class for monitoring the execution of a process and capturing its output is [`OSProcessHandler`](%gh-ic%/platform/platform-util-io/src/com/intellij/execution/process/OSProcessHandler.java).
Once an instance of `OSProcessHandler` is created from either a `GeneralCommandLine` or a `Process` object, call the `startNotify()` method to capture its output.
To display the exit status of the process in the console, attach a [`ProcessTerminatedListener`](%gh-ic%/platform/ide-core/src/com/intellij/execution/process/ProcessTerminatedListener.java) to the `OSProcessHandler`.

### Displaying Process Output

When a process execution is handled with `CommandLineState`, a console view will be automatically created and attached to the process's output.

Alternatively, it can be handled with the following steps:

1. [`TextConsoleBuilderFactory.createBuilder(project).getConsole()`](%gh-ic%/platform/execution/src/com/intellij/execution/filters/TextConsoleBuilderFactory.java) creates a [`ConsoleView`](%gh-ic%/platform/execution/src/com/intellij/execution/ui/ConsoleView.java) instance.
2. `ConsoleView.attachToProcess()` attaches it to the output of a process.

If the running process uses [ANSI escape codes to color its output](https://en.wikipedia.org/wiki/ANSI_escape_code#Colors), use the [`ColoredProcessHandler`](%gh-ic%/platform/platform-util-io/src/com/intellij/execution/process/ColoredProcessHandler.java) class to display the colors in the IDE console.

#### Console Filters

Console [`Filter`](%gh-ic%/platform/execution/src/com/intellij/execution/filters/Filter.java) allows converting certain strings found in the process output to clickable hyperlinks.
To attach a filter to the console, use `CommandLineState.addConsoleFilters()` or [`TextConsoleBuilder.addFilter()`](%gh-ic%/platform/execution/src/com/intellij/execution/filters/TextConsoleBuilder.java) if the console is created manually.
Two standard filter implementations are [`RegexpFilter`](%gh-ic%/platform/lang-api/src/com/intellij/execution/filters/RegexpFilter.java) and [`UrlFilter`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/filters/UrlFilter.java).

Console filters can be also provided by implementing [`ConsoleFilterProvider`](%gh-ic%/platform/lang-api/src/com/intellij/execution/filters/ConsoleFilterProvider.java) and registering it in `com.intellij.consoleFilterProvider` EP.

## Listening for Execution Events

Implement [`ExecutionListener`](%gh-ic%/platform/execution/src/com/intellij/execution/ExecutionListener.java) and subscribe to [`ExecutionManager#EXECUTION_TOPIC`](%gh-ic%/platform/execution/src/com/intellij/execution/ExecutionManager.kt).
The listener allows for listening to several phases of the process execution lifecycle.
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Example PhpStorm Third-Party Plugins

<link-summary>List of noteworthy PhpStorm third-party plugins.</link-summary>

This page lists some example PhpStorm plugins created by third-party developers.

## Symfony

The Symfony plugin is a free plugin for Symfony framework developers.

There are lots of features included into this plugin, such as Symfony-specific completion and navigation for symbols, templates, service container, Doctrine, translations, routes, forms, events, and more.

* [Official Symfony plugin website](https://symfony2-plugin.espend.de/)
* [GitHub](https://github.com/Haehnchen/idea-php-symfony2-plugin)
* [Symfony Development in PhpStorm](https://www.jetbrains.com/help/phpstorm/symfony-support.html)
* [Symfony plugin on JetBrains Marketplace](https://plugins.jetbrains.com/plugin/7219-symfony-support)

## Laravel

The Laravel plugin is a free plugin for Laravel developers.

It provides code completion and navigation for various Laravel components: controllers, routes, views, configuration, services, and translations.
You can also use Laravel-specific live templates for generating various Laravel entities.

* [GitHub](https://github.com/Haehnchen/idea-php-laravel-plugin)
* [Laravel Development in PhpStorm](https://www.jetbrains.com/help/phpstorm/laravel.html)

## Laravel Idea

The Laravel Idea plugin is a paid plugin for Laravel developers.

It provides a wide array of code generation and code completion features and includes hundreds of useful helpers, including configuration and translation keys, gates names completion, blade support, etc.

* [Documentation](https://laravel-idea.com/docs/3.x/overview)
* [Issue Tracker](https://github.com/laravel-idea/plugin/issues)
* [Laravel Idea plugin on JetBrains Marketplace](https://plugins.jetbrains.com/plugin/13441-laravel-idea)
* [Laravel Development in PhpStorm](https://www.jetbrains.com/help/phpstorm/laravel.html)

## Magicento

Magicento is a paid PhpStorm plugin for Magento developers.
A free limited version is available.
Features include: Goto for factories and template paths, autocomplete for factories, XML files and class names, documentation for XML nodes, evaluation of PHP code inside the Magento environment, and much more to come!

* [Official Magicento website](https://magicento.com/)
* [GitHub](https://github.com/enriquepiatti/Magicento)
* [Magicento on JetBrains Marketplace](https://plugins.jetbrains.com/plugin/7089-magicento)

## YiiStorm

YiiStorm is a plugin for PhpStorm IDE that is adding code navigation enhancements for Yii framework based projects.
Features are: Going from render and renderPartial to the view file.
Includes controllers, partials, and widgets.
Supports all ways of specifying a view: themes, smarty .tpl views and external actions; Going from model name in relations() to the model class; Going from the $this->widget('path.to.widget.Class') call to the widget class; Going from controller actions() to action class.

* [GitHub](https://github.com/cmazx/yiistorm)
* [YiiStorm on JetBrains Marketplace](https://plugins.jetbrains.com/plugin/7182-yiistorm)

## Nette

Nette is a family of mature and stand-alone components for PHP that create a framework.

* [Official Nette website](https://nette.org/en/)

| Name                    | Description                                                                                                                                                                                                                                                                                                                                                                            | Website                                   | GitHub                                                                           | Plugin                                                                            |
|-------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|----------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|
| Nette framework helpers | Nette framework helpers make application development in Nette easier. The plugin provides code completion and navigation for Nette components, annotations, and DI service methods in PHP code. It also implements PHP type by `PhpTypeProvider`.                                                                                                                                      | [Nette web](https://nette.org/en)         | [intellij-nette](https://github.com/nette-intellij/intellij-nette)               | [Nette plugin](https://plugins.jetbrains.com/plugin/7231-nette-framework-helpers) |
| Latte                   | Nette Latte plugin supports Latte language – the safest & truly intuitive templates for PHP. The plugin implements custom language. Partially support PHP like in .php files (code completion, inspections, references to classes, methods, properties, etc.). Supports load config from XML files located in the project. It implements Stub indexes and more around custom language. | [Latte web](https://latte.nette.org/en)   | [intellij-latte](https://github.com/nette-intellij/intellij-latte)               | [Latte plugin](https://plugins.jetbrains.com/plugin/7457-latte)                   |
| Neon                    | Nette Neon is commonly used for any structured data, such as settings, language translations, etc. It is very similar to YAML. The plugin implements custom language. Easy implementation for Go to PHP classes and completion for classes.                                                                                                                                            | [Neon web](https://ne-on.org)             | [intellij-neon](https://github.com/nette-intellij/intellij-neon)                 | [Neon plugin](https://plugins.jetbrains.com/plugin/7060-neon-support)             |
| Nette Tester            | Nette Tester is a simple and yet convenient PHP code testing tool. The plugin implements "run configurations" and "run line markers". Supports run configurations in a remote interpreter (eg: in Docker or docker-compose).                                                                                                                                                           | [Tester web](https://tester.nette.org/en) | [intellij-nette-tester](https://github.com/nette-intellij/intellij-nette-tester) | [Tester plugin](https://plugins.jetbrains.com/plugin/8226-nette-tester)           |

## PHP Annotations

The PHP Annotations plugin extends PhpStorm to support annotations in PHPDoc blocks.

* [PHP Annotations on JetBrains Marketplace](https://plugins.jetbrains.com/plugin/7320-php-annotations)
* [GitHub](https://github.com/Haehnchen/idea-php-annotation-plugin)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Explore the IntelliJ Platform API

<link-summary>Strategies and tools for exploring the API.</link-summary>

Sometimes it can be challenging to implement plugin features for the IntelliJ Platform,
especially when you've hit a roadblock, and you're unsure how to move forward.
This usually happens in two situations:

- You're trying to implement a feature that you've already seen in the IDE, and now you need to find the appropriate extension point or
  class that allows you to hook into the relevant mechanisms.
- You've already started working on a feature, but you're unsure how the different parts of the IntelliJ Platform interact with each other.
  In such situations, it is helpful to be able to navigate the IntelliJ Platform code confidently and to find relevant examples in other plugins.

This guide provides a list of proven strategies that can help you overcome these challenges and gather enough information to continue your work.
Furthermore, the tips below will help build your confidence as you explore the IntelliJ Platform.

<include from="intellij_platform.md" element-id="pluginAlternatives"/>

> See also [](plugin_required_experience.md) about necessary technology knowledge.

## 1 Extension Points (EPs)

### 1.1 Browse Lists of EPs

The most important resource for discovering new EPs is the extensive list provided directly in the
[IntelliJ Platform SDK Documentation](intellij_platform_extension_point_list.md).
On this page, you will find all the EPs, and each entry includes a link to the online source code and a link to the
[IntelliJ Platform Explorer](https://jb.gg/ipe),
which helps you find examples of this EP in other plugins.
Additionally, dedicated Extension Point Lists specific to IDEs are available under _Product Specific_.

### 1.2 Use Autocompletion Information

Another way to discover EPs is by using autocompletion or navigating through EP XML files.
When you open a new tag in your <path>[plugin.xml](plugin_configuration_file.md)</path> file (inside the [`<extensions>`](plugin_configuration_file.md#idea-plugin__extensions) block with `defaultExtensionNs="com.intellij"`),
the IDE will automatically suggest possible EPs.

<img src="plugin_xml_completion_suggestion.gif" alt="Using Completion Suggestions" width="706" border-effect="rounded"/>

This is the first step in discovering new features that haven't been explicitly mentioned in the IntelliJ Platform Docs.
Note that in the completion popup, you can call
[quick documentation](https://www.jetbrains.com/help/idea/viewing-reference-information.html#inline-quick-documentation),
which then shows its properties, the implementation class, as well as a direct link to open usage results from
[IntelliJ Platform Explorer](https://jb.gg/ipe).

### 1.3 Search the IntelliJ Platform Code

Use
[Go to Declaration](https://www.jetbrains.com/help/idea/navigating-through-the-source-code.html#go_to_declaration)
on EPs that are implemented in <path>plugin.xml</path> to navigate to its definition in the XML file.
There you'll find more EPs, and browsing through this list helps you discover features you might not have been aware of.
[Search everywhere](https://www.jetbrains.com/help/idea/searching-everywhere.html)
or
[Go to file](https://www.jetbrains.com/help/idea/discover-intellij-idea.html#navigation-and-search)
helps you search for all files containing extension points.
Just use <path>*ExtensionPoints.xml</path> as the search pattern and select the <control>All Places</control> scope.

However, if a bundled or third-party plugin exposes EPs for others to implement, these EPs are defined in the <path>plugin.xml</path> files
of the plugins and not in the <path>*ExtensionPoints.xml</path> files of the IntelliJ Platform.
One such example is the EPs exposed by the Markdown plugin that adds support for custom languages inside fenced code blocks of Markdown files.

### 1.4 Use Advanced Search

Explore the <path>plugin.xml</path> files of bundled or 3rd party plugins.
If you have the IntelliJ Platform sources available either in your own plugin project or in a separate instance,
you can use
[Structural Search](https://www.jetbrains.com/help/idea/structural-search-and-replace.html)
to find all the files that meet the following criteria:

- The file type is XML
- It contains the tag [`<idea-plugin>`](plugin_configuration_file.md#idea-plugin)
- The file is in the scope <control>Project and Libraries</control>

![Search Structurally for plugin.xml](search_structurally_for_plugin_xml.png)

The search results will contain many plugin XML files.
To find specific implementations of EPs in third-party plugins, use the IntelliJ Platform Explorer ([see 3.2](explore_api.md#32-search-the-intellij-platform-explorer)).
Inspecting the <path>plugin.xml</path> files of other plugins not only helps you discover new features but also shows how things like menu entries or
notification groups can be defined in the XML file.

## 2 Navigating the IntelliJ Platform Source Code

The following tips will help you navigate through the IntelliJ Platform source code if you already have an idea of what you're looking for.
It's important that you're familiar with
[navigating](https://www.jetbrains.com/help/idea/reference-keymap-win-default.html#navigate_from_symbols) and
[searching](https://www.jetbrains.com/help/idea/reference-keymap-win-default.html#find_everything)
source code, as well as other basic features of IntelliJ IDEA.

Many developers keep the
[IntelliJ Community source code](https://github.com/JetBrains/intellij-community)
open in a separate IDE project while working on their plugin.
Others search the source code of the IntelliJ Platform that is attached by default when using a [Gradle](creating_plugin_project.md)-based project.
While both methods work, it should be noted that developing plugins without inspecting the IntelliJ Platform code is nearly impossible,
and all the tips below assume having the sources available.

### 2.1 Find Example Implementations

When working with interfaces or abstract classes of EPs, use IntelliJ IDEA's
[Go to Implementation](https://www.jetbrains.com/help/idea/navigating-through-the-source-code.html#go_to_implementation) or
[Find Usages](https://www.jetbrains.com/help/idea/find-usages-dialog.html)
feature to discover examples of how they are used in the IntelliJ Platform.

### 2.2 Look for Particular Class Names

Access to many features is provided through the `Manager` and `Service` classes, such as:

- `com.intellij.openapi.application.ApplicationManager`
- `com.intellij.psi.PsiManager`

Therefore, it can be helpful to search for classes that match the pattern `com.intellij.*Manager` and look through the list of results.
Note that not all of these classes have the `com.intellij` prefix, and also that you can
[define custom scopes](https://www.jetbrains.com/help/idea/configuring-scopes-and-file-colors.html)
to limit your searches, for example, to only <path>idea-xxx.jar</path> files.

### 2.3 Inspect the Contents of Packages

If you open an EP's interface or abstract class, it is always helpful to inspect the contents of its package.
For instance, the interface of the `com.intellij.sdkType` EP lives in the `com.intellij.openapi.projectRoots` package.
Inspecting the contents of this package shows many related classes that will be useful if you are implementing this feature.

### 2.4 Search for Symbol Names

It is sometimes helpful to search directly for a method, class, and class member if you can guess a part of its name.
You can either use
[Search Everything or Go to Symbol](https://www.jetbrains.com/help/idea/reference-keymap-win-default.html#find_everything).
Note that you need to change the search scope to <control>All Places</control> in the search window to find all occurrences of symbols.

### 2.5 Search by UI Text

If you want to implement a functionality that is similar to an existing IDE feature, but you can't guess the name of the extension point or implementation class, the underlying implementation can be found by the texts displayed in the UI.

* Use the displayed text or its part as the [target for a search](https://www.jetbrains.com/help/idea/finding-and-replacing-text-in-project.html) within the IntelliJ Community project.
  * If the text is localized, this will identify a bundle file there the text is defined. Copy the key from the bundle file identified by the search.
  * Use the key text as the target for a search within the IntelliJ Community project.
    This search locates the implementation or related class, or [plugin configuration file](plugin_configuration_file.md) that uses the text key in an [extension](plugin_extensions.md) declaration.
  * If the key is found in the extension declaration in <path>plugin.xml</path> file, find the implementing class attribute value (in most cases it is `implementationClass`) and
    [navigate to a declaration](https://www.jetbrains.com/help/rider/Navigation_and_Search__Go_to_Declaration.html#74fa64b7),
    or use attribute value as the
    [target of a class search](https://www.jetbrains.com/help/idea/searching-everywhere.html#Searching_Everywhere.xml)
    in the IntelliJ Community codebase to find the implementation.
* If the text is not localized, the search will most probably find the desired implementation or related class.
  In this case, search for the found method/class usages, and repeat this until the actual implementation class is found.

### 2.6 Refrain from Using Internal Classes

As a general remark, the use of implementation classes is strongly discouraged (i.e., classes ending with `Impl` in their name,
located under `impl` package, or included in <path>*-impl.jar</path>).

API annotated with
[`@ApiStatus.Internal`](%gh-java-annotations%/common/src/main/java/org/jetbrains/annotations/ApiStatus.java)
must not be used, see [](api_internal.md) for more details and replacements.

## 3 Tools and References

### 3.1 Use Internal Mode and PsiViewer
{id="internalMode"}

When developing plugins, always enable the [internal mode](enabling_internal.md) in IntelliJ IDEA.
This provides access to a suite of tools to help you develop, debug, and test IntelliJ Platform plugins.

One of its most helpful features is the [UI Inspector](internal_ui_inspector.md),
which lets you investigate all parts of the UI of every IntelliJ-based IDE by simply clicking on them.
Equally important is the <ui-path>Tools | Internal Actions | UI Debugger</ui-path> tool.
It will display all actions that are run by the IDE when you interact with UI elements, for example, by clicking a button.

Finally, the internal mode provides the <ui-path>Tools | View PSI Structure…</ui-path> and <ui-path>Tools | View PSI Structure of Current File…</ui-path> actions,
which allow you to analyze the [PSI tree](psi.md), please see [documentation](https://www.jetbrains.com/help/idea/psi-viewer.html).
The [PsiViewer plugin](https://plugins.jetbrains.com/plugin/227-psiviewer) is a separate plugin with similar capabilities for inspecting PSI trees,
and it comes with a dedicated tool window that displays information on the fly.
However, it does not display information about [stubs](stub_indexes.md) or [formatting models](code_formatting.md).

### 3.2 Search the IntelliJ Platform Explorer

The [IntelliJ Platform Explorer](https://plugins.jetbrains.com/intellij-platform-explorer)
is a search tool for browsing [Extension Points](plugin_extensions.md) (EP) and [Listeners](plugin_listeners.md) inside existing implementations of all open-source IntelliJ Platform plugins published on [JetBrains Marketplace](https://plugins.jetbrains.com).
You can navigate directly to the source files to find inspiration when implementing your own extensions and listeners for IntelliJ-based IDEs.

### 3.3 Browse Available References

The IntelliJ Platform SDK Documentation should always be the first resource you check for information.
Here is a condensed list you can use for further reference:

- [](useful_links.md)
- [](learning_resources.md)
- [](intellij_platform_extension_point_list.md)
- Section on [exploring module and plugin APIs](plugin_compatibility.md#exploring-module-and-plugin-apis).
- List of [notable](api_notable.md) and [incompatible](api_changes_list.md) API changes.

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# External Builder API and Plugins
<primary-label ref="IntelliJIDEA"/>

<link-summary>Working with External Builder API.</link-summary>

> Adding JPS support to your plugin requires Java plugin to be present for it to work.
> Please see [Plugin Dependencies](plugin_dependencies.md) on how to set up your plugin with required dependency.
>
{style="note"}

### External Build Process Workflow

When the user invokes an action that involves executing an external build (Make, Build Artifacts, etc.), the following steps happen:

* Before-compile tasks are performed in the IDE process.
* Some source generation tasks that depend on the PSI (e.g., UI designer form to source compilation) are executed in the IDE process.
* [`BuildTargetScopeProvider`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/impl/BuildTargetScopeProvider.java) extensions are called to calculate the scope of the external build (the set of build targets to compile based on the target module to make and the known set of changes).
* The external build process is spawned (or an existing build process background process is reused).
* The external build process loads the project model (<path>.idea</path>, <path>.iml</path> files, and so on), represented by a [`JpsModel`](%gh-ic%/jps/model-api/src/org/jetbrains/jps/model/JpsModel.java) instance.
* The full tree of targets to build is calculated based on each build target's dependencies to be compiled.
* For each target, the set of builders capable of building this target is calculated.
* For every target and every builder, the `build()` method is called.
  This can happen in parallel if the "Compile independent modules in parallel" option is enabled in the settings.
  For module-level builders, the order of invoking builders for a single target is determined by their category; for other builders, the order is undefined.
* Caches to record the state of the compilation are saved.
* Compilation messages reported through the [`CompileContext`](%gh-ic%/jps/jps-builders/src/org/jetbrains/jps/incremental/CompileContext.java) API are transmitted to the IDE process and displayed in the UI (in the *Messages* view).
* Post-compile tasks are executed in the IDE process.

### Incremental Build

To support incremental build, the build process uses several caches which are persisted between build invocations.
Even if your compiler doesn't support incremental build, you still need to report correct information so that incremental build works correctly for other compilers.

* [`SourceToOutputMapping`](%gh-ic%/jps/jps-builders/src/org/jetbrains/jps/builders/storage/SourceToOutputMapping.java) is a many-to-many relationship between source files and output files ("which source files were used to produce the specified output file").
  It's filled by calls to `BuildOutputConsumer.registerOutputFile()` and `ModuleLevelBuilder.OutputConsumer.registerOutputFile()`.

The IDE monitors the project content changes and uses the information from those caches to generate the set of dirty and deleted files for every compilation. (Dirty files need to be recompiled, and deleted files need to have their output deleted).
A builder can also report additional files as dirty (e.g., if a method is deleted, the builder can report the classes using this method as dirty.) A module-level builder can add some files to the dirty scope; if this happens, and if the builder returns `ADDITIONAL_PASS_REQUIRED` from its `build()` method, another round of builder execution for the same module chunk will be started with the new dirty scope.

A builder may also want to have its custom caches to store additional information to support the partial recompilation of a target (e.g., the dependencies between Java files in a module).
To store this data, you can either store arbitrary files in the directory returned from `BuildDataManager.getDataPaths().getTargetDataRoot()` or use a higher-level API: `BuildDataManager.getStorage()`

To pass custom data between the invocation of the same builder between multiple targets, you can use `CompileContext.getUserData()` and `CompileContext.putUserData()`.

### Services and Extensions in External Builder

The external builder process uses the standard Java [services](https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html) mechanism to support plugins.
There are several service interfaces (e.g. [`BuilderService`](%gh-ic%/jps/jps-builders/src/org/jetbrains/jps/incremental/BuilderService.java) which can be implemented in plugins to extend the builder functionality.
An implementation of a service needs to be registered by creating the <path>META-INF/services/\$service-interface-fqn\$</path> file containing the implementation class's qualified name.
E.g. `BuilderService` implementations are registered in <path>META-INF/services/org.jetbrains.jps.incremental.BuilderService</path> file.
These files don't have extensions, so you need to map corresponding patterns to text files in IDE settings.

### Registering a Plugin for External Builder

Sources of a plugin for External Builder should be put in a separate module.
By convention, such a module has a name '...-jps-plugin', and its sources are placed under the <path>jps-plugin</path> directory in the main plugin directory.
Use `com.intellij.compileServer.plugin` extension point to add the plugin to the classpath of the external build process, the plugin JAR should be named <path>\$JPS_module_name\$.jar</path>. <ui-path>Build | Prepare Plugin Module for Deployment</ui-path> action will automatically pack the 'jps-plugin' part to a separate JAR accordingly.

See [IntelliJ Platform Explorer](https://jb.gg/ipe?extensions=com.intellij.compileServer.plugin) for samples.

### Debugging a Plugin for External Builder

**If your test IDE is IntelliJ IDEA 16.0 or newer**

Switch on "Debug Build Process" toggle action (available via 'Find Action') in the test IDE.
After that, every time compilation is run, the build process will wait for debugger connection on some (random) port and will show the port number in the status bar.
In a working copy of IDE, a "Remote" run configuration should be created and pointed to this port.
Suppose you often need to debug external builders and want to reuse the created "Remote" run configuration.
In that case, you may fix the port number by adding the following VM option to the plugin run configuration:

```
-Dcompiler.process.debug.port=<port-number>
```

**If your test IDE is IntelliJ IDEA 15.0 or older**

Start IDE with your plugin with the following VM option:

```
-Dcompiler.process.debug.port=<port-number>
```

After that, every time compilation is run in the test IDE, the build process will wait for debugger connection on this port and then proceed.  In a working copy of IDE, a "Remote" run configuration should be created and pointed to this port.
Specifying port "-1" will disable debugging mode.

### Profiling External Build Process

The build process has built-in self-CPU-profiling capabilities.

<procedure title="Enabling CPU profiling for build process">

1. _2023.2+_ Install [YourKit Profiler for IDE Performance Testing](https://plugins.jetbrains.com/plugin/20892-yourkit-profiler-for-ide-performance-testing) plugin
2. Copy <path>\$IDE_HOME\$/lib/yjp-controller-api-redist.jar</path> and <path>\$IDE_HOME\$/bin/yjpagent.*</path> files to <path>\$IDE_SYSTEM_DIR\$/compile-server</path>
3. In <ui-path>Settings | Build, Execution, Deployment | Compiler | Java Compiler</ui-path> add `-Dprofiling.mode=true` in <control>Additional command line parameters</control>
4. Make sure <control>Build project automatically</control> in <ui-path>Settings | Build, Execution, Deployment | Compiler</ui-path> is disabled

</procedure>

After this, every build process run should result in a CPU snapshot stored in <path>\$USER_HOME\$/Snapshots</path> directory.
Snapshots are named like <path>ExternalBuild\-\$DATE\$.snapshot</path>.

Specifying `-Dprofiling.mode=false` will turn profiling off.
Please capture a couple of snapshots for the situations you believe the build should work much faster than it does.

Please create an issue in the issue tracker and attach generated <path>*.snapshot</path> files to it or upload them as [described here](https://intellij-support.jetbrains.com/hc/en-us/articles/206869619) and specify links in the issue.
Please also provide details about the memory and other VM settings for the build process you were using.

### Accessing External Build Process' Logs

The log file is located under the directory:

```
<ide-system-directory>/log/build-log
```

There, both <path>build-log.log</path> and <path>build-log.properties</path> files can be found.
The <path>build-log.properties</path> is a log4j configuration file, where the log level and desired logging categories can be adjusted.
This file contains logging from all build sessions, including those from the auto-make.

In IntelliJ Platform versions before version 14.1, log4j configuration was stored in <path>build-log.xml</path>.

### Accessing Project Model and Configuration from External Build

The project model in the External Build process is provided by JPS (*JetBrains Project System*).
A project is represented by [`JpsProject`](%gh-ic%/jps/model-api/src/org/jetbrains/jps/model/JpsProject.java), a module by [`JpsModule`](%gh-ic%/jps/model-api/src/org/jetbrains/jps/model/JpsProject.java), and so on.
Suppose your compiler depends on something that isn't added to the model yet (e.g., some facet settings).
In that case, you need to extend the JPS model (use `JpsOsmorcModuleExtension` as a reference implementation) and provide an implementation of [`JpsModelSerializerExtension`](%gh-ic%/jps/model-serialization/src/org/jetbrains/jps/model/serialization/JpsModelSerializerExtension.java) to load the configuration from project files.

#### Implementing Builder

If your compiler isn't involved in the compilation of an existing [`BuildTarget`](%gh-ic%/jps/jps-builders/src/org/jetbrains/jps/builders/BuildTarget.java), you need to create a new implementation of `BuildTarget` and `BuildTargetType`.
Also, register an implementation of [`BuildTargetScopeProvider`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/impl/BuildTargetScopeProvider.java) extension on the IDE side to add required targets to the build scope.
The builder implementation should extend either [`TargetBuilder`](%gh-ic%/jps/jps-builders/src/org/jetbrains/jps/incremental/TargetBuilder.java) or [`ModuleLevelBuilder`](%gh-ic%/jps/jps-builders/src/org/jetbrains/jps/incremental/ModuleLevelBuilder.java) class and should be created using [`BuilderService`](%gh-ic%/jps/jps-builders/src/org/jetbrains/jps/incremental/BuilderService.java) extension.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# External System Integration

<link-summary>Overview and introduction to implementing an External System (e.g., Maven, Gradle, sbt) support.</link-summary>

This page provides a high-level overview of the *External System* sub-system.
There are multiple project management systems ([Apache Maven](https://maven.apache.org/), [Gradle](https://www.gradle.org/), [sbt](https://www.scala-sbt.org/), etc.) and IntelliJ Platform provides a mechanism to support them in IDEs.

Most of the project management systems provide a similar set of facilities from the integration point of view:

* build a project from external system config (<path>pom.xml</path>, <path>build.gradle.kts</path>, etc.)
* provide a list of available tasks
* allow to execute a particular task
* and more

That means that we can separate external system-specific logic and general IDE processing.
The *External System* sub-system provides a simple API for wrapping external system elements and extensible IDE-specific processing logic.

## Project Management

### Project Data Domain

The external system wrapper is required to be able to build project info on the basis of the given external system config.
That information is built with the following base classes:

* [`DataNode`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/model/DataNode.java)
* [`Key`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/model/Key.java)
* [`ExternalEntityData`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/model/project/ExternalEntityData.java)

```plantuml
@startuml

skinparam DefaultFontName JetBrains Sans
skinparam DefaultFontSize 14
hide empty members
hide circle

class "parent DataNode" as parent
class DataNode
together {
  class "child n DataNode" as child3
  class "..." as child2
  class "child 1 DataNode" as child1
  class Key
  class ExternalEntityData
}

' Define the class relationships
parent -- DataNode

ExternalEntityData --o DataNode
Key --o DataNode
DataNode -- child1
DataNode -- child2
DataNode -- child3

@enduml
```

The `DataNode` class is just a holder for the target data (a data type is defined by the `Key`).
Multiple `DataNode` objects might be organized in directed graph where every edge identifies parent-child relation.

For example, a simple one-module project might look as below:

```plantuml
@startuml

skinparam DefaultFontName JetBrains Sans
skinparam DefaultFontSize 14
skinparam DefaultTextAlignment center
hide empty members
hide circle

rectangle "DataNode<ProjectData>" as root
rectangle "DataNode<ModuleData>" as child1
rectangle "DataNode<LibraryData>\n(JUnit)" as child2
rectangle "DataNode<ContentRootData>" as child11
rectangle "DataNode<LibraryDependencyData>\n(JUnit)" as child12

' Define the class relationships
root -- child1
root -- child2

child1 -- child11
child1 -- child12

@enduml
```

The IDE provides a set of built-in `Key` and `ExternalEntityData` classes but any external system integration or third-party plugin developer might enhance project data by defining custom `Key` and `ExternalEntityData` and store them at a child of appropriate `DataNode`.

### Managing Project Data

Processing project data built on an external system config basis can be performed with [`ProjectDataService`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/service/project/manage/ProjectDataService.java).
It is a strategy which knows how to manage particular `ExternalEntityData`.
For example, when we want to import a project from an external model, we can start with the top level `DataNode` which references project info and then import its data using corresponding service.

Custom services can be registered via [`com.intellij.externalProjectDataService`](https://jb.gg/ipe?extensions=com.intellij.externalProjectDataService) extension point.

The good thing is that we can separate project parsing and management here.
That means that a set of `DataNode`, `Key` and `ProjectDataServices` can be introduced for particular technology and then every external system integration can build corresponding data if necessary using it.

### Importing from External Model

The IntelliJ Platform provides an API for importing projects from external models:

* [`ProjectImportBuilder`](%gh-ic%/java/idea-ui/src/com/intellij/projectImport/ProjectImportBuilder.java)
* [`ProjectImportProvider`](%gh-ic%/java/idea-ui/src/com/intellij/projectImport/ProjectImportProvider.java)

There are two classes built on the *template method* pattern which simplify implementation:

* [`AbstractExternalProjectImportBuilder`](%gh-ic%/java/idea-ui/src/com/intellij/openapi/externalSystem/service/project/wizard/AbstractExternalProjectImportBuilder.java)
* [`AbstractExternalProjectImportProvider`](%gh-ic%/java/idea-ui/src/com/intellij/openapi/externalSystem/service/project/wizard/AbstractExternalProjectImportProvider.java)

Note that [`AbstractExternalProjectImportBuilder`](%gh-ic%/java/idea-ui/src/com/intellij/openapi/externalSystem/service/project/wizard/AbstractExternalProjectImportBuilder.java) is built on top of the 'external system settings' controls.

Concrete implementations should be registered in [`com.intellij.projectImportBuilder`](https://jb.gg/ipe?extensions=com.intellij.projectImportBuilder) and [`com.intellij.projectImportProvider`](https://jb.gg/ipe?extensions=com.intellij.projectImportProvider) extension points accordingly.

Example of the project import provider and builder for Gradle:

* [`JavaGradleProjectImportProvider`](%gh-ic%/plugins/gradle/java/src/service/project/wizard/JavaGradleProjectImportProvider.kt)
* [`JavaGradleProjectImportBuilder`](%gh-ic%/plugins/gradle/java/src/service/project/wizard/JavaGradleProjectImportBuilder.kt)

## Auto-Import

It's possible to configure external system integration to automatically refresh project structure when external project's config files are modified.

> From 2020.1, auto-import cannot be disabled by a user.
>

### Auto-Import for `ExternalSystemManager` Implementation

Describe project's settings files to track by having external system [`ExternalSystemManager`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/ExternalSystemManager.java) implement [`ExternalSystemAutoImportAware`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/ExternalSystemAutoImportAware.java).

> The `ExternalSystemAutoImportAware.getAffectedExternalProjectPath()` method is called quite often, that's why it's expected to return control as soon as possible.
> Helper `CachingExternalSystemAutoImportAware` class might be used for caching, i.e. `ExternalSystemManager` which implements `ExternalSystemAutoImportAware` can have a field like `new CachingExternalSystemAutoImportAware(new MyExternalSystemAutoImportAware())` and delegate `ExternalSystemAutoImportAware.getAffectedExternalProjectPath()` calls to it.
>
{style="note"}

### Auto-Import for Standalone External Systems

Some external systems don't have `ExternalSystemManager` (e.g., Maven), but they also can use auto-import core to track changes in settings files.
For this, implement `ExternalSystemProjectAware` interface that describes settings files for tracking and an action to reload the project model.
Then register the instance with `ExternalSystemProjectTracker` to start tracking.

> Multiple `ExternalSystemProjectAware` instances can correspond to a single external system.
> It allows performing project reload differently depending on the set of settings files (project aware per settings file, per module, per external project, etc.).
>
{style="note"}

### Icon for Reload Notification

<primary-label ref="2020.1"/>

The icon for reload notification can be specified per external system.
Implement [`ExternalSystemIconProvider`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/ui/ExternalSystemIconProvider.kt) and register via [com.intellij.externalIconProvider](https://jb.gg/ipe?extensions=com.intellij.externalIconProvider) extension point in <path>[plugin.xml](plugin_configuration_file.md)</path>.
Alternatively, set `reloadIcon` field external system implements `ExternalSystemIconProvider` directly.

## Settings

All external system settings controls are represented by implementations of [`ExternalSystemSettingsControl`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/util/ExternalSystemSettingsControl.java).
There are general and linked project-level external system settings.
A particular external system settings UI contains the following items:

* General system settings
* Linked external projects list
* Project-level settings for the selected project

It's recommended to extend from [`AbstractExternalProjectSettingsControl`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/service/settings/AbstractExternalProjectSettingsControl.java) for implementing project-level settings control as it already handles some of them.

**Examples:**

* [`GradleSystemSettingsControl`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/service/settings/GradleSystemSettingsControl.java) handling the <control>General settings</control> in <ui-path>Settings | Build, Execution, Deployment | Build Tools | Gradle</ui-path>
* [`GradleProjectSettingsControl`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/service/settings/GradleProjectSettingsControl.java) handling the selected Gradle project settings in <ui-path>Settings | Build, Execution, Deployment | Build Tools | Gradle</ui-path>

A similar approach is used for providing settings in importing external project UI.
Implementation is expected to extend [`AbstractImportFromExternalSystemControl`](%gh-ic%/java/idea-ui/src/com/intellij/openapi/externalSystem/service/settings/AbstractImportFromExternalSystemControl.java) and instead of linked external projects list it contains target external project path control.

## Testing

<primary-label ref="2022.1"/>

Use `com.jetbrains.intellij.platform:external-system-test-framework` from [](intellij_artifacts.md).

Relevant base classes:

* [`ExternalSystemImportingTestCase`](%gh-ic%/platform/external-system-api/testFramework/src/com/intellij/platform/externalSystem/testFramework/ExternalSystemImportingTestCase.java)
* [`ExternalSystemTestCase`](%gh-ic%/platform/external-system-api/testFramework/src/com/intellij/platform/externalSystem/testFramework/ExternalSystemTestCase.java)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Facet

<link-summary>Introduction to facets representing a framework/technology configuration for a module.</link-summary>

<tldr>

**Product Help:** [Facets](https://www.jetbrains.com/help/idea/facet-page.html), [Adding frameworks (facet)](https://www.jetbrains.com/help/idea/adding-support-for-frameworks-and-technologies.html)

</tldr>

A facet represents configuration specific for a particular framework/technology, associated with a module.
A module can have multiple facets.
For example, Spring Framework-specific configuration is stored in a dedicated [Spring facet](https://www.jetbrains.com/help/idea/spring-projects.html).

## Working with Facets

<include from="project.md" element-id="useWorkspaceModelAPI"/>

### Managing Facets

To create, search, and access the list of facets for a module, use [`FacetManager`](%gh-ic%/platform/lang-core/src/com/intellij/facet/FacetManager.java).

### Facet-Based Tool Window

A [tool window](tool_windows.md) dependent on the existence of given facet(s) can be registered via `com.intellij.facet.toolWindow` extension point.

## Facet Basics Sample

See [Facet Basics](%gh-sdk-samples-master%/facet_basics) sample plugin project.
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Plugin Development FAQ

<link-summary>List of plugin development forum topics with frequently asked question.</link-summary>

This FAQ is a topical index of questions that have been asked (and answered) on our [IntelliJ IDEA Open API and Plugin Development forum](https://intellij-support.jetbrains.com/hc/en-us/community/topics/200366979-IntelliJ-IDEA-Open-API-and-Plugin-Development).

> See also [Explore the IntelliJ Platform API](explore_api.md) for more information and strategies.
>

## Accessing and Modifying the Source Code

> See also [](psi.md) and [](psi_cookbook.md)

* [How do I find all subclasses of a class?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206791895-finding-all-derived-class-given-parent-class)
* [How do I find all anonymous classes created in a class?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206792205-How-to-find-anonymous-classes-in-PsiClass-)
* [How do I calculate the value of a string literal token?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206139829-How-to-evaluate-the-value-of-PsiJavaToken-of-STRING-LITERAL-type)
* [How do I rename or move a Java class?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206791825-How-to-rename-a-class-)
* [How do I build the list of all classes used by a given class or package?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206139469-Using-DependencyValidationManager-to-Get-Required-Classes)
* [How do I insert whitespace into the PSI?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206143839-Adding-PsiElements-to-a-PsiFile)
* [How do I add properties to a .properties file?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206142279-Dynamically-add-new-properties-to-properties-files)
* [How do I find specific method calls inside a PsiMethod?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206143579-finding-a-statement-within-a-PsiMethod)
* [What is the lifecycle of a PSI element?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206796015-What-is-the-lifecycle-of-a-PsiElement-)
* [How do I create a new class in the given package?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206771665-Creating-a-new-class)
* [How do I make a PsiClass extend another PsiClass?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206794255-How-to-make-a-PsiClass-derive-from-another-one-)
* [How do I find references to a class from non-Java files?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206800695-How-to-obtain-the-references-to-a-class-from-non-java-files-)
* [How do I find the source file given the path to a .class file?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206800595-How-to-find-the-source-for-a-class-file)
* [How do I find classes with the specified non-qualified name?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206146759-How-to-resolve-unqualified-name-to-possible-PsiClasses-)

## Working with XML and XML DOM
*  [How do I change the value of an XML attribute through the PSI?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206139639-Change-xml-attribute-value)
*  [How do I programmatically register a DTD or schema?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206795425-How-to-register-DTD-with-idea)

## Refactoring
*  [How can I receive notifications about refactoring events?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206795955-Refactoring-Listeners)
*  [How do I show a refactoring dialog programmatically?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206800005-How-to-invoke-refactoring-dialog-not-refactoring-itself-)

## Make/Compile
*  [How do I get access to class files generated by javac?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206800625-Implementing-a-ClassInstrumentingCompiler-how-to-get-the-generated-class-files)

## Version Control Integration
*  [Can I provide line status markers for files in a custom file system?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206791585-Editor-diff-functionality-for-custom-file-system)
*  [How do I update the state of VCS actions depending on file status?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206791975-VCS-context-menu)
*  [How can I find out the module of a deleted file?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206792195-Module-for-deleted-file-)
*  [Can I provide additional decorations for changelists in the Changes view?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206139549-Is-it-possible-to-decorate-change-lists-)
*  [How do I report out-of-date files?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206791775-VCS-OpenAPI-what-to-do-with-files-detected-as-out-of-date-)

## Editors, Documents and Files
*  [Why doesn't the file change on disk after I changed it through the PSI?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206791625-Action-doesn-t-see-changes-in-xml-file)
*  [Can I hook into the file save logic?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206790685-Can-you-tie-into-the-file-save-logic-)
*  [Can I mark a part of a file as read-only?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/207042355-Read-only-section-in-editor)
*  [How do I control what happens when the user tries to edit such a part?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206791375-Using-locked-regions)
*  [How can I show several editors for a single file in tabs?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206795495-Alternative-Editors-ala-HTML-Preview)
*  [Can I open an editor which has no underlying file on disk?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206135449-Create-an-Editor-for-a-non-physical-file)
*  [How do I highlight elements in a source code editor?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206143909-MarkupModel-navigate-highlighted-elements)
*  [How do I allow to navigate between highlighted elements using Find Next?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206143879-HighlightManager-how-to-enable-F3-functionality)
*  [How do I get the active editor instance?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206141119-how-to-get-the-Editor-from-PsiElement-)
*  [How do I clear the read-only status of a file?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206142039-Clear-read-only-status)
*  [How can I show an editor with error highlighting in a tool window?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206146679-Error-highlighting-in-Editors)

## Inspections
*  [How can I provide a quick fix that creates a method?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206142769-Triggering-Create-Method-intention)
*  [Is it possible to inspect only the elements that have been modified after the last full inspection?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206800645-How-to-inspect-only-the-elements-modified-since-the-last-class-inspection)
*  [ExternalAnnotator not in sync with current editor](https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000337510-Only-trigger-externalAnnotator-when-the-file-system-is-in-sync)

## Project Structure
*  [Can I add a new module dependency storage format?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206137859-Dependency-storage-formats-)
*  [What is the Pair to be passed to JavaModuleBuilder.setSourcePaths()?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206143559-Usage-of-class-Pair-A-B-)

## Custom Languages
*  [How do I provide auto-popup code completion in my language?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206139359-Autopopup-code-completion-in-custom-language)
*  [How to make a closing brace unindent?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206797085-Custom-Language-How-to-make-a-closing-brace-unindent-)
*  [How do I enable debugging for my custom language which is compiled into Java?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206786875-Debugging-custom-languages-)
*  [How do I generate virtual Java classes mirroring the classes of my language?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206143749-Custom-languages-masquarding-as-a-java-source-file-within-IntelliJ)

## User Interface
*  [How do I provide animated status bar notifications?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206791945-IDE-Notifications)
*  [How do I enable file name completion in a combo box?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206139509-Combobox-with-Browse-Button-and-Autocompletion-)
*  [How do I show a popup with left-aligned and right-aligned parts for each item?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206139049-popup-menu-with-left-and-right-aligned-items)
*  [How do I provide a custom icon for files/PSI elements?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206143779-Is-it-possible-to-change-icon-of-file-in-Project-view-)
*  [Can I show a progress indicator for WriteActions?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206139159-WriteActions-and-ProgressIndicator)
*  [How do I show a custom window or popup based on Structure View?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206142679-Opening-a-customised-StructureView)
*  [How do I show the package selector dialog programmatically?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206794265-Package-selector-dialog)
*  [How do I provide syntax and error highlighting in a combo box editor?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206800495-EditorTextField-in-3403-How-to-get-an-Editor-that-does-error-highlighting-)
*  [How can I provide Close and Rerun buttons in my Usage View window?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206146779-How-to-get-a-Close-button-in-an-own-Usage-View-)
*  [How can I display the SDK list in a JComboBox?](https://stackoverflow.com/questions/51499884/how-to-display-the-sdk-list-in-a-jcombobox)

## General
*  [How can I implement a custom stack trace analyzer?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206142959-Stack-Analyzer-extension)
*  [How do I open a project programmatically?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206146969-how-to-open-a-project-)
*  [How do I get the folder of the currently selected file?](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206121889-How-to-get-the-folder-of-currenctly-selected-file)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# File and Class Choosers

<link-summary>Overview of APIs allowing to create file and class choosers.</link-summary>

## File Choosers

### Via Dialog
To let a user choose a file, directory or multiple files, use the [`FileChooser.chooseFiles()`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/fileChooser/FileChooser.java) method.
This method has multiple overloads.
The best method to use is the one which returns void and takes a callback receiving the list of selected files as a parameter.
This is the only overload which will display a native file open dialog on macOS.

The [`FileChooserDescriptor`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/fileChooser/FileChooserDescriptor.java) class allows you to control which files can be selected.
The constructor parameters specify whether files and/or directories can be selected, and whether multiple selection is allowed (see [`FileChooserDescriptorFactory`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/fileChooser/FileChooserDescriptorFactory.java) for common variants).

For more fine-grained control over the allowed selection, you can overload the `isFileSelectable()` method.
You can also customize the presentation of files by overriding `getIcon()`, `getName()` and `getComment()` methods.
Note that the native macOS file chooser does not support most of the customizations, so if you rely on them, you need to use an overload of `chooseFiles()` which displays the standard IntelliJ Platform dialog.

### Via Text Field

A very common way of using file choosers is to use a text field for entering the path with an ellipsis button (<control>...</control>) for showing the file chooser.
To create such a control, use the [`TextFieldWithBrowseButton`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/TextFieldWithBrowseButton.java) component and call the `addBrowseFolderListener()` method on it to set up the file chooser.
As an added bonus, this will enable filename completion when entering paths in the text box.

### Via Tree

An alternative UI for selecting files, which works best when the most common way of selecting a file is by typing its name, is available through the
[`TreeFileChooserFactory`](%gh-ic%/platform/lang-api/src/com/intellij/ide/util/TreeFileChooserFactory.java) class.

The dialog shown by this API has two tabs:

*  One shows the project structure
*  Another shows a list of files similar to the one used by the <ui-path>Navigate | File</ui-path> popup.

To show the dialog, call `showDialog()` on the chooser returned from `createFileChooser()`, and then call `getSelectedFile()` to retrieve the user's selection.

## Class and Package Choosers

If you want to offer the user a possibility to select a Java class, you can use the [`TreeClassChooserFactory`](%gh-ic%/java/openapi/src/com/intellij/ide/util/TreeClassChooserFactory.java) class.
Its different methods allow you to specify the scope from which the classes are taken, to restrict the choice to descendants of a specific class or implementations of an interface, and to include or exclude inner classes from the list.

For choosing a Java package, you can use the [`PackageChooserDialog`](%gh-ic%/java/java-impl/src/com/intellij/ide/util/PackageChooserDialog.java) class.

> To use Java-specific components, an explicit dependency on the Java plugin is required.
> See [](plugin_compatibility.md#java) for details.
>
{style="note"}
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# File and Code Templates

<link-summary>File templates allow generating files and code fragments containing repetitive text and patterns.</link-summary>

<tldr>

**Product Help:** [File and Code Templates](https://www.jetbrains.com/help/idea/settings-file-and-code-templates.html), [File templates](https://www.jetbrains.com/help/idea/using-file-and-code-templates.html), [Templates with multiple files](https://www.jetbrains.com/help/idea/templates-with-multiple-files.html)

</tldr>

The _File templates_ mechanism allows generating files and code fragments containing repetitive text and patterns.
Its main purpose is to relieve users from unnecessary manual work by generating boilerplate code automatically.

File templates can be used to create new project files populated with predefined content like code scaffolds or license headers that are specific to a certain file type and context.
For example, when a new Java class is created in IntelliJ IDEA, the file already contains a class declaration with the provided name and empty body.
File Templates are not limited to creating a single file.
It is possible to create [templates with child/multiple files](https://www.jetbrains.com/help/idea/templates-with-multiple-files.html) used for a set of related files, e.g., model, view and controller classes, at once in an MVC framework.

Another use case is generating code fragments from code intentions and fixes, e.g., adding a test method inside an existing test class or a quick fix for adding a missing interface method implementation.

As file templates are based on [Apache Velocity](https://velocity.apache.org/), their content is not static.
A template can contain dynamic parts based on the context, e.g., project or package name, created entity name, author data, and more.
It is also possible to create custom properties and populate them with the required values.

The contents of all listed file templates can be edited in the IDE settings so that users can adjust them to their specific needs.

These sections describe how to add File and Code Templates, and their associated building blocks, to plugins:
* [](providing_file_templates.md)
* [](using_file_templates.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# File-Based Indexes

<link-summary>Introduction to file-based indexes allowing to store information about presence of some values in files, and accessing it by keys in a performant way.</link-summary>

File-based indexes are based on a [Map/Reduce architecture](https://en.wikipedia.org/wiki/MapReduce).
Each index has a specific type of key and a particular type of value.

The key is what's later used to retrieve data from the index.

*Example:* in the word index, the key is the word itself.

The value is arbitrary data, which is associated with the key in the index.

*Example:* in the word index, the value is a mask indicating in which context the word occurs (code, string literal, or comment).

In the simplest case, when one needs to know in what files some data is present, the value has type `Void` and is not stored in the index.

When the index implementation indexes a file, it receives a file's content and returns a map from the keys found in the file to the associated values.

When accessing an index, specify the key you're interested in and get back the list of files in which the key occurs, and the value associated with each file.

> In some cases, using [Gists](indexing_and_psi_stubs.md#gists) can be considered as an alternative.
>

## Implementing a File-Based Index

> A relatively simple file-based index implementation is the [UI Designer bound forms index](%gh-ic%/plugins/ui-designer/src/com/intellij/uiDesigner/binding/FormClassIndex.java), storing FQN of bound implementation class for [GUI Designer](https://www.jetbrains.com/help/idea/gui-designer-basics.html) <path>.form</path> files.
>

Each specific index implementation is a class extending [`FileBasedIndexExtension`](%gh-ic%/platform/indexing-api/src/com/intellij/util/indexing/FileBasedIndexExtension.java) registered via `com.intellij.fileBasedIndex` extension point.

An implementation of a file-based index consists of the following main parts:

* `getIndexer()` returns the [`DataIndexer`](%gh-ic%/platform/util/src/com/intellij/util/indexing/DataIndexer.java) implementation actually responsible for building a set of key/value pairs based on file content.
* `getKeyDescriptor()` returns the [`KeyDescriptor`](%gh-ic%/platform/util/src/com/intellij/util/io/KeyDescriptor.java) responsible for comparing keys and storing them in a serialized binary format.
   Probably the most commonly used implementation is [`EnumeratorStringDescriptor`](%gh-ic%/platform/util/src/com/intellij/util/io/EnumeratorStringDescriptor.java), which is designed for storing identifiers efficiently.
* `getValueExternalizer()` returns the [`DataExternalizer`](%gh-ic%/platform/util/src/com/intellij/util/io/DataExternalizer.java) responsible for storing values in a serialized binary format.
* `getInputFilter()` allows restricting the indexing only to a certain set of files.
  Consider using [`DefaultFileTypeSpecificInputFilter`](%gh-ic%/platform/indexing-api/src/com/intellij/util/indexing/DefaultFileTypeSpecificInputFilter.java).
* `getName()` returns a unique index ID.
  Consider using fully qualified index class name to not clash with other plugins defining index with the same ID, e.g.,&nbsp;`com.example.myplugin.indexing.MyIndex`.
* `getVersion()` returns the version of the index implementation.
  The index is automatically rebuilt if the current version differs from the version of the index implementation used to build it.

If there's no value to associate with the files (i.e., value type is `Void`), simplify the implementation by extending [`ScalarIndexExtension`](%gh-ic%/platform/indexing-api/src/com/intellij/util/indexing/ScalarIndexExtension.java).
In case of single value per file, extend from [`SingleEntryFileBasedIndexExtension`](%gh-ic%/platform/indexing-api/src/com/intellij/util/indexing/SingleEntryFileBasedIndexExtension.java).

Please see also [Improving indexing performance](indexing_and_psi_stubs.md#improving-indexing-performance).

> **Critical Implementation Notes**
>
> Value class must implement `equals()` and `hashCode()` properly, so a value deserialized from binary data should be equal to original one.
>
> The data returned by `DataIndexer.map()` must depend only on input data passed to the method, and must not depend on any external files.
> Otherwise, your index will not be correctly updated when the external data changes, and you will have stale data in your index.
>
> Please set system property `intellij.idea.indices.debug`/`intellij.idea.indices.debug.extra.sanity` to `true` to enable additional debugging assertions during development to assert correct index implementation.
>
{style="warning"}

## Accessing a File-Based Index

Access to file-based indexes is performed through the [`FileBasedIndex`](%gh-ic%/platform/indexing-api/src/com/intellij/util/indexing/FileBasedIndex.java) class.

> Please note index access is restricted during [dumb mode](indexing_and_psi_stubs.md#dumb-mode).
>
{style="note"}

The following primary operations are supported:

* `getAllKeys()` and `processAllKeys()` allow obtaining the list of all keys found in files, which are a part of the specified project.
  To optimize performance, consider returning `true` from `FileBasedIndexExtension.traceKeyHashToVirtualFileMapping()` (see its Javadoc for details).

> The returned data is guaranteed to contain all keys found in up-to-date project content, but may also include additional keys not currently found in the project.
>
{style="note"}

* `getValues()` allows to get all values associated with a specific key but not the files in which they were found.
* `getContainingFiles()` allows collecting all files in which a particular key was encountered.
* `processValues()` allows iterating through all files in which a specific key was encountered and accessing the associated values simultaneously.

### Nested Index Access

When accessing index data in nested calls (usually from multiple indexes), limitations might apply.

<tabs>

<tab title="2023.1 and later">

~~Nested index access is now possible.~~

**NOTE: Please do not use yet** This is known to cause problems under certain conditions, please watch this [issue](https://youtrack.jetbrains.com/issue/IJPL-265/Nested-index-lookups-still-leads-to-deadlocks).

</tab>

<tab title="2022.3 and earlier">

> Nested index access is forbidden as it might lead to a deadlock.
> Collect all necessary data from index _A_ first, then process results while accessing index _B_.
>
{style="warning"}

</tab>
</tabs>

## Standard Indexes

The IntelliJ Platform contains several standard file-based indexes.
The most useful indexes for plugin developers are:

### Word Index
Generally, the word index should be accessed indirectly by using helper methods of the [`PsiSearchHelper`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/PsiSearchHelper.java) class.

### File Name Index
[`FilenameIndex`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/FilenameIndex.java) provides a quick way to find all files matching a specific file name.

### File Type Index
[`FileTypeIndex`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/FileTypeIndex.java) serves a similar goal: it allows to find all files of a particular [`FileType`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileTypes/FileType.java) quickly.

## Additional Index Roots

To add additional files/directories to be indexed, implement [`IndexableSetContributor`](%gh-ic%/platform/indexing-api/src/com/intellij/util/indexing/IndexableSetContributor.java) and register in [`com.intellij.indexedRootsProvider`](https://jb.gg/ipe?extensions=com.intellij.indexedRootsProvider) extension point.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# File View Providers

<link-summary>Handling multiple languages PSI trees in a single file.</link-summary>

A file view provider ([`FileViewProvider`](%gh-ic%/platform/core-api/src/com/intellij/psi/FileViewProvider.java)) manages access to multiple PSI trees within a single file.

For example, a JSPX page has a separate PSI tree for the Java code in it (`PsiJavaFile`), a separate tree for the XML code (`XmlFile`), and a separate tree for JSP as a whole ([`JspFile`](%gh-ic%/java/jsp-openapi/src/com/intellij/psi/jsp/JspFile.java)).

Each of the PSI trees covers the entire contents of the file and contains special "outer language elements" in the places where contents in a different language can be found.

A `FileViewProvider` instance corresponds to a single `VirtualFile`, a single `Document`, and can retrieve multiple `PsiFile` instances.

## How do I get a `FileViewProvider`?

| Context                         | API                                                                                                                    |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------|
| [PSI File](psi_files.md)        | [`PsiFile.getViewProvider()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiFile.java)                             |
| [Virtual File](virtual_file.md) | [`PsiManager.getInstance(project).findViewProvider()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiManager.java) |

## What can I do with a `FileViewProvider`?

* To get the set of all languages for which PSI trees exist in a file: `fileViewProvider.getLanguages()`
* To get the PSI tree for a particular language: `fileViewProvider.getPsi(language)`.
  For example, to get the PSI tree for XML, use `fileViewProvider.getPsi(XMLLanguage.INSTANCE)`.
* To find an element of a particular language at the specified offset in the file: `fileViewProvider.findElementAt(offset, language)`

## How do I extend the `FileViewProvider`?

To create a file type that has multiple interspersing trees for different languages, a plugin must contain an extension to the `com.intellij.fileType.fileViewProviderFactory` extension point.

Implement [`FileViewProviderFactory`](%gh-ic%/platform/core-api/src/com/intellij/psi/FileViewProviderFactory.java) and return your `FileViewProvider` implementation from `createFileViewProvider()` method.

Register as follows in <path>[plugin.xml](plugin_configuration_file.md)</path>:

```xml
<extensions defaultExtensionNs="com.intellij">
  <fileType.fileViewProviderFactory
      filetype="$FILE_TYPE$"
      implementationClass="com.example.MyFileViewProviderFactory"/>
</extensions>
```

Where `$FILE_TYPE$` refers to the type of the file being created (for example, "JSF").
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Find Usages

<link-summary>Introduction to implementing Find Usages action in custom languages.</link-summary>

<tldr>

**Product Help:** [Find Usages](https://www.jetbrains.com/help/idea/find-highlight-usages.html)

</tldr>

The _Find Usages_ action is a multi-step process, and each step of the process requires involvement from the custom language plugin.

The language plugin participates in the Find Usages process by registering an implementation of [`FindUsagesProvider`](%gh-ic%/platform/indexing-api/src/com/intellij/lang/findUsages/FindUsagesProvider.java) in the `com.intellij.lang.findUsagesProvider` extension point, and through the PSI implementation using [`PsiNamedElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiNamedElement.java) and [`PsiReference`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReference.java) interfaces.

> In cases like function parameters and local variables, consider overriding  [`PsiElement.getUseScope()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java) to return a narrower scope.
> For instance, returning the scope of the nearest function definition can significantly reduce the number of files that need to be parsed and references that need to be resolved when renaming such elements.

The steps of the _Find Usages_ action are the following:
* Before the _Find Usages_ action can be invoked, the IDE builds an index of words present in every file in the custom language.
  Using the [`WordsScanner`](%gh-ic%/platform/indexing-api/src/com/intellij/lang/cacheBuilder/WordsScanner.java) implementation returned from [`FindUsagesProvider.getWordsScanner()`](%gh-ic%/platform/indexing-api/src/com/intellij/lang/findUsages/FindUsagesProvider.java), the contents of every file are loaded and passes it to the words scanner, along with the words consumer.
  The words scanner breaks the text into words, defines the context for each word (code, comments, or literals), and passes the word to the consumer.
  The simplest way to implement the words scanner is to use the [`DefaultWordsScanner`](%gh-ic%/platform/indexing-api/src/com/intellij/lang/cacheBuilder/DefaultWordsScanner.java) implementation, passing to it the sets of lexer token types which are treated as identifiers, literals, and comments.
  The default words scanner will use the lexer to break the text into tokens and handle breaking the text of the comment and literal tokens into individual words.
* When the user invokes the _Find Usages_ action, the IDE locates the PSI element the references to be searched.
  The PSI element at the cursor (the direct tree parent of the token at the cursor position) must be either a [`PsiNamedElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiNamedElement.java) or a [`PsiReference`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReference.java) which resolves to a [`PsiNamedElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiNamedElement.java).
  The word cache will be used to search for the text returned from the [`PsiNamedElement.getName()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiNamedElement.java) method.
  Also, if the text range of the [`PsiNamedElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiNamedElement.java) includes some other text besides the identifier returned from `getName()` (for example, if the [`PsiNamedElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiNamedElement.java) represents a JavaScript function and its text range includes the "`function`" keyword in addition to the name of the function), the method `getTextOffset()` must be overridden for the [`PsiNamedElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiNamedElement.java), and must return the start offset of the name identifier within the text range of the element.
* Once the element is located, the IDE calls [`FindUsagesProvider.canFindUsagesFor()`](%gh-ic%/platform/indexing-api/src/com/intellij/lang/findUsages/FindUsagesProvider.java) to ask the plugin if the _Find Usages_ action applies to the specific element.
* When showing the _Find Usages_ dialog to the user, [`FindUsagesProvider.getType()`](%gh-ic%/platform/indexing-api/src/com/intellij/lang/findUsages/FindUsagesProvider.java) and [`FindUsagesProvider.getDescriptiveName()`](%gh-ic%/platform/indexing-api/src/com/intellij/lang/findUsages/FindUsagesProvider.java) are called to determine how the element should be presented to the user.
* For every file containing the searched words, the IDE builds the PSI tree and recursively descends it.
  The text of each element is broken into words and then scanned.
  If the element was indexed as an identifier, every word is checked to be a [`PsiReference`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReference.java) resolving to the element the usages of which are searched.
  If the element was indexed as a comment or literal and the search in comments or literals is enabled, it checks if the word is equal to the searched element's name.
* After the usages are collected, results are shown in the usages pane.
  The text shown for each found element is taken from the [`FindUsagesProvider.getNodeText()`](%gh-ic%/platform/indexing-api/src/com/intellij/lang/findUsages/FindUsagesProvider.java) method.
  To group results by type, implement [`UsageTypeProvider`](%gh-ic%/platform/usageView-impl/src/com/intellij/usages/impl/rules/UsageTypeProvider.java) and register in `com.intellij.usageTypeProvider` extension point to provide custom or predefined [`UsageType`](%gh-ic%/platform/usageView/src/com/intellij/usages/impl/rules/UsageType.java).

**Examples:**
- Implementation of [`FindUsagesProvider`](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/findUsages/PropertiesFindUsagesProvider.java) in [Properties language plugin](%gh-ic%/plugins/properties)
- [Custom Language Support Tutorial: Find Usages](find_usages_provider.md)

### Grouping Results

To have the title of the found element be correctly displayed in the title of the Find Usages tool window, you need to provide an implementation of the [`ElementDescriptionProvider`](%gh-ic%/platform/core-api/src/com/intellij/psi/ElementDescriptionProvider.java) interface.
The [`ElementDescriptionLocation`](%gh-ic%/platform/core-api/src/com/intellij/psi/ElementDescriptionLocation.java) passed to the provider in this case will be an instance of [`UsageViewLongNameLocation`](%gh-ic%/platform/usageView/src/com/intellij/usageView/UsageViewLongNameLocation.java).

**Example:**
[`ElementDescriptionProvider`](%gh-ic%/plugins/properties/src/com/intellij/lang/properties/PropertiesDescriptionProvider.java) for [Properties language plugin](%gh-ic%/plugins/properties)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 11. Find Usages Provider

<link-summary>Sample implementation of finding usages of Simple language properties.</link-summary>

<tldr>

**Reference**: [](find_usages.md)

**Code**: [`SimpleFindUsagesProvider`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleFindUsagesProvider.java)

**Testing**: [](find_usages_test.md)

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

A `FindUsagesProvider` uses a word scanner to build an index of words in every file.
A scanner breaks the text into words and defines the context for each word.

## Define a Find Usages Provider

The [`SimpleFindUsagesProvider`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleFindUsagesProvider.java) implements [`FindUsagesProvider`](%gh-ic%/platform/indexing-api/src/com/intellij/lang/findUsages/FindUsagesProvider.java).
Using the [`DefaultWordsScanner`](%gh-ic%/platform/indexing-api/src/com/intellij/lang/cacheBuilder/DefaultWordsScanner.java) ensures the scanner implementation is thread-safe.
See the comments in `FindUsagesProvider` for more information.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleFindUsagesProvider.java" include-symbol="SimpleFindUsagesProvider"}

## Register the Find Usages Provider

The `SimpleFindUsagesProvider` implementation is registered with the IntelliJ Platform in the plugin configuration file using the `com.intellij.lang.findUsagesProvider` extension point.

```xml
<extensions defaultExtensionNs="com.intellij">
  <lang.findUsagesProvider
      language="Simple"
      implementationClass="org.intellij.sdk.language.SimpleFindUsagesProvider"/>
</extensions>
```

## Run the Project

Run the plugin by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

The IDE now supports [Find Usages](https://www.jetbrains.com/help/idea/find-highlight-usages.html) for any property with a reference:

![Find Usages](find_usages.png)
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 8. Find Usages Test

<link-summary>Implementing and running test for finding usages functionality implemented as a part of the Custom Language Support Tutorial.</link-summary>

<tldr>

**Tested Functionality**: [](find_usages_provider.md)

</tldr>

<include from="tests_prerequisites.md" element-id="custom_language_testing_tutorial_header"></include>

## Define the Test Data
Create the <path>FindUsagesTestData.simple</path> file in the <path>testData</path> directory.

```properties
```
{src="simple_language_plugin/src/test/testData/FindUsagesTestData.simple"}

Create the test file <path>FindUsagesTestData.java</path>, which contains one embedded Simple Language prefix and key.

```java
```
{src="simple_language_plugin/src/test/testData/FindUsagesTestData.java"}

## Define a Test Method
Add the `testFindUsages()` method to the `SimpleCodeInsightTest` class [previously defined](completion_test.md#define-a-test).
This test verifies the find usage functionality will identify the "key with spaces".

```java
```
{src="simple_language_plugin/src/test/java/org/intellij/sdk/language/SimpleCodeInsightTest.java" include-symbol="testFindUsages"}


## Run the Test

<include from="custom_language_testing_snippets.md" element-id="runTests"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 12. Folding Builder

<link-summary>Sample implementation folding builder allowing to see the values of Simple language properties referenced in Java files.</link-summary>

<tldr>

**Code**: [`SimpleFoldingBuilder`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleFoldingBuilder.java)

**Testing**: [](folding_test.md)

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

A folding builder identifies the folding regions in the code.
In this step of the tutorial, the folding builder is used to identify folding regions and replace the regions with specific text.
Rather than the usual practice of using a folding builder to collapse a class, method, or comments to fewer lines, the folding builder replaces Simple Language keys with their corresponding values.

## Define a Folding Builder

The [`SimpleFoldingBuilder`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleFoldingBuilder.java) replaces usages of properties with their values by default.
Start by subclassing [`FoldingBuilderEx`](%gh-ic%/platform/core-api/src/com/intellij/lang/folding/FoldingBuilderEx.java)

Note that `SimpleFoldingBuilder` is marked [dumb aware](indexing_and_psi_stubs.md#DumbAwareAPI),
which means the class is allowed to run in [dumb mode](indexing_and_psi_stubs.md#dumb-mode), when indexes are in background update.

> A folding builder must implement [`DumbAware`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/DumbAware.java) to function in this tutorial and pass tests.
>
{style="note"}

The `buildFoldRegions()` method searches down a PSI tree from `root` to find all literal expressions containing the [simple prefix](annotator.md#define-an-annotator) `simple:`.
The remainder of such a string is expected to contain a Simple Language key, and so the text range is stored as a [`FoldingDescriptor`](%gh-ic%/platform/core-api/src/com/intellij/lang/folding/FoldingDescriptor.java).

The `getPlaceholderText()` method retrieves the Simple Language value corresponding to the key associated with the (ASTNode) provided.
The IntelliJ Platform uses the value to substitute for the key when the code gets folded.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleFoldingBuilder.java" include-symbol="SimpleFoldingBuilder"}

## Register the Folding Builder

The `SimpleFoldingBuilder` implementation is registered with the IntelliJ Platform in the plugin configuration file using the `com.intellij.lang.foldingBuilder` extension point.

```xml
<extensions defaultExtensionNs="com.intellij">
  <lang.foldingBuilder
      language="JAVA"
      implementationClass="org.intellij.sdk.language.SimpleFoldingBuilder"/>
</extensions>
```

## Run the Project

Run the plugin by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

Now when a Java file is opened in the editor, it shows the property's value instead of the key.
This is because `SimpleFoldingBuilder.isCollapsedByDefault()` always returns `true`.
Try using <ui-path>Code | Folding | Expand All</ui-path> to show the key rather than the value.

![Folding](folding.png)
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 7. Folding Test

<link-summary>Implementing and running test for folding builder implemented as a part of the Custom Language Support Tutorial.</link-summary>

<tldr>

**Tested Functionality**: [](folding_builder.md)

</tldr>

<include from="tests_prerequisites.md" element-id="custom_language_testing_tutorial_header"></include>

> A folding builder must implement [`DumbAware`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/DumbAware.java) to pass tests.
> See [](folding_builder.md#define-a-folding-builder) for more information.
>
{style="note"}

## Define Test Data
Create a file <path>FoldingTestData.java</path> in the <path>testData</path> directory.
This java file contains markup instructions for three different cases of code folding.

```java
```
{src="simple_language_plugin/src/test/testData/FoldingTestData.java"}

## Define a Test
Add the `testFolding()` method to the `SimpleCodeInsightTest` class [previously defined](completion_test.md#define-a-test).
This test method reuses the <path>DefaultTestData.simple</path> Simple file.

```java
```
{src="simple_language_plugin/src/test/java/org/intellij/sdk/language/SimpleCodeInsightTest.java" include-symbol="testFolding"}


## Run the Test

<include from="custom_language_testing_snippets.md" element-id="runTests"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 16. Formatter

<link-summary>Sample implementation of Simple language formatter.</link-summary>

<tldr>

**Reference**: [](code_formatting.md)

**Code**: [`SimpleBlock`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleBlock.java),
[`SimpleFormattingModelBuilder`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleFormattingModelBuilder.java)

**Testing**: [](formatter_test.md)

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

The IntelliJ Platform includes a powerful framework for implementing formatting for custom languages.
A formatter enables reformatting code automatically based on code style settings.
The formatter controls spaces, indents, wrap, and alignment.

## Define a Block

The formatting model represents the formatting structure of a file as a tree of [`Block`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/Block.java) objects, with associated indent, wrap, alignment, and spacing settings.
The goal is to cover each PSI element with such a block.
Since each block builds its children's blocks, it can generate extra blocks or skip any PSI elements.
Define [`SimpleBlock`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleBlock.java) based on [`AbstractBlock`](%gh-ic%/platform/code-style-impl/src/com/intellij/psi/formatter/common/AbstractBlock.java).

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleBlock.java" include-symbol="SimpleBlock"}

## Define a Formatting Model Builder

Define a formatter that removes extra spaces except for the single spaces around the property separator:

<compare type="top-bottom">

```properties
foo  =    bar
```

```properties
foo = bar
```
</compare>

Create [`SimpleFormattingModelBuilder`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleFormattingModelBuilder.java) by implementing [`FormattingModelBuilder`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/FormattingModelBuilder.java).

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleFormattingModelBuilder.java" include-symbol="SimpleFormattingModelBuilder"}

## Register the Formatter

The `SimpleFormattingModelBuilder` implementation is registered with the IntelliJ Platform in the plugin configuration file using the `com.intellij.lang.formatter` extension point.

```xml
<extensions defaultExtensionNs="com.intellij">
  <lang.formatter
      language="Simple"
      implementationClass="org.intellij.sdk.language.SimpleFormattingModelBuilder"/>
</extensions>
```

## Run the Project

Run the plugin by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

Open the example Simple Language [properties file](lexer_and_parser_definition.md#run-the-project) in the IDE Development Instance.
Add some extra spaces around the `=` separator between `language` and `English`.
Reformat the code by invoking <ui-path>Code | Reformat File...</ui-path> dialog and choose <control>Run</control>.

![Formatter](formatter.png)
<!-- Copyright 2000-2022 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 5. Formatter Test

<link-summary>Implementing and running test for the formatter implemented as a part of the Custom Language Support Tutorial.</link-summary>

<tldr>

**Tested Functionality**: [](formatter.md)

</tldr>

<include from="tests_prerequisites.md" element-id="custom_language_testing_tutorial_header"></include>

See also [`FormatterTestCase`](%gh-ic%/platform/testFramework/src/com/intellij/psi/formatter/FormatterTestCase.java) as convenient base class.

## Define Test Data
Create the <path>FormatterTestData.simple</path> file in the <path>testData</path> directory.

```properties
```
{src="simple_language_plugin/src/test/testData/FormatterTestData.simple"}

## Define a Test Method
Add the `testFormatter()` method to the `SimpleCodeInsightTest` class [previously defined](completion_test.md#define-a-test).
* Again, this method configures the test fixture by using the test file.
* The code style Simple Language settings for spaces and blank lines are set.
* The file is then formatted according to the settings.
* The formatted file is compared to the expected results in the benchmark file <path>DefaultTestData.simple</path>.

```java
```
{src="simple_language_plugin/src/test/java/org/intellij/sdk/language/SimpleCodeInsightTest.java" include-symbol="testFormatter"}

## Run the Test

<include from="custom_language_testing_snippets.md" element-id="runTests"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Frameworks

<link-summary>Tutorial on implementing custom framework types.</link-summary>

The following tutorial shows how to support a custom framework type for a project and make this framework type embedded in a [project wizard](project_wizard.md) as a UI component.
The examples in this tutorial rely heavily on the [framework_basics](%gh-sdk-samples-master%/framework_basics) code sample.

> Note that this feature requires a [dependency](plugin_dependencies.md) on [the Java plugin](idea.md#java).
>
{style="warning"}

## Creating a New Framework

In oder to make a custom framework available and configurable for a project the [`FrameworkTypeEx`](%gh-ic%/java/idea-ui/src/com/intellij/framework/FrameworkTypeEx.java) class needs to be extended, in this example to make the [DemoFramework](%gh-sdk-samples-master%/framework_basics/src/main/java/org/intellij/sdk/framework/DemoFramework.java) class.

```java
final class DemoFramework extends FrameworkTypeEx {
}
```

## Registering Framework

The newly created framework class should be registered as an extension point by adding `com.intellij.framework.type` extension in [`plugin.xml`](%gh-sdk-samples-master%/framework_basics/src/main/resources/META-INF/plugin.xml) configuration file:

```xml
<extensions defaultExtensionNs="com.intellij">
  <framework.type
      implementation="org.intellij.sdk.framework.DemoFramework"/>
</extensions>
```

## Setting up Mandatory Attributes

The framework component should have a unique name passed as a string literal to the constructor.
It is best if this is the FQN name of the class:

```java
final class DemoFramework extends FrameworkTypeEx {

  public static final String FRAMEWORK_ID =
      "org.intellij.sdk.framework.DemoFramework";

  DemoFramework() {
    super(FRAMEWORK_ID);
  }
}
```

The *Presentable name* and *icon* define the appearance of visual components related to the framework:

```java
final class DemoFramework extends FrameworkTypeEx {
  @NotNull
  @Override
  public String getPresentableName() {
    return "SDK Demo Framework";
  }

  @NotNull
  @Override
  public Icon getIcon() {
    return SdkIcons.Sdk_default_icon;
  }
}
```

## Creating Provider for Enabling Framework Support

To make the framework set up available while executing the steps to create a project, the
`DemoFramework.createProvider()` method must be implemented to return an object of type [`FrameworkSupportInModuleConfigurable`](%gh-ic%/java/idea-ui/src/com/intellij/framework/addSupport/FrameworkSupportInModuleConfigurable.java), which adds the framework to a module.
In this example the framework is added to any [`ModuleType`](%gh-ic%/platform/lang-core/src/com/intellij/openapi/module/ModuleType.java) without checking, which is usually not the case.

```java
@NotNull
@Override
public FrameworkSupportInModuleProvider createProvider() {
  return new FrameworkSupportInModuleProvider() {
    @NotNull
    @Override
    public FrameworkTypeEx getFrameworkType() {
      return DemoFramework.this;
    }

    @NotNull
    @Override
    public FrameworkSupportInModuleConfigurable createConfigurable(
        @NotNull FrameworkSupportModel model) {
      return new FrameworkSupportInModuleConfigurable() {

        @Override
        public JComponent createComponent() {
          return new JCheckBox("SDK Extra Option");
        }

        @Override
        public void addSupport(@NotNull Module module,
                               @NotNull ModifiableRootModel model,
                               @NotNull ModifiableModelsProvider provider) {
          // This is the place to set up a library, generate a specific file,
          // and actually add framework support to a module.
        }
      };
    }

    @Override
    public boolean isEnabledForModuleType(@NotNull ModuleType type) {
      return true;
    }
  };
}
```
## Compile and Run the Plugin

See [Code Samples](code_samples.md) on how to set up and run the plugin.

Extra option for configuring the newly created Demo custom framework should be available in the Project Wizard:

![Custom Framework Support](custom_framework.png)
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Fundamentals

<link-summary>Fundamental low-level building blocks of the IntelliJ Platform.</link-summary>

This section describes the low-level fundamental building blocks of the IntelliJ Platform:

* The component model - how the application is hosted and composed. Lifetime and dependency management.
* [Disposers](disposers.md) - managing object lifetimes and resource cleanup
* [Threading models](threading_model.md)
* [Messaging](messaging_infrastructure.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Glossary

<link-summary>Glossary of IntelliJ Platform specific terms.</link-summary>

See also [Oracle's Java Technology Glossary](https://www.oracle.com/java/technologies/glossary.html).

## A

Abstract Syntax Tree _(AST)_
: The [Abstract Syntax Tree](implementing_parser_and_psi.md) represents the structure of source input files.
&rarr;&nbsp;_Program Structure Interface_

Annotator
: Provides [semantic highlighting](syntax_highlighting_and_error_highlighting.md) based on underlying &rarr;&nbsp;_Program Structure Interface_ elements.
&rarr;&nbsp;_Inspection_

## B

Blocking Context
: Executing in the [blocking context](coroutine_execution_contexts.md#blocking-context) means executing tasks on a thread without access to a coroutine context.
&rarr;&nbsp;_Suspending Context_
&rarr;&nbsp;_Coroutine_

## C

`CancellationException` _(CE)_
: `java.util.concurrent.CancellationException`, `kotlin.coroutines.cancellation.CancellationException` (typealias in stdlib), `kotlinx.coroutines.CancellationException` (typealias in kotlinx-coroutines)
&rarr;&nbsp;_ProcessCanceledException_

Coroutine
: A [Kotlin coroutines](kotlin_coroutines.md) execution unit allowing for handling concurrency and asynchronous tasks efficiently with a sequential/imperative code style.

Coroutine Dispatcher
: Part of the coroutine context.
Determines a thread or a thread pool the corresponding coroutine is executed on.
See [](coroutine_dispatchers.md) for more details.
&rarr;&nbsp;_Coroutine_

Coroutine Scope
: [Coroutine scopes](coroutine_scopes.md) define the lifetime of coroutines and ensure proper handling of coroutine cancellations and structured concurrency.
&rarr;&nbsp;_Coroutine_

## D

Document Object Model _(DOM)_
: [](xml_dom_api.md) abstracts working with XML files based on a custom semantic model.

## E

Event Dispatch Thread _(EDT)_
: The [Event Dispatch Thread](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html) handles all Swing events. See also [](threading_model.md) and [](coroutine_dispatchers.md#edt-dispatcher).

Extension Point _(EP)_
: Most functionality is provided by [Using Extension Points](plugin_extensions.md) provided by the platform or plugins. Plugins can also [define their own](plugin_extension_points.md) to allow extensibility.

External System _(ES)_
: [](external_system_integration.md) allows integrating external project management systems.

## F

Feature Usage Statistics _(FUS)_
: JetBrains internal API to track feature usage in the IDE.

File Based Index _(FBI)_
: [File Based Index](file_based_indexes.md) allows storing key-value information based on the project's files.

## G
Gradle Build Script
: A configuration file written in Kotlin (<path>build.gradle.kts</path>) or Groovy (<path>build.gradle</path>) that describes the build process and dependencies of a plugin.

## I

Inspection
: Supports configurable [semantic highlighting](code_inspections_and_intentions.md).
&rarr;&nbsp;_Annotator_

Intention
: Provides an [automated fix](code_inspections_and_intentions.md) for commonly encountered code problems.

## L

Language Server Protocol _(LSP)_
: Communication standard between development tools and Language Servers, see [](language_server_protocol.md).

Local History _(LVCS)_
: A builtin &rarr;&nbsp;_Version Control System_ tracking all changes in the project [locally](https://www.jetbrains.com/help/idea/local-history.html).

Look and Feel _(LaF)_
: Defines the visual appearance and behavior of the user interface; see [Swing Tutorial](https://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/index.html).

## J

JetBrains Project System _(JPS)_
: Represents the project model in [External Build](external_builder_api.md#accessing-project-model-and-configuration-from-external-build) process.

JetBrains Runtime _(JBR)_
: The [JetBrains Runtime](ide_development_instance.md#using-a-jetbrains-runtime-for-the-development-instance) is the default bundled runtime for all IntelliJ Platform-based IDEs by JetBrains.

## N

Non-Blocking Read Action _(NBRA)_
: A &rarr;&nbsp;_Read Action_ that is canceled by a &rarr;&nbsp;_Write Action_. See also [](threading_model.md#read-action-cancellability).

## P

`ProcessCanceledException` _(PCE)_
: [`ProcessCanceledException`](%gh-ic%/platform/util/base/src/com/intellij/openapi/progress/ProcessCanceledException.java) An exception indicating that the currently running operation was terminated and should finish as soon as possible.
&rarr;&nbsp;_CancellationException_

Program Structure Interface _(PSI)_
: The [Program Structure Interface](psi.md) represents a syntactic and semantic code model of the source input files. &rarr;&nbsp;_Abstract Syntax Tree_ &rarr;&nbsp;_Stubs_

## R

Read Action _(RA)_
: Allows accessing code-related data structures for reading purposes. See also [](threading_model.md).
&rarr;&nbsp;_Non-Blocking Read Action_ &rarr;&nbsp;_Write Action_

Run Configuration _(RC)_
: A [Run Configuration](run_configurations.md) allows running external processes from within the IDE.

## S

Structural Search and Replace _(SSR)_
: Allows searching and replacing code by defining the structure of the searched code fragments, see [](plugin_alternatives.md#structural-search-and-replace-inspections).

Stubs
: A subset of a &rarr;&nbsp;_Program Structure Interface_ tree in a binary serialized compact format, see [](stub_indexes.md).

Suspending Context
: Executing in the [suspending context](coroutine_execution_contexts.md#suspending-context) means executing tasks in Kotlin coroutines.
&rarr;&nbsp;_Blocking Context_
&rarr;&nbsp;_Coroutine_

Symbol
: A semantic element in some model, e.g., language or framework model, see [](symbols.md).

## U

Unified Abstract Syntax Tree _(UAST)_
: An [abstraction layer](uast.md) on the &rarr;&nbsp;_Program Structure Interface_ of different JVM languages.

## V

Version Control System _(VCS)_
: The API for [Version Control System](vcs_integration_for_plugins.md) allows accessing builtin as well as adding custom implementations.

Virtual File _(VF)_
: A [Virtual File](virtual_file.md) represents a file in a &rarr;&nbsp;_Virtual File System_.

Virtual File System _(VFS)_
: A [Virtual File System](virtual_file_system.md) provides a unified API for working with files represented as &rarr;&nbsp;_Virtual File_.

## W

Write Action _(WA)_
: Allows accessing code-related data structures for writing purposes. See also [](threading_model.md).
&rarr;&nbsp;_Read Action_

Write Allowing Read Action _(WARA)_
: A coroutine &rarr;&nbsp;_Read Action_ that is canceled by an incoming &rarr;&nbsp;_Write Action_.
See [](coroutine_read_actions.topic#coroutine-read-actions-api) for details.
&rarr;&nbsp;_Suspending Context_
&rarr;&nbsp;_Coroutine_

Write Blocking Read Action _(WBRA)_
: A coroutine &rarr;&nbsp;_Read Action_ that blocks incoming &rarr;&nbsp;_Write Action_.
See [](coroutine_read_actions.topic#coroutine-read-actions-api) for details.
&rarr;&nbsp;_Suspending Context_
&rarr;&nbsp;_Coroutine_

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Go to Class and Go to Symbol

<link-summary>"Go to Class/Symbol" contributors allowing for quick searching and navigating to classes and symbols.</link-summary>

<tldr>

**Product Help:** [Searching Everywhere](https://www.jetbrains.com/help/idea/searching-everywhere.html)

</tldr>

A custom language plugin can provide its items to be included in the lists shown when the user chooses the <ui-path>Navigate | Class</ui-path> or <ui-path>Navigate | Symbol</ui-path> action.

Provide implementations of [`ChooseByNameContributorEx`](%gh-ic%/platform/lang-impl/src/com/intellij/navigation/ChooseByNameContributorEx.java) interface (separate implementations need to be provided for <control>Class</control> and <control>Symbol</control>, respectively), and register them in the `com.intellij.gotoClassContributor` and `com.intellij.gotoSymbolContributor` extension points.

Each `ChooseByNameContributorEx` implementation must provide the following methods:
* `processNames(@NotNull Processor<? super String> processor, @NotNull GlobalSearchScope scope, @Nullable IdFilter filter)`

  Feeds the processor with a complete list of names available in a specified scope, which the IDE will then filter according to the text typed by the user in the dialog.
  Using [](indexing_and_psi_stubs.md) to obtain matching candidates is highly recommended to improve performance.
* `processElementsWithName(String name, Processor<? super NavigationItem> processor, FindSymbolParameters parameters)`

  Feeds the processor with a list of [`NavigationItem`](%gh-ic%/platform/core-api/src/com/intellij/navigation/NavigationItem.java) instances (typically [`PsiElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java)) matching the given name and parameters.
  Processed `NavigationItem`s specify the destinations to jump to when a specific item is selected from the list.

**Example:**
- [Custom Language Support Tutorial: Go To Symbol Contributor](go_to_symbol_contributor.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 13. Go To Symbol Contributor

<link-summary>Sample implementation of a "Go to Symbol" contributor allowing for searching and navigating to Simple language properties definitions.</link-summary>

<tldr>

**Reference**: [](go_to_class_and_go_to_symbol.md)

**Code**:
[`SimpleChooseByNameContributor`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleChooseByNameContributor.java),
[`SimplePsiImplUtil`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/impl/SimplePsiImplUtil.java)

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

A _Go to Symbol Contributor_ helps the user to navigate to any PSI element by its name.

## Define a Helper Method for Generated PSI Elements

To specify what a PSI element looks like in the <ui-path>Navigate | Symbol</ui-path> popup window, <control>Structure</control> tool window, or other components, it should implement `getPresentation()`.
This method gets defined in the utility class `SimplePsiImplUtil`, and the parser and PSI classes must be regenerated.
Add the following method to [`SimplePsiImplUtil`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/impl/SimplePsiImplUtil.java):

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/impl/SimplePsiImplUtil.java" include-symbol="getPresentation"}

In addition, to provide an icon for the displayed items, extend [`IconProvider`](%gh-ic%/platform/core-api/src/com/intellij/ide/IconProvider.java) and register it in `com.intellij.iconProvider` extension point. See [`SimplePropertyIconProvider`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimplePropertyIconProvider.java):

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimplePropertyIconProvider.java" include-symbol="SimplePropertyIconProvider"}

## Update Grammar and Regenerate the Parser

Now add the `SimplePsiImplUtil.getPresentation()` to the `property` methods definition in the <path>Simple.bnf</path> grammar file by replacing the `property` definition with the lines below.
Don't forget to regenerate the parser after updating the file!
Right-click on the <path>Simple.bnf</path> file and select <control>Generate Parser Code</control>.

```bnf
property ::= (KEY? SEPARATOR VALUE?) | KEY {
  mixin="org.intellij.sdk.language.psi.impl.SimpleNamedElementImpl"
  implements="org.intellij.sdk.language.psi.SimpleNamedElement"
  methods=[getKey getValue getName setName getNameIdentifier getPresentation]
}
```

## Define a Go To Symbol Contributor

To contribute items to <ui-path>Navigate | Symbol</ui-path> results, subclass [`ChooseByNameContributorEx`](%gh-ic%/platform/lang-impl/src/com/intellij/navigation/ChooseByNameContributorEx.java)
to create [`SimpleChooseByNameContributor`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleChooseByNameContributor.java):

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleChooseByNameContributor.java" include-symbol="SimpleChooseByNameContributor"}

## Register the Go To Symbol Contributor

The `SimpleChooseByNameContributor` implementation is registered with the IntelliJ Platform in the plugin configuration file using the `com.intellij.gotoSymbolContributor` extension point.

```xml
<extensions defaultExtensionNs="com.intellij">
  <gotoSymbolContributor
      implementation="org.intellij.sdk.language.SimpleChooseByNameContributor"/>
</extensions>
```

## Run the Project

Run the plugin by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

The IDE now supports navigating to a property definition by name pattern via <ui-path>Navigate | Symbol</ui-path> action.

![Go To Symbol](go_to_symbol.png){width="800"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# GoLand Plugin Development

<link-summary>Introduction to developing plugins for GoLand.</link-summary>

<var name="productID" value="go"/>
<var name="marketplaceProductID" value="go"/>
<include from="snippets.md" element-id="jetbrainsIDE_TLDR"/>

[GoLand](https://www.jetbrains.com/go/) is an IntelliJ Platform-based product.
Plugin projects for GoLand can be developed using [IntelliJ IDEA](idea.md).

## GoLand Plugin Setup

### Gradle Build Script

#### IntelliJ Platform Gradle Plugin (2.x)

Define a dependency using [`goland()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md), see _Versions_ link on top of this page for all available versions.
See [](tools_intellij_platform_gradle_plugin.md#dependenciesLocalPlatform) for using a local installation.

A dependency on the bundled `org.jetbrains.plugins.go` plugin must be added using the [`bundledPlugin()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins) helper.

Minimum <path>build.gradle.kts</path> setup:

```kotlin
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    goland("<versionNumber>")
    bundledPlugin("org.jetbrains.plugins.go")
  }
}
```

#### Gradle IntelliJ Plugin (1.x)

{collapsible="true" default-state="collapsed"}

<primary-label ref="Obsolete"/>

<include from="tools_gradle_intellij_plugin.md" element-id="gradlePluginObsolete"/>

<tabs>

<tab title="GoLand IDE">

The configuration of targeting GoLand IDE follows the methods described in [Configuring Plugin Projects Using a Product-Specific Attribute](dev_alternate_products.md#using-a-product-specific-attribute).

Starting with 2020.2, it's possible to configure `GO` for `intellij.type` in the Gradle build script.
If you need to use Go language APIs, specifying the `GO` platform type is not enough - it is required to add a dependency to the `org.jetbrains.plugins.go` plugin.

<tabs>
<tab title="Kotlin">

```kotlin
intellij {
  version.set("2020.3")
  type.set("GO")

  // required if Go language API is needed:
  plugins.set(listOf("org.jetbrains.plugins.go"))
}
```

</tab>
<tab title="Groovy">

```groovy
intellij {
  version = '2020.3'
  type = 'GO'

  // required if Go language API is needed:
  plugins = ['org.jetbrains.plugins.go']
}
```

</tab>
</tabs>

</tab>

<tab title="Using Plugin">

The configuration of GoLand plugin projects follows the methods described in [Configuring Plugin Projects using the IntelliJ IDEA Product Attribute](dev_alternate_products.md#using-the-intellij-idea-product-attribute), and [Configuring the plugin.xml File](dev_alternate_products.md#configuring-pluginxml).

The table below summarizes the [](tools_gradle_intellij_plugin.md) attributes to set in the plugin project's Gradle build script.
Click on an entry in the table's *Attribute* column to go to the documentation about that attribute.
To see how these attributes appear in a similar Gradle build script for PhpStorm, see [](dev_alternate_products.md#configuring-gradle-build-script-using-the-intellij-idea-product-attribute).

The Go plugin version is explicitly declared because it isn't bundled with IntelliJ IDEA Ultimate Edition.
Select a [version](https://plugins.jetbrains.com/plugin/9568-go/versions) of the Go plugin compatible with the IntelliJ Idea Ultimate version.

| Gradle IntelliJ Plugin Attribute                                                 | Attribute Value                                                                                                                                                                                                           |
|----------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [`intellij.type`](tools_gradle_intellij_plugin.md#intellij-extension-type)       | `IU` for IntelliJ IDEA Ultimate. The Go plugin isn't compatible with IntelliJ IDEA Community Edition.                                                                                                                     |
| [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version) | Set to the same `IU` BRANCH.BUILD as the GoLand target version, e.g. `193.5233.102`.                                                                                                                                      |
| [`intellij.plugins`](tools_gradle_intellij_plugin.md#intellij-extension-plugins) | <p>`org.jetbrains.plugins.go:193.5233.102.83` for the Go plugin.</p><p>See below for Go plugin version information.</p>                                                                                                   |
| [`runIde.ideDir`](tools_gradle_intellij_plugin.md#tasks-runide-idedir)           | <p>Path to locally installed target version of GoLand. For example, on macOS:</p><p><path>/Users/\$USERNAME\$/Library/Application Support/JetBrains/Toolbox/apps/Goland/ch-0/193.5233.112/GoLand.app/Contents</path>.</p> |

</tab>

</tabs>

### plugin.xml

Depending on plugin's requirements, the following [`<depends>`](plugin_configuration_file.md#idea-plugin__depends) entries are needed in the <path>plugin.xml</path> file:

* `com.intellij.modules.platform` - Always required. See [Configuring the plugin.xml File](dev_alternate_products.md#configuring-pluginxml) for details.
* `org.jetbrains.plugins.go` - Required if the Go plugin APIs are used in the plugin.
* `com.intellij.modules.goland` (2020.2+) or `com.intellij.modules.go` (pre-2020.2) - Required if the plugin targets GoLand IDE only. The plugin will not be loaded in other IDEs, even if the Go plugin is present.

### Targeting IDEs Other Than GoLand

Depending on `com.intellij.modules.goland` allows a plugin to be installed in the GoLand IDE only.
However, the Go plugin can be installed in [IntelliJ IDEA Ultimate](https://www.jetbrains.com/idea/) and potentially other IDEs.
To make the plugin compatible with GoLand and other IDEs supporting the Go language consider depending on:

* `org.jetbrains.plugins.go` - The plugin will be loaded only when the Go plugin is actually installed in the running IDE.
* `com.intellij.modules.go-capable` - The plugin will be loaded in IDEs that are capable of installing the Go plugin.
  Note that the Go plugin doesn't have to be actually installed when this module is present.

## Available GoLand APIs

> See [](goland_extension_point_list.md) for the complete list.
>
{style="note"}

Use the [Exploring APIs as a Consumer](plugin_compatibility.md#exploring-apis-as-a-consumer) process to identify the library <path>intellij-go-\$version\$.jar</path>, where `$version$` corresponds to the version of the Go plugin.
Test your plugin with any version of GoLand you intend to support.

## GoLand Test Framework

Please see [this issue](https://github.com/JetBrains/gradle-intellij-plugin/issues/477#issuecomment-845022914) for required additional dependency setup.

## Open Source Plugins for GoLand

When learning new APIs, it is helpful to have some representative projects for reference:

* [Go Method Generator](https://github.com/pkondratev/Intellij-go-method-generator)
* [Go Builder Generator](https://github.com/OddCN/go-builder-generator-idea-plugin)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<!-- EP List Directory: /goland/ -->

# GoLand Extension Point and Listener List

<link-summary>Overview of Extension Points and Listeners for GoLand.</link-summary>

<tldr>

**Product-Specific Plugin Development**: [GoLand](goland.md)

</tldr>

17 Extension Points and 5 Listeners for GoLand

See [](intellij_platform_extension_point_list.md) for IntelliJ Platform.

<include from="snippets.md" element-id="ep_list_legend"/>

## GoLand

### GoLand – Listeners

| Topic | Listener |
|-------|----------|
| [GoLibrariesService#LIBRARIES_TOPIC](https://jb.gg/ipe/listeners?topics=com.goide.project.GoLibrariesService.LibrariesListener)  | `LibrariesListener` |
| [GoModuleSettings#BUILD_TARGET_TOPIC](https://jb.gg/ipe/listeners?topics=com.goide.project.GoModuleSettings.BuildTargetListener)  ![Project-Level][project-level] | `BuildTargetListener` |
| [GoModuleSettings#GO_SUPPORT_TOPIC](https://jb.gg/ipe/listeners?topics=com.goide.project.GoModuleSettings.GoSupportListener)  ![Project-Level][project-level] | `GoSupportListener` |
| [GoProjectLifecycleListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.goide.project.GoProjectLifecycleListener)  | `GoProjectLifecycleListener` |
| [VgoProjectSettings#VGO_INTEGRATION_TOPIC](https://jb.gg/ipe/listeners?topics=com.goide.vgo.configuration.VgoProjectSettings.IntegrationListener)  | `IntegrationListener` |


### goland.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.goide.dlv.positionConverterFactory](https://jb.gg/ipe?extensions=com.goide.dlv.positionConverterFactory) | `DlvPositionConverterFactory` |
| [com.goide.documentation.packageVersionProvider](https://jb.gg/ipe?extensions=com.goide.documentation.packageVersionProvider) | `GoDocumentationPackageVersionProvider` |
| [com.goide.execution.defaultTargetEnvironmentProvider](https://jb.gg/ipe?extensions=com.goide.execution.defaultTargetEnvironmentProvider) | `DefaultTargetEnvironmentProvider` |
| [com.goide.executorExtension](https://jb.gg/ipe?extensions=com.goide.executorExtension) | `GoExecutorExtension` |
| [com.goide.highlighting.errorAnnotatorSuppressor](https://jb.gg/ipe?extensions=com.goide.highlighting.errorAnnotatorSuppressor) | `GoErrorAnnotatorSuppressor` |
| [com.goide.importResolver](https://jb.gg/ipe?extensions=com.goide.importResolver) | `GoImportResolver` |
| [com.goide.importsFilter](https://jb.gg/ipe?extensions=com.goide.importsFilter) | `GoImportsFilter` |
| [com.goide.packageFactory](https://jb.gg/ipe?extensions=com.goide.packageFactory) | `GoPackageFactory` |
| [com.goide.runConfigurationExtension](https://jb.gg/ipe?extensions=com.goide.runConfigurationExtension) | `GoRunConfigurationExtension` |
| [com.goide.sdk.sdkVetoer](https://jb.gg/ipe?extensions=com.goide.sdk.sdkVetoer) | `GoBasedSdkVetoer` |
| [com.goide.sdk.targetSdkVersionProvider](https://jb.gg/ipe?extensions=com.goide.sdk.targetSdkVersionProvider) | `GoTargetSdkVersionProvider` |
| [com.goide.sdkProvider](https://jb.gg/ipe?extensions=com.goide.sdkProvider) | `GoSdkProvider` |
| [com.goide.support](https://jb.gg/ipe?extensions=com.goide.support) | `GoLangSupport` |

### openapi.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.goide.documentation.additionalDocumentationProvider](https://jb.gg/ipe?extensions=com.goide.documentation.additionalDocumentationProvider) | `GoAdditionalDocumentationProvider` |
| [com.goide.importPathsProvider](https://jb.gg/ipe?extensions=com.goide.importPathsProvider) | `GoImportPathsProvider` |
| [com.goide.imports.weigher](https://jb.gg/ipe?extensions=com.goide.imports.weigher) | `GoImportsWeigher` |
| [com.goide.rootsProvider](https://jb.gg/ipe?extensions=com.goide.rootsProvider) | `GoRootsProvider` |

[deprecated]: https://img.shields.io/badge/-Deprecated-lightgrey?style=flat-square
[removal]: https://img.shields.io/badge/-Removal-red?style=flat-square
[obsolete]: https://img.shields.io/badge/-Obsolete-grey?style=flat-square
[experimental]: https://img.shields.io/badge/-Experimental-violet?style=flat-square
[internal]: https://img.shields.io/badge/-Internal-darkred?style=flat-square
[project-level]: https://img.shields.io/badge/-Project--Level-blue?style=flat-square
[non-dynamic]: https://img.shields.io/badge/-Non--Dynamic-orange?style=flat-square
[dumb-aware]: https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Got It Tooltip

<link-summary>UI guidelines on using "Got it" tooltips.</link-summary>

<tldr>

**Implementation:** [`GotItTooltip`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/GotItTooltip.kt)

**Related:** [](notifications.md#gotIt)

</tldr>

A Got It tooltip informs users about a new or changed feature and gives basic information about it.

![](01_got_it_example.png){width=335}

## When to use

Point to small UI controls that can be missed among other information in the screen.

![](02_new_feature.png){width=509 style=block}
*After method or parameter names are edited, the Inplace Refactoring icon appears.*

![](03_new_plugin.png){width=375 style=block}
*After the "Code With Me" plugin is installed, a drop-down menu appears on the toolbar.*

Explain behavior that is not clear from the UI.

![](04_explain_how_to_use.png){width=333 style=block}
*When extracting a method, users can change only the method name in the blue box. The tooltip explains where to change the order of parameters in the parentheses and other properties of a method.*

Suggest keyboard interactions.

![](05_suggest_keyboard_actions.png){width=244 style=block}
*The inlay with options after the blue box is a new control. The tooltip explains how to use it with the keyboard.*

Explain how to revert to the old UI in case of significant UI changes.

![](06_suggest_rollback.png){width=552 style=block}
*The tooltip explains how to revert to a new experimental UI. Only users who switched to the new UI can see it.*

Do **not** use the tooltip if there is no space to attach it. Instead, use a [banner](banner.md) in a dialog or a notification in the main window.

![](07_got_it_banner.png){width=709}

![](08_got_it_notification.png){width=397}

## How to use

![](09_required_and_optional_information.png){width=527}

Always add the body text.

Add a header if the body text is 2 lines and more. A short header can quickly explain what this tooltip is about.

![](10_header.png){width=342}

Implementation:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
GotItTooltip(TOOLTIP_ID, GET_IT_TEXT, parentDisposable)
    .withHeader("The reader mode is on")
```

</tab>
<tab title="Java" group-key="java">

```java
new GotItTooltip(TOOLTIP_ID, GET_IT_TEXT, parentDisposable)
    .withHeader("The reader mode is on");
```

</tab>
</tabs>

Add a shortcut if the tooltip describes a single action that has a shortcut.

![](11_shortcut.png){width=248}

Implementation:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
GotItTooltip(
    TOOLTIP_ID,
    { "You can rename usages ${shortcut("My.Action")}" },
    parentDisposable
)
```

</tab>
<tab title="Java" group-key="java">

```java
new GotItTooltip(
    TOOLTIP_ID,
    gotItTextBuilder -> {
        String shortcut = gotItTextBuilder.shortcut("My.Action");
        return "You can rename usages " + shortcut;
    },
    parentDisposable
);
```

</tab>
</tabs>

### Link

Add a local link if users might want to revert changes in a feature or configure it.

![](12_link_action.png){width=389}

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
GotItTooltip(TOOLTIP_ID, TOOLTIP_TEXT, parentDisposable)
    .withLink("Disable for all files", this::actionMethodReference)
```

</tab>
<tab title="Java" group-key="java">

```java
new GotItTooltip(TOOLTIP_ID, TOOLTIP_TEXT, parentDisposable)
    .withLink("Disable for all files", this::actionMethodReference);
```

</tab>
</tabs>

Add an external link if there is a help source that can further explain the functionality.

![](13_link_help.png){width=340}

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
GotItTooltip(TOOLTIP_ID, GOT_IT_TEXT, parentDisposable)
    .withBrowserLink("How to use", new URL("https://example.com"))
```

</tab>
<tab title="Java" group-key="java">

```java
new GotItTooltip(TOOLTIP_ID, GOT_IT_TEXT, parentDisposable)
    .withBrowserLink("How to use", new URL("https://example.com"));
```

</tab>
</tabs>

Do **not** add more than one link.

### Text length and formatting

Show no more than 5 lines of body text. If the text does not fit, leave only the essential information and add a link to a help article.

Use sentence case both for the header and body text, and follow the [punctuation rules](punctuation.md).

Make the help text [short and descriptive](writing_short.md).

Avoid using style formatting. It makes the tooltip harder to read.

<table>
    <tr>
        <td width="50%"><format color="Red" style="bold">Incorrect</format></td>
        <td width="50%"><format color="Green" style="bold">Correct</format></td>
    </tr>
    <tr>
        <td><img src="14_formatting_incorrect.png" alt="" width="341" /></td>
        <td><img src="14_formatting_correct.png" alt="" width="341" /></td>
    </tr>
</table>

### Location

Do **not** cover the information the user is currently working with.

<table>
    <tr>
        <td width="50%"><format color="Red" style="bold">Incorrect</format></td>
        <td width="50%"><format color="Green" style="bold">Correct</format></td>
    </tr>
    <tr>
        <td><img src="15_location_incorrect.png" alt="" width="509" /></td>
        <td><img src="15_location_correct.png" alt="" width="509" /></td>
    </tr>
</table>

**Implementation:** See four predefined point providers in the [`GotItTooltip`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/GotItTooltip.kt) class.

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
GotItTooltip(TOOLTIP_ID, GOT_IT_TEXT, parentDisposable)
    .show(gutterComponent, GotItTooltip.TOP_MIDDLE)
```

</tab>
<tab title="Java" group-key="java">

```java
new GotItTooltip(TOOLTIP_ID, GOT_IT_TEXT, parentDisposable)
    .show(gutterComponent, GotItTooltip.TOP_MIDDLE);
```

</tab>
</tabs>

### Timeout

Consider adding a timeout if:

* The text is no longer than 10 words.
* The tooltip appears at the place at which the user is currently looking.
* There is no link in the tooltip.

![](05_suggest_keyboard_actions.png){width=244}

*The Got It tooltip has a timeout because the text is short, the user has just started the Rename refactoring, and is very likely looking at this place.*

Note that adding a timeout automatically hides the Got It button.<br/><br/>

**Implementation:** Default timeout duration is 5 seconds. A custom duration can be set:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
GotItTooltip(TOOLTIP_ID, GOT_IT_TEXT, parentDisposable)
    .withTimeout(3000)
```

</tab>
<tab title="Java" group-key="java">

```java
new GotItTooltip(TOOLTIP_ID, GOT_IT_TEXT, parentDisposable)
    .withTimeout(3000);
```

</tab>
</tabs>

### Versioning

If a tooltip appears automatically after the IDE starts, tie it to the IDE version. Due to the technical limitations, tooltip counters might be reset when the IDE version is updated, and the users might see the same tooltips again.

If a tooltip is triggered by an action or plugin installation, do not tie them to the current IDE version. In this case, users might miss a tooltip if they are using this functionality or plugin for the first time in the next IDE version.

## Built-in behavior

By default, a tooltip is shown only once per user.

The tooltip disappears when:

* <shortcut>Esc</shortcut> is pressed
* User clicks any place outside the tooltip

The default timeout duration is 5 seconds.

If several tooltips appear on application start, they are shown one by one.

Text width is 280px by default. The tooltip width adjusts automatically to make the right margin 16px.

![](16_width_custom.png){width=681}

![](17_width_adjusted.png){width=625}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 3. Grammar and Parser

<link-summary>Sample implementation of grammar and parser for Simple language.</link-summary>

<tldr>

**Reference**: [](implementing_lexer.md), [](implementing_parser_and_psi.md)

**Code**: [`SimpleTokenType`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleTokenType.java),
[`SimpleElementType`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleElementType.java)
</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

In order for the IntelliJ Platform to parse a Simple Language file, tokens and elements must be defined based on [`IElementType`](%gh-ic%/platform/core-api/src/com/intellij/psi/tree/IElementType.java).
The Simple Language grammar must also be defined to generate a parser.

## Define a Token Type

Create [`SimpleTokenType`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleTokenType.java)
in the `org.intellij.sdk.language.psi` package by subclassing `IElementType`.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleTokenType.java" include-symbol="SimpleTokenType"}

## Define an Element Type

Create the [`SimpleElementType`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleElementType.java) in the `org.intellij.sdk.language.psi` package by subclassing `IElementType`.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleElementType.java" include-symbol="SimpleElementType"}

## Define the Grammar

Define a grammar for the Simple Language in the <path>org/intellij/sdk/language/Simple.bnf</path> file.

```bnf
{
  parserClass="org.intellij.sdk.language.parser.SimpleParser"

  extends="com.intellij.extapi.psi.ASTWrapperPsiElement"

  psiClassPrefix="Simple"
  psiImplClassSuffix="Impl"
  psiPackage="org.intellij.sdk.language.psi"
  psiImplPackage="org.intellij.sdk.language.psi.impl"

  elementTypeHolderClass="org.intellij.sdk.language.psi.SimpleTypes"
  elementTypeClass="org.intellij.sdk.language.psi.SimpleElementType"
  tokenTypeClass="org.intellij.sdk.language.psi.SimpleTokenType"
}

simpleFile ::= item_*

private item_ ::= (property|COMMENT|CRLF)

property ::= (KEY? SEPARATOR VALUE?) | KEY
```

Please see [Grammar-Kit](https://github.com/JetBrains/Grammar-Kit) documentation for more details on BNF syntax.

The grammar defines the flexibility of the support for a language.
The above grammar specifies that a property may have or may not have a key and value.
This flexibility allows the IntelliJ Platform to recognize incorrectly defined properties and provide corresponding code analysis and quick fixes.

Note that the `SimpleTypes` class in the `elementTypeHolderClass` attribute above specifies the name of a class that gets generated from the grammar in the scope of the <control>Generate Parser Code</control> action (see [](#generate-a-parser)); it doesn't exist at this point.

## Generate a Parser

Now that the grammar is defined, generate a parser with PSI classes via <control>Generate Parser Code</control> from the context menu on the <path>Simple.bnf</path> file.
This step generates a parser and PSI elements in the <path>/src/main/gen</path> folder of the project.

> [](tools_gradle_grammar_kit_plugin.md) can be used alternatively.
>

![Parser](generated_parser.png){width="800"}

## Add Generated Sources Root

To include the sources generated into <path>/src/main/gen</path>, the project's `sourceSets` must be expanded by inserting the following line in the project's Gradle build script:

<tabs>
<tab title="Kotlin">

```kotlin
sourceSets["main"].java.srcDirs("src/main/gen")
```

</tab>
<tab title="Groovy">

```groovy
sourceSets.main.java.srcDirs 'src/main/gen'
```

</tab>
</tabs>

See <path>[build.gradle.kts](%gh-sdk-samples-master%/simple_language_plugin/build.gradle.kts)</path> for the reference.

Reload the Gradle project for changes to take effect and build the project.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Group Header

<link-summary>UI guidelines on using group headers.</link-summary>

<tldr>

**Implementation:** [`TitledSeparator`](%gh-ic%/platform/platform-api/src/com/intellij/ui/TitledSeparator.java)

</tldr>

A group header clearly labels a group of UI controls.

![](01_group_header.png){width=455}

## When to use

Follow the rules in [Groups of controls](groups_of_controls.md).

Do **not** use group headers when each group contains 3 controls and less. Separate with [vertical insets](layout.md#organize-with-insets) instead.

<format color="Red" style="bold">Incorrect</format>

![](6_03_group_incorrect.png){width=569 style=block}
*Each group has less than 3 controls. Group headers only add noise in this case because control labels are enough to understand their purpose.*

<format color="Green" style="bold">Correct</format>

![](6_03_group_correct.png){width=569}

## How to use

Use title capitalization for the label.

Make the label short, preferably no more than 4 words. Avoid generic words, such as "General" or "Options". See [Writing short and clear](writing_short.md).

If a group contains rarely used or advanced settings, use a **collapsible group header** and collapse it by default.

![](02_collapsed_header.png){width=455}




<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Grouping Actions

<link-summary>Organizing actions in custom groups and attaching them to the existing ones.</link-summary>

If an implementation requires several actions, or there are simply too many actions that overload the menu, the actions can be placed into groups.
This tutorial demonstrates adding an action to an existing group, creating a new action group, and action groups with a variable number of actions.
The sample code discussed in this tutorial is from the code sample [`action_basics`](%gh-sdk-samples-master%/action_basics).

Some content in this tutorial assumes the reader is familiar with the tutorial for [Creating Actions](working_with_custom_actions.md).

## Simple Action Groups

In this first example, the action group will be available as a top-level menu item, and actions are represented as drop-down menu items.
The group is based on a default IntelliJ Platform implementation.

### Creating Simple Groups

Grouping can be registered by adding a [`<group>`](plugin_configuration_file.md#idea-plugin__actions__group) element to the [`<actions>`](plugin_configuration_file.md#idea-plugin__actions) section of a plugin's <path>[plugin.xml](plugin_configuration_file.md)</path> file.
This example has no `class` attribute in the `<group>` element because the IntelliJ Platform framework will supply a default implementation class for the group.
This default implementation is used if a set of actions belonging to the group is static, i.e., does not change at runtime, which is the majority of cases.
The `id` attribute must be unique, so incorporating the plugin ID or package name is the best practice.

The `popup` attribute determines whether actions in the group are placed in a submenu.
The `icon` attribute specifies the FQN of an [`Icon`](icons.md) object to be displayed.
No `compact` attribute is specified, which means this group will support submenus.
See [](basic_action_system.md#registering-actions-in-pluginxml) for more information about these attributes.

```xml
<group
    id="org.intellij.sdk.action.GroupedActions"
    text="Static Grouped Actions"
    popup="true"
    icon="SdkIcons.Sdk_default_icon"/>
```

### Binding Action Groups to UI Components

The following sample shows how to use an [`<add-to-group>`](plugin_configuration_file.md#idea-plugin__actions__action__add-to-group) element to place a custom action group relative to an entry in the <ui-path>Tools</ui-path> menu.
The attribute `relative-to-action` references the action `id` for `PopupDialogAction`, not a native IntelliJ menu entry.
Rather `PopupDialogAction` is defined in the same [`plugin.xml`](%gh-sdk-samples-master%/action_basics/src/main/resources/META-INF/plugin.xml) file.
This group is placed after the single entry for the action `PopupDialogAction`, as defined in the tutorial [Creating Actions](working_with_custom_actions.md#registering-an-action-with-the-new-action-form).

```xml
<group
    id="org.intellij.sdk.action.GroupedActions"
    text="Static Grouped Actions"
    popup="true"
    icon="SdkIcons.Sdk_default_icon">
  <add-to-group
      group-id="ToolsMenu"
      anchor="after"
      relative-to-action="org.intellij.sdk.action.PopupDialogAction"/>
</group>
```

### Adding a New Action to the Static Grouped Actions

The `PopupDialogAction` implementation will be reused and registered in the newly created static group.
The `id` attribute for the reused `PopupDialogAction` implementation is set to a unique value, `org.intellij.sdk.action.GroupPopDialogAction`.
This value differentiates this new [`<action>`](plugin_configuration_file.md#idea-plugin__actions__action) entry from the `id` previously used to register this action implementation in the [Creating Actions](working_with_custom_actions.md#registering-an-action-with-the-new-action-form) tutorial.
A unique `id` supports reuse of action classes in more than one menu or group.
The action in this group will be displayed in the menu as "A Group Action".

```xml
<group
    id="org.intellij.sdk.action.GroupedActions"
    text="Static Grouped Actions"
    popup="true"
    icon="SdkIcons.Sdk_default_icon">
  <add-to-group
      group-id="ToolsMenu"
      anchor="after"
      relative-to-action="org.intellij.sdk.action.PopupDialogAction"/>
  <action
      class="org.intellij.sdk.action.PopupDialogAction"
      id="org.intellij.sdk.action.GroupPopDialogAction"
      text="A Group Action"
      description="SDK static grouped action example"
      icon="SdkIcons.Sdk_default_icon">
  </action>
</group>
```

After performing the steps described above, the action group and its content will be available in the <ui-path>Tools</ui-path> menu.
The underlying `PopupDialogAction` implementation is reused for two entries in the <ui-path>Tools</ui-path> menu:
* Once for the top menu entry <ui-path>Tools | Pop Dialog Action</ui-path> with the action `id` equal to `org.intellij.sdk.action.PopupDialogAction` as set in the [Creating Actions](working_with_custom_actions.md#registering-an-action-with-the-new-action-form) tutorial.
* A second time for the menu entry <ui-path>Tools | Static Grouped Actions | A Group Action</ui-path> with the action `id` equal to `org.intellij.sdk.action.GroupPopDialogAction`.

![Simple Action Group](grouped_action.png){width="550"}

## Implementing Custom Action Group Classes

In some cases, the specific behavior of an action group needs to depend on the context.
The solution is analogous to making a [single action entry dependent on context](working_with_custom_actions.md#extending-the-update-method).

The steps below show how to make a group of actions available and visible if certain conditions are met.
In this case, the condition is having an instance of available editor.
This condition is needed because the custom action group is added to an IntelliJ menu that is only enabled for editing.

### Extending `DefaultActionGroup`

The [`DefaultActionGroup`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/actionSystem/DefaultActionGroup.java) is an implementation of [`ActionGroup`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/ActionGroup.java).
The `DefaultActionGroup` class is used to add child actions and separators between them to a group.
This class is used if a set of actions belonging to the group does not change at runtime.

As an example, extend [`DefaultActionGroup`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/actionSystem/DefaultActionGroup.java)  to create the `CustomDefaultActionGroup` class in the `action_basics` code sample:

```java
public class CustomDefaultActionGroup extends DefaultActionGroup {
  @Override
  public void update(AnActionEvent event) {
    // Enable/disable depending on whether a user is editing...
  }
}
```

### Registering the Custom Action Group

As in the case with the static action group, the action [`<group>`](plugin_configuration_file.md#idea-plugin__actions__group) should be declared in the [`<actions>`](plugin_configuration_file.md#idea-plugin__actions) section of the <path>plugin.xml</path> file, for example, the [action_basics](%gh-sdk-samples-master%/action_basics/src/main/resources/META-INF/plugin.xml) plugin.
For demonstration purposes, this implementation will use localization.

The `<group>` element declaration below shows:
* An optional resource bundle declaration outside the `<actions>` section for localizing actions.
* The presence of the `class` attribute in the `<group>` element tells the IntelliJ Platform framework to use `CustomDefaultActionGroup` rather than the default implementation.
* Setting the group's `popup` attribute to allow submenus.
* The `text` and `description` attributes are omitted in the `<group>` declaration in favor of using the localization resource bundle to define them.
* There is no `icon` attribute for the group; the `CustomDefaultActionGroup` implementation will [add an icon for the group](#providing-specific-behavior-for-the-custom-group).
* The [`<add-to-group>`](plugin_configuration_file.md#idea-plugin__actions__action__add-to-group) element specifies adding the group in the first position of the existing `EditorPopupMenu`.

```xml
<resource-bundle>messages.BasicActionsBundle</resource-bundle>

<actions>
  <group
      id="org.intellij.sdk.action.CustomDefaultActionGroup"
      class="org.intellij.sdk.action.CustomDefaultActionGroup"
      popup="true">
    <add-to-group group-id="EditorPopupMenu" anchor="first"/>
  </group>
</actions>
```

### Adding Actions to the Custom Group

As in [Static Grouped Actions](#adding-a-new-action-to-the-static-grouped-actions), the `PopupDialogAction` action is added as an [`<action>`](plugin_configuration_file.md#idea-plugin__actions__action) element in the [`<group>`](plugin_configuration_file.md#idea-plugin__actions__group) element.
In the `<action>` element declaration below:
* The `class` attribute in the `<action>` element has the same FQN to reuse this action implementation.
* The `id` attribute is unique to distinguish it from other uses of the implementation in the Action System.
* The `text` and `description` attributes are omitted in the `<action>` declaration; they are instead defined using the localization resource bundle.
* The SDK icon is declared for use with this action.

```xml
<group
    id="org.intellij.sdk.action.CustomDefaultActionGroup"
    class="org.intellij.sdk.action.CustomDefaultActionGroup"
    popup="true"
    icon="SdkIcons.Sdk_default_icon">
  <add-to-group group-id="EditorPopupMenu" anchor="first"/>
  <action
      id="org.intellij.sdk.action.CustomGroupedAction"
      class="org.intellij.sdk.action.PopupDialogAction"
      icon="SdkIcons.Sdk_default_icon"/>
</group>
```

Now the translations for the `text` and `description` attributes must be provided in the resource bundle [`BasicActionsBundle.properties`](%gh-sdk-samples-master%/action_basics/src/main/resources/messages/BasicActionsBundle.properties) file according to [Localizing Actions and Groups](basic_action_system.md#localizing-actions-and-groups).
Note there are two sets of `text` and `description` translations, one for the action and one for the group.
Conceivably, there could be another set of translations for the action if it used the [`<override-text>`](plugin_configuration_file.md#idea-plugin__actions__action__override-text) attribute.

```
action.org.intellij.sdk.action.CustomGroupedAction.text=A Popup Action [EN]
action.org.intellij.sdk.action.CustomGroupedAction.description=SDK popup grouped action example [EN]
group.org.intellij.sdk.action.CustomDefaultActionGroup.text=Popup Grouped Actions [EN]
group.org.intellij.sdk.action.CustomDefaultActionGroup.description=Custom defaultActionGroup demo [EN]
```

### Providing Specific Behavior for the Custom Group

Override the `CustomDefaultActionGroup.update()` method to make the group visible only if there's an instance of the editor available.
Also, a custom icon is added to demonstrate that group icons can be changed depending on the action context:

```java
public class CustomDefaultActionGroup extends DefaultActionGroup {
  @Override
  public void update(AnActionEvent event) {
    // Enable/disable depending on whether a user is editing
    Editor editor = event.getData(CommonDataKeys.EDITOR);
    event.getPresentation().setEnabled(editor != null);
    // Take this opportunity to set an icon for the group.
    event.getPresentation().setIcon(SdkIcons.Sdk_default_icon);
  }
}
```

After compiling and running the code sample above and opening a file in the editor and right-clicking, the Editor context menu will pop up containing a new group of actions in the first position.
Note that the group and actions come from the resource file as all contain the suffix " [EN]".
The new group will also have an icon:

![Custom Action Group](editor_popup_menu.png)

## Action Groups with Dynamic Actions Sets

If a set of actions belonging to a custom group varies depending on the context, the group must extend [`ActionGroup`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/ActionGroup.java).
The set of actions in the `ActionGroup` is dynamically defined.

### Creating Variable Action Group

To create a group of actions with a variable number of actions, extend `ActionGroup`.
For example, as in the `action_basics` class [`DynamicActionGroup`](%gh-sdk-samples-master%/action_basics/src/main/java/org/intellij/sdk/action/DynamicActionGroup.java) code:

```java
public class DynamicActionGroup extends ActionGroup {
}
```

### Registering a Variable Action Group

To register the dynamic menu group, a [`<group>`](plugin_configuration_file.md#idea-plugin__actions__group) attribute needs to be placed in the [`<actions>`](plugin_configuration_file.md#idea-plugin__actions) section of [`plugin`.xml](%gh-sdk-samples-master%/action_basics/src/main/resources/META-INF/plugin.xml).
When enabled, this group appears just below the [Static Grouped Actions](#binding-action-groups-to-ui-components) in the <ui-path>Tools</ui-path> menu:

```xml
<group
    id="org.intellij.sdk.action.DynamicActionGroup"
    class="org.intellij.sdk.action.DynamicActionGroup"
    popup="true"
    text="Dynamically Grouped Actions"
    description="SDK dynamically grouped action example"
    icon="SdkIcons.Sdk_default_icon">
  <add-to-group
      group-id="ToolsMenu"
      anchor="after"
      relative-to-action="org.intellij.sdk.action.GroupedActions"/>
</group>
```

> If a`<group>` element's `class` attribute names a class derived from `ActionGroup`, then any static `<action>` declarations in that group throw an exception.
> For a statically defined group, use `DefaultActionGroup`.
>
{style="warning"}

### Adding Child Actions to the Dynamic Group

To add actions to the `DynamicActionGroup`, a non-empty array of `AnAction` instances should be returned from the `DynamicActionGroup.getChildren()` method.
Here again, reuse the `PopupDialogAction` implementation.
This use case is why `PopupDialogAction` overrides a constructor:

```java
public class DynamicActionGroup extends ActionGroup {
  @NotNull
  @Override
  public AnAction[] getChildren(AnActionEvent event) {
    return new AnAction[]{
        new PopupDialogAction(
            "Action Added at Runtime",
            "Dynamic Action Demo",
            SdkIcons.Sdk_default_icon)
    };
  }
}
```

After providing the implementation of `DynamicActionGroup` and making it return a non-empty array of actions, the third position in the <ui-path>Tools</ui-path> menu will contain a new group of actions:

![Dynamic Action Group](dynamic_action_group.png){width="600"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Groups of Controls

<link-summary>Grouping content to help users locate the necessary controls faster.</link-summary>

Group controls to organize content on a screen and help people locate the necessary controls faster.

Use the following controls or layouts:

* [Group headers](group_header.md)
* [Tabs](tabs.md)
* Master-detail layout

## What grouping to choose

Use **group headers** if all rules apply:

> If there are less than 3 controls in all groups, consider separating with [vertical insets](group_header.md#how-to-use).
>
{style="note"}

* Each group contains **no** more than 10 controls

* All groups occupy no more than 2 heights of the dialog in its default size

![](6_01_group_headers.png){width=396}

Use **tabs** if all rules apply:

* One of the groups contains more than 10 controls, or groups occupy more than 2 heights of a dialog
* There are **no** more than 8 groups

![](01_use_tabs.png){width=565}

Use the **master-detail layout** if either of the rules applies:

* There are more than 8 groups
* The number of groups can change

![](02_use_master_detail.png){width=565}

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Icon Button

<link-summary>UI guidelines on using icon buttons.</link-summary>

<tldr>

**Implementation:** [`ActionButton`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/actionSystem/impl/ActionButton.java)

</tldr>

A toolbar icon button is an icon that appears on a toolbar.

![](button_example.png){width=706}

## Types

<p>There are three types of toolbar icon buttons:</p>

An action button triggers an action immediately on clicking it, e.g., the Open button.

A toggle button switches the state on clicking it, e.g., a button to show and hide warnings in the output tree.

![](toggle.png){width=143}

A drop-down button has an arrow icon in the bottom right corner and opens a menu with actions or checkboxes.

[//]: # (TODO: Use [menu list]&#40;menu_list.md&#41; guidelines for drop-down buttons.)

![](drop-down.png){width=284}

## When to use

Follow the rules for [toolbar](toolbar.md#what-items-to-add-on-toolbar).

## How to use

Provide a recognizable icon. Use an [existing icon](https://intellij-icons.jetbrains.design) or create a new one using [icon guidelines](icons_style.md).

Provide a short and descriptive name for a toolbar icon button. Show a tooltip with the button name on mouse hover.
Include a shortcut if there is one. See [Context help](context_help.md) for details.

![](tooltip.png){width=163}

Highlight a toolbar icon button on mouse hover. Highlight a toolbar icon button with a brighter color on clicking it.

* Toggle buttons remain highlighted when they are in the switched on mode. Toggled on buttons do not change color on hover.

* Drop-down buttons remain highlighted while the menu is opened.

![](states.png){width=183}

If an action is not available in this context, disable the corresponding button and gray out the icon.
For toolbar drop-down buttons, disable the arrow icon as well.
Do **not** highlight a disabled icon on mouse hover.

## Sizes and placement

Icons size is 16x16px, icon selection is 22x22px.

For guidelines on the space between toolbar icon buttons see [Toolbar](toolbar.md).

<!--
## Style

<table>
 <col width="50%">
 <tr>
     <td> Hovered </td>
     <td> ActionButton.hoverBackground<br/>
          ActionButton.hoverBorderColor
     </td>
 </tr>
 <tr>
     <td> Background </td>
     <td> ActionButton.pressedBackground<br/>
          ActionButton.pressedBorderColor
     </td>
 </tr>
</table>
-->
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Working with Icons

<link-summary>Adding, organizing, and working with IntelliJ Platform and custom icons.</link-summary>

<tldr>

**Code**: [`AllIcons`](%gh-ic%/platform/util/ui/src/com/intellij/icons/AllIcons.java)

**UI Guidelines:** [Icons list](https://intellij-icons.jetbrains.design), [](icons_style.md)

</tldr>

Icons are used widely by IntelliJ Platform plugins.
Plugins need icons mostly for [](basic_action_system.md), custom component renderers, [](tool_windows.md), etc.

> A plugin _logo_, which represents the plugin itself, has different requirements than icons used within plugins.
> For more information, see the [](plugin_icon_file.md) section.

## Platform vs. Custom Icons

Plugins should reuse existing platform icons whenever possible.

Use the [Icons list](https://intellij-icons.jetbrains.design) to browse existing icons.
Platform icons are located in [`AllIcons`](%gh-ic%/platform/util/ui/src/com/intellij/icons/AllIcons.java).
Icons from plugins are located in the corresponding `<PLUGIN_NAME>Icons` class (e.g., [`GithubIcons`](%gh-ic%/plugins/github/gen/org/jetbrains/plugins/github/GithubIcons.java)).

If custom icons are required, refer to detailed [design guide](icons_style.md).

## Organizing Icons

> See [Action Basics](%gh-sdk-samples-master%/action_basics) sample plugin as a reference.

In the case of a Gradle-based project, icons should be placed in the <path>resources</path> directory.
If the project is DevKit-based, the recommended approach is to put icons to a dedicated [source root](https://www.jetbrains.com/help/idea/content-roots.html) marked as <control>Resources Root</control>, e.g., <path>icons</path> or <path>resources</path>.

If the icons are referenced only in <path>[plugin.xml](plugin_configuration_file.md)</path> attributes or elements, or in the [`@Presentation`](%gh-ic%/platform/analysis-api/src/com/intellij/ide/presentation/Presentation.java) `icon` attribute, then they can be [referenced](#using-icons) by paths.
In case the icons are referenced from the code and/or XML many times, it's convenient to organize them in an [icon holder class](#icons-class).

### Icons Class

Define a class/interface in a top-level package called `icons` holding icon constants as static fields:

<tabs>
<tab title="Java">

```java
package icons;

public interface MyIcons {
  Icon Action = IconLoader.getIcon("/icons/action.svg", MyIcons.class);
  Icon ToolWindow = IconLoader.getIcon("/icons/toolWindow.svg", MyIcons.class);
}
```

</tab>

<tab title="Kotlin">

When using Kotlin, fields must be annotated with `@JvmField`:

```kotlin
package icons

object MyIcons {
  @JvmField
  val Action = IconLoader.getIcon("/icons/action.svg", javaClass)
  @JvmField
  val ToolWindow = IconLoader.getIcon("/icons/toolWindow.svg", javaClass)
}
```

</tab>
</tabs>

The `getIcon()` method of [`IconLoader`](%gh-ic%/platform/util/ui/src/com/intellij/openapi/util/IconLoader.kt) can be used to access the icons.
The path to the icon passed in as argument to `IconLoader.getIcon()` **must** start with leading `/`.

> Starting with 2021.2, `*Icons` class is not required to be located in `icons` package but can use plugin's package: `icons.MyIcons` &rarr; `com.example.plugin.MyIcons`.
>
{style="note"}

## Using Icons

Icons defined inside <path>plugin.xml</path> with `icon` attribute for [`<action>`](plugin_configuration_file.md#idea-plugin__actions__action) or extension point, as well in `@Presentation`'s `icon` attribute, can be referenced in two ways:
- by icon file path
- by icon constant in the icon holder class

To reference an icon by path, provide the path relative to the resources directory, e.g., for icons located in <path>my-plugin/src/main/resources/icons</path> directory:

```xml
<actions>
  <action icon="/icons/myAction.svg" ... />
</actions>

<extensions defaultExtensionNs="com.intellij">
  <toolWindow icon="/icons/myToolWindow.svg" ... />
</extensions>
```

In the case of icon holder class, reference the icon constants.
Note that if the class is located in the top-level `icons` package, name `icons` will be automatically prefixed and must not be specified.
In case of placing the class in a custom package, the full package name must be provided, e.g.:

```xml
<actions>
  <!-- referencing icons from class in top-level 'icons' package -->
  <action icon="MyIcons.MyAction" ... />
</actions>

<extensions defaultExtensionNs="com.intellij">
  <!-- referencing icons from custom package -->
  <toolWindow icon="com.example.plugin.MyIcons.MyToolWindow" ... />
</extensions>
```

## Icon Formats

IntelliJ Platform supports Retina displays and has a bundled dark theme called [Darcula](https://www.jetbrains.com/help/idea/user-interface-themes.html).
Thus, every icon should have a dedicated variant for Retina devices and Darcula theme.
In some cases, you can skip dark variants if the original icon looks good under Darcula.

Required icon sizes depend on the usage as listed in the following table:

| Usage                  | Icon Size (pixels) |
|------------------------|--------------------|
| Node, Action, Filetype | 16x16              |
| Tool window            | 13x13              |
| Editor gutter          | 12x12              |
| Editor gutter (New UI) | 14x14              |

### SVG Format

> SVG ([Scalable Vector Graphics](https://en.wikipedia.org/wiki/Scalable_Vector_Graphics)) icons are supported since 2018.2.
>
{style="note"}

As SVG icons can be scaled arbitrarily, they provide better results in HiDPI environments or when used in combination with bigger screen fonts (e.g., in presentation mode).

A base size denoting the size (in the user space) of the rendered image in 1x scale should be provided.
The size is set via the `width` and `height` attributes omitting the size units.
If unspecified, it defaults to 16x16 pixels.

A minimal SVG icon file:

```xml

<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16">
  <rect width="100%" height="100%" fill="green"/>
</svg>
```

The naming notation used for PNG icons (see below) is still relevant.

However, the `@2x` version of an SVG icon should still provide the same base size.
The icon graphics of such an icon can be expressed in more details via double precision.
If the icon graphics are simple enough so that it renders perfectly in every scale, then the `@2x` version can be omitted.

### PNG Format (Deprecated)

> Use [SVG icons](#svg-format) for if your plugin targets 2018.2+.
>
{style="warning"}

All icon files must be placed in the same directory following this naming pattern (replace <path>.png</path> with <path>.svg</path> for SVG icons):

| Theme/Resolution | File name pattern                 | Size        |
|------------------|-----------------------------------|-------------|
| Default          | <path>iconName.png</path>         | W x H       |
| Darcula          | <path>iconName_dark.png</path>    | W x H       |
| Default + Retina | <path>iconName@2x.png</path>      | 2\*W x 2\*H |
| Darcula + Retina | <path>iconName@2x_dark.png</path> | 2\*W x 2\*H |

The `IconLoader` class will load the icon that matches the best depending on the current environment.

Here are examples of <path>toolWindowStructure.png</path> icon representations:

| Theme/Resolution | File name                                    | Icon                                                                    |
|------------------|----------------------------------------------|-------------------------------------------------------------------------|
| Default          | <path>toolWindowStructure.png</path>         | ![Tool Window Structure](toolWindowStructure.png)                       |
| Darcula          | <path>toolWindowStructure_dark.png</path>    | ![Tool Window Structure, dark](toolWindowStructure_dark.png)            |
| Default + Retina | <path>toolWindowStructure@2x.png</path>      | ![Tool Window Structure, retina](toolWindowStructure@2x.png)            |
| Darcula + Retina | <path>toolWindowStructure@2x_dark.png</path> | ![Tool Window Structure, retina, dark](toolWindowStructure@2x_dark.png) |

## Animated Icons

Animated icons are a way to show that a plugin is now performing some long-time action, e.g., when the plugin is loading some data.

Any animated icon is a set of frames that loop with a delay.

To create a new animated icon, use the
[`AnimatedIcon`](%gh-ic%/platform/ide-core/src/com/intellij/ui/AnimatedIcon.java).
To create an icon where frames follow each other with the same delay, use a constructor that accepts a delay and icons:

```java
AnimatedIcon icon = new AnimatedIcon(
    500,
    AllIcons.Ide.Macro.Recording_1,
    AllIcons.Ide.Macro.Recording_2);
```

To create an icon from frames with different delays, use `AnimatedIcon.Frame`.
Each frame represents an icon, and a delay until the next frame.

Use the predefined `AnimatedIcon.Default` loader icon to indicate a long process.
This icon has a larger `AnimatedIcon.Big` version.

> Add `true` [`AnimatedIcon.ANIMATION_IN_RENDERER_ALLOWED`](%gh-ic%/platform/ide-core/src/com/intellij/ui/AnimatedIcon.java) client property to list, table, and tree components to repaint animated icons automatically.
> See `ANIMATION_IN_RENDERER_ALLOWED`'s Javadoc for details.

## Icon Tooltips

Register a resource bundle via `com.intellij.iconDescriptionBundle` extension point to provide tooltips automatically for all [`SimpleColoredComponent`](%gh-ic%/platform/platform-api/src/com/intellij/ui/SimpleColoredComponent.java) renderers.

Create `icon.<icon-path>.tooltip` key in a resource bundle, where `<icon-path>` is the icon path with leading slash and `.svg` removed and slashes replaced with dots (e.g., `/nodes/class.svg` &rarr; `icon.nodes.class.tooltip`).

## New UI Icons
<primary-label ref="2022.3"/>

> See [](UI_kit.md) for guidelines and overview.

To fully support the [New UI](https://www.jetbrains.com/help/idea/new-ui.html), the plugin must provide additional dedicated icons and mapping information.
This allows supporting both UI variants at the same time, depending on what the user has selected.

<procedure title="Setup">

1. Create a new <path>expui</path> directory in the icon root directory ([Reference](#organizing-icons)).
2. Copy all icons for the New UI into this directory.
3. Create an empty <path>\$PluginName\$IconMappings.json</path> mapping file in the resources directory.
4. Register <path>\$PluginName\$IconMappings.json</path> in <path>plugin.xml</path> via the `com.intellij.iconMapper` extension point.

</procedure>

> Sample setup from Maven plugin:
>
> - Icon resources root directory: [`images`](%gh-ic%/plugins/maven/src/main/resources/images)
> - Mapping file: [`MavenIconMappings.json`](%gh-ic%/plugins/maven/src/main/resources/MavenIconMappings.json)
> - Extension point registration (`<iconMapper mappingFile="MavenIconMappings.json"/>`): [`plugin.xml`](%gh-ic%/plugins/maven/src/main/resources/META-INF/plugin.xml)

### Mapping Entries

All New UI icons must be mapped in the <path>\$PluginName\$IconMappings.json</path> mapping file.

For each New UI icon, add a mapping entry inside `expui` block.
Each directory starts a new block containing all its entries (see linked `MavenIconMappings.json` sample from above).

In this example, the icon root directory is named <path>icons</path>:
```json
{
  "icons": {
    "expui": {
      "dirName": {
        "icon1.svg": "icons/icon1.svg",
        "icon2.svg": "icons/icon2.svg"
      },
      "anotherDir": {
        "anotherIcon.svg": "images/anotherIcon.svg"
      }
    }
  }
}
```

If one new icon replaces several old icons, use a JSON list.
Example from [`PlatformIconMappings.json`](%gh-ic%/platform/icons/src/PlatformIconMappings.json):

```json
"vcs.svg": [
  "toolwindows/toolWindowChanges.svg",
  "vcs/branch.svg"
]
```

### New UI Tool Window Icons

The New UI uses _outlined_ icons for tool windows that have a size of 20x20 pixels and 16x16 pixels in
[compact mode](https://www.jetbrains.com/help/idea/new-ui.html#compact-mode).
Plugin developers who want to provide all necessary variants of their tool window icons
use the following suffix scheme for their icon filename, here referred to as <path>iconToolWindow</path>:

- <path>iconToolWindow.svg</path>: a 16x16 pixels _compact mode_ variant of the icon for the light theme.
- <path>iconToolWindow_dark.svg</path>: a 16x16 pixels _compact mode_ variant of the icon for the dark theme.
- <path>iconToolWindow@20x20.svg</path>: a 20x20 pixels variant of the icon for the light theme.
- <path>iconToolWindow@20x20_dark.svg</path>: a 20x20 pixels variant of the icon for the dark theme.

### New UI Icon Colors

To work as expected, the New UI requires specific colors for icon content.
This is necessary for situations where tool window buttons are active, during which the background is highlighted.
To enhance contrast, the IntelliJ Platform dynamically alters the icon's content color to white.

Hence, for the creation of light and dark mode variants, plugin authors must use the following
prescribed colors within their icons:

| Theme | Color Code                                  |
|-------|---------------------------------------------|
| Light | `#6C707E` <format color="6C707E">▆</format> |
| Dark  | `#CED0D6` <format color="CED0D6">▆</format> |

> Various online resources, like the UI Guidelines
> [here](tool_window.md) and
> [here](icons_style.md#grid-and-size),
> will be updated soon and currently don't include information about the New UI.
>
{style="note"}
---
title: Icons list
category: Resources
type: full
---

<iframe class="iconsSite" src="https://intellij-icons.jetbrains.design" width="100%"></iframe>
<script type="text/javascript">
  window.addEventListener('message', function (event) {
    if (event.data === 'iframeClick') {
      toggleMenu(false);
    }
  }, false);
</script><!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Icons

<link-summary>Guidelines on designing and creating icons.</link-summary>

Follow these guidelines to create a new icon or redesign an existing one for IntelliJ-based products.

> See all icons in the [Icons list](https://intellij-icons.jetbrains.design).
> Use the [IntelliJ Icons Figma plugin](UI_kit.md)
> to quickly find and use icons in UI mockups.
>
{style="note"}

## Style

A common style unites several icons into a set and makes them recognizable.

Use a flat geometric icon style with straight corners and edges. Flat icons remain legible even in small sizes.

Use flat shapes instead of complex 3D forms:

| <format color="Red" style="bold">Incorrect</format> | <format color="Green" style="bold">Correct</format> |
|-----------------------------------------------------|-----------------------------------------------------|
| ![](style_pin_3d.png){width="190"}                  | ![](style_pin_flat.png){width="190"}                |

Use straight corners and lines instead of curves. It’s recommended to use 45° and 90° angles, or 30° and 60° where possible:

| <format color="Red" style="bold">Incorrect</format> | <format color="Green" style="bold">Correct</format> |
|-----------------------------------------------------|-----------------------------------------------------|
| ![](style_folder_round.png){width="144"}            | ![](style_folder_straigt.png){width="144"}          |

Icons should be as simple as possible without losing their meaning. Clean and simple icons ensure readability and reduce visual clutter.

<table>
<tr>
    <td> <format color="Red" style="bold">Incorrect</format> </td>
    <td> <format color="Green" style="bold">Correct</format> </td>
</tr>
<tr>
    <td> <img src="style_soft_wrap_detailed.png" width="160"/> </td>
    <td> <img src="style_soft_wrap_simple.png" width="160"/> </td>
</tr>
<tr>
    <td colspan="2"><em>Reduced the icon to its minimal form, without losing its meaning.</em></td>
</tr>
</table>

## Grid and size

Basically, icons fit into a square artboard. Leave a transparent padding around the perimeter. For default 16px icons, the transparent border is 1px, so the icon’s visible part should be inside the 14px x 14px area.

![](grid.png){width=251 style=block}
*14px x 14px is the area where the visible part of the icon should fit for a 16px icon.*

Content should only go beyond the borders if a [modifier](#modifier) is added, or if additional visual weight is required.

Sizes for other icon sizes can be found in the table below:

<table>

<tr>
<td width="50%"> Icon Type </td>
<td width="25%"> Icons Size </td>
<td width="25%"> Transparent Border </td></tr>
<tr>
    <td> Gutter, status bar </td>
    <td> 12px x 12px </td>
    <td> — </td>
</tr>
<tr>
    <td> Tool window </td>
    <td> 13px x 13px </td>
    <td> — </td>
</tr>
<tr>
    <td> <b>Default:</b> toolbar icons, project tree, etc. </td>
    <td> 16px x 16px </td>
    <td> 1px, except for modifier </td>
</tr>
<tr>
    <td> Dialogs </td>
    <td> 32px x 32px </td>
    <td> 2px </td>
</tr>
<tr>
    <td> Logo app icon </td>
    <td>
         <p>32px x 32px</p>
         <p>64px x 64px</p>
         <p>128px x 128px</p>
         <p>256px x 256px</p>
         <p>512px x 512px</p>
    </td>
    <td> — </td>
</tr>
</table>

## Basic shapes

Use basic shapes to build icons, such as squares, circles and rectangles. Using a grid and basic shapes ensures consistent visual proportions and placement.

<table style="none">
    <tr>
        <td width="50%"><img src="shape_square.png" alt="" width="192" /> <emphasis>Square 12px x 12px</emphasis></td>
        <td width="50%"><img src="shape_circle.png" alt="" width="195" /> <emphasis>Circle 14px</emphasis></td>
    </tr>
    <tr>
        <td><img src="shape_rect_horizontal.png" alt="" width="192" /> <emphasis>Horizontal rectangle 10px x 14px</emphasis></td>
        <td><img src="shape_rect_vertical.png" alt="" width="192" /> <emphasis>Vertical rectangle 14px x 10px</emphasis></td>
    </tr>
</table>

Make sure that icons have the same visual weight. The more filled an icon is, the less space it needs. Following this rule, circles, rhombuses, triangles and other non-square shapes should have larger height and width to be optically balanced with square figures.

![](shapes_weight_1.png){width=542 style=block}
*Make the circle diameter 2px bigger than square icons’ height to compensate for the visual weight.*

Icons with more details should occupy more space.

![](shapes_weight_2.png){width=542 style=block}
*The eye icon is less detailed and occupies less space than a more complex scissors icon.*

Icon weight can often take priority over the basic shape sizing. For more examples on visual weight compensation, see [Optical Effects in User Interfaces](https://medium.muz.li/optical-effects-9fca82b4cd9a).

## Stroke

Use a 2px stroke as the main drawing line. Consistent line weight makes icons cohesive.

<table style="none">
<tr>
    <td width="50%"> <img src="stroke_download.png" width="215"/></td>
    <td width="50%"> <img src="stroke_calc.png" width="233"/></td>
</tr>
<tr>
    <td><em>Use consistent stroke width.</em></td>
    <td><em>A thinner stroke can be used for subtle tweaks to the legibility of an icon and for optical correction.</em></td>
</tr>
</table>

Align pixels on the X and Y axis and round to the nearest whole pixel, or 0.5px if it’s not possible to align to integer pixels. Aligning icons off the pixel grid will make the icon blurry when it’s rasterized.

> To check what an icon will look like when rasterized use the <ui-path>View | Canvas | Show Pixels on Zoom</ui-path> option <shortcut>Ctrl+P</shortcut> in Sketch,
> <ui-path>View | Pixel Preview</ui-path> <shortcut>Alt+Ctrl+Y</shortcut> in Illustrator.
>
{style="note"}

<table>
<tr>
    <td width="50%"><format color="Red" style="bold">Incorrect</format></td>
    <td width="50%"><format color="Green" style="bold">Correct</format></td>
</tr>
<tr>
    <td><img src="stroke_pixels_incorrect.png" width="192"/>
         <em> If an icon is positioned off pixels, <br /> it becomes blurry when rasterized.</em> </td>
    <td><img src="stroke_pixels_correct.png" width="192"/>
         <em> Position stokes on integer pixels where possible.</em> </td>
</tr>
</table>

Use the 30°, 45° and 60° angles for diagonal lines as they look sharper than diagonals with other angles.

Round shapes, small details and some letters cannot be aligned to the pixel grid. Make sure that the significant pixels have sufficient saturation.

Reduce the number of anchors as they increase the size of the image and takes longer to process it.

<table>
<tr>
    <td width="50%"><format color="Red" style="bold">Incorrect</format></td>
    <td width="50%"><format color="Green" style="bold">Correct</format></td>
</tr>
<tr>
    <td><img src="stroke_anchors_incorrect.png" width="192"/>
         <em> Unneeded anchors are added.</em> </td>
    <td><img src="stroke_anchors_correct.png" width="192"/>
         <em> Use the minimum number of anchors.</em> </td>
</tr>
</table>

## Modifier

A modifier is a small shape added over the base icon.

The default modifier position is the bottom right corner. If the base shape is badly recognizable with a modifier in the bottom right corner, or if several modifiers are needed, the modifier can be placed in other corners.

  <table style="none">
  <tr>
      <td width="50%"> <img src="modifier_search.png" width="192"/>
           <em> Place the modifier in the left corner <br/> if the base shape is badly recognizable <br/> with the modifier in the right corner.</em> </td>
      <td width="50%"> <img src="modifier_parameter.png" width="192"/>
           <em> Place the modifier in the left corner <br/> if there are several modifiers.</em> </td>
  </tr>
  </table>

A modifier size is from 6px to 9px, depending on the shape's weight.
Leave a 1-2px spacing between the modifier and the main shape, to make the modifier clearly visible.

![](modifier_size.png){width=577 style=block}
*Modifier sizes*

## Arrows

General rules for arrows: arrowhead is a filled triangle with a 90° pointing angle, a 2px body ends in a square stroke. An arrow’s orientation is horizontal, vertical, 45° or round.

![](arrows_basic.png){width=515 style=block}
*Basic arrow icons*

Unfilled arrowhead can be used if there is only one arrow on an icon to reduce excessive visual weight, for example, for navigation arrows, such as back and forward, up and down.

<table style="none">
<tr>
    <td width="50%"> <img src="arrow_filled.png" width="144"/></td>
    <td width="50%"> <img src="arrow_unfilled.png" width="192"/></td>
</tr>
<tr>
    <td><em> 90° arrowhead and 2px square stroke body.</em></td>
    <td><em> Back arrow with unfilled arrowhead to compensate visual weight.</em></td>
</tr>
</table>

Do **not** use other arrow styles, for example, unfilled arrows or arrows with thinned tails.

<format color="Red" style="bold">Incorrect</format>

![](arrows_incorrect.png){width=510}

## Color

Do not use color as the only differentiator between icons (except for the [Noun icon](#noun-icons)) because some people do not distinguish colors. Make sure that icons are easily distinguishable by their shape.

Do not use gradients or shadows.

### Action icons

An action icon is an icon that triggers an action. It usually appears on toolbars and in dialogs.
There are 5 colors in the action icons palette.
The dark version is for Darcula theme.

[//]: # (<note>Download a <a href="../../../images/ui/icons/Icons template.sketch" download>Sketch file</a> with the color palette.</note>)

<table style="none">
    <tr>
        <td width="50%">
            <img src="action_red.png" width="64" />
            <br/>
            <p><b>Red</b></p><p>#DB5860</p>
        </td>
        <td width="50%">
            <img src="action_red_d.png" width="64" />
            <br/>
            <p><b>Red dark</b></p><p>#C75450</p>
        </td>
    </tr>
    <tr>
        <td>
            <img src="action_yellow.png" width="64" />
            <br/>
            <p><b>Yellow</b></p><p>#EDA200</p>
        </td>
        <td>
            <img src="action_yellow_d.png" width="64" />
            <br/>
            <p><b>Yellow dark</b></p><p>#F0A732</p>
        </td>
    </tr>
    <tr>
        <td>
            <img src="action_green.png" width="64" />
            <br/>
            <p><b>Green</b></p><p>#59A869</p>
        </td>
        <td>
            <img src="action_green_d.png" width="64" />
            <br/>
            <p><b>Green dark</b></p><p>#499C54</p>
        </td>
    </tr>
    <tr>
        <td>
            <img src="action_blue.png" width="64" />
            <br/>
            <p><b>Blue</b></p><p>#389FD6</p>
        </td>
        <td>
            <img src="action_blue_d.png" width="64" />
            <br/>
            <p><b>Blue dark</b></p><p>#3592C4</p>
        </td>
    </tr>
    <tr>
        <td>
            <img src="action_grey.png" width="64" />
            <br/>
            <p><b>Grey</b></p><p>#6E6E6E</p>
        </td>
        <td>
            <img src="action_grey_d.png" width="64" />
            <br/>
            <p><b>Grey dark</b></p><p>#AFB1B3</p>
        </td>
    </tr>

</table>

Use these colors according to the following rules:

1. By default, action icons are grey and monochromatic:

   ![](colors_actions_grey.png){width=319}

2. If an icon falls into one of the categories below, use the corresponding color:

    <table style="none">
        <tr>
            <td width="50%"> <b>Green</b> <p>Positive actions: run, create</p><br /><img src="colors_actions_green.png" /> </td>
            <td width="50%"> <b>Red</b> <p>Destructive actions: stop, remove, force</p><br /><img src="colors_actions_red.png" /> </td>
        </tr>
        <tr>
            <td> <b>Blue</b> <p>Accent color to highlight popular icons based on usage statistics, highlight small elements in complex icons</p> <br /><img src="colors_actions_blue.png" /> </td>
            <td> <b>Yellow</b> <p>Warning actions: attract attention to the places (e.g., code) that can be optimized or improved</p> <br /><img src="colors_actions_yellow.png" /> </td>
        </tr>
    </table>

3. Preserve colors in icon combinations. If an icon is colored in its full size, it should have the same color when reduced.

   ![](colors_actions_modifier.png){width=248}

4. Use green and red colors for paired icons. Color helps distinguish between similar icons faster.

   ![](colors_actions_pair.png){width=233}

5. Use grey color for tool window icons. Icons are placed on the perimeter of the IDE, so they should not attract too much attention and distract users.

   ![](colors_toolbuttons.png){width=750}

### Status icons

Color is a great way to provide status information. Use status icons that are already present in the IDE repository:

![](colors_status.png){width=308}

If you need a new icon, color it according to its semantics. Make sure that the status icons are easily distinguishable by their form, as many colorblind people find it difficult to distinguish between red and green.

### Noun icons

A noun icon is an icon that appears in the tree view to mark different file types. It helps to locate items in the list faster and does not trigger an action.

The palette for noun icons is wider, because there are lots of icons in one set:

<table style="none">
    <tr>
        <td width="33%">
            <img src="noun_grey.png" width="64" />
            <br/>
            <p><b>Grey</b></p><p>#9AA7B0</p>
        </td>
        <td width="33%">
            <img src="noun_grey_80.png" width="64" />
            <br/>
            <p><b>Grey 80%</b></p><p>#9AA7B0 op. 80%</p>
        </td>
        <td width="33%">
            <img src="noun_grey_60.png" width="64" />
            <br/>
            <p><b>Grey 60%</b></p><p>#9AA7B0 op. 60%</p>
        </td>
    </tr>
    <tr>
        <td>
            <img src="noun_blue.png" width="64" />
            <br/>
            <p><b>Blue</b></p><p>#40B6E0</p>
        </td>
        <td>
            <img src="noun_blue_70.png" width="64" />
            <br/>
            <p><b>Blue 70%</b></p><p>#40B6E0 op. 70%</p>
        </td>
        <td>
            <img src="noun_blue_60.png" width="64" />
            <br/>
            <p><b>Blue 60%</b></p><p>#40B6E0 op. 60%</p>
        </td>
    </tr>
    <tr>
        <td>
            <img src="noun_green.png" width="64" />
            <br/>
            <p><b>Green</b></p><p>#62B543</p>
        </td>
        <td>
            <img src="noun_green_70.png" width="64" />
            <br/>
            <p><b>Green 70%</b></p><p>#62B543 op. 70%</p>
        </td>
        <td>
            <img src="noun_green_60.png" width="64" />
            <br/>
            <p><b>Green 60%</b></p><p>#62B543 op. 60%</p>
        </td>
    </tr>
    <tr>
        <td>
            <img src="noun_yellow.png" width="64" />
            <br/>
            <p><b>Yellow</b></p><p>#F4AF3D</p>
        </td>
        <td>
            <img src="noun_yellow_70.png" width="64" />
            <br/>
            <p><b>Yellow 70%</b></p><p>#F4AF3D op. 70%</p>
        </td>
        <td>
            <img src="noun_yellow_60.png" width="64" />
            <br/>
            <p><b>Yellow 60%</b></p><p>#F4AF3D op. 60%</p>
        </td>
    </tr>
    <tr>
        <td>
            <img src="noun_purple.png" width="64" />
            <br/>
            <p><b>Purple</b></p><p>#B99BF8</p>
        </td>
        <td>
            <img src="noun_purple_70.png" width="64" />
            <br/>
            <p><b>Purple 70%</b></p><p>#B99BF8 op. 70%</p>
        </td>
        <td>
            <img src="noun_purple_60.png" width="64" />
            <br/>
            <p><b>Purple 60%</b></p><p>#B99BF8 op. 60%</p>
        </td>
    </tr>
    <tr>
        <td>
            <img src="noun_pink.png" width="64" />
            <br/>
            <p><b>Pink</b></p><p>#F98B9E</p>
        </td>
        <td>
            <img src="noun_pink_70.png" width="64" />
            <br/>
            <p><b>Pink 70%</b></p><p>#F98B9E op. 70%</p>
        </td>
        <td>
            <img src="noun_pink_60.png" width="64" />
            <br/>
            <p><b>Pink 60%</b></p><p>#F98B9E op. 60%</p>
        </td>
    </tr>
    <tr>
        <td>
            <img src="noun_red.png" width="64" />
            <br/>
            <p><b>Red</b></p><p>#F26522</p>
        </td>
        <td>
            <img src="noun_red_70.png" width="64" />
            <br/>
            <p><b>Red 70%</b></p><p>#F26522 op. 70%</p>
        </td>
        <td>
            <img src="noun_red_60.png" width="64" />
            <br/>
            <p><b>Red 60%</b></p><p>#F26522 op. 60%</p>
        </td>
    </tr>
    <tr>
        <td>
            <img src="noun_red_status.png" width="64" />
            <br/>
            <p><b>Red status</b></p><p>#E05555</p>
        </td>
        <td>
            <img src="noun_red_status_70.png" width="64" />
            <br/>
            <p><b>Red status 70%</b></p><p>#E05555 op. 70%</p>
        </td>
    </tr>
    <tr>
        <td>
            <img src="noun_yellow_d.png" width="64" />
            <br/>
            <p><b>Yellow dark</b></p><p>#D9A343</p>
        </td>
    </tr>
    <tr>
        <td>
            <img src="noun_green_android.png" width="64" />
            <br/>
            <p><b>Green Android</b></p><p>#A4C639</p>
        </td>
    </tr>
    <tr>
        <td>
            <img src="noun_black.png" width="64" />
            <br/>
            <p><b>Black text</b></p><p>#231F20 op. 70%</p>
        </td>
    </tr>
</table>

Select colors for new icons based on existing colors and users’ habits.

Use colors with 60% opacity and grey 80% for big parts, like folder icons:

![](colors_nouns_folder.png){width=86}

Transparent icons are used in both light and dark themes, so in most cases there’s only one version.

Use colors with 70% opacity for medium size elements that occupy about half of an icon, like file type icons:

![](colors_nouns_file.png){width=111}

Use colors without opacity for small elements, like modifiers.

![](colors_nouns_modifier.png){width=87}

## Font

To make a new icon with a letter, reuse letters from existing icons. If there's no suitable letter in existing icons, use a common sans-serif font like Arial or Open Sans.

## Export Icons

> Install the [Svgo-compressor plugin](https://www.sketchapp.com/extensions/plugins/svgo-compressor/) in Sketch to optimize icons before save.
>
{style="note"}

Use the SVG format for icons files. Use camelCase capitalization for icon names:

<path>iconName.svg</path>

If an icon is not the same in the dark theme, then also create:

<path>iconName_dark.svg</path>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# IDE Development Instance

<link-summary>Overview of IDE instance used for running and debugging a plugin during development.</link-summary>

A plugin project can be run or debugged from within the development instance of IntelliJ IDEA.
Selecting the `runIde` task for a Gradle-based project (or [Run](running_and_debugging_a_theme.md) menu for a _Plugin DevKit_-based project)
will launch a _Development Instance_ of the target IDE with the current development version of the plugin enabled.

This page describes how to control some settings for the Development Instance.

> See also `runIde` task (Reference: [2.x](tools_intellij_platform_gradle_plugin_tasks.md#runIde), [1.x](tools_gradle_intellij_plugin.md#tasks-runide)) properties and [Advanced Configuration](https://www.jetbrains.com/help/idea/tuning-the-ide.html) for general VM options and properties.
>

## Using a JetBrains Runtime for the Development Instance

> See [](tools_intellij_platform_gradle_plugin_jetbrains_runtime.md) when using [](tools_intellij_platform_gradle_plugin.md).
>
{title="IntelliJ Platform Gradle Plugin (2.x)"}

An everyday use case is to develop (build) a plugin project against a JDK, e.g., Java 17, and then run or debug the plugin in a Development Instance of the IDE.
In such a situation, Development Instance must use a [JetBrains Runtime (JBR)](https://www.jetbrains.com/jetbrains-runtime) rather than the JDK used to build the plugin project.

The JetBrains Runtime is an environment for running IntelliJ Platform-based IDEs on Windows, macOS, and Linux.
It has some modifications by JetBrains, such as fixes for native crashes not present in official JDK builds.
A version of the JetBrains Runtime is bundled with all IntelliJ Platform-based IDEs.
To produce accurate results while running or debugging a plugin project in a Development Instance, follow the procedures below to ensure the Development Instance uses a JetBrains Runtime.

### Using JetBrains Runtime

<tabs group="project-type">

<tab title="Gradle IntelliJ Plugin (1.x)" group-key="gradle">

By default, the Gradle plugin will fetch and use the version of the JetBrains Runtime for the Development Instance corresponding to the version of the IntelliJ Platform used for building the plugin project.
If required, an alternative version can be specified using [`runIde.jbrVersion`](tools_gradle_intellij_plugin.md#tasks-runide-jbrversion) task property.

</tab>

<tab title="Plugin DevKit" group-key="devkit">

The [Run Configuration](https://www.jetbrains.com/help/idea/run-debug-configuration.html) for a DevKit-based plugin project controls the JDK used to run and debug a plugin project in a Development Instance.
The default Run Configuration uses the same JDK for building the plugin project and running the plugin in a Development Instance.

To change the runtime for the Development Instance, set the _JRE_ field in the Run Configuration edit dialog to download a JetBrains Runtime.

</tab>
</tabs>

### Determining a JetBrains Runtime Version

The JetBrains Runtime is determined by the JDK version used to build the plugin project, regardless of whether it is built on macOS, Windows, or Linux.

<procedure title="Determine an Example JetBrains Runtime Version">

If a plugin is developed against the Java 8 SE Development Kit 8 for macOS (<path>jdk-8u212-macosx-x64.dmg</path>) to acquire the compatible JetBrains Runtime:

1. Go to the [GitHub JetBrains Runtime Releases](https://github.com/JetBrains/JetBrainsRuntime) for general information and the latest build.
2. Open the [Releases](https://github.com/JetBrains/JetBrainsRuntime/releases) page to access all releases.
3. Select the package name corresponding to the platform and SDK version.
   In this case, the package name is `jbrsdk8-osx-x64` for **J**et**B**rains **R**untime _SDK_ version 8, macOS x64 hardware.
4. In the list of files, find the name that satisfies:
    * The version and build number match the JDK used to build the plugin project.
      For example, `jbrx-8u252-osx-x64` matches the Java 8 JDK, build 252: `jdk-8u252-macosx-x64`.
    * Pick the highest JetBrains Runtime build number available.
      For example, the file is <path>jbrx-8u252-osx-x64-b1649.2.tar.gz</path>, meaning build 1649.2 for this JetBrains Runtime matching Java 8 JDK build 252.

</procedure>

### JetBrains Runtime Variants

The JetBrains Runtime is delivered in various variants used for different purposes, like debugging, running for development purposes, or bundling with the IDE.

Available JBR variants are:

- `jcef` - the release bundles with the [JCEF](embedded_browser_jcef.md) browser engine
- `sdk` - JBR SDK bundle used for development purposes
- `fd` - the fastdebug bundle which also includes the `jcef` module
- `dcevm` - bundles DCEVM (Dynamic Code Evolution Virtual Machine)
- `nomod` – the release bundled without any additional modules

> For `JBR 17`, `dcevm` is bundled by default.
> As a consequence, separated `dcevm` and `nomod` variants are no longer available.
>
{style="note"}

## Enabling Auto-Reload

<primary-label ref="2020.1"/>

Starting in 2020.1, this is available for compatible [dynamic plugins](dynamic_plugins.md).
This allows a much faster development cycle by avoiding a full restart of the development instance after detecting code changes (when JARs are modified).

Please note that any unloading problems in a production environment will ask the user to restart the IDE.

> Auto-Reload does not work when the sandbox IDE instance is running under a debugger.
>
{style="warning" title="Debugging"}

### IntelliJ Platform Gradle Plugin (2.x)

Auto-Reload is enabled by default.

Set property [`intellijPlatform.autoReload`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-autoReload) to `false` to disable it explicitly,
see [](tools_intellij_platform_gradle_plugin_faq.md#how-to-disable-the-automatic-reload-of-dynamic-plugins)

After starting the sandbox IDE instance, run the [`buildPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#buildPlugin) task after modifications
in the plugin project and switch back focus to the sandbox instance to trigger reload.

> [`buildSearchableOptions`](tools_intellij_platform_gradle_plugin_tasks.md#buildSearchableOptions) task must currently be
> [disabled explicitly](tools_intellij_platform_gradle_plugin_faq.md#how-to-disable-building-the-searchable-options) to work around
> _Only one instance of IDEA can be run at a time_ problem.
>
{style="warning"}

### Gradle IntelliJ Plugin (1.x)

{collapsible="true" default-state="collapsed"}

<primary-label ref="Obsolete"/>

<include from="tools_gradle_intellij_plugin.md" element-id="gradlePluginObsolete"/>

Auto-Reload is enabled by default for target platform 2020.2 or later.

Set property [`runIde.autoReloadPlugins`](tools_gradle_intellij_plugin.md#tasks-runide-autoreloadplugins) to `true` for enabling it in earlier platform versions or `false` to disable it explicitly,
see [](tools_gradle_intellij_plugin_faq.md#how-to-disable-automatic-reload-of-dynamic-plugins)

After starting the sandbox IDE instance, run the [`buildPlugin`](tools_gradle_intellij_plugin.md#tasks-buildplugin) task after modifications in the plugin project
and switch focus back to the sandbox instance to trigger reload.

> [`buildSearchableOptions`](tools_gradle_intellij_plugin.md#tasks-buildsearchableoptions) task must currently be
> [disabled explicitly](tools_gradle_intellij_plugin_faq.md#how-to-disable-building-searchable-options) to work around
> _Only one instance of IDEA can be run at a time_ problem.
>
{style="warning"}

### Plugin DevKit

{collapsible="true" default-state="collapsed"}

Add system property `idea.auto.reload.plugins` in the _Plugin DevKit_ [run configuration](running_and_debugging_a_theme.md).

To disable auto-reload, set `idea.auto.reload.plugins` to `false` explicitly (2020.1.2+).

## The Development Instance Sandbox Directory

The _Sandbox Home_ directory contains the [settings, caches, logs, and plugins](#development-instance-settings-caches-logs-and-plugins) for a Development Instance of the IDE.
This information is stored in a different location than for the [installed IDE itself](https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-caches-plugins-and-logs).

### IntelliJ Platform Gradle Plugin (2.x) {id="sandboxGradle2"}

The default Sandbox Home location in a [](tools_intellij_platform_gradle_plugin.md) plugin project is:

* Windows: <path>\$PROJECT_DIRECTORY\$\\build\\\$TARGET_IDE\$\\idea-sandbox</path>
* Linux/macOS: <path>\$PROJECT_DIRECTORY\$/build/\$TARGET_IDE\$/idea-sandbox</path>

The Sandbox Home location can be configured with the [`intellijPlatform.sandboxContainer`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-sandboxContainer) property.

### Gradle IntelliJ Plugin (1.x) {id="sandboxGradle1"}

{collapsible="true" default-state="collapsed"}

<primary-label ref="Obsolete"/>

<include from="tools_gradle_intellij_plugin.md" element-id="gradlePluginObsolete"/>

The default Sandbox Home location in a [](tools_gradle_intellij_plugin.md) plugin project is:

* Windows: <path>\$PROJECT_DIRECTORY\$\\build\\idea-sandbox</path>
* Linux/macOS: <path>\$PROJECT_DIRECTORY\$/build/idea-sandbox</path>

The Sandbox Home location can be configured with the [`intellij.sandboxDir`](tools_gradle_intellij_plugin.md#intellij-extension-sandboxdir) property.

### Plugin DevKit {id="sandboxPluginDevKit"}

{collapsible="true" default-state="collapsed"}

For _Plugin DevKit_-based plugins, the default <control>Sandbox Home</control> location is defined in the IntelliJ Platform Plugin SDK.
See the [Setting Up a Theme Development Environment](setting_up_theme_environment.md#add-intellij-platform-plugin-sdk) for information about how to set up Sandbox Home in IntelliJ Platform SDK.

The default Sandbox Home directory location is:

* Windows: <path>\$USER_HOME\$\\.\$PRODUCT_SYSTEM_NAME\$\$PRODUCT_VERSION\$\\system\\plugins-sandbox\\</path>
* Linux: <path>~/.\$PRODUCT_SYSTEM_NAME\$\$PRODUCT_VERSION\$/system/plugins-sandbox/</path>
* macOS: <path>~/Library/Caches/\$PRODUCT_SYSTEM_NAME\$\$PRODUCT_VERSION\$/plugins-sandbox/</path>

### Development Instance Settings, Caches, Logs, and Plugins

Within the Sandbox Home directory are subdirectories of the Development Instance:

* <path>config</path> contains settings for the IDE instance.
* <path>plugins</path> contains folders for each plugin being run in the IDE instance.
* <path>system/caches</path> or <path>system\caches</path> holds the IDE instance data.
* <path>system/log</path> or <path>system\log</path> contains the <path>idea.log</path> file for the IDE instance.

Each of these Sandbox Home subdirectories can be manually cleared to reset the IDE Development Instance.
At the next launch of a Development Instance, the subdirectories will be repopulated with the appropriate information.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# IDE Infrastructure

<link-summary>General IDE-level functionality (logging, error reporting, environment/installation info).</link-summary>

### Logging

> If your plugin uses the **log4j** library directly: it is removed from IntelliJ Platform in 2022.1; please see this [blog post](https://blog.jetbrains.com/platform/2022/02/removing-log4j-from-the-intellij-platform/) for migration instructions.
>
{style="note"}

The IntelliJ Platform uses [`Logger`](%gh-ic%/platform/util/src/com/intellij/openapi/diagnostic/Logger.java) abstraction class to shield from underlying logging implementation and configuration.

Plugins should get a dedicated instance:

<tabs>
<tab title="Java">

```java
import com.intellij.openapi.diagnostic.Logger;

public class MyClass {
  private static final Logger LOG = Logger.getInstance(MyClass.class);

  public void someMethod() {
    LOG.info("someMethod() was called");
  }
}
```

</tab>

<tab title="Kotlin">

```kotlin
import com.intellij.openapi.diagnostic.logger

private val LOG = logger<MyClass>()

class MyClass {
  fun someMethod() {
    LOG.info("someMethod() was called")
  }
}
```

If logging is used only to report exceptions, use convenience method `thisLogger()` instead of a dedicated instance:

```kotlin
try {
  // some code
} catch (e: Throwable) {
  thisLogger().error("some code failed", e)
}
```

</tab>
</tabs>

By default, all messages with level `INFO` and higher are written to log output file <path>idea.log</path>.
To enable `DEBUG`/`TRACE` logging for specific categories, use <ui-path>Help | Diagnostic Tools | Debug Log Settings</ui-path>.

To locate the log file, choose the <ui-path>Help | Show Log in Finder/Explorer</ui-path> action.
When [internal mode](enabling_internal.md) is enabled, the currently running IDE log file can be opened using <ui-path>Help | Open Log in Editor</ui-path>.

To locate it for a specific installation, see this [Knowledge Base article](https://intellij-support.jetbrains.com/hc/en-us/articles/206544519).
See [Development Instance Sandbox Directory](ide_development_instance.md#the-development-instance-sandbox-directory) on how to find it for development instances.

See [Testing FAQ](testing_faq.md) on how to enable `DEBUG`/`TRACE` level logging during tests and get separate logs for failing tests.

To provide additional context for [reporting fatal errors](#error-reporting), use `Logger.error()` methods taking additional `Attachment` (see [`CoreAttachmentFactory`](%gh-ic%/platform/core-impl/src/com/intellij/diagnostic/CoreAttachmentFactory.java) and [`AttachmentFactory`](%gh-ic%/platform/util/src/com/intellij/openapi/diagnostic/AttachmentFactory.java)).

## Error Reporting

The IDE will show fatal errors caught by itself as well as logging messages with `ERROR` level in the <control>IDE Fatal Errors</control> dialog:
- for IDE platform: in EAP releases or when running in [internal mode](enabling_internal.md)
- for third-party plugins: always

For the latter, reporting is disabled by default — instead, there's an option to disable the plugin causing the exception.

To let users report such errors to the vendor, plugins can use one of the solutions:
- Use [JetBrains Exception Analyzer (EA)](https://plugins.jetbrains.com/docs/marketplace/exception-analyzer.html) that sends errors to the backend provided by JetBrains (2023.3+).
- Implement custom [`ErrorReportSubmitter`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/diagnostic/ErrorReportSubmitter.java) registered in `com.intellij.errorHandler` extension point.
See [IntelliJ Platform Explorer](https://jb.gg/ipe?extensions=com.intellij.errorHandler) for existing implementations — ranging from pre-filling web-based issue tracker forms to fully automated submission to log monitoring systems.
This [tutorial](https://www.plugin-dev.com/intellij/general/error-reporting/) also offers a working solution for using _Sentry_.

To disable the red exclamation notification icon in the status bar, invoke <ui-path>Help | Edit Custom Properties...</ui-path> and add `idea.fatal.error.notification=disabled` in opened <path>idea.properties</path>.

## Runtime Information

[`ApplicationInfo`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/ApplicationInfo.java) provides information on the IDE version and vendor.
NOTE: to restrict compatibility, declare [IDEs](plugin_compatibility.md) and [versions](build_number_ranges.md) via <path>[plugin.xml](plugin_configuration_file.md)</path>.

To get information about OS and Java VM, use [`SystemInfo`](%gh-ic%/platform/util/src/com/intellij/openapi/util/SystemInfo.java).

To access relevant configuration directories, see [`PathManager`](%gh-ic%/platform/util/src/com/intellij/openapi/application/PathManager.java).

To obtain unique installation UUID, use [`PermanentInstallationID`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/application/PermanentInstallationID.java).
For paid plugins, see also [Marketplace docs](https://plugins.jetbrains.com/docs/marketplace/identify-user-of-paid-plugin.html).

## Context Help

To show custom context web-based help for your plugin's functionality (e.g., for [dialogs](dialog_wrapper.md)), provide [`WebHelpProvider`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/help/WebHelpProvider.java) registered in `com.intellij.webHelpProvider` extension point.

> To [localize](providing_translations.md) the help page URL, retrieve the current locale and language tag from the [dynamic bundle](providing_translations.md#getting-the-current-locale-programmatically).

## Running Tasks Once

Use [`RunOnceUtil`](%gh-ic%/platform/ide-core/src/com/intellij/ide/util/RunOnceUtil.kt) to run a task exactly once per project/application.

## Application Events

Application lifecycle events can be tracked via the [`AppLifecycleListener`](%gh-ic%/platform/ide-core/src/com/intellij/ide/AppLifecycleListener.java) [listener](plugin_listeners.md).
See also [](plugin_components.md#application-startup) and [](plugin_components.md#project-and-application-close).

Register the [`ApplicationActivationListener`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/application/ApplicationActivationListener.java) [listener](plugin_listeners.md) to be notified of "application focused/unfocused" events.

To request restart of the IDE, use [`Application.restart()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/Application.java)

## Launching Browser

Use [`BrowserLauncher`](%gh-ic%/platform/platform-api/src/com/intellij/ide/browsers/BrowserLauncher.kt).

## Open File in System File Manager

Use [`RevealFileAction.openFile()`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/actions/RevealFileAction.java) or `openDirectory()`.

## Theme Change

Use the [`LafManagerListener`](%gh-ic%/platform/platform-api/src/com/intellij/ide/ui/LafManagerListener.java) topic to receive change notifications (e.g., to refresh UI).

## Power Save Mode

<ui-path>File | Power Save Mode</ui-path> can be enabled to limit power-consuming features on laptops.
Use [`PowerSaveMode`](%gh-ic%/platform/core-api/src/com/intellij/ide/PowerSaveMode.java) service and `PowerSaveMode.Listener` topic to disable such features in your plugin accordingly.

## Plugin Management

Installed plugins can be checked via [`PluginManagerCore.isPluginInstalled()`](%gh-ic%/platform/core-impl/src/com/intellij/ide/plugins/PluginManagerCore.kt).

See also [](dynamic_plugins.md#pluginLoadUnloadEvents).

### Plugin Suggestions

For specific features (e.g., [File Type](registering_file_type.md), [Facet](facet.md), ...), the IDE will suggest installing matching plugins automatically.
See [Plugin Recommendations](https://plugins.jetbrains.com/docs/marketplace/intellij-plugin-recommendations.html) in Marketplace documentation for details.

To suggest other relevant plugins, use [`PluginsAdvertiser.installAndEnable()`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/updateSettings/impl/pluginsAdvertisement/PluginsAdvertiser.kt).

### Deprecating a Plugin

To suggest replacing the currently installed deprecated plugin with the new one, implement [`PluginReplacement`](%gh-ic%/platform/platform-api/src/com/intellij/ide/plugins/PluginReplacement.java) registered in `com.intellij.pluginReplacement` extension point.

## Network

Use [`HttpConnectionUtils`](%gh-ic%/platform/platform-api/src/com/intellij/util/net/HttpConnectionUtils.kt)
to use platform network settings (e.g., proxy) (2024.3).
For earlier versions, see [`HttpConfigurable`](%gh-ic%/platform/platform-api/src/com/intellij/util/net/HttpConfigurable.java).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# IntelliJ IDEA Plugin Development

<link-summary>Introduction to developing plugins for IntelliJ IDEA.</link-summary>

<var name="productID" value="idea"/>
<var name="marketplaceProductID" value="idea_ce"/>
<include from="snippets.md" element-id="jetbrainsIDE_TLDR"/>

[IntelliJ IDEA](https://www.jetbrains.com/idea/) is available in two editions: IntelliJ Community Edition and IntelliJ IDEA Ultimate.
<snippet id="idea_editions">
See [Choose your edition](https://www.jetbrains.com/idea/features/#choose-your-edition) and [Feature Comparison](https://www.jetbrains.com/products/compare/?product=idea&product=idea-ce) for a detailed comparison.
</snippet>

## IntelliJ IDEA Plugin Setup

{id="ideaPluginSetup"}

### Gradle Build Script

<tabs>
<tab title="IntelliJ Platform Gradle Plugin (2.x)">

Define a dependency using [`intellijIdeaCommunity()` or `intellijIdeaUltimate()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md), see _Versions_ link on top of this page for all available versions.
See [](tools_intellij_platform_gradle_plugin.md#dependenciesLocalPlatform) for using a local installation.

Minimum <path>build.gradle.kts</path> setup:

```kotlin
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity("<versionNumber>")
  }
}
```

</tab>
<tab title="Gradle IntelliJ Plugin (1.x)">

The configuration of IntelliJ IDEA plugin projects follows the methods described in [Configuring Plugin Projects using the IntelliJ IDEA Product Attribute](dev_alternate_products.md#using-the-intellij-idea-product-attribute).

| `gradle-intellij-plugin` Attribute                                               | Attribute Value                                                                               |
|----------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
| [`intellij.type`](tools_gradle_intellij_plugin.md#intellij-extension-type)       | <p>`IC` for IntelliJ IDEA Community Edition (default)</p><p>`IU` for [](idea_ultimate.md)</p> |
| [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version) | IDE version, e.g. `2022.2`                                                                    |

</tab>
</tabs>

## Available API

See [](intellij_community_plugins_extension_point_list.md) for API from bundled plugins.

[](idea_ultimate.md) provides information specific to this edition.

## Java

See [Java Plugin](plugin_compatibility.md#java) on how to use Java-specific functionality.

[PSI Cookbook](psi_cookbook.md#java-specific) lists a number of common operations for working with Java PSI.

Depending on the exact functionality, a plugin can also target [](uast.md) to support multiple JVM languages, including Java and Kotlin.

Relevant Extension Points:

- [](intellij_community_plugins_extension_point_list.md#javaanalysispluginxml)
- [](intellij_community_plugins_extension_point_list.md#javaindexingpluginxml)
- [](intellij_community_plugins_extension_point_list.md#javapluginxml)
- [](intellij_community_plugins_extension_point_list.md#javapsipluginxml)

### Java Test Framework

To use existing test base classes, add `TestFrameworkType.Plugin.Java` test-framework available from [](tools_intellij_platform_gradle_plugin_types.md#TestFrameworkType-Plugin).

Alternatively, specify `com.jetbrains.intellij.java:java-test-framework:$VERSION$` as `testImplementation` dependency explicitly (see [IntelliJ Platform Artifacts Repositories](intellij_artifacts.md#gradle-example-for-an-individual-module-from-the-intellij-platform)).

## Kotlin

Configure Kotlin [plugin dependency](plugin_dependencies.md) with plugin ID `org.jetbrains.kotlin`.

See also [UAST](uast.md) on how to support multiple JVM languages, including Kotlin.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# IntelliJ IDEA Ultimate

<primary-label ref="IntelliJIDEA_Ultimate"/>

<link-summary>The IntelliJ IDEA Ultimate section overview.</link-summary>

<var name="productID" value="idea"/>
<var name="marketplaceProductID" value="idea"/>
<include from="snippets.md" element-id="jetbrainsIDE_TLDR"/>

IntelliJ IDEA Ultimate comes with a number of additional features and bundled plugins.
<include from="idea.md" element-id="idea_editions"/>

## IntelliJ IDEA Ultimate Plugin Setup

See [](idea.md#ideaPluginSetup).

## Bundled Open Source Plugins API

See [](oss_plugins_extension_point_list.md) on how to extend bundled plugins.

## IntelliJ IDEA Ultimate API

The following pages describe targeting APIs which are available only in IntelliJ IDEA Ultimate:

* [Tomcat Integration](tomcat_integration.md)
* [Spring API](spring_api.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Implementing Lexer

<link-summary>A Lexer defines how a file's contents are broken into tokens.</link-summary>

The lexer, or [lexical analyzer](https://en.wikipedia.org/wiki/Lexical_analysis), defines how a file's contents are broken into tokens.
The lexer serves as a foundation for nearly all features of custom language plugins, from basic syntax highlighting to advanced code analysis features.

The API for the lexer is defined by the [`Lexer`](%gh-ic%/platform/core-api/src/com/intellij/lexer/Lexer.java) interface.

The IDE invokes the lexer in three main contexts, and the plugin can provide different lexer implementations if needed:

*  [Syntax highlighting](syntax_highlighting_and_error_highlighting.md#lexer): The lexer is returned from the implementation of the
   [`SyntaxHighlighterFactory`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/fileTypes/SyntaxHighlighterFactory.java)
   interface which is registered in the `com.intellij.lang.syntaxHighlighterFactory` extension point.

*  [Building the syntax tree of a file](grammar_and_parser.md): the lexer is expected to be returned from
   [`ParserDefinition.createLexer()`](%gh-ic%/platform/core-api/src/com/intellij/lang/ParserDefinition.java)
   implementation registered in the `com.intellij.lang.parserDefinition` extension point.

*  Building the index of the words contained in the file:
   if the lexer-based words scanner implementation is used, the lexer is passed to the
   [`DefaultWordsScanner`](%gh-ic%/platform/indexing-api/src/com/intellij/lang/cacheBuilder/DefaultWordsScanner.java)
   constructor. See also [](find_usages.md).

The lexer used for syntax highlighting can be invoked incrementally to process only the file's changed part.
In contrast, lexers used in other contexts are always called to process an entire file or a complete language construction embedded in a different language file.

### Lexer State

A lexer that can be used incrementally may need to return its *state*, which means the context corresponding to each position in a file.
For example, a [Java lexer](%gh-ic%/java/java-psi-impl/src/com/intellij/lang/java/lexer/JavaLexer.java) could have separate states for top-level context, comment context, and string literal context.

An essential requirement for a syntax highlighting lexer is that its state must be represented by a single integer number returned from `Lexer.getState()`.
That state will be passed to the `Lexer.start()` method, along with the start offset of the fragment to process, when lexing is resumed from the middle of a file.
Lexers used in other contexts can always return `0` from `getState()`.

### Lexer Implementation

The easiest way to create a lexer for a custom language plugin is to use [JFlex](https://jflex.de).

Classes [`FlexLexer`](%gh-ic%/platform/core-api/src/com/intellij/lexer/FlexLexer.java) and [`FlexAdapter`](%gh-ic%/platform/core-api/src/com/intellij/lexer/FlexAdapter.java) adapt JFlex lexers to the IntelliJ Platform Lexer API.
A [patched version of JFlex](https://github.com/JetBrains/intellij-deps-jflex) can be used with the lexer skeleton file [`idea-flex.skeleton`](%gh-ic%/tools/lexer/idea-flex.skeleton) located in the [IntelliJ IDEA Community Edition](https://github.com/JetBrains/intellij-community) source to create lexers compatible with `FlexAdapter`.
The patched version of JFlex provides a new command-line option `--charat` that changes the JFlex generated code to work with the IntelliJ Platform skeleton.
Enabling `--charat` option passes the source data for lexing as a `java.lang.CharSequence` and not as an array of characters.

For developing lexers using JFlex, the [Grammar-Kit plugin](https://plugins.jetbrains.com/plugin/6606-grammar-kit) can be useful.
It provides syntax highlighting and other useful features for editing JFlex files (<path>*.flex</path>).

> Lexers, and in particular JFlex-based lexers, need to be created so that they always match the entire contents of the file, without any gaps between tokens, and generate special tokens for characters which are not valid at their location.
> Lexers must never abort prematurely because of an invalid character.
>
{style="note"}

**Examples:**
- [JFlex](%gh-ic%/plugins/properties/src/com/intellij/lang/properties/parsing/Properties.flex) definition file for [Properties language plugin](%gh-ic%/plugins/properties)
- [Custom Language Support Tutorial: Lexer](lexer_and_parser_definition.md)

### Token Types

Types of tokens for lexers are defined by instances of [`IElementType`](%gh-ic%/platform/core-api/src/com/intellij/psi/tree/IElementType.java).
Many token types common for all languages are defined in the [`TokenType`](%gh-ic%/platform/core-api/src/com/intellij/psi/TokenType.java) interface.
Custom language plugins should reuse these token types wherever applicable.
For all other token types, the plugin needs to create new [`IElementType`](%gh-ic%/platform/core-api/src/com/intellij/psi/tree/IElementType.java) instances and associate with the language in which the token type is used.
The same [`IElementType`](%gh-ic%/platform/core-api/src/com/intellij/psi/tree/IElementType.java) instance should be returned every time a particular token type is encountered by the lexer.

**Example:**
[Token types](%gh-ic%/plugins/properties/properties-psi-api/src/com/intellij/lang/properties/parsing/PropertiesTokenTypes.java) for [Properties language plugin](%gh-ic%/plugins/properties)

Groups of related types (e.g., keywords) can be defined using [`TokenSet`](%gh-ic%/platform/core-api/src/com/intellij/psi/tree/TokenSet.java).
All `TokenSet` for a language should be grouped in a dedicated `$Language$TokenSets` class for re-use.

**Example:**
[`GroovyTokenSets`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/psi/GroovyTokenSets.java)

### Embedded Language

An important feature that can be implemented at the lexer level is mixing languages within a file, such as embedding fragments of Java code in some template language.
Suppose a language supports embedding its fragments in another language.
In that case, it needs to define the chameleon token types for different types of fragments that can be embedded, and these token types need to implement the [`ILazyParseableElementType`](%gh-ic%/platform/core-api/src/com/intellij/psi/tree/ILazyParseableElementType.java) interface.
The enclosing language's lexer needs to return the entire fragment of the embedded language as a single chameleon token, of the type defined by the embedded language.
To parse the contents of the chameleon token, the IDE will call the parser of the embedded language through a call to [`ILazyParseableElementType.parseContents()`](%gh-ic%/platform/core-api/src/com/intellij/psi/tree/ILazyParseableElementType.java).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Implementing Parser and PSI

<link-summary>Introduction to parsing custom language files code and representing it with AST and PSI trees.</link-summary>

Parsing files in IntelliJ Platform is a two-step process.

First, an abstract syntax tree (AST) is built, defining the structure of the program.
AST nodes are created internally by the IDE and are represented by instances of the [`ASTNode`](%gh-ic%/platform/core-api/src/com/intellij/lang/ASTNode.java) class.
Each AST node has an associated element type [`IElementType`](%gh-ic%/platform/core-api/src/com/intellij/psi/tree/IElementType.java) instance, and the element types are defined by the language plugin.
The AST tree's top-level node for a file needs to have a special element type, which extends the [`IFileElementType`](%gh-ic%/platform/core-api/src/com/intellij/psi/tree/IFileElementType.java) class.

The AST nodes have a direct mapping to text ranges in the underlying document.
The bottom-most nodes of the AST match individual tokens returned by the [lexer](implementing_lexer.md), and higher-level nodes match multiple-token fragments.
Operations performed on nodes of the AST tree, such as inserting, removing, reordering nodes, and so on, are immediately reflected as changes to the underlying document's text.

Second, a [](psi.md) tree is built on top of the AST, adding semantics and methods for manipulating specific language constructs.
Nodes of the PSI tree are represented by classes implementing the [`PsiElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java) interface and are created by the language plugin in the [`ParserDefinition.createElement()`](%gh-ic%/platform/core-api/src/com/intellij/lang/ParserDefinition.java) method.
The top-level node of the PSI tree for a file needs to implement the [`PsiFile`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiFile.java) interface and is created in the [`ParserDefinition.createFile()`](%gh-ic%/platform/core-api/src/com/intellij/lang/ParserDefinition.java) method.

**Example:**
[`ParserDefinition`](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/parsing/PropertiesParserDefinition.java) for [Properties language plugin](%gh-ic%/plugins/properties)

> To avoid unnecessary classloading when initializing the `ParserDefinition` extension point implementation, all `TokenSet` return values should use constants from a dedicated `$Language$TokenSets` class.
>
> See also inspection <control>Plugin DevKit | Code | Non-platform TokenSet declared in ParserDefinition</control> (2023.3).
>
{style="note" title="Using TokenSets in ParserDefinition"}

The PSI's lifecycle is described in more detail in [Fundamentals](fundamentals.md).

The base classes for the PSI implementation, including [`PsiFileBase`](%gh-ic%/platform/core-impl/src/com/intellij/extapi/psi/PsiFileBase.java), the base implementation of [`PsiFile`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiFile.java), and [`ASTWrapperPsiElement`](%gh-ic%/platform/core-impl/src/com/intellij/extapi/psi/ASTWrapperPsiElement.java), the base implementation of [`PsiElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java), are provided by IntelliJ Platform.

### Parser Implementation

While coding parser manually is quite possible, we highly recommend generating parser and corresponding PSI classes from BNF grammars using [Grammar-Kit](https://plugins.jetbrains.com/plugin/6606-grammar-kit) plugin.
Besides code generation, it provides various features for editing grammar files: syntax highlighting, quick navigation, refactorings, etc. as well as integration with Gradle via [](tools_gradle_grammar_kit_plugin.md).
The Grammar-Kit plugin is built using its own engine; its source code and documentation can be found on [GitHub](https://github.com/JetBrains/Grammar-Kit).

For re-using existing ANTLRv4 grammars, see [antlr4-intellij-adaptor](https://github.com/antlr/antlr4-intellij-adaptor) third-party library.

The language plugin provides the parser implementation as an implementation of the [`PsiParser`](%gh-ic%/platform/core-api/src/com/intellij/lang/PsiParser.java) interface, returned from [`ParserDefinition.createParser()`](%gh-ic%/platform/core-api/src/com/intellij/lang/ParserDefinition.java).
The parser receives an instance of the [`PsiBuilder`](%gh-ic%/platform/core-api/src/com/intellij/lang/PsiBuilder.java) class, which is used to get the stream of tokens from the [lexer](implementing_lexer.md) and to hold the intermediate state of the AST being built.

> The parser must process _all_ tokens returned by the lexer up to the end of the stream (until [`PsiBuilder.getTokenType()`](%gh-ic%/platform/core-api/src/com/intellij/lang/PsiBuilder.java) returns `null`) — even if the tokens are not valid according to the language syntax.

The parser works by setting pairs of markers ([`PsiBuilder.Marker`](%gh-ic%/platform/core-api/src/com/intellij/lang/PsiBuilder.java) instances) within the stream of tokens received from the lexer.
Each pair of markers defines the range of lexer tokens for a single node in the AST tree.
If a pair of markers is nested in another pair (starts after its start and ends before its end), it becomes the outer pair's child node.

The element type for the marker pair and for the AST node created from it is specified when the end marker is set, which is done by making the call to `PsiBuilder.Marker.done()`.
Also, it is possible to drop a start marker before its end marker has been set.
The `drop()` method drops only a single start marker without affecting any markers added after it, and the `rollbackTo()` method drops the start marker and all markers added after it and reverts the lexer position to the start marker.
These methods can be used to implement lookahead when parsing.

The method `PsiBuilder.Marker.precede()` is useful for right-to-left parsing when you don't know how many markers you need at a specific position until you read more input.
For example, a binary expression `a+b+c` needs to be parsed as `( (a+b) + c )`.
Thus, two start markers are needed at the position of the token 'a', but that is not known until the token 'c' is read.
When the parser reaches the '+' token following 'b', it can call `precede()` to duplicate the start marker at 'a' position, and then put its matching end marker after 'c'.

**Examples:**

- [Custom Language Support Tutorial: Grammar and Parser](grammar_and_parser.md) (using Grammar-Kit)
- Simple [`PropertiesParser`](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/parsing/PropertiesParser.java) implementation for [Properties language plugin](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties).
- Complex [`RegExpParser`](%gh-ic%/RegExpSupport/src/org/intellij/lang/regexp/RegExpParser.java) for RegEx language

#### Whitespace and Comments

An essential feature of `PsiBuilder` is its handling of whitespace and comments.
The types of tokens which are treated as whitespace or comments are defined by `getWhitespaceTokens()` and `getCommentTokens()` in [`ParserDefinition`](%gh-ic%/platform/core-api/src/com/intellij/lang/ParserDefinition.java).
`PsiBuilder` automatically omits whitespace and comment tokens from the stream of tokens it passes to `PsiParser` and adjusts the token ranges of AST nodes so that leading and trailing whitespace tokens are not included in the node.

Most languages will not need to override `getWhitespaceTokens()` which returns the language-agnostic [`TokenSet.WHITE_SPACE`](%gh-ic%/platform/core-api/src/com/intellij/psi/tree/TokenSet.java) by default.
The token set returned from [`ParserDefinition.getCommentTokens()`](%gh-ic%/platform/core-api/src/com/intellij/lang/ParserDefinition.java) is also used to search for [TODO items](https://www.jetbrains.com/help/idea/using-todo.html).

To better understand the process of building a PSI tree for a simple expression, you can refer to the following diagram:

![PsiBuilder](PsiBuilder.gif)

### PSI Implementation

In general, there is no single right way to implement a PSI for a custom language, and the plugin author can choose the PSI structure and set of methods that are the most convenient for the code which uses the PSI (error analysis, refactorings, and so on).

However, one base interface needs to be used by a custom language PSI implementation to support features like [](rename_refactoring.md) and [](find_usages.md).
Every element which can be renamed or referenced (a class definition, a method definition, and so on) needs to implement the [`PsiNamedElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiNamedElement.java) interface, with methods `getName()` and `setName()`.

Several functions which can be used for implementing and using the PSI can be found in the `com.intellij.psi.util` package, and in particular in the [`PsiUtilCore`](%gh-ic%/platform/core-api/src/com/intellij/psi/util/PsiUtilCore.java) and [`PsiTreeUtil`](%gh-ic%/platform/core-api/src/com/intellij/psi/util/PsiTreeUtil.java) classes.

> Use [PsiViewer plugin or built-in PSI viewer](explore_api.md#internalMode) to explore and inspect PSI.
>

Please see [Indexing and PSI Stubs](indexing_and_psi_stubs.md) for advanced topics.
<!-- Copyright 2000-2025 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Indexing and PSI Stubs

<link-summary>The indexing framework allows to access information about files content without loading them to memory and parsing.</link-summary>

## Indexes

The indexing framework provides a quick way to locate specific elements, e.g., files containing a certain word or methods with a particular name, in large codebases.
Plugin developers can use the existing indexes built by the IDE itself and build and use their own indexes.

It supports two main types of indexes:

* [](file_based_indexes.md)
* [](stub_indexes.md)

File-based indexes are built directly over the content of files.
Stub indexes are built over serialized *stub trees*.
A stub tree for a source file is a subset of its [PSI](psi.md) tree, which contains only externally visible declarations and is serialized in a compact binary format.

Querying a file-based index gets you the set of files matching a specific condition.
Querying a stub index gets you the set of matching PSI elements.
Therefore, custom language plugin developers typically use [stub indexes](stub_indexes.md) in their plugin implementations.

> [Index Viewer](https://plugins.jetbrains.com/plugin/13029-index-viewer/) plugin can be used to inspect indexes' contents and properties.

## Dumb Mode

Indexing is a potentially lengthy process.
It's performed in the background, and during this time, all IDE features are restricted to the ones that don't require indexes: basic text editing, version control, etc.
This restriction is managed by [`DumbService`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/DumbService.kt).
Violations are reported via [`IndexNotReadyException`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/IndexNotReadyException.java), see its documentation for information on how to adapt callers.

`DumbService` provides API to query whether the IDE is currently in "dumb" mode (where index access is not allowed) or "smart" mode (with all index built and ready to use).
It also provides ways of delaying code execution until indexes are ready.

<video src="https://www.youtube.com/watch?v=ApdNfPuGJRU"/>

_Learn how techniques like dumb mode index access, on-demand indexing, and lightweight heuristics can boost plugin performance and streamline your development process,
all while maintaining robust coding assistance._

### `DumbAware` API

{id="DumbAwareAPI"}

> Use inspection <control>Plugin DevKit | Code | Can be DumbAware</control> (2025.1+) to find implementations
> that can potentially be marked as `DumbAware`.
>
{style="tip" title="Finding Candidates"}

#### Extension Points

Implementations of certain [extension points](plugin_extension_points.md) can be marked as available during Dumb Mode by implementing
[`DumbAware`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/DumbAware.java).
Such extension points are marked with the
![DumbAware](https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square)
tag in [](intellij_platform_extension_point_list.md).

Commonly used extension points include [`CompletionContributor`](code_completion.md), [`(External)Annotator`](syntax_highlighting_and_error_highlighting.md#annotator) and various
[run configuration](run_configurations.md) EPs.
Since 2024.2, this includes also [intentions](code_intentions.md) and [quick-fixes](quick_fix.md).

#### Actions

For [](basic_action_system.md) available during Dumb Mode, extend [`DumbAwareAction`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/project/DumbAwareAction.java) (do not override `AnAction.isDumbAware()` instead).

#### Other API

Other API might indicate its Dumb Mode compatibility by extending [`PossiblyDumbAware`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/PossiblyDumbAware.java).

### Testing

To toggle Dumb Mode for testing purposes, invoke <ui-path>Tools | Internal Actions | Enter/Exit Dumb Mode</ui-path>
while the IDE is running in [internal mode](enabling_internal.md).

## Gists

Sometimes, the following conditions hold:

* The aggregation functionality of file-based indexes is not needed.
  One just needs to calculate some data based on a particular file's contents and cache it on disk.
* Eagerly calculating the data for the entire project during indexing isn't needed (e.g., it slows down the indexing, and/or this data probably will ever be required for a minor subset of all project files).
* The data can be recalculated lazily on request without significant performance penalties.

A [file-based index](file_based_indexes.md) can be used in such cases, but file gists provide a way to perform data calculation lazily, caching on disk, and a more lightweight API.
Please see [`VirtualFileGist`](%gh-ic%/platform/indexing-api/src/com/intellij/util/gist/VirtualFileGist.java) and [`PsiFileGist`](%gh-ic%/platform/indexing-api/src/com/intellij/util/gist/PsiFileGist.java) documentation.

> Note performance implications noted in [`VirtualFileGist`](%gh-ic%/platform/indexing-api/src/com/intellij/util/gist/VirtualFileGist.java) Javadoc.

**Example:**

- `VirtualFileGist`: [`ImageInfoIndex`](%gh-ic%/images/src/org/intellij/images/index/ImageInfoIndex.java) calculating image dimensions/bit depth needed to be displayed in specific parts of UI.
- `PsiFileGist`: [`JavaSimplePropertyGist`](%gh-ic%/java/java-indexing-impl/src/com/intellij/psi/impl/JavaSimplePropertyGist.kt) providing simple properties in Java

## Improving Indexing Performance

### Performance Metrics

<primary-label ref="2020.2"/>

Indexing performance metrics in JSON format are generated in [logs directory](https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-caches-plugins-and-logs) (see [sandbox directory](ide_development_instance.md#the-development-instance-sandbox-directory) for development instance).
These are additionally available in HTML format starting with 2021.1.

### Avoid Using AST

Use [lexer](implementing_lexer.md) information instead of parsed trees if possible.

If impossible, use light AST which doesn't create memory-hungry AST nodes inside, so traversing it might be faster.
Obtain [`LighterAST`](%gh-ic%/platform/core-api/src/com/intellij/lang/LighterAST.java) by casting `FileContent` input parameter to [`PsiDependentFileContent`](%gh-ic%/platform/core-api/src/com/intellij/util/indexing/PsiDependentFileContent.java) and calling `getLighterAST()`.
Make sure to traverse only the nodes you need to.
See also [`LighterASTNodeVisitor`](%gh-ic%/platform/core-impl/src/com/intellij/psi/impl/source/tree/LighterASTNodeVisitor.java) and [`LightTreeUtil`](%gh-ic%/platform/core-impl/src/com/intellij/psi/impl/source/tree/LightTreeUtil.java) for useful utility methods.

For [stub index](stub_indexes.md), implement [`LightStubBuilder`](%gh-ic%/platform/core-impl/src/com/intellij/psi/stubs/LightStubBuilder.java).

If a custom language contains lazy-parseable elements that never or rarely contain any stubs, consider implementing [`StubBuilder.skipChildProcessingWhenBuildingStubs()`](%gh-ic%/platform/core-api/src/com/intellij/psi/StubBuilder.java) (preferably using Lexer/node text).

For indexing XML, also consider using [`NanoXmlUtil`](%gh-ic%/platform/indexing-impl/src/com/intellij/util/xml/NanoXmlUtil.java).

### Shared Project Indexes

For bigger projects, building and providing pre-built shared project indexes can be beneficial, see [Shared project indexes](https://www.jetbrains.com/help/idea/shared-indexes.html#project-shared-indexes).
See also [IntelliJ Shared Indexes Tool Example](https://github.com/JetBrains/intellij-shared-indexes-tool-example).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Inlay Hints

<link-summary>Providing additional code information directly in the editor without changing the document content.</link-summary>

<tldr>

**Product Help:** [Inlay Hints](https://www.jetbrains.com/help/idea/inlay-hints.html)

</tldr>

Inlay hints render small pieces of information directly into the editor and give developers additional code insight without disturbing the workflow.
A well-known example is parameter hints that usually display the name of the function parameters as given in its declaration.
They are closely related to [](parameter_info.md) which shows parameter types for all possible overloads of a function but opens as a popup overlaying the code.

Inlay hints are flexible and have a wide range of applications in the IntelliJ Platform.
For instance, the following are well-known examples where inlay hints are used:

- Java uses inlays to display type annotations in Java chained method calls.
- Kotlin uses inlays in range expressions to show, e.g. less-than, or less-than-or-equal signs to let developers know if intervals are inclusive or exclusive.
- In version-controlled projects, the author of the code is shown using inlay hints.

## Implementation

The main characteristic of the inlay is the way it is displayed in the editor:
- **inline** - inlays displayed in the code between code tokens
- **block** - inlays displayed above a code block

Depending on the requirements and target IntelliJ Platform version, there are several extension points to choose from, when implementing inlay hints.

This section describes the available APIs and their use cases.

> To inspect existing Inlays in the IDE, use [UI Inspector](internal_ui_inspector.md#editor).
> Corresponding entries from <ui-path>Settings | Editor | Inlay Hints</ui-path> are also available from [](internal_ui_inspector.md#inspecting-settings).

### Inlay Parameter Hints Provider

Inlay parameter hints are simple string **inline** inlays placed before parameter names in method and function calls.
It is not possible to provide advanced presentation and behavior of inlay parameter hints.

To provide inlay parameter hints, implement
[`InlayParameterHintsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/InlayParameterHintsProvider.java)
and register it in `com.intellij.codeInsight.parameterNameHints` extension point (EP).
The API documentation of `InlayParameterHintsProvider` explains in detail the rationale behind all methods.

**Examples:**
- [`GroovyInlayParameterHintsProvider`](%gh-ic%/plugins/groovy/src/org/jetbrains/plugins/groovy/codeInsight/hint/GroovyInlayParameterHintsProvider.kt) - shows parameter hints in Groovy code
- [`KotlinInlayParameterHintsProvider`](%gh-ic%/plugins/kotlin/idea/src/org/jetbrains/kotlin/idea/codeInsight/hints/KotlinInlayParameterHintsProvider.kt) - shows parameter hints in Kotlin code

To suppress inlay parameter hints in specific places, implement
[`ParameterNameHintsSuppressor`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/ParameterNameHintsSuppressor.kt)
and register it in `com.intellij.codeInsight.parameterNameHintsSuppressor` EP.

### Declarative Inlay Hints Provider
<primary-label ref="2023.1"/>

Declarative inlay hints are **inline** textual inlays that can hold expandable list of clickable items.
Please note this API has limited presentation customization possibilities due to its UI-independent design, which allows utilizing it by different frontend technologies (not only in Swing).

To provide declarative inlay hints implement declarative
[`InlayHintsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/declarative/InlayHintsProvider.kt)
and register it in `com.intellij.codeInsight.declarativeInlayProvider` EP.
See the API documentation for the details.

**Examples:**
- [`JavaImplicitTypeDeclarativeInlayHintsProvider`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/hints/JavaImplicitTypeDeclarativeInlayHintsProvider.kt) - shows inferred type for variables declared with the `var` keyword in Java code when the inferred type may not be clear
- [`JavaMethodChainsDeclarativeInlayProvider`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/hints/JavaMethodChainsDeclarativeInlayProvider.kt) - shows method return types in call chains in Java code

To provide a custom configuration UI, implement
[`InlayHintsCustomSettingsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/declarative/InlayHintsCustomSettingsProvider.kt)
registered in `com.intellij.codeInsight.declarativeInlayProviderCustomSettingsProvider` extension point.

Preview texts displayed for inlay hint providers under <ui-path>Settings | Editor | Inlay Hints</ui-path> must be located in plugin resources in <path>inlayProviders/\$provider_id\$</path> directory, for example, <path>inlayProviders/java.implicit.types</path>.
The <path>\$provider_id\$</path> value must match the `providerId` attribute of `com.intellij.codeInsight.declarativeInlayProvider` EP.
The preview file name must be <path>preview.\$ext\$</path>, where <path>\$ext\$</path> is a default extension of a supported file type, for example, <path>preview.java</path>.
Hints displayed in the preview panel are defined with the dedicated markup:

<tabs>
<tab title="2023.2+">

```
/*<# Displayed Hint #>*/
```

</tab>
<tab title="Pre-2023.2">

```
<# Displayed Hint #>
```

</tab>
</tabs>

**Examples**:
- [`inlayProviders/java.implicit.types/preview.java`](%gh-ic%/java/java-impl/resources/inlayProviders/java.implicit.types/preview.java)
- [`inlayProviders/groovy.lambda.parameter.inlay.provider/preview.groovy`](%gh-ic%/plugins/groovy/resources/inlayProviders/groovy.lambda.parameter.inlay.provider/preview.groovy)

### Code Vision Provider
<primary-label ref="2022.1"/>

> This API is still in experimental state and may be changed without preserving backward compatibility.
>
{style="note"}

Code vision provider allows for providing **block** inlay hints for elements like class, method, field, etc.
If there are multiple hints provided for a single element, all will be displayed in the same line to save vertical space.

Code vision hints can be displayed over the element, or on the right, at the end of line.
It is configurable by users in <ui-path>Settings | Editor | Inlay Hints | Code vision</ui-path> by choosing a value in <control>Default position for metrics</control> combo box, or by selecting <control>Position</control> in specific provider entries.

There are three extension points for implementing a code vision provider:
- [`DaemonBoundCodeVisionProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/hints/codeVision/DaemonBoundCodeVisionProvider.kt) registered in `com.intellij.codeInsight.daemonBoundCodeVisionProvider` EP
- [`CodeVisionProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/codeVision/CodeVisionProvider.kt) registered in `com.intellij.codeInsight.codeVisionProvider` EP
- [`CodeVisionGroupSettingProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/codeVision/settings/CodeVisionGroupSettingProvider.kt) registered in `com.intellij.config.codeVisionGroupSettingProvider` EP

`DaemonBoundCodeVisionProvider` API should be used in cases when code vision entries are related to PSI, so that calculated values are invalidated and recalculated on PSI changes.

`CodeVisionProvider` API should be used for cases when presented information doesn't depend on the PSI.

The `CodeVisionGroupSettingProvider` is necessary for displaying the name and description of the code vision provider in the settings.
The `groupId` must match the value specified in the implementation of the `CodeVisionProvider`; if not specified, it defaults to the `id`.
The `groupName` is the name shown in the code vision group, and the `description` will be visible in the right details panel.

Code vision preview is available under <ui-path>Settings | Editor | Inlay Hints | Code vision</ui-path>.
In case if multiple preview examples in different languages are provided for an existing code vision provider, IDE will choose the most important from its point of view.
For example, IntelliJ IDEA will use Java preview, PhpStorm will use PHP preview, etc.

To provide a preview example for a custom code vision provider:
1. Create a <path>codeVisionProviders/\$model_id\$/preview.\$ext\$</path> file, for example, <path>codeVisionProviders/vcs.code.vision/preview.java</path>.
   The <path>\$modelId\$</path> must match the `groupId` of `CodeVisionGroupSettingProvider` and `modelId` (see 2.).
2. Register an `com.intellij.codeInsight.codeVisionSettingsPreviewLanguage`, which specifies the preview `language` and `modelId`.

**Examples:**
- [`JavaInheritorsCodeVisionProvider`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/daemon/impl/JavaInheritorsCodeVisionProvider.kt) - shows number of Java class or method inheritors. Clicking the inlay hint opens the list of inheritors. This provider is `DaemonBoundCodeVisionProvider`.
- [`JavaReferencesCodeVisionProvider`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/daemon/impl/JavaReferencesCodeVisionProvider.kt) - shows number of usages of Java class or member. Clicking the inlay opens the list of usages or navigates to the usage if only one exists. This provider is `DaemonBoundCodeVisionProvider`.
- [`VcsCodeVisionProvider`](%gh-ic%/platform/vcs-impl/src/com/intellij/codeInsight/hints/VcsCodeVisionProvider.kt) - shows the author of a given element, e.g., class or method, based on VCS information. This provider is `CodeVisionProvider`.

### Inlay Hints Provider

Inlay hints provider allows for implementing both **inline** and **block** inlay hints with custom presentation and behavior.
See the API documentation for the details.

> For implementing **inline** inlay hints in versions 2023.1 and newer, [](#declarative-inlay-hints-provider) is recommended.
>
> For implementing **block** inlay hints in versions 2022.1 and newer, [](#code-vision-provider) is recommended.
>
{title="Deprecation Notice" style="warning"}

To provide inlay hints, implement
[`InlayHintsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/InlayHintsProvider.kt)
and register it in `com.intellij.codeInsight.inlayProvider` EP.
See the API documentation for the details.

**Examples:**
- [`GroovyLocalVariableTypeHintsInlayProvider`](%gh-ic%/plugins/groovy/src/org/jetbrains/plugins/groovy/codeInsight/hint/types/GroovyLocalVariableTypeHintsInlayProvider.kt) - shows local variable types in Groovy code
- [`MarkdownTableInlayProvider`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/editor/tables/ui/MarkdownTableInlayProvider.kt) - _decorates_ tables in Markdown files.
- For a more complex example, see
  [`KotlinLambdasHintsProvider`](%gh-ic%/plugins/kotlin/idea/src/org/jetbrains/kotlin/idea/codeInsight/hints/KotlinLambdasHintsProvider.kt),
  its parent class and all implementations.

### Further Tips

1. Go to
   <ui-path>Settings | Editor | Inlay Hints</ui-path> ([Product Help](https://www.jetbrains.com/help/idea/inlay-hints.html)) and check out inlays that have already been implemented.
2. To support multiple languages with a single type of inlay hints, see declarative
   [`InlayHintsProviderFactory`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/declarative/InlayHintsProviderFactory.kt) (2023.1+)
   or
   [`InlayHintsProviderFactory`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/InlayHintsProviderFactory.kt) (pre-2023.1).
3. For testing inlay hints, see
   [`InlayHintsProviderTestCase`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/utils/inlays/InlayHintsProviderTestCase.kt)
   and [`InlayParameterHintsTest`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/utils/inlays/InlayParameterHintsTest.kt).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Inline Help Text

<link-summary>UI guidelines on using inline help texts.</link-summary>

Inline help text provides useful information about a setting.

![](01_header_pic.png){width=304}

## When to use

Follow the rules for [context help](context_help.md).

## How to use

### Text length and formatting

Show no more than 5 lines of help text not to clutter the screen. Note that the text width is limited to 70 characters.

![](02_text_size.png){width=380}

Show more than 5 lines only when a text cannot be shortened for legal purposes.

![](03_text_size_long.png){width=396}

<p>Implementation</p>

```kotlin
panel {
  row {
    checkBox("Send usage statistics when using EAP versions")
      .comment("""
        <p>Help JetBrains improve its products by sending anonymous
        data about features and plugins used, hardware and software
        configuration, statistics on types of files, number of files
        per project, etc.</p>
        <br/>
        <p>Please note that this will not include personal data or
        any sensitive information, such as source code, file names,
        etc. The data sent complies with the
        <a href=\"https://www.jetbrains.com\">
        JetBrains Privacy Policy</a></p>
        """.trimIndent()
      )
  }
}
```

Provide a link to the corresponding help article or to a place in the IDE where the related settings can be found.
Place the link at the end of the text where possible so that it does not disrupt reading.

![](04_link_external.png){width=366 style=block}
*External link*

![](04_link_internal.png){width=345 style=block}
*Local link*

Text style formatting:

* Avoid text highlighting. Usually, the help text is short and no bold or italics are needed.

  ![](inline_text_no_styling.png){width=364}

* Use formatting for code, console commands, or parameters. Use HTML tags. Enclosing text in `<html></html>` tags is not needed.

  ![](inline_text_parameter_styling.png){width=213}

Avoid using brackets.

![](05_no_brackets.png){width=362}

### Writing guidelines

Make help text [short and descriptive](writing_short.md).

Do not repeat the setting name in the help text.

![](06_inline_text_dont_repeat_setting.png){width=481}

## Placement

### Labeled input, button, checkbox, or radio button

Labeled inputs are fields, combo boxes, or text areas.

Place the help text to the right of a labeled input, checkbox, or radio button if all the following applies:

* The space to the right is empty.
* The help text has 1–5 words, not counting articles and prepositions.
* The control label has 1–5 words.

![](07_right_inputs.png){width=433}

```kotlin
panel {
  row("Plugin update policy:") {
      comboBox(listOf("Default", "Non default"))
      comment("Ignore by Maven 3+")
  }
  row("Thread count:") {
      textField()
      comment("-T option")
  }
}
```

![](08_right_checkboxes.png){width=438}

```kotlin
panel {
  row {
    checkBox("Build project automatically")
    comment("Works while not running / debugging")
  }
  row {
    checkBox("Compile independent modules in parallel")
    comment("May require larger heap size")
  }
}
```

![](09_right_button.png){width=309}

Otherwise, place the help text under the UI control.

![](10_under_field.png){width=484}

```kotlin
panel {
  row("Default directory:") {
    textFieldWithBrowseButton()
      .comment(
        "Preselected in \"Open ...\" and \"New | Project\" dialogs"
      )
  }
}
```

If there is no space under the UI control, use the [help tooltip](tooltip.md#question-mark-icon-for-help-tooltips) with the question mark icon for labeled inputs, checkboxes, and radio buttons.
For buttons, use the help tooltip without the icon.

### List, tree or table

If the help text applies to a whole list, tree, or table, place it below the control.

![](11_under_table.png){width=531}

```kotlin

import javax.swing.JTable

panel {
  row {
    cell(createTable()) // Actual table creation
      .align(Align.FILL)
      .comment("""
        &lt;Project> is content roots of all modules,
        all immediate descendants<br/>of the projects base
        directory, and .idea directory contents
        """.trimIndent()
      )
  }.resizableRow()
}
```

If it applies to a single list, tree or table item:

* If the help text has 1–10 words, place it to the right of the item.
*

![](12_tree_inline_help_text.png){width=422}

* If the text is longer than 10 words:

<p>For a list or tree in the master part, place the text into the detail part.</p>

![](13_master-detail_help_text.png){width=673}

If the case with the master-detail layout above does not apply, use the [help tooltip](tooltip.md#question-mark-icon-for-help-tooltips) with the question mark icon.

![](05_question_icon_tree.png){width=390}

### Group of controls

If the help text applies to several UI controls, place it at the bottom of the group.

![](14_under_group.png){width=430}

<p>Implementation</p>

Use [`Panel.group()`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/dsl/builder/Panel.kt) as the border for panels that need title and possibly the gray line on the right of the title:

```kotlin
panel {
  group("Build and Run") {
    row("Build and run with:") {
      comboBox(listOf("IntelliJ IDEA", "Gradle"))
    }
    row("Run tests with:") {
      comboBox(listOf("IntelliJ IDEA", "Gradle"))
    }
    row {
      comment("""
        <p>By default IntelliJ IDEA uses Gradle to build the project
        and run the tasks.</p>
        <p>In a pure Java/Kotlin project, building and running
        by means of IDE might be faster, thanks to optimizations.
        Note, that the IDE doesn't support all Gradle plugins and
        the project might not be built correctly with some of them.</p>
        """.trimIndent()
      )
    }
  }
  group("Gradle") {
    row("Use Gradle from:") {
      comboBox(gradleModel)
    }
  }
}
```

You can find more examples by invoking the <ui-path>Tools | Internal Actions | UI | Kotlin UI DSL | UI DSL Showcase</ui-path> action (available in [internal mode](enabling_internal.md)) and clicking the <control>View source</control> links on specific pages.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Input Field

<link-summary>UI guidelines on using input fields.</link-summary>

<tldr>

**Implementation:** [`JBTextField`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/JBTextField.java)

</tldr>

An input field allows users to enter or edit a text line using the keyboard.

![](input_field_example.png){width=170}

## When to use

Use an input field if it’s not possible to enumerate the most likely values. Otherwise, use a [combo box](combo_box.md) or a [drop-down list](drop_down.md).

If input has to be in a specific format, use one of the following controls:

* If the previous user input must be preserved, use a [combo box](combo_box.md).
* Use a [text area](text_area.md) for long (commit message) or multi-line (code snippet) input. If place is constrained, use an [expandable input field](#input-field-types).
* Use a slider if a precise value is not required, or if it’s possible to provide feedback on the effect of setting changes. If place is constrained, use an input field.
* Use a [search field](search_field.md) to input a search query.
* Use calendar to set a date.
* Use color box to choose a color.

## How to use

### Label

A label accompanies each input field and indicates the information type.

Labels should be [short and descriptive](writing_short.md).

Write the label either as a noun and end it with a colon:

![](label_noun.png){width=153}

Or as a phrase with no ending punctuation:

![](label_sentence.png){width=247}

Do **not** use labels to tell users what to do:

![](user_action.png){width=186}

Use sentence-style capitalization.

If there are several input fields on a form, it’s recommended to make labels approximately the same length to avoid gaps between labels and fields. For example:

<table>
    <tr>
        <td width="50%"><format color="Red" style="bold">Incorrect</format></td>
        <td width="50%"><format color="Green" style="bold">Correct</format></td>
    </tr>
    <tr>
        <td><img src="several_labels_length.png" alt="" width="385" /></td>
        <td><img src="several_labels_length_1.png" alt="" width="224" /></td>
    </tr>
</table>

If an input field is disabled, disable the label too:

![](label_disabled.png){width=153}

Make the label text selectable. The user may want to search for this option on the Internet or to send a question to support.

Place the label on the left or above the input field. For more details, see the [Layout](layout.md) topic.

### Placeholder

Placeholder is grey text placed inside an input field. Follow these rules:

* Use sentence-style capitalization.
* Do **not** use ending punctuation or ellipsis.
* Hide the placeholder when the user starts typing, not when the input field gets the focus.

To show placeholder text, use `JBTextField.getEmptyText().setText(...)`.

Use the placeholder to indicate that an input field is optional.

![](placeholder_optional.png){width=397}

Use the placeholder to show the default value:

![](placeholder_default.png){width=247}

If the user overwrites the value, it can be restored by removing the new value from the input field or by clicking the "Reset to default" link on the right:

![](placeholder_reset.png){width=361}

Do **not** use the placeholder to show examples. The user can get the impression that the field is already filled. Provide examples or explanation under the input field (see [Context help](context_help.md)):

<table>
    <tr>
        <td width="50%"><format color="Red" style="bold">Incorrect</format></td>
        <td width="50%"><format color="Green" style="bold">Correct</format></td>
    </tr>
    <tr>
        <td><img src="placeholder_examples.png" alt="" width="150" /></td>
        <td><img src="placeholder_examples_1.png" alt="" width="150" /></td>
    </tr>
</table>

Do **not** use the placeholder as the field label. After the field has been filled, it is difficult to understand its purpose.

![](placeholder_label.png){width=100}

### Prefilled value

Pre-fill the field if it has the default or a frequently used value. Use the default text color for pre-filled values:

![](prefill.png){width=152}

Do **not** prefill with "Unnamed". It takes time to read it and does not help the user to fill the form.

![](prefill_unnamed.png){width=535}

### Field focus

When an input field gets the focus, place the caret at the end of the text:

![](focus_end.png){width=321}

If users are more likely to re-enter the entire value, select the whole text when the field gets the focus:

![](focus_all.png){width=274}

### Input field types

If the input text can be long and place is constrained, use an expandable input field [`ExpandableTextField`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/fields/ExpandableTextField.java).
For more details, see [built-in buttons](built_in_button.md#expand-field).

![](expandable_1.png){width=332}

If input data is secured, replace it with dots via [`JBPasswordField`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/JBPasswordField.java).

![](password.png){width=271}

If there are many predefined values (for example, code snippets, commit author), add completion to the input field [`TextFieldWithCompletion`](%gh-ic%/platform/platform-impl/src/com/intellij/util/textCompletion/TextFieldWithCompletion.java).

![](input_field_completion.png){width=509}

An input field with completion looks the same way as a regular input field. When an empty input field gets the focus, show a tooltip after a delay to indicate that code completion is supported.

![](completion_tooltip.png){width=291}

Show the completion popup when the user starts typing or presses <shortcut>Ctrl+Space</shortcut>.

Use [built-in buttons](built_in_button.md) to help the user enter data. For example, to browse the disk.

### Validation

If the user enters an invalid value, highlight the field with red and show an error message in a tooltip. For more details, see [Validation errors](validation_errors.md).

![](input_field_error.png){width=239}

## Sizes and placement

Sizes are the same for all themes:

![](input_field_sizes.png){width=65}

### Field width

Choose the width appropriate for the most common values, but not less than 65px. The field width helps the user understand what value is expected and to make sure that they fill the field correctly.

| <format color="Green" style="bold">Correct</format> | ![](input_field_size_1.png){width=104} |
|-----------------------------------------------------|----------------------------------------|
| <format color="Red" style="bold">Incorrect</format> | ![](input_field_size_2.png){width=240} |
| <format color="Green" style="bold">Correct</format> | ![](input_field_size_3.png){width=387} |
| <format color="Red" style="bold">Incorrect</format> | ![](input_field_size_4.png){width=331} |

{style=none}

If the input value is longer than the field width, show the beginning of the value when the field becomes inactive:

![](size_long_name.png){width=243}

### Placement

If the input field depends on another control, for example, a checkbox, follow the rules for (layout.md#dependent-controls). Otherwise, follow the rules for [independent controls](layout.md#independent-controls).

<!--
![](sizes_label.png){width=493}

![](sizes_button.png){width=246}

![](sizes_several.png){width=462}
-->
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Inspection Options

<link-summary>Implementing inspection options allowing to alter inspection behavior depending on user configuration.</link-summary>

Some code inspections provide configuration options that affect their behavior.
For example, <ui-path>Java | Code style issues | 'size() == 0' can be replaced with isEmpty()</ui-path>, allows ignoring classes from the defined list or expressions, which would be replaced with `!isEmpty()`.

Currently, there are two ways of providing the inspection options:
* [Declarative](#declarative-inspection-options)
* [UI-based](#ui-based-inspection-options)

## Declarative Inspection Options
<primary-label ref="2023.1"/>

Declarative API allows to:
* delegate component rendering to the platform and make all the inspection options UI consistent and compliant with the [](ui_guidelines_welcome.topic)
* optimize checking whether the inspection contains any options
* manipulate options in places other than inspection panels (e.g., in quick fixes)
* render options in contexts other than IntelliJ Platform-based IDEs

Providing the inspection options is achieved by implementing
[`InspectionProfileEntry.getOptionsPane()`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/InspectionProfileEntry.java),
which returns an
[`OptPane`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/options/OptPane.java)
object describing available configuration possibilities.
Note that `InspectionProfileEntry` is a parent of inspection base classes like
[`LocalInspectionTool`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/LocalInspectionTool.java)
and
[`GlobalInspectionTool`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/GlobalInspectionTool.java).

Building the inspection options is achieved by using a DSL-like facade, which contains methods for creating option controls and binding them to the fields declared in an inspection class.

Building the options for <ui-path>Java | Code style issues | 'size() == 0' can be replaced with 'isEmpty()'</ui-path> is implemented as follows:

```java
public OrderedSet<String> ignoredTypes = new OrderedSet<>();
public boolean ignoreNegations = false;

@Override
public @NotNull OptPane getOptionsPane() {
  return pane(
    stringList(
      "ignoredTypes",
      message("options.label.ignored.classes"),
      new JavaClassValidator()),
    checkbox(
      "ignoreNegations",
      message("size.replaceable.by.isempty.negation.ignore"))
  );
}
```

The above example builds a form with two options (see
[`SizeReplaceableByIsEmptyInspection`](%gh-ic%/java/java-impl/src/com/siyeh/ig/style/SizeReplaceableByIsEmptyInspection.java)
for the full implementation context):
* List of strings, which are validated for being Java classes. The provided list is bound to the `ignoredTypes` field in the inspection class.
* Checkbox, which value is bound to the boolean `ignoreNegations` field in the inspection class.

The `OptPane` class exposes methods for building fields of other types, e.g., number or dropdown fields.

Note that the bind identifiers passed as a first string argument of methods creating form controls contain injected references that resolve to the bound fields.
It enables resolving and other resolve-related features available, making it easy to rename fields and minimizing the risk of introducing typos resulting in bugs, as unresolved references will be highlighted as errors.

### Custom Options Binding Protocol

The default way of binding option form values to fields may be insufficient in more advanced cases.
It is possible to customize the way of binding options by providing a custom
[`OptionController`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/options/OptionController.java)
from `InspectionProfileEntry.getOptionController()` method.

Consider the <ui-path>Properties files | Inconsistent resource bundle</ui-path> global inspection, from bundled **Properties** plugin in IntelliJ IDEA, which reports several types of inconsistencies in <path>.properties</path> files.
The inspection allows enabling or disabling reporting specific issue types, which are reported by providers implementing a dedicated interface.
Information about enabled providers is stored in a map where the key is a provider ID.
The options panel and value binding are implemented in the following way (see
[`InconsistentResourceBundleInspection`](%gh-ic%/plugins/java-i18n/src/com/intellij/codeInspection/i18n/inconsistentResourceBundle/InconsistentResourceBundleInspection.java)
for the full implementation context):

```java
private NotNullLazyValue<InconsistentResourceBundleInspectionProvider[]> myProviders = ...;
private Map<String, Boolean> mySettings = new LinkedHashMap<>();

@Override
public @NotNull OptPane getOptionsPane() {
  return new OptPane(ContainerUtil.map(
    myProviders.getValue(),
    provider -> checkbox(provider.getName(), provider.getPresentableName())));
}

@Override
public @NotNull OptionController getOptionController() {
  return OptionController.of(
    (bindId) -> ContainerUtil.getOrElse(mySettings, bindId, true),
    (bindId, value) -> {
      boolean boolValue = (Boolean)value;
      if (boolValue) {
        mySettings.remove(bindId);
      } else {
        mySettings.put(bindId, false);
      }
    });
}
```

Option controls panel is built based on providers’ IDs and presentable names.
This implementation doesn't need to be changed regardless of removing or adding new providers in the future.

Reading and writing options in the map is achieved by registering a custom controller with getter and setter logic provided to the `OptionController.of()` method.

It's possible to compose several option controllers into the hierarchy based on the `bindId` prefix.
It may be useful when some inspections have common configuration options and store the configuration in dedicated objects.
See
[`OptComponent.prefix()`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/options/OptComponent.java)
and `OptionController.onPrefix()` methods for more details and example implementation:
[`MissingJavadocInspection`](%gh-ic%/java/java-impl/src/com/intellij/codeInspection/javaDoc/MissingJavadocInspection.java).

### Non-Profile Inspection Options

Sometimes, inspections use options that are rendered in a non-standard way, or are shared with other inspections or other IDE features.
Such a shared configuration can be implemented as a [persistent component](persisting_state_of_components.md) and not have a single owner.
It is still convenient to be able to configure these options from the inspection panel.

An example of such a case is the <ui-path>Java | Probable bugs | Nullability problems | @NotNull/@Nullable problems</ui-path> inspection, which contains the <control>Configure Annotations…</control> button that opens the <control>Nullable/NotNull Configuration</control> dialog.

Custom Swing controls can be provided by implementing
[`CustomComponentExtensionWithSwingRenderer`](%gh-ic%/platform/lang-api/src/com/intellij/codeInspection/ui/CustomComponentExtensionWithSwingRenderer.java)
and registering the implementation in the `com.intellij.inspectionCustomComponent` extension point.
Please note that this API is still in experimental state and may be changed without preserving backward compatibility.

**Example:**
[`JavaInspectionButtons`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/options/JavaInspectionButtons.java)
providing buttons for configuring options in custom dialogs

## UI-Based Inspection Options

> If you target versions 2023.1+ only, it is highly recommended to implement [](#declarative-inspection-options).

UI-based inspection options are provided by implementing a configuration panel using Swing components and returning it from [`InspectionProfileEntry.createOptionsPanel()`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/InspectionProfileEntry.java) method.
It returns the panel with option components that bind the provided values to the inspection class fields or other properties, similarly as in the [declarative](#declarative-inspection-options) approach.
Note that since version 2023.1, this method is ignored if `InspectionProfileEntry.getOptionPane()` returns a non-empty panel.

**Example:**
[`SizeReplaceableByIsEmptyInspection`](%gh-ic-223%/plugins/InspectionGadgets/src/com/siyeh/ig/style/SizeReplaceableByIsEmptyInspection.java)
in version 2022.3, implemented using the UI-approach

For simple customization requirements, see also:
* [`SingleCheckboxOptionsPanel`](%gh-ic%/platform/lang-api/src/com/intellij/codeInspection/ui/SingleCheckboxOptionsPanel.java) for single checkbox
* [`MultipleCheckboxOptionsPanel`](%gh-ic%/platform/lang-api/src/com/intellij/codeInspection/ui/MultipleCheckboxOptionsPanel.java) for multiple checkboxes
* [`SingleIntegerFieldOptionsPanel`](%gh-ic%/platform/lang-api/src/com/intellij/codeInspection/ui/SingleIntegerFieldOptionsPanel.java) for single Integer (text field)

> Be careful when you have a hierarchy of inspection classes.
> For example, if inspection superclass is converted to the declarative approach, any `createOptionsPanel()` methods in subclasses will be ignored.
> If you can't convert all of them at once, you may temporarily add `getOptionsPane()` returning `OptPane.EMPTY` to subclasses, where `createOptionsPanel()` is still used.
>
{style="warning"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Inspections

<link-summary>UI guidelines on writing texts used in inspections.</link-summary>

![](main.png){width=834 style=block}
*Inspections configuration on <ui-path>Settings | Editor | Inspections</ui-path> page or in <control>Configure Inspections</control> dialog.*

Inspection names, descriptions, and editor messages should be short and descriptive.
Follow the rules for [short and clear texts](writing_short.md) and [punctuation](punctuation.md) in addition to the rules described below.

### Group Names

Use the names of technologies and frameworks as titles for inspection groups, for example, Ant, Android, Java.

### Inspection Names

Limit a name by ~50 symbols so that it fits the line in the list of inspections in settings.

An inspection name should reflect the code problem that this inspection detects, for example:

![](correct.png){width=245}

Do not just describe the type of code that is being checked:

![](not-a-problem.png){width=613}

When describing a problem, prefer adjectives to complex nouns:

![](noun2.png){width=557}

![](noun.png){width=471}

Do not repeat the group titles in the inspection name:

![](inspections_group.png){width=557}

Do not use the word "problems" or other words that describe how inspections function in general (i.e. "check", "inspection", or "issue"). An inspection is supposed to check code for problems, so mentioning it in its name is not needed.

![](problem.png){width=613}

Do not use the words "warning" and "error" in inspection names. Such a name will become incorrect and misleading if the inspection severity level changes.

![](inspections_warning.png){width=613}

Do not use parentheses in inspection names. All supporting information can be moved to inspection descriptions.

![](parens.png){width=513}

If an inspection is powered by a third-party code quality tool, use the name of this tool in the inspection name.

![](third-party.png){width=245}

### Descriptions

Start descriptions with a verb, e.g. "Reports". Use "Run" for external tools. Do not begin a description with "This inspection".

![](start.png){width=520}

Provide details, such as:

* A quick-fix if applicable:

![](quick-fix.png){width=520}

* A link to the language or framework docs explaining the correct usage of the syntax or feature, if applicable.

![](link.png){width=520}

* Two code samples: the code with a problem and the code that bypasses this problem. By comparing the good code and the bad code, users can work out what causes the problem and how to avoid it.
  For example, for <ui-path>Java | Probable bugs | 'equals()' called on array</ui-path> adding such an example helps to understand the inspection quicker:

![](inspections_example.png){width=520}

* Information from external validators.
  Prefer separating inspections so that a user can control them individually.
  If it is not possible, list all problems that an inspection can detect:

![](multiple.png){width=520}

Be very specific about the code problems that an inspection can detect:

![](vague.png){width=520}

Remove unnecessary words:

* Do not duplicate an inspection’s name in its description.

* Inspections highlight code problems, it's their primary functionality. Don't explain it in descriptions:

  ![](purpuse.png){width=520}

For text formatting, see [Description text](description_text.md).

### Editor messages

Describe the problem in the highlighted code in the current context.

![](editor-error-message.png){width=592 style=block}
*For example, Unresolved reference inspection provides the exact reference name which is unresolved.*

Use single quotes for the highlighted piece of code if it is referenced in the error message.

If a quick-fix is not available, describe in more detail a way to resolve the problem:

![](editor-error-message-detail.png){width=478}

### Quick-fixes

Describe the action that fixes the problem. For wording, follow the rules for [buttons](button.topic).

[//]: # (TODO: and [menu actions]&#40;menu.md&#41;.)

Use single quotes for the referenced piece of code.

![](quick-fix-menu.png){width=354}

### Capitalization

Use [sentence case](capitalization.md#sentence) for everything:

* Inspection names and descriptions
* Names of inspection groups and subgroups in settings
* Inspection texts in editor tooltips and quick-fixes

<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Code of Conduct

<link-summary>The Code of Conduct reference link.</link-summary>

<tldr>The JetBrains Open Source and Community Code of Conduct.</tldr>

This project and the corresponding community is governed by the [JetBrains Open Source and Community Code of Conduct](https://github.com/jetbrains#code-of-conduct).
Please make sure you read it.
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<link-summary>Basic rules on contributing to the IntelliJ Platform SDK documentation.</link-summary>

# Contributing to the IntelliJ Platform SDK

This document describes our contribution guidelines for the open-source IntelliJ Platform SDK documentation and sample code.
Before you begin contributing content to the SDK, please read this page thoroughly as well as the [Code of Conduct](intellij-sdk-docs-original_CODE_OF_CONDUCT.md) and [License](https://github.com/JetBrains/intellij-sdk-docs/blob/main/LICENSE.txt) documents.

For information about contributing to the IntelliJ Platform itself, please visit [](platform_contributions.md).

## Creating IntelliJ Platform SDK Content

Content contributions to the IntelliJ Platform SDK are very welcome!

Before creating content for a new topic or adding large sections to the existing pages, please create an issue in the [IJSDK YouTrack project](https://youtrack.jetbrains.com/newIssue?project=IJSDK&clearDraft=true&c=) to ensure we are not working on the same topic, and to agree on the form of the content draft.
Checking with us before starting the work will reduce the risk of creating content that is unnecessary and won't be accepted.

Please clone the _intellij-sdk-docs_ project from [GitHub](https://github.com/JetBrains/intellij-sdk-docs), make additions or changes, and submit a pull request.
Alternatively, start by clicking on the <control>Edit page</control> link on the top of each page.

Before creating or altering content, please consult these guides:

* [](sdk_style.md).
  This guide describes documentation conventions in terms of content style and syntax.
* [](sdk_code_guidelines.md).
  Conventions for code sample organization, project settings, and naming conventions are described in this document.

> Currently, building the site locally is not possible.
>
{style="note"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# IntelliJ Platform Artifacts Repositories

<link-summary>Overview of the repositories hosting artifacts related to the IntelliJ Platform.</link-summary>

> When using additional repositories, make sure to use HTTPS always.
>
{style="warning"}

JetBrains maintains public repositories that host artifacts related to the IntelliJ Platform, such as binaries and source code.
These repositories make artifacts more accessible for plugin developers.

The IntelliJ Platform artifacts repositories are:
* [Releases repository](https://www.jetbrains.com/intellij-repository/releases/) for release versions by [build number](build_number_ranges.md).
* [Snapshots repository](https://www.jetbrains.com/intellij-repository/snapshots/) for _BRANCH#-EAP-SNAPSHOT_, _EAP-CANDIDATE-SNAPSHOT_, _LATEST-EAP-SNAPSHOT_, and the _EAP-SNAPSHOT_.

See the [Maven coordinates](#specify-the-maven-coordinates-for-the-artifact) section for details about specifying these artifacts.

Both the Releases and Snapshots repositories have two types of content:
* Binary and source code artifacts for cross-platform, ZIP distributions of IntelliJ Platform-based IDEs, such as IntelliJ IDEA, CLion, Rider, and MPS.
  These artifacts are _not intended_ to be accessed directly from a plugin project's Gradle build script.
  See also [](tools_intellij_platform_gradle_plugin_repositories_extension.md).

  The [](tools_gradle_intellij_plugin.md) will access them implicitly as-needed for a plugin project.
* Artifacts for individual modules from the IntelliJ Platform.
These may be downloaded, or accessed directly from a Gradle build script, as explained below.

### Third-Party Dependencies

Artifacts for IntelliJ Platform third-party dependencies are hosted at a separate [intellij-dependencies](https://cache-redirector.jetbrains.com/intellij-dependencies) repository.
A link to this repository should be added to Maven POM or Gradle build script when individual modules from an IntelliJ Platform artifacts repository are used.

> Usages of deprecated URL `https://jetbrains.bintray.com/intellij-third-party-dependencies` must be replaced with `https://cache-redirector.jetbrains.com/intellij-dependencies` in build scripts.
>
{style="warning"}

## Using IntelliJ Platform Module Artifacts

IntelliJ Platform module artifacts are utilized by adding information to a project's Gradle build script.
More information about [Gradle support](https://www.jetbrains.com/help/idea/gradle.html) is available in the IntelliJ IDEA Help documentation.

To set up dependencies on a module, there are two types of information needed:
1. Specify the corresponding repository URL for the artifact.
2. Specify the [Maven coordinates](https://maven.apache.org/pom.html#Maven_Coordinates) for the artifact.

### Specify the Repository URL

The URL for the desired artifact needs to be added to a Maven or Gradle script:
* For release versions, use:

  `https://www.jetbrains.com/intellij-repository/releases`
* For EAP snapshots, use:

  `https://www.jetbrains.com/intellij-repository/snapshots`
* For dependencies on individual modules from the IntelliJ Platform, also use:

  `https://cache-redirector.jetbrains.com/intellij-dependencies`

### Specify the Maven Coordinates for the Artifact

Describing a desired IntelliJ Platform module artifact is done with Maven coordinates: _groupId_, _artifactId_, and _version_.
The Maven coordinates are based on the names of modules.

The _groupId_ for a module is the prefix `com.jetbrains.` concatenated with the first two parts of the module name.
For example, the module `intellij.xml` would have the groupId `com.jetbrains.intellij.xml`.

The _artifactId_ is the second.._n_ parts of the module name separated by "-" characters.
For example, the module `intellij.xml` would have the artifactId `xml`.
There are some special cases to artifactId names.
If the second part of the module name is a common group like `platform`, `vcs`, or `cloud`, the second part of the module name is dropped, and the artifactId becomes the third.._n_ parts of the module name, separated by "-" characters.
Portions of the module name expressed in `camelCase` format are divided and used in the artifactId as (all lower case) `camel-case`.

The table below shows some example module names and their corresponding groupId and artifactId.

| Module Name                     | groupId                         | artifactId              |
|---------------------------------|---------------------------------|-------------------------|
| intellij.java.compiler.antTasks | com.jetbrains.intellij.java     | java-compiler-ant-tasks |
| intellij.java.debugger          | com.jetbrains.intellij.java     | java-debugger           |
| intellij.platform.util          | com.jetbrains.intellij.platform | util                    |
| intellij.platform.vcs.log       | com.jetbrains.intellij.platform | vcs-log                 |
| intellij.spring                 | com.jetbrains.intellij.spring   | spring                  |
| intellij.xml.impl               | com.jetbrains.intellij.xml      | xml-impl                |

The artifact _version_ can be specified in one of several ways because each artifact [at the Repository URLs](#specify-the-repository-url) has multiple versions available:
* Specify release build versions as _MAJOR\[.MINOR]\[.FIX]_. For example `14`, or `14.1`, or `14.1.1`
* Snapshot versions are specified as:
  * The snapshot of the most recent branch build is specified as _BRANCH-EAP-SNAPSHOT_. For example, `193-EAP-SNAPSHOT`.
    There is only one of this type of build for each branch of each product.
  * The snapshot of the branch from which the next EAP/release build might be produced is specified as _BRANCH.BUILD-EAP-CANDIDATE-SNAPSHOT_. For example `193.4386-EAP-CANDIDATE-SNAPSHOT`.
    There are multiple builds of this type, one for each build in each branch of every product.
  * The latest snapshot of a product is always specified as _LATEST-EAP-SNAPSHOT_.
    There is only one build of this type per product, and it is always the same as the _BRANCH-EAP-SNAPSHOT_ for the newest branch of the product.
  * A snapshot of a branch is specified as _BRANCH.BUILD.FIX-EAP-SNAPSHOT_. For example, `193.4386.10-EAP-SNAPSHOT`.
    There are many builds of this type for each branch of each product.

### Example Artifact Specification

For example, to specify the `jps-model-serialization` module:
* _groupId_ = `com.jetbrains.intellij.platform`
* _artifactId_ = `jps-model-serialization`
* _classifier_ = `""`
* _packaging_ = `jar`

## Gradle Example for an Individual Module from the IntelliJ Platform

This section presents an example of adding IntelliJ Platform repository and module in a Gradle build script.
The example illustrates declaring the artifact URL, Maven coordinates, and version for the `jps-model-serialization` module artifact.
There are two parts to the example: the repository and the dependency sections.

### Repositories Section

This code snippet selects the release repository with the first URL, and the repository of IntelliJ Platform dependencies with the second URL.
The second URL is needed because this example selects individual modules.

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
repositories {
  maven("https://www.jetbrains.com/intellij-repository/releases")
  maven("https://cache-redirector.jetbrains.com/intellij-dependencies")
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
repositories {
  maven { url "https://www.jetbrains.com/intellij-repository/releases" }
  maven { url "https://cache-redirector.jetbrains.com/intellij-dependencies" }
}
```

</tab>
</tabs>

### Dependencies Section

This code snippet specifies the desired module artifacts.

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
dependencies {
  implementation("com.jetbrains.intellij.platform:jps-model-serialization:182.2949.4")
  implementation("com.jetbrains.intellij.platform:jps-model-impl:182.2949.4")
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
dependencies {
  implementation "com.jetbrains.intellij.platform:jps-model-serialization:182.2949.4"
  implementation "com.jetbrains.intellij.platform:jps-model-impl:182.2949.4"
}
```

</tab>
</tabs>

Note:
* The artifact version (`182.2949.4`) must match in both statements.
* In this example `jps-model-serialization` declares the APIs and `jps-model-impl` provides the implementation, so both are required dependencies.
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# IntelliJ Platform Coding Guidelines

<link-summary>Coding guidelines for the code contributed to the IntelliJ Platform.</link-summary>

If you are writing code that you would like to contribute to the IntelliJ Platform, following these guidelines will make it easier for the JetBrains development team to review and accept your changes.

## Following the Latest Source Code

If you submit patches, we strongly recommend building your patches against the latest version of the code from the [intellij-community Git repository](intellij_platform.md#open-source).
The easiest way to do so is to clone the repository, track your work in Git, and provide your changes as described in [](platform_contributions.md#submit-a-patch).

## General Architectural Principles

Please do your best to follow common Java architectural principles. "Effective Java" by Joshua Bloch is the right place to start.

## Tests

Functional tests cover most of the existing functionality of IntelliJ IDEA.
If tests cover the area you're modifying, you must run the tests and make sure that your changes do not introduce any new test failures.
It's also strongly recommended that you provide new functional tests that cover the bugs you fix or the new features that you add.

## Code Formatting

We're generally pretty lax about code formatting, but at least the following conventions must be observed:

- 2 space indents in source files
- Use `my` prefix for instance variables and `our` prefix for class variables.
- New source code files must include a copyright statement with the Apache 2 license and the name of the contributor.

The easiest way to follow our code formatting guidelines is to reformat your code submissions using the shared code style, which is included in the IntelliJ IDEA Community Edition project directory.

## Inspections

The IntelliJ IDEA Community Edition project includes a shared inspection profile.
We strongly recommend making sure that the code you submit does not contain any warnings highlighted by the inspections configured in that inspection profile.

## Javadoc Comments

If your code adds new OpenAPI interfaces, classes, methods, or extension points, you must provide Javadoc comments describing the parameters and intended usage of the APIs.
Providing Javadoc or other comments for other parts of the code is a good idea but isn't required.

## Commits

To avoid unnecessary work when reviewing your changes, please follow these guidelines:

- Look through all of your changes in your patch or pull request before you submit it to us.
  Make sure that everything you've changed is there for a reason.
- Please don't include unfinished work in the patch.
  Make sure that it doesn't contain any TODO comments.
  If you added some code and ended up not needing it, please make sure that you delete it before you submit your patch.
- Please don't include any changes that affect formatting, fixing "yellow code" (warnings), or code style along with actual changes that fix a bug or implement a feature.
  No one likes to leave poor code, but remember that having these changes mixed complicates the process of review.
- Please don't fix multiple problems within a single patch or pull request.
- Please don't commit your changes to configuration files (<path>runConfigurations/IDEA.xml</path>, <path>codeStyleSettings.xml</path>, <path>misc.xml</path>, etc.) unless it is essential for the fix itself.
- Please avoid moving or renaming code unless it is necessary for the fix. Keeping backwards compatibility is critical for the platform.

The ideal pull request would contain one commit with everything needed to fix the bug or implement a feature, but nothing else.
"Commit early, commit often" perfectly applies only to local commits, but such "public commits" are hard to review (the reviewer needs either to go commit by commit spending more time to review work-in-progress, or to review all changes at once thus losing valuable information stored in commit messages).

The best would be to commit early, but then to squash all commits into one with a descriptive commit message.

Sometimes several commits for a single issue are also acceptable, but each of these should be self-contained "steps" to solve the problem.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<!--
EP List Directory:
/community/java
/community/jvm
/community/plugins
/community/python
-->

# IntelliJ Community Plugins Extension Point and Listener List

<link-summary>Overview of Extension Points and Listeners for IntelliJ Platform.</link-summary>

592 Extension Points and 65 Listeners for IntelliJ Community Plugins

<include from="snippets.md" element-id="ep_list_legend"/>

## IntelliJ Community Plugins


### IntelliJ Community Plugins – Listeners

| Topic | Listener |
|-------|----------|
| [ExternalAnnotationsManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.ExternalAnnotationsListener)  ![Project-Level][project-level] | [`ExternalAnnotationsListener`](%gh-ic%/java/java-psi-api/src/com/intellij/codeInsight/ExternalAnnotationsListener.java) |
| [BuildManagerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.compiler.server.BuildManagerListener)  | [`BuildManagerListener`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/server/BuildManagerListener.java) |
| [CustomBuilderMessageHandler#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.compiler.server.CustomBuilderMessageHandler)  ![Project-Level][project-level] | [`CustomBuilderMessageHandler`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/server/CustomBuilderMessageHandler.java) |
| [PortableCachesLoadListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.compiler.server.PortableCachesLoadListener)  ![Internal][internal] ![Project-Level][project-level] | [`PortableCachesLoadListener`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/server/PortableCachesLoadListener.java) |
| [DebuggerActionListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.debugger.engine.DebuggerActionListener)  ![Internal][internal] ![Project-Level][project-level] | [`DebuggerActionListener`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/engine/DebuggerActionListener.kt) |
| [SteppingListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.debugger.engine.SteppingListener)  ![Internal][internal] | [`SteppingListener`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/engine/SteppingListener.kt) |
| [DebuggerManagerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.debugger.impl.DebuggerManagerListener)  ![Project-Level][project-level] | [`DebuggerManagerListener`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/impl/DebuggerManagerListener.java) |
| [GrazieStateLifecycleKt#topic](https://jb.gg/ipe/listeners?topics=com.intellij.grazie.ide.msg.GrazieStateLifecycle)  | [`GrazieStateLifecycle`](%gh-ic%/plugins/grazie/src/main/kotlin/com/intellij/grazie/ide/msg/GrazieStateLifecycle.kt) |
| [StarterModuleProcessListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.starters.StarterModuleProcessListener)  ![Project-Level][project-level] | [`StarterModuleProcessListener`](%gh-ic%/java/idea-ui/src/com/intellij/ide/starters/StarterModuleProcessListener.kt) |
| [AntExecutionListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.lang.ant.config.execution.AntExecutionListener)  | [`AntExecutionListener`](%gh-ic%/plugins/ant/src/com/intellij/lang/ant/config/execution/AntExecutionListener.java) |
| [CompilerTopics#COMPILATION_STATUS](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.compiler.CompilationStatusListener)  ![Project-Level][project-level] | [`CompilationStatusListener`](%gh-ic%/java/compiler/openapi/src/com/intellij/openapi/compiler/CompilationStatusListener.java) |
| [ExcludedEntriesListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.compiler.options.ExcludedEntriesListener)  ![Project-Level][project-level] | [`ExcludedEntriesListener`](%gh-ic%/java/compiler/openapi/src/com/intellij/openapi/compiler/options/ExcludedEntriesListener.java) |
| [LanguageLevelProjectExtension#LANGUAGE_LEVEL_CHANGED_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.roots.LanguageLevelProjectExtension.LanguageLevelChangeListener)  | [`LanguageLevelChangeListener`](%gh-ic%/java/java-frontback-psi-api/src/com/intellij/openapi/roots/LanguageLevelProjectExtension.java) |
| [VirtualFileJavaLanguageLevelListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.roots.impl.VirtualFileJavaLanguageLevelListener)  ![Project-Level][project-level] | [`VirtualFileJavaLanguageLevelListener`](%gh-ic%/java/java-analysis-impl/src/com/intellij/openapi/roots/impl/VirtualFileJavaLanguageLevelListener.kt) |
| [ConfigurationErrors#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.roots.ui.configuration.ConfigurationErrors)  | [`ConfigurationErrors`](%gh-ic%/java/idea-ui/src/com/intellij/openapi/roots/ui/configuration/ConfigurationErrors.java) |
| [ArtifactManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.packaging.artifacts.ArtifactListener)  ![Project-Level][project-level] | [`ArtifactListener`](%gh-ic%/java/compiler/openapi/src/com/intellij/packaging/artifacts/ArtifactListener.java) |
| [HuggingFaceCacheUpdateListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.python.community.impl.huggingFace.cache.HuggingFaceCacheUpdateListener)  | [`HuggingFaceCacheUpdateListener`](%gh-ic%/python/huggingFace/src/com/intellij/python/community/impl/huggingFace/cache/HuggingFaceCacheUpdateListener.kt) |
| [SvnVcs#ROOTS_RELOADED](https://jb.gg/ipe/listeners?topics=com.intellij.util.Consumer)  ![Obsolete][obsolete] | [`Consumer`](%gh-ic%/platform/util/src/com/intellij/util/Consumer.java) |
| [PyFrameListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.python.debugger.PyFrameListener)  | [`PyFrameListener`](%gh-ic%/python/pydevSrc/src/com/jetbrains/python/debugger/PyFrameListener.kt) |
| [PyStackFrame#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.python.debugger.PyStackFrame.PyStackFrameRefreshedListener)  | [`PyStackFrameRefreshedListener`](%gh-ic%/python/src/com/jetbrains/python/debugger/PyStackFrame.java) |
| [PyPackageManager#PACKAGE_MANAGER_TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.python.packaging.PyPackageManager.Listener)  | [`Listener`](%gh-ic%/python/openapi/src/com/jetbrains/python/packaging/PyPackageManager.java) |
| [PythonPackageManager#PACKAGE_MANAGEMENT_TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.python.packaging.common.PythonPackageManagementListener)  ![Experimental][experimental] | [`PythonPackageManagementListener`](%gh-ic%/python/src/com/jetbrains/python/packaging/common/util.kt) |
| [GitBranchIncomingOutgoingManager#GIT_INCOMING_OUTGOING_CHANGED](https://jb.gg/ipe/listeners?topics=git4idea.branch.GitBranchIncomingOutgoingManager.GitIncomingOutgoingListener)  ![Project-Level][project-level] | [`GitIncomingOutgoingListener`](%gh-ic%/plugins/git4idea/src/git4idea/branch/GitBranchIncomingOutgoingManager.java) |
| [GitAuthenticationListener#GIT_AUTHENTICATION_SUCCESS](https://jb.gg/ipe/listeners?topics=git4idea.commands.GitAuthenticationListener)  | [`GitAuthenticationListener`](%gh-ic%/plugins/git4idea/src/git4idea/commands/GitAuthenticationListener.java) |
| [GitExecutableManager#TOPIC](https://jb.gg/ipe/listeners?topics=git4idea.config.GitExecutableListener)  | [`GitExecutableListener`](%gh-ic%/plugins/git4idea/src/git4idea/config/GitExecutableListener.java) |
| [GitPushListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=git4idea.push.GitPushListener)  | [`GitPushListener`](%gh-ic%/plugins/git4idea/src/git4idea/push/GitPushListener.kt) |
| [GitCommitTemplateListener#TOPIC](https://jb.gg/ipe/listeners?topics=git4idea.repo.GitCommitTemplateListener)  ![Project-Level][project-level] | [`GitCommitTemplateListener`](%gh-ic%/plugins/git4idea/src/git4idea/repo/GitCommitTemplateTracker.kt) |
| [GitConfigListener#TOPIC](https://jb.gg/ipe/listeners?topics=git4idea.repo.GitConfigListener)  ![Project-Level][project-level] | [`GitConfigListener`](%gh-ic%/plugins/git4idea/src/git4idea/repo/GitConfigListener.kt) |
| [GitRepository#GIT_REPO_CHANGE](https://jb.gg/ipe/listeners?topics=git4idea.repo.GitRepositoryChangeListener)  | [`GitRepositoryChangeListener`](%gh-ic%/plugins/git4idea/src/git4idea/repo/GitRepositoryChangeListener.java) |
| [GitRepository#GIT_REPO_STATE_CHANGE](https://jb.gg/ipe/listeners?topics=git4idea.repo.GitRepositoryStateChangeListener)  | [`GitRepositoryStateChangeListener`](%gh-ic%/plugins/git4idea/src/git4idea/repo/GitRepositoryStateChangeListener.kt) |
| [GitTagHolder#GIT_TAGS_LOADED](https://jb.gg/ipe/listeners?topics=git4idea.repo.GitTagLoaderListener)  | [`GitTagLoaderListener`](%gh-ic%/plugins/git4idea/src/git4idea/repo/GitTagHolder.kt) |
| [GitStashSettingsListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=git4idea.stash.ui.GitStashSettingsListener)  | [`GitStashSettingsListener`](%gh-ic%/plugins/git4idea/src/git4idea/stash/ui/GitStashContentProvider.kt) |
| [GitRefreshListener#TOPIC](https://jb.gg/ipe/listeners?topics=git4idea.status.GitRefreshListener)  | [`GitRefreshListener`](%gh-ic%/plugins/git4idea/src/git4idea/status/GitRefreshListener.java) |
| [GitStagingAreaHolder#TOPIC](https://jb.gg/ipe/listeners?topics=git4idea.status.GitStagingAreaHolder.StagingAreaListener)  | [`StagingAreaListener`](%gh-ic%/plugins/git4idea/src/git4idea/status/GitStagingAreaHolder.java) |
| [SvnVcs#WC_CONVERTED](https://jb.gg/ipe/listeners?topics=java.lang.Runnable)  ![Project-Level][project-level] | `Runnable` |
| [RootsAndBranches#REFRESH_REQUEST](https://jb.gg/ipe/listeners?topics=java.lang.Runnable)  ![Project-Level][project-level] | `Runnable` |
| [EditorConfigSettings#EDITOR_CONFIG_ENABLED_TOPIC](https://jb.gg/ipe/listeners?topics=org.editorconfig.settings.EditorConfigListener)  | [`EditorConfigListener`](%gh-ic%/plugins/editorconfig/src/org/editorconfig/settings/EditorConfigListener.java) |
| [ChangeListener#TOPIC](https://jb.gg/ipe/listeners?topics=org.intellij.plugins.markdown.settings.MarkdownExtensionsSettings.ChangeListener)  ![Experimental][experimental] | [`ChangeListener`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/settings/MarkdownExtensionsSettings.kt) |
| [ChangeListener#TOPIC](https://jb.gg/ipe/listeners?topics=org.intellij.plugins.markdown.settings.MarkdownPreviewSettings.ChangeListener)  | [`ChangeListener`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/settings/MarkdownPreviewSettings.kt) |
| [ChangeListener#TOPIC](https://jb.gg/ipe/listeners?topics=org.intellij.plugins.markdown.settings.MarkdownSettings.ChangeListener)  ![Project-Level][project-level] | [`ChangeListener`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/settings/MarkdownSettings.kt) |
| [MavenSystemIndicesManager#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.idea.maven.indices.IndexChangeProgressListener)  | [`IndexChangeProgressListener`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/indices/MavenSystemIndicesManager.kt) |
| [MavenIndicesManager#INDEXER_TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.idea.maven.indices.MavenIndicesManager.MavenIndexerListener)  | [`MavenIndexerListener`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/indices/MavenIndicesManager.kt) |
| [MavenSearchIndex#INDEX_IS_BROKEN](https://jb.gg/ipe/listeners?topics=org.jetbrains.idea.maven.indices.MavenSearchIndex.IndexListener)  | [`IndexListener`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/indices/MavenSearchIndex.java) |
| [MavenImportListener#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.idea.maven.project.MavenImportListener)  ![Project-Level][project-level] | [`MavenImportListener`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/project/MavenImportListener.java) |
| [MavenSyncListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.idea.maven.project.MavenSyncListener)  | [`MavenSyncListener`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/project/MavenSyncListener.kt) |
| [MavenServerConnector#DOWNLOAD_LISTENER_TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.idea.maven.server.MavenServerDownloadListener)  | [`MavenServerDownloadListener`](%gh-ic%/plugins/maven-server-api/src/main/java/org/jetbrains/idea/maven/server/MavenServerDownloadListener.java) |
| [Merger#COMMITTED_CHANGES_MERGED_STATE](https://jb.gg/ipe/listeners?topics=org.jetbrains.idea.svn.integrate.Merger.CommittedChangesMergedStateChanged)  ![Project-Level][project-level] | [`CommittedChangesMergedStateChanged`](%gh-ic%/plugins/svn4idea/src/org/jetbrains/idea/svn/integrate/Merger.java) |
| [SvnMergeInfoCache#SVN_MERGE_INFO_CACHE](https://jb.gg/ipe/listeners?topics=org.jetbrains.idea.svn.mergeinfo.SvnMergeInfoCache.SvnMergeInfoCacheListener)  ![Project-Level][project-level] | [`SvnMergeInfoCacheListener`](%gh-ic%/plugins/svn4idea/src/org/jetbrains/idea/svn/mergeinfo/SvnMergeInfoCache.java) |
| [LibraryInfoListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.kotlin.idea.base.projectStructure.LibraryInfoListener)  ![Internal][internal] ![Project-Level][project-level] | [`LibraryInfoListener`](%gh-ic%/plugins/kotlin/base/project-structure/src/org/jetbrains/kotlin/idea/base/projectStructure/LibraryInfoCache.kt) |
| [KotlinCompilerSettingsListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.kotlin.idea.compiler.configuration.KotlinCompilerSettingsListener)  ![Project-Level][project-level] | [`KotlinCompilerSettingsListener`](%gh-ic%/plugins/kotlin/base/compiler-configuration/src/org/jetbrains/kotlin/idea/compiler/configuration/BaseKotlinCompilerSettings.kt) |
| [KotlinBundledUsageDetector#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.kotlin.idea.macros.KotlinBundledUsageDetectorListener)  ![Project-Level][project-level] | [`KotlinBundledUsageDetectorListener`](%gh-ic%/plugins/kotlin/idea/src/org/jetbrains/kotlin/idea/macros/KotlinBundledUsageDetectorListener.kt) |
| [KotlinRefactoringEventListener.Companion#EVENT_TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.kotlin.idea.refactoring.KotlinRefactoringEventListener)  | [`KotlinRefactoringEventListener`](%gh-ic%/plugins/kotlin/idea/src/org/jetbrains/kotlin/idea/refactoring/RefactoringEventListenerEx.kt) |
| [ScratchFileListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.kotlin.idea.scratch.ScratchFileListener)  ![Project-Level][project-level] | [`ScratchFileListener`](%gh-ic%/plugins/kotlin/jvm/src/org/jetbrains/kotlin/idea/scratch/ScratchFile.kt) |
| [KotlinCorruptedIndexListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.kotlin.idea.stubindex.resolve.KotlinCorruptedIndexListener)  ![Project-Level][project-level] | [`KotlinCorruptedIndexListener`](%gh-ic%/plugins/kotlin/base/analysis/src/org/jetbrains/kotlin/idea/stubindex/resolve/KotlinCorruptedIndexListener.kt) |
| [GHPRDataOperationsListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.github.pullrequest.data.provider.GHPRDataOperationsListener)  | [`GHPRDataOperationsListener`](%gh-ic%/plugins/github/src/org/jetbrains/plugins/github/pullrequest/data/provider/GHPRDataOperationsListener.kt) |
| [GradleSettingsListener#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.gradle.settings.GradleSettingsListener)  ![Project-Level][project-level] | [`GradleSettingsListener`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/settings/GradleSettingsListener.java) |
| [GradleUiListener#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.gradle.ui.GradleUiListener)  | [`GradleUiListener`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/ui/GradleUiListener.java) |
| [Constants#TERMINAL_COMMAND_HANDLER_TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.terminal.TerminalCommandHandlerCustomizer.TerminalCommandHandlerListener)  | [`TerminalCommandHandlerListener`](%gh-ic%/plugins/terminal/src/org/jetbrains/plugins/terminal/TerminalCommandHandlerCustomizer.kt) |
| [BlockTerminalInitializationListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.terminal.block.BlockTerminalInitializationListener)  ![Internal][internal] ![Project-Level][project-level] | [`BlockTerminalInitializationListener`](%gh-ic%/plugins/terminal/src/org/jetbrains/plugins/terminal/block/BlockTerminalInitializationListener.kt) |
| [CommandHistoryListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.terminal.block.history.CommandHistoryListener)  ![Internal][internal] ![Project-Level][project-level] | [`CommandHistoryListener`](%gh-ic%/plugins/terminal/src/org/jetbrains/plugins/terminal/block/history/CommandHistoryListener.kt) |
| [CommandSearchListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.terminal.block.history.CommandSearchListener)  ![Internal][internal] ![Project-Level][project-level] | [`CommandSearchListener`](%gh-ic%/plugins/terminal/src/org/jetbrains/plugins/terminal/block/history/CommandSearchListener.kt) |
| [HgVcs#REMOTE_TOPIC](https://jb.gg/ipe/listeners?topics=org.zmlx.hg4idea.HgUpdater)  ![Project-Level][project-level] | [`HgUpdater`](%gh-ic%/plugins/hg4idea/src/org/zmlx/hg4idea/HgUpdater.java) |
| [HgVcs#STATUS_TOPIC](https://jb.gg/ipe/listeners?topics=org.zmlx.hg4idea.HgUpdater)  ![Project-Level][project-level] | [`HgUpdater`](%gh-ic%/plugins/hg4idea/src/org/zmlx/hg4idea/HgUpdater.java) |
| [HgVcs#INCOMING_OUTGOING_CHECK_TOPIC](https://jb.gg/ipe/listeners?topics=org.zmlx.hg4idea.status.ui.HgWidgetUpdater)  ![Project-Level][project-level] | [`HgWidgetUpdater`](%gh-ic%/plugins/hg4idea/src/org/zmlx/hg4idea/status/ui/HgWidgetUpdater.java) |
| [FeatureSuggestersManagerListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=training.featuresSuggester.FeatureSuggestersManagerListener)  | [`FeatureSuggestersManagerListener`](%gh-ic%/plugins/ide-features-trainer/src/training/featuresSuggester/FeatureSuggestersManagerListener.kt) |


### AntSupport

[`AntSupport`](%gh-ic%/plugins/ant/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [AntSupport.AntMessageCustomizer](https://jb.gg/ipe?extensions=AntSupport.AntMessageCustomizer) | [`AntMessageCustomizer`](%gh-ic%/plugins/ant/src/com/intellij/lang/ant/config/execution/AntMessageCustomizer.java) |

### ByteCodeViewer

[`ByteCodeViewer`](%gh-ic%/plugins/ByteCodeViewer/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [ByteCodeViewer.classSearcher](https://jb.gg/ipe?extensions=ByteCodeViewer.classSearcher) | [`ClassSearcher`](%gh-ic%/plugins/ByteCodeViewer/src/com/intellij/byteCodeViewer/ClassSearcher.java) |

### com.intellij.completion.evaluation

[`com.intellij.completion.evaluation`](%gh-ic%/plugins/evaluation-plugin/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.cce.apiCallExtractor](https://jb.gg/ipe?extensions=com.intellij.cce.apiCallExtractor) | [`ApiCallExtractor`](%gh-ic%/plugins/evaluation-plugin/core/src/com/intellij/cce/metric/ApiCallExtractor.kt) |
| [com.intellij.cce.codeCompletionHandlerFactory](https://jb.gg/ipe?extensions=com.intellij.cce.codeCompletionHandlerFactory) ![Project-Level][project-level] | [`CodeCompletionHandlerFactory`](%gh-ic%/plugins/evaluation-plugin/languages/src/com/intellij/cce/evaluation/CodeCompletionHandlerFactory.kt) |
| [com.intellij.cce.completionEvaluationVisitor](https://jb.gg/ipe?extensions=com.intellij.cce.completionEvaluationVisitor) | [`EvaluationVisitor`](%gh-ic%/plugins/evaluation-plugin/languages/src/com/intellij/cce/visitor/EvaluationVisitor.kt) |
| [com.intellij.cce.evaluableFeature](https://jb.gg/ipe?extensions=com.intellij.cce.evaluableFeature) | [`EvaluableFeature`](%gh-ic%/plugins/evaluation-plugin/src/com/intellij/cce/evaluable/EvaluableFeature.kt) |
| [com.intellij.cce.lineCompletionVisitorFactory](https://jb.gg/ipe?extensions=com.intellij.cce.lineCompletionVisitorFactory) | [`LineCompletionVisitorFactory`](%gh-ic%/plugins/evaluation-plugin/languages/src/com/intellij/cce/visitor/LineCompletionVisitorFactory.kt) |
| [com.intellij.cce.openProjectMethodProvider](https://jb.gg/ipe?extensions=com.intellij.cce.openProjectMethodProvider) | [`OpenProjectMethodProvider`](%gh-ic%/plugins/evaluation-plugin/languages/src/com/intellij/cce/actions/OpenProjectMethodProvider.kt) |
| [com.intellij.cce.setupSdkStep](https://jb.gg/ipe?extensions=com.intellij.cce.setupSdkStep) ![Project-Level][project-level] | [`SetupSdkStep`](%gh-ic%/plugins/evaluation-plugin/languages/src/com/intellij/cce/evaluation/SetupSdkStep.kt) |
| [com.intellij.cce.suggestionsProvider](https://jb.gg/ipe?extensions=com.intellij.cce.suggestionsProvider) ![Project-Level][project-level] | [`SuggestionsProvider`](%gh-ic%/plugins/evaluation-plugin/languages/src/com/intellij/cce/evaluation/SuggestionsProvider.kt) |

### com.intellij.completion.ml.ranking

[`com.intellij.completion.ml.ranking`](%gh-ic%/plugins/completion-ml-ranking/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.completion.ml.additionalContextFeatures](https://jb.gg/ipe?extensions=com.intellij.completion.ml.additionalContextFeatures) ![Internal][internal] | [`AdditionalContextFeatureProvider`](%gh-ic%/plugins/completion-ml-ranking/src/com/intellij/completion/ml/sorting/AdditionalContextFeatureProvider.java) |
| [com.intellij.completion.ml.elementIdProvider](https://jb.gg/ipe?extensions=com.intellij.completion.ml.elementIdProvider) ![Internal][internal] | [`LookupElementIdProvider`](%gh-ic%/plugins/completion-ml-ranking/src/com/intellij/completion/ml/util/LookupElementIdProvider.kt) |
| [com.intellij.completion.ml.featuresOverride](https://jb.gg/ipe?extensions=com.intellij.completion.ml.featuresOverride) ![Internal][internal] | [`RankingFeaturesOverrides`](%gh-ic%/plugins/completion-ml-ranking/src/com/intellij/completion/ml/features/RankingFeaturesOverrides.kt) |
| [com.intellij.completion.ml.localModelProvider](https://jb.gg/ipe?extensions=com.intellij.completion.ml.localModelProvider) ![Internal][internal] | [`LocalZipModelProvider`](%gh-ic%/plugins/completion-ml-ranking/src/com/intellij/completion/ml/ranker/local/LocalZipModelProvider.kt) |
| [com.intellij.completion.ml.lookupFeatures](https://jb.gg/ipe?extensions=com.intellij.completion.ml.lookupFeatures) ![Internal][internal] | [`LookupFeatureProvider`](%gh-ic%/plugins/completion-ml-ranking/src/com/intellij/completion/ml/sorting/LookupFeatureProvider.java) |
| [com.intellij.completion.ml.ranking.features.policy](https://jb.gg/ipe?extensions=com.intellij.completion.ml.ranking.features.policy) ![Internal][internal] | [`CompletionFeaturesPolicy`](%gh-ic%/plugins/completion-ml-ranking/src/com/intellij/completion/ml/features/CompletionFeaturesPolicy.kt) |
| [com.intellij.completion.ml.ranking.policy](https://jb.gg/ipe?extensions=com.intellij.completion.ml.ranking.policy) ![Experimental][experimental] | [`CompletionMLPolicy`](%gh-ic%/plugins/completion-ml-ranking/src/com/intellij/completion/ml/CompletionMLPolicy.kt) |

### com.intellij.copyright

[`com.intellij.copyright`](%gh-ic%/plugins/copyright/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.copyright.updater](https://jb.gg/ipe?extensions=com.intellij.copyright.updater) | [`UpdateCopyrightsProvider`](%gh-ic%/plugins/copyright/src/com/maddyhome/idea/copyright/psi/UpdateCopyrightsProvider.java) |
| [com.intellij.copyright.variablesProvider](https://jb.gg/ipe?extensions=com.intellij.copyright.variablesProvider) | [`CopyrightVariablesProvider`](%gh-ic%/plugins/copyright/src/com/maddyhome/idea/copyright/pattern/CopyrightVariablesProvider.java) |

### com.intellij.gradle

[`com.intellij.gradle`](%gh-ic%/plugins/gradle/plugin-resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.plugins.gradle.autoReloadSettingsCollector](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.autoReloadSettingsCollector) ![Internal][internal] | [`GradleAutoReloadSettingsCollector`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/service/project/GradleAutoReloadSettingsCollector.kt) |
| [org.jetbrains.plugins.gradle.executionEnvironmentProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.executionEnvironmentProvider) | [`GradleExecutionEnvironmentProvider`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/execution/build/GradleExecutionEnvironmentProvider.java) |
| [org.jetbrains.plugins.gradle.gradleJvmResolver](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.gradleJvmResolver) ![Experimental][experimental] | [`GradleJvmResolver`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/resolvers/GradleJvmResolver.kt) |
| [org.jetbrains.plugins.gradle.importCustomizer](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.importCustomizer) | [`GradleImportCustomizer`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/service/project/GradleImportCustomizer.java) |
| [org.jetbrains.plugins.gradle.issueChecker](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.issueChecker) | [`GradleIssueChecker`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/issue/GradleIssueChecker.kt) |
| [org.jetbrains.plugins.gradle.operationHelperExtension](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.operationHelperExtension) ![Experimental][experimental] | [`GradleOperationHelperExtension`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/service/project/GradleOperationHelperExtension.kt) |
| [org.jetbrains.plugins.gradle.orderEnumerationHandlerFactory](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.orderEnumerationHandlerFactory) | [`FactoryImpl`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/execution/GradleOrderEnumeratorHandler.java) |
| [org.jetbrains.plugins.gradle.previewCustomizer](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.previewCustomizer) ![Experimental][experimental] | [`GradlePreviewCustomizer`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/service/project/GradlePreviewCustomizer.kt) |
| [org.jetbrains.plugins.gradle.projectResolve](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.projectResolve) | [`GradleProjectResolverExtension`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/service/project/GradleProjectResolverExtension.java) |
| [org.jetbrains.plugins.gradle.settingsControlProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.settingsControlProvider) | [`GradleSettingsControlProvider`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/service/settings/GradleSettingsControlProvider.java) |
| [org.jetbrains.plugins.gradle.syncContributor](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.syncContributor) ![Experimental][experimental] | [`GradleSyncContributor`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/service/syncAction/GradleSyncContributor.kt) |
| [org.jetbrains.plugins.gradle.targetEnvironmentAware](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.targetEnvironmentAware) ![Internal][internal] | [`GradleTargetEnvironmentAware`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/execution/target/GradleTargetEnvironmentAware.java) |
| [org.jetbrains.plugins.gradle.taskManager](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.taskManager) | [`GradleTaskManagerExtension`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/service/task/GradleTaskManagerExtension.java) |
| [org.jetbrains.plugins.gradle.taskResultListener](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.taskResultListener) ![Internal][internal] | [`GradleTaskResultListener`](%gh-ic%/plugins/gradle/src/org/jetbrains/plugins/gradle/service/task/GradleTaskResultListener.java) |

### com.intellij.java-i18n

[`com.intellij.java-i18n`](%gh-ic%/plugins/java-i18n/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.java-i18n.i18nizeHandlerProvider](https://jb.gg/ipe?extensions=com.intellij.java-i18n.i18nizeHandlerProvider) | [`I18nizeHandlerProvider`](%gh-ic%/plugins/java-i18n/src/com/intellij/codeInspection/i18n/I18nizeHandlerProvider.java) |
| [com.intellij.java-i18n.resourceBundleManager](https://jb.gg/ipe?extensions=com.intellij.java-i18n.resourceBundleManager) ![Project-Level][project-level] | [`ResourceBundleManager`](%gh-ic%/plugins/java-i18n/src/com/intellij/lang/properties/psi/ResourceBundleManager.java) |

### com.intellij.properties

[`com.intellij.properties`](%gh-ic%/plugins/properties/src/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.properties.alphaUnsortedInspectionSuppressor](https://jb.gg/ipe?extensions=com.intellij.properties.alphaUnsortedInspectionSuppressor) | [`AlphaUnsortedPropertiesFileInspectionSuppressor`](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/codeInspection/unsorted/AlphaUnsortedPropertiesFileInspectionSuppressor.java) |
| [com.intellij.properties.duplicatePropertyKeyAnnotationSuppressor](https://jb.gg/ipe?extensions=com.intellij.properties.duplicatePropertyKeyAnnotationSuppressor) | [`DuplicatePropertyKeyAnnotationSuppressor`](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/DuplicatePropertyKeyAnnotationSuppressor.java) |
| [com.intellij.properties.implicitPropertyUsageProvider](https://jb.gg/ipe?extensions=com.intellij.properties.implicitPropertyUsageProvider) | [`ImplicitPropertyUsageProvider`](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/codeInspection/unused/ImplicitPropertyUsageProvider.java) |

### com.intellij.searcheverywhere.ml

[`com.intellij.searcheverywhere.ml`](%gh-ic%/plugins/search-everywhere-ml/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.searchEverywhereMl.itemSelectedListener](https://jb.gg/ipe?extensions=com.intellij.searchEverywhereMl.itemSelectedListener) | [`SearchEverywhereItemSelectedListener`](%gh-ic%/plugins/search-everywhere-ml/src/com/intellij/searchEverywhereMl/SearchEverywhereItemSelectedListener.kt) |
| [com.intellij.searchEverywhereMl.rankingService](https://jb.gg/ipe?extensions=com.intellij.searchEverywhereMl.rankingService) ![Internal][internal] | [`SearchEverywhereMlService`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/searcheverywhere/SearchEverywhereMlService.kt) |
| [com.intellij.searchEverywhereMl.searchEverywhereSessionPropertyProvider](https://jb.gg/ipe?extensions=com.intellij.searchEverywhereMl.searchEverywhereSessionPropertyProvider) | [`SearchEverywhereSessionPropertyProvider`](%gh-ic%/plugins/search-everywhere-ml/src/com/intellij/searchEverywhereMl/SearchEverywhereSessionPropertyProvider.kt) |
| [com.intellij.searchEverywhereMl.textEmbeddingProvider](https://jb.gg/ipe?extensions=com.intellij.searchEverywhereMl.textEmbeddingProvider) | [`TextEmbeddingProvider`](%gh-ic%/plugins/search-everywhere-ml/src/com/intellij/searchEverywhereMl/TextEmbeddingProvider.kt) |

### com.intellij.settingsSync

[`com.intellij.settingsSync`](%gh-ic%/plugins/settings-sync/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.settingsSync.settingsProvider](https://jb.gg/ipe?extensions=com.intellij.settingsSync.settingsProvider) ![Internal][internal] | [`SettingsProvider`](%gh-ic%/plugins/settings-sync/src/com/intellij/settingsSync/SettingsProvider.kt) |
| [com.intellij.settingsSyncMigration](https://jb.gg/ipe?extensions=com.intellij.settingsSyncMigration) ![Internal][internal] | [`SettingsSyncMigration`](%gh-ic%/plugins/settings-sync/src/com/intellij/settingsSync/SettingsSyncMigration.kt) |

### com.intellij.stats.completion

[`com.intellij.stats.completion`](%gh-ic%/plugins/stats-collector/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.stats.completion.policy](https://jb.gg/ipe?extensions=com.intellij.stats.completion.policy) ![Internal][internal] | [`CompletionStatsPolicy`](%gh-ic%/plugins/stats-collector/src/com/intellij/stats/completion/CompletionStatsPolicy.kt) |

### com.intellij.tasks

[`com.intellij.tasks`](%gh-ic%/plugins/tasks/tasks-core/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.tasks.commitPlaceholderProvider](https://jb.gg/ipe?extensions=com.intellij.tasks.commitPlaceholderProvider) | [`CommitPlaceholderProvider`](%gh-ic%/platform/tasks-platform-api/src/com/intellij/tasks/CommitPlaceholderProvider.java) |
| [com.intellij.tasks.dialogPanelProvider](https://jb.gg/ipe?extensions=com.intellij.tasks.dialogPanelProvider) ![Non-Dynamic][non-dynamic] | [`TaskDialogPanelProvider`](%gh-ic%/plugins/tasks/tasks-api/src/com/intellij/tasks/ui/TaskDialogPanelProvider.java) |
| [com.intellij.tasks.repositoryType](https://jb.gg/ipe?extensions=com.intellij.tasks.repositoryType) | [`TaskRepositoryType`](%gh-ic%/platform/tasks-platform-api/src/com/intellij/tasks/TaskRepositoryType.java) |

### com.intellij.turboComplete

[`com.intellij.turboComplete`](%gh-ic%/plugins/turboComplete/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.turboComplete.analysis.pipelineListener](https://jb.gg/ipe?extensions=com.intellij.turboComplete.analysis.pipelineListener) | [`PipelineListener`](%gh-ic%/plugins/turboComplete/src/com/intellij/turboComplete/analysis/PipelineListener.kt) |
| [com.intellij.turboComplete.features.kind.provider](https://jb.gg/ipe?extensions=com.intellij.turboComplete.features.kind.provider) | [`KindFeatureProvider`](%gh-ic%/plugins/turboComplete/src/com/intellij/turboComplete/features/kind/KindFeatureProvider.kt) |
| [com.intellij.turboComplete.kindCollector](https://jb.gg/ipe?extensions=com.intellij.turboComplete.kindCollector) ![Internal][internal] | [`KindCollector`](%gh-ic%/platform/ml-impl/src/com/intellij/platform/ml/impl/turboComplete/KindCollector.kt) |
| [com.intellij.turboComplete.suggestionGeneratorExecutorProvider](https://jb.gg/ipe?extensions=com.intellij.turboComplete.suggestionGeneratorExecutorProvider) ![Internal][internal] | [`SuggestionGeneratorExecutorProvider`](%gh-ic%/platform/ml-impl/src/com/intellij/platform/ml/impl/turboComplete/SuggestionGeneratorExecutorProvider.kt) |

### com.intellij.uiDesigner

[`com.intellij.uiDesigner`](%gh-ic%/plugins/ui-designer/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.paletteItemProvider](https://jb.gg/ipe?extensions=com.intellij.paletteItemProvider) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | [`PaletteItemProvider`](%gh-ic%/plugins/ui-designer/src/com/intellij/ide/palette/PaletteItemProvider.java) |
| [com.intellij.uiDesigner.formInspectionTool](https://jb.gg/ipe?extensions=com.intellij.uiDesigner.formInspectionTool) ![Non-Dynamic][non-dynamic] | [`FormInspectionTool`](%gh-ic%/plugins/ui-designer/src/com/intellij/uiDesigner/inspections/FormInspectionTool.java) |

### com.jetbrains.filePrediction

[`com.jetbrains.filePrediction`](%gh-ic%/plugins/filePrediction/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.filePrediction.candidateProvider](https://jb.gg/ipe?extensions=com.intellij.filePrediction.candidateProvider) ![Internal][internal] | [`FilePredictionCandidateProvider`](%gh-ic%/plugins/filePrediction/src/com/intellij/filePrediction/candidates/FilePredictionCandidateProvider.kt) |
| [com.intellij.filePrediction.featureProvider](https://jb.gg/ipe?extensions=com.intellij.filePrediction.featureProvider) ![Internal][internal] | [`FilePredictionFeatureProvider`](%gh-ic%/plugins/filePrediction/src/com/intellij/filePrediction/features/FilePredictionFeatureProvider.kt) |
| [com.intellij.filePrediction.ml.model](https://jb.gg/ipe?extensions=com.intellij.filePrediction.ml.model) ![Internal][internal] | [`FilePredictionModelProvider`](%gh-ic%/plugins/filePrediction/src/com/intellij/filePrediction/predictor/model/FilePredictionModelProvider.kt) |
| [com.intellij.filePrediction.referencesProvider](https://jb.gg/ipe?extensions=com.intellij.filePrediction.referencesProvider) ![Internal][internal] | [`FileExternalReferencesProvider`](%gh-ic%/plugins/filePrediction/src/com/intellij/filePrediction/references/FilePredictionReferencesHelper.kt) |

### com.jetbrains.performancePlugin

[`com.jetbrains.performancePlugin`](%gh-ic%/plugins/performanceTesting/core/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.jetbrains.performancePlugin.commandProvider](https://jb.gg/ipe?extensions=com.jetbrains.performancePlugin.commandProvider) | [`CommandProvider`](%gh-ic%/plugins/performanceTesting/core/src/com/jetbrains/performancePlugin/CommandProvider.java) |
| [com.jetbrains.performancePlugin.playbackRunnerProvider](https://jb.gg/ipe?extensions=com.jetbrains.performancePlugin.playbackRunnerProvider) | [`PerformancePlaybackRunner`](%gh-ic%/plugins/performanceTesting/core/src/com/jetbrains/performancePlugin/PerformancePlaybackRunner.kt) |
| [com.jetbrains.performancePlugin.profiler](https://jb.gg/ipe?extensions=com.jetbrains.performancePlugin.profiler) | [`Profiler`](%gh-ic%/plugins/performanceTesting/core/src/com/jetbrains/performancePlugin/profilers/Profiler.kt) |
| [com.jetbrains.performancePlugin.runCallbackHandler](https://jb.gg/ipe?extensions=com.jetbrains.performancePlugin.runCallbackHandler) ![Non-Dynamic][non-dynamic] | [`RunCallbackHandler`](%gh-ic%/plugins/performanceTesting/core/src/com/jetbrains/performancePlugin/RunCallbackHandler.java) |
| [com.jetbrains.performancePlugin.snapshotOpener](https://jb.gg/ipe?extensions=com.jetbrains.performancePlugin.snapshotOpener) | [`SnapshotOpener`](%gh-ic%/plugins/performanceTesting/core/src/com/jetbrains/performancePlugin/profilers/SnapshotOpener.java) |

### completion-fe10.xml

[`completion-fe10.xml`](%gh-ic%/plugins/kotlin/plugin/k1/resources/META-INF/completion-fe10.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.completionInformationProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.completionInformationProvider) | [`CompletionInformationProvider`](%gh-ic%/plugins/kotlin/base/fe10/analysis/src/org/jetbrains/kotlin/idea/completion/CompletionInformationProvider.kt) |

### Coverage

[`Coverage`](%gh-ic%/plugins/coverage/src/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.javaCoverageEngineExtension](https://jb.gg/ipe?extensions=com.intellij.javaCoverageEngineExtension) | [`JavaCoverageEngineExtension`](%gh-ic%/plugins/coverage/src/com/intellij/coverage/JavaCoverageEngineExtension.java) |

### DesignerCorePlugin.xml

[`DesignerCorePlugin.xml`](%gh-ic%/plugins/ui-designer-core/src/META-INF/DesignerCorePlugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [Designer.customizations](https://jb.gg/ipe?extensions=Designer.customizations) ![Non-Dynamic][non-dynamic] | [`DesignerCustomizations`](%gh-ic%/plugins/ui-designer-core/src/com/intellij/designer/DesignerCustomizations.java) |

### extensions.xml

[`extensions.xml`](%gh-ic%/plugins/kotlin/plugin/k2/resources/META-INF/extensions.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.codeinsight.quickfix.registrar](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.codeinsight.quickfix.registrar) | [`KotlinQuickFixRegistrar`](%gh-ic%/plugins/kotlin/code-insight/api/src/org/jetbrains/kotlin/idea/codeinsight/api/applicators/fixes/KotlinQuickFixService.kt) |
| [org.jetbrains.kotlin.kotlinInjectedFilesAnalysisProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.kotlinInjectedFilesAnalysisProvider) ![Internal][internal] | [`KotlinIdeInjectedFilesAnalysisPromoter`](%gh-ic%/plugins/kotlin/base/analysis/src/org/jetbrains/kotlin/idea/base/analysis/KotlinIdeInjectedFilesAnalysisPromoter.kt) |

### facets-base.xml

[`facets-base.xml`](%gh-ic%/plugins/kotlin/plugin/common/resources/META-INF/facets-base.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.facetConfigurationExtension](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.facetConfigurationExtension) ![Non-Dynamic][non-dynamic] | [`KotlinFacetConfigurationExtension`](%gh-ic%/plugins/kotlin/base/facet/src/org/jetbrains/kotlin/idea/facet/KotlinFacetConfigurationExtension.kt) |
| [org.jetbrains.kotlin.versionInfoProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.versionInfoProvider) ![Non-Dynamic][non-dynamic] | [`KotlinVersionInfoProvider`](%gh-ic%/plugins/kotlin/base/facet/src/org/jetbrains/kotlin/idea/facet/KotlinVersionInfoProvider.kt) |

### file-types.xml

[`file-types.xml`](%gh-ic%/plugins/kotlin/plugin/common/resources/META-INF/file-types.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.binaryExtension](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.binaryExtension) | [`KotlinBinaryExtension`](%gh-ic%/plugins/kotlin/base/project-structure/src/org/jetbrains/kotlin/idea/base/projectStructure/KotlinBinaryExtension.kt) |

### github-core-config.xml

[`github-core-config.xml`](%gh-ic%/plugins/github/resources/META-INF/github-core-config.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.vcs.github.gistContentsCollector](https://jb.gg/ipe?extensions=com.intellij.vcs.github.gistContentsCollector) | [`GithubGistContentsCollector`](%gh-ic%/plugins/github/src/org/jetbrains/plugins/github/GithubGistContentsCollector.kt) |
| [intellij.vcs.github.aiReviewExtension](https://jb.gg/ipe?extensions=intellij.vcs.github.aiReviewExtension) ![Internal][internal] | [`GHPRAIReviewExtension`](%gh-ic%/plugins/github/src/org/jetbrains/plugins/github/ai/GHPRAIReviewExtension.kt) |
| [intellij.vcs.github.aiSummaryExtension](https://jb.gg/ipe?extensions=intellij.vcs.github.aiSummaryExtension) ![Internal][internal] | [`GHPRAISummaryExtension`](%gh-ic%/plugins/github/src/org/jetbrains/plugins/github/ai/GHPRAISummaryViewModel.kt) |
| [intellij.vcs.github.titleAndDescriptionGenerator](https://jb.gg/ipe?extensions=intellij.vcs.github.titleAndDescriptionGenerator) ![Internal][internal] | [`GHPRTitleAndDescriptionGeneratorExtension`](%gh-ic%/plugins/github/src/org/jetbrains/plugins/github/pullrequest/ui/toolwindow/create/GHPRCreateTitleAndDescriptionGenerationViewModel.kt) |

### gradle-groovy-integration.xml

[`gradle-groovy-integration.xml`](%gh-ic%/plugins/gradle/java/resources/META-INF/gradle-groovy-integration.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.plugins.gradle.pluginDescriptions](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.pluginDescriptions) | [`GradlePluginDescriptionsExtension`](%gh-ic%/plugins/gradle/java/src/codeInsight/GradlePluginDescriptionsExtension.java) |
| [org.jetbrains.plugins.gradle.resolve.contributor](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.resolve.contributor) | [`GradleMethodContextContributor`](%gh-ic%/plugins/gradle/java/src/service/resolve/GradleMethodContextContributor.java) |

### groovy-support.xml

[`groovy-support.xml`](%gh-ic%/plugins/maven/src/main/resources/META-INF/groovy-support.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.idea.maven.importing.groovy.foldersConfiguratorContributor](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.importing.groovy.foldersConfiguratorContributor) | [`PluginContributor`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/plugins/groovy/GroovyPluginConfigurator.kt) |

### highlighting-fe10.xml

[`highlighting-fe10.xml`](%gh-ic%/plugins/kotlin/highlighting/highlighting-k1/resources/META-INF/highlighting-fe10.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.highlighterExtension](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.highlighterExtension) | [`KotlinHighlightingVisitorExtension`](%gh-ic%/plugins/kotlin/highlighting/highlighting-k1/src/org/jetbrains/kotlin/idea/highlighter/KotlinHighlightingVisitorExtension.kt) |

### InspectionGadgets.xml

[`InspectionGadgets.xml`](%gh-ic%/java/java-impl/src/META-INF/InspectionGadgets.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.implicit.resource.closer](https://jb.gg/ipe?extensions=com.intellij.implicit.resource.closer) | [`ImplicitResourceCloser`](%gh-ic%/java/java-analysis-impl/src/com/intellij/codeInspection/resources/ImplicitResourceCloser.java) |
| [com.intellij.naming.convention.class](https://jb.gg/ipe?extensions=com.intellij.naming.convention.class) | [`NamingConvention`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInspection/naming/NamingConvention.java) |
| [com.intellij.naming.convention.field](https://jb.gg/ipe?extensions=com.intellij.naming.convention.field) | [`NamingConvention`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInspection/naming/NamingConvention.java) |
| [com.intellij.naming.convention.method](https://jb.gg/ipe?extensions=com.intellij.naming.convention.method) | [`NamingConvention`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInspection/naming/NamingConvention.java) |

### intellij.ae.database.core.xml

[`intellij.ae.database.core.xml`](%gh-ic%/plugins/feature-usage-database/core/resources/intellij.ae.database.core.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.ae.database.fusEventCatcher](https://jb.gg/ipe?extensions=com.intellij.ae.database.fusEventCatcher) ![Non-Dynamic][non-dynamic] | [`Factory`](%gh-ic%/plugins/feature-usage-database/core/src/com/intellij/ae/database/core/baseEvents/fus/FusEventCatcher.kt) |

### intellij.dev.codeInsight.xml

[`intellij.dev.codeInsight.xml`](%gh-ic%/plugins/dev/intellij.dev.codeInsight/resources/intellij.dev.codeInsight.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.dev.lang.goodCodeRedVisitor](https://jb.gg/ipe?extensions=com.intellij.dev.lang.goodCodeRedVisitor) | [`GoodCodeRedVisitor`](%gh-ic%/plugins/dev/intellij.dev.codeInsight/src/internal/GoodCodeRedVisitor.java) |

### intellij.dev.psiViewer.xml

[`intellij.dev.psiViewer.xml`](%gh-ic%/plugins/dev/intellij.dev.psiViewer/resources/intellij.dev.psiViewer.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.dev.psiViewer.apiMethodsProvider](https://jb.gg/ipe?extensions=com.intellij.dev.psiViewer.apiMethodsProvider) | [`Provider`](%gh-ic%/plugins/dev/intellij.dev.psiViewer/src/properties/tree/nodes/apiMethods/PsiViewerApiMethod.kt) |
| [com.intellij.dev.psiViewer.extension](https://jb.gg/ipe?extensions=com.intellij.dev.psiViewer.extension) | [`PsiViewerExtension`](%gh-ic%/plugins/dev/intellij.dev.psiViewer/src/PsiViewerExtension.java) |
| [com.intellij.dev.psiViewer.propertyNodeAppender](https://jb.gg/ipe?extensions=com.intellij.dev.psiViewer.propertyNodeAppender) | [`PsiViewerPropertyNodeAppender`](%gh-ic%/plugins/dev/intellij.dev.psiViewer/src/properties/tree/PsiViewerPropertyNodeHolder.kt) |
| [com.intellij.dev.psiViewer.propertyNodeFactory](https://jb.gg/ipe?extensions=com.intellij.dev.psiViewer.propertyNodeFactory) | [`Factory`](%gh-ic%/plugins/dev/intellij.dev.psiViewer/src/properties/tree/PsiViewerPropertyNode.kt) |
| [com.intellij.dev.psiViewer.psiViewerActionEnabler](https://jb.gg/ipe?extensions=com.intellij.dev.psiViewer.psiViewerActionEnabler) | [`PsiViewerActionEnabler`](%gh-ic%/plugins/dev/intellij.dev.psiViewer/src/PsiViewerActionEnabler.kt) |

### intellij.devkit.core.xml

[`intellij.devkit.core.xml`](%gh-ic%/plugins/devkit/devkit-core/resources/intellij.devkit.core.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [DevKit.lang.addServiceAnnotationProvider](https://jb.gg/ipe?extensions=DevKit.lang.addServiceAnnotationProvider) ![Internal][internal] | [`AddServiceAnnotationProvider`](%gh-ic%/plugins/devkit/devkit-core/src/inspections/quickfix/ConvertToLightServiceFix.kt) |
| [DevKit.lang.appServiceAsStaticFinalFieldOrPropertyFixProvider](https://jb.gg/ipe?extensions=DevKit.lang.appServiceAsStaticFinalFieldOrPropertyFixProvider) ![Internal][internal] | [`AppServiceAsStaticFinalFieldOrPropertyFixProvider`](%gh-ic%/plugins/devkit/devkit-core/src/inspections/quickfix/AppServiceAsStaticFinalFieldOrPropertyFixProvider.kt) |
| [DevKit.lang.appServiceAsStaticFinalFieldOrPropertyVisitorProvider](https://jb.gg/ipe?extensions=DevKit.lang.appServiceAsStaticFinalFieldOrPropertyVisitorProvider) ![Internal][internal] | [`AppServiceAsStaticFinalFieldOrPropertyVisitorProvider`](%gh-ic%/plugins/devkit/devkit-core/src/inspections/ApplicationServiceAsStaticFinalFieldOrPropertyInspection.kt) |
| [DevKit.lang.cancellationCheckInLoopsFixProvider](https://jb.gg/ipe?extensions=DevKit.lang.cancellationCheckInLoopsFixProvider) ![Internal][internal] | [`CancellationCheckInLoopsFixProvider`](%gh-ic%/plugins/devkit/devkit-core/src/inspections/quickfix/CancellationCheckInLoopsFixProvider.kt) |
| [DevKit.lang.cancellationCheckProvider](https://jb.gg/ipe?extensions=DevKit.lang.cancellationCheckProvider) ![Internal][internal] | [`CancellationCheckProvider`](%gh-ic%/plugins/devkit/devkit-core/src/inspections/CancellationCheckProvider.kt) |
| [DevKit.lang.cancellationExceptionHandlingChecker](https://jb.gg/ipe?extensions=DevKit.lang.cancellationExceptionHandlingChecker) ![Internal][internal] | [`CancellationExceptionHandlingChecker`](%gh-ic%/plugins/devkit/devkit-core/src/inspections/IncorrectCancellationExceptionHandlingInspection.kt) |
| [DevKit.lang.extensionClassShouldBeFinalErrorMessageProvider](https://jb.gg/ipe?extensions=DevKit.lang.extensionClassShouldBeFinalErrorMessageProvider) ![Internal][internal] | [`ErrorMessageProvider`](%gh-ic%/plugins/devkit/devkit-core/src/inspections/ExtensionClassShouldBeFinalErrorMessageProvider.kt) |
| [DevKit.lang.extensionClassShouldNotBePublicProvider](https://jb.gg/ipe?extensions=DevKit.lang.extensionClassShouldNotBePublicProvider) ![Internal][internal] | [`ExtensionClassShouldNotBePublicProvider`](%gh-ic%/plugins/devkit/devkit-core/src/inspections/ExtensionClassShouldNotBePublicProvider.kt) |
| [DevKit.lang.lightServiceMustBeFinalErrorMessageProvider](https://jb.gg/ipe?extensions=DevKit.lang.lightServiceMustBeFinalErrorMessageProvider) ![Internal][internal] | [`ErrorMessageProvider`](%gh-ic%/plugins/devkit/devkit-core/src/inspections/ExtensionClassShouldBeFinalErrorMessageProvider.kt) |
| [DevKit.lang.methodNameProvider](https://jb.gg/ipe?extensions=DevKit.lang.methodNameProvider) ![Internal][internal] | [`MethodNameProvider`](%gh-ic%/plugins/devkit/devkit-core/src/inspections/MethodNameProvider.kt) |
| [DevKit.lang.serviceLevelExtractor](https://jb.gg/ipe?extensions=DevKit.lang.serviceLevelExtractor) ![Internal][internal] | [`ServiceLevelExtractor`](%gh-ic%/plugins/devkit/devkit-core/src/inspections/ServiceLevelExtractor.kt) |
| [DevKit.lang.staticInitializationInExtensionsVisitorProvider](https://jb.gg/ipe?extensions=DevKit.lang.staticInitializationInExtensionsVisitorProvider) ![Internal][internal] | [`StaticInitializationInExtensionsVisitorProvider`](%gh-ic%/plugins/devkit/devkit-core/src/inspections/StaticInitializationInExtensionsInspection.kt) |
| [DevKit.lang.uElementAsPsiCheckProvider](https://jb.gg/ipe?extensions=DevKit.lang.uElementAsPsiCheckProvider) ![Internal][internal] | [`UElementAsPsiCheckProvider`](%gh-ic%/plugins/devkit/devkit-core/src/inspections/UElementAsPsiCheckProvider.kt) |
| [DevKit.lang.visitorProviderForRBCInspection](https://jb.gg/ipe?extensions=DevKit.lang.visitorProviderForRBCInspection) ![Internal][internal] | [`VisitorProvider`](%gh-ic%/plugins/devkit/devkit-core/src/inspections/CallingMethodShouldBeRequiresBlockingContextInspection.kt) |

### intellij.ide.startup.importSettings.xml

[`intellij.ide.startup.importSettings.xml`](%gh-ic%/plugins/ide-startup/importSettings/resources/intellij.ide.startup.importSettings.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.startupWizardPages](https://jb.gg/ipe?extensions=com.intellij.startupWizardPages) | [`StartupWizardService`](%gh-ic%/plugins/ide-startup/importSettings/src/com/intellij/ide/startup/importSettings/data/StartupWizardService.kt) |
| [com.intellij.transferSettings.externalProjectImportChecker](https://jb.gg/ipe?extensions=com.intellij.transferSettings.externalProjectImportChecker) | [`ExternalProjectImportChecker`](%gh-ic%/plugins/ide-startup/importSettings/src/com/intellij/ide/startup/importSettings/transfer/ExternalProjectImportChecker.kt) |
| [com.intellij.transferSettings.thirdPartyProductSettingItem](https://jb.gg/ipe?extensions=com.intellij.transferSettings.thirdPartyProductSettingItem) | [`ThirdPartyProductSettingItemProvider`](%gh-ic%/plugins/ide-startup/importSettings/src/com/intellij/ide/startup/importSettings/transfer/ThirdPartyProductSettingItemProvider.kt) |
| [com.intellij.transferSettings.thirdPartyProductSettingsTransfer](https://jb.gg/ipe?extensions=com.intellij.transferSettings.thirdPartyProductSettingsTransfer) | [`ThirdPartyProductSettingsTransfer`](%gh-ic%/plugins/ide-startup/importSettings/src/com/intellij/ide/startup/importSettings/transfer/ThirdPartyProductSettingsTransfer.kt) |
| [com.intellij.transferSettings.vscode.pluginMapping](https://jb.gg/ipe?extensions=com.intellij.transferSettings.vscode.pluginMapping) | [`VSCodePluginMapping`](%gh-ic%/plugins/ide-startup/importSettings/src/com/intellij/ide/startup/importSettings/transfer/backend/providers/vscode/mappings/PluginMappings.kt) |

### intellij.java.frontback.impl.xml

[`intellij.java.frontback.impl.xml`](%gh-ic%/java/java-frontback-impl/resource/intellij.java.frontback.impl.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.java.definitions](https://jb.gg/ipe?extensions=com.intellij.java.definitions) ![Experimental][experimental] | [`AbstractBasicJavaDefinitionService`](%gh-ic%/java/java-frontback-impl/src/com/intellij/codeInsight/definition/AbstractBasicJavaDefinitionService.java) |

### intellij.java.remoteServers.impl.xml

[`intellij.java.remoteServers.impl.xml`](%gh-ic%/java/remote-servers/impl/src/intellij.java.remoteServers.impl.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.remoteServer.moduleBuilderContribution](https://jb.gg/ipe?extensions=com.intellij.remoteServer.moduleBuilderContribution) ![Non-Dynamic][non-dynamic] | [`CloudModuleBuilderContributionFactory`](%gh-ic%/java/remote-servers/impl/src/com/intellij/remoteServer/impl/module/CloudModuleBuilderContributionFactory.java) |

### intellij.jvm.analysis.impl.xml

[`intellij.jvm.analysis.impl.xml`](%gh-ic%/jvm/jvm-analysis-impl/resources/intellij.jvm.analysis.impl.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.codeInsight.blockingMethodChecker](https://jb.gg/ipe?extensions=com.intellij.codeInsight.blockingMethodChecker) | [`BlockingMethodChecker`](%gh-ic%/jvm/jvm-analysis-api/src/com/intellij/codeInspection/blockingCallsDetection/BlockingMethodChecker.java) |
| [com.intellij.codeInsight.nonBlockingContextChecker](https://jb.gg/ipe?extensions=com.intellij.codeInsight.nonBlockingContextChecker) | [`NonBlockingContextChecker`](%gh-ic%/jvm/jvm-analysis-api/src/com/intellij/codeInspection/blockingCallsDetection/NonBlockingContextChecker.java) |
| [com.intellij.codeInspection.sourceToSinkProvider](https://jb.gg/ipe?extensions=com.intellij.codeInspection.sourceToSinkProvider) | [`SourceToSinkProvider`](%gh-ic%/jvm/jvm-analysis-impl/src/com/intellij/codeInspection/sourceToSink/SourceToSinkLangugeProvider.kt) |

### intellij.markdown.fenceInjection.xml

[`intellij.markdown.fenceInjection.xml`](%gh-ic%/plugins/markdown/fenceInjection/src/main/resources/intellij.markdown.fenceInjection.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.intellij.plugins.markdown.fenceInjection.fenceSurroundingsProvider](https://jb.gg/ipe?extensions=org.intellij.plugins.markdown.fenceInjection.fenceSurroundingsProvider) ![Internal][internal] | [`FenceSurroundingsProvider`](%gh-ic%/plugins/markdown/fenceInjection/src/main/java/org/intellij/plugins/markdown/fenceInjection/FenceSurroundingsProvider.kt) |

### intellij.performanceTesting.remoteDriver.xml

[`intellij.performanceTesting.remoteDriver.xml`](%gh-ic%/plugins/performanceTesting/remote-driver/resources/intellij.performanceTesting.remoteDriver.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.jetbrains.performancePlugin.remotedriver.textExtractorExtension](https://jb.gg/ipe?extensions=com.jetbrains.performancePlugin.remotedriver.textExtractorExtension) | [`TextExtractorExtension`](%gh-ic%/plugins/performanceTesting/remote-driver/src/com/jetbrains/performancePlugin/remotedriver/dataextractor/TextExtractorExtension.kt) |
| [com.jetbrains.performancePlugin.remotedriver.xpathDataModelExtension](https://jb.gg/ipe?extensions=com.jetbrains.performancePlugin.remotedriver.xpathDataModelExtension) | [`XpathDataModelExtension`](%gh-ic%/plugins/performanceTesting/remote-driver/src/com/jetbrains/performancePlugin/remotedriver/xpath/XpathDataModelExtension.kt) |

### intellij.platform.coverage.xml

[`intellij.platform.coverage.xml`](%gh-ic%/plugins/coverage-common/resources/intellij.platform.coverage.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.coverageEngine](https://jb.gg/ipe?extensions=com.intellij.coverageEngine) | [`CoverageEngine`](%gh-ic%/plugins/coverage-common/src/com/intellij/coverage/CoverageEngine.java) |
| [com.intellij.coverageModifiedFilesFilterFactory](https://jb.gg/ipe?extensions=com.intellij.coverageModifiedFilesFilterFactory) ![Internal][internal] | [`ModifiedFilesFilterFactory`](%gh-ic%/plugins/coverage-common/src/com/intellij/coverage/filters/ModifiedFilesFilterFactory.kt) |
| [com.intellij.coverageOptions](https://jb.gg/ipe?extensions=com.intellij.coverageOptions) ![Project-Level][project-level] | [`CoverageOptions`](%gh-ic%/plugins/coverage-common/src/com/intellij/coverage/CoverageOptions.java) |
| [com.intellij.coverageRunner](https://jb.gg/ipe?extensions=com.intellij.coverageRunner) | [`CoverageRunner`](%gh-ic%/plugins/coverage-common/src/com/intellij/coverage/CoverageRunner.java) |

### intellij.pycharm.community.ide.impl.xml

[`intellij.pycharm.community.ide.impl.xml`](%gh-ic%/python/ide/impl/resources/intellij.pycharm.community.ide.impl.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [Pythonid.miscFileType](https://jb.gg/ipe?extensions=Pythonid.miscFileType) | [`MiscFileType`](%gh-ic%/python/ide/impl/src/com/intellij/pycharm/community/ide/impl/miscProject/MiscFileType.kt) |

### intellij.python.parser.xml

[`intellij.python.parser.xml`](%gh-ic%/python/python-parser/resources/intellij.python.parser.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [Pythonid.dialectsTokenSetContributor](https://jb.gg/ipe?extensions=Pythonid.dialectsTokenSetContributor) | [`PythonDialectsTokenSetContributor`](%gh-ic%/python/python-parser/src/com/jetbrains/python/PythonDialectsTokenSetContributor.java) |

### intellij.python.syntax.xml

[`intellij.python.syntax.xml`](%gh-ic%/python/python-syntax/resources/intellij.python.syntax.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [Pythonid.pyAnnotator](https://jb.gg/ipe?extensions=Pythonid.pyAnnotator) ![Experimental][experimental] | [`PyAnnotatorBase`](%gh-ic%/python/python-syntax-core/src/com/jetbrains/python/validation/PyAnnotatorBase.java) |

### intellij.searchEverywhereMl.ranking.core.xml

[`intellij.searchEverywhereMl.ranking.core.xml`](%gh-ic%/plugins/search-everywhere-ml/ranking/core/resources/intellij.searchEverywhereMl.ranking.core.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.searcheverywhere.ml.rankingModelLoader](https://jb.gg/ipe?extensions=com.intellij.searcheverywhere.ml.rankingModelLoader) | [`SearchEverywhereMLRankingModelLoader`](%gh-ic%/plugins/search-everywhere-ml/ranking/core/src/com/intellij/searchEverywhereMl/ranking/core/model/SearchEverywhereMLRankingModelLoader.kt) |
| [com.intellij.searcheverywhere.ml.searchEverywhereElementFeaturesProvider](https://jb.gg/ipe?extensions=com.intellij.searcheverywhere.ml.searchEverywhereElementFeaturesProvider) ![Internal][internal] | [`SearchEverywhereElementFeaturesProvider`](%gh-ic%/plugins/search-everywhere-ml/ranking/core/src/com/intellij/searchEverywhereMl/ranking/core/features/SearchEverywhereElementFeaturesProvider.kt) |

### intellij.searchEverywhereMl.ranking.ext.xml

[`intellij.searchEverywhereMl.ranking.ext.xml`](%gh-ic%/plugins/search-everywhere-ml/ranking/ext/resources/intellij.searchEverywhereMl.ranking.ext.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.searchEverywhereMl.searchEverywhereElementKeyProvider](https://jb.gg/ipe?extensions=com.intellij.searchEverywhereMl.searchEverywhereElementKeyProvider) ![Internal][internal] | [`SearchEverywhereElementKeyProvider`](%gh-ic%/plugins/search-everywhere-ml/ranking/ext/src/com/intellij/searchEverywhereMl/ranking/ext/SearchEverywhereElementKeyProvider.kt) |

### intellij.toml.json.xml

[`intellij.toml.json.xml`](%gh-ic%/plugins/toml/json/src/main/resources/intellij.toml.json.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.toml.ide.json.tomlJsonSchemaCompletionFileFilter](https://jb.gg/ipe?extensions=org.toml.ide.json.tomlJsonSchemaCompletionFileFilter) | [`TomlJsonSchemaCompletionFileFilter`](%gh-ic%/plugins/toml/json/src/main/kotlin/org/toml/ide/json/TomlJsonSchemaCompletionFileFilter.kt) |

### intellij.vcs.git.xml

[`intellij.vcs.git.xml`](%gh-ic%/plugins/git4idea/resources/intellij.vcs.git.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [Git4Idea.GitCheckinExplicitMovementProvider](https://jb.gg/ipe?extensions=Git4Idea.GitCheckinExplicitMovementProvider) | [`GitCheckinExplicitMovementProvider`](%gh-ic%/plugins/git4idea/src/git4idea/checkin/GitCheckinExplicitMovementProvider.java) |
| [Git4Idea.GitHttpAuthDataProvider](https://jb.gg/ipe?extensions=Git4Idea.GitHttpAuthDataProvider) | [`GitHttpAuthDataProvider`](%gh-ic%/plugins/git4idea/src/git4idea/remote/GitHttpAuthDataProvider.java) |
| [Git4Idea.gitAnnotationPerformanceListener](https://jb.gg/ipe?extensions=Git4Idea.gitAnnotationPerformanceListener) ![Internal][internal] | [`GitAnnotationPerformanceListener`](%gh-ic%/plugins/git4idea/src/git4idea/annotate/GitAnnotationPerformanceListener.kt) |
| [Git4Idea.gitCurrentBranchPresenter](https://jb.gg/ipe?extensions=Git4Idea.gitCurrentBranchPresenter) | [`GitCurrentBranchPresenter`](%gh-ic%/plugins/git4idea/src/git4idea/ui/branch/GitCurrentBranchPresenter.kt) |
| [Git4Idea.gitFetchHandler](https://jb.gg/ipe?extensions=Git4Idea.gitFetchHandler) | [`GitFetchHandler`](%gh-ic%/plugins/git4idea/src/git4idea/fetch/GitFetchHandler.kt) |
| [Git4Idea.gitPostUpdateHandler](https://jb.gg/ipe?extensions=Git4Idea.gitPostUpdateHandler) | [`GitPostUpdateHandler`](%gh-ic%/plugins/git4idea/src/git4idea/update/GitPostUpdateHandler.kt) |
| [Git4Idea.gitProtectedBranchProvider](https://jb.gg/ipe?extensions=Git4Idea.gitProtectedBranchProvider) | [`GitProtectedBranchProvider`](%gh-ic%/plugins/git4idea/src/git4idea/config/GitProtectedBranchProvider.kt) |
| [Git4Idea.gitPushNotificationCustomizer](https://jb.gg/ipe?extensions=Git4Idea.gitPushNotificationCustomizer) ![Internal][internal] ![Project-Level][project-level] | [`GitPushNotificationCustomizer`](%gh-ic%/plugins/git4idea/src/git4idea/push/GitPushNotificationCustomizer.kt) |
| [Git4Idea.gitRawAnnotationProvider](https://jb.gg/ipe?extensions=Git4Idea.gitRawAnnotationProvider) ![Experimental][experimental] ![Project-Level][project-level] | [`GitRawAnnotationProvider`](%gh-ic%/plugins/git4idea/src/git4idea/annotate/GitAnnotationProvider.java) |
| [Git4Idea.gitRepositoryHostingService](https://jb.gg/ipe?extensions=Git4Idea.gitRepositoryHostingService) | [`GitRepositoryHostingService`](%gh-ic%/plugins/git4idea/src/git4idea/remote/GitRepositoryHostingService.java) |
| [Git4Idea.instantGitTokenProvider](https://jb.gg/ipe?extensions=Git4Idea.instantGitTokenProvider) ![Experimental][experimental] ![Internal][internal] | [`InstantGitTokenProvider`](%gh-ic%/plugins/git4idea/src/git4idea/instant/InstantGitTokenProvider.kt) |

### JavaAnalysisPlugin.xml

[`JavaAnalysisPlugin.xml`](%gh-ic%/java/java-analysis-impl/src/META-INF/JavaAnalysisPlugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.allowedApiFilter](https://jb.gg/ipe?extensions=com.intellij.allowedApiFilter) | [`AllowedApiFilterExtension`](%gh-ic%/java/java-analysis-impl/src/com/intellij/psi/impl/AllowedApiFilterExtension.java) |
| [com.intellij.canBeFinal](https://jb.gg/ipe?extensions=com.intellij.canBeFinal) | [`CanBeFinalHandler`](%gh-ic%/java/java-analysis-impl/src/com/intellij/codeInspection/canBeFinal/CanBeFinalHandler.java) |
| [com.intellij.codeInsight.changeVariableTypeQuickFixProvider](https://jb.gg/ipe?extensions=com.intellij.codeInsight.changeVariableTypeQuickFixProvider) | [`ChangeVariableTypeQuickFixProvider`](%gh-ic%/java/java-analysis-api/src/com/intellij/codeInsight/quickfix/ChangeVariableTypeQuickFixProvider.java) |
| [com.intellij.codeInsight.implicitSubclassProvider](https://jb.gg/ipe?extensions=com.intellij.codeInsight.implicitSubclassProvider) | [`ImplicitSubclassProvider`](%gh-ic%/java/java-analysis-impl/src/com/intellij/codeInspection/inheritance/ImplicitSubclassProvider.kt) |
| [com.intellij.deadCode](https://jb.gg/ipe?extensions=com.intellij.deadCode) | [`EntryPoint`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/reference/EntryPoint.java) |
| [com.intellij.injectedLanguageJavaReferenceSupplier](https://jb.gg/ipe?extensions=com.intellij.injectedLanguageJavaReferenceSupplier) ![Experimental][experimental] | `n/a` |
| [com.intellij.java.error.fix](https://jb.gg/ipe?extensions=com.intellij.java.error.fix) | [`CommonIntentionAction`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/CommonIntentionAction.java) |
| [com.intellij.javaLanguageLevelPusherCustomizer](https://jb.gg/ipe?extensions=com.intellij.javaLanguageLevelPusherCustomizer) ![Internal][internal] | [`JavaLanguageLevelPusherCustomizer`](%gh-ic%/java/java-analysis-impl/src/com/intellij/openapi/roots/impl/JavaLanguageLevelPusherCustomizer.java) |
| [com.intellij.lang.jvm.actions.jvmElementActionsFactory](https://jb.gg/ipe?extensions=com.intellij.lang.jvm.actions.jvmElementActionsFactory) | [`JvmElementActionsFactory`](%gh-ic%/java/java-analysis-api/src/com/intellij/lang/jvm/actions/JvmElementActionsFactory.kt) |
| [com.intellij.lang.jvm.annotationPackageSupport](https://jb.gg/ipe?extensions=com.intellij.lang.jvm.annotationPackageSupport) | [`AnnotationPackageSupport`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/annoPackages/AnnotationPackageSupport.java) |
| [com.intellij.lang.jvm.annotations.marker.suppressor](https://jb.gg/ipe?extensions=com.intellij.lang.jvm.annotations.marker.suppressor) | [`NonCodeAnnotationsMarkerSuppressor`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/NonCodeAnnotationsMarkerSuppressor.java) |
| [com.intellij.lang.jvm.ignoreAnnotationParamSupport](https://jb.gg/ipe?extensions=com.intellij.lang.jvm.ignoreAnnotationParamSupport) | [`IgnoreAnnotationParamSupport`](%gh-ic%/java/java-impl-inspections/src/com/intellij/codeInspection/DefaultAnnotationParamInspection.java) |
| [com.intellij.propertyAccessorDetector](https://jb.gg/ipe?extensions=com.intellij.propertyAccessorDetector) | [`PropertyAccessorDetector`](%gh-ic%/java/java-analysis-impl/src/com/intellij/psi/util/PropertyAccessorDetector.java) |
| [com.intellij.visibility](https://jb.gg/ipe?extensions=com.intellij.visibility) | [`VisibilityExtension`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInspection/visibility/VisibilityExtension.java) |

### JavaIndexingPlugin.xml

[`JavaIndexingPlugin.xml`](%gh-ic%/java/java-indexing-impl/src/META-INF/JavaIndexingPlugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.allClassesSearch](https://jb.gg/ipe?extensions=com.intellij.allClassesSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.allOverridingMethodsSearch](https://jb.gg/ipe?extensions=com.intellij.allOverridingMethodsSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.annotatedElementsSearch](https://jb.gg/ipe?extensions=com.intellij.annotatedElementsSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.annotatedPackagesSearch](https://jb.gg/ipe?extensions=com.intellij.annotatedPackagesSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.classInheritorsSearch](https://jb.gg/ipe?extensions=com.intellij.classInheritorsSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.classesWithAnnotatedMembersSearch](https://jb.gg/ipe?extensions=com.intellij.classesWithAnnotatedMembersSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.customPropertyScopeProvider](https://jb.gg/ipe?extensions=com.intellij.customPropertyScopeProvider) | [`CustomPropertyScopeProvider`](%gh-ic%/java/java-indexing-impl/src/com/intellij/psi/impl/search/CustomPropertyScopeProvider.java) |
| [com.intellij.directClassInheritorsSearch](https://jb.gg/ipe?extensions=com.intellij.directClassInheritorsSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.functionalExpressionSearch](https://jb.gg/ipe?extensions=com.intellij.functionalExpressionSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.implicitToStringSearch](https://jb.gg/ipe?extensions=com.intellij.implicitToStringSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.java.shortNamesCache](https://jb.gg/ipe?extensions=com.intellij.java.shortNamesCache) ![Project-Level][project-level] | [`PsiShortNamesCache`](%gh-ic%/java/java-indexing-api/src/com/intellij/psi/search/PsiShortNamesCache.java) |
| [com.intellij.java.staticMethodNamesCache](https://jb.gg/ipe?extensions=com.intellij.java.staticMethodNamesCache) ![Experimental][experimental] ![Project-Level][project-level] | [`JavaStaticMethodNameCache`](%gh-ic%/java/java-indexing-api/src/com/intellij/psi/search/JavaStaticMethodNameCache.java) |
| [com.intellij.methodReferencesSearch](https://jb.gg/ipe?extensions=com.intellij.methodReferencesSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.overridingMethodsSearch](https://jb.gg/ipe?extensions=com.intellij.overridingMethodsSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |

### JavaPlugin.xml

[`JavaPlugin.xml`](%gh-ic%/java/java-impl/src/META-INF/JavaPlugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.OrderRootTypeUI](https://jb.gg/ipe?extensions=com.intellij.OrderRootTypeUI) | [`OrderRootTypeUIFactory`](%gh-ic%/platform/lang-api/src/com/intellij/openapi/roots/ui/OrderRootTypeUIFactory.java) |
| [com.intellij.attachSourcesProvider](https://jb.gg/ipe?extensions=com.intellij.attachSourcesProvider) | [`AttachSourcesProvider`](%gh-ic%/java/openapi/src/com/intellij/codeInsight/AttachSourcesProvider.java) |
| [com.intellij.buildProcess.parametersProvider](https://jb.gg/ipe?extensions=com.intellij.buildProcess.parametersProvider) ![Project-Level][project-level] | [`BuildProcessParametersProvider`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/server/BuildProcessParametersProvider.java) |
| [com.intellij.canBeEmpty](https://jb.gg/ipe?extensions=com.intellij.canBeEmpty) | [`Condition`](%gh-ic%/platform/util/src/com/intellij/openapi/util/Condition.java) |
| [com.intellij.codeInsight.createFieldFromUsageHelper](https://jb.gg/ipe?extensions=com.intellij.codeInsight.createFieldFromUsageHelper) | [`CreateFieldFromUsageHelper`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/daemon/impl/quickfix/CreateFieldFromUsageHelper.java) |
| [com.intellij.codeInsight.externalLibraryResolver](https://jb.gg/ipe?extensions=com.intellij.codeInsight.externalLibraryResolver) | [`ExternalLibraryResolver`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/daemon/quickFix/ExternalLibraryResolver.java) |
| [com.intellij.compilableFileTypesProvider](https://jb.gg/ipe?extensions=com.intellij.compilableFileTypesProvider) ![Project-Level][project-level] | [`CompilableFileTypesProvider`](%gh-ic%/java/compiler/openapi/src/com/intellij/openapi/compiler/CompilableFileTypesProvider.java) |
| [com.intellij.compileServer.plugin](https://jb.gg/ipe?extensions=com.intellij.compileServer.plugin) | `n/a` |
| [com.intellij.compiler](https://jb.gg/ipe?extensions=com.intellij.compiler) ![Deprecated][deprecated] ![Project-Level][project-level] | [`Compiler`](%gh-ic%/java/compiler/openapi/src/com/intellij/openapi/compiler/Compiler.java) |
| [com.intellij.compiler.buildIssueContributor](https://jb.gg/ipe?extensions=com.intellij.compiler.buildIssueContributor) ![Experimental][experimental] | [`BuildIssueContributor`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/progress/BuildIssueContributor.java) |
| [com.intellij.compiler.buildTargetScopeProvider](https://jb.gg/ipe?extensions=com.intellij.compiler.buildTargetScopeProvider) | [`BuildTargetScopeProvider`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/impl/BuildTargetScopeProvider.java) |
| [com.intellij.compiler.inspectionValidator](https://jb.gg/ipe?extensions=com.intellij.compiler.inspectionValidator) ![Project-Level][project-level] | [`InspectionValidator`](%gh-ic%/java/compiler/openapi/src/com/intellij/openapi/compiler/util/InspectionValidator.java) |
| [com.intellij.compiler.isUpToDateCheckConsumer](https://jb.gg/ipe?extensions=com.intellij.compiler.isUpToDateCheckConsumer) | [`IsUpToDateCheckConsumer`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/backwardRefs/IsUpToDateCheckConsumer.java) |
| [com.intellij.compiler.optionsManager](https://jb.gg/ipe?extensions=com.intellij.compiler.optionsManager) | [`CompilerOptionsFilter`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/options/CompilerOptionsFilter.java) |
| [com.intellij.compiler.task](https://jb.gg/ipe?extensions=com.intellij.compiler.task) ![Project-Level][project-level] | [`CompileTask`](%gh-ic%/java/compiler/openapi/src/com/intellij/openapi/compiler/CompileTask.java) |
| [com.intellij.compiler.updateResourcesBuildContributor](https://jb.gg/ipe?extensions=com.intellij.compiler.updateResourcesBuildContributor) | [`UpdateResourcesBuildContributor`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/impl/UpdateResourcesBuildContributor.java) |
| [com.intellij.compilerFactory](https://jb.gg/ipe?extensions=com.intellij.compilerFactory) ![Deprecated][deprecated] ![Removal][removal] ![Project-Level][project-level] | [`CompilerFactory`](%gh-ic%/java/compiler/openapi/src/com/intellij/openapi/compiler/CompilerFactory.java) |
| [com.intellij.configuration.ModuleStructureExtension](https://jb.gg/ipe?extensions=com.intellij.configuration.ModuleStructureExtension) | [`ModuleStructureExtension`](%gh-ic%/java/idea-ui/src/com/intellij/openapi/roots/ui/configuration/projectRoot/ModuleStructureExtension.java) |
| [com.intellij.configuration.moduleStructureFilterExtension](https://jb.gg/ipe?extensions=com.intellij.configuration.moduleStructureFilterExtension) | [`ModuleStructureFilterExtension`](%gh-ic%/java/idea-ui/src/com/intellij/openapi/roots/ui/configuration/projectRoot/ModuleStructureFilterExtension.java) |
| [com.intellij.constructorBodyGenerator](https://jb.gg/ipe?extensions=com.intellij.constructorBodyGenerator) ![Internal][internal] | [`ConstructorBodyGenerator`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/generation/ConstructorBodyGenerator.java) |
| [com.intellij.conversion.rule](https://jb.gg/ipe?extensions=com.intellij.conversion.rule) | [`TypeConversionRule`](%gh-ic%/java/java-impl-refactorings/src/com/intellij/refactoring/typeMigration/rules/TypeConversionRule.java) |
| [com.intellij.debugger.additionalContextProvider](https://jb.gg/ipe?extensions=com.intellij.debugger.additionalContextProvider) ![Internal][internal] | [`AdditionalContextProvider`](%gh-ic%/java/debugger/openapi/src/com/intellij/debugger/engine/evaluation/EvaluationContextWrapper.kt) |
| [com.intellij.debugger.asyncStackTraceProvider](https://jb.gg/ipe?extensions=com.intellij.debugger.asyncStackTraceProvider) | [`AsyncStackTraceProvider`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/engine/AsyncStackTraceProvider.java) |
| [com.intellij.debugger.codeFragmentFactory](https://jb.gg/ipe?extensions=com.intellij.debugger.codeFragmentFactory) | [`CodeFragmentFactory`](%gh-ic%/java/debugger/openapi/src/com/intellij/debugger/engine/evaluation/CodeFragmentFactory.java) |
| [com.intellij.debugger.collectionVisualizer](https://jb.gg/ipe?extensions=com.intellij.debugger.collectionVisualizer) | [`CollectionVisualizer`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/collections/visualizer/CollectionVisualizer.kt) |
| [com.intellij.debugger.compoundRendererProvider](https://jb.gg/ipe?extensions=com.intellij.debugger.compoundRendererProvider) | [`CompoundRendererProvider`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/ui/tree/render/CompoundRendererProvider.java) |
| [com.intellij.debugger.creationStackTraceProvider](https://jb.gg/ipe?extensions=com.intellij.debugger.creationStackTraceProvider) ![Internal][internal] | [`CreationStackTraceProvider`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/engine/CreationStackTraceProvider.kt) |
| [com.intellij.debugger.dfaAssistProvider](https://jb.gg/ipe?extensions=com.intellij.debugger.dfaAssistProvider) | [`DfaAssistProvider`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/engine/dfaassist/DfaAssistProvider.java) |
| [com.intellij.debugger.extraDebugNodesProvider](https://jb.gg/ipe?extensions=com.intellij.debugger.extraDebugNodesProvider) ![Experimental][experimental] | [`ExtraDebugNodesProvider`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/ui/tree/ExtraDebugNodesProvider.kt) |
| [com.intellij.debugger.extraSteppingFilter](https://jb.gg/ipe?extensions=com.intellij.debugger.extraSteppingFilter) | [`ExtraSteppingFilter`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/engine/ExtraSteppingFilter.java) |
| [com.intellij.debugger.frameExtraVarsProvider](https://jb.gg/ipe?extensions=com.intellij.debugger.frameExtraVarsProvider) | [`FrameExtraVariablesProvider`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/engine/FrameExtraVariablesProvider.java) |
| [com.intellij.debugger.javaBreakpointHandlerFactory](https://jb.gg/ipe?extensions=com.intellij.debugger.javaBreakpointHandlerFactory) | [`JavaBreakpointHandlerFactory`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/engine/JavaBreakpointHandlerFactory.java) |
| [com.intellij.debugger.javaDebugAware](https://jb.gg/ipe?extensions=com.intellij.debugger.javaDebugAware) | [`JavaDebugAware`](%gh-ic%/java/debugger/openapi/src/com/intellij/debugger/engine/JavaDebugAware.java) |
| [com.intellij.debugger.jvmSmartStepIntoHandler](https://jb.gg/ipe?extensions=com.intellij.debugger.jvmSmartStepIntoHandler) | [`JvmSmartStepIntoHandler`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/actions/JvmSmartStepIntoHandler.java) |
| [com.intellij.debugger.jvmSteppingCommandProvider](https://jb.gg/ipe?extensions=com.intellij.debugger.jvmSteppingCommandProvider) | [`JvmSteppingCommandProvider`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/impl/JvmSteppingCommandProvider.java) |
| [com.intellij.debugger.nodeNameAdjuster](https://jb.gg/ipe?extensions=com.intellij.debugger.nodeNameAdjuster) | [`NodeDescriptorNameAdjuster`](%gh-ic%/java/debugger/openapi/src/com/intellij/debugger/ui/tree/NodeDescriptorNameAdjuster.java) |
| [com.intellij.debugger.nodeRenderer](https://jb.gg/ipe?extensions=com.intellij.debugger.nodeRenderer) | [`NodeRenderer`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/ui/tree/render/NodeRenderer.java) |
| [com.intellij.debugger.positionManagerFactory](https://jb.gg/ipe?extensions=com.intellij.debugger.positionManagerFactory) | [`PositionManagerFactory`](%gh-ic%/java/debugger/openapi/src/com/intellij/debugger/PositionManagerFactory.java) |
| [com.intellij.debugger.simplePropertyGetterProvider](https://jb.gg/ipe?extensions=com.intellij.debugger.simplePropertyGetterProvider) | [`SimplePropertyGetterProvider`](%gh-ic%/java/debugger/openapi/src/com/intellij/debugger/engine/SimplePropertyGetterProvider.java) |
| [com.intellij.debugger.sourcePositionHighlighter](https://jb.gg/ipe?extensions=com.intellij.debugger.sourcePositionHighlighter) ![DumbAware][dumb-aware] | [`SourcePositionHighlighter`](%gh-ic%/java/debugger/openapi/src/com/intellij/debugger/engine/SourcePositionHighlighter.java) |
| [com.intellij.debugger.sourcePositionProvider](https://jb.gg/ipe?extensions=com.intellij.debugger.sourcePositionProvider) | [`SourcePositionProvider`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/engine/SourcePositionProvider.java) |
| [com.intellij.debugger.syntheticProvider](https://jb.gg/ipe?extensions=com.intellij.debugger.syntheticProvider) | [`SyntheticTypeComponentProvider`](%gh-ic%/java/debugger/openapi/src/com/intellij/debugger/engine/SyntheticTypeComponentProvider.java) |
| [com.intellij.debuggerClassFilterProvider](https://jb.gg/ipe?extensions=com.intellij.debuggerClassFilterProvider) | [`DebuggerClassFilterProvider`](%gh-ic%/java/openapi/src/com/intellij/ui/classFilter/DebuggerClassFilterProvider.java) |
| [com.intellij.debuggerEditorTextProvider](https://jb.gg/ipe?extensions=com.intellij.debuggerEditorTextProvider) | [`EditorTextProvider`](%gh-ic%/java/debugger/impl/src/com/intellij/debugger/impl/EditorTextProvider.java) |
| [com.intellij.documentationDelegateProvider](https://jb.gg/ipe?extensions=com.intellij.documentationDelegateProvider) | [`DocumentationDelegateProvider`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/javadoc/DocumentationDelegateProvider.java) |
| [com.intellij.encapsulateFields.Helper](https://jb.gg/ipe?extensions=com.intellij.encapsulateFields.Helper) | [`EncapsulateFieldHelper`](%gh-ic%/java/openapi/src/com/intellij/refactoring/encapsulateFields/EncapsulateFieldHelper.java) |
| [com.intellij.exceptionFilter](https://jb.gg/ipe?extensions=com.intellij.exceptionFilter) | [`ExceptionFilterFactory`](%gh-ic%/java/execution/openapi/src/com/intellij/execution/filters/ExceptionFilterFactory.java) |
| [com.intellij.execution.applicationRunLineMarkerHider](https://jb.gg/ipe?extensions=com.intellij.execution.applicationRunLineMarkerHider) ![DumbAware][dumb-aware] | [`ApplicationRunLineMarkerHider`](%gh-ic%/java/execution/openapi/src/com/intellij/execution/ApplicationRunLineMarkerHider.java) |
| [com.intellij.externalAnnotationsArtifactsResolver](https://jb.gg/ipe?extensions=com.intellij.externalAnnotationsArtifactsResolver) | [`ExternalAnnotationsArtifactsResolver`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/ExternalAnnotationsArtifactsResolver.java) |
| [com.intellij.framework.type](https://jb.gg/ipe?extensions=com.intellij.framework.type) ![DumbAware][dumb-aware] | [`FrameworkTypeEx`](%gh-ic%/java/idea-ui/src/com/intellij/framework/FrameworkTypeEx.java) |
| [com.intellij.frameworkSupport](https://jb.gg/ipe?extensions=com.intellij.frameworkSupport) | [`FrameworkSupportProvider`](%gh-ic%/platform/lang-api/src/com/intellij/ide/util/frameworkSupport/FrameworkSupportProvider.java) |
| [com.intellij.frameworkSupportCommunicator](https://jb.gg/ipe?extensions=com.intellij.frameworkSupportCommunicator) | [`FrameworkSupportCommunicator`](%gh-ic%/java/idea-ui/src/com/intellij/ide/util/newProjectWizard/impl/FrameworkSupportCommunicator.java) |
| [com.intellij.generateAccessorProvider](https://jb.gg/ipe?extensions=com.intellij.generateAccessorProvider) ![Obsolete][obsolete] | [`NotNullFunction`](%gh-ic%/platform/util/src/com/intellij/util/NotNullFunction.java) |
| [com.intellij.generation.toStringClassFilter](https://jb.gg/ipe?extensions=com.intellij.generation.toStringClassFilter) | [`GenerateToStringClassFilter`](%gh-ic%/java/java-impl/generate-to-string/org/jetbrains/generate/tostring/GenerateToStringClassFilter.java) |
| [com.intellij.getterSetterProvider](https://jb.gg/ipe?extensions=com.intellij.getterSetterProvider) | [`GetterSetterPrototypeProvider`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/generation/GetterSetterPrototypeProvider.java) |
| [com.intellij.gotoByName.defaultProvider.ignoreLanguage](https://jb.gg/ipe?extensions=com.intellij.gotoByName.defaultProvider.ignoreLanguage) ![Internal][internal] | `n/a` |
| [com.intellij.hierarchy.referenceProcessor](https://jb.gg/ipe?extensions=com.intellij.hierarchy.referenceProcessor) | [`CallReferenceProcessor`](%gh-ic%/java/openapi/src/com/intellij/ide/hierarchy/call/CallReferenceProcessor.java) |
| [com.intellij.jarRepositoryAuthenticationDataProvider](https://jb.gg/ipe?extensions=com.intellij.jarRepositoryAuthenticationDataProvider) ![Experimental][experimental] | [`JarRepositoryAuthenticationDataProvider`](%gh-ic%/java/idea-ui/src/com/intellij/jarRepository/JarRepositoryAuthenticationDataProvider.kt) |
| [com.intellij.java.changeSignature.converter](https://jb.gg/ipe?extensions=com.intellij.java.changeSignature.converter) ![Experimental][experimental] | [`JavaChangeInfoConverter`](%gh-ic%/java/java-impl/src/com/intellij/refactoring/changeSignature/JavaChangeInfoConverter.java) |
| [com.intellij.java.compiler](https://jb.gg/ipe?extensions=com.intellij.java.compiler) ![Project-Level][project-level] | [`BackendCompiler`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/impl/javaCompiler/BackendCompiler.java) |
| [com.intellij.java.consoleDecorator](https://jb.gg/ipe?extensions=com.intellij.java.consoleDecorator) ![Experimental][experimental] | [`JavaConsoleDecorator`](%gh-ic%/java/execution/openapi/src/com/intellij/execution/application/JavaConsoleDecorator.java) |
| [com.intellij.java.effectively.final.fixer](https://jb.gg/ipe?extensions=com.intellij.java.effectively.final.fixer) ![Internal][internal] | [`EffectivelyFinalFixer`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/daemon/impl/quickfix/makefinal/EffectivelyFinalFixer.java) |
| [com.intellij.java.externalAnnotation](https://jb.gg/ipe?extensions=com.intellij.java.externalAnnotation) | [`AnnotationProvider`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/externalAnnotation/AnnotationProvider.java) |
| [com.intellij.java.externalAnnotation.locationProvider](https://jb.gg/ipe?extensions=com.intellij.java.externalAnnotation.locationProvider) | [`AnnotationsLocationProvider`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/externalAnnotation/location/AnnotationsLocationProvider.java) |
| [com.intellij.java.inspection.bulkMethodInfo](https://jb.gg/ipe?extensions=com.intellij.java.inspection.bulkMethodInfo) | [`BulkMethodInfoProvider`](%gh-ic%/java/java-impl/src/com/intellij/codeInspection/bulkOperation/BulkMethodInfoProvider.java) |
| [com.intellij.java.programPatcher](https://jb.gg/ipe?extensions=com.intellij.java.programPatcher) | [`JavaProgramPatcher`](%gh-ic%/java/execution/openapi/src/com/intellij/execution/runners/JavaProgramPatcher.java) |
| [com.intellij.java.refactoring.chainCallExtractor](https://jb.gg/ipe?extensions=com.intellij.java.refactoring.chainCallExtractor) | [`ChainCallExtractor`](%gh-ic%/java/java-impl/src/com/intellij/refactoring/chainCall/ChainCallExtractor.java) |
| [com.intellij.javaDocNotNecessary](https://jb.gg/ipe?extensions=com.intellij.javaDocNotNecessary) | [`Condition`](%gh-ic%/platform/util/src/com/intellij/openapi/util/Condition.java) |
| [com.intellij.javaExpressionSurrounder](https://jb.gg/ipe?extensions=com.intellij.javaExpressionSurrounder) | [`JavaExpressionSurrounder`](%gh-ic%/java/openapi/src/com/intellij/codeInsight/generation/surroundWith/JavaExpressionSurrounder.java) |
| [com.intellij.jpsServerAuthExtension](https://jb.gg/ipe?extensions=com.intellij.jpsServerAuthExtension) | [`JpsServerAuthExtension`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/cache/client/JpsServerAuthExtension.kt) |
| [com.intellij.jreProvider](https://jb.gg/ipe?extensions=com.intellij.jreProvider) | [`JreProvider`](%gh-ic%/java/execution/impl/src/com/intellij/execution/ui/JreProvider.java) |
| [com.intellij.junitPatcher](https://jb.gg/ipe?extensions=com.intellij.junitPatcher) | [`JUnitPatcher`](%gh-ic%/java/execution/openapi/src/com/intellij/execution/JUnitPatcher.java) |
| [com.intellij.junitRecognizer](https://jb.gg/ipe?extensions=com.intellij.junitRecognizer) | [`JUnitRecognizer`](%gh-ic%/java/execution/openapi/src/com/intellij/execution/JUnitRecognizer.java) |
| [com.intellij.jvm.exceptionFilter](https://jb.gg/ipe?extensions=com.intellij.jvm.exceptionFilter) ![Experimental][experimental] | [`JvmExceptionOccurrenceFilter`](%gh-ic%/java/execution/openapi/src/com/intellij/execution/filters/JvmExceptionOccurrenceFilter.java) |
| [com.intellij.jvm.logging](https://jb.gg/ipe?extensions=com.intellij.jvm.logging) ![Internal][internal] | [`JvmLogger`](%gh-ic%/java/java-impl/src/com/intellij/lang/logging/JvmLogger.kt) |
| [com.intellij.languageCompilerRefAdapter](https://jb.gg/ipe?extensions=com.intellij.languageCompilerRefAdapter) | [`LanguageCompilerRefAdapter`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/backwardRefs/LanguageCompilerRefAdapter.java) |
| [com.intellij.languageCompilerRefAdapter.directInheritorProvider](https://jb.gg/ipe?extensions=com.intellij.languageCompilerRefAdapter.directInheritorProvider) ![Project-Level][project-level] | [`DirectInheritorProvider`](%gh-ic%/java/compiler/impl/src/com/intellij/compiler/backwardRefs/DirectInheritorProvider.kt) |
| [com.intellij.library.dependencyScopeSuggester](https://jb.gg/ipe?extensions=com.intellij.library.dependencyScopeSuggester) | [`LibraryDependencyScopeSuggester`](%gh-ic%/java/java-impl/src/com/intellij/openapi/roots/LibraryDependencyScopeSuggester.java) |
| [com.intellij.library.javaSourceRootDetector](https://jb.gg/ipe?extensions=com.intellij.library.javaSourceRootDetector) | [`RootDetector`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/roots/libraries/ui/RootDetector.java) |
| [com.intellij.methodImplementor](https://jb.gg/ipe?extensions=com.intellij.methodImplementor) | [`MethodImplementor`](%gh-ic%/java/openapi/src/com/intellij/codeInsight/MethodImplementor.java) |
| [com.intellij.moduleConfigurable](https://jb.gg/ipe?extensions=com.intellij.moduleConfigurable) ![Removal][removal] | [`ModuleConfigurable`](%gh-ic%/java/idea-ui/src/com/intellij/openapi/roots/ui/configuration/projectRoot/ModuleConfigurable.java) |
| [com.intellij.newProjectWizard.java.buildSystem](https://jb.gg/ipe?extensions=com.intellij.newProjectWizard.java.buildSystem) | [`BuildSystemJavaNewProjectWizard`](%gh-ic%/java/idea-ui/src/com/intellij/ide/projectWizard/generators/BuildSystemJavaNewProjectWizard.kt) |
| [com.intellij.openapi.projectRoots.externalJavaConfigurationProvider](https://jb.gg/ipe?extensions=com.intellij.openapi.projectRoots.externalJavaConfigurationProvider) | [`ExternalJavaConfigurationProvider`](%gh-ic%/java/java-impl/src/com/intellij/openapi/projectRoots/impl/ExternalJavaConfigurationProvider.kt) |
| [com.intellij.overrideImplementsAnnotationsHandler](https://jb.gg/ipe?extensions=com.intellij.overrideImplementsAnnotationsHandler) | [`OverrideImplementsAnnotationsHandler`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/generation/OverrideImplementsAnnotationsHandler.java) |
| [com.intellij.packaging.artifactPropertiesProvider](https://jb.gg/ipe?extensions=com.intellij.packaging.artifactPropertiesProvider) | [`ArtifactPropertiesProvider`](%gh-ic%/java/compiler/openapi/src/com/intellij/packaging/artifacts/ArtifactPropertiesProvider.java) |
| [com.intellij.packaging.artifactType](https://jb.gg/ipe?extensions=com.intellij.packaging.artifactType) | [`ArtifactType`](%gh-ic%/java/compiler/openapi/src/com/intellij/packaging/artifacts/ArtifactType.java) |
| [com.intellij.packaging.elementType](https://jb.gg/ipe?extensions=com.intellij.packaging.elementType) | [`PackagingElementType`](%gh-ic%/java/compiler/openapi/src/com/intellij/packaging/elements/PackagingElementType.java) |
| [com.intellij.packaging.sourceItemFilter](https://jb.gg/ipe?extensions=com.intellij.packaging.sourceItemFilter) | [`PackagingSourceItemFilter`](%gh-ic%/java/compiler/openapi/src/com/intellij/packaging/ui/PackagingSourceItemFilter.java) |
| [com.intellij.packaging.sourceItemProvider](https://jb.gg/ipe?extensions=com.intellij.packaging.sourceItemProvider) | [`PackagingSourceItemsProvider`](%gh-ic%/java/compiler/openapi/src/com/intellij/packaging/ui/PackagingSourceItemsProvider.java) |
| [com.intellij.predefinedMigrationMapProvider](https://jb.gg/ipe?extensions=com.intellij.predefinedMigrationMapProvider) | [`PredefinedMigrationProvider`](%gh-ic%/java/java-impl-refactorings/src/com/intellij/refactoring/migration/PredefinedMigrationProvider.java) |
| [com.intellij.projectImportBuilder](https://jb.gg/ipe?extensions=com.intellij.projectImportBuilder) | [`ProjectImportBuilder`](%gh-ic%/java/idea-ui/src/com/intellij/projectImport/ProjectImportBuilder.java) |
| [com.intellij.projectImportProvider](https://jb.gg/ipe?extensions=com.intellij.projectImportProvider) | [`ProjectImportProvider`](%gh-ic%/java/idea-ui/src/com/intellij/projectImport/ProjectImportProvider.java) |
| [com.intellij.projectModelModifier](https://jb.gg/ipe?extensions=com.intellij.projectModelModifier) ![Project-Level][project-level] | [`JavaProjectModelModifier`](%gh-ic%/java/java-impl/src/com/intellij/openapi/roots/JavaProjectModelModifier.java) |
| [com.intellij.projectStructureConfigurableFilter](https://jb.gg/ipe?extensions=com.intellij.projectStructureConfigurableFilter) | [`ProjectStructureConfigurableFilter`](%gh-ic%/java/idea-ui/src/com/intellij/openapi/roots/ui/configuration/ProjectStructureConfigurableFilter.java) |
| [com.intellij.projectStructureDetector](https://jb.gg/ipe?extensions=com.intellij.projectStructureDetector) | [`ProjectStructureDetector`](%gh-ic%/java/idea-ui/src/com/intellij/ide/util/projectWizard/importSources/ProjectStructureDetector.java) |
| [com.intellij.projectStructureValidator](https://jb.gg/ipe?extensions=com.intellij.projectStructureValidator) | [`ProjectStructureValidator`](%gh-ic%/java/idea-ui/src/com/intellij/openapi/roots/ui/configuration/projectRoot/daemon/ProjectStructureValidator.java) |
| [com.intellij.projectWizard.projectCategory](https://jb.gg/ipe?extensions=com.intellij.projectWizard.projectCategory) | [`ProjectCategory`](%gh-ic%/java/idea-ui/src/com/intellij/ide/projectWizard/ProjectCategory.java) |
| [com.intellij.refactoring.introduceParameterMethodUsagesProcessor](https://jb.gg/ipe?extensions=com.intellij.refactoring.introduceParameterMethodUsagesProcessor) | [`IntroduceParameterMethodUsagesProcessor`](%gh-ic%/java/java-impl-refactorings/src/com/intellij/refactoring/introduceParameter/IntroduceParameterMethodUsagesProcessor.java) |
| [com.intellij.refactoring.moveAllClassesInFileHandler](https://jb.gg/ipe?extensions=com.intellij.refactoring.moveAllClassesInFileHandler) | [`MoveAllClassesInFileHandler`](%gh-ic%/java/java-impl-refactorings/src/com/intellij/refactoring/move/moveClassesOrPackages/MoveAllClassesInFileHandler.java) |
| [com.intellij.refactoring.moveClassHandler](https://jb.gg/ipe?extensions=com.intellij.refactoring.moveClassHandler) | [`MoveClassHandler`](%gh-ic%/java/java-impl-refactorings/src/com/intellij/refactoring/move/moveClassesOrPackages/MoveClassHandler.java) |
| [com.intellij.refactoring.moveClassToInnerHandler](https://jb.gg/ipe?extensions=com.intellij.refactoring.moveClassToInnerHandler) ![Internal][internal] | [`MoveClassToInnerHandler`](%gh-ic%/java/java-impl-refactorings/src/com/intellij/refactoring/move/moveClassesOrPackages/MoveClassToInnerHandler.java) |
| [com.intellij.refactoring.moveInnerClassUsagesHandler](https://jb.gg/ipe?extensions=com.intellij.refactoring.moveInnerClassUsagesHandler) | [`MoveInnerClassUsagesHandler`](%gh-ic%/java/java-impl-refactorings/src/com/intellij/refactoring/move/moveInner/MoveInnerClassUsagesHandler.java) |
| [com.intellij.refactoring.moveInnerHandler](https://jb.gg/ipe?extensions=com.intellij.refactoring.moveInnerHandler) | [`MoveInnerHandler`](%gh-ic%/java/java-impl-refactorings/src/com/intellij/refactoring/move/moveInner/MoveInnerHandler.java) |
| [com.intellij.refactoring.moveMemberHandler](https://jb.gg/ipe?extensions=com.intellij.refactoring.moveMemberHandler) | [`MoveMemberHandler`](%gh-ic%/java/java-impl-refactorings/src/com/intellij/refactoring/move/moveMembers/MoveMemberHandler.java) |
| [com.intellij.refactoring.overrideMethodProcessor](https://jb.gg/ipe?extensions=com.intellij.refactoring.overrideMethodProcessor) ![Internal][internal] | [`OverrideMethodsProcessor`](%gh-ic%/java/java-impl-refactorings/src/com/intellij/refactoring/OverrideMethodsProcessor.java) |
| [com.intellij.refactoring.pullUpHelperFactory](https://jb.gg/ipe?extensions=com.intellij.refactoring.pullUpHelperFactory) | [`PullUpHelperFactory`](%gh-ic%/java/openapi/src/com/intellij/refactoring/memberPullUp/PullUpHelperFactory.java) |
| [com.intellij.refactoring.safeDelete.JavaSafeDeleteDelegate](https://jb.gg/ipe?extensions=com.intellij.refactoring.safeDelete.JavaSafeDeleteDelegate) | [`JavaSafeDeleteDelegate`](%gh-ic%/java/openapi/src/com/intellij/refactoring/safeDelete/JavaSafeDeleteDelegate.java) |
| [com.intellij.repositoryLibrary](https://jb.gg/ipe?extensions=com.intellij.repositoryLibrary) | `n/a` |
| [com.intellij.runConfigurationExtension](https://jb.gg/ipe?extensions=com.intellij.runConfigurationExtension) | [`RunConfigurationExtension`](%gh-ic%/java/execution/impl/src/com/intellij/execution/RunConfigurationExtension.java) |
| [com.intellij.safeDelete.importSearcher](https://jb.gg/ipe?extensions=com.intellij.safeDelete.importSearcher) ![Internal][internal] | [`ImportSearcher`](%gh-ic%/java/java-impl-refactorings/src/com/intellij/refactoring/safeDelete/ImportSearcher.java) |
| [com.intellij.sdkEditorAdditionalOptionsProvider](https://jb.gg/ipe?extensions=com.intellij.sdkEditorAdditionalOptionsProvider) | [`SdkEditorAdditionalOptionsProvider`](%gh-ic%/java/idea-ui/src/com/intellij/openapi/SdkEditorAdditionalOptionsProvider.java) |
| [com.intellij.starter.moduleImporter](https://jb.gg/ipe?extensions=com.intellij.starter.moduleImporter) | [`StarterModuleImporter`](%gh-ic%/java/idea-ui/src/com/intellij/ide/starters/StarterModuleImporter.kt) |
| [com.intellij.testGenerator](https://jb.gg/ipe?extensions=com.intellij.testGenerator) | [`TestGenerator`](%gh-ic%/java/java-impl/src/com/intellij/testIntegration/createTest/TestGenerator.java) |
| [com.intellij.unscrambleSupport](https://jb.gg/ipe?extensions=com.intellij.unscrambleSupport) | [`UnscrambleSupport`](%gh-ic%/java/openapi/src/com/intellij/unscramble/UnscrambleSupport.java) |
| [com.intellij.unusedDeclarationFixProvider](https://jb.gg/ipe?extensions=com.intellij.unusedDeclarationFixProvider) | [`UnusedDeclarationFixProvider`](%gh-ic%/java/java-analysis-api/src/com/intellij/codeInspection/reference/UnusedDeclarationFixProvider.java) |
| [com.intellij.variableTypeCalculator](https://jb.gg/ipe?extensions=com.intellij.variableTypeCalculator) | [`VariableTypeCalculator`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/template/macro/VariableTypeCalculator.java) |

### JavaPsiPlugin.xml

[`JavaPsiPlugin.xml`](%gh-ic%/java/java-psi-impl/src/META-INF/JavaPsiPlugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.annotationSupport](https://jb.gg/ipe?extensions=com.intellij.annotationSupport) | [`PsiAnnotationSupport`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/PsiAnnotationSupport.java) |
| [com.intellij.classTypePointerFactory](https://jb.gg/ipe?extensions=com.intellij.classTypePointerFactory) | [`ClassTypePointerFactory`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/ClassTypePointerFactory.java) |
| [com.intellij.codeStyle.ReferenceAdjuster](https://jb.gg/ipe?extensions=com.intellij.codeStyle.ReferenceAdjuster) | [`ReferenceAdjuster`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/codeStyle/ReferenceAdjuster.java) |
| [com.intellij.constantExpressionEvaluator](https://jb.gg/ipe?extensions=com.intellij.constantExpressionEvaluator) | [`ConstantExpressionEvaluator`](%gh-ic%/java/java-psi-impl/src/com/intellij/psi/impl/ConstantExpressionEvaluator.java) |
| [com.intellij.custom.exception.handler](https://jb.gg/ipe?extensions=com.intellij.custom.exception.handler) | [`CustomExceptionHandler`](%gh-ic%/java/java-psi-impl/src/com/intellij/codeInsight/CustomExceptionHandler.java) |
| [com.intellij.customJavadocTagProvider](https://jb.gg/ipe?extensions=com.intellij.customJavadocTagProvider) | [`CustomJavadocTagProvider`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/javadoc/CustomJavadocTagProvider.java) |
| [com.intellij.deepestSuperMethodsSearch](https://jb.gg/ipe?extensions=com.intellij.deepestSuperMethodsSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.expressionConverter](https://jb.gg/ipe?extensions=com.intellij.expressionConverter) | [`ExpressionConverter`](%gh-ic%/java/java-psi-impl/src/com/intellij/psi/impl/ExpressionConverter.java) |
| [com.intellij.generation.topLevelFactory](https://jb.gg/ipe?extensions=com.intellij.generation.topLevelFactory) | [`JVMElementFactoryProvider`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/JVMElementFactoryProvider.java) |
| [com.intellij.importFilter](https://jb.gg/ipe?extensions=com.intellij.importFilter) | [`ImportFilter`](%gh-ic%/java/java-psi-api/src/com/intellij/codeInsight/ImportFilter.java) |
| [com.intellij.java.elementFinder](https://jb.gg/ipe?extensions=com.intellij.java.elementFinder) ![Project-Level][project-level] ![DumbAware][dumb-aware] | [`PsiElementFinder`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/PsiElementFinder.java) |
| [com.intellij.java.languageFeatureProvider](https://jb.gg/ipe?extensions=com.intellij.java.languageFeatureProvider) | [`LanguageFeatureProvider`](%gh-ic%/java/java-psi-api/src/com/intellij/pom/java/LanguageFeatureProvider.java) |
| [com.intellij.javaCompilerConfigurationProxy](https://jb.gg/ipe?extensions=com.intellij.javaCompilerConfigurationProxy) | [`JavaCompilerConfigurationProxy`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/JavaCompilerConfigurationProxy.java) |
| [com.intellij.javaMainMethodProvider](https://jb.gg/ipe?extensions=com.intellij.javaMainMethodProvider) ![DumbAware][dumb-aware] | [`JavaMainMethodProvider`](%gh-ic%/java/java-psi-api/src/com/intellij/codeInsight/runner/JavaMainMethodProvider.java) |
| [com.intellij.javaModuleSystem](https://jb.gg/ipe?extensions=com.intellij.javaModuleSystem) | [`JavaModuleSystem`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/JavaModuleSystem.java) |
| [com.intellij.javadocTagInfo](https://jb.gg/ipe?extensions=com.intellij.javadocTagInfo) ![Project-Level][project-level] | [`JavadocTagInfo`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/javadoc/JavadocTagInfo.java) |
| [com.intellij.jvm.declarationSearcher](https://jb.gg/ipe?extensions=com.intellij.jvm.declarationSearcher) | [`JvmDeclarationSearcher`](%gh-ic%/java/java-psi-api/src/com/intellij/lang/jvm/source/JvmDeclarationSearcher.java) |
| [com.intellij.jvm.elementProvider](https://jb.gg/ipe?extensions=com.intellij.jvm.elementProvider) ![Project-Level][project-level] ![DumbAware][dumb-aware] | [`JvmElementProvider`](%gh-ic%/java/java-psi-api/src/com/intellij/lang/jvm/facade/JvmElementProvider.java) |
| [com.intellij.lang.dumb.mode.supported](https://jb.gg/ipe?extensions=com.intellij.lang.dumb.mode.supported) ![Experimental][experimental] | [`JvmLanguageDumbAware`](%gh-ic%/java/java-psi-api/src/com/intellij/lang/jvm/JvmLanguageDumbAware.java) |
| [com.intellij.lang.inferredAnnotationProvider](https://jb.gg/ipe?extensions=com.intellij.lang.inferredAnnotationProvider) ![Project-Level][project-level] | [`InferredAnnotationProvider`](%gh-ic%/java/java-psi-api/src/com/intellij/codeInsight/InferredAnnotationProvider.java) |
| [com.intellij.lang.psiAugmentProvider](https://jb.gg/ipe?extensions=com.intellij.lang.psiAugmentProvider) ![DumbAware][dumb-aware] | [`PsiAugmentProvider`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/augment/PsiAugmentProvider.java) |
| [com.intellij.psi.classFileDecompiler](https://jb.gg/ipe?extensions=com.intellij.psi.classFileDecompiler) | `Decompiler` |
| [com.intellij.psi.clsCustomNavigationPolicy](https://jb.gg/ipe?extensions=com.intellij.psi.clsCustomNavigationPolicy) | [`ClsCustomNavigationPolicy`](%gh-ic%/java/java-psi-impl/src/com/intellij/psi/impl/compiled/ClsCustomNavigationPolicy.java) |
| [com.intellij.superMethodsSearch](https://jb.gg/ipe?extensions=com.intellij.superMethodsSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.testFramework](https://jb.gg/ipe?extensions=com.intellij.testFramework) ![DumbAware][dumb-aware] | [`TestFramework`](%gh-ic%/platform/core-api/src/com/intellij/testIntegration/TestFramework.java) |
| [org.jetbrains.uast.analysis.uastAnalysisPlugin](https://jb.gg/ipe?extensions=org.jetbrains.uast.analysis.uastAnalysisPlugin) ![Experimental][experimental] | [`UastAnalysisPlugin`](%gh-ic%/uast/uast-common/src/org/jetbrains/uast/analysis/UastAnalysisPlugin.kt) |
| [org.jetbrains.uast.evaluation.uastEvaluatorExtension](https://jb.gg/ipe?extensions=org.jetbrains.uast.evaluation.uastEvaluatorExtension) ![Experimental][experimental] | [`UEvaluatorExtension`](%gh-ic%/uast/uast-common/src/org/jetbrains/uast/evaluation/UEvaluatorExtension.kt) |
| [org.jetbrains.uast.generate.uastCodeGenerationPlugin](https://jb.gg/ipe?extensions=org.jetbrains.uast.generate.uastCodeGenerationPlugin) ![Experimental][experimental] | [`UastCodeGenerationPlugin`](%gh-ic%/uast/uast-common-ide/src/org/jetbrains/uast/generate/UastCodeGenerationPlugin.kt) |
| [org.jetbrains.uast.uastLanguagePlugin](https://jb.gg/ipe?extensions=org.jetbrains.uast.uastLanguagePlugin) | [`UastLanguagePlugin`](%gh-ic%/uast/uast-common/src/org/jetbrains/uast/UastLanguagePlugin.kt) |

### jps.xml

[`jps.xml`](%gh-ic%/plugins/kotlin/plugin/common/resources/META-INF/jps.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.idePlatformKind](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idePlatformKind) ![Non-Dynamic][non-dynamic] | `IdePlatformKind` |
| [org.jetbrains.kotlin.idePlatformKindResolution](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idePlatformKindResolution) ![Non-Dynamic][non-dynamic] | [`IdePlatformKindResolution`](%gh-ic%/plugins/kotlin/base/fe10/analysis/src/org/jetbrains/kotlin/caches/resolve/IdePlatformKindResolution.kt) |
| [org.jetbrains.kotlin.idePlatformKindTooling](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idePlatformKindTooling) ![Non-Dynamic][non-dynamic] | [`IdePlatformKindTooling`](%gh-ic%/plugins/kotlin/base/code-insight/src/org/jetbrains/kotlin/idea/base/codeInsight/tooling/IdePlatformKindTooling.kt) |

### JUnit

[`JUnit`](%gh-ic%/plugins/junit/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.junitListener](https://jb.gg/ipe?extensions=com.intellij.junitListener) | [`IDEAJUnitListener`](%gh-ic%/java/java-runtime/src/com/intellij/rt/execution/junit/IDEAJUnitListener.java) |
| [com.intellij.testDiscoveryProducer](https://jb.gg/ipe?extensions=com.intellij.testDiscoveryProducer) | [`TestDiscoveryProducer`](%gh-ic%/java/execution/impl/src/com/intellij/execution/testDiscovery/TestDiscoveryProducer.java) |

### jvm-debugger.xml

[`jvm-debugger.xml`](%gh-ic%/plugins/kotlin/plugin/common/resources/META-INF/jvm-debugger.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.debugger.dexBytecodeInspector](https://jb.gg/ipe?extensions=com.intellij.debugger.dexBytecodeInspector) | [`DexBytecodeInspector`](%gh-ic%/plugins/kotlin/jvm-debugger/core/src/org/jetbrains/kotlin/idea/debugger/core/DexBytecodeInspector.kt) |
| [com.intellij.debugger.kotlinStackFrameValueContributor](https://jb.gg/ipe?extensions=com.intellij.debugger.kotlinStackFrameValueContributor) | [`KotlinStackFrameValueContributor`](%gh-ic%/plugins/kotlin/jvm-debugger/core/src/org/jetbrains/kotlin/idea/debugger/core/stackFrame/KotlinStackFrameValueContributor.kt) |
| [org.jetbrains.kotlin.idea.debugger.base.util.classNameCalculator](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.debugger.base.util.classNameCalculator) | [`ClassNameCalculator`](%gh-ic%/plugins/kotlin/jvm-debugger/base/util/src/org/jetbrains/kotlin/idea/debugger/base/util/ClassNameCalculator.kt) |

### kotlin-core-fe10.xml

[`kotlin-core-fe10.xml`](%gh-ic%/plugins/kotlin/plugin/k1/resources/META-INF/kotlin-core-fe10.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.classImportFilter](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.classImportFilter) | [`ClassImportFilter`](%gh-ic%/plugins/kotlin/idea/src/org/jetbrains/kotlin/idea/util/ClassImportFilter.kt) |
| [org.jetbrains.kotlin.idea.caches.resolve.resolveOptimizingOptionsProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.caches.resolve.resolveOptimizingOptionsProvider) | [`ResolveOptimizingOptionsProvider`](%gh-ic%/plugins/kotlin/base/fe10/analysis/src/org/jetbrains/kotlin/idea/caches/resolve/ResolveOptimizingOptionsProvider.kt) |
| [org.jetbrains.kotlin.kotlinIndicesHelperExtension](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.kotlinIndicesHelperExtension) ![Project-Level][project-level] | [`KotlinIndicesHelperExtension`](%gh-ic%/plugins/kotlin/base/fe10/analysis/src/org/jetbrains/kotlin/idea/core/extension/KotlinIndicesHelperExtension.kt) |
| [org.jetbrains.kotlin.quickFixContributor](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.quickFixContributor) | [`QuickFixContributor`](%gh-ic%/plugins/kotlin/base/fe10/code-insight/src/org/jetbrains/kotlin/idea/quickfix/QuickFixContributor.kt) |

### kotlin-core.xml

[`kotlin-core.xml`](%gh-ic%/plugins/kotlin/plugin/common/resources/META-INF/kotlin-core.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.kotlin.autoImportCallableWeigher](https://jb.gg/ipe?extensions=com.intellij.kotlin.autoImportCallableWeigher) ![Internal][internal] | [`KotlinAutoImportCallableWeigher`](%gh-ic%/plugins/kotlin/code-insight/api/src/org/jetbrains/kotlin/idea/codeinsight/api/classic/quickfixes/KotlinAutoImportCallableWeigher.kt) |
| [org.jetbrains.kotlin.analysis.additionalKDocResolutionProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.analysis.additionalKDocResolutionProvider) | `AdditionalKDocResolutionProvider` |
| [org.jetbrains.kotlin.buildSystemDependencyManager](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.buildSystemDependencyManager) ![Internal][internal] ![Project-Level][project-level] | [`KotlinBuildSystemDependencyManager`](%gh-ic%/plugins/kotlin/project-configuration/src/org/jetbrains/kotlin/idea/configuration/KotlinBuildSystemDependencyManager.kt) |
| [org.jetbrains.kotlin.buildSystemTypeDetector](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.buildSystemTypeDetector) | [`BuildSystemTypeDetector`](%gh-ic%/plugins/kotlin/base/facet/src/org/jetbrains/kotlin/idea/configuration/BuildSystemType.kt) |
| [org.jetbrains.kotlin.bundledFirCompilerPluginProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.bundledFirCompilerPluginProvider) ![Experimental][experimental] ![Internal][internal] | [`KotlinBundledFirCompilerPluginProvider`](%gh-ic%/plugins/kotlin/bundled-compiler-plugins-support/src/org/jetbrains/kotlin/idea/fir/extensions/KotlinBundledFirCompilerPluginProvider.kt) |
| [org.jetbrains.kotlin.experimentalFeature](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.experimentalFeature) | [`ExperimentalFeature`](%gh-ic%/plugins/kotlin/preferences/src/org/jetbrains/kotlin/idea/configuration/ExperimentalFeatures.kt) |
| [org.jetbrains.kotlin.facetValidatorCreator](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.facetValidatorCreator) ![Non-Dynamic][non-dynamic] | [`KotlinFacetValidatorCreator`](%gh-ic%/plugins/kotlin/base/compiler-configuration-ui/src/org/jetbrains/kotlin/idea/base/compilerPreferences/facet/KotlinFacetValidatorCreator.kt) |
| [org.jetbrains.kotlin.failedToDownloadJpsMavenArtifactSuggestedSolutionsContributor](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.failedToDownloadJpsMavenArtifactSuggestedSolutionsContributor) ![Internal][internal] ![Project-Level][project-level] | [`FailedToDownloadJpsMavenArtifactSuggestedSolutionsContributor`](%gh-ic%/plugins/kotlin/base/plugin/src/org/jetbrains/kotlin/idea/compiler/configuration/FailedToDownloadJpsMavenArtifactSuggestedSolutionsContributor.kt) |
| [org.jetbrains.kotlin.idea.base.platforms.targetPlatformDetector](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.base.platforms.targetPlatformDetector) ![Project-Level][project-level] | [`TargetPlatformDetector`](%gh-ic%/plugins/kotlin/base/facet/src/org/jetbrains/kotlin/idea/base/facet/platform/TargetPlatformDetector.kt) |
| [org.jetbrains.kotlin.idea.base.projectStructure.moduleInfoProviderExtension](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.base.projectStructure.moduleInfoProviderExtension) ![Project-Level][project-level] | [`ModuleInfoProviderExtension`](%gh-ic%/plugins/kotlin/base/project-structure/src/org/jetbrains/kotlin/idea/base/projectStructure/ModuleInfoProvider.kt) |
| [org.jetbrains.kotlin.idea.codeInsight.unambiguousImports](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.codeInsight.unambiguousImports) | [`KotlinAutoImportsFilter`](%gh-ic%/plugins/kotlin/frontend-independent/src/org/jetbrains/kotlin/idea/codeInsight/KotlinAutoImportsFilter.kt) |
| [org.jetbrains.kotlin.idea.testFrameworkProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.testFrameworkProvider) | [`KotlinTestFrameworkProvider`](%gh-ic%/plugins/kotlin/run-configurations/jvm/src/org/jetbrains/kotlin/idea/extensions/KotlinTestFrameworkProvider.kt) |
| [org.jetbrains.kotlin.j2kConverterExtension](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.j2kConverterExtension) | [`J2kConverterExtension`](%gh-ic%/plugins/kotlin/j2k/shared/src/org/jetbrains/kotlin/j2k/J2kConverterExtension.kt) |
| [org.jetbrains.kotlin.j2kPostprocessorExtension](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.j2kPostprocessorExtension) | [`J2kPostprocessorExtension`](%gh-ic%/plugins/kotlin/j2k/shared/src/org/jetbrains/kotlin/j2k/preAndPostprocessorExtension.kt) |
| [org.jetbrains.kotlin.j2kPreprocessorExtension](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.j2kPreprocessorExtension) | [`J2kPreprocessorExtension`](%gh-ic%/plugins/kotlin/j2k/shared/src/org/jetbrains/kotlin/j2k/preAndPostprocessorExtension.kt) |
| [org.jetbrains.kotlin.ktModuleFactory](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.ktModuleFactory) ![Internal][internal] | [`KaModuleFactory`](%gh-ic%/plugins/kotlin/base/project-structure/src/org/jetbrains/kotlin/idea/base/projectStructure/ProjectStructureProviderIdeImpl.kt) |
| [org.jetbrains.kotlin.libraryVersionProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.libraryVersionProvider) ![Internal][internal] | [`KotlinLibraryVersionProvider`](%gh-ic%/plugins/kotlin/project-configuration/src/org/jetbrains/kotlin/idea/configuration/KotlinLibraryVersionProvider.kt) |
| [org.jetbrains.kotlin.newFileHook](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.newFileHook) ![Internal][internal] | [`NewKotlinFileHook`](%gh-ic%/plugins/kotlin/base/project-structure/src/org/jetbrains/kotlin/idea/base/projectStructure/NewKotlinFileHook.kt) |
| [org.jetbrains.kotlin.pluginUpdateVerifier](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.pluginUpdateVerifier) | [`PluginUpdateVerifier`](%gh-ic%/plugins/kotlin/plugin-updater/src/org/jetbrains/kotlin/idea/update/PluginUpdateVerifier.kt) |
| [org.jetbrains.kotlin.projectConfigurator](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.projectConfigurator) | [`KotlinProjectConfigurator`](%gh-ic%/plugins/kotlin/project-configuration/src/org/jetbrains/kotlin/idea/configuration/KotlinProjectConfigurator.kt) |
| [org.jetbrains.kotlin.projectStructureInsightsProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.projectStructureInsightsProvider) ![Internal][internal] | [`ProjectStructureInsightsProvider`](%gh-ic%/plugins/kotlin/base/project-structure/src/org/jetbrains/kotlin/idea/base/projectStructure/ProjectStructureProviderIdeImpl.kt) |
| [org.jetbrains.kotlin.smartEnterProcessorFixer](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.smartEnterProcessorFixer) | [`Fixer`](%gh-ic%/platform/lang-impl/src/com/intellij/lang/SmartEnterProcessorWithFixers.java) |
| [org.jetbrains.kotlin.supportAvailability](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.supportAvailability) | [`KotlinSupportAvailability`](%gh-ic%/plugins/kotlin/code-insight/utils/src/org/jetbrains/kotlin/idea/codeinsight/utils/KotlinSupportAvailability.kt) |

### kotlin.base.code-insight.minimal.xml

[`kotlin.base.code-insight.minimal.xml`](%gh-ic%/plugins/kotlin/base/code-insight/minimal/resource/kotlin.base.code-insight.minimal.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.smartEnterProcessorFixer](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.smartEnterProcessorFixer) | [`Fixer`](%gh-ic%/platform/lang-impl/src/com/intellij/lang/SmartEnterProcessorWithFixers.java) |

### kotlin.base.external-build-system.xml

[`kotlin.base.external-build-system.xml`](%gh-ic%/plugins/kotlin/base/external-build-system/resources/kotlin.base.external-build-system.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.idea.base.externalSystem.kotlinBuildSystemFacade](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.base.externalSystem.kotlinBuildSystemFacade) | [`KotlinBuildSystemFacade`](%gh-ic%/plugins/kotlin/base/external-build-system/src/org/jetbrains/kotlin/idea/base/externalSystem/KotlinBuildSystemFacade.kt) |

### kotlin.gradle.code-insight-common.xml

[`kotlin.gradle.code-insight-common.xml`](%gh-ic%/plugins/kotlin/gradle/code-insight-common/resources/kotlin.gradle.code-insight-common.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.idea.gradleBuildScriptSupport](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.gradleBuildScriptSupport) | [`GradleBuildScriptSupport`](%gh-ic%/plugins/kotlin/gradle/code-insight-common/src/org/jetbrains/kotlin/idea/gradleCodeInsightCommon/GradleBuildScriptSupport.kt) |

### kotlin.gradle.gradle-java

[`kotlin.gradle.gradle-java`](%gh-ic%/plugins/kotlin/gradle/gradle-java/resources/kotlin.gradle.gradle-java.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.gradleProjectImportHandler](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.gradleProjectImportHandler) ![Project-Level][project-level] | [`GradleProjectImportHandler`](%gh-ic%/plugins/kotlin/gradle/gradle-java/src/org/jetbrains/kotlin/idea/gradleJava/configuration/KotlinGradleSourceSetDataService.kt) |
| [org.jetbrains.kotlin.idea.gradleJava.kotlinMultiplatformProducersProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.gradleJava.kotlinMultiplatformProducersProvider) | [`KotlinMultiplatformCommonProducersProvider`](%gh-ic%/plugins/kotlin/gradle/gradle-java/src/org/jetbrains/kotlin/idea/gradleJava/extensions/KotlinMultiplatformCommonProducersProvider.kt) |
| [org.jetbrains.kotlin.mppProjectResolve](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.mppProjectResolve) | [`KotlinMppGradleProjectResolverExtension`](%gh-ic%/plugins/kotlin/gradle/gradle-java/src/org/jetbrains/kotlin/idea/gradleJava/configuration/mpp/KotlinMppGradleProjectResolverExtension.kt) |

### kotlin.gradle.gradle-tooling.xml

[`kotlin.gradle.gradle-tooling.xml`](%gh-ic%/plugins/kotlin/gradle/gradle-tooling/resources/kotlin.gradle.gradle-tooling.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.idea.gradleTooling.serialization.IdeaKotlinSerializationContext](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.gradleTooling.serialization.IdeaKotlinSerializationContext) | `IdeaKotlinSerializationContext` |

### kotlin.gradle.gradle.xml

[`kotlin.gradle.gradle.xml`](%gh-ic%/plugins/kotlin/gradle/gradle/resources/kotlin.gradle.gradle.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.gradleModelFacade](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.gradleModelFacade) | [`KotlinGradleModelFacade`](%gh-ic%/plugins/kotlin/gradle/gradle/src/org/jetbrains/kotlin/idea/gradle/inspections/KotlinGradleModelFacade.java) |
| [org.jetbrains.kotlin.idea.extrasSerialization](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.extrasSerialization) | [`KotlinExtrasSerializationService`](%gh-ic%/plugins/kotlin/gradle/gradle/src/org/jetbrains/kotlin/idea/gradle/configuration/serialize/KotlinExtrasSerializationService.kt) |
| [org.jetbrains.kotlin.kpm.createRoots](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.kpm.createRoots) | [`ContentRootsCreator`](%gh-ic%/plugins/kotlin/gradle/gradle/src/org/jetbrains/kotlin/idea/gradle/configuration/kpm/ContentRootsCreator.kt) |
| [org.jetbrains.kotlin.kpm.moduleInitialize](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.kpm.moduleInitialize) | [`ModuleDataInitializer`](%gh-ic%/plugins/kotlin/gradle/gradle/src/org/jetbrains/kotlin/idea/gradle/configuration/kpm/ModuleDataInitializer.kt) |

### kotlin.highlighting.k2.xml

[`kotlin.highlighting.k2.xml`](%gh-ic%/plugins/kotlin/highlighting/highlighting-k2/resources/kotlin.highlighting.k2.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.callHighlighterExtension](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.callHighlighterExtension) | [`KotlinCallHighlighterExtension`](%gh-ic%/plugins/kotlin/highlighting/highlighting-k2/src/org/jetbrains/kotlin/idea/highlighting/KotlinCallHighlighterExtension.kt) |

### kotlin.highlighting.shared.xml

[`kotlin.highlighting.shared.xml`](%gh-ic%/plugins/kotlin/highlighting/highlighting-shared/resources/kotlin.highlighting.shared.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.beforeResolveHighlightingVisitor](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.beforeResolveHighlightingVisitor) ![Internal][internal] | [`BeforeResolveHighlightingExtension`](%gh-ic%/plugins/kotlin/highlighting/highlighting-minimal/src/org/jetbrains/kotlin/idea/base/highlighting/BeforeResolveHighlightingExtension.kt) |

### kotlin.maven.xml

[`kotlin.maven.xml`](%gh-ic%/plugins/kotlin/maven/resources/kotlin.maven.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.mavenProjectImportHandler](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.mavenProjectImportHandler) ![Project-Level][project-level] | [`MavenProjectImportHandler`](%gh-ic%/plugins/kotlin/maven/src/org/jetbrains/kotlin/idea/maven/KotlinMavenImporter.kt) |

### kotlin.plugin.k2.xml

[`kotlin.plugin.k2.xml`](%gh-ic%/plugins/kotlin/plugin/k2/resources/kotlin.plugin.k2.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.resolveScopeEnlarger](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.resolveScopeEnlarger) ![Non-Dynamic][non-dynamic] | [`KotlinResolveScopeEnlarger`](%gh-ic%/plugins/kotlin/base/project-structure/src/org/jetbrains/kotlin/idea/base/projectStructure/KotlinResolveScopeEnlarger.kt) |

### kotlin.project-wizard.idea.xml

[`kotlin.project-wizard.idea.xml`](%gh-ic%/plugins/kotlin/project-wizard/idea/resources/kotlin.project-wizard.idea.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.newProjectWizard.kotlin.buildSystem](https://jb.gg/ipe?extensions=com.intellij.newProjectWizard.kotlin.buildSystem) | [`BuildSystemKotlinNewProjectWizard`](%gh-ic%/plugins/kotlin/project-wizard/idea/src/org/jetbrains/kotlin/tools/projectWizard/BuildSystemKotlinNewProjectWizard.kt) |
| [org.jetbrains.kotlin.idea.androidSdkProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.androidSdkProvider) | [`AndroidSdkProvider`](%gh-ic%/plugins/kotlin/project-wizard/core/src/org/jetbrains/kotlin/tools/projectWizard/plugins/AndroidSdkProvider.kt) |
| [org.jetbrains.kotlin.idea.ideaWizardService](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.ideaWizardService) ![Project-Level][project-level] | [`IdeaWizardService`](%gh-ic%/plugins/kotlin/project-wizard/idea/src/org/jetbrains/kotlin/tools/projectWizard/wizard/service/IdeaWizardService.kt) |
| [org.jetbrains.kotlin.idea.projectTemplatesProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.projectTemplatesProvider) | [`ProjectTemplatesProvider`](%gh-ic%/plugins/kotlin/project-wizard/core/src/org/jetbrains/kotlin/tools/projectWizard/plugins/projectTemplates/ProjectTemplatesProvider.kt) |

### kotlin.refactorings.k2.xml

[`kotlin.refactorings.k2.xml`](%gh-ic%/plugins/kotlin/refactorings/kotlin.refactorings.k2/resources/kotlin.refactorings.k2.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.changeSignatureConflictFilter](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.changeSignatureConflictFilter) | [`KotlinChangeSignatureConflictFilter`](%gh-ic%/plugins/kotlin/refactorings/kotlin.refactorings.k2/src/org/jetbrains/kotlin/idea/k2/refactoring/changeSignature/KotlinChangeSignatureConflictFilter.kt) |
| [org.jetbrains.kotlin.extractFunctionDescriptorModifier](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.extractFunctionDescriptorModifier) | [`ExtractFunctionDescriptorModifier`](%gh-ic%/plugins/kotlin/refactorings/kotlin.refactorings.k2/src/org/jetbrains/kotlin/idea/k2/refactoring/extractFunction/ExtractFunctionDescriptorModifier.kt) |

### kotlin.searching.k2.xml

[`kotlin.searching.k2.xml`](%gh-ic%/plugins/kotlin/kotlin.searching/resources/kotlin.searching.k2.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.directKotlinClassInheritorsSearch](https://jb.gg/ipe?extensions=com.intellij.directKotlinClassInheritorsSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |

### kotlinx-serialization.xml

[`kotlinx-serialization.xml`](%gh-ic%/plugins/kotlin/compiler-plugins/kotlinx-serialization/common/resources/META-INF/kotlinx-serialization.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.idea.compilerPlugin.kotlinxSerialization.kotlinSerializationEnabledChecker](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.compilerPlugin.kotlinxSerialization.kotlinSerializationEnabledChecker) | [`KotlinSerializationEnabledChecker`](%gh-ic%/plugins/kotlin/compiler-plugins/kotlinx-serialization/common/src/org/jetbrains/kotlin/idea/compilerPlugin/kotlinxSerialization/KotlinSerializationEnabledChecker.kt) |

### light-classes-fe10.xml

[`light-classes-fe10.xml`](%gh-ic%/plugins/kotlin/plugin/k1/resources/META-INF/light-classes-fe10.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.ultraLightClassModifierExtension](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.ultraLightClassModifierExtension) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `UltraLightClassModifierExtension` |

### ManifestSupport.xml

[`ManifestSupport.xml`](%gh-ic%/java/manifest/src/META-INF/ManifestSupport.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.manifest.parser.provider](https://jb.gg/ipe?extensions=com.intellij.manifest.parser.provider) | [`HeaderParserProvider`](%gh-ic%/java/manifest/src/org/jetbrains/lang/manifest/header/HeaderParserProvider.java) |

### org.editorconfig.editorconfigjetbrains

[`org.editorconfig.editorconfigjetbrains`](%gh-ic%/plugins/editorconfig/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [editorconfig.exportProvider](https://jb.gg/ipe?extensions=editorconfig.exportProvider) ![Non-Dynamic][non-dynamic] | [`EditorConfigExportProvider`](%gh-ic%/plugins/editorconfig/src/org/editorconfig/settings/EditorConfigExportProvider.java) |
| [editorconfig.optionDescriptorProvider](https://jb.gg/ipe?extensions=editorconfig.optionDescriptorProvider) ![Non-Dynamic][non-dynamic] | [`EditorConfigOptionDescriptorProvider`](%gh-ic%/plugins/editorconfig/src/org/editorconfig/language/extensions/EditorConfigOptionDescriptorProvider.kt) |

### org.intellij.groovy

[`org.intellij.groovy`](%gh-ic%/plugins/groovy/src/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.newProjectWizard.groovy.buildSystem](https://jb.gg/ipe?extensions=com.intellij.newProjectWizard.groovy.buildSystem) | [`BuildSystemGroovyNewProjectWizard`](%gh-ic%/plugins/groovy/src/org/jetbrains/plugins/groovy/config/wizard/BuildSystemGroovyNewProjectWizard.kt) |
| [org.intellij.groovy.applicabilityProvider](https://jb.gg/ipe?extensions=org.intellij.groovy.applicabilityProvider) ![Experimental][experimental] | [`GroovyApplicabilityProvider`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/extensions/GroovyApplicabilityProvider.java) |
| [org.intellij.groovy.astTransformationSupport](https://jb.gg/ipe?extensions=org.intellij.groovy.astTransformationSupport) ![DumbAware][dumb-aware] | [`AstTransformationSupport`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/transformations/AstTransformationSupport.java) |
| [org.intellij.groovy.callTypeCalculator](https://jb.gg/ipe?extensions=org.intellij.groovy.callTypeCalculator) ![Experimental][experimental] | [`GrCallTypeCalculator`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/typing/GrCallTypeCalculator.kt) |
| [org.intellij.groovy.classDescriptor](https://jb.gg/ipe?extensions=org.intellij.groovy.classDescriptor) | `n/a` |
| [org.intellij.groovy.closureCompleter](https://jb.gg/ipe?extensions=org.intellij.groovy.closureCompleter) | [`ClosureCompleter`](%gh-ic%/plugins/groovy/src/org/jetbrains/plugins/groovy/lang/completion/ClosureCompleter.java) |
| [org.intellij.groovy.closureMissingMethodContributor](https://jb.gg/ipe?extensions=org.intellij.groovy.closureMissingMethodContributor) | [`ClosureMissingMethodContributor`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/resolve/ClosureMissingMethodContributor.java) |
| [org.intellij.groovy.completionCustomizer](https://jb.gg/ipe?extensions=org.intellij.groovy.completionCustomizer) ![Experimental][experimental] | [`GroovyCompletionCustomizer`](%gh-ic%/plugins/groovy/src/org/jetbrains/plugins/groovy/lang/completion/api/GroovyCompletionCustomizer.kt) |
| [org.intellij.groovy.configSlurperSupport](https://jb.gg/ipe?extensions=org.intellij.groovy.configSlurperSupport) | [`ConfigSlurperSupport`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/configSlurper/ConfigSlurperSupport.java) |
| [org.intellij.groovy.convertToJava.customMethodInvocator](https://jb.gg/ipe?extensions=org.intellij.groovy.convertToJava.customMethodInvocator) | [`CustomMethodInvocator`](%gh-ic%/plugins/groovy/src/org/jetbrains/plugins/groovy/refactoring/convertToJava/invocators/CustomMethodInvocator.java) |
| [org.intellij.groovy.customAnnotationChecker](https://jb.gg/ipe?extensions=org.intellij.groovy.customAnnotationChecker) | [`CustomAnnotationChecker`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/annotator/checkers/CustomAnnotationChecker.java) |
| [org.intellij.groovy.delegatesToProvider](https://jb.gg/ipe?extensions=org.intellij.groovy.delegatesToProvider) | [`GrDelegatesToProvider`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/resolve/delegatesTo/GrDelegatesToProvider.java) |
| [org.intellij.groovy.elementFilter](https://jb.gg/ipe?extensions=org.intellij.groovy.elementFilter) ![Experimental][experimental] | [`GroovyElementFilter`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/GroovyElementFilter.kt) |
| [org.intellij.groovy.expectedPackageNameProvider](https://jb.gg/ipe?extensions=org.intellij.groovy.expectedPackageNameProvider) | [`ExpectedPackageNameProvider`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/resolve/ExpectedPackageNameProvider.kt) |
| [org.intellij.groovy.expectedTypesContributor](https://jb.gg/ipe?extensions=org.intellij.groovy.expectedTypesContributor) | [`GroovyExpectedTypesContributor`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/psi/expectedTypes/GroovyExpectedTypesContributor.java) |
| [org.intellij.groovy.gdslScriptProvider](https://jb.gg/ipe?extensions=org.intellij.groovy.gdslScriptProvider) | [`GdslScriptProvider`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/dsl/GdslScriptProvider.java) |
| [org.intellij.groovy.gdslTopLevelProvider](https://jb.gg/ipe?extensions=org.intellij.groovy.gdslTopLevelProvider) ![Non-Dynamic][non-dynamic] | [`GdslMembersProvider`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/dsl/dsltop/GdslMembersProvider.java) |
| [org.intellij.groovy.groovyFrameworkConfigNotification](https://jb.gg/ipe?extensions=org.intellij.groovy.groovyFrameworkConfigNotification) | [`GroovyFrameworkConfigNotification`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/annotator/GroovyFrameworkConfigNotification.java) |
| [org.intellij.groovy.groovySourceFolderDetector](https://jb.gg/ipe?extensions=org.intellij.groovy.groovySourceFolderDetector) | [`GroovySourceFolderDetector`](%gh-ic%/plugins/groovy/src/org/jetbrains/plugins/groovy/actions/GroovySourceFolderDetector.java) |
| [org.intellij.groovy.importContributor](https://jb.gg/ipe?extensions=org.intellij.groovy.importContributor) | [`GrImportContributor`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/resolve/imports/GrImportContributor.java) |
| [org.intellij.groovy.inlayHintFilter](https://jb.gg/ipe?extensions=org.intellij.groovy.inlayHintFilter) | [`GroovyInlayHintFilter`](%gh-ic%/plugins/groovy/src/org/jetbrains/plugins/groovy/editor/GroovyInlayHintFilter.java) |
| [org.intellij.groovy.inlineASTTransformationSupport](https://jb.gg/ipe?extensions=org.intellij.groovy.inlineASTTransformationSupport) ![Experimental][experimental] | [`GroovyInlineASTTransformationSupport`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/transformations/inline/GroovyInlineASTTransformationSupport.kt) |
| [org.intellij.groovy.inspectionDisabler](https://jb.gg/ipe?extensions=org.intellij.groovy.inspectionDisabler) | [`FileTypeInspectionDisabler`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/codeInspection/FileTypeInspectionDisabler.kt) |
| [org.intellij.groovy.mapContentProvider](https://jb.gg/ipe?extensions=org.intellij.groovy.mapContentProvider) | [`GroovyMapContentProvider`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/extensions/GroovyMapContentProvider.java) |
| [org.intellij.groovy.membersContributor](https://jb.gg/ipe?extensions=org.intellij.groovy.membersContributor) | [`NonCodeMembersContributor`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/resolve/NonCodeMembersContributor.java) |
| [org.intellij.groovy.methodComparator](https://jb.gg/ipe?extensions=org.intellij.groovy.methodComparator) | [`GrMethodComparator`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/resolve/GrMethodComparator.java) |
| [org.intellij.groovy.methodDescriptor](https://jb.gg/ipe?extensions=org.intellij.groovy.methodDescriptor) | `n/a` |
| [org.intellij.groovy.methodMayBeStaticInspectionFilter](https://jb.gg/ipe?extensions=org.intellij.groovy.methodMayBeStaticInspectionFilter) | [`GrMethodMayBeStaticInspectionFilter`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/codeInspection/declaration/GrMethodMayBeStaticInspectionFilter.java) |
| [org.intellij.groovy.namedArgumentProvider](https://jb.gg/ipe?extensions=org.intellij.groovy.namedArgumentProvider) | [`GroovyNamedArgumentProvider`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/extensions/GroovyNamedArgumentProvider.java) |
| [org.intellij.groovy.overloadResolver](https://jb.gg/ipe?extensions=org.intellij.groovy.overloadResolver) | [`GroovyOverloadResolver`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/resolve/api/GroovyOverloadResolver.java) |
| [org.intellij.groovy.positionManagerDelegate](https://jb.gg/ipe?extensions=org.intellij.groovy.positionManagerDelegate) | [`ScriptPositionManagerHelper`](%gh-ic%/plugins/groovy/src/org/jetbrains/plugins/groovy/extensions/debugger/ScriptPositionManagerHelper.java) |
| [org.intellij.groovy.psiEnhancerCategory](https://jb.gg/ipe?extensions=org.intellij.groovy.psiEnhancerCategory) ![Non-Dynamic][non-dynamic] | [`PsiEnhancerCategory`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/dsl/psi/PsiEnhancerCategory.java) |
| [org.intellij.groovy.referenceTypeEnhancer](https://jb.gg/ipe?extensions=org.intellij.groovy.referenceTypeEnhancer) | [`GrReferenceTypeEnhancer`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/psi/typeEnhancers/GrReferenceTypeEnhancer.java) |
| [org.intellij.groovy.renameHelper](https://jb.gg/ipe?extensions=org.intellij.groovy.renameHelper) | [`GrRenameHelper`](%gh-ic%/plugins/groovy/src/org/jetbrains/plugins/groovy/refactoring/rename/GrRenameHelper.java) |
| [org.intellij.groovy.scriptTypeDetector](https://jb.gg/ipe?extensions=org.intellij.groovy.scriptTypeDetector) | [`GroovyScriptTypeDetector`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/extensions/GroovyScriptTypeDetector.java) |
| [org.intellij.groovy.signatureHintProcessor](https://jb.gg/ipe?extensions=org.intellij.groovy.signatureHintProcessor) | [`SignatureHintProcessor`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/psi/typeEnhancers/SignatureHintProcessor.java) |
| [org.intellij.groovy.typeAugmenter](https://jb.gg/ipe?extensions=org.intellij.groovy.typeAugmenter) | [`TypeAugmenter`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/psi/dataFlow/types/TypeAugmenter.kt) |
| [org.intellij.groovy.typeCalculator](https://jb.gg/ipe?extensions=org.intellij.groovy.typeCalculator) | [`GrTypeCalculator`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/typing/GrTypeCalculator.java) |
| [org.intellij.groovy.typeConverter](https://jb.gg/ipe?extensions=org.intellij.groovy.typeConverter) | [`GrTypeConverter`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/psi/typeEnhancers/GrTypeConverter.java) |
| [org.intellij.groovy.unresolvedHighlightFileFilter](https://jb.gg/ipe?extensions=org.intellij.groovy.unresolvedHighlightFileFilter) | [`GroovyUnresolvedHighlightFileFilter`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/extensions/GroovyUnresolvedHighlightFileFilter.java) |
| [org.intellij.groovy.unresolvedHighlightFilter](https://jb.gg/ipe?extensions=org.intellij.groovy.unresolvedHighlightFilter) | [`GroovyUnresolvedHighlightFilter`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/extensions/GroovyUnresolvedHighlightFilter.java) |
| [org.intellij.groovy.variableEnhancer](https://jb.gg/ipe?extensions=org.intellij.groovy.variableEnhancer) | [`GrVariableEnhancer`](%gh-ic%/plugins/groovy/groovy-psi/src/org/jetbrains/plugins/groovy/lang/psi/typeEnhancers/GrVariableEnhancer.java) |

### org.intellij.intelliLang

[`org.intellij.intelliLang`](%gh-ic%/plugins/IntelliLang/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.intellij.intelliLang.injectionConfig](https://jb.gg/ipe?extensions=org.intellij.intelliLang.injectionConfig) | `n/a` |
| [org.intellij.intelliLang.languageSupport](https://jb.gg/ipe?extensions=org.intellij.intelliLang.languageSupport) | [`LanguageInjectionSupport`](%gh-ic%/plugins/IntelliLang/src/org/intellij/plugins/intelliLang/inject/LanguageInjectionSupport.java) |

### org.intellij.plugins.markdown

[`org.intellij.plugins.markdown`](%gh-ic%/plugins/markdown/core/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.intellij.markdown.additionalFenceLanguageSuggester](https://jb.gg/ipe?extensions=org.intellij.markdown.additionalFenceLanguageSuggester) ![Internal][internal] | [`AdditionalFenceLanguageSuggester`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/injection/aliases/AdditionalFenceLanguageSuggester.kt) |
| [org.intellij.markdown.browserPreviewExtensionProvider](https://jb.gg/ipe?extensions=org.intellij.markdown.browserPreviewExtensionProvider) | [`Provider`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/extensions/MarkdownBrowserPreviewExtension.kt) |
| [org.intellij.markdown.fenceGeneratingProvider](https://jb.gg/ipe?extensions=org.intellij.markdown.fenceGeneratingProvider) ![Obsolete][obsolete] ![Internal][internal] | [`CodeFenceGeneratingProvider`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/extensions/CodeFenceGeneratingProvider.kt) |
| [org.intellij.markdown.fenceLanguageProvider](https://jb.gg/ipe?extensions=org.intellij.markdown.fenceLanguageProvider) | [`CodeFenceLanguageProvider`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/injection/CodeFenceLanguageProvider.java) |
| [org.intellij.markdown.flavourProvider](https://jb.gg/ipe?extensions=org.intellij.markdown.flavourProvider) ![Experimental][experimental] | [`MarkdownFlavourProvider`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/lang/parser/MarkdownFlavourProvider.kt) |
| [org.intellij.markdown.html.panel.provider](https://jb.gg/ipe?extensions=org.intellij.markdown.html.panel.provider) | [`MarkdownHtmlPanelProvider`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/ui/preview/MarkdownHtmlPanelProvider.java) |
| [org.intellij.markdown.markdownExportProvider](https://jb.gg/ipe?extensions=org.intellij.markdown.markdownExportProvider) ![Experimental][experimental] | [`MarkdownExportProvider`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/fileActions/export/MarkdownExportProvider.kt) |
| [org.intellij.markdown.markdownRunner](https://jb.gg/ipe?extensions=org.intellij.markdown.markdownRunner) | [`MarkdownRunner`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/extensions/jcef/commandRunner/MarkdownRunner.kt) |
| [org.intellij.markdown.previewStylesProvider](https://jb.gg/ipe?extensions=org.intellij.markdown.previewStylesProvider) ![Internal][internal] | [`MarkdownPreviewStylesProvider`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/ui/preview/MarkdownPreviewStylesProvider.kt) |

### org.jetbrains.debugger.streams

[`org.jetbrains.debugger.streams`](%gh-ic%/plugins/stream-debugger/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.debugger.streams.librarySupport](https://jb.gg/ipe?extensions=org.jetbrains.debugger.streams.librarySupport) | [`LibrarySupportProvider`](%gh-ic%/plugins/stream-debugger/src/com/intellij/debugger/streams/lib/LibrarySupportProvider.java) |

### org.jetbrains.idea.eclipse

[`org.jetbrains.idea.eclipse`](%gh-ic%/plugins/eclipse/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.idea.eclipse.natureImporter](https://jb.gg/ipe?extensions=org.jetbrains.idea.eclipse.natureImporter) | [`EclipseNatureImporter`](%gh-ic%/plugins/eclipse/src/org/jetbrains/idea/eclipse/importWizard/EclipseNatureImporter.java) |

### org.jetbrains.idea.maven

[`org.jetbrains.idea.maven`](%gh-ic%/plugins/maven/src/main/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.idea.maven.additional.importing.settings](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.additional.importing.settings) | [`AdditionalMavenImportingSettings`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/project/AdditionalMavenImportingSettings.java) |
| [org.jetbrains.idea.maven.archetypesProvider](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.archetypesProvider) | [`MavenArchetypesProvider`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/indices/MavenArchetypesProvider.java) |
| [org.jetbrains.idea.maven.artifactBuilder](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.artifactBuilder) | [`MavenArtifactBuilder`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/execution/build/MavenArtifactBuilder.java) |
| [org.jetbrains.idea.maven.compiler](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.compiler) | [`MavenCompilerExtension`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/importing/MavenCompilerExtension.java) |
| [org.jetbrains.idea.maven.executionEnvironmentProvider](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.executionEnvironmentProvider) | [`MavenExecutionEnvironmentProvider`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/execution/build/MavenExecutionEnvironmentProvider.java) |
| [org.jetbrains.idea.maven.importer](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.importer) ![Deprecated][deprecated] | [`MavenImporter`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/importing/MavenImporter.java) |
| [org.jetbrains.idea.maven.importing.afterImportConfigurator](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.importing.afterImportConfigurator) ![Experimental][experimental] | [`MavenAfterImportConfigurator`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/importing/MavenConfigurators.kt) |
| [org.jetbrains.idea.maven.importing.workspaceConfigurator](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.importing.workspaceConfigurator) ![Experimental][experimental] | [`MavenWorkspaceConfigurator`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/importing/MavenConfigurators.kt) |
| [org.jetbrains.idea.maven.log.import.parser](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.log.import.parser) ![Experimental][experimental] | [`MavenImportLoggedEventParser`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/externalSystemIntegration/output/importproject/MavenImportLoggedEventParser.java) |
| [org.jetbrains.idea.maven.log.parser](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.log.parser) ![Experimental][experimental] | [`MavenLoggedEventParser`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/externalSystemIntegration/output/MavenLoggedEventParser.java) |
| [org.jetbrains.idea.maven.log.spy.parser](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.log.spy.parser) ![Experimental][experimental] | [`MavenSpyLoggedEventParser`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/externalSystemIntegration/output/MavenSpyLoggedEventParser.java) |
| [org.jetbrains.idea.maven.manifestImporter](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.manifestImporter) | [`ManifestImporter`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/importing/ManifestImporter.java) |
| [org.jetbrains.idea.maven.mavenAdditionalHighlighter](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.mavenAdditionalHighlighter) ![Experimental][experimental] | [`MavenAdditionalHightligher`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/dom/MavenAdditionalHightligher.kt) |
| [org.jetbrains.idea.maven.mavenRemoteConnectionCreator](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.mavenRemoteConnectionCreator) | [`MavenRemoteConnectionCreator`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/execution/MavenRemoteConnectionCreator.kt) |
| [org.jetbrains.idea.maven.mavenServerSupportFactory](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.mavenServerSupportFactory) ![Internal][internal] | [`MavenRemoteProcessSupportFactory`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/server/MavenRemoteProcessSupportFactory.java) |
| [org.jetbrains.idea.maven.pluginDescriptor](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.pluginDescriptor) ![Internal][internal] | `n/a` |
| [org.jetbrains.idea.maven.projectResolutionContributor](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.projectResolutionContributor) ![Internal][internal] | [`MavenProjectResolutionContributor`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/project/MavenProjectResolver.kt) |
| [org.jetbrains.idea.maven.remotePathTransformerFactory](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.remotePathTransformerFactory) | [`RemotePathTransformerFactory`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/server/RemotePathTransformerFactory.java) |
| [org.jetbrains.idea.maven.repositoryProvider](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.repositoryProvider) | [`MavenRepositoryProvider`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/indices/MavenRepositoryProvider.java) |
| [org.jetbrains.idea.maven.targetConfigurationExtension](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.targetConfigurationExtension) ![Experimental][experimental] | [`TargetConfigurationMavenExtension`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/execution/target/TargetConfigurationMavenExtension.java) |
| [org.jetbrains.idea.maven.versionAwareMavenSupport](https://jb.gg/ipe?extensions=org.jetbrains.idea.maven.versionAwareMavenSupport) ![Internal][internal] | [`MavenVersionAwareSupportExtension`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/MavenVersionAwareSupportExtension.java) |

### org.jetbrains.idea.reposearch

[`org.jetbrains.idea.reposearch`](%gh-ic%/plugins/repository-search/src/main/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.idea.reposearch.provider](https://jb.gg/ipe?extensions=org.jetbrains.idea.reposearch.provider) ![Experimental][experimental] | [`DependencySearchProvidersFactory`](%gh-ic%/plugins/repository-search/src/main/java/org/jetbrains/idea/reposearch/DependencySearchProvidersFactory.java) |

### org.jetbrains.kotlin

[`org.jetbrains.kotlin`](%gh-ic%/plugins/kotlin/plugin/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.supportsKotlinPluginMode](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.supportsKotlinPluginMode) | `n/a` |

### org.jetbrains.plugins.gitlab

[`org.jetbrains.plugins.gitlab`](%gh-ic%/plugins/gitlab/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [intellij.vcs.gitlab.titleGenerator](https://jb.gg/ipe?extensions=intellij.vcs.gitlab.titleGenerator) ![Internal][internal] | [`GitLabTitleGeneratorExtension`](%gh-ic%/plugins/gitlab/src/org/jetbrains/plugins/gitlab/mergerequest/ui/create/model/GitLabMergeRequestCreateTitleGenerationViewModel.kt) |

### org.jetbrains.plugins.gradle

[`org.jetbrains.plugins.gradle`](%gh-ic%/plugins/gradle/java/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.plugins.gradle.buildTasksProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.buildTasksProvider) | [`GradleBuildTasksProvider`](%gh-ic%/plugins/gradle/java/src/execution/build/GradleBuildTasksProvider.java) |
| [org.jetbrains.plugins.gradle.dslInspectionProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.dslInspectionProvider) ![Internal][internal] | [`GradleDslInspectionProvider`](%gh-ic%/plugins/gradle/java/src/codeInspection/GradleDslInspectionProvider.kt) |
| [org.jetbrains.plugins.gradle.externallyHandledExtensions](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.externallyHandledExtensions) ![Internal][internal] | [`GradleVersionCatalogHandler`](%gh-ic%/plugins/gradle/java/src/service/resolve/GradleVersionCatalogHandler.kt) |
| [org.jetbrains.plugins.gradle.frameworkSupport](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.frameworkSupport) | [`GradleFrameworkSupportProvider`](%gh-ic%/plugins/gradle/java/src/frameworkSupport/GradleFrameworkSupportProvider.java) |
| [org.jetbrains.plugins.gradle.initScriptGenerator](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.initScriptGenerator) ![Experimental][experimental] | [`GradleInitScriptGenerator`](%gh-ic%/plugins/gradle/java/src/execution/build/GradleInitScriptGenerator.kt) |
| [org.jetbrains.plugins.gradle.kotlinDslFrameworkSupport](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.kotlinDslFrameworkSupport) | [`KotlinDslGradleFrameworkSupportProvider`](%gh-ic%/plugins/gradle/java/src/frameworkSupport/KotlinDslGradleFrameworkSupportProvider.java) |
| [org.jetbrains.plugins.gradle.testTasksProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.gradle.testTasksProvider) | [`GradleTestTasksProvider`](%gh-ic%/plugins/gradle/java/src/execution/test/runner/GradleTestTasksProvider.java) |

### org.jetbrains.plugins.textmate

[`org.jetbrains.plugins.textmate`](%gh-ic%/plugins/textmate/src/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.textmate.bundleProvider](https://jb.gg/ipe?extensions=com.intellij.textmate.bundleProvider) ![Non-Dynamic][non-dynamic] | [`TextMateBundleProvider`](%gh-ic%/plugins/textmate/src/org/jetbrains/plugins/textmate/api/TextMateBundleProvider.kt) |

### org.jetbrains.plugins.yaml

[`org.jetbrains.plugins.yaml`](%gh-ic%/plugins/yaml/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.yaml.customStructureViewFactory](https://jb.gg/ipe?extensions=com.intellij.yaml.customStructureViewFactory) | [`YAMLCustomStructureViewFactory`](%gh-ic%/plugins/yaml/src/org/jetbrains/yaml/structureView/YAMLCustomStructureViewFactory.java) |
| [com.intellij.yaml.tagRecogniser](https://jb.gg/ipe?extensions=com.intellij.yaml.tagRecogniser) ![Experimental][experimental] | [`YamlTagRecogniser`](%gh-ic%/plugins/yaml/editing/src/org/jetbrains/yaml/psi/YamlTagRecogniser.kt) |

### parcelize.xml

[`parcelize.xml`](%gh-ic%/plugins/kotlin/compiler-plugins/parcelize/common/resources/META-INF/parcelize.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.idea.compilerPlugin.parcelize.availabilityProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.idea.compilerPlugin.parcelize.availabilityProvider) ![Project-Level][project-level] | [`ParcelizeAvailabilityProvider`](%gh-ic%/plugins/kotlin/compiler-plugins/parcelize/common/src/org/jetbrains/kotlin/idea/compilerPlugin/parcelize/ParcelizeAvailability.kt) |

### PythonCore

[`PythonCore`](%gh-ic%/python/pluginCore/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [Pythonid.PythonPackagingToolwindowActionProvider](https://jb.gg/ipe?extensions=Pythonid.PythonPackagingToolwindowActionProvider) | [`PythonPackagingToolwindowActionProvider`](%gh-ic%/python/src/com/jetbrains/python/packaging/toolwindow/actions/PythonPackagingToolwindowActionProvider.kt) |
| [Pythonid.breakpointHandler](https://jb.gg/ipe?extensions=Pythonid.breakpointHandler) | [`PyBreakpointHandlerFactory`](%gh-ic%/python/src/com/jetbrains/python/debugger/PyBreakpointHandlerFactory.java) |
| [Pythonid.condaSdkCustomizer](https://jb.gg/ipe?extensions=Pythonid.condaSdkCustomizer) ![Experimental][experimental] | [`PyCondaSdkCustomizer`](%gh-ic%/python/src/com/jetbrains/python/sdk/conda/PyCondaSdkCustomizer.kt) |
| [Pythonid.connectionCredentialsToTargetConfigurationConverter](https://jb.gg/ipe?extensions=Pythonid.connectionCredentialsToTargetConfigurationConverter) ![Internal][internal] | [`ConnectionCredentialsToTargetConfigurationConverter`](%gh-ic%/python/src/com/jetbrains/python/run/target/ConnectionCredentialsToTargetConfigurationConverter.kt) |
| [Pythonid.consoleOptionsProvider](https://jb.gg/ipe?extensions=Pythonid.consoleOptionsProvider) | [`PyConsoleOptionsProvider`](%gh-ic%/python/src/com/jetbrains/python/console/PyConsoleOptionsProvider.java) |
| [Pythonid.customProcessHandlerProvider](https://jb.gg/ipe?extensions=Pythonid.customProcessHandlerProvider) ![Internal][internal] | [`PyCustomProcessHandlerProvider`](%gh-ic%/python/src/com/jetbrains/python/run/PyCustomProcessHandlerProvider.kt) |
| [Pythonid.dataViewPanelFactory](https://jb.gg/ipe?extensions=Pythonid.dataViewPanelFactory) | [`PyDataViewPanelFactory`](%gh-ic%/python/src/com/jetbrains/python/debugger/containerview/PyDataViewPanelFactory.java) |
| [Pythonid.debugSessionFactory](https://jb.gg/ipe?extensions=Pythonid.debugSessionFactory) | [`PyDebugSessionFactory`](%gh-ic%/python/src/com/jetbrains/python/debugger/PyDebugSessionFactory.java) |
| [Pythonid.documentationLinkProvider](https://jb.gg/ipe?extensions=Pythonid.documentationLinkProvider) | [`PythonDocumentationLinkProvider`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/documentation/PythonDocumentationLinkProvider.java) |
| [Pythonid.interpreterTargetEnvironmentFactory](https://jb.gg/ipe?extensions=Pythonid.interpreterTargetEnvironmentFactory) ![Experimental][experimental] | [`PythonInterpreterTargetEnvironmentFactory`](%gh-ic%/python/src/com/jetbrains/python/run/PythonInterpreterTargetEnvironmentFactory.kt) |
| [Pythonid.magicLiteral](https://jb.gg/ipe?extensions=Pythonid.magicLiteral) | [`PyMagicLiteralExtensionPoint`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/magicLiteral/PyMagicLiteralExtensionPoint.java) |
| [Pythonid.packageManagerProvider](https://jb.gg/ipe?extensions=Pythonid.packageManagerProvider) ![Experimental][experimental] | [`PyPackageManagerProvider`](%gh-ic%/python/src/com/jetbrains/python/packaging/PyCustomPackageManagers.kt) |
| [Pythonid.pep8ProblemSuppressor](https://jb.gg/ipe?extensions=Pythonid.pep8ProblemSuppressor) | [`Pep8ProblemSuppressor`](%gh-ic%/python/src/com/jetbrains/python/validation/Pep8ProblemSuppressor.java) |
| [Pythonid.projectSynchronizerProvider](https://jb.gg/ipe?extensions=Pythonid.projectSynchronizerProvider) | [`PyProjectSynchronizerProvider`](%gh-ic%/python/src/com/jetbrains/python/remote/PyProjectSynchronizer.kt) |
| [Pythonid.pyAddSdkProvider](https://jb.gg/ipe?extensions=Pythonid.pyAddSdkProvider) | [`PyAddSdkProvider`](%gh-ic%/python/src/com/jetbrains/python/sdk/add/PyAddSdkProvider.kt) |
| [Pythonid.pyCustomSdkUiProvider](https://jb.gg/ipe?extensions=Pythonid.pyCustomSdkUiProvider) | [`PyCustomSdkUiProvider`](%gh-ic%/python/src/com/jetbrains/python/sdk/PyCustomSdkUiProvider.java) |
| [Pythonid.pyPregeneratedSkeletonsProvider](https://jb.gg/ipe?extensions=Pythonid.pyPregeneratedSkeletonsProvider) | [`PyPregeneratedSkeletonsProvider`](%gh-ic%/python/src/com/jetbrains/python/sdk/skeletons/PyPregeneratedSkeletonsProvider.java) |
| [Pythonid.pyRootTypeProvider](https://jb.gg/ipe?extensions=Pythonid.pyRootTypeProvider) | [`PyRootTypeProvider`](%gh-ic%/python/src/com/jetbrains/python/module/PyRootTypeProvider.java) |
| [Pythonid.pySdkProvider](https://jb.gg/ipe?extensions=Pythonid.pySdkProvider) ![Experimental][experimental] | [`PySdkProvider`](%gh-ic%/python/src/com/jetbrains/python/sdk/PySdkProvider.kt) |
| [Pythonid.pyTestConfigurationSelector](https://jb.gg/ipe?extensions=Pythonid.pyTestConfigurationSelector) | [`PyTestConfigurationSelector`](%gh-ic%/python/src/com/jetbrains/python/testing/PyTestConfigurationSelector.kt) |
| [Pythonid.pyTestFixtureExtension](https://jb.gg/ipe?extensions=Pythonid.pyTestFixtureExtension) | [`PyTestFixtureExtension`](%gh-ic%/python/src/com/jetbrains/python/testing/pyTestFixtures/PyTestFixtureExtension.kt) |
| [Pythonid.pythonCommandLineEnvironmentProvider](https://jb.gg/ipe?extensions=Pythonid.pythonCommandLineEnvironmentProvider) | [`PythonCommandLineEnvironmentProvider`](%gh-ic%/python/src/com/jetbrains/python/run/PythonCommandLineEnvironmentProvider.java) |
| [Pythonid.pythonCommandLineTargetEnvironmentProvider](https://jb.gg/ipe?extensions=Pythonid.pythonCommandLineTargetEnvironmentProvider) ![Experimental][experimental] ![Internal][internal] | [`PythonCommandLineTargetEnvironmentProvider`](%gh-ic%/python/src/com/jetbrains/python/run/target/PythonCommandLineTargetEnvironmentProvider.kt) |
| [Pythonid.pythonPackageManagerProvider](https://jb.gg/ipe?extensions=Pythonid.pythonPackageManagerProvider) ![Experimental][experimental] | [`PythonPackageManagerProvider`](%gh-ic%/python/src/com/jetbrains/python/packaging/management/PythonPackageManagerProvider.kt) |
| [Pythonid.pythonSdkComparator](https://jb.gg/ipe?extensions=Pythonid.pythonSdkComparator) | [`PySdkComparator`](%gh-ic%/python/src/com/jetbrains/python/sdk/PySdkComparator.java) |
| [Pythonid.remoteConsoleProcessCreator](https://jb.gg/ipe?extensions=Pythonid.remoteConsoleProcessCreator) | [`PythonConsoleRemoteProcessCreator`](%gh-ic%/python/src/com/jetbrains/python/console/PythonConsoleRemoteProcessCreator.kt) |
| [Pythonid.remoteInterpreterManager](https://jb.gg/ipe?extensions=Pythonid.remoteInterpreterManager) | [`PythonRemoteInterpreterManager`](%gh-ic%/python/src/com/jetbrains/python/remote/PythonRemoteInterpreterManager.java) |
| [Pythonid.remoteProcessStarterManager](https://jb.gg/ipe?extensions=Pythonid.remoteProcessStarterManager) | [`PyRemoteProcessStarterManager`](%gh-ic%/python/src/com/jetbrains/python/run/PyRemoteProcessStarterManager.java) |
| [Pythonid.remoteSdkValidator](https://jb.gg/ipe?extensions=Pythonid.remoteSdkValidator) | [`PyRemoteSdkValidator`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/sdk/PyRemoteSdkValidator.kt) |
| [Pythonid.remoteSkeletonGeneratorFactory](https://jb.gg/ipe?extensions=Pythonid.remoteSkeletonGeneratorFactory) | [`PyRemoteSkeletonGeneratorFactory`](%gh-ic%/python/src/com/jetbrains/python/remote/PyRemoteSkeletonGeneratorFactory.java) |
| [Pythonid.runConfigurationEditorExtension](https://jb.gg/ipe?extensions=Pythonid.runConfigurationEditorExtension) ![Internal][internal] | [`PyRunConfigurationEditorExtension`](%gh-ic%/python/src/com/jetbrains/python/run/PyRunConfigurationEditorExtension.java) |
| [Pythonid.runConfigurationExtension](https://jb.gg/ipe?extensions=Pythonid.runConfigurationExtension) | [`PythonRunConfigurationExtension`](%gh-ic%/python/src/com/jetbrains/python/run/PythonRunConfigurationExtension.java) |
| [Pythonid.runnableScriptFilter](https://jb.gg/ipe?extensions=Pythonid.runnableScriptFilter) | [`RunnableScriptFilter`](%gh-ic%/python/src/com/jetbrains/python/run/RunnableScriptFilter.java) |
| [Pythonid.sshInterpreterManager](https://jb.gg/ipe?extensions=Pythonid.sshInterpreterManager) | [`PythonSshInterpreterManager`](%gh-ic%/python/src/com/jetbrains/python/remote/PythonSshInterpreterManager.java) |
| [Pythonid.unresolvedReferenceQuickFixProvider](https://jb.gg/ipe?extensions=Pythonid.unresolvedReferenceQuickFixProvider) | [`PyUnresolvedReferenceQuickFixProvider`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/inspections/PyUnresolvedReferenceQuickFixProvider.java) |
| [com.jetbrains.python.configuration.pyIntegratedToolsTestPanelCustomizer](https://jb.gg/ipe?extensions=com.jetbrains.python.configuration.pyIntegratedToolsTestPanelCustomizer) | [`PyIntegratedToolsTestPanelCustomizer`](%gh-ic%/python/src/com/jetbrains/python/configuration/PyIntegratedToolsTestPanelCustomizer.kt) |
| [com.jetbrains.python.console.customizer](https://jb.gg/ipe?extensions=com.jetbrains.python.console.customizer) | [`PyConsoleCustomizer`](%gh-ic%/python/src/com/jetbrains/python/console/PyConsoleCustomizer.kt) |
| [com.jetbrains.python.console.executeCustomizer](https://jb.gg/ipe?extensions=com.jetbrains.python.console.executeCustomizer) ![Experimental][experimental] | [`PyExecuteConsoleCustomizer`](%gh-ic%/python/src/com/jetbrains/python/console/PyExecuteConsoleCustomizer.kt) |
| [com.jetbrains.python.console.pyConsoleOutputCustomizer](https://jb.gg/ipe?extensions=com.jetbrains.python.console.pyConsoleOutputCustomizer) ![Experimental][experimental] | [`PyConsoleOutputCustomizer`](%gh-ic%/python/src/com/jetbrains/python/console/PyConsoleOutputCustomizer.kt) |
| [com.jetbrains.python.console.runnerFactory](https://jb.gg/ipe?extensions=com.jetbrains.python.console.runnerFactory) | [`PythonConsoleRunnerFactory`](%gh-ic%/python/src/com/jetbrains/python/console/PythonConsoleRunnerFactory.java) |
| [com.jetbrains.python.debugger.numericContainerPopupCustomizer](https://jb.gg/ipe?extensions=com.jetbrains.python.debugger.numericContainerPopupCustomizer) | [`PyNumericContainerPopupCustomizer`](%gh-ic%/python/pydevSrc/src/com/jetbrains/python/debugger/pydev/tables/PyNumericContainerPopupCustomizer.kt) |
| [com.jetbrains.python.debugger.pyDebugAsyncioCustomizer](https://jb.gg/ipe?extensions=com.jetbrains.python.debugger.pyDebugAsyncioCustomizer) | [`PyDebugAsyncioCustomizer`](%gh-ic%/python/src/com/jetbrains/python/debugger/PyDebugAsyncioCustomizer.kt) |
| [com.jetbrains.python.testing.pyTestLineMarkerContributorCustomizer](https://jb.gg/ipe?extensions=com.jetbrains.python.testing.pyTestLineMarkerContributorCustomizer) | [`PyTestLineMarkerContributorCustomizer`](%gh-ic%/python/src/com/jetbrains/python/testing/PyTestLineMarkerContributor.kt) |

### PythonParser.xml

[`PythonParser.xml`](%gh-ic%/python/python-parser/resources/META-INF/PythonParser.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [Pythonid.dialectsTokenSetContributor](https://jb.gg/ipe?extensions=Pythonid.dialectsTokenSetContributor) | [`PythonDialectsTokenSetContributor`](%gh-ic%/python/python-parser/src/com/jetbrains/python/PythonDialectsTokenSetContributor.java) |

### PythonPsi.xml

[`PythonPsi.xml`](%gh-ic%/python/python-psi-api/resources/META-INF/PythonPsi.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [Pythonid.canonicalPathProvider](https://jb.gg/ipe?extensions=Pythonid.canonicalPathProvider) | [`PyCanonicalPathProvider`](%gh-ic%/python/python-psi-api/src/com/jetbrains/python/psi/resolve/PyCanonicalPathProvider.java) |
| [Pythonid.customPackageIdentifier](https://jb.gg/ipe?extensions=Pythonid.customPackageIdentifier) | [`PyCustomPackageIdentifier`](%gh-ic%/python/python-psi-api/src/com/jetbrains/python/psi/PyCustomPackageIdentifier.java) |
| [Pythonid.importResolver](https://jb.gg/ipe?extensions=Pythonid.importResolver) | [`PyImportResolver`](%gh-ic%/python/python-psi-api/src/com/jetbrains/python/psi/impl/PyImportResolver.java) |
| [Pythonid.inspectionExtension](https://jb.gg/ipe?extensions=Pythonid.inspectionExtension) | [`PyInspectionExtension`](%gh-ic%/python/python-psi-api/src/com/jetbrains/python/inspections/PyInspectionExtension.java) |
| [Pythonid.keywordArgumentProvider](https://jb.gg/ipe?extensions=Pythonid.keywordArgumentProvider) | [`PyKeywordArgumentProvider`](%gh-ic%/python/python-psi-api/src/com/jetbrains/python/psi/impl/PyKeywordArgumentProvider.java) |
| [Pythonid.knownDecoratorProvider](https://jb.gg/ipe?extensions=Pythonid.knownDecoratorProvider) | [`PyKnownDecoratorProvider`](%gh-ic%/python/python-psi-api/src/com/jetbrains/python/psi/PyKnownDecoratorProvider.java) |
| [Pythonid.pyClassInheritorsSearch](https://jb.gg/ipe?extensions=Pythonid.pyClassInheritorsSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [Pythonid.pyClassMembersProvider](https://jb.gg/ipe?extensions=Pythonid.pyClassMembersProvider) | [`PyClassMembersProvider`](%gh-ic%/python/python-psi-api/src/com/jetbrains/python/psi/types/PyClassMembersProvider.java) |
| [Pythonid.pyModuleMembersProvider](https://jb.gg/ipe?extensions=Pythonid.pyModuleMembersProvider) | [`PyModuleMembersProvider`](%gh-ic%/python/python-psi-api/src/com/jetbrains/python/psi/types/PyModuleMembersProvider.java) |
| [Pythonid.pyOverridingMethodsSearch](https://jb.gg/ipe?extensions=Pythonid.pyOverridingMethodsSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [Pythonid.pyReferenceResolveProvider](https://jb.gg/ipe?extensions=Pythonid.pyReferenceResolveProvider) | [`PyReferenceResolveProvider`](%gh-ic%/python/python-psi-api/src/com/jetbrains/python/psi/resolve/PyReferenceResolveProvider.java) |
| [Pythonid.pySuperMethodsSearch](https://jb.gg/ipe?extensions=Pythonid.pySuperMethodsSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [Pythonid.pythonDocumentationQuickInfoProvider](https://jb.gg/ipe?extensions=Pythonid.pythonDocumentationQuickInfoProvider) | [`PythonDocumentationQuickInfoProvider`](%gh-ic%/python/python-psi-api/src/com/jetbrains/python/documentation/PythonDocumentationQuickInfoProvider.java) |
| [Pythonid.resolveResultRater](https://jb.gg/ipe?extensions=Pythonid.resolveResultRater) | [`PyResolveResultRater`](%gh-ic%/python/python-psi-api/src/com/jetbrains/python/psi/impl/PyResolveResultRater.java) |
| [Pythonid.statementEffectQuickFixProvider](https://jb.gg/ipe?extensions=Pythonid.statementEffectQuickFixProvider) | [`PyStatementEffectQuickFixProvider`](%gh-ic%/python/python-psi-api/src/com/jetbrains/python/inspections/PyStatementEffectQuickFixProvider.java) |
| [Pythonid.thirdPartySdkDetector](https://jb.gg/ipe?extensions=Pythonid.thirdPartySdkDetector) ![Experimental][experimental] | [`PyThirdPartySdkDetector`](%gh-ic%/python/python-psi-api/src/com/jetbrains/python/psi/resolve/PyThirdPartySdkDetector.java) |
| [Pythonid.typeProvider](https://jb.gg/ipe?extensions=Pythonid.typeProvider) | [`PyTypeProvider`](%gh-ic%/python/python-psi-api/src/com/jetbrains/python/psi/impl/PyTypeProvider.java) |

### PythonPsiImpl.xml

[`PythonPsiImpl.xml`](%gh-ic%/python/python-psi-impl/resources/META-INF/PythonPsiImpl.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [Pythonid.customClassStubType](https://jb.gg/ipe?extensions=Pythonid.customClassStubType) ![Internal][internal] | [`PyCustomClassStubType`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/psi/impl/stubs/PyCustomClassStubType.java) |
| [Pythonid.customDecoratorStubType](https://jb.gg/ipe?extensions=Pythonid.customDecoratorStubType) ![Internal][internal] | [`PyCustomDecoratorStubType`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/psi/impl/stubs/PyCustomDecoratorStubType.kt) |
| [Pythonid.customTargetExpressionStubType](https://jb.gg/ipe?extensions=Pythonid.customTargetExpressionStubType) ![Internal][internal] | [`CustomTargetExpressionStubType`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/psi/impl/stubs/CustomTargetExpressionStubType.java) |
| [Pythonid.importCandidateProvider](https://jb.gg/ipe?extensions=Pythonid.importCandidateProvider) | [`PyImportCandidateProvider`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/codeInsight/imports/PyImportCandidateProvider.java) |
| [Pythonid.pyDataclassParametersProvider](https://jb.gg/ipe?extensions=Pythonid.pyDataclassParametersProvider) | [`PyDataclassParametersProvider`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/codeInsight/PyDataclasses.kt) |
| [Pythonid.pyReferenceCustomTargetChecker](https://jb.gg/ipe?extensions=Pythonid.pyReferenceCustomTargetChecker) | [`PyReferenceCustomTargetChecker`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/psi/impl/references/PyReferenceCustomTargetChecker.kt) |
| [Pythonid.pyiStubSuppressor](https://jb.gg/ipe?extensions=Pythonid.pyiStubSuppressor) ![Experimental][experimental] | [`PyiStubSuppressor`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/pyi/PyiStubSuppressor.java) |
| [Pythonid.typeCheckerExtension](https://jb.gg/ipe?extensions=Pythonid.typeCheckerExtension) ![Experimental][experimental] | [`PyTypeCheckerExtension`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/psi/types/PyTypeCheckerExtension.java) |
| [Pythonid.visitorFilter](https://jb.gg/ipe?extensions=Pythonid.visitorFilter) | [`PythonVisitorFilter`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/psi/PythonVisitorFilter.java) |
| [com.jetbrains.python.pythonHelpersLocator](https://jb.gg/ipe?extensions=com.jetbrains.python.pythonHelpersLocator) | [`PythonHelpersLocator`](%gh-ic%/python/python-psi-impl/src/com/jetbrains/python/PythonHelpersLocator.kt) |

### PythonSdk.xml

[`PythonSdk.xml`](%gh-ic%/python/python-sdk/resources/META-INF/PythonSdk.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [Pythonid.projectSdkConfigurationExtension](https://jb.gg/ipe?extensions=Pythonid.projectSdkConfigurationExtension) ![Experimental][experimental] | [`PyProjectSdkConfigurationExtension`](%gh-ic%/python/python-sdk/src/com/jetbrains/python/sdk/configuration/PyProjectSdkConfigurationExtension.kt) |
| [Pythonid.pythonFlavorProvider](https://jb.gg/ipe?extensions=Pythonid.pythonFlavorProvider) | [`PythonFlavorProvider`](%gh-ic%/python/python-sdk/src/com/jetbrains/python/sdk/flavors/PythonFlavorProvider.java) |
| [Pythonid.pythonSdkFlavor](https://jb.gg/ipe?extensions=Pythonid.pythonSdkFlavor) | [`PythonSdkFlavor`](%gh-ic%/python/python-sdk/src/com/jetbrains/python/sdk/flavors/PythonSdkFlavor.java) |

### PythonSyntax.xml

[`PythonSyntax.xml`](%gh-ic%/python/python-syntax/resources/META-INF/PythonSyntax.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [Pythonid.pyAnnotator](https://jb.gg/ipe?extensions=Pythonid.pyAnnotator) ![Experimental][experimental] | [`PyAnnotatorBase`](%gh-ic%/python/python-syntax-core/src/com/jetbrains/python/validation/PyAnnotatorBase.java) |

### refactorings-fe10.xml

[`refactorings-fe10.xml`](%gh-ic%/plugins/kotlin/plugin/k1/resources/META-INF/refactorings-fe10.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.additionalExtractableAnalyser](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.additionalExtractableAnalyser) | [`AdditionalExtractableAnalyser`](%gh-ic%/plugins/kotlin/idea/src/org/jetbrains/kotlin/idea/refactoring/introduce/extractionEngine/AdditionalExtractableAnalyser.kt) |

### refactorings.xml

[`refactorings.xml`](%gh-ic%/plugins/kotlin/plugin/common/resources/META-INF/refactorings.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.foreignUsagesRenameProcessor](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.foreignUsagesRenameProcessor) | [`ForeignUsagesRenameProcessor`](%gh-ic%/plugins/kotlin/refactorings/kotlin.refactorings.common/src/org/jetbrains/kotlin/idea/refactoring/rename/ForeignUsagesRenameProcessor.kt) |
| [org.jetbrains.kotlin.postInsertDeclarationCallback](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.postInsertDeclarationCallback) | [`PostInsertDeclarationCallback`](%gh-ic%/plugins/kotlin/refactorings/kotlin.refactorings.common/src/org/jetbrains/kotlin/idea/refactoring/introduce/extractionEngine/PostInsertDeclarationCallback.kt) |
| [org.jetbrains.kotlin.renameHandler](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.renameHandler) | [`RenameHandler`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/rename/RenameHandler.java) |

### resolution-fe10.xml

[`resolution-fe10.xml`](%gh-ic%/plugins/kotlin/plugin/k1/resources/META-INF/resolution-fe10.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.resolveScopeEnlarger](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.resolveScopeEnlarger) | [`KotlinResolveScopeEnlarger`](%gh-ic%/plugins/kotlin/base/project-structure/src/org/jetbrains/kotlin/idea/base/projectStructure/KotlinResolveScopeEnlarger.kt) |

### scripting-base.xml

[`scripting-base.xml`](%gh-ic%/plugins/kotlin/plugin/common/resources/META-INF/scripting-base.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.ideScriptConfigurationControlFacade](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.ideScriptConfigurationControlFacade) ![Project-Level][project-level] | [`IdeScriptConfigurationControlFacade`](%gh-ic%/plugins/kotlin/scripting/src/kotlin/script/experimental/intellij/scriptConfigurationTools.kt) |
| [org.jetbrains.kotlin.scriptAdditionalIdeaDependenciesProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scriptAdditionalIdeaDependenciesProvider) ![Project-Level][project-level] | [`ScriptAdditionalIdeaDependenciesProvider`](%gh-ic%/plugins/kotlin/base/scripting/src/org/jetbrains/kotlin/idea/core/script/dependencies/ScriptAdditionalIdeaDependenciesProvider.kt) |
| [org.jetbrains.kotlin.scriptDiagnosticFixProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scriptDiagnosticFixProvider) | [`ScriptDiagnosticFixProvider`](%gh-ic%/plugins/kotlin/base/scripting/src/org/jetbrains/kotlin/idea/script/ScriptDiagnosticFixProvider.kt) |
| [org.jetbrains.kotlin.scripting.idea.listener](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scripting.idea.listener) ![Project-Level][project-level] | [`ScriptChangeListener`](%gh-ic%/plugins/kotlin/base/scripting/src/org/jetbrains/kotlin/idea/core/script/configuration/listener/ScriptChangeListener.kt) |
| [org.jetbrains.kotlin.scripting.idea.loader](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scripting.idea.loader) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | [`ScriptConfigurationLoader`](%gh-ic%/plugins/kotlin/base/scripting/src/org/jetbrains/kotlin/idea/core/script/configuration/loader/ScriptConfigurationLoader.kt) |
| [org.jetbrains.kotlin.scripting.idea.scriptingSupport](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scripting.idea.scriptingSupport) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | [`ScriptingSupport`](%gh-ic%/plugins/kotlin/base/scripting/src/org/jetbrains/kotlin/idea/core/script/configuration/ScriptingSupport.kt) |
| [org.jetbrains.kotlin.scripting.idea.settings.provider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scripting.idea.settings.provider) ![Project-Level][project-level] | [`ScriptingSupportSpecificSettingsProvider`](%gh-ic%/plugins/kotlin/base/scripting/src/org/jetbrains/kotlin/idea/script/configuration/ScriptingSupportSpecificSettingsProvider.kt) |

### scripting-k2.xml

[`scripting-k2.xml`](%gh-ic%/plugins/kotlin/plugin/k2/resources/META-INF/scripting-k2.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.ideScriptConfigurationControlFacade](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.ideScriptConfigurationControlFacade) ![Project-Level][project-level] | [`IdeScriptConfigurationControlFacade`](%gh-ic%/plugins/kotlin/scripting/src/kotlin/script/experimental/intellij/scriptConfigurationTools.kt) |
| [org.jetbrains.kotlin.scriptAdditionalIdeaDependenciesProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scriptAdditionalIdeaDependenciesProvider) ![Project-Level][project-level] | [`ScriptAdditionalIdeaDependenciesProvider`](%gh-ic%/plugins/kotlin/base/scripting/src/org/jetbrains/kotlin/idea/core/script/dependencies/ScriptAdditionalIdeaDependenciesProvider.kt) |
| [org.jetbrains.kotlin.scriptDefinitionsSource](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scriptDefinitionsSource) ![Project-Level][project-level] | `ScriptDefinitionsSource` |
| [org.jetbrains.kotlin.scriptDependenciesSource](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scriptDependenciesSource) ![Project-Level][project-level] | [`ScriptDependenciesSource`](%gh-ic%/plugins/kotlin/base/scripting/src/org/jetbrains/kotlin/idea/core/script/k2/ScriptDependenciesSource.kt) |
| [org.jetbrains.kotlin.scriptDiagnosticFixProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scriptDiagnosticFixProvider) | [`ScriptDiagnosticFixProvider`](%gh-ic%/plugins/kotlin/base/scripting/src/org/jetbrains/kotlin/idea/script/ScriptDiagnosticFixProvider.kt) |
| [org.jetbrains.kotlin.scriptReloadActionAvailability](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scriptReloadActionAvailability) ![Project-Level][project-level] | [`KotlinScriptReloadActionAvailability`](%gh-ic%/plugins/kotlin/base/scripting/src/org/jetbrains/kotlin/idea/core/script/k2/KotlinScriptReloadActionAvailability.kt) |
| [org.jetbrains.kotlin.scripting.definitions.scriptDefinitionProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scripting.definitions.scriptDefinitionProvider) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `ScriptDefinitionProvider` |
| [org.jetbrains.kotlin.scripting.idea.listener](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scripting.idea.listener) ![Project-Level][project-level] | [`ScriptChangeListener`](%gh-ic%/plugins/kotlin/base/scripting/src/org/jetbrains/kotlin/idea/core/script/configuration/listener/ScriptChangeListener.kt) |
| [org.jetbrains.kotlin.scripting.idea.loader](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scripting.idea.loader) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | [`ScriptConfigurationLoader`](%gh-ic%/plugins/kotlin/base/scripting/src/org/jetbrains/kotlin/idea/core/script/configuration/loader/ScriptConfigurationLoader.kt) |
| [org.jetbrains.kotlin.scripting.idea.scriptingSupport](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scripting.idea.scriptingSupport) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | [`ScriptingSupport`](%gh-ic%/plugins/kotlin/base/scripting/src/org/jetbrains/kotlin/idea/core/script/configuration/ScriptingSupport.kt) |
| [org.jetbrains.kotlin.scripting.idea.settings.provider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scripting.idea.settings.provider) ![Project-Level][project-level] | [`ScriptingSupportSpecificSettingsProvider`](%gh-ic%/plugins/kotlin/base/scripting/src/org/jetbrains/kotlin/idea/script/configuration/ScriptingSupportSpecificSettingsProvider.kt) |

### scripting-support.xml

[`scripting-support.xml`](%gh-ic%/plugins/kotlin/plugin/k1/resources/META-INF/scripting-support.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.kotlin.scratchFileLanguageProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scratchFileLanguageProvider) | [`ScratchFileLanguageProvider`](%gh-ic%/plugins/kotlin/jvm/src/org/jetbrains/kotlin/idea/scratch/ScratchFileLanguageProvider.kt) |
| [org.jetbrains.kotlin.scriptDefinitionsProvider](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scriptDefinitionsProvider) ![Project-Level][project-level] | [`ScriptDefinitionsProvider`](%gh-ic%/plugins/kotlin/scripting/src/kotlin/script/experimental/intellij/scriptDefinitionProvider.kt) |
| [org.jetbrains.kotlin.scriptDefinitionsSource](https://jb.gg/ipe?extensions=org.jetbrains.kotlin.scriptDefinitionsSource) ![Project-Level][project-level] | `ScriptDefinitionsSource` |

### sh.xml

[`sh.xml`](%gh-ic%/plugins/sh/core/resources/META-INF/sh.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.runMarkerContributionAdditionalCondition](https://jb.gg/ipe?extensions=com.intellij.runMarkerContributionAdditionalCondition) | [`ShRunnerAdditionalCondition`](%gh-ic%/plugins/sh/core/src/com/intellij/sh/run/ShRunnerAdditionalCondition.java) |
| [com.intellij.shellOccurrencesHighlightingSuppressor](https://jb.gg/ipe?extensions=com.intellij.shellOccurrencesHighlightingSuppressor) | [`ShOccurrencesHighlightingSuppressor`](%gh-ic%/plugins/sh/core/src/com/intellij/sh/highlighting/ShOccurrencesHighlightingSuppressor.kt) |

### tanvd.grazi

[`tanvd.grazi`](%gh-ic%/plugins/grazie/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.grazie.disableChecking](https://jb.gg/ipe?extensions=com.intellij.grazie.disableChecking) | `n/a` |
| [com.intellij.grazie.grammar.strategy](https://jb.gg/ipe?extensions=com.intellij.grazie.grammar.strategy) ![Deprecated][deprecated] | [`GrammarCheckingStrategy`](%gh-ic%/plugins/grazie/src/main/kotlin/com/intellij/grazie/grammar/strategy/GrammarCheckingStrategy.kt) |
| [com.intellij.grazie.problemFilter](https://jb.gg/ipe?extensions=com.intellij.grazie.problemFilter) | [`ProblemFilter`](%gh-ic%/plugins/grazie/src/main/kotlin/com/intellij/grazie/text/ProblemFilter.java) |
| [com.intellij.grazie.textChecker](https://jb.gg/ipe?extensions=com.intellij.grazie.textChecker) | [`TextChecker`](%gh-ic%/plugins/grazie/src/main/kotlin/com/intellij/grazie/text/TextChecker.java) |
| [com.intellij.grazie.textContentModificationTrackerProvider](https://jb.gg/ipe?extensions=com.intellij.grazie.textContentModificationTrackerProvider) | [`TextContentModificationTrackerProvider`](%gh-ic%/plugins/grazie/src/main/kotlin/com/intellij/grazie/text/TextContentModificationTrackerProvider.kt) |
| [com.intellij.grazie.textExtractor](https://jb.gg/ipe?extensions=com.intellij.grazie.textExtractor) | [`TextExtractor`](%gh-ic%/plugins/grazie/src/main/kotlin/com/intellij/grazie/text/TextExtractor.java) |

### terminal.xml

[`terminal.xml`](%gh-ic%/plugins/terminal/resources/META-INF/terminal.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.terminal.shellCommandHandler](https://jb.gg/ipe?extensions=com.intellij.terminal.shellCommandHandler) | [`TerminalShellCommandHandler`](%gh-ic%/platform/execution-impl/src/com/intellij/terminal/TerminalShellCommandHandler.kt) |
| [org.jetbrains.plugins.terminal.commandHistoryProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.terminal.commandHistoryProvider) ![Internal][internal] | [`TerminalCommandHistoryProvider`](%gh-ic%/plugins/terminal/src/org/jetbrains/plugins/terminal/block/history/TerminalCommandHistoryProvider.kt) |
| [org.jetbrains.plugins.terminal.commandSpecsProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.terminal.commandSpecsProvider) ![Experimental][experimental] | [`ShellCommandSpecsProvider`](%gh-ic%/plugins/terminal/src/org/jetbrains/plugins/terminal/block/completion/spec/ShellCommandSpecsProvider.kt) |
| [org.jetbrains.plugins.terminal.exp.commandBlockHighlighterProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.terminal.exp.commandBlockHighlighterProvider) ![Internal][internal] | [`TerminalCommandBlockHighlighterProvider`](%gh-ic%/plugins/terminal/src/org/jetbrains/plugins/terminal/block/output/highlighting/TerminalCommandBlockHighlighterProvider.kt) |
| [org.jetbrains.plugins.terminal.localTerminalCustomizer](https://jb.gg/ipe?extensions=org.jetbrains.plugins.terminal.localTerminalCustomizer) | [`LocalTerminalCustomizer`](%gh-ic%/plugins/terminal/src/org/jetbrains/plugins/terminal/LocalTerminalCustomizer.java) |
| [org.jetbrains.plugins.terminal.openPredefinedTerminalProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.terminal.openPredefinedTerminalProvider) | [`OpenPredefinedTerminalActionProvider`](%gh-ic%/plugins/terminal/src/org/jetbrains/plugins/terminal/ui/OpenPredefinedTerminalActionProvider.kt) |
| [org.jetbrains.plugins.terminal.promptCustomEnterHandler](https://jb.gg/ipe?extensions=org.jetbrains.plugins.terminal.promptCustomEnterHandler) ![Internal][internal] | [`TerminalPromptCustomEnterHandler`](%gh-ic%/plugins/terminal/src/org/jetbrains/plugins/terminal/block/prompt/TerminalPromptCustomEnterHandler.kt) |
| [org.jetbrains.plugins.terminal.shellSupport](https://jb.gg/ipe?extensions=org.jetbrains.plugins.terminal.shellSupport) ![Experimental][experimental] | [`TerminalShellSupport`](%gh-ic%/plugins/terminal/src/org/jetbrains/plugins/terminal/exp/completion/TerminalShellSupport.kt) |

### TestNG-J

[`TestNG-J`](%gh-ic%/plugins/testng/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.theoryinpractice.testng.listener](https://jb.gg/ipe?extensions=com.theoryinpractice.testng.listener) | [`IDEATestNGListener`](%gh-ic%/plugins/testng_rt/src/com/intellij/rt/testng/IDEATestNGListener.java) |

### training

[`training`](%gh-ic%/plugins/ide-features-trainer/res/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [training.ifs.suggester](https://jb.gg/ipe?extensions=training.ifs.suggester) | [`FeatureSuggester`](%gh-ic%/plugins/ide-features-trainer/src/training/featuresSuggester/suggesters/FeatureSuggester.kt) |
| [training.ifs.suggesterSupport](https://jb.gg/ipe?extensions=training.ifs.suggesterSupport) | [`SuggesterSupport`](%gh-ic%/plugins/ide-features-trainer/src/training/featuresSuggester/SuggesterSupport.kt) |
| [training.ift.language.extension](https://jb.gg/ipe?extensions=training.ift.language.extension) | [`LangSupport`](%gh-ic%/plugins/ide-features-trainer/src/training/lang/LangSupport.kt) |
| [training.ift.learning.commonCourse](https://jb.gg/ipe?extensions=training.ift.learning.commonCourse) | [`LearningCourse`](%gh-ic%/plugins/ide-features-trainer/src/training/learn/course/LearningCourse.kt) |
| [training.ift.learning.course](https://jb.gg/ipe?extensions=training.ift.learning.course) | [`LearningCourseBase`](%gh-ic%/plugins/ide-features-trainer/src/training/learn/course/LearningCourseBase.kt) |
| [training.ift.newUsersOnboardingExperimentAccessor](https://jb.gg/ipe?extensions=training.ift.newUsersOnboardingExperimentAccessor) ![Internal][internal] | [`NewUsersOnboardingExperimentAccessor`](%gh-ic%/plugins/ide-features-trainer/src/training/learn/NewUsersOnboardingExperimentAccessor.kt) |

### UsageData.xml

[`UsageData.xml`](%gh-ic%/java/java-impl/src/META-INF/UsageData.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.internal.statistic.libraryUsageImportProcessor](https://jb.gg/ipe?extensions=com.intellij.internal.statistic.libraryUsageImportProcessor) ![Internal][internal] | [`LibraryUsageImportProcessor`](%gh-ic%/java/java-impl/src/com/intellij/internal/statistic/libraryUsage/LibraryUsageImportProcessor.kt) |

### XPathView

[`XPathView`](%gh-ic%/plugins/xpath/xpath-view/src/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [XPathView.xpath.contextProviderExtension](https://jb.gg/ipe?extensions=XPathView.xpath.contextProviderExtension) | [`ContextProviderExtension`](%gh-ic%/plugins/xpath/xpath-lang/src/org/intellij/lang/xpath/context/ContextProviderExtension.java) |
| [XPathView.xpath.functionProvider](https://jb.gg/ipe?extensions=XPathView.xpath.functionProvider) | [`XPathFunctionProvider`](%gh-ic%/plugins/xpath/xpath-lang/src/org/intellij/lang/xpath/context/functions/XPathFunctionProvider.java) |
| [XPathView.xsltRunnerExtension](https://jb.gg/ipe?extensions=XPathView.xsltRunnerExtension) | [`XsltRunnerExtension`](%gh-ic%/plugins/xpath/xpath-lang/src/org/intellij/lang/xpath/xslt/run/XsltRunnerExtension.java) |

[deprecated]: https://img.shields.io/badge/-Deprecated-lightgrey?style=flat-square
[removal]: https://img.shields.io/badge/-Removal-red?style=flat-square
[obsolete]: https://img.shields.io/badge/-Obsolete-grey?style=flat-square
[experimental]: https://img.shields.io/badge/-Experimental-violet?style=flat-square
[internal]: https://img.shields.io/badge/-Internal-darkred?style=flat-square
[project-level]: https://img.shields.io/badge/-Project--Level-blue?style=flat-square
[non-dynamic]: https://img.shields.io/badge/-Non--Dynamic-orange?style=flat-square
[dumb-aware]: https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# The IntelliJ Platform

<link-summary>Introduction to the IntelliJ Platform, plugins, and IDEs based on it.</link-summary>

The IntelliJ Platform is not a product in and of itself but provides a platform for building IDEs.
It is used to power JetBrains products such as [IntelliJ IDEA](https://www.jetbrains.com/idea/).
It is also Open Source and can be used by third parties to build IDEs, such as [Android Studio](https://developer.android.com/studio/index.html) from Google.

The IntelliJ Platform provides all the infrastructure that these IDEs need to provide rich language tooling support.
It is a component-driven, cross-platform JVM based application host with a high-level user interface toolkit for creating [tool windows](tool_windows.md), tree views, and lists (supporting fast search) as well as popup menus and [dialogs](dialog_wrapper.md).

The IntelliJ Platform has a full-text [editor](editors.md) with abstract implementations of [syntax highlighting](analyzing.md), [code folding](folding_builder.md), [code completion](code_completion.md), and other rich text [editing features](editing.md).
An image editor is also included.

Furthermore, it includes open APIs to build standard IDE functionality, such as a [project model](project.md) and a [build system](external_system_integration.md).
It also provides an infrastructure for a rich debugging experience, with language-agnostic advanced breakpoint support, call stacks, watch windows, and expression evaluation.

But the IntelliJ Platform's real power comes from the Program Structure Interface ([PSI](psi.md)).
It is a set of functionalities used to parse files, build rich syntactic and semantic models of the code, and build [indexes](indexing_and_psi_stubs.md) from this data.
PSI powers a lot of functionalities, from quick navigating to [files](psi_files.md), types, and [symbols](symbols.md), to the contents of [code completion](code_completion.md) popups and [find usages](find_usages.md), [code inspections](code_inspections.md), and code rewriting, for quick fixes or [refactorings](rename_refactoring.md), as well as many other features.

The IntelliJ Platform includes [parsers](implementing_parser_and_psi.md) and a PSI model for many languages, and its extensible nature means that it is possible to [add support for other languages](custom_language_support.md).

## Plugins

Products built on the IntelliJ Platform are extensible applications, with the platform being responsible for creating [](plugin_extensions.md).
The IntelliJ Platform fully supports [plugins](developing_plugins.md), and JetBrains hosts the [JetBrains Marketplace](https://plugins.jetbrains.com), which can be used to distribute plugins that support one or more of the products.
It is also possible to distribute plugins using a [](custom_plugin_repository.md).

Plugins can extend the platform in many ways, from adding a simple menu item to adding support for a complete language, build system, and debugger.
Many of the existing IntelliJ Platform features are implemented as plugins that can be included or excluded depending on the needs of the end product.
See the [](plugins_quick_start.md) for more details.

<snippet id="pluginAlternatives">

> In some cases, implementing an actual IntelliJ Platform plugin might not be necessary, as [alternative solutions](plugin_alternatives.md) exist.
>
{style="note" title="Plugin Alternatives"}

</snippet>

## Open Source

The IntelliJ Platform is Open Source, under the [Apache License](%gh-ic%/LICENSE.txt), and [hosted on GitHub](https://github.com/JetBrains/intellij-community).

While this guide refers to the IntelliJ Platform as a separate entity, there is no "IntelliJ Platform" GitHub repository.
Instead, the platform is considered to be an almost complete overlap with the [IntelliJ IDEA Community Edition](idea.md), which is a free and Open Source version of IntelliJ IDEA Ultimate (the GitHub repository linked above is the [JetBrains/intellij-community](https://github.com/JetBrains/intellij-community) repository).
Please note: starting with the 2021.1 release, some plugins bundled with IntelliJ IDEA Community Edition are not open-source.

The version of the IntelliJ Platform is defined by the version of the corresponding IntelliJ IDEA Community Edition release.
For example, to build a plugin against IntelliJ IDEA (2019.1.1), build #191.6707.61 means specifying the same build number tag to get the correct IntelliJ Platform files from the `intellij-community` repository.
See the [](build_number_ranges.md) page for more information about build numbers corresponding to version numbering.

Typically, an IDE that is based on the IntelliJ Platform will include the `intellij-community` repository as a Git submodule and provide configuration to describe which plugins from the `intellij-community`, and which custom plugins will make up the product.

## IDEs Based on the IntelliJ Platform

The IntelliJ Platform underlies many JetBrains IDEs.
[IntelliJ IDEA Ultimate](idea_ultimate.md) is a superset of the IntelliJ IDEA Community Edition but includes closed-source plugins ([see this feature comparison](https://www.jetbrains.com/idea/features/editions_comparison_matrix.html)).
Similarly, other products such as [WebStorm](webstorm.md) and [DataGrip](data_grip.md) are based on the IntelliJ IDEA Community Edition, but with a different set of plugins included and excluding other default plugins.
This allows plugins to target multiple products, as each product will include base functionality and a selection of plugins from the IntelliJ IDEA Community Edition repository.

The following IDEs are based on the IntelliJ Platform:

* [JetBrains](https://www.jetbrains.com) IDEs:
    * [AppCode](app_code.md)
    * [Aqua](https://www.jetbrains.com/aqua/)
    * [CLion](clion.md)
    * [DataGrip](data_grip.md)
    * [DataSpell](https://www.jetbrains.com/dataspell/)
    * [GoLand](goland.md)
    * [IntelliJ IDEA](idea.md)
    * [MPS](https://www.jetbrains.com/mps/)
    * [PhpStorm](phpstorm.md)
    * [PyCharm](pycharm.md)
    * [Rider](#rider)
    * [RubyMine](rubymine.md)
    * [RustRover](https://www.jetbrains.com/rust/)
    * [WebStorm](webstorm.md)
    * [Writerside](https://www.jetbrains.com/writerside/)
* [Android Studio](android_studio.md) IDE from Google
* [Comma](https://commaide.com/) IDE for Raku (formerly known as Perl 6)
* [Jmix Studio](https://www.jmix.io/tools/)

### Rider

JetBrains [Rider](rider.md) uses the IntelliJ Platform differently than other IntelliJ-based IDEs.
It uses the IntelliJ Platform to provide the user interface for a C# and .NET IDE, with the standard IntelliJ editors, tool windows, debugging experience, etc.
It also integrates into the standard Find Usages and Search Everywhere UI and uses code completion, syntax highlighting, and so on.

However, Rider doesn't create a full [PSI](psi.md) (syntactic and semantic) model for C# files.
Instead, it reuses [ReSharper](https://www.jetbrains.com/resharper/) to provide language functionality.
All the C# PSI model, inspections, code rewritings, such as quick fixes, and refactorings are run out of the process, in a command-line version of ReSharper.
This means that creating a plugin for Rider involves two parts - a plugin that lives in the IntelliJ "front end" to show user interface, and a plugin that lives in the ReSharper "back end" to analyze and work with the C# PSI.

Fortunately, many plugins can simply work with the ReSharper backend.
Rider takes care of displaying the results of inspections and code completion, and many plugins can be implemented without requiring an IntelliJ UI component.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<!--
EP List Directory:
/community/
EXCLUDING:
/community/android
/community/java
/community/jvm
/community/plugins
/community/python

Note: if section 'IntelliJ Community Plugins" appears on this page, add excluded directories in the list above
and add in intellij_community_plugins_extension_point_list.md.
-->

# IntelliJ Platform Extension Point and Listener List

<link-summary>Overview of Extension Points and Listeners for IntelliJ Platform.</link-summary>

1115 Extension Points and 212 Listeners for IntelliJ Platform %ijPlatform%

<include from="snippets.md" element-id="ep_list_legend"/>

## IntelliJ Platform


### IntelliJ Platform – Listeners

| Topic | Listener |
|-------|----------|
| [ProblemsListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.analysis.problemsView.ProblemsListener)  ![Project-Level][project-level] | [`ProblemsListener`](%gh-ic%/platform/lang-impl/src/com/intellij/analysis/problemsView/ProblemsListener.kt) |
| [RainbowStateChangeListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.application.options.colors.RainbowStateChangeListener)  | [`RainbowStateChangeListener`](%gh-ic%/platform/platform-impl/src/com/intellij/application/options/colors/RainbowStateChangeListener.kt) |
| [EditorOptionsListener#FOLDING_CONFIGURABLE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.application.options.editor.EditorOptionsListener)  | [`EditorOptionsListener`](%gh-ic%/platform/platform-impl/src/com/intellij/application/options/editor/EditorOptionsListener.java) |
| [EditorOptionsListener#APPEARANCE_CONFIGURABLE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.application.options.editor.EditorOptionsListener)  | [`EditorOptionsListener`](%gh-ic%/platform/platform-impl/src/com/intellij/application/options/editor/EditorOptionsListener.java) |
| [EditorOptionsListener#OPTIONS_PANEL_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.application.options.editor.EditorOptionsListener)  | [`EditorOptionsListener`](%gh-ic%/platform/platform-impl/src/com/intellij/application/options/editor/EditorOptionsListener.java) |
| [EditorOptionsListener#SMART_KEYS_CONFIGURABLE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.application.options.editor.EditorOptionsListener)  | [`EditorOptionsListener`](%gh-ic%/platform/platform-impl/src/com/intellij/application/options/editor/EditorOptionsListener.java) |
| [EditorOptionsListener#GUTTER_ICONS_CONFIGURABLE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.application.options.editor.EditorOptionsListener)  | [`EditorOptionsListener`](%gh-ic%/platform/platform-impl/src/com/intellij/application/options/editor/EditorOptionsListener.java) |
| [ReaderModeSettingsListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.actions.ReaderModeListener)  ![Project-Level][project-level] | [`ReaderModeListener`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/actions/ReaderModeListener.kt) |
| [CodeVisionSettings#CODE_LENS_SETTINGS_CHANGED](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.codeVision.settings.CodeVisionSettings.CodeVisionSettingsListener)  | [`CodeVisionSettingsListener`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/codeVision/settings/CodeVisionSettings.kt) |
| [CompletionContributorListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.completion.CompletionContributorListener)  ![Internal][internal] | [`CompletionContributorListener`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/completion/CompletionContributorListener.kt) |
| [CompletionPhaseListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.completion.CompletionPhaseListener)  | [`CompletionPhaseListener`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/completion/CompletionPhaseListener.java) |
| [DaemonCodeAnalyzer#DAEMON_EVENT_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.daemon.DaemonCodeAnalyzer.DaemonListener)  ![Project-Level][project-level] | [`DaemonListener`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/daemon/DaemonCodeAnalyzer.java) |
| [EditorTrackerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.daemon.impl.EditorTrackerListener)  ![Project-Level][project-level] | [`EditorTrackerListener`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/daemon/impl/EditorTracker.kt) |
| [FileHighlightingSettingListener#SETTING_CHANGE](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.daemon.impl.analysis.FileHighlightingSettingListener)  | [`FileHighlightingSettingListener`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/daemon/impl/analysis/FileHighlightingSettingListener.java) |
| [DocRenderItemManagerImpl#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.documentation.render.DocRenderItemManagerImpl.Listener)  | [`Listener`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/documentation/render/DocRenderItemManagerImpl.kt) |
| [EditorHintListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.hint.EditorHintListener)  | [`EditorHintListener`](%gh-ic%/platform/platform-impl/src/com/intellij/codeInsight/hint/EditorHintListener.java) |
| [ExternalParameterInfoChangesProvider#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.hint.ExternalParameterInfoChangesProvider)  | [`ExternalParameterInfoChangesProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/hint/ExternalParameterInfoChangesProvider.java) |
| [InlayHintsSettings#INLAY_SETTINGS_CHANGED](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.hints.InlayHintsSettings.SettingsListener)  | [`SettingsListener`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/InlayHintsSettings.kt) |
| [InlineCompletionInstallListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.inline.completion.InlineCompletionInstallListener)  ![Experimental][experimental] | [`InlineCompletionInstallListener`](%gh-ic%/platform/platform-impl/src/com/intellij/codeInsight/inline/completion/InlineCompletionInstallListener.kt) |
| [LookupManagerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.lookup.LookupManagerListener)  ![Project-Level][project-level] | [`LookupManagerListener`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/lookup/LookupManagerListener.java) |
| [TemplateManager#TEMPLATE_STARTED_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.codeInsight.template.TemplateManagerListener)  ![Project-Level][project-level] | [`TemplateManagerListener`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/template/TemplateManagerListener.java) |
| [GlobalInspectionContextEx#INSPECT_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.codeInspection.ex.InspectListener)  ![Internal][internal] ![Project-Level][project-level] | [`InspectListener`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInspection/ex/InspectListener.java) |
| [BatchUpdateListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.configurationStore.BatchUpdateListener)  ![Project-Level][project-level] | [`BatchUpdateListener`](%gh-ic%/platform/platform-impl/src/com/intellij/configurationStore/BatchUpdateListener.java) |
| [PasswordSafeSettingsListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.credentialStore.PasswordSafeSettingsListener)  | [`PasswordSafeSettingsListener`](%gh-ic%/platform/credential-store-impl/src/credentialStore/PasswordSafeSettingsListener.java) |
| [IdePerformanceListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.diagnostic.IdePerformanceListener)  ![Internal][internal] | [`IdePerformanceListener`](%gh-ic%/platform/core-api/src/com/intellij/diagnostic/IdePerformanceListener.kt) |
| [RunnablesListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.diagnostic.RunnablesListener)  ![Experimental][experimental] ![Internal][internal] | [`RunnablesListener`](%gh-ic%/platform/platform-impl/src/com/intellij/diagnostic/RunnablesListener.java) |
| [DvcsBranchManager#DVCS_BRANCH_SETTINGS_CHANGED](https://jb.gg/ipe/listeners?topics=com.intellij.dvcs.branch.DvcsBranchManager.DvcsBranchManagerListener)  | [`DvcsBranchManagerListener`](%gh-ic%/platform/dvcs-impl/src/com/intellij/dvcs/branch/DvcsBranchManager.java) |
| [VcsRepositoryManager#VCS_REPOSITORY_MAPPING_UPDATED](https://jb.gg/ipe/listeners?topics=com.intellij.dvcs.repo.VcsRepositoryMappingListener)  ![Project-Level][project-level] | [`VcsRepositoryMappingListener`](%gh-ic%/platform/dvcs-impl/src/com/intellij/dvcs/repo/VcsRepositoryMappingListener.java) |
| [ExecutionManager#EXECUTION_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.execution.ExecutionListener)  ![Project-Level][project-level] | [`ExecutionListener`](%gh-ic%/platform/execution/src/com/intellij/execution/ExecutionListener.java) |
| [ExecutionTargetManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.execution.ExecutionTargetListener)  | [`ExecutionTargetListener`](%gh-ic%/platform/execution/src/com/intellij/execution/ExecutionTargetListener.java) |
| [RunManagerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.execution.RunManagerListener)  ![Project-Level][project-level] | [`RunManagerListener`](%gh-ic%/platform/platform-impl/src/com/intellij/execution/RunManagerListener.java) |
| [RunDashboardManager#DASHBOARD_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.execution.dashboard.RunDashboardListener)  | [`RunDashboardListener`](%gh-ic%/platform/execution/src/com/intellij/execution/dashboard/RunDashboardListener.java) |
| [ExecutionEventsBus#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.execution.multilaunch.execution.messaging.ExecutionNotifier)  | [`ExecutionNotifier`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/multilaunch/execution/messaging/ExecutionNotifier.kt) |
| [Listener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.execution.process.elevation.settings.ElevationSettings.Listener)  | [`Listener`](%gh-ic%/platform/execution-process-elevation/src/com/intellij/execution/process/elevation/settings/ElevationSettings.kt) |
| [RunToolbarSlotManager#RUN_TOOLBAR_SLOT_CONFIGURATION_MAP_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.execution.runToolbar.data.RWSlotsConfigurationListener)  ![Project-Level][project-level] | [`RWSlotsConfigurationListener`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/runToolbar/data/RWSlotsConfigurationListener.kt) |
| [ServiceEventListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.execution.services.ServiceEventListener)  | [`ServiceEventListener`](%gh-ic%/platform/lang-api/src/com/intellij/execution/services/ServiceEventListener.java) |
| [SMTRunnerEventsListener#TEST_STATUS](https://jb.gg/ipe/listeners?topics=com.intellij.execution.testframework.sm.runner.SMTRunnerEventsListener)  ![Project-Level][project-level] | [`SMTRunnerEventsListener`](%gh-ic%/platform/smRunner/src/com/intellij/execution/testframework/sm/runner/SMTRunnerEventsListener.java) |
| [RunConfigurationStartHistory#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.execution.ui.RunConfigurationStartHistory.Listener)  ![Project-Level][project-level] | [`Listener`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/ui/RunToolbarPopup.kt) |
| [RunContentManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.execution.ui.RunContentWithExecutorListener)  | [`RunContentWithExecutorListener`](%gh-ic%/platform/execution/src/com/intellij/execution/ui/RunContentWithExecutorListener.java) |
| [FacetManager#FACETS_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.facet.FacetManagerListener)  ![Project-Level][project-level] | [`FacetManagerListener`](%gh-ic%/platform/lang-core/src/com/intellij/facet/FacetManagerListener.java) |
| [FeatureStatisticsUpdateListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.featureStatistics.FeatureStatisticsUpdateListener)  ![Internal][internal] | [`FeatureStatisticsUpdateListener`](%gh-ic%/platform/platform-api/src/com/intellij/featureStatistics/FeatureStatisticsUpdateListener.kt) |
| [FeaturesRegistryListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.featureStatistics.FeaturesRegistryListener)  ![Experimental][experimental] | [`FeaturesRegistryListener`](%gh-ic%/platform/platform-api/src/com/intellij/featureStatistics/FeaturesRegistryListener.java) |
| [FindManager#FIND_MODEL_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.find.FindModelListener)  ![Project-Level][project-level] | [`FindModelListener`](%gh-ic%/platform/refactoring/src/com/intellij/find/FindModelListener.java) |
| [AppLifecycleListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.AppLifecycleListener)  | [`AppLifecycleListener`](%gh-ic%/platform/ide-core/src/com/intellij/ide/AppLifecycleListener.java) |
| [FrameStateListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.FrameStateListener)  | [`FrameStateListener`](%gh-ic%/platform/platform-api/src/com/intellij/ide/FrameStateListener.java) |
| [PowerSaveMode#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.PowerSaveMode.Listener)  | [`Listener`](%gh-ic%/platform/core-api/src/com/intellij/ide/PowerSaveMode.java) |
| [RecentProjectsManager.Companion#RECENT_PROJECTS_CHANGE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.RecentProjectsManager.RecentProjectsChange)  | [`RecentProjectsChange`](%gh-ic%/platform/ide-core/src/com/intellij/ide/RecentProjectsManager.kt) |
| [RegionSettingsListener#UPDATE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.RegionSettings.RegionSettingsListener)  ![Experimental][experimental] ![Internal][internal] | [`RegionSettingsListener`](%gh-ic%/platform/platform-api/src/com/intellij/ide/RegionSettings.java) |
| [SaveAndSyncHandlerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.SaveAndSyncHandlerListener)  ![Experimental][experimental] | [`SaveAndSyncHandlerListener`](%gh-ic%/platform/platform-api/src/com/intellij/ide/SaveAndSyncHandlerListener.java) |
| [SEHeaderActionListener.Companion#SE_HEADER_ACTION_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.actions.searcheverywhere.SEHeaderActionListener)  ![Internal][internal] | [`SEHeaderActionListener`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/searcheverywhere/SEHeaderActionListener.kt) |
| [SETabSwitcherListener.Companion#SE_TAB_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.actions.searcheverywhere.SETabSwitcherListener)  ![Internal][internal] | [`SETabSwitcherListener`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/searcheverywhere/SETabSwitcherListener.kt) |
| [SearchEverywhereUI#SEARCH_EVENTS](https://jb.gg/ipe/listeners?topics=com.intellij.ide.actions.searcheverywhere.SearchListener)  | [`SearchListener`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/searcheverywhere/SearchListener.java) |
| [BookmarksListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.bookmark.BookmarksListener)  | [`BookmarksListener`](%gh-ic%/platform/lang-api/src/com/intellij/ide/bookmark/BookmarksListener.java) |
| [BookmarksListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.bookmarks.BookmarksListener)  | [`BookmarksListener`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/bookmarks/BookmarksListener.java) |
| [BatchFileChangeListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.file.BatchFileChangeListener)  | [`BatchFileChangeListener`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/file/BatchFileChangeListener.java) |
| [DataSharingSettingsChangeListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.gdpr.DataSharingSettingsChangeListener)  ![Internal][internal] | [`DataSharingSettingsChangeListener`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/gdpr/DataSharingSettingsChangeListener.kt) |
| [TrustStateListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.impl.TrustStateListener)  ![Deprecated][deprecated] | [`TrustStateListener`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/impl/TrustedProjects.kt) |
| [LightEditServiceListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.lightEdit.LightEditServiceListener)  ![Experimental][experimental] | [`LightEditServiceListener`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/lightEdit/LightEditServiceListener.java) |
| [RiderMainToolbarStateListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.navigationToolbar.rider.RiderMainToolbarStateListener)  ![Project-Level][project-level] | [`RiderMainToolbarStateListener`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/navigationToolbar/rider/RiderMainToolbarRootPaneExtension.kt) |
| [DynamicPluginListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.plugins.DynamicPluginListener)  | [`DynamicPluginListener`](%gh-ic%/platform/core-api/src/com/intellij/ide/plugins/DynamicPluginListener.kt) |
| [PluginRepositoryAuthListener#PLUGIN_REPO_AUTH_CHANGED_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.plugins.auth.PluginRepositoryAuthListener)  | [`PluginRepositoryAuthListener`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/plugins/auth/PluginRepositoryAuthListener.java) |
| [ProjectViewSelectionTopicKt#PROJECT_VIEW_SELECTION_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.projectView.ProjectViewSelectionListener)  ![Project-Level][project-level] | [`ProjectViewSelectionListener`](%gh-ic%/platform/lang-api/src/com/intellij/ide/projectView/ProjectViewSelectionTopic.kt) |
| [ProjectViewListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.projectView.impl.ProjectViewListener)  ![Project-Level][project-level] | [`ProjectViewListener`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/projectView/impl/ProjectViewListener.java) |
| [TrustedProjectsListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.trustedProjects.TrustedProjectsListener)  ![Experimental][experimental] | [`TrustedProjectsListener`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/trustedProjects/TrustedProjectsListener.kt) |
| [LafManagerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.ui.LafManagerListener)  | [`LafManagerListener`](%gh-ic%/platform/platform-api/src/com/intellij/ide/ui/LafManagerListener.java) |
| [UISettingsListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.ui.UISettingsListener)  | [`UISettingsListener`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/ui/UISettingsListener.java) |
| [VirtualFileAppearanceListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.ui.VirtualFileAppearanceListener)  | [`VirtualFileAppearanceListener`](%gh-ic%/platform/platform-api/src/com/intellij/ide/ui/VirtualFileAppearanceListener.java) |
| [CustomActionsListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.ui.customization.CustomActionsListener)  | [`CustomActionsListener`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/ui/customization/CustomActionsListener.kt) |
| [ComponentHighlightingListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.ui.search.ComponentHighlightingListener)  | [`ComponentHighlightingListener`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/ui/search/ComponentHighlightingListener.java) |
| [FileStructurePopupListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.util.FileStructurePopupListener)  ![Experimental][experimental] ![Internal][internal] ![Project-Level][project-level] | [`FileStructurePopupListener`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/util/FileStructurePopupListener.java) |
| [SettingsChangedListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ide.util.scopeChooser.ScopeEditorPanel.SettingsChangedListener)  ![Project-Level][project-level] | [`SettingsChangedListener`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/util/scopeChooser/ScopeEditorPanel.java) |
| [EventLogConfigOptionsService#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.internal.statistic.eventLog.EventLogConfigOptionsListener)  | [`EventLogConfigOptionsListener`](%gh-ic%/platform/statistics/src/com/intellij/internal/statistic/eventLog/EventLogConfigOptionsListener.java) |
| [ExternalResourceListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.javaee.ExternalResourceListener)  | [`ExternalResourceListener`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/javaee/ExternalResourceListener.java) |
| [LocalizationListener.Companion#UPDATE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.l10n.LocalizationListener)  ![Internal][internal] | [`LocalizationListener`](%gh-ic%/platform/core-api/src/com/intellij/l10n/LocalizationListener.kt) |
| [DocumentationPopupListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.lang.documentation.ide.impl.DocumentationPopupListener)  ![Project-Level][project-level] | [`DocumentationPopupListener`](%gh-ic%/platform/lang-impl/src/com/intellij/lang/documentation/ide/impl/DocumentationPopupListener.kt) |
| [NotebookEditorModeKt#NOTEBOOK_EDITOR_MODE](https://jb.gg/ipe/listeners?topics=com.intellij.notebooks.ui.editor.actions.command.mode.NotebookEditorModeListener)  | [`NotebookEditorModeListener`](%gh-ic%/notebooks/notebook-ui/src/com/intellij/notebooks/ui/editor/actions/command/mode/NotebookEditorMode.kt) |
| [ChangeListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.notebooks.visualization.NotebookIntervalPointerFactory.ChangeListener)  | [`ChangeListener`](%gh-ic%/notebooks/visualization/src/com/intellij/notebooks/visualization/NotebookIntervalPointer.kt) |
| [JupyterCellSelectionNotifier.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.notebooks.visualization.ui.JupyterCellSelectionNotifier)  | [`JupyterCellSelectionNotifier`](%gh-ic%/notebooks/visualization/src/com/intellij/notebooks/visualization/ui/JupyterCellSelectionNotifier.kt) |
| [ActionCenter#MODEL_CHANGED](https://jb.gg/ipe/listeners?topics=com.intellij.notification.ActionCenter.EventListener)  | [`EventListener`](%gh-ic%/platform/platform-impl/src/com/intellij/notification/ActionCenter.java) |
| [Notifications#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.notification.Notifications)  ![Project-Level][project-level] | [`Notifications`](%gh-ic%/platform/ide-core/src/com/intellij/notification/Notifications.java) |
| [AnActionListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.actionSystem.ex.AnActionListener)  | [`AnActionListener`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/ex/AnActionListener.java) |
| [ToolbarActionsUpdatedListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.actionSystem.impl.segmentedActionBar.ToolbarActionsUpdatedListener)  ![Internal][internal] | [`ToolbarActionsUpdatedListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/actionSystem/impl/segmentedActionBar/ToolbarActionsUpdatedListener.java) |
| [ApplicationActivationListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.application.ApplicationActivationListener)  | [`ApplicationActivationListener`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/application/ApplicationActivationListener.java) |
| [CommandListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.command.CommandListener)  | [`CommandListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/command/CommandListener.java) |
| [UndoRedoListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.command.impl.UndoRedoListener)  ![Experimental][experimental] ![Internal][internal] | [`UndoRedoListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/command/impl/UndoRedoListener.kt) |
| [Listener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.editor.EditorMouseHoverPopupManager.Listener)  ![Internal][internal] ![Project-Level][project-level] | [`Listener`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/editor/EditorMouseHoverPopupManager.java) |
| [LatencyListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.editor.actionSystem.LatencyListener)  | [`LatencyListener`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/LatencyListener.java) |
| [EditorColorsManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.editor.colors.EditorColorsListener)  | [`EditorColorsListener`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/colors/EditorColorsListener.java) |
| [EditorColorsManagerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.editor.colors.impl.EditorColorsManagerListener)  ![Internal][internal] | [`EditorColorsManagerListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/editor/colors/impl/EditorColorsManagerListener.kt) |
| [DocumentBulkUpdateListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.editor.ex.DocumentBulkUpdateListener)  ![Deprecated][deprecated] ![Removal][removal] | [`DocumentBulkUpdateListener`](%gh-ic%/platform/core-impl/src/com/intellij/openapi/editor/ex/DocumentBulkUpdateListener.java) |
| [ExternalSystemProjectNotificationAware#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.externalSystem.autoimport.ExternalSystemProjectNotificationAware.Listener)  | [`Listener`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/autoimport/ExternalSystemProjectNotificationAware.kt) |
| [ProjectDataImportListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.externalSystem.service.project.manage.ProjectDataImportListener)  ![Project-Level][project-level] | [`ProjectDataImportListener`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/service/project/manage/ProjectDataImportListener.java) |
| [AppTopics#FILE_DOCUMENT_SYNC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.fileEditor.FileDocumentManagerListener)  ![Deprecated][deprecated] | [`FileDocumentManagerListener`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/fileEditor/FileDocumentManagerListener.java) |
| [FileDocumentManagerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.fileEditor.FileDocumentManagerListener)  | [`FileDocumentManagerListener`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/fileEditor/FileDocumentManagerListener.java) |
| [FileEditorManagerListener#FILE_EDITOR_MANAGER](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.fileEditor.FileEditorManagerListener)  ![Project-Level][project-level] | [`FileEditorManagerListener`](%gh-ic%/platform/analysis-api/src/com/intellij/openapi/fileEditor/FileEditorManagerListener.java) |
| [Before#FILE_EDITOR_MANAGER](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.fileEditor.FileEditorManagerListener.Before)  ![Project-Level][project-level] | [`Before`](%gh-ic%/platform/analysis-api/src/com/intellij/openapi/fileEditor/FileEditorManagerListener.java) |
| [FileOpenedSyncListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.fileEditor.FileOpenedSyncListener)  ![Project-Level][project-level] | [`FileOpenedSyncListener`](%gh-ic%/platform/analysis-api/src/com/intellij/openapi/fileEditor/FileOpenedSyncListener.kt) |
| [FileDocumentBindingListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.fileEditor.impl.FileDocumentBindingListener)  ![Experimental][experimental] ![Internal][internal] | [`FileDocumentBindingListener`](%gh-ic%/platform/core-impl/src/com/intellij/openapi/fileEditor/impl/FileDocumentBindingListener.kt) |
| [RecentPlacesListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.fileEditor.impl.IdeDocumentHistoryImpl.RecentPlacesListener)  ![Project-Level][project-level] | [`RecentPlacesListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/fileEditor/impl/IdeDocumentHistoryImpl.kt) |
| [FileTypeManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.fileTypes.FileTypeListener)  | [`FileTypeListener`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/fileTypes/FileTypeListener.java) |
| [KeymapManagerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.keymap.KeymapManagerListener)  | [`KeymapManagerListener`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/keymap/KeymapManagerListener.java) |
| [KeymapListener#CHANGE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.keymap.impl.ui.KeymapListener)  | [`KeymapListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/keymap/impl/ui/KeymapListener.java) |
| [AdvancedSettingsChangeListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.options.advanced.AdvancedSettingsChangeListener)  | [`AdvancedSettingsChangeListener`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/options/advanced/AdvancedSettings.kt) |
| [ExternalUpdateRequest#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.options.newEditor.ExternalUpdateRequest)  ![Experimental][experimental] ![Internal][internal] | [`ExternalUpdateRequest`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/options/newEditor/ExternalUpdateRequest.java) |
| [SettingsDialogListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.options.newEditor.SettingsDialogListener)  ![Experimental][experimental] ![Internal][internal] | [`SettingsDialogListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/options/newEditor/SettingsDialogListener.kt) |
| [ProgressManagerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.progress.ProgressManagerListener)  ![Internal][internal] | [`ProgressManagerListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/ProgressManagerListener.java) |
| [ProgressSuspender#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.progress.impl.ProgressSuspender.SuspenderListener)  | [`SuspenderListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/progress/impl/ProgressSuspender.java) |
| [ProgressWindow#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.progress.util.ProgressWindow.Listener)  | [`Listener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/progress/util/ProgressWindow.java) |
| [BaseProjectDirectories#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.project.BaseProjectDirectoriesListener)  ![Project-Level][project-level] | [`BaseProjectDirectoriesListener`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/project/BaseProjectDirectoriesListener.kt) |
| [DumbService#DUMB_MODE](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.project.DumbService.DumbModeListener)  ![Project-Level][project-level] | [`DumbModeListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/DumbService.kt) |
| [ProjectTopics#MODULES](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.project.ModuleListener)  ![Deprecated][deprecated] ![Project-Level][project-level] | [`ModuleListener`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/project/ModuleListener.java) |
| [ModuleListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.project.ModuleListener)  ![Project-Level][project-level] | [`ModuleListener`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/project/ModuleListener.java) |
| [ProjectCloseListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.project.ProjectCloseListener)  ![Experimental][experimental] | [`ProjectCloseListener`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/project/ProjectCloseListener.kt) |
| [ProjectManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.project.ProjectManagerListener)  | [`ProjectManagerListener`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/project/ProjectManagerListener.java) |
| [ProjectNameListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.project.ProjectNameListener)  ![Project-Level][project-level] | [`ProjectNameListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/project/ProjectNameListener.kt) |
| [DefaultProjectListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.project.impl.DefaultProjectListener)  ![Internal][internal] | [`DefaultProjectListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/project/impl/DefaultProjectListener.kt) |
| [ProjectLifecycleListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.project.impl.ProjectLifecycleListener)  | [`ProjectLifecycleListener`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/project/impl/ProjectLifecycleListener.java) |
| [ConfigFolderChangedListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.project.impl.shared.ConfigFolderChangedListener)  | [`ConfigFolderChangedListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/project/impl/shared/SharedConfigFolderUtil.kt) |
| [ProjectJdkTable#JDK_TABLE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.projectRoots.ProjectJdkTable.Listener)  | [`Listener`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/projectRoots/ProjectJdkTable.java) |
| [AdditionalLibraryRootsListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.roots.AdditionalLibraryRootsListener)  ![Experimental][experimental] ![Project-Level][project-level] | [`AdditionalLibraryRootsListener`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/AdditionalLibraryRootsListener.java) |
| [ProjectTopics#PROJECT_ROOTS](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.roots.ModuleRootListener)  ![Deprecated][deprecated] ![Project-Level][project-level] | [`ModuleRootListener`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ModuleRootListener.java) |
| [ModuleRootListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.roots.ModuleRootListener)  ![Project-Level][project-level] | [`ModuleRootListener`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ModuleRootListener.java) |
| [BalloonListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.ui.popup.BalloonListener)  | [`BalloonListener`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/popup/BalloonListener.kt) |
| [RegistryManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.util.registry.RegistryValueListener)  | [`RegistryValueListener`](%gh-ic%/platform/util/src/com/intellij/openapi/util/registry/RegistryValueListener.java) |
| [BranchChangeListener#VCS_BRANCH_CHANGED](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.BranchChangeListener)  | [`BranchChangeListener`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/BranchChangeListener.java) |
| [BranchRenameListener#VCS_BRANCH_RENAMED](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.BranchRenameListener)  | [`BranchRenameListener`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/BranchRenameListener.java) |
| [FileStatusListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.FileStatusListener)  ![Project-Level][project-level] | [`FileStatusListener`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/vcs/FileStatusListener.java) |
| [ProjectLevelVcsManager#VCS_CONFIGURATION_CHANGED_IN_PLUGIN](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.PluginVcsMappingListener)  ![Project-Level][project-level] | [`PluginVcsMappingListener`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/PluginVcsMappingListener.java) |
| [ProjectLevelVcsManager#VCS_CONFIGURATION_CHANGED](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.VcsMappingListener)  ![Project-Level][project-level] | [`VcsMappingListener`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/VcsMappingListener.java) |
| [ChangeListAvailabilityListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.ChangeListAvailabilityListener)  ![Internal][internal] | [`ChangeListAvailabilityListener`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/ChangeListAvailabilityListener.java) |
| [ChangeListListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.ChangeListListener)  | [`ChangeListListener`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/ChangeListListener.java) |
| [ChangesViewModifier#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.ChangesViewModifier.ChangesViewModifierListener)  ![Project-Level][project-level] | [`ChangesViewModifierListener`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/ChangesViewModifier.java) |
| [ChangesViewWorkflowManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.ChangesViewWorkflowManager.ChangesViewWorkflowListener)  ![Project-Level][project-level] | [`ChangesViewWorkflowListener`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/ChangesViewWorkflowManager.java) |
| [ChangeListManagerImpl#LISTS_LOADED](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.LocalChangeListsLoadedListener)  ![Project-Level][project-level] | [`LocalChangeListsLoadedListener`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/LocalChangeListsLoadedListener.java) |
| [VcsAnnotationRefresher#LOCAL_CHANGES_CHANGED](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.VcsAnnotationRefresher)  | [`VcsAnnotationRefresher`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/VcsAnnotationRefresher.java) |
| [VcsEditorTabFilesListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.VcsEditorTabFilesListener)  ![Internal][internal] | [`VcsEditorTabFilesListener`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/VcsEditorTabFilesManager.kt) |
| [Listener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.VcsFreezingProcess.Listener)  | [`Listener`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/VcsFreezingProcess.java) |
| [VcsManagedFilesHolder#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.VcsManagedFilesHolder.VcsManagedFilesHolderListener)  ![Project-Level][project-level] | [`VcsManagedFilesHolderListener`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/VcsManagedFilesHolder.java) |
| [CommittedChangesCache#COMMITTED_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.committed.CommittedChangesListener)  ![Project-Level][project-level] | [`CommittedChangesListener`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/committed/CommittedChangesListener.java) |
| [CommittedChangesTreeBrowser#ITEMS_RELOADED](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.committed.CommittedChangesTreeBrowser.CommittedChangesReloadListener)  ![Project-Level][project-level] | [`CommittedChangesReloadListener`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/committed/CommittedChangesTreeBrowser.java) |
| [VcsConfigurationChangeListener#BRANCHES_CHANGED_RESPONSE](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.committed.VcsConfigurationChangeListener.DetailedNotification)  ![Project-Level][project-level] | [`DetailedNotification`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/committed/VcsConfigurationChangeListener.java) |
| [VcsConfigurationChangeListener#BRANCHES_CHANGED](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.committed.VcsConfigurationChangeListener.Notification)  ![Project-Level][project-level] | [`Notification`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/committed/VcsConfigurationChangeListener.java) |
| [ShelveChangesManager#SHELF_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.shelf.ShelveChangesManagerListener)  ![Internal][internal] ![Project-Level][project-level] | [`ShelveChangesManagerListener`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/shelf/ShelveChangesManagerListener.java) |
| [ChangesViewContentManagerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.changes.ui.ChangesViewContentManagerListener)  ![Project-Level][project-level] | [`ChangesViewContentManagerListener`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/ui/ChangesViewContentManagerListener.kt) |
| [ProjectLevelVcsManagerEx#VCS_ACTIVATED](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.ex.VcsActivationListener)  ![Internal][internal] ![Project-Level][project-level] | [`VcsActivationListener`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/ex/VcsActivationListener.java) |
| [LineStatusTrackerSettingListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.impl.LineStatusTrackerSettingListener)  | [`LineStatusTrackerSettingListener`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/vcs/impl/LineStatusTrackerSettingListener.java) |
| [VcsBaseContentProviderListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.impl.VcsBaseContentProviderListener)  ![Project-Level][project-level] | [`VcsBaseContentProviderListener`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/impl/VcsBaseContentProviderListener.java) |
| [UpdatedFilesListener#UPDATED_FILES](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vcs.update.UpdatedFilesListener)  ![Project-Level][project-level] | [`UpdatedFilesListener`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/update/UpdatedFilesListener.java) |
| [VirtualFileManagerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vfs.VirtualFileManagerListener)  | [`VirtualFileManagerListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFileManagerListener.java) |
| [EncodingManagerListener#ENCODING_MANAGER_CHANGES](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vfs.encoding.EncodingManagerListener)  | [`EncodingManagerListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/encoding/EncodingManagerListener.java) |
| [VirtualFileManager#VFS_CHANGES](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vfs.newvfs.BulkFileListener)  | [`BulkFileListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/newvfs/BulkFileListener.java) |
| [VirtualFilePointerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.vfs.pointers.VirtualFilePointerListener)  | [`VirtualFilePointerListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/pointers/VirtualFilePointerListener.java) |
| [Info#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.wm.StatusBarInfo)  ![Project-Level][project-level] | [`StatusBarInfo`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/wm/StatusBarInfo.java) |
| [ToolWindowManagerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.wm.ex.ToolWindowManagerListener)  ![Project-Level][project-level] | [`ToolWindowManagerListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/ex/ToolWindowManagerListener.java) |
| [TitleInfoProvider#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.wm.impl.TitleInfoProvider.TitleInfoProviderListener)  ![Internal][internal] | [`TitleInfoProviderListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/TitleInfoProvider.kt) |
| [WelcomeBalloonLayoutImpl#BALLOON_NOTIFICATION_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.wm.impl.welcomeScreen.WelcomeBalloonLayoutImpl.BalloonNotificationListener)  | [`BalloonNotificationListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/welcomeScreen/WelcomeBalloonLayoutImpl.java) |
| [WelcomeScreenComponentListener#COMPONENT_CHANGED](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.wm.impl.welcomeScreen.WelcomeScreenComponentListener)  ![Internal][internal] | [`WelcomeScreenComponentListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/welcomeScreen/WelcomeScreenComponentListener.java) |
| [CloneableProjectsService#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.wm.impl.welcomeScreen.cloneableProjects.CloneableProjectsService.CloneProjectListener)  | [`CloneProjectListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/welcomeScreen/cloneableProjects/CloneableProjectsService.kt) |
| [CourseDataStorageKt#COURSE_DELETED](https://jb.gg/ipe/listeners?topics=com.intellij.openapi.wm.impl.welcomeScreen.learnIde.coursesInProgress.CourseDeletedListener)  ![Internal][internal] | [`CourseDeletedListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/welcomeScreen/learnIde/coursesInProgress/CourseDeletedListener.kt) |
| [ModuleAttachListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.platform.ModuleAttachListener)  ![Project-Level][project-level] | [`ModuleAttachListener`](%gh-ic%/platform/lang-impl/src/com/intellij/platform/ModuleAttachListener.kt) |
| [WorkspaceModelTopics#CHANGED](https://jb.gg/ipe/listeners?topics=com.intellij.platform.backend.workspace.WorkspaceModelChangeListener)  ![Obsolete][obsolete] ![Project-Level][project-level] | [`WorkspaceModelChangeListener`](%gh-ic%/platform/backend/workspace/src/WorkspaceModelTopics.kt) |
| [WorkspaceModelTopics#UNLOADED_ENTITIES_CHANGED](https://jb.gg/ipe/listeners?topics=com.intellij.platform.backend.workspace.WorkspaceModelUnloadedStorageChangeListener)  ![Internal][internal] ![Project-Level][project-level] | [`WorkspaceModelUnloadedStorageChangeListener`](%gh-ic%/platform/backend/workspace/src/WorkspaceModelTopics.kt) |
| [TelemetryReceivedListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.platform.diagnostic.telemetry.impl.TelemetryReceivedListener)  ![Experimental][experimental] ![Internal][internal] | [`TelemetryReceivedListener`](%gh-ic%/platform/diagnostic/telemetry-impl/src/TelemetryReceivedListener.kt) |
| [ExternalSystemTestUtil#SETTINGS_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.platform.externalSystem.testFramework.TestExternalSystemSettingsListener)  | [`TestExternalSystemSettingsListener`](%gh-ic%/platform/external-system-api/testFramework/src/com/intellij/platform/externalSystem/testFramework/TestExternalSystemSettingsListener.java) |
| [MLTaskListenerTyped.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.platform.ml.impl.tools.MessageBusMLTaskListenerProvider)  ![Internal][internal] | [`MessageBusMLTaskListenerProvider`](%gh-ic%/platform/ml-impl/src/com/intellij/platform/ml/impl/tools/IJPlatform.kt) |
| [MLTaskLoggingListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.platform.ml.impl.tools.MessageBusMLTaskLoggingListenerProvider)  ![Internal][internal] | [`MessageBusMLTaskLoggingListenerProvider`](%gh-ic%/platform/ml-impl/src/com/intellij/platform/ml/impl/tools/IJPlatform.kt) |
| [ProblemListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.problems.ProblemListener)  ![Project-Level][project-level] | [`ProblemListener`](%gh-ic%/platform/analysis-api/src/com/intellij/problems/ProblemListener.java) |
| [ProfileChangeAdapter#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.profile.ProfileChangeAdapter)  ![Project-Level][project-level] | [`ProfileChangeAdapter`](%gh-ic%/platform/analysis-api/src/com/intellij/profile/ProfileChangeAdapter.java) |
| [PsiDocumentListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.psi.PsiDocumentListener)  ![Project-Level][project-level] | [`PsiDocumentListener`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiDocumentListener.java) |
| [Listener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.psi.codeStyle.CodeStyleManager.Listener)  ![Project-Level][project-level] | [`Listener`](%gh-ic%/platform/core-api/src/com/intellij/psi/codeStyle/CodeStyleManager.java) |
| [CodeStyleSettingsListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.psi.codeStyle.CodeStyleSettingsListener)  ![Project-Level][project-level] | [`CodeStyleSettingsListener`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/codeStyle/CodeStyleSettingsListener.java) |
| [PsiManagerImpl#ANY_PSI_CHANGE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.psi.impl.AnyPsiChangeListener)  ![Project-Level][project-level] | [`AnyPsiChangeListener`](%gh-ic%/platform/core-impl/src/com/intellij/psi/impl/AnyPsiChangeListener.java) |
| [PsiDocumentTransactionListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.psi.impl.PsiDocumentTransactionListener)  ![Project-Level][project-level] | [`PsiDocumentTransactionListener`](%gh-ic%/platform/core-impl/src/com/intellij/psi/impl/PsiDocumentTransactionListener.java) |
| [FileTypeIndex#INDEX_CHANGE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.psi.search.FileTypeIndex.IndexChangeListener)  ![Experimental][experimental] | [`IndexChangeListener`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/FileTypeIndex.java) |
| [PsiModificationTracker#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.psi.util.PsiModificationTracker.Listener)  ![Project-Level][project-level] | [`Listener`](%gh-ic%/platform/core-api/src/com/intellij/psi/util/PsiModificationTracker.java) |
| [RefactoringEventListener#REFACTORING_EVENT_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.refactoring.listeners.RefactoringEventListener)  ![Project-Level][project-level] | [`RefactoringEventListener`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/listeners/RefactoringEventListener.java) |
| [RemoteMappingsListener#REMOTE_MAPPINGS_CHANGED](https://jb.gg/ipe/listeners?topics=com.intellij.remote.RemoteMappingsListener)  | [`RemoteMappingsListener`](%gh-ic%/platform/platform-impl/remote/src/com/intellij/remote/RemoteMappingsListener.java) |
| [RemoteServerListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.remoteServer.configuration.RemoteServerListener)  | [`RemoteServerListener`](%gh-ic%/platform/remote-servers/api/src/com/intellij/remoteServer/configuration/RemoteServerListener.java) |
| [ServerConnectionListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.remoteServer.runtime.ServerConnectionListener)  | [`ServerConnectionListener`](%gh-ic%/platform/remote-servers/api/src/com/intellij/remoteServer/runtime/ServerConnectionListener.java) |
| [SpellCheckerEngineListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.spellchecker.engine.SpellCheckerEngineListener)  ![Project-Level][project-level] | [`SpellCheckerEngineListener`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/engine/SpellCheckerEngineListener.java) |
| [ProjectTaskListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.task.ProjectTaskListener)  ![Project-Level][project-level] | [`ProjectTaskListener`](%gh-ic%/platform/lang-api/src/com/intellij/task/ProjectTaskListener.java) |
| [DeferredIconListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ui.DeferredIconListener)  ![Internal][internal] | [`DeferredIconListener`](%gh-ic%/platform/lang-impl/src/com/intellij/ui/DeferredIconListener.kt) |
| [AuthStateListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ui.JBAccountInfoService.AuthStateListener)  | [`AuthStateListener`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/JBAccountInfoService.java) |
| [LicenseStateListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ui.LicensingFacade.LicenseStateListener)  | [`LicenseStateListener`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/LicensingFacade.java) |
| [ToolWindowViewModelListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.ui.viewModel.extraction.ToolWindowViewModelListener)  ![Project-Level][project-level] | [`ToolWindowViewModelListener`](%gh-ic%/platform/platform-api/src/com/intellij/ui/viewModel/extraction/ToolWindowViewModelListener.java) |
| [UnindexedFilesUpdaterListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.util.indexing.UnindexedFilesUpdaterListener)  ![Deprecated][deprecated] | [`UnindexedFilesUpdaterListener`](%gh-ic%/platform/lang-impl/src/com/intellij/util/indexing/UnindexedFilesUpdaterListener.java) |
| [ProjectIndexingActivityHistoryListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.util.indexing.diagnostic.ProjectIndexingActivityHistoryListener)  | [`ProjectIndexingActivityHistoryListener`](%gh-ic%/platform/lang-impl/src/com/intellij/util/indexing/diagnostic/ProjectIndexingHistory.kt) |
| [CommitModeManager#COMMIT_MODE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.vcs.commit.CommitModeManager.CommitModeListener)  ![Project-Level][project-level] | [`CommitModeListener`](%gh-ic%/platform/vcs-impl/src/com/intellij/vcs/commit/CommitModeManager.kt) |
| [CommitModeManager#SETTINGS](https://jb.gg/ipe/listeners?topics=com.intellij.vcs.commit.CommitModeManager.SettingsListener)  | [`SettingsListener`](%gh-ic%/platform/vcs-impl/src/com/intellij/vcs/commit/CommitModeManager.kt) |
| [CommitMessageInspectionProfile#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.vcs.commit.message.CommitMessageInspectionProfile.ProfileListener)  | [`ProfileListener`](%gh-ic%/platform/vcs-impl/src/com/intellij/vcs/commit/message/CommitMessageInspectionProfile.java) |
| [VcsProjectLog#VCS_PROJECT_LOG_CHANGED](https://jb.gg/ipe/listeners?topics=com.intellij.vcs.log.impl.VcsProjectLog.ProjectLogListener)  ![Project-Level][project-level] | [`ProjectLogListener`](%gh-ic%/platform/vcs-log/impl/src/com/intellij/vcs/log/impl/VcsProjectLog.kt) |
| [VcsLogBookmarksListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.vcs.log.ui.VcsLogBookmarksListener)  | [`VcsLogBookmarksListener`](%gh-ic%/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/VcsLogBookmarkProvider.kt) |
| [VcsLogCustomColumnListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.vcs.log.ui.table.column.VcsLogCustomColumnListener)  | [`VcsLogCustomColumnListener`](%gh-ic%/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/table/column/VcsLogCustomColumn.kt) |
| [CommitLinksResolveListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.vcs.log.ui.table.links.CommitLinksResolveListener)  ![Experimental][experimental] ![Project-Level][project-level] | [`CommitLinksResolveListener`](%gh-ic%/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/table/links/CommitLinksProvider.kt) |
| [WebSymbolContextChangeListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.webSymbols.context.WebSymbolContextChangeListener)  | [`WebSymbolContextChangeListener`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/context/WebSymbolContextChangeListener.kt) |
| [JpsGlobalModelLoadedListener.Companion#LOADED](https://jb.gg/ipe/listeners?topics=com.intellij.workspaceModel.ide.JpsGlobalModelLoadedListener)  ![Internal][internal] | [`JpsGlobalModelLoadedListener`](%gh-ic%/platform/projectModel-api/src/com/intellij/workspaceModel/ide/JpsGlobalModelLoadedListener.kt) |
| [JpsProjectLoadedListener.Companion#LOADED](https://jb.gg/ipe/listeners?topics=com.intellij.workspaceModel.ide.JpsProjectLoadedListener)  ![Internal][internal] ![Project-Level][project-level] | [`JpsProjectLoadedListener`](%gh-ic%/platform/projectModel-api/src/com/intellij/workspaceModel/ide/JpsProjectLoadedListener.kt) |
| [XDebuggerManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.xdebugger.XDebuggerManagerListener)  ![Project-Level][project-level] | [`XDebuggerManagerListener`](%gh-ic%/platform/xdebugger-api/src/com/intellij/xdebugger/XDebuggerManagerListener.java) |
| [XEvaluationListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.xdebugger.XEvaluationListener)  ![Internal][internal] | [`XEvaluationListener`](%gh-ic%/platform/xdebugger-api/src/com/intellij/xdebugger/XEvaluationListener.kt) |
| [XBreakpointListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.xdebugger.breakpoints.XBreakpointListener)  ![Project-Level][project-level] | [`XBreakpointListener`](%gh-ic%/platform/xdebugger-api/src/com/intellij/xdebugger/breakpoints/XBreakpointListener.java) |
| [XDependentBreakpointListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.xdebugger.impl.breakpoints.XDependentBreakpointListener)  ![Project-Level][project-level] | [`XDependentBreakpointListener`](%gh-ic%/platform/xdebugger-impl/src/com/intellij/xdebugger/impl/breakpoints/XDependentBreakpointListener.java) |
| [BreadcrumbsInitListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.xml.breadcrumbs.BreadcrumbsInitListener)  ![Internal][internal] ![Project-Level][project-level] | [`BreadcrumbsInitListener`](%gh-ic%/platform/platform-impl/src/com/intellij/xml/breadcrumbs/BreadcrumbsInitListener.java) |
| [TodoConfiguration#PROPERTY_CHANGE](https://jb.gg/ipe/listeners?topics=java.beans.PropertyChangeListener)  ![Project-Level][project-level] | `PropertyChangeListener` |
| [IndexPatternProvider#INDEX_PATTERNS_CHANGED](https://jb.gg/ipe/listeners?topics=java.beans.PropertyChangeListener)  | `PropertyChangeListener` |
| [JsonSchemaVfsListener#JSON_SCHEMA_CHANGED](https://jb.gg/ipe/listeners?topics=java.lang.Runnable)  | `Runnable` |
| [JsonSchemaVfsListener#JSON_DEPS_CHANGED](https://jb.gg/ipe/listeners?topics=java.lang.Runnable)  | `Runnable` |
| [UsageFilteringRuleProvider#RULES_CHANGED](https://jb.gg/ipe/listeners?topics=java.lang.Runnable)  ![Project-Level][project-level] | `Runnable` |
| [SeverityRegistrar#SEVERITIES_CHANGED_TOPIC](https://jb.gg/ipe/listeners?topics=java.lang.Runnable)  ![Project-Level][project-level] | `Runnable` |
| [RemoteRevisionsCache#REMOTE_VERSION_CHANGED](https://jb.gg/ipe/listeners?topics=java.lang.Runnable)  ![Project-Level][project-level] | `Runnable` |
| [RunToolbarPopupKt#VOID_EXECUTION_TOPIC](https://jb.gg/ipe/listeners?topics=java.lang.Runnable)  ![Project-Level][project-level] | `Runnable` |
| [StructureViewWrapperImpl#STRUCTURE_CHANGED](https://jb.gg/ipe/listeners?topics=java.lang.Runnable)  | `Runnable` |
| [UpdateActionsListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.ide.UpdateActionsListener)  | [`UpdateActionsListener`](%gh-ic%/platform/built-in-server/src/org/jetbrains/ide/ToolboxUpdateActions.kt) |


### Analysis.xml

[`Analysis.xml`](%gh-ic%/platform/analysis-api/resources/META-INF/Analysis.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.codeInsight.containerProvider](https://jb.gg/ipe?extensions=com.intellij.codeInsight.containerProvider) | [`ContainerProvider`](%gh-ic%/platform/core-api/src/com/intellij/codeInsight/ContainerProvider.java) |
| [com.intellij.codeInspection.InspectionExtension](https://jb.gg/ipe?extensions=com.intellij.codeInspection.InspectionExtension) | [`InspectionExtensionsFactory`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/lang/InspectionExtensionsFactory.java) |
| [com.intellij.completion.contributor](https://jb.gg/ipe?extensions=com.intellij.completion.contributor) ![DumbAware][dumb-aware] | [`CompletionContributor`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/completion/CompletionContributor.java) |
| [com.intellij.completion.skip](https://jb.gg/ipe?extensions=com.intellij.completion.skip) | [`CompletionPreselectSkipper`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/completion/CompletionPreselectSkipper.java) |
| [com.intellij.documentationProvider](https://jb.gg/ipe?extensions=com.intellij.documentationProvider) ![Obsolete][obsolete] | [`DocumentationProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/documentation/DocumentationProvider.java) |
| [com.intellij.dynamicInspectionsProvider](https://jb.gg/ipe?extensions=com.intellij.dynamicInspectionsProvider) ![Internal][internal] | [`DynamicInspectionsProvider`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInspection/ex/dynamic-inspections.kt) |
| [com.intellij.fileContextProvider](https://jb.gg/ipe?extensions=com.intellij.fileContextProvider) ![Project-Level][project-level] | [`FileContextProvider`](%gh-ic%/platform/core-api/src/com/intellij/psi/FileContextProvider.java) |
| [com.intellij.fileLookupInfoProvider](https://jb.gg/ipe?extensions=com.intellij.fileLookupInfoProvider) | [`FileLookupInfoProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/psi/file/FileLookupInfoProvider.java) |
| [com.intellij.formatting.caretRestorationDecider](https://jb.gg/ipe?extensions=com.intellij.formatting.caretRestorationDecider) ![Experimental][experimental] | [`CaretRestorationDecider`](%gh-ic%/platform/analysis-api/src/com/intellij/formatting/CaretRestorationDecider.kt) |
| [com.intellij.generatedSourcesFilter](https://jb.gg/ipe?extensions=com.intellij.generatedSourcesFilter) | [`GeneratedSourcesFilter`](%gh-ic%/platform/analysis-api/src/com/intellij/openapi/roots/GeneratedSourcesFilter.kt) |
| [com.intellij.globalInspection](https://jb.gg/ipe?extensions=com.intellij.globalInspection) | [`GlobalInspectionTool`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/GlobalInspectionTool.java) |
| [com.intellij.gotoDeclarationHandler](https://jb.gg/ipe?extensions=com.intellij.gotoDeclarationHandler) | [`GotoDeclarationHandler`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/navigation/actions/GotoDeclarationHandler.java) |
| [com.intellij.highlightErrorFilter](https://jb.gg/ipe?extensions=com.intellij.highlightErrorFilter) ![Project-Level][project-level] | [`HighlightErrorFilter`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/highlighting/HighlightErrorFilter.java) |
| [com.intellij.inspectionCustomComponent](https://jb.gg/ipe?extensions=com.intellij.inspectionCustomComponent) ![Experimental][experimental] | [`CustomComponentExtension`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/options/CustomComponentExtension.java) |
| [com.intellij.inspectionElementsMerger](https://jb.gg/ipe?extensions=com.intellij.inspectionElementsMerger) | [`InspectionElementsMerger`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/ex/InspectionElementsMerger.java) |
| [com.intellij.inspectionToolProvider](https://jb.gg/ipe?extensions=com.intellij.inspectionToolProvider) | [`InspectionToolProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/InspectionToolProvider.java) |
| [com.intellij.inspectionsReportConverter](https://jb.gg/ipe?extensions=com.intellij.inspectionsReportConverter) | [`InspectionsReportConverter`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/InspectionsReportConverter.java) |
| [com.intellij.intentionAction](https://jb.gg/ipe?extensions=com.intellij.intentionAction) | [`CommonIntentionAction`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/CommonIntentionAction.java) |
| [com.intellij.lang.documentationProvider](https://jb.gg/ipe?extensions=com.intellij.lang.documentationProvider) ![Obsolete][obsolete] | [`DocumentationProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/documentation/DocumentationProvider.java) |
| [com.intellij.lang.inspectionSuppressor](https://jb.gg/ipe?extensions=com.intellij.lang.inspectionSuppressor) ![DumbAware][dumb-aware] | [`InspectionSuppressor`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/InspectionSuppressor.java) |
| [com.intellij.languageInjector](https://jb.gg/ipe?extensions=com.intellij.languageInjector) | [`LanguageInjector`](%gh-ic%/platform/analysis-api/src/com/intellij/psi/LanguageInjector.java) |
| [com.intellij.liveTemplateContext](https://jb.gg/ipe?extensions=com.intellij.liveTemplateContext) | [`TemplateContextType`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/template/TemplateContextType.java) |
| [com.intellij.liveTemplateContextProvider](https://jb.gg/ipe?extensions=com.intellij.liveTemplateContextProvider) | [`LiveTemplateContextProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/template/LiveTemplateContextProvider.java) |
| [com.intellij.liveTemplateInternalContext](https://jb.gg/ipe?extensions=com.intellij.liveTemplateInternalContext) | `n/a` |
| [com.intellij.liveTemplateMacro](https://jb.gg/ipe?extensions=com.intellij.liveTemplateMacro) | [`Macro`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/template/Macro.java) |
| [com.intellij.localFileSystemTimestampEvaluator](https://jb.gg/ipe?extensions=com.intellij.localFileSystemTimestampEvaluator) ![Internal][internal] | [`LocalFileSystemTimestampEvaluator`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/vfs/impl/local/LocalFileSystemTimestampEvaluator.java) |
| [com.intellij.localInspection](https://jb.gg/ipe?extensions=com.intellij.localInspection) ![DumbAware][dumb-aware] | [`LocalInspectionTool`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/LocalInspectionTool.java) |
| [com.intellij.optionController](https://jb.gg/ipe?extensions=com.intellij.optionController) ![Experimental][experimental] | [`OptionControllerProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/options/OptionControllerProvider.java) |
| [com.intellij.weigher](https://jb.gg/ipe?extensions=com.intellij.weigher) | [`Weigher`](%gh-ic%/platform/analysis-api/src/com/intellij/psi/Weigher.java) |

### AnalysisImpl.xml

[`AnalysisImpl.xml`](%gh-ic%/platform/analysis-impl/resources/META-INF/AnalysisImpl.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.dataflowIRProvider](https://jb.gg/ipe?extensions=com.intellij.dataflowIRProvider) | [`DataFlowIRProvider`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInspection/dataFlow/lang/ir/DataFlowIRProvider.java) |
| [com.intellij.elementLookupRenderer](https://jb.gg/ipe?extensions=com.intellij.elementLookupRenderer) ![Deprecated][deprecated] ![Removal][removal] | [`ElementLookupRenderer`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/lookup/impl/ElementLookupRenderer.java) |
| [com.intellij.liveTemplateOptionalProcessor](https://jb.gg/ipe?extensions=com.intellij.liveTemplateOptionalProcessor) ![DumbAware][dumb-aware] | [`TemplateOptionalProcessor`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/template/impl/TemplateOptionalProcessor.java) |
| [com.intellij.liveTemplatePreprocessor](https://jb.gg/ipe?extensions=com.intellij.liveTemplatePreprocessor) | [`TemplatePreprocessor`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/template/impl/TemplatePreprocessor.java) |
| [com.intellij.outerLanguageRangePatcher](https://jb.gg/ipe?extensions=com.intellij.outerLanguageRangePatcher) | [`OuterLanguageRangePatcher`](%gh-ic%/platform/analysis-impl/src/com/intellij/psi/templateLanguages/TemplateDataElementType.java) |
| [com.intellij.psi.fileReferenceHelper](https://jb.gg/ipe?extensions=com.intellij.psi.fileReferenceHelper) | [`FileReferenceHelper`](%gh-ic%/platform/analysis-impl/src/com/intellij/psi/impl/source/resolve/reference/impl/providers/FileReferenceHelper.java) |
| [com.intellij.resolveScopeEnlarger](https://jb.gg/ipe?extensions=com.intellij.resolveScopeEnlarger) | [`ResolveScopeEnlarger`](%gh-ic%/platform/analysis-impl/src/com/intellij/psi/ResolveScopeEnlarger.java) |
| [com.intellij.resolveScopeProvider](https://jb.gg/ipe?extensions=com.intellij.resolveScopeProvider) | [`ResolveScopeProvider`](%gh-ic%/platform/analysis-impl/src/com/intellij/psi/ResolveScopeProvider.java) |
| [com.intellij.severitiesProvider](https://jb.gg/ipe?extensions=com.intellij.severitiesProvider) ![Non-Dynamic][non-dynamic] | [`SeveritiesProvider`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/daemon/impl/SeveritiesProvider.java) |
| [com.intellij.useScopeEnlarger](https://jb.gg/ipe?extensions=com.intellij.useScopeEnlarger) | [`UseScopeEnlarger`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/UseScopeEnlarger.java) |
| [com.intellij.useScopeOptimizer](https://jb.gg/ipe?extensions=com.intellij.useScopeOptimizer) | [`ScopeOptimizer`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/ScopeOptimizer.java) |

### builtInServer.xml

[`builtInServer.xml`](%gh-ic%/platform/built-in-server/resources/META-INF/builtInServer.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.httpRequestHandler](https://jb.gg/ipe?extensions=com.intellij.httpRequestHandler) | [`HttpRequestHandler`](%gh-ic%/platform/platform-util-netty/src/org/jetbrains/ide/HttpRequestHandler.kt) |
| [com.intellij.toolboxServiceHandler](https://jb.gg/ipe?extensions=com.intellij.toolboxServiceHandler) ![Internal][internal] | [`ToolboxServiceHandler`](%gh-ic%/platform/built-in-server/src/org/jetbrains/ide/ToolboxRestService.kt) |
| [org.jetbrains.binaryRequestHandler](https://jb.gg/ipe?extensions=org.jetbrains.binaryRequestHandler) ![Non-Dynamic][non-dynamic] | [`BinaryRequestHandler`](%gh-ic%/platform/platform-util-netty/src/org/jetbrains/ide/BinaryRequestHandler.java) |
| [org.jetbrains.customPortServerManager](https://jb.gg/ipe?extensions=org.jetbrains.customPortServerManager) ![Non-Dynamic][non-dynamic] | [`CustomPortServerManager`](%gh-ic%/platform/built-in-server-api/src/org/jetbrains/ide/CustomPortServerManager.kt) |
| [org.jetbrains.jsonRpcDomain](https://jb.gg/ipe?extensions=org.jetbrains.jsonRpcDomain) ![Internal][internal] | `Object` |
| [org.jetbrains.webServerFileHandler](https://jb.gg/ipe?extensions=org.jetbrains.webServerFileHandler) | [`WebServerFileHandler`](%gh-ic%/platform/built-in-server/src/org/jetbrains/builtInWebServer/WebServerFileHandler.kt) |
| [org.jetbrains.webServerPathHandler](https://jb.gg/ipe?extensions=org.jetbrains.webServerPathHandler) | [`WebServerPathHandler`](%gh-ic%/platform/built-in-server/src/org/jetbrains/builtInWebServer/WebServerPathHandler.kt) |
| [org.jetbrains.webServerRootsProvider](https://jb.gg/ipe?extensions=org.jetbrains.webServerRootsProvider) | [`WebServerRootsProvider`](%gh-ic%/platform/built-in-server-api/src/org/jetbrains/builtInWebServer/WebServerRootsProvider.kt) |

### CodeStyle.xml

[`CodeStyle.xml`](%gh-ic%/platform/code-style-impl/resources/META-INF/CodeStyle.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.codeFormattingDataPreparer](https://jb.gg/ipe?extensions=com.intellij.codeFormattingDataPreparer) ![Internal][internal] | [`CodeFormattingDataPreparer`](%gh-ic%/platform/code-style-impl/src/com/intellij/psi/impl/source/codeStyle/CodeFormattingDataPreparer.java) |
| [com.intellij.codeStyleSettingsModifier](https://jb.gg/ipe?extensions=com.intellij.codeStyleSettingsModifier) ![Experimental][experimental] | [`CodeStyleSettingsModifier`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/codeStyle/modifier/CodeStyleSettingsModifier.java) |
| [com.intellij.disabledIndentRangesProvider](https://jb.gg/ipe?extensions=com.intellij.disabledIndentRangesProvider) | [`DisabledIndentRangesProvider`](%gh-ic%/platform/code-style-impl/src/com/intellij/psi/impl/source/DisabledIndentRangesProvider.java) |
| [com.intellij.externalFormatProcessor](https://jb.gg/ipe?extensions=com.intellij.externalFormatProcessor) ![Experimental][experimental] | [`ExternalFormatProcessor`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/codeStyle/ExternalFormatProcessor.java) |
| [com.intellij.fileCodeStyleProvider](https://jb.gg/ipe?extensions=com.intellij.fileCodeStyleProvider) | [`FileCodeStyleProvider`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/codeStyle/FileCodeStyleProvider.java) |
| [com.intellij.fileIndentOptionsProvider](https://jb.gg/ipe?extensions=com.intellij.fileIndentOptionsProvider) | [`FileIndentOptionsProvider`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/codeStyle/FileIndentOptionsProvider.java) |
| [com.intellij.formattingService](https://jb.gg/ipe?extensions=com.intellij.formattingService) | [`FormattingService`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/service/FormattingService.java) |
| [com.intellij.lang.formatter](https://jb.gg/ipe?extensions=com.intellij.lang.formatter) | [`FormattingModelBuilder`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/FormattingModelBuilder.java) |
| [com.intellij.lang.formatter.newLineIndentMarkerProvider](https://jb.gg/ipe?extensions=com.intellij.lang.formatter.newLineIndentMarkerProvider) | [`NewLineIndentMarkerProvider`](%gh-ic%/platform/code-style-impl/src/com/intellij/psi/impl/source/codeStyle/NewLineIndentMarkerProvider.java) |
| [com.intellij.lang.formatter.restriction](https://jb.gg/ipe?extensions=com.intellij.lang.formatter.restriction) | [`LanguageFormattingRestriction`](%gh-ic%/platform/code-style-api/src/com/intellij/lang/LanguageFormattingRestriction.java) |
| [com.intellij.lang.formatter.syntaxErrorsVerifier](https://jb.gg/ipe?extensions=com.intellij.lang.formatter.syntaxErrorsVerifier) | [`CustomAutoFormatSyntaxErrorsVerifier`](%gh-ic%/platform/code-style-api/src/com/intellij/lang/CustomAutoFormatSyntaxErrorsVerifier.java) |
| [com.intellij.lang.importOptimizer](https://jb.gg/ipe?extensions=com.intellij.lang.importOptimizer) | [`ImportOptimizer`](%gh-ic%/platform/code-style-api/src/com/intellij/lang/ImportOptimizer.java) |
| [com.intellij.lang.indentStrategy](https://jb.gg/ipe?extensions=com.intellij.lang.indentStrategy) | [`IndentStrategy`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/IndentStrategy.java) |
| [com.intellij.lang.lineWrapStrategy](https://jb.gg/ipe?extensions=com.intellij.lang.lineWrapStrategy) | [`LineWrapPositionStrategy`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/LineWrapPositionStrategy.java) |
| [com.intellij.lang.rearranger](https://jb.gg/ipe?extensions=com.intellij.lang.rearranger) | [`Rearranger`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/codeStyle/arrangement/Rearranger.java) |
| [com.intellij.lang.whiteSpaceFormattingStrategy](https://jb.gg/ipe?extensions=com.intellij.lang.whiteSpaceFormattingStrategy) | [`WhiteSpaceFormattingStrategy`](%gh-ic%/platform/code-style-impl/src/com/intellij/psi/formatter/WhiteSpaceFormattingStrategy.java) |
| [com.intellij.postFormatProcessor](https://jb.gg/ipe?extensions=com.intellij.postFormatProcessor) | [`PostFormatProcessor`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/impl/source/codeStyle/PostFormatProcessor.java) |
| [com.intellij.postQuickFixTaskService](https://jb.gg/ipe?extensions=com.intellij.postQuickFixTaskService) ![Internal][internal] | [`PostQuickFixTaskService`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/service/PostQuickFixTaskService.kt) |
| [com.intellij.preFormatProcessor](https://jb.gg/ipe?extensions=com.intellij.preFormatProcessor) | [`PreFormatProcessor`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/impl/source/codeStyle/PreFormatProcessor.java) |

### com.intellij.modules.json

[`com.intellij.modules.json`](%gh-ic%/json/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [JavaScript.JsonSchema.ContentAwareSchemaFileProvider](https://jb.gg/ipe?extensions=JavaScript.JsonSchema.ContentAwareSchemaFileProvider) | [`ContentAwareJsonSchemaFileProvider`](%gh-ic%/json/src/com/jetbrains/jsonSchema/extension/ContentAwareJsonSchemaFileProvider.java) |
| [JavaScript.JsonSchema.ProviderFactory](https://jb.gg/ipe?extensions=JavaScript.JsonSchema.ProviderFactory) ![DumbAware][dumb-aware] | [`JsonSchemaProviderFactory`](%gh-ic%/json/src/com/jetbrains/jsonSchema/extension/JsonSchemaProviderFactory.java) |
| [com.intellij.json.catalog.exclusion](https://jb.gg/ipe?extensions=com.intellij.json.catalog.exclusion) | [`JsonSchemaCatalogExclusion`](%gh-ic%/json/src/com/jetbrains/jsonSchema/remote/JsonSchemaCatalogExclusion.java) |
| [com.intellij.json.customStructureViewFactory](https://jb.gg/ipe?extensions=com.intellij.json.customStructureViewFactory) | [`JsonCustomStructureViewFactory`](%gh-ic%/json/src/com/intellij/json/structureView/JsonCustomStructureViewFactory.java) |
| [com.intellij.json.jsonLikePsiWalkerFactory](https://jb.gg/ipe?extensions=com.intellij.json.jsonLikePsiWalkerFactory) | [`JsonLikePsiWalkerFactory`](%gh-ic%/json/src/com/jetbrains/jsonSchema/extension/JsonLikePsiWalkerFactory.java) |
| [com.intellij.json.jsonSchemaCompletionCustomizer](https://jb.gg/ipe?extensions=com.intellij.json.jsonSchemaCompletionCustomizer) | [`JsonSchemaCompletionCustomizer`](%gh-ic%/json/src/com/jetbrains/jsonSchema/extension/JsonSchemaCompletionCustomizer.java) |
| [com.intellij.json.jsonSchemaEnabler](https://jb.gg/ipe?extensions=com.intellij.json.jsonSchemaEnabler) | [`JsonSchemaEnabler`](%gh-ic%/json/src/com/jetbrains/jsonSchema/extension/JsonSchemaEnabler.java) |
| [com.intellij.json.jsonSchemaGotoDeclarationSuppressor](https://jb.gg/ipe?extensions=com.intellij.json.jsonSchemaGotoDeclarationSuppressor) | [`JsonSchemaGotoDeclarationSuppressor`](%gh-ic%/json/src/com/jetbrains/jsonSchema/extension/JsonSchemaGotoDeclarationSuppressor.java) |
| [com.intellij.json.jsonSchemaNestedCompletionsTreeProvider](https://jb.gg/ipe?extensions=com.intellij.json.jsonSchemaNestedCompletionsTreeProvider) ![Experimental][experimental] | [`JsonSchemaNestedCompletionsTreeProvider`](%gh-ic%/json/src/com/jetbrains/jsonSchema/extension/JsonSchemaNestedCompletionsTreeProvider.kt) |
| [com.intellij.json.jsonSchemaQuickFixSuppressor](https://jb.gg/ipe?extensions=com.intellij.json.jsonSchemaQuickFixSuppressor) | [`JsonSchemaQuickFixSuppressor`](%gh-ic%/json/src/com/jetbrains/jsonSchema/extension/JsonSchemaQuickFixSuppressor.kt) |
| [com.intellij.json.jsonStandardComplianceProvider](https://jb.gg/ipe?extensions=com.intellij.json.jsonStandardComplianceProvider) | [`JsonStandardComplianceProvider`](%gh-ic%/json/src/com/intellij/json/codeinsight/JsonStandardComplianceProvider.java) |
| [com.intellij.json.jsonWidgetSuppressor](https://jb.gg/ipe?extensions=com.intellij.json.jsonWidgetSuppressor) | [`JsonWidgetSuppressor`](%gh-ic%/json/src/com/jetbrains/jsonSchema/extension/JsonWidgetSuppressor.java) |
| [com.intellij.json.shorthandValueHandler](https://jb.gg/ipe?extensions=com.intellij.json.shorthandValueHandler) | [`JsonSchemaShorthandValueHandler`](%gh-ic%/json/src/com/jetbrains/jsonSchema/extension/JsonSchemaShorthandValueHandler.kt) |

### com.intellij.platform.images

[`com.intellij.platform.images`](%gh-ic%/images/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.images.themeFilter](https://jb.gg/ipe?extensions=com.intellij.images.themeFilter) | [`ThemeFilter`](%gh-ic%/images/src/org/intellij/images/thumbnail/actions/ThemeFilter.java) |

### CompletionExtensionPoints.xml

[`CompletionExtensionPoints.xml`](%gh-ic%/platform/platform-resources/src/META-INF/CompletionExtensionPoints.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.codeInsight.wordCompletionFilter](https://jb.gg/ipe?extensions=com.intellij.codeInsight.wordCompletionFilter) | [`WordCompletionElementFilter`](%gh-ic%/platform/lang-api/src/com/intellij/lang/WordCompletionElementFilter.java) |
| [com.intellij.completion.confidence](https://jb.gg/ipe?extensions=com.intellij.completion.confidence) | [`CompletionConfidence`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/completion/CompletionConfidence.java) |
| [com.intellij.completion.ml.contextFeatures](https://jb.gg/ipe?extensions=com.intellij.completion.ml.contextFeatures) ![Internal][internal] | [`ContextFeatureProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/completion/ml/ContextFeatureProvider.java) |
| [com.intellij.completion.ml.elementFeatures](https://jb.gg/ipe?extensions=com.intellij.completion.ml.elementFeatures) ![Internal][internal] | [`ElementFeatureProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/completion/ml/ElementFeatureProvider.java) |
| [com.intellij.completion.ml.model](https://jb.gg/ipe?extensions=com.intellij.completion.ml.model) ![Internal][internal] | [`RankingModelProvider`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ml/completion/RankingModelProvider.java) |
| [com.intellij.completion.plainTextSymbol](https://jb.gg/ipe?extensions=com.intellij.completion.plainTextSymbol) | [`PlainTextSymbolCompletionContributor`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/completion/PlainTextSymbolCompletionContributor.java) |
| [com.intellij.completion.preselectionBehaviourProvider](https://jb.gg/ipe?extensions=com.intellij.completion.preselectionBehaviourProvider) | [`CompletionPreselectionBehaviourProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/completion/CompletionPreselectionBehaviourProvider.java) |
| [com.intellij.createDirectoryCompletionContributor](https://jb.gg/ipe?extensions=com.intellij.createDirectoryCompletionContributor) | [`CreateDirectoryCompletionContributor`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/CreateDirectoryCompletionContributor.java) |
| [com.intellij.lookup.actionProvider](https://jb.gg/ipe?extensions=com.intellij.lookup.actionProvider) | [`LookupActionProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/lookup/LookupActionProvider.java) |
| [com.intellij.lookup.charFilter](https://jb.gg/ipe?extensions=com.intellij.lookup.charFilter) | [`CharFilter`](%gh-ic%/platform/platform-impl/src/com/intellij/codeInsight/lookup/CharFilter.java) |
| [com.intellij.lookup.usageDetails](https://jb.gg/ipe?extensions=com.intellij.lookup.usageDetails) ![Internal][internal] | [`LookupUsageDescriptor`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/lookup/impl/LookupUsageDescriptor.java) |
| [com.intellij.lookup.vetoPolicy](https://jb.gg/ipe?extensions=com.intellij.lookup.vetoPolicy) ![Internal][internal] | [`LookupImplVetoPolicy`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/lookup/impl/LookupImplVetoPolicy.kt) |
| [com.intellij.templateParameterTraversalPolicy](https://jb.gg/ipe?extensions=com.intellij.templateParameterTraversalPolicy) | [`TemplateParameterTraversalPolicy`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/completion/TemplateParameterTraversalPolicy.java) |

### Core.xml

[`Core.xml`](%gh-ic%/platform/core-api/resources/META-INF/Core.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.backgroundPostStartupActivity](https://jb.gg/ipe?extensions=com.intellij.backgroundPostStartupActivity) | [`ProjectActivity`](%gh-ic%/platform/core-api/src/com/intellij/openapi/startup/StartupActivity.kt) |
| [com.intellij.editorFactoryDocumentListener](https://jb.gg/ipe?extensions=com.intellij.editorFactoryDocumentListener) | [`DocumentListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/editor/event/DocumentListener.java) |
| [com.intellij.fileIconPatcher](https://jb.gg/ipe?extensions=com.intellij.fileIconPatcher) | [`FileIconPatcher`](%gh-ic%/platform/core-api/src/com/intellij/ide/FileIconPatcher.java) |
| [com.intellij.fileIconProvider](https://jb.gg/ipe?extensions=com.intellij.fileIconProvider) | [`FileIconProvider`](%gh-ic%/platform/core-api/src/com/intellij/ide/FileIconProvider.java) |
| [com.intellij.fileTypeDetector](https://jb.gg/ipe?extensions=com.intellij.fileTypeDetector) | [`FileTypeDetector`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileTypes/FileTypeRegistry.java) |
| [com.intellij.filetype.decompiler](https://jb.gg/ipe?extensions=com.intellij.filetype.decompiler) | [`BinaryFileDecompiler`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileTypes/BinaryFileDecompiler.java) |
| [com.intellij.iconLayerProvider](https://jb.gg/ipe?extensions=com.intellij.iconLayerProvider) ![Non-Dynamic][non-dynamic] | [`IconLayerProvider`](%gh-ic%/platform/core-api/src/com/intellij/ide/IconLayerProvider.java) |
| [com.intellij.iconProvider](https://jb.gg/ipe?extensions=com.intellij.iconProvider) ![DumbAware][dumb-aware] | [`IconProvider`](%gh-ic%/platform/core-api/src/com/intellij/ide/IconProvider.java) |
| [com.intellij.initProjectActivity](https://jb.gg/ipe?extensions=com.intellij.initProjectActivity) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`InitProjectActivity`](%gh-ic%/platform/core-api/src/com/intellij/openapi/startup/StartupActivity.kt) |
| [com.intellij.inspection.basicVisitor](https://jb.gg/ipe?extensions=com.intellij.inspection.basicVisitor) ![Experimental][experimental] | [`PsiElementVisitor`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElementVisitor.java) |
| [com.intellij.lang.commenter](https://jb.gg/ipe?extensions=com.intellij.lang.commenter) | [`Commenter`](%gh-ic%/platform/core-api/src/com/intellij/lang/Commenter.java) |
| [com.intellij.lang.elementManipulator](https://jb.gg/ipe?extensions=com.intellij.lang.elementManipulator) | [`ElementManipulator`](%gh-ic%/platform/core-api/src/com/intellij/psi/ElementManipulator.java) |
| [com.intellij.lang.fileViewProviderFactory](https://jb.gg/ipe?extensions=com.intellij.lang.fileViewProviderFactory) | [`FileViewProviderFactory`](%gh-ic%/platform/core-api/src/com/intellij/psi/FileViewProviderFactory.java) |
| [com.intellij.lang.parserDefinition](https://jb.gg/ipe?extensions=com.intellij.lang.parserDefinition) | [`ParserDefinition`](%gh-ic%/platform/core-api/src/com/intellij/lang/ParserDefinition.java) |
| [com.intellij.lang.substitutor](https://jb.gg/ipe?extensions=com.intellij.lang.substitutor) | [`LanguageSubstitutor`](%gh-ic%/platform/core-api/src/com/intellij/psi/LanguageSubstitutor.java) |
| [com.intellij.languageBundle](https://jb.gg/ipe?extensions=com.intellij.languageBundle) ![Internal][internal] | `n/a` |
| [com.intellij.languageInjectionContributor](https://jb.gg/ipe?extensions=com.intellij.languageInjectionContributor) | [`LanguageInjectionContributor`](%gh-ic%/platform/core-api/src/com/intellij/lang/injection/general/LanguageInjectionContributor.java) |
| [com.intellij.languageInjectionPerformer](https://jb.gg/ipe?extensions=com.intellij.languageInjectionPerformer) | [`LanguageInjectionPerformer`](%gh-ic%/platform/core-api/src/com/intellij/lang/injection/general/LanguageInjectionPerformer.java) |
| [com.intellij.metaLanguage](https://jb.gg/ipe?extensions=com.intellij.metaLanguage) | [`MetaLanguage`](%gh-ic%/platform/core-api/src/com/intellij/lang/MetaLanguage.java) |
| [com.intellij.multiHostInjector](https://jb.gg/ipe?extensions=com.intellij.multiHostInjector) ![Project-Level][project-level] ![DumbAware][dumb-aware] | [`MultiHostInjector`](%gh-ic%/platform/core-api/src/com/intellij/lang/injection/MultiHostInjector.java) |
| [com.intellij.pom.declarationSearcher](https://jb.gg/ipe?extensions=com.intellij.pom.declarationSearcher) | [`PomDeclarationSearcher`](%gh-ic%/platform/core-api/src/com/intellij/pom/PomDeclarationSearcher.java) |
| [com.intellij.postStartupActivity](https://jb.gg/ipe?extensions=com.intellij.postStartupActivity) | [`ProjectActivity`](%gh-ic%/platform/core-api/src/com/intellij/openapi/startup/StartupActivity.kt) |
| [com.intellij.requiredForSmartModeStartupActivity](https://jb.gg/ipe?extensions=com.intellij.requiredForSmartModeStartupActivity) | [`RequiredForSmartMode`](%gh-ic%/platform/core-api/src/com/intellij/openapi/startup/StartupActivity.kt) |
| [com.intellij.stubElementTypeHolder](https://jb.gg/ipe?extensions=com.intellij.stubElementTypeHolder) | `n/a` |
| [com.intellij.vfs.asyncListener](https://jb.gg/ipe?extensions=com.intellij.vfs.asyncListener) | [`AsyncFileListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/AsyncFileListener.java) |
| [com.intellij.virtualFileManagerListener](https://jb.gg/ipe?extensions=com.intellij.virtualFileManagerListener) | [`VirtualFileManagerListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFileManagerListener.java) |
| [com.intellij.virtualFilePreCloseCheck](https://jb.gg/ipe?extensions=com.intellij.virtualFilePreCloseCheck) ![Non-Dynamic][non-dynamic] ![Experimental][experimental] | [`VirtualFilePreCloseCheck`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFilePreCloseCheck.kt) |
| [com.intellij.writingAccessProvider](https://jb.gg/ipe?extensions=com.intellij.writingAccessProvider) ![Project-Level][project-level] | [`WritingAccessProvider`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/WritingAccessProvider.java) |

### CoreImpl.xml

[`CoreImpl.xml`](%gh-ic%/platform/core-impl/resources/META-INF/CoreImpl.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.controlFlowProvider](https://jb.gg/ipe?extensions=com.intellij.controlFlowProvider) | [`ControlFlowProvider`](%gh-ic%/platform/core-impl/src/com/intellij/codeInsight/controlflow/ControlFlowProvider.java) |
| [com.intellij.diagnostic.freezeProfiler](https://jb.gg/ipe?extensions=com.intellij.diagnostic.freezeProfiler) ![Internal][internal] | [`FreezeProfiler`](%gh-ic%/platform/platform-impl/src/com/intellij/diagnostic/FreezeProfiler.java) |
| [com.intellij.documentWriteAccessGuard](https://jb.gg/ipe?extensions=com.intellij.documentWriteAccessGuard) ![Experimental][experimental] | [`DocumentWriteAccessGuard`](%gh-ic%/platform/core-impl/src/com/intellij/openapi/editor/impl/DocumentWriteAccessGuard.java) |
| [com.intellij.elementsToHighlightFilter](https://jb.gg/ipe?extensions=com.intellij.elementsToHighlightFilter) | [`Condition`](%gh-ic%/platform/util/src/com/intellij/openapi/util/Condition.java) |
| [com.intellij.fileEditor.fileSizeChecker](https://jb.gg/ipe?extensions=com.intellij.fileEditor.fileSizeChecker) ![Internal][internal] | [`FileSizeLimit`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/limits/FileSizeLimit.kt) |
| [com.intellij.fileEditor.textPresentationTransformer](https://jb.gg/ipe?extensions=com.intellij.fileEditor.textPresentationTransformer) ![Internal][internal] | [`TextPresentationTransformer`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/transformer/TextPresentationTransformer.kt) |
| [com.intellij.inlineCompletionLineRendererCustomization](https://jb.gg/ipe?extensions=com.intellij.inlineCompletionLineRendererCustomization) ![Internal][internal] | [`InlineCompletionInlayRenderer`](%gh-ic%/platform/platform-impl/src/com/intellij/codeInsight/inline/completion/render/InlineCompletionInlayRenderer.kt) |
| [com.intellij.lang.ast.factory](https://jb.gg/ipe?extensions=com.intellij.lang.ast.factory) | [`ASTFactory`](%gh-ic%/platform/core-impl/src/com/intellij/lang/ASTFactory.java) |
| [com.intellij.lang.tokenSeparatorGenerator](https://jb.gg/ipe?extensions=com.intellij.lang.tokenSeparatorGenerator) | [`TokenSeparatorGenerator`](%gh-ic%/platform/core-api/src/com/intellij/lang/TokenSeparatorGenerator.java) |
| [com.intellij.lang.treePatcher](https://jb.gg/ipe?extensions=com.intellij.lang.treePatcher) | [`TreePatcher`](%gh-ic%/platform/core-impl/src/com/intellij/psi/templateLanguages/TreePatcher.java) |
| [com.intellij.psi.implicitReferenceProvider](https://jb.gg/ipe?extensions=com.intellij.psi.implicitReferenceProvider) | [`ImplicitReferenceProvider`](%gh-ic%/platform/core-api/src/com/intellij/model/psi/ImplicitReferenceProvider.java) |
| [com.intellij.psi.referenceContributor](https://jb.gg/ipe?extensions=com.intellij.psi.referenceContributor) | [`PsiReferenceContributor`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReferenceContributor.java) |
| [com.intellij.psi.symbolReferenceProvider](https://jb.gg/ipe?extensions=com.intellij.psi.symbolReferenceProvider) | [`PsiSymbolReferenceProvider`](%gh-ic%/platform/core-api/src/com/intellij/model/psi/PsiSymbolReferenceProvider.java) |
| [com.intellij.psi.treeChangeListener](https://jb.gg/ipe?extensions=com.intellij.psi.treeChangeListener) ![Project-Level][project-level] | [`PsiTreeChangeListener`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiTreeChangeListener.java) |
| [com.intellij.psi.treeChangePreprocessor](https://jb.gg/ipe?extensions=com.intellij.psi.treeChangePreprocessor) ![Project-Level][project-level] | [`PsiTreeChangePreprocessor`](%gh-ic%/platform/core-impl/src/com/intellij/psi/impl/PsiTreeChangePreprocessor.java) |
| [com.intellij.smartPointer.anchorProvider](https://jb.gg/ipe?extensions=com.intellij.smartPointer.anchorProvider) | [`SmartPointerAnchorProvider`](%gh-ic%/platform/core-impl/src/com/intellij/psi/impl/smartPointers/SmartPointerAnchorProvider.java) |
| [com.intellij.treeCopyHandler](https://jb.gg/ipe?extensions=com.intellij.treeCopyHandler) | [`TreeCopyHandler`](%gh-ic%/platform/core-impl/src/com/intellij/psi/impl/source/tree/TreeCopyHandler.java) |
| [com.intellij.virtualFileSystem](https://jb.gg/ipe?extensions=com.intellij.virtualFileSystem) | [`VirtualFileSystem`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFileSystem.java) |

### DomPlugin.xml

[`DomPlugin.xml`](%gh-ic%/xml/dom-impl/src/META-INF/DomPlugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.dom.converter](https://jb.gg/ipe?extensions=com.intellij.dom.converter) | `n/a` |
| [com.intellij.dom.customAnnotationChecker](https://jb.gg/ipe?extensions=com.intellij.dom.customAnnotationChecker) | [`DomCustomAnnotationChecker`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/highlighting/DomCustomAnnotationChecker.java) |
| [com.intellij.dom.extender](https://jb.gg/ipe?extensions=com.intellij.dom.extender) | [`DomExtender`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/reflect/DomExtender.java) |
| [com.intellij.dom.fileDescription](https://jb.gg/ipe?extensions=com.intellij.dom.fileDescription) ![Deprecated][deprecated] | [`DomFileDescription`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/DomFileDescription.java) |
| [com.intellij.dom.fileMetaData](https://jb.gg/ipe?extensions=com.intellij.dom.fileMetaData) | [`DomFileDescription`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/DomFileDescription.java) |
| [com.intellij.dom.gotoSuper](https://jb.gg/ipe?extensions=com.intellij.dom.gotoSuper) | [`DomElementNavigationProvider`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/DomElementNavigationProvider.java) |
| [com.intellij.dom.implementation](https://jb.gg/ipe?extensions=com.intellij.dom.implementation) | [`DomElement`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/DomElement.java) |
| [com.intellij.dom.uiControlsProvider](https://jb.gg/ipe?extensions=com.intellij.dom.uiControlsProvider) ![Obsolete][obsolete] ![Non-Dynamic][non-dynamic] | [`Consumer`](%gh-ic%/platform/util/src/com/intellij/util/Consumer.java) |
| [com.intellij.moduleContextProvider](https://jb.gg/ipe?extensions=com.intellij.moduleContextProvider) | [`ModuleContextProvider`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/ModuleContextProvider.java) |

### duplicates-analysis.xml

[`duplicates-analysis.xml`](%gh-ic%/platform/duplicates-analysis/resources/META-INF/duplicates-analysis.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.equivalenceDescriptorProvider](https://jb.gg/ipe?extensions=com.intellij.equivalenceDescriptorProvider) | [`EquivalenceDescriptorProvider`](%gh-ic%/platform/duplicates-analysis/src/com/intellij/dupLocator/equivalence/EquivalenceDescriptorProvider.java) |

### Editor.xml

[`Editor.xml`](%gh-ic%/platform/editor-ui-api/resources/META-INF/Editor.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.editorFactoryListener](https://jb.gg/ipe?extensions=com.intellij.editorFactoryListener) | [`EditorFactoryListener`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/event/EditorFactoryListener.java) |
| [com.intellij.syntaxHighlighter](https://jb.gg/ipe?extensions=com.intellij.syntaxHighlighter) | [`SyntaxHighlighter`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/fileTypes/SyntaxHighlighter.java) |

### EditorExtensionPoints.xml

[`EditorExtensionPoints.xml`](%gh-ic%/platform/platform-resources/src/META-INF/EditorExtensionPoints.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.backspaceHandlerDelegate](https://jb.gg/ipe?extensions=com.intellij.backspaceHandlerDelegate) | [`BackspaceHandlerDelegate`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/BackspaceHandlerDelegate.java) |
| [com.intellij.basicWordSelectionFilter](https://jb.gg/ipe?extensions=com.intellij.basicWordSelectionFilter) | [`Condition`](%gh-ic%/platform/util/src/com/intellij/openapi/util/Condition.java) |
| [com.intellij.bidiRegionsSeparator](https://jb.gg/ipe?extensions=com.intellij.bidiRegionsSeparator) | [`BidiRegionsSeparator`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/bidi/BidiRegionsSeparator.java) |
| [com.intellij.codeBlockProvider](https://jb.gg/ipe?extensions=com.intellij.codeBlockProvider) | [`CodeBlockProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/CodeBlockProvider.java) |
| [com.intellij.codeInsight.fillParagraph](https://jb.gg/ipe?extensions=com.intellij.codeInsight.fillParagraph) | [`ParagraphFillHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/fillParagraph/ParagraphFillHandler.java) |
| [com.intellij.commentCompleteHandler](https://jb.gg/ipe?extensions=com.intellij.commentCompleteHandler) | [`CommentCompleteHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/CommentCompleteHandler.java) |
| [com.intellij.copyPastePostProcessor](https://jb.gg/ipe?extensions=com.intellij.copyPastePostProcessor) | [`CopyPastePostProcessor`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/CopyPastePostProcessor.java) |
| [com.intellij.copyPastePreProcessor](https://jb.gg/ipe?extensions=com.intellij.copyPastePreProcessor) | [`CopyPastePreProcessor`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/CopyPastePreProcessor.java) |
| [com.intellij.customPasteProvider](https://jb.gg/ipe?extensions=com.intellij.customPasteProvider) | [`PasteProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ide/PasteProvider.java) |
| [com.intellij.editor.backspaceModeOverride](https://jb.gg/ipe?extensions=com.intellij.editor.backspaceModeOverride) | [`BackspaceModeOverride`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/BackspaceModeOverride.java) |
| [com.intellij.enterBetweenBracesDelegate](https://jb.gg/ipe?extensions=com.intellij.enterBetweenBracesDelegate) | [`EnterBetweenBracesDelegate`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/enter/EnterBetweenBracesDelegate.java) |
| [com.intellij.enterHandlerDelegate](https://jb.gg/ipe?extensions=com.intellij.enterHandlerDelegate) | [`EnterHandlerDelegate`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/enter/EnterHandlerDelegate.java) |
| [com.intellij.extendWordSelectionHandler](https://jb.gg/ipe?extensions=com.intellij.extendWordSelectionHandler) | [`ExtendWordSelectionHandler`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/ExtendWordSelectionHandler.java) |
| [com.intellij.flipCommaIntention.flipper](https://jb.gg/ipe?extensions=com.intellij.flipCommaIntention.flipper) | [`Flipper`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/editor/actions/FlipCommaIntention.java) |
| [com.intellij.generalEditorOptionsCustomizer](https://jb.gg/ipe?extensions=com.intellij.generalEditorOptionsCustomizer) ![Internal][internal] | [`EditorOptionsPageCustomizer`](%gh-ic%/platform/lang-impl/src/com/intellij/application/options/editor/EditorOptionsPageCustomizer.kt) |
| [com.intellij.generalEditorOptionsExtension](https://jb.gg/ipe?extensions=com.intellij.generalEditorOptionsExtension) | [`UnnamedConfigurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/UnnamedConfigurable.java) |
| [com.intellij.inline.completion.element.manipulator](https://jb.gg/ipe?extensions=com.intellij.inline.completion.element.manipulator) ![Experimental][experimental] | [`InlineCompletionElementManipulator`](%gh-ic%/platform/platform-impl/src/com/intellij/codeInsight/inline/completion/elements/InlineCompletionElementManipulator.kt) |
| [com.intellij.inline.completion.handlerInitializer](https://jb.gg/ipe?extensions=com.intellij.inline.completion.handlerInitializer) ![Internal][internal] | [`InlineCompletionHandlerInitializer`](%gh-ic%/platform/platform-impl/src/com/intellij/codeInsight/inline/completion/InlineCompletionHandlerInitializer.kt) |
| [com.intellij.inline.completion.partial.accept.handler](https://jb.gg/ipe?extensions=com.intellij.inline.completion.partial.accept.handler) ![Experimental][experimental] ![Internal][internal] | [`InlineCompletionPartialAcceptHandler`](%gh-ic%/platform/platform-impl/src/com/intellij/codeInsight/inline/completion/suggestion/InlineCompletionPartialAcceptHandler.kt) |
| [com.intellij.inline.completion.provider](https://jb.gg/ipe?extensions=com.intellij.inline.completion.provider) | [`InlineCompletionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/codeInsight/inline/completion/InlineCompletionProvider.kt) |
| [com.intellij.inline.completion.quoteHandlerEx](https://jb.gg/ipe?extensions=com.intellij.inline.completion.quoteHandlerEx) ![Experimental][experimental] ![Internal][internal] | [`InlineCompletionQuoteHandlerEx`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/inline/completion/suggestion/InlineCompletionQuoteHandlerEx.kt) |
| [com.intellij.inline.completion.session.logs](https://jb.gg/ipe?extensions=com.intellij.inline.completion.session.logs) ![Internal][internal] | [`InlineCompletionSessionLogsEP`](%gh-ic%/platform/platform-impl/src/com/intellij/codeInsight/inline/completion/logs/InlineCompletionSessionLogsEP.kt) |
| [com.intellij.inline.completion.usage.data](https://jb.gg/ipe?extensions=com.intellij.inline.completion.usage.data) ![Internal][internal] | [`InlineCompletionProviderSpecificUsageData`](%gh-ic%/platform/platform-impl/src/com/intellij/codeInsight/inline/completion/logs/InlineCompletionProviderSpecificUsageData.kt) |
| [com.intellij.joinLinesHandler](https://jb.gg/ipe?extensions=com.intellij.joinLinesHandler) | [`JoinLinesHandlerDelegate`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/JoinLinesHandlerDelegate.java) |
| [com.intellij.lang.emacs](https://jb.gg/ipe?extensions=com.intellij.lang.emacs) | [`EmacsProcessingHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/emacs/EmacsProcessingHandler.java) |
| [com.intellij.lang.quoteHandler](https://jb.gg/ipe?extensions=com.intellij.lang.quoteHandler) | [`QuoteHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/QuoteHandler.java) |
| [com.intellij.lang.smartEnterProcessor](https://jb.gg/ipe?extensions=com.intellij.lang.smartEnterProcessor) | [`SmartEnterProcessor`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/smartEnter/SmartEnterProcessor.java) |
| [com.intellij.listSplitJoinContext](https://jb.gg/ipe?extensions=com.intellij.listSplitJoinContext) ![Experimental][experimental] | [`ListSplitJoinContext`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/editor/actions/lists/ListSplitJoinContext.kt) |
| [com.intellij.moveLeftRightHandler](https://jb.gg/ipe?extensions=com.intellij.moveLeftRightHandler) | [`MoveElementLeftRightHandler`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/moveLeftRight/MoveElementLeftRightHandler.java) |
| [com.intellij.preserveIndentOnPaste](https://jb.gg/ipe?extensions=com.intellij.preserveIndentOnPaste) ![Internal][internal] | `n/a` |
| [com.intellij.quoteHandler](https://jb.gg/ipe?extensions=com.intellij.quoteHandler) ![Internal][internal] | [`QuoteHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/QuoteHandler.java) |
| [com.intellij.selectionUnquotingFilter](https://jb.gg/ipe?extensions=com.intellij.selectionUnquotingFilter) | [`UnquotingFilter`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/SelectionQuotingTypedHandler.java) |
| [com.intellij.statementUpDownMover](https://jb.gg/ipe?extensions=com.intellij.statementUpDownMover) | [`StatementUpDownMover`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/moveUpDown/StatementUpDownMover.java) |
| [com.intellij.typedHandler](https://jb.gg/ipe?extensions=com.intellij.typedHandler) | [`TypedHandlerDelegate`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/TypedHandlerDelegate.java) |
| [com.intellij.typingActionsExtension](https://jb.gg/ipe?extensions=com.intellij.typingActionsExtension) ![Experimental][experimental] | [`TypingActionsExtension`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/TypingActionsExtension.java) |
| [com.intellij.wordBoundaryFilter](https://jb.gg/ipe?extensions=com.intellij.wordBoundaryFilter) | [`WordBoundaryFilter`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/actions/WordBoundaryFilter.java) |

### ExternalSystemDependencyUpdater.xml

[`ExternalSystemDependencyUpdater.xml`](%gh-ic%/platform/external-system-api/dependency-updater/resources/META-INF/ExternalSystemDependencyUpdater.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.externalSystem.dependencyModifier](https://jb.gg/ipe?extensions=com.intellij.externalSystem.dependencyModifier) ![Experimental][experimental] ![Project-Level][project-level] | [`ExternalDependencyModificator`](%gh-ic%/platform/external-system-api/dependency-updater/src/com/intellij/externalSystem/ExternalDependencyModificator.java) |

### ExternalSystemExtensionPoints.xml

[`ExternalSystemExtensionPoints.xml`](%gh-ic%/platform/external-system-impl/resources/META-INF/ExternalSystemExtensionPoints.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.externalExecutionAware](https://jb.gg/ipe?extensions=com.intellij.externalExecutionAware) ![Experimental][experimental] | [`ExternalSystemExecutionAware`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/service/execution/ExternalSystemExecutionAware.kt) |
| [com.intellij.externalIconProvider](https://jb.gg/ipe?extensions=com.intellij.externalIconProvider) | [`ExternalSystemIconProvider`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/ui/ExternalSystemIconProvider.kt) |
| [com.intellij.externalProjectDataService](https://jb.gg/ipe?extensions=com.intellij.externalProjectDataService) | [`ProjectDataService`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/service/project/manage/ProjectDataService.java) |
| [com.intellij.externalProjectStructureCustomizer](https://jb.gg/ipe?extensions=com.intellij.externalProjectStructureCustomizer) | [`ExternalProjectStructureCustomizer`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/importing/ExternalProjectStructureCustomizer.java) |
| [com.intellij.externalProjectWatcherContributor](https://jb.gg/ipe?extensions=com.intellij.externalProjectWatcherContributor) ![Deprecated][deprecated] | [`Contributor`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/service/project/autoimport/ExternalSystemProjectsWatcherImpl.java) |
| [com.intellij.externalSystem.beforeRunTaskImporter](https://jb.gg/ipe?extensions=com.intellij.externalSystem.beforeRunTaskImporter) | [`BeforeRunTaskImporter`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/service/project/settings/BeforeRunTaskImporter.java) |
| [com.intellij.externalSystem.debuggerBackend](https://jb.gg/ipe?extensions=com.intellij.externalSystem.debuggerBackend) | [`DebuggerBackendExtension`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/debugger/DebuggerBackendExtension.java) |
| [com.intellij.externalSystem.facetConfigurationImporter](https://jb.gg/ipe?extensions=com.intellij.externalSystem.facetConfigurationImporter) | [`FacetConfigurationImporter`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/service/project/settings/FacetConfigurationImporter.java) |
| [com.intellij.externalSystem.modifiableModelsProvider](https://jb.gg/ipe?extensions=com.intellij.externalSystem.modifiableModelsProvider) ![Experimental][experimental] | [`ModifiableModelsProviderExtension`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/service/project/ModifiableModelsProviderExtension.java) |
| [com.intellij.externalSystem.moduleDataServiceExtension](https://jb.gg/ipe?extensions=com.intellij.externalSystem.moduleDataServiceExtension) ![Deprecated][deprecated] ![Internal][internal] | [`ModuleDataServiceExtension`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/service/project/manage/ModuleDataServiceExtension.java) |
| [com.intellij.externalSystem.runConfigurationEx](https://jb.gg/ipe?extensions=com.intellij.externalSystem.runConfigurationEx) | [`ExternalSystemRunConfigurationExtension`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/service/execution/configuration/ExternalSystemRunConfigurationExtension.kt) |
| [com.intellij.externalSystem.runConfigurationImporter](https://jb.gg/ipe?extensions=com.intellij.externalSystem.runConfigurationImporter) | [`RunConfigurationImporter`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/service/project/settings/RunConfigurationImporter.java) |
| [com.intellij.externalSystemConfigLocator](https://jb.gg/ipe?extensions=com.intellij.externalSystemConfigLocator) | [`ExternalSystemConfigLocator`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/service/settings/ExternalSystemConfigLocator.java) |
| [com.intellij.externalSystemConfigurationHandler](https://jb.gg/ipe?extensions=com.intellij.externalSystemConfigurationHandler) ![Experimental][experimental] | [`ConfigurationHandler`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/service/project/settings/ConfigurationHandler.java) |
| [com.intellij.externalSystemContentRootContributor](https://jb.gg/ipe?extensions=com.intellij.externalSystemContentRootContributor) | [`ExternalSystemContentRootContributor`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/util/ExternalSystemContentRootContributor.kt) |
| [com.intellij.externalSystemCrcCalculator](https://jb.gg/ipe?extensions=com.intellij.externalSystemCrcCalculator) ![Experimental][experimental] | [`ExternalSystemCrcCalculator`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/util/ExternalSystemCrcCalculator.kt) |
| [com.intellij.externalSystemDependencyAnalyzer](https://jb.gg/ipe?extensions=com.intellij.externalSystemDependencyAnalyzer) | [`DependencyAnalyzerExtension`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/dependency/analyzer/DependencyAnalyzerExtension.kt) |
| [com.intellij.externalSystemExecutionConsoleManager](https://jb.gg/ipe?extensions=com.intellij.externalSystemExecutionConsoleManager) | [`ExternalSystemExecutionConsoleManager`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/execution/ExternalSystemExecutionConsoleManager.java) |
| [com.intellij.externalSystemKeymapProvider](https://jb.gg/ipe?extensions=com.intellij.externalSystemKeymapProvider) | [`ActionsProvider`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/service/project/manage/ExternalSystemKeymapExtension.java) |
| [com.intellij.externalSystemManager](https://jb.gg/ipe?extensions=com.intellij.externalSystemManager) | [`ExternalSystemManager`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/ExternalSystemManager.java) |
| [com.intellij.externalSystemNotificationExtension](https://jb.gg/ipe?extensions=com.intellij.externalSystemNotificationExtension) | [`ExternalSystemNotificationExtension`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/service/notification/ExternalSystemNotificationExtension.java) |
| [com.intellij.externalSystemOutputDispatcher](https://jb.gg/ipe?extensions=com.intellij.externalSystemOutputDispatcher) | [`ExternalSystemOutputDispatcherFactory`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/service/execution/ExternalSystemOutputDispatcherFactory.kt) |
| [com.intellij.externalSystemOutputParserProvider](https://jb.gg/ipe?extensions=com.intellij.externalSystemOutputParserProvider) | [`ExternalSystemOutputParserProvider`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/service/execution/ExternalSystemOutputParserProvider.java) |
| [com.intellij.externalSystemRecoveryContributor](https://jb.gg/ipe?extensions=com.intellij.externalSystemRecoveryContributor) | [`Factory`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/service/project/manage/ExternalSystemRecoveryContributor.kt) |
| [com.intellij.externalSystemSettingsListener](https://jb.gg/ipe?extensions=com.intellij.externalSystemSettingsListener) | [`ExternalSystemSettingsListenerEx`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/settings/ExternalSystemSettingsListenerEx.kt) |
| [com.intellij.externalSystemTaskNotificationListener](https://jb.gg/ipe?extensions=com.intellij.externalSystemTaskNotificationListener) | [`ExternalSystemTaskNotificationListener`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/model/task/ExternalSystemTaskNotificationListener.java) |
| [com.intellij.externalSystemTaskProgressIndicatorUpdater](https://jb.gg/ipe?extensions=com.intellij.externalSystemTaskProgressIndicatorUpdater) | [`ExternalSystemTaskProgressIndicatorUpdater`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/service/ExternalSystemTaskProgressIndicatorUpdater.kt) |
| [com.intellij.externalSystemUnlinkedProjectAware](https://jb.gg/ipe?extensions=com.intellij.externalSystemUnlinkedProjectAware) | [`ExternalSystemUnlinkedProjectAware`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/autolink/ExternalSystemUnlinkedProjectAware.kt) |
| [com.intellij.externalSystemViewContributor](https://jb.gg/ipe?extensions=com.intellij.externalSystemViewContributor) | [`ExternalSystemViewContributor`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/view/ExternalSystemViewContributor.java) |
| [com.intellij.externalSystemWorkspaceContributor](https://jb.gg/ipe?extensions=com.intellij.externalSystemWorkspaceContributor) ![Experimental][experimental] | [`ExternalSystemWorkspaceContributor`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/service/project/ExternalSystemWorkspaceContributor.java) |
| [com.intellij.externalTextProvider](https://jb.gg/ipe?extensions=com.intellij.externalTextProvider) | [`ExternalSystemTextProvider`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/ui/ExternalSystemTextProvider.kt) |
| [com.intellij.externalWorkspaceDataService](https://jb.gg/ipe?extensions=com.intellij.externalWorkspaceDataService) ![Experimental][experimental] | [`WorkspaceDataService`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/service/project/manage/WorkspaceDataService.kt) |
| [com.intellij.libraryDataServiceExtension](https://jb.gg/ipe?extensions=com.intellij.libraryDataServiceExtension) ![Internal][internal] | [`LibraryDataServiceExtension`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/service/project/manage/LibraryDataServiceExtension.java) |
| [com.intellij.openapi.externalSystem.autoimport.autoReloadTypeProviderExtension](https://jb.gg/ipe?extensions=com.intellij.openapi.externalSystem.autoimport.autoReloadTypeProviderExtension) ![Internal][internal] | [`DefaultAutoReloadTypeProvider`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/autoimport/DefaultAutoReloadTypeProvider.kt) |
| [com.intellij.openapi.externalSystem.projectSetupExtension](https://jb.gg/ipe?extensions=com.intellij.openapi.externalSystem.projectSetupExtension) ![Internal][internal] | [`ExternalSystemProjectSetupExtension`](%gh-ic%/platform/external-system-impl/src/com/intellij/openapi/externalSystem/service/project/manage/ExternalSystemProjectSetupExtension.kt) |

### FormatterExtensionPoints.xml

[`FormatterExtensionPoints.xml`](%gh-ic%/platform/platform-resources/src/META-INF/FormatterExtensionPoints.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.documentMerger](https://jb.gg/ipe?extensions=com.intellij.documentMerger) | [`DocumentMerger`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/service/DocumentMerger.java) |
| [com.intellij.fileSetDescriptorFactory](https://jb.gg/ipe?extensions=com.intellij.fileSetDescriptorFactory) | [`FileSetDescriptorFactory`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/fileSet/FileSetDescriptorFactory.java) |
| [com.intellij.fileTypeIndentOptionsProvider](https://jb.gg/ipe?extensions=com.intellij.fileTypeIndentOptionsProvider) | [`FileTypeIndentOptionsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/psi/codeStyle/FileTypeIndentOptionsProvider.java) |
| [com.intellij.formatOnSaveOptions.defaultsProvider](https://jb.gg/ipe?extensions=com.intellij.formatOnSaveOptions.defaultsProvider) | [`DefaultsProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/actions/onSave/FormatOnSaveOptionsBase.java) |
| [com.intellij.formatting.injectedOptions](https://jb.gg/ipe?extensions=com.intellij.formatting.injectedOptions) | [`InjectedFormattingOptionsProvider`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/InjectedFormattingOptionsProvider.java) |
| [com.intellij.lang.formatting.extractor](https://jb.gg/ipe?extensions=com.intellij.lang.formatting.extractor) | [`LangCodeStyleExtractor`](%gh-ic%/platform/lang-api/src/com/intellij/psi/codeStyle/extractor/differ/LangCodeStyleExtractor.java) |
| [com.intellij.langCodeStyleSettingsContributor](https://jb.gg/ipe?extensions=com.intellij.langCodeStyleSettingsContributor) ![Internal][internal] | [`LanguageCodeStyleSettingsContributor`](%gh-ic%/platform/lang-api/src/com/intellij/psi/codeStyle/LanguageCodeStyleSettingsContributor.java) |
| [com.intellij.langCodeStyleSettingsProvider](https://jb.gg/ipe?extensions=com.intellij.langCodeStyleSettingsProvider) | [`LanguageCodeStyleSettingsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/psi/codeStyle/LanguageCodeStyleSettingsProvider.java) |
| [com.intellij.lineIndentProvider](https://jb.gg/ipe?extensions=com.intellij.lineIndentProvider) | [`LineIndentProvider`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/codeStyle/lineIndent/LineIndentProvider.java) |
| [com.intellij.predefinedCodeStyle](https://jb.gg/ipe?extensions=com.intellij.predefinedCodeStyle) | [`PredefinedCodeStyle`](%gh-ic%/platform/code-style-api/src/com/intellij/psi/codeStyle/PredefinedCodeStyle.java) |
| [com.intellij.rearranger.ui](https://jb.gg/ipe?extensions=com.intellij.rearranger.ui) | [`Factory`](%gh-ic%/platform/lang-api/src/com/intellij/psi/codeStyle/arrangement/std/ArrangementUiComponent.java) |

### IdeCore.xml

[`IdeCore.xml`](%gh-ic%/platform/ide-core-impl/resources/META-INF/IdeCore.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.applicationActivity](https://jb.gg/ipe?extensions=com.intellij.applicationActivity) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`ApplicationActivity`](%gh-ic%/platform/ide-core/src/com/intellij/ide/ApplicationActivity.kt) |
| [com.intellij.applicationInitializedListener](https://jb.gg/ipe?extensions=com.intellij.applicationInitializedListener) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`ApplicationInitializedListener`](%gh-ic%/platform/ide-core/src/com/intellij/ide/ApplicationInitializedListener.kt) |
| [com.intellij.notificationGroup](https://jb.gg/ipe?extensions=com.intellij.notificationGroup) | `n/a` |
| [com.intellij.registryKey](https://jb.gg/ipe?extensions=com.intellij.registryKey) | `n/a` |

### Indexing.xml

[`Indexing.xml`](%gh-ic%/platform/indexing-api/resources/META-INF/Indexing.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.binaryFileSourceProvider](https://jb.gg/ipe?extensions=com.intellij.binaryFileSourceProvider) ![Internal][internal] | [`BinaryFileSourceProvider`](%gh-ic%/platform/indexing-api/src/com/intellij/platform/indexing/BinaryFileSourceProvider.java) |
| [com.intellij.codeUsageScopeOptimizer](https://jb.gg/ipe?extensions=com.intellij.codeUsageScopeOptimizer) | [`ScopeOptimizer`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/ScopeOptimizer.java) |
| [com.intellij.definitionsSearch](https://jb.gg/ipe?extensions=com.intellij.definitionsSearch) ![Deprecated][deprecated] | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.dumbServiceInitializationCondition](https://jb.gg/ipe?extensions=com.intellij.dumbServiceInitializationCondition) ![Internal][internal] | [`DumbServiceInitializationCondition`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/project/DumbServiceInitializationCondition.java) |
| [com.intellij.fileBasedIndex](https://jb.gg/ipe?extensions=com.intellij.fileBasedIndex) | [`FileBasedIndexExtension`](%gh-ic%/platform/indexing-api/src/com/intellij/util/indexing/FileBasedIndexExtension.java) |
| [com.intellij.fileBasedIndexInfrastructureExtension](https://jb.gg/ipe?extensions=com.intellij.fileBasedIndexInfrastructureExtension) ![Internal][internal] | [`FileBasedIndexInfrastructureExtension`](%gh-ic%/platform/indexing-impl/src/com/intellij/util/indexing/FileBasedIndexInfrastructureExtension.java) |
| [com.intellij.fileBasedIndexLayout](https://jb.gg/ipe?extensions=com.intellij.fileBasedIndexLayout) ![Internal][internal] | [`FileBasedIndexLayoutProvider`](%gh-ic%/platform/indexing-impl/src/com/intellij/util/indexing/storage/FileBasedIndexLayoutProvider.java) |
| [com.intellij.findModelExtension](https://jb.gg/ipe?extensions=com.intellij.findModelExtension) ![Internal][internal] | [`FindModelExtension`](%gh-ic%/platform/indexing-api/src/com/intellij/find/FindModelExtension.java) |
| [com.intellij.indexableFilesContributor](https://jb.gg/ipe?extensions=com.intellij.indexableFilesContributor) ![Deprecated][deprecated] ![Removal][removal] | [`IndexableFilesContributor`](%gh-ic%/platform/indexing-api/src/com/intellij/util/indexing/roots/IndexableFilesContributor.java) |
| [com.intellij.indexedRootsProvider](https://jb.gg/ipe?extensions=com.intellij.indexedRootsProvider) | [`IndexableSetContributor`](%gh-ic%/platform/indexing-api/src/com/intellij/util/indexing/IndexableSetContributor.java) |
| [com.intellij.indexingFlavor](https://jb.gg/ipe?extensions=com.intellij.indexingFlavor) ![Experimental][experimental] ![Internal][internal] | [`FileIndexingFlavorProvider`](%gh-ic%/platform/core-api/src/com/intellij/util/indexing/flavor/FileIndexingFlavorProvider.java) |
| [com.intellij.projectIndexingActivityHistoryListener](https://jb.gg/ipe?extensions=com.intellij.projectIndexingActivityHistoryListener) | [`ProjectIndexingActivityHistoryListener`](%gh-ic%/platform/lang-impl/src/com/intellij/util/indexing/diagnostic/ProjectIndexingHistory.kt) |
| [com.intellij.referencesSearch](https://jb.gg/ipe?extensions=com.intellij.referencesSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.stubIndex](https://jb.gg/ipe?extensions=com.intellij.stubIndex) | [`StubIndexExtension`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/stubs/StubIndexExtension.java) |
| [com.intellij.trigramIndexFilterExcludeExtension](https://jb.gg/ipe?extensions=com.intellij.trigramIndexFilterExcludeExtension) ![Internal][internal] | [`TrigramIndexFilterExcludeExtension`](%gh-ic%/platform/indexing-impl/src/com/intellij/find/ngrams/TrigramIndexFilter.kt) |

### Inspect.xml

[`Inspect.xml`](%gh-ic%/platform/inspect/resources/META-INF/Inspect.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.inspectResultsConsumer](https://jb.gg/ipe?extensions=com.intellij.inspectResultsConsumer) ![Internal][internal] | [`InspectResultsConsumer`](%gh-ic%/platform/inspect/src/com/intellij/codeInspection/InspectResultsConsumer.java) |
| [com.intellij.inspectionGroupProvider](https://jb.gg/ipe?extensions=com.intellij.inspectionGroupProvider) | [`InspectionGroupProvider`](%gh-ic%/platform/inspect/src/com/intellij/codeInspection/inspectionProfile/InspectionGroupProvider.kt) |

### intellij.json.split.xml

[`intellij.json.split.xml`](%gh-ic%/json/split/resources/intellij.json.split.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.json.jsonLiteralChecker](https://jb.gg/ipe?extensions=com.intellij.json.jsonLiteralChecker) | [`JsonLiteralChecker`](%gh-ic%/json/split/src/com/intellij/json/codeinsight/JsonLiteralChecker.java) |

### intellij.notebooks.visualization.xml

[`intellij.notebooks.visualization.xml`](%gh-ic%/notebooks/visualization/resources/intellij.notebooks.visualization.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.plugins.notebooks.editor.notebookEditorAppearanceProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.notebooks.editor.notebookEditorAppearanceProvider) | [`NotebookEditorAppearanceProvider`](%gh-ic%/notebooks/visualization/src/com/intellij/notebooks/visualization/NotebookEditorAppearanceProvider.kt) |
| [org.jetbrains.plugins.notebooks.editor.outputs.notebookOutputComponentFactory](https://jb.gg/ipe?extensions=org.jetbrains.plugins.notebooks.editor.outputs.notebookOutputComponentFactory) | [`NotebookOutputComponentFactory`](%gh-ic%/notebooks/visualization/src/com/intellij/notebooks/visualization/outputs/NotebookOutputComponentFactory.kt) |
| [org.jetbrains.plugins.notebooks.editor.outputs.notebookOutputComponentWrapper](https://jb.gg/ipe?extensions=org.jetbrains.plugins.notebooks.editor.outputs.notebookOutputComponentWrapper) | [`NotebookOutputComponentWrapper`](%gh-ic%/notebooks/visualization/src/com/intellij/notebooks/visualization/outputs/NotebookOutputComponentWrapper.kt) |
| [org.jetbrains.plugins.notebooks.editor.outputs.notebookOutputDataKeyExtractor](https://jb.gg/ipe?extensions=org.jetbrains.plugins.notebooks.editor.outputs.notebookOutputDataKeyExtractor) | [`NotebookOutputDataKeyExtractor`](%gh-ic%/notebooks/visualization/src/com/intellij/notebooks/visualization/outputs/NotebookOutputDataKeyExtractor.kt) |
| [org.jetbrains.plugins.notebooks.notebookCellInlayController](https://jb.gg/ipe?extensions=org.jetbrains.plugins.notebooks.notebookCellInlayController) | [`Factory`](%gh-ic%/notebooks/visualization/src/com/intellij/notebooks/visualization/NotebookCellInlayController.kt) |
| [org.jetbrains.plugins.notebooks.notebookCellLinesProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.notebooks.notebookCellLinesProvider) | [`NotebookCellLinesProvider`](%gh-ic%/notebooks/visualization/src/com/intellij/notebooks/visualization/NotebookCellLinesProvider.kt) |
| [org.jetbrains.plugins.notebooks.notebookCellSelectionModelProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.notebooks.notebookCellSelectionModelProvider) | [`NotebookCellSelectionModelProvider`](%gh-ic%/notebooks/visualization/src/com/intellij/notebooks/visualization/NotebookCellSelectionModelProvider.kt) |
| [org.jetbrains.plugins.notebooks.notebookIntervalPointerFactoryProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.notebooks.notebookIntervalPointerFactoryProvider) | [`NotebookIntervalPointerFactoryProvider`](%gh-ic%/notebooks/visualization/src/com/intellij/notebooks/visualization/NotebookIntervalPointerFactoryProvider.kt) |

### intellij.platform.execution.dashboard.xml

[`intellij.platform.execution.dashboard.xml`](%gh-ic%/platform/execution.dashboard/resources/intellij.platform.execution.dashboard.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.runDashboardChecker](https://jb.gg/ipe?extensions=com.intellij.runDashboardChecker) ![Experimental][experimental] | [`RunDashboardChecker`](%gh-ic%/platform/lang-api/src/com/intellij/execution/dashboard/RunDashboardChecker.kt) |

### intellij.platform.experiment.xml

[`intellij.platform.experiment.xml`](%gh-ic%/platform/experiment/resources/intellij.platform.experiment.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.experiment.abExperimentOption](https://jb.gg/ipe?extensions=com.intellij.experiment.abExperimentOption) | [`ABExperimentOption`](%gh-ic%/platform/experiment/src/com/intellij/platform/experiment/ab/impl/experiment/ABExperimentOption.kt) |

### intellij.platform.feedback.xml

[`intellij.platform.feedback.xml`](%gh-ic%/platform/feedback/resources/intellij.platform.feedback.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.feedback.idleFeedbackSurvey](https://jb.gg/ipe?extensions=com.intellij.feedback.idleFeedbackSurvey) | [`FeedbackSurvey`](%gh-ic%/platform/feedback/src/com/intellij/platform/feedback/FeedbackSurvey.kt) |

### intellij.platform.ide.newUiOnboarding.xml

[`intellij.platform.ide.newUiOnboarding.xml`](%gh-ic%/platform/new-ui-onboarding/resources/intellij.platform.ide.newUiOnboarding.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.ide.newUiOnboarding](https://jb.gg/ipe?extensions=com.intellij.ide.newUiOnboarding) | `n/a` |
| [com.intellij.ide.newUiOnboarding.step](https://jb.gg/ipe?extensions=com.intellij.ide.newUiOnboarding.step) ![Internal][internal] | [`NewUiOnboardingStep`](%gh-ic%/platform/new-ui-onboarding/src/com/intellij/platform/ide/newUiOnboarding/NewUiOnboardingStep.kt) |

### intellij.platform.inline.completion.xml

[`intellij.platform.inline.completion.xml`](%gh-ic%/platform/inline-completion/shared/resources/intellij.platform.inline.completion.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.inline.completion.shortcutHintListener](https://jb.gg/ipe?extensions=com.intellij.inline.completion.shortcutHintListener) ![Internal][internal] | [`InlineCompletionShortcutHintListener`](%gh-ic%/platform/inline-completion/shared/src/shortcut/InlineCompletionShortcutHintListener.kt) |

### intellij.platform.kernel.xml

[`intellij.platform.kernel.xml`](%gh-ic%/platform/kernel/shared/resources/intellij.platform.kernel.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.platform.entityTypes](https://jb.gg/ipe?extensions=com.intellij.platform.entityTypes) | [`EntityTypeProvider`](%gh-ic%/platform/kernel/shared/src/EntityTypeProvider.kt) |

### intellij.platform.lvcs.impl.xml

[`intellij.platform.lvcs.impl.xml`](%gh-ic%/platform/lvcs-impl/resources/intellij.platform.lvcs.impl.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.history.activityPresentationProvider](https://jb.gg/ipe?extensions=com.intellij.history.activityPresentationProvider) ![Experimental][experimental] | [`ActivityPresentationProvider`](%gh-ic%/platform/lvcs-api/src/com/intellij/history/ActivityPresentationProvider.kt) |

### intellij.platform.navbar.backend.xml

[`intellij.platform.navbar.backend.xml`](%gh-ic%/platform/navbar/backend/resources/intellij.platform.navbar.backend.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.navbar.item.provider](https://jb.gg/ipe?extensions=com.intellij.navbar.item.provider) | [`NavBarItemProvider`](%gh-ic%/platform/navbar/backend/src/NavBarItemProvider.kt) |

### intellij.platform.remoteServers.impl.xml

[`intellij.platform.remoteServers.impl.xml`](%gh-ic%/platform/remote-servers/impl/resources/intellij.platform.remoteServers.impl.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.remoteServer.defaultConfigurable.includeServerType](https://jb.gg/ipe?extensions=com.intellij.remoteServer.defaultConfigurable.includeServerType) | [`ServerType`](%gh-ic%/platform/remote-servers/api/src/com/intellij/remoteServer/ServerType.java) |
| [com.intellij.remoteServer.deploymentConfiguration.stateProvider](https://jb.gg/ipe?extensions=com.intellij.remoteServer.deploymentConfiguration.stateProvider) | [`DeployToServerStateProvider`](%gh-ic%/platform/remote-servers/impl/src/com/intellij/remoteServer/impl/configuration/deployment/DeployToServerStateProvider.kt) |
| [com.intellij.remoteServer.deploymentSource.type](https://jb.gg/ipe?extensions=com.intellij.remoteServer.deploymentSource.type) | [`DeploymentSourceType`](%gh-ic%/platform/remote-servers/api/src/com/intellij/remoteServer/configuration/deployment/DeploymentSourceType.java) |
| [com.intellij.remoteServer.runConfigurationExtension](https://jb.gg/ipe?extensions=com.intellij.remoteServer.runConfigurationExtension) | [`DeployToServerRunConfigurationExtension`](%gh-ic%/platform/remote-servers/impl/src/com/intellij/remoteServer/impl/configuration/deployment/DeployToServerRunConfigurationExtension.java) |
| [com.intellij.remoteServer.type](https://jb.gg/ipe?extensions=com.intellij.remoteServer.type) | [`ServerType`](%gh-ic%/platform/remote-servers/api/src/com/intellij/remoteServer/ServerType.java) |

### intellij.platform.rpc.backend.xml

[`intellij.platform.rpc.backend.xml`](%gh-ic%/platform/kernel/rpc.backend/resources/intellij.platform.rpc.backend.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.platform.rpc.backend.remoteApiProvider](https://jb.gg/ipe?extensions=com.intellij.platform.rpc.backend.remoteApiProvider) | [`RemoteApiProvider`](%gh-ic%/platform/kernel/rpc.backend/src/RemoteApiProvider.kt) |

### intellij.platform.settings.local.xml

[`intellij.platform.settings.local.xml`](%gh-ic%/platform/settings-local/resources/intellij.platform.settings.local.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.settingsController](https://jb.gg/ipe?extensions=com.intellij.settingsController) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`DelegatedSettingsController`](%gh-ic%/platform/settings/src/com/intellij/platform/settings/SettingsController.kt) |

### intellij.platform.statistics.devkit.xml

[`intellij.platform.statistics.devkit.xml`](%gh-ic%/platform/statistics/devkit/resources/intellij.platform.statistics.devkit.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.internal.statistic.devkit.toolwindow.logGroupActionsProvider](https://jb.gg/ipe?extensions=com.intellij.internal.statistic.devkit.toolwindow.logGroupActionsProvider) ![Internal][internal] | [`StatisticsLogGroupActionsProvider`](%gh-ic%/platform/statistics/devkit/src/com/intellij/internal/statistic/devkit/toolwindow/StatisticsLogGroupActionsProvider.kt) |

### intellij.platform.tips.xml

[`intellij.platform.tips.xml`](%gh-ic%/platform/tips-of-the-day/resources/intellij.platform.tips.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.tipAndTrickPromotionFactory](https://jb.gg/ipe?extensions=com.intellij.tipAndTrickPromotionFactory) ![Internal][internal] | [`TipAndTrickPromotionFactory`](%gh-ic%/platform/tips-of-the-day/src/com/intellij/ide/util/TipAndTrickPromotionFactory.kt) |

### intellij.platform.vcs.dvcs.impl.xml

[`intellij.platform.vcs.dvcs.impl.xml`](%gh-ic%/platform/dvcs-impl/resources/intellij.platform.vcs.dvcs.impl.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.cherryPicker](https://jb.gg/ipe?extensions=com.intellij.cherryPicker) ![Project-Level][project-level] | [`VcsCherryPicker`](%gh-ic%/platform/dvcs-api/src/com/intellij/dvcs/cherrypick/VcsCherryPicker.java) |
| [com.intellij.clonePathProvider](https://jb.gg/ipe?extensions=com.intellij.clonePathProvider) | [`ClonePathProvider`](%gh-ic%/platform/dvcs-impl/src/com/intellij/dvcs/repo/ClonePathProvider.java) |
| [com.intellij.commitNodeUiRenderExtension](https://jb.gg/ipe?extensions=com.intellij.commitNodeUiRenderExtension) ![Experimental][experimental] | [`CommitNodeUiRenderExtension`](%gh-ic%/platform/dvcs-impl/src/com/intellij/dvcs/push/ui/CommitNodeUiRenderExtension.java) |
| [com.intellij.customPushOptionsPanelFactory](https://jb.gg/ipe?extensions=com.intellij.customPushOptionsPanelFactory) ![Experimental][experimental] | [`CustomPushOptionsPanelFactory`](%gh-ic%/platform/dvcs-api/src/com/intellij/dvcs/push/CustomPushOptionsPanelFactory.kt) |
| [com.intellij.prePushHandler](https://jb.gg/ipe?extensions=com.intellij.prePushHandler) | [`PrePushHandler`](%gh-ic%/platform/dvcs-impl/src/com/intellij/dvcs/push/PrePushHandler.java) |
| [com.intellij.pushDialogActionsProvider](https://jb.gg/ipe?extensions=com.intellij.pushDialogActionsProvider) ![Internal][internal] | [`PushDialogActionsProvider`](%gh-ic%/platform/dvcs-impl/src/com/intellij/dvcs/push/PushDialogActionsProvider.kt) |
| [com.intellij.pushDialogCustomizer](https://jb.gg/ipe?extensions=com.intellij.pushDialogCustomizer) ![Internal][internal] | [`PushDialogCustomizer`](%gh-ic%/platform/dvcs-impl/src/com/intellij/dvcs/push/PushDialogCustomizer.kt) |
| [com.intellij.pushSupport](https://jb.gg/ipe?extensions=com.intellij.pushSupport) ![Project-Level][project-level] | [`PushSupport`](%gh-ic%/platform/dvcs-api/src/com/intellij/dvcs/push/PushSupport.java) |
| [com.intellij.vcsRepositoryCreator](https://jb.gg/ipe?extensions=com.intellij.vcsRepositoryCreator) | [`VcsRepositoryCreator`](%gh-ic%/platform/dvcs-impl/src/com/intellij/dvcs/repo/VcsRepositoryCreator.java) |

### intellij.platform.vcs.log.impl.xml

[`intellij.platform.vcs.log.impl.xml`](%gh-ic%/platform/vcs-log/impl/resources/intellij.platform.vcs.log.impl.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.customVcsLogUiFactoryProvider](https://jb.gg/ipe?extensions=com.intellij.customVcsLogUiFactoryProvider) ![Experimental][experimental] ![Project-Level][project-level] | [`CustomVcsLogUiFactoryProvider`](%gh-ic%/platform/vcs-log/impl/src/com/intellij/vcs/log/impl/CustomVcsLogUiFactoryProvider.java) |
| [com.intellij.fileHistoryPerformanceListener](https://jb.gg/ipe?extensions=com.intellij.fileHistoryPerformanceListener) ![Internal][internal] | [`FileHistoryPerformanceListener`](%gh-ic%/platform/vcs-log/impl/src/com/intellij/vcs/log/history/FileHistoryPerformanceListener.kt) |
| [com.intellij.logHighlighterFactory](https://jb.gg/ipe?extensions=com.intellij.logHighlighterFactory) | [`VcsLogHighlighterFactory`](%gh-ic%/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/highlighters/VcsLogHighlighterFactory.java) |
| [com.intellij.logProvider](https://jb.gg/ipe?extensions=com.intellij.logProvider) ![Project-Level][project-level] | [`VcsLogProvider`](%gh-ic%/platform/vcs-log/api/src/com/intellij/vcs/log/VcsLogProvider.java) |
| [com.intellij.vcsLogCommitStatusProvider](https://jb.gg/ipe?extensions=com.intellij.vcsLogCommitStatusProvider) ![Experimental][experimental] | [`VcsCommitExternalStatusProvider`](%gh-ic%/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/frame/VcsCommitExternalStatusProvider.kt) |
| [com.intellij.vcsLogCustomColumn](https://jb.gg/ipe?extensions=com.intellij.vcsLogCustomColumn) | [`VcsLogCustomColumn`](%gh-ic%/platform/vcs-log/impl/src/com/intellij/vcs/log/ui/table/column/VcsLogCustomColumn.kt) |
| [com.intellij.vcsLogFileHistoryHandler](https://jb.gg/ipe?extensions=com.intellij.vcsLogFileHistoryHandler) ![Experimental][experimental] ![Project-Level][project-level] | [`VcsLogFileHistoryHandler`](%gh-ic%/platform/vcs-log/api/src/com/intellij/vcs/log/VcsLogFileHistoryHandler.kt) |

### intellij.smart.update.xml

[`intellij.smart.update.xml`](%gh-ic%/platform/smart-update/resources/intellij.smart.update.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.smartUpdateStep](https://jb.gg/ipe?extensions=com.intellij.smartUpdateStep) | [`SmartUpdateStep`](%gh-ic%/platform/smart-update/src/com/intellij/smartUpdate/SmartUpdateStep.kt) |

### LangExtensionPoints.xml

[`LangExtensionPoints.xml`](%gh-ic%/platform/platform-resources/src/META-INF/LangExtensionPoints.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.aliasingPsiTargetMapper](https://jb.gg/ipe?extensions=com.intellij.aliasingPsiTargetMapper) | [`AliasingPsiTargetMapper`](%gh-ic%/platform/core-api/src/com/intellij/psi/targets/AliasingPsiTargetMapper.java) |
| [com.intellij.analyzeStacktraceFilter](https://jb.gg/ipe?extensions=com.intellij.analyzeStacktraceFilter) ![Project-Level][project-level] ![DumbAware][dumb-aware] | [`Filter`](%gh-ic%/platform/execution/src/com/intellij/execution/filters/Filter.java) |
| [com.intellij.analyzeStacktraceRunContentProvider](https://jb.gg/ipe?extensions=com.intellij.analyzeStacktraceRunContentProvider) ![Experimental][experimental] ![Project-Level][project-level] | [`StacktraceTabContentProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/unscramble/StacktraceTabContentProvider.java) |
| [com.intellij.anchorReferenceProvider](https://jb.gg/ipe?extensions=com.intellij.anchorReferenceProvider) | [`PathReferenceProvider`](%gh-ic%/platform/lang-api/src/com/intellij/openapi/paths/PathReferenceProvider.java) |
| [com.intellij.annotator](https://jb.gg/ipe?extensions=com.intellij.annotator) ![DumbAware][dumb-aware] | [`Annotator`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/annotation/Annotator.java) |
| [com.intellij.anonymousElementProvider](https://jb.gg/ipe?extensions=com.intellij.anonymousElementProvider) | [`AnonymousElementProvider`](%gh-ic%/platform/editor-ui-api/src/com/intellij/navigation/AnonymousElementProvider.java) |
| [com.intellij.autoImportOptionsProvider](https://jb.gg/ipe?extensions=com.intellij.autoImportOptionsProvider) ![Project-Level][project-level] | [`AutoImportOptionsProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/application/options/editor/AutoImportOptionsProvider.java) |
| [com.intellij.bookmarkProvider](https://jb.gg/ipe?extensions=com.intellij.bookmarkProvider) ![Project-Level][project-level] | [`BookmarkProvider`](%gh-ic%/platform/lang-api/src/com/intellij/ide/bookmark/BookmarkProvider.java) |
| [com.intellij.bookmarksListProvider](https://jb.gg/ipe?extensions=com.intellij.bookmarksListProvider) ![Project-Level][project-level] | [`BookmarksListProvider`](%gh-ic%/platform/lang-api/src/com/intellij/ide/bookmark/BookmarksListProvider.java) |
| [com.intellij.braceMatcher](https://jb.gg/ipe?extensions=com.intellij.braceMatcher) | [`BraceMatcher`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/highlighting/BraceMatcher.java) |
| [com.intellij.breadcrumbsInfoProvider](https://jb.gg/ipe?extensions=com.intellij.breadcrumbsInfoProvider) | [`BreadcrumbsProvider`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ui/breadcrumbs/BreadcrumbsProvider.java) |
| [com.intellij.cacheBuilder](https://jb.gg/ipe?extensions=com.intellij.cacheBuilder) | [`WordsScanner`](%gh-ic%/platform/indexing-api/src/com/intellij/lang/cacheBuilder/WordsScanner.java) |
| [com.intellij.callHierarchyProvider](https://jb.gg/ipe?extensions=com.intellij.callHierarchyProvider) | [`HierarchyProvider`](%gh-ic%/platform/lang-api/src/com/intellij/ide/hierarchy/HierarchyProvider.java) |
| [com.intellij.cantBeStatic](https://jb.gg/ipe?extensions=com.intellij.cantBeStatic) | [`Condition`](%gh-ic%/platform/util/src/com/intellij/openapi/util/Condition.java) |
| [com.intellij.codeBlockSupportHandler](https://jb.gg/ipe?extensions=com.intellij.codeBlockSupportHandler) | [`CodeBlockSupportHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/highlighting/CodeBlockSupportHandler.java) |
| [com.intellij.codeCompletionConfigurable](https://jb.gg/ipe?extensions=com.intellij.codeCompletionConfigurable) ![Internal][internal] | [`UnnamedConfigurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/UnnamedConfigurable.java) |
| [com.intellij.codeFoldingOptionsProvider](https://jb.gg/ipe?extensions=com.intellij.codeFoldingOptionsProvider) | [`CodeFoldingOptionsProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/application/options/editor/CodeFoldingOptionsProvider.java) |
| [com.intellij.codeInsight.codeVision.settings.defaults](https://jb.gg/ipe?extensions=com.intellij.codeInsight.codeVision.settings.defaults) ![Experimental][experimental] | [`CodeVisionSettingsDefaults`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/codeVision/settings/CodeVisionSettingsDefaults.kt) |
| [com.intellij.codeInsight.codeVisionProvider](https://jb.gg/ipe?extensions=com.intellij.codeInsight.codeVisionProvider) ![Experimental][experimental] | [`CodeVisionProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/codeVision/CodeVisionProvider.kt) |
| [com.intellij.codeInsight.codeVisionProviderFactory](https://jb.gg/ipe?extensions=com.intellij.codeInsight.codeVisionProviderFactory) | [`CodeVisionProviderFactory`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/codeVision/CodeVisionProviderFactory.kt) |
| [com.intellij.codeInsight.codeVisionSettingsPreviewLanguage](https://jb.gg/ipe?extensions=com.intellij.codeInsight.codeVisionSettingsPreviewLanguage) | `n/a` |
| [com.intellij.codeInsight.daemon.impl.injectedLanguageHighlightingRangeReducer](https://jb.gg/ipe?extensions=com.intellij.codeInsight.daemon.impl.injectedLanguageHighlightingRangeReducer) ![Non-Dynamic][non-dynamic] ![Experimental][experimental] | [`InjectedLanguageHighlightingRangeReducer`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/daemon/impl/InjectedLanguageHighlightingRangeReducer.java) |
| [com.intellij.codeInsight.daemonBoundCodeVisionProvider](https://jb.gg/ipe?extensions=com.intellij.codeInsight.daemonBoundCodeVisionProvider) | [`DaemonBoundCodeVisionProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/hints/codeVision/DaemonBoundCodeVisionProvider.kt) |
| [com.intellij.codeInsight.declarativeInlayProvider](https://jb.gg/ipe?extensions=com.intellij.codeInsight.declarativeInlayProvider) ![DumbAware][dumb-aware] | [`InlayHintsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/declarative/InlayHintsProvider.kt) |
| [com.intellij.codeInsight.declarativeInlayProviderCustomSettingsProvider](https://jb.gg/ipe?extensions=com.intellij.codeInsight.declarativeInlayProviderCustomSettingsProvider) | [`InlayHintsCustomSettingsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/declarative/InlayHintsCustomSettingsProvider.kt) |
| [com.intellij.codeInsight.declarativeInlayProviderFactory](https://jb.gg/ipe?extensions=com.intellij.codeInsight.declarativeInlayProviderFactory) | [`InlayHintsProviderFactory`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/declarative/InlayHintsProviderFactory.kt) |
| [com.intellij.codeInsight.delegateMethods](https://jb.gg/ipe?extensions=com.intellij.codeInsight.delegateMethods) | [`LanguageCodeInsightActionHandler`](%gh-ic%/platform/lang-api/src/com/intellij/lang/LanguageCodeInsightActionHandler.java) |
| [com.intellij.codeInsight.gotoSuper](https://jb.gg/ipe?extensions=com.intellij.codeInsight.gotoSuper) | [`CodeInsightActionHandler`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/CodeInsightActionHandler.java) |
| [com.intellij.codeInsight.implementMethod](https://jb.gg/ipe?extensions=com.intellij.codeInsight.implementMethod) | [`LanguageCodeInsightActionHandler`](%gh-ic%/platform/lang-api/src/com/intellij/lang/LanguageCodeInsightActionHandler.java) |
| [com.intellij.codeInsight.inlayActionHandler](https://jb.gg/ipe?extensions=com.intellij.codeInsight.inlayActionHandler) | [`InlayActionHandler`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/declarative/InlayActionHandler.kt) |
| [com.intellij.codeInsight.inlayHintsSwitch](https://jb.gg/ipe?extensions=com.intellij.codeInsight.inlayHintsSwitch) | [`InlayHintsSwitch`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/InlayHintsSwitch.kt) |
| [com.intellij.codeInsight.inlayProvider](https://jb.gg/ipe?extensions=com.intellij.codeInsight.inlayProvider) | [`InlayHintsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/InlayHintsProvider.kt) |
| [com.intellij.codeInsight.inlayProviderFactory](https://jb.gg/ipe?extensions=com.intellij.codeInsight.inlayProviderFactory) ![DumbAware][dumb-aware] | [`InlayHintsProviderFactory`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/InlayHintsProviderFactory.kt) |
| [com.intellij.codeInsight.lineMarkerProvider](https://jb.gg/ipe?extensions=com.intellij.codeInsight.lineMarkerProvider) ![DumbAware][dumb-aware] | [`LineMarkerProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/daemon/LineMarkerProvider.java) |
| [com.intellij.codeInsight.overrideMethod](https://jb.gg/ipe?extensions=com.intellij.codeInsight.overrideMethod) | [`LanguageCodeInsightActionHandler`](%gh-ic%/platform/lang-api/src/com/intellij/lang/LanguageCodeInsightActionHandler.java) |
| [com.intellij.codeInsight.parameterInfo](https://jb.gg/ipe?extensions=com.intellij.codeInsight.parameterInfo) ![DumbAware][dumb-aware] | [`ParameterInfoHandler`](%gh-ic%/platform/lang-api/src/com/intellij/lang/parameterInfo/ParameterInfoHandler.java) |
| [com.intellij.codeInsight.parameterInfo.controller.provider](https://jb.gg/ipe?extensions=com.intellij.codeInsight.parameterInfo.controller.provider) | [`ParameterInfoControllerProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/hint/ParameterInfoControllerProvider.java) |
| [com.intellij.codeInsight.parameterInfo.listener](https://jb.gg/ipe?extensions=com.intellij.codeInsight.parameterInfo.listener) | [`ParameterInfoListener`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/hint/ParameterInfoListener.java) |
| [com.intellij.codeInsight.parameterNameHints](https://jb.gg/ipe?extensions=com.intellij.codeInsight.parameterNameHints) | [`InlayParameterHintsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/InlayParameterHintsProvider.java) |
| [com.intellij.codeInsight.parameterNameHintsSuppressor](https://jb.gg/ipe?extensions=com.intellij.codeInsight.parameterNameHintsSuppressor) | [`ParameterNameHintsSuppressor`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/ParameterNameHintsSuppressor.kt) |
| [com.intellij.codeInsight.surroundWithRangeAdjuster](https://jb.gg/ipe?extensions=com.intellij.codeInsight.surroundWithRangeAdjuster) | [`SurroundWithRangeAdjuster`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/generation/surroundWith/SurroundWithRangeAdjuster.java) |
| [com.intellij.codeInsight.typeInfo](https://jb.gg/ipe?extensions=com.intellij.codeInsight.typeInfo) ![DumbAware][dumb-aware] | [`ExpressionTypeProvider`](%gh-ic%/platform/lang-api/src/com/intellij/lang/ExpressionTypeProvider.java) |
| [com.intellij.codeInsight.unresolvedReferenceQuickFixProvider](https://jb.gg/ipe?extensions=com.intellij.codeInsight.unresolvedReferenceQuickFixProvider) | [`UnresolvedReferenceQuickFixProvider`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/quickfix/UnresolvedReferenceQuickFixProvider.java) |
| [com.intellij.codeStyleSettingsProvider](https://jb.gg/ipe?extensions=com.intellij.codeStyleSettingsProvider) | [`CodeStyleSettingsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/psi/codeStyle/CodeStyleSettingsProvider.java) |
| [com.intellij.codeVisionPainterProvider](https://jb.gg/ipe?extensions=com.intellij.codeVisionPainterProvider) ![Non-Dynamic][non-dynamic] | [`ICodeVisionEntryBasePainter`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/codeVision/ui/renderers/painters/ICodeVisionEntryBasePainter.kt) |
| [com.intellij.colorAndFontDescriptorProvider](https://jb.gg/ipe?extensions=com.intellij.colorAndFontDescriptorProvider) | [`ColorAndFontDescriptorsProvider`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/options/colors/ColorAndFontDescriptorsProvider.java) |
| [com.intellij.colorAndFontPanelFactory](https://jb.gg/ipe?extensions=com.intellij.colorAndFontPanelFactory) | [`ColorAndFontPanelFactory`](%gh-ic%/platform/platform-impl/src/com/intellij/application/options/colors/ColorAndFontPanelFactory.java) |
| [com.intellij.colorProvider](https://jb.gg/ipe?extensions=com.intellij.colorProvider) | [`ElementColorProvider`](%gh-ic%/platform/lang-api/src/com/intellij/openapi/editor/ElementColorProvider.java) |
| [com.intellij.colorSettingsPage](https://jb.gg/ipe?extensions=com.intellij.colorSettingsPage) | [`ColorSettingsPage`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/options/colors/ColorSettingsPage.java) |
| [com.intellij.commandLineInspectionProjectConfigurator](https://jb.gg/ipe?extensions=com.intellij.commandLineInspectionProjectConfigurator) ![Obsolete][obsolete] | [`CommandLineInspectionProjectConfigurator`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/CommandLineInspectionProjectConfigurator.java) |
| [com.intellij.commentTokenSetProvider](https://jb.gg/ipe?extensions=com.intellij.commentTokenSetProvider) | [`CommentTokenSetProvider`](%gh-ic%/platform/core-impl/src/com/intellij/psi/impl/cache/CommentTokenSetProvider.java) |
| [com.intellij.concatenationAwareInjector](https://jb.gg/ipe?extensions=com.intellij.concatenationAwareInjector) ![Project-Level][project-level] | [`ConcatenationAwareInjector`](%gh-ic%/platform/lang-api/src/com/intellij/lang/injection/ConcatenationAwareInjector.java) |
| [com.intellij.configurationProducer](https://jb.gg/ipe?extensions=com.intellij.configurationProducer) ![Deprecated][deprecated] ![DumbAware][dumb-aware] | [`RuntimeConfigurationProducer`](%gh-ic%/platform/lang-api/src/com/intellij/execution/junit/RuntimeConfigurationProducer.java) |
| [com.intellij.configurationType](https://jb.gg/ipe?extensions=com.intellij.configurationType) ![DumbAware][dumb-aware] | [`ConfigurationType`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/ConfigurationType.java) |
| [com.intellij.console.folding](https://jb.gg/ipe?extensions=com.intellij.console.folding) | [`ConsoleFolding`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/ConsoleFolding.java) |
| [com.intellij.consoleActionsPostProcessor](https://jb.gg/ipe?extensions=com.intellij.consoleActionsPostProcessor) | [`ConsoleActionsPostProcessor`](%gh-ic%/platform/lang-api/src/com/intellij/execution/actions/ConsoleActionsPostProcessor.java) |
| [com.intellij.consoleFilterProvider](https://jb.gg/ipe?extensions=com.intellij.consoleFilterProvider) | [`ConsoleFilterProvider`](%gh-ic%/platform/lang-api/src/com/intellij/execution/filters/ConsoleFilterProvider.java) |
| [com.intellij.consoleHistoryModelProvider](https://jb.gg/ipe?extensions=com.intellij.consoleHistoryModelProvider) | [`ConsoleHistoryModelProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/execution/console/ConsoleHistoryModelProvider.java) |
| [com.intellij.consoleInputFilterProvider](https://jb.gg/ipe?extensions=com.intellij.consoleInputFilterProvider) | [`ConsoleInputFilterProvider`](%gh-ic%/platform/lang-api/src/com/intellij/execution/filters/ConsoleInputFilterProvider.java) |
| [com.intellij.contributedReferencesAnnotator](https://jb.gg/ipe?extensions=com.intellij.contributedReferencesAnnotator) | [`ContributedReferencesAnnotator`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/annotation/ContributedReferencesAnnotator.java) |
| [com.intellij.createFromTemplateActionReplacer](https://jb.gg/ipe?extensions=com.intellij.createFromTemplateActionReplacer) | [`CreateFromTemplateActionReplacer`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/fileTemplates/CreateFromTemplateActionReplacer.java) |
| [com.intellij.createFromTemplateHandler](https://jb.gg/ipe?extensions=com.intellij.createFromTemplateHandler) | [`CreateFromTemplateHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/fileTemplates/CreateFromTemplateHandler.java) |
| [com.intellij.customFoldingProvider](https://jb.gg/ipe?extensions=com.intellij.customFoldingProvider) | [`CustomFoldingProvider`](%gh-ic%/platform/core-api/src/com/intellij/lang/folding/CustomFoldingProvider.java) |
| [com.intellij.customLiveTemplate](https://jb.gg/ipe?extensions=com.intellij.customLiveTemplate) | [`CustomLiveTemplate`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/CustomLiveTemplate.java) |
| [com.intellij.customScopesFilter](https://jb.gg/ipe?extensions=com.intellij.customScopesFilter) | [`CustomScopesFilter`](%gh-ic%/platform/analysis-api/src/com/intellij/psi/search/scope/packageSet/CustomScopesFilter.java) |
| [com.intellij.customScopesProvider](https://jb.gg/ipe?extensions=com.intellij.customScopesProvider) ![Project-Level][project-level] | [`CustomScopesProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/psi/search/scope/packageSet/CustomScopesProvider.java) |
| [com.intellij.customUsageSearcher](https://jb.gg/ipe?extensions=com.intellij.customUsageSearcher) | [`CustomUsageSearcher`](%gh-ic%/platform/lang-impl/src/com/intellij/find/findUsages/CustomUsageSearcher.java) |
| [com.intellij.daemon.changeLocalityDetector](https://jb.gg/ipe?extensions=com.intellij.daemon.changeLocalityDetector) | [`ChangeLocalityDetector`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/daemon/ChangeLocalityDetector.java) |
| [com.intellij.daemon.essentialHighlightingRestarterDisablement](https://jb.gg/ipe?extensions=com.intellij.daemon.essentialHighlightingRestarterDisablement) | [`EssentialHighlightingRestarterDisablement`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/daemon/EssentialHighlightingRestarterDisablement.java) |
| [com.intellij.daemon.externalAnnotatorsFilter](https://jb.gg/ipe?extensions=com.intellij.daemon.externalAnnotatorsFilter) | [`ExternalAnnotatorsFilter`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/ExternalAnnotatorsFilter.java) |
| [com.intellij.daemon.highlightInfoFilter](https://jb.gg/ipe?extensions=com.intellij.daemon.highlightInfoFilter) | [`HighlightInfoFilter`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/daemon/impl/HighlightInfoFilter.java) |
| [com.intellij.daemon.indentsPassFilter](https://jb.gg/ipe?extensions=com.intellij.daemon.indentsPassFilter) | [`IndentsPassFilter`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/daemon/impl/IndentsPassFilter.java) |
| [com.intellij.daemon.intentionActionFilter](https://jb.gg/ipe?extensions=com.intellij.daemon.intentionActionFilter) | [`IntentionActionFilter`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/daemon/impl/IntentionActionFilter.java) |
| [com.intellij.daemon.statusItemMerger](https://jb.gg/ipe?extensions=com.intellij.daemon.statusItemMerger) | [`StatusItemMerger`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/daemon/impl/StatusItemMerger.java) |
| [com.intellij.daemon.tooltipActionProvider](https://jb.gg/ipe?extensions=com.intellij.daemon.tooltipActionProvider) | [`TooltipActionProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/daemon/impl/tooltips/TooltipActionProvider.java) |
| [com.intellij.declarationRangeHandler](https://jb.gg/ipe?extensions=com.intellij.declarationRangeHandler) | [`DeclarationRangeHandler`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hint/DeclarationRangeHandler.java) |
| [com.intellij.defaultHighlightingSettingProvider](https://jb.gg/ipe?extensions=com.intellij.defaultHighlightingSettingProvider) ![DumbAware][dumb-aware] | [`DefaultHighlightingSettingProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/daemon/impl/analysis/DefaultHighlightingSettingProvider.java) |
| [com.intellij.defaultLiveTemplates](https://jb.gg/ipe?extensions=com.intellij.defaultLiveTemplates) | `n/a` |
| [com.intellij.defaultLiveTemplatesProvider](https://jb.gg/ipe?extensions=com.intellij.defaultLiveTemplatesProvider) ![Deprecated][deprecated] ![Non-Dynamic][non-dynamic] | [`DefaultLiveTemplatesProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/impl/DefaultLiveTemplatesProvider.java) |
| [com.intellij.defaultTemplatePropertiesProvider](https://jb.gg/ipe?extensions=com.intellij.defaultTemplatePropertiesProvider) | [`DefaultTemplatePropertiesProvider`](%gh-ic%/platform/lang-api/src/com/intellij/ide/fileTemplates/DefaultTemplatePropertiesProvider.java) |
| [com.intellij.definitionsScopedSearch](https://jb.gg/ipe?extensions=com.intellij.definitionsScopedSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.diffPreviewProvider](https://jb.gg/ipe?extensions=com.intellij.diffPreviewProvider) ![Non-Dynamic][non-dynamic] | [`DiffPreviewProvider`](%gh-ic%/platform/diff-api/src/com/intellij/openapi/diff/impl/settings/DiffPreviewProvider.java) |
| [com.intellij.documentation.documentationDownloader](https://jb.gg/ipe?extensions=com.intellij.documentation.documentationDownloader) ![Experimental][experimental] | [`DocumentationDownloader`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/documentation/actions/DocumentationDownloader.kt) |
| [com.intellij.dynamicContextProvider](https://jb.gg/ipe?extensions=com.intellij.dynamicContextProvider) | [`DynamicContextProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/paths/DynamicContextProvider.java) |
| [com.intellij.editorAppearanceConfigurable](https://jb.gg/ipe?extensions=com.intellij.editorAppearanceConfigurable) | [`UnnamedConfigurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/UnnamedConfigurable.java) |
| [com.intellij.editorOptionsProvider](https://jb.gg/ipe?extensions=com.intellij.editorOptionsProvider) | [`EditorOptionsProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/application/options/editor/EditorOptionsProvider.java) |
| [com.intellij.editorSearchAreaProvider](https://jb.gg/ipe?extensions=com.intellij.editorSearchAreaProvider) ![Experimental][experimental] | [`EditorSearchAreaProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/find/impl/livePreview/EditorSearchAreaProvider.java) |
| [com.intellij.editorSmartKeysConfigurable](https://jb.gg/ipe?extensions=com.intellij.editorSmartKeysConfigurable) | [`UnnamedConfigurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/UnnamedConfigurable.java) |
| [com.intellij.editorTabsConfigurable](https://jb.gg/ipe?extensions=com.intellij.editorTabsConfigurable) ![Internal][internal] | [`UnnamedConfigurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/UnnamedConfigurable.java) |
| [com.intellij.elementDescriptionProvider](https://jb.gg/ipe?extensions=com.intellij.elementDescriptionProvider) | [`ElementDescriptionProvider`](%gh-ic%/platform/core-api/src/com/intellij/psi/ElementDescriptionProvider.java) |
| [com.intellij.elementPreviewProvider](https://jb.gg/ipe?extensions=com.intellij.elementPreviewProvider) | [`ElementPreviewProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/preview/ElementPreviewProvider.java) |
| [com.intellij.elementSignatureProvider](https://jb.gg/ipe?extensions=com.intellij.elementSignatureProvider) | [`ElementSignatureProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/folding/impl/ElementSignatureProvider.java) |
| [com.intellij.environmentKeyProvider](https://jb.gg/ipe?extensions=com.intellij.environmentKeyProvider) ![Experimental][experimental] | [`EnvironmentKeyProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ide/environment/EnvironmentKeyProvider.kt) |
| [com.intellij.errorOptionsProvider](https://jb.gg/ipe?extensions=com.intellij.errorOptionsProvider) ![Internal][internal] | [`ErrorOptionsProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/profile/codeInspection/ui/ErrorOptionsProvider.java) |
| [com.intellij.errorQuickFixProvider](https://jb.gg/ipe?extensions=com.intellij.errorQuickFixProvider) ![DumbAware][dumb-aware] | [`ErrorQuickFixProvider`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/daemon/impl/analysis/ErrorQuickFixProvider.java) |
| [com.intellij.executionTargetLanguageRuntimeType](https://jb.gg/ipe?extensions=com.intellij.executionTargetLanguageRuntimeType) | [`LanguageRuntimeType`](%gh-ic%/platform/execution/src/com/intellij/execution/target/LanguageRuntimeType.kt) |
| [com.intellij.executionTargetProvider](https://jb.gg/ipe?extensions=com.intellij.executionTargetProvider) | [`ExecutionTargetProvider`](%gh-ic%/platform/lang-api/src/com/intellij/execution/ExecutionTargetProvider.java) |
| [com.intellij.executionTargetType](https://jb.gg/ipe?extensions=com.intellij.executionTargetType) | [`TargetEnvironmentType`](%gh-ic%/platform/execution/src/com/intellij/execution/target/TargetEnvironmentType.kt) |
| [com.intellij.executor](https://jb.gg/ipe?extensions=com.intellij.executor) | [`Executor`](%gh-ic%/platform/execution/src/com/intellij/execution/Executor.java) |
| [com.intellij.externalAnnotator](https://jb.gg/ipe?extensions=com.intellij.externalAnnotator) ![DumbAware][dumb-aware] | [`ExternalAnnotator`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/annotation/ExternalAnnotator.java) |
| [com.intellij.facet.toolWindow](https://jb.gg/ipe?extensions=com.intellij.facet.toolWindow) ![DumbAware][dumb-aware] | [`ToolWindowFactory`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/ToolWindowFactory.kt) |
| [com.intellij.facetType](https://jb.gg/ipe?extensions=com.intellij.facetType) | [`FacetType`](%gh-ic%/platform/lang-core/src/com/intellij/facet/FacetType.java) |
| [com.intellij.favoriteNodeProvider](https://jb.gg/ipe?extensions=com.intellij.favoriteNodeProvider) ![Deprecated][deprecated] ![Removal][removal] ![Project-Level][project-level] | [`FavoriteNodeProvider`](%gh-ic%/platform/lang-api/src/com/intellij/ide/favoritesTreeView/FavoriteNodeProvider.java) |
| [com.intellij.favoritesListProvider](https://jb.gg/ipe?extensions=com.intellij.favoritesListProvider) ![Deprecated][deprecated] ![Removal][removal] ![Project-Level][project-level] | [`FavoritesListProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/favoritesTreeView/FavoritesListProvider.java) |
| [com.intellij.filePasteProvider](https://jb.gg/ipe?extensions=com.intellij.filePasteProvider) | [`PasteProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ide/PasteProvider.java) |
| [com.intellij.fileStructureGroupRuleProvider](https://jb.gg/ipe?extensions=com.intellij.fileStructureGroupRuleProvider) | [`FileStructureGroupRuleProvider`](%gh-ic%/platform/usageView-impl/src/com/intellij/usages/impl/FileStructureGroupRuleProvider.java) |
| [com.intellij.fileTemplateGroup](https://jb.gg/ipe?extensions=com.intellij.fileTemplateGroup) | [`FileTemplateGroupDescriptorFactory`](%gh-ic%/platform/lang-api/src/com/intellij/ide/fileTemplates/FileTemplateGroupDescriptorFactory.java) |
| [com.intellij.fileType.fileViewProviderFactory](https://jb.gg/ipe?extensions=com.intellij.fileType.fileViewProviderFactory) | [`FileViewProviderFactory`](%gh-ic%/platform/core-api/src/com/intellij/psi/FileViewProviderFactory.java) |
| [com.intellij.fileTypeStatisticProvider](https://jb.gg/ipe?extensions=com.intellij.fileTypeStatisticProvider) ![Deprecated][deprecated] | [`FileTypeStatisticProvider`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/statistic/fileTypes/FileTypeStatisticProvider.java) |
| [com.intellij.filetype.prebuiltStubsProvider](https://jb.gg/ipe?extensions=com.intellij.filetype.prebuiltStubsProvider) ![Deprecated][deprecated] ![Internal][internal] | [`PrebuiltStubsProvider`](%gh-ic%/platform/indexing-impl/src/com/intellij/psi/stubs/PrebuiltStubs.kt) |
| [com.intellij.filetype.stubBuilder](https://jb.gg/ipe?extensions=com.intellij.filetype.stubBuilder) | [`BinaryFileStubBuilder`](%gh-ic%/platform/core-api/src/com/intellij/psi/stubs/BinaryFileStubBuilder.java) |
| [com.intellij.findInProjectExtension](https://jb.gg/ipe?extensions=com.intellij.findInProjectExtension) ![Internal][internal] | [`FindInProjectExtension`](%gh-ic%/platform/lang-impl/src/com/intellij/find/impl/FindInProjectExtension.kt) |
| [com.intellij.findUsagesHandlerFactory](https://jb.gg/ipe?extensions=com.intellij.findUsagesHandlerFactory) ![Project-Level][project-level] | [`FindUsagesHandlerFactory`](%gh-ic%/platform/lang-impl/src/com/intellij/find/findUsages/FindUsagesHandlerFactory.java) |
| [com.intellij.focusModeProvider](https://jb.gg/ipe?extensions=com.intellij.focusModeProvider) ![Experimental][experimental] | [`FocusModeProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/daemon/impl/focusMode/FocusModeProvider.java) |
| [com.intellij.framework.detector](https://jb.gg/ipe?extensions=com.intellij.framework.detector) | [`FrameworkDetector`](%gh-ic%/platform/lang-api/src/com/intellij/framework/detection/FrameworkDetector.java) |
| [com.intellij.generalCodeStyleOptionsProvider](https://jb.gg/ipe?extensions=com.intellij.generalCodeStyleOptionsProvider) ![Internal][internal] | [`GeneralCodeStyleOptionsProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/application/options/GeneralCodeStyleOptionsProvider.java) |
| [com.intellij.globalIndexFilter](https://jb.gg/ipe?extensions=com.intellij.globalIndexFilter) ![Internal][internal] | [`GlobalIndexFilter`](%gh-ic%/platform/indexing-api/src/com/intellij/util/indexing/GlobalIndexFilter.java) |
| [com.intellij.goto.nonProjectScopeDisabler](https://jb.gg/ipe?extensions=com.intellij.goto.nonProjectScopeDisabler) ![Internal][internal] | `n/a` |
| [com.intellij.gotoActionAliasMatcher](https://jb.gg/ipe?extensions=com.intellij.gotoActionAliasMatcher) | [`GotoActionAliasMatcher`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/util/gotoByName/GotoActionAliasMatcher.java) |
| [com.intellij.gotoClassContributor](https://jb.gg/ipe?extensions=com.intellij.gotoClassContributor) | [`ChooseByNameContributor`](%gh-ic%/platform/lang-api/src/com/intellij/navigation/ChooseByNameContributor.java) |
| [com.intellij.gotoFileContributor](https://jb.gg/ipe?extensions=com.intellij.gotoFileContributor) | [`ChooseByNameContributor`](%gh-ic%/platform/lang-api/src/com/intellij/navigation/ChooseByNameContributor.java) |
| [com.intellij.gotoFileCustomizer](https://jb.gg/ipe?extensions=com.intellij.gotoFileCustomizer) | [`GotoFileCustomizer`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/util/gotoByName/GotoFileCustomizer.java) |
| [com.intellij.gotoRelatedProvider](https://jb.gg/ipe?extensions=com.intellij.gotoRelatedProvider) | [`GotoRelatedProvider`](%gh-ic%/platform/lang-api/src/com/intellij/navigation/GotoRelatedProvider.java) |
| [com.intellij.gotoSymbolContributor](https://jb.gg/ipe?extensions=com.intellij.gotoSymbolContributor) | [`ChooseByNameContributor`](%gh-ic%/platform/lang-api/src/com/intellij/navigation/ChooseByNameContributor.java) |
| [com.intellij.gotoTargetPresentationProvider](https://jb.gg/ipe?extensions=com.intellij.gotoTargetPresentationProvider) | [`GotoTargetPresentationProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/navigation/GotoTargetPresentationProvider.java) |
| [com.intellij.gotoTargetRendererProvider](https://jb.gg/ipe?extensions=com.intellij.gotoTargetRendererProvider) ![Deprecated][deprecated] | [`GotoTargetRendererProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/navigation/GotoTargetRendererProvider.java) |
| [com.intellij.heavyBracesHighlighter](https://jb.gg/ipe?extensions=com.intellij.heavyBracesHighlighter) ![Non-Dynamic][non-dynamic] | [`HeavyBraceHighlighter`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/highlighting/HeavyBraceHighlighter.java) |
| [com.intellij.hectorComponentProvider](https://jb.gg/ipe?extensions=com.intellij.hectorComponentProvider) ![Project-Level][project-level] | [`HectorComponentPanelsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/openapi/editor/HectorComponentPanelsProvider.java) |
| [com.intellij.highlightInfoPostFilter](https://jb.gg/ipe?extensions=com.intellij.highlightInfoPostFilter) ![Project-Level][project-level] | [`HighlightInfoPostFilter`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/daemon/impl/HighlightInfoPostFilter.java) |
| [com.intellij.highlightRangeExtension](https://jb.gg/ipe?extensions=com.intellij.highlightRangeExtension) | [`HighlightRangeExtension`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/daemon/impl/HighlightRangeExtension.java) |
| [com.intellij.highlightUsagesHandlerFactory](https://jb.gg/ipe?extensions=com.intellij.highlightUsagesHandlerFactory) ![DumbAware][dumb-aware] | [`HighlightUsagesHandlerFactory`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/highlighting/HighlightUsagesHandlerFactory.java) |
| [com.intellij.highlightVisitor](https://jb.gg/ipe?extensions=com.intellij.highlightVisitor) ![Project-Level][project-level] ![DumbAware][dumb-aware] | [`HighlightVisitor`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/daemon/impl/HighlightVisitor.java) |
| [com.intellij.highlightingPassFactory](https://jb.gg/ipe?extensions=com.intellij.highlightingPassFactory) | [`TextEditorHighlightingPassFactoryRegistrar`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeHighlighting/TextEditorHighlightingPassFactoryRegistrar.java) |
| [com.intellij.idIndexer](https://jb.gg/ipe?extensions=com.intellij.idIndexer) | [`IdIndexer`](%gh-ic%/platform/indexing-impl/src/com/intellij/psi/impl/cache/impl/id/IdIndexer.java) |
| [com.intellij.implementationViewDocumentFactory](https://jb.gg/ipe?extensions=com.intellij.implementationViewDocumentFactory) | [`ImplementationViewDocumentFactory`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/hint/ImplementationViewDocumentFactory.kt) |
| [com.intellij.implementationViewSessionFactory](https://jb.gg/ipe?extensions=com.intellij.implementationViewSessionFactory) | [`ImplementationViewSessionFactory`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/hint/ImplementationViewSession.kt) |
| [com.intellij.implicitUsageProvider](https://jb.gg/ipe?extensions=com.intellij.implicitUsageProvider) | [`ImplicitUsageProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/daemon/ImplicitUsageProvider.java) |
| [com.intellij.importBlockRangeProvider](https://jb.gg/ipe?extensions=com.intellij.importBlockRangeProvider) | [`ImportBlockRangeProvider`](%gh-ic%/platform/lang-api/src/com/intellij/lang/imports/ImportBlockRangeProvider.kt) |
| [com.intellij.importFilteringRule](https://jb.gg/ipe?extensions=com.intellij.importFilteringRule) | [`ImportFilteringRule`](%gh-ic%/platform/usageView/src/com/intellij/usages/rules/ImportFilteringRule.java) |
| [com.intellij.include.provider](https://jb.gg/ipe?extensions=com.intellij.include.provider) | [`FileIncludeProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/psi/impl/include/FileIncludeProvider.java) |
| [com.intellij.indexPatternBuilder](https://jb.gg/ipe?extensions=com.intellij.indexPatternBuilder) | [`IndexPatternBuilder`](%gh-ic%/platform/indexing-impl/src/com/intellij/psi/impl/search/IndexPatternBuilder.java) |
| [com.intellij.indexPatternProvider](https://jb.gg/ipe?extensions=com.intellij.indexPatternProvider) ![Non-Dynamic][non-dynamic] | [`IndexPatternProvider`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/IndexPatternProvider.java) |
| [com.intellij.indexPatternSearch](https://jb.gg/ipe?extensions=com.intellij.indexPatternSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [com.intellij.indexableEntityProvider](https://jb.gg/ipe?extensions=com.intellij.indexableEntityProvider) ![Experimental][experimental] ![Internal][internal] | [`IndexableEntityProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/util/indexing/roots/IndexableEntityProvider.java) |
| [com.intellij.indexableIteratorBuilderHandler](https://jb.gg/ipe?extensions=com.intellij.indexableIteratorBuilderHandler) | [`IndexableIteratorBuilderHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/util/indexing/roots/builders/IndexableIteratorBuilderHandler.java) |
| [com.intellij.inlineCompletionConfigurable](https://jb.gg/ipe?extensions=com.intellij.inlineCompletionConfigurable) ![Internal][internal] | [`UnnamedConfigurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/UnnamedConfigurable.java) |
| [com.intellij.inlinePrompt](https://jb.gg/ipe?extensions=com.intellij.inlinePrompt) ![Internal][internal] | [`InlinePromptExtension`](%gh-ic%/platform/analysis-api/src/com/intellij/inlinePrompt/InlinePromptExtension.kt) |
| [com.intellij.inspectionProfileActionProvider](https://jb.gg/ipe?extensions=com.intellij.inspectionProfileActionProvider) | [`InspectionProfileActionProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/profile/codeInspection/ui/InspectionProfileActionProvider.java) |
| [com.intellij.inspectionResultsExportActionProvider](https://jb.gg/ipe?extensions=com.intellij.inspectionResultsExportActionProvider) ![DumbAware][dumb-aware] | [`InspectionResultsExportActionProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInspection/ui/actions/InspectionResultsExportActionProvider.kt) |
| [com.intellij.inspectionTreeAdvertiser](https://jb.gg/ipe?extensions=com.intellij.inspectionTreeAdvertiser) | [`InspectionTreeAdvertiser`](%gh-ic%/platform/lang-impl/src/com/intellij/profile/codeInspection/ui/InspectionTreeAdvertiser.java) |
| [com.intellij.intentionMenuContributor](https://jb.gg/ipe?extensions=com.intellij.intentionMenuContributor) ![Internal][internal] | [`IntentionMenuContributor`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/daemon/impl/IntentionMenuContributor.java) |
| [com.intellij.intentionPopupProvider](https://jb.gg/ipe?extensions=com.intellij.intentionPopupProvider) | [`IntentionPopupProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/intention/impl/IntentionPopupProvider.kt) |
| [com.intellij.intentionsOrderProvider](https://jb.gg/ipe?extensions=com.intellij.intentionsOrderProvider) | [`IntentionsOrderProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/intention/impl/IntentionsOrderProvider.java) |
| [com.intellij.internalFileTemplate](https://jb.gg/ipe?extensions=com.intellij.internalFileTemplate) | `n/a` |
| [com.intellij.internalHighlightingLayerSupplier](https://jb.gg/ipe?extensions=com.intellij.internalHighlightingLayerSupplier) ![Experimental][experimental] ![Internal][internal] | [`InternalLayerSupplier`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/daemon/impl/InternalLayerSupplier.java) |
| [com.intellij.lang.braceMatcher](https://jb.gg/ipe?extensions=com.intellij.lang.braceMatcher) | [`PairedBraceMatcher`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/PairedBraceMatcher.java) |
| [com.intellij.lang.codeReferenceSearcher](https://jb.gg/ipe?extensions=com.intellij.lang.codeReferenceSearcher) | [`CodeReferenceSearcher`](%gh-ic%/platform/indexing-api/src/com/intellij/model/search/CodeReferenceSearcher.java) |
| [com.intellij.lang.directNavigationProvider](https://jb.gg/ipe?extensions=com.intellij.lang.directNavigationProvider) ![Experimental][experimental] | [`DirectNavigationProvider`](%gh-ic%/platform/core-api/src/com/intellij/navigation/DirectNavigationProvider.java) |
| [com.intellij.lang.documentation.syntaxHighlightingHandlerFactory](https://jb.gg/ipe?extensions=com.intellij.lang.documentation.syntaxHighlightingHandlerFactory) ![Internal][internal] | [`QuickDocSyntaxHighlightingHandlerFactory`](%gh-ic%/platform/lang-impl/src/com/intellij/lang/documentation/QuickDocSyntaxHighlightingHandler.kt) |
| [com.intellij.lang.documentationFixer](https://jb.gg/ipe?extensions=com.intellij.lang.documentationFixer) | [`DocCommentFixer`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/documentation/DocCommentFixer.java) |
| [com.intellij.lang.documentationToolWindowManager](https://jb.gg/ipe?extensions=com.intellij.lang.documentationToolWindowManager) ![Deprecated][deprecated] | [`DocToolWindowManager`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/documentation/DocToolWindowManager.java) |
| [com.intellij.lang.findUsagesProvider](https://jb.gg/ipe?extensions=com.intellij.lang.findUsagesProvider) | [`FindUsagesProvider`](%gh-ic%/platform/indexing-api/src/com/intellij/lang/findUsages/FindUsagesProvider.java) |
| [com.intellij.lang.floatingToolbar](https://jb.gg/ipe?extensions=com.intellij.lang.floatingToolbar) ![Experimental][experimental] | [`FloatingToolbarCustomization`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/codeFloatingToolbar/FloatingToolbarCustomizer.kt) |
| [com.intellij.lang.floatingToolbarCustomizer](https://jb.gg/ipe?extensions=com.intellij.lang.floatingToolbarCustomizer) ![Deprecated][deprecated] ![Experimental][experimental] | [`FloatingToolbarCustomizer`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/codeFloatingToolbar/FloatingToolbarCustomizer.kt) |
| [com.intellij.lang.foldingBuilder](https://jb.gg/ipe?extensions=com.intellij.lang.foldingBuilder) ![DumbAware][dumb-aware] | [`FoldingBuilder`](%gh-ic%/platform/core-api/src/com/intellij/lang/folding/FoldingBuilder.java) |
| [com.intellij.lang.implementationTextProcessor](https://jb.gg/ipe?extensions=com.intellij.lang.implementationTextProcessor) | [`ImplementationTextProcessor`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hint/ImplementationTextProcessor.java) |
| [com.intellij.lang.implementationTextSelectioner](https://jb.gg/ipe?extensions=com.intellij.lang.implementationTextSelectioner) | [`ImplementationTextSelectioner`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hint/ImplementationTextSelectioner.java) |
| [com.intellij.lang.logicalStructureElementsProvider](https://jb.gg/ipe?extensions=com.intellij.lang.logicalStructureElementsProvider) ![Experimental][experimental] | [`LogicalStructureElementsProvider`](%gh-ic%/platform/structure-view-impl/src/com/intellij/ide/structureView/logical/LogicalStructureElementsProvider.kt) |
| [com.intellij.lang.logicalStructureTreeElementProvider](https://jb.gg/ipe?extensions=com.intellij.lang.logicalStructureTreeElementProvider) | [`LogicalStructureTreeElementProvider`](%gh-ic%/platform/structure-view-impl/src/com/intellij/ide/structureView/logical/LogicalStructureTreeElementProvider.kt) |
| [com.intellij.lang.psiElementExternalizer](https://jb.gg/ipe?extensions=com.intellij.lang.psiElementExternalizer) | [`PsiElementExternalizer`](%gh-ic%/platform/lang-api/src/com/intellij/lang/PsiElementExternalizer.java) |
| [com.intellij.lang.psiStructureViewFactory](https://jb.gg/ipe?extensions=com.intellij.lang.psiStructureViewFactory) | [`PsiStructureViewFactory`](%gh-ic%/platform/editor-ui-api/src/com/intellij/lang/PsiStructureViewFactory.java) |
| [com.intellij.lang.sliceProvider](https://jb.gg/ipe?extensions=com.intellij.lang.sliceProvider) | [`SliceLanguageSupportProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/slicer/SliceLanguageSupportProvider.java) |
| [com.intellij.lang.structureViewExtension](https://jb.gg/ipe?extensions=com.intellij.lang.structureViewExtension) | [`StructureViewExtension`](%gh-ic%/platform/structure-view-impl/src/com/intellij/ide/structureView/StructureViewExtension.java) |
| [com.intellij.lang.surroundDescriptor](https://jb.gg/ipe?extensions=com.intellij.lang.surroundDescriptor) | [`SurroundDescriptor`](%gh-ic%/platform/lang-api/src/com/intellij/lang/surroundWith/SurroundDescriptor.java) |
| [com.intellij.lang.symbolSearchTarget](https://jb.gg/ipe?extensions=com.intellij.lang.symbolSearchTarget) | [`SymbolSearchTargetFactory`](%gh-ic%/platform/lang-impl/src/com/intellij/find/usages/symbol/SymbolSearchTargetFactory.java) |
| [com.intellij.lang.symbolTypeProvider](https://jb.gg/ipe?extensions=com.intellij.lang.symbolTypeProvider) ![Experimental][experimental] | [`SymbolTypeProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/navigation/SymbolTypeProvider.java) |
| [com.intellij.lang.syntaxHighlighter](https://jb.gg/ipe?extensions=com.intellij.lang.syntaxHighlighter) | [`SyntaxHighlighter`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/fileTypes/SyntaxHighlighter.java) |
| [com.intellij.lang.unwrapDescriptor](https://jb.gg/ipe?extensions=com.intellij.lang.unwrapDescriptor) | [`UnwrapDescriptor`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/unwrap/UnwrapDescriptor.java) |
| [com.intellij.library.presentationProvider](https://jb.gg/ipe?extensions=com.intellij.library.presentationProvider) | [`LibraryPresentationProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/roots/libraries/LibraryPresentationProvider.java) |
| [com.intellij.library.type](https://jb.gg/ipe?extensions=com.intellij.library.type) | [`LibraryType`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/roots/libraries/LibraryType.java) |
| [com.intellij.librarySettingsProvider](https://jb.gg/ipe?extensions=com.intellij.librarySettingsProvider) | [`LibrarySettingsProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/roots/ui/configuration/LibrarySettingsProvider.java) |
| [com.intellij.liveTemplateSubstitutor](https://jb.gg/ipe?extensions=com.intellij.liveTemplateSubstitutor) | [`TemplateSubstitutor`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/TemplateSubstitutor.java) |
| [com.intellij.longLineInspectionPolicy](https://jb.gg/ipe?extensions=com.intellij.longLineInspectionPolicy) | [`LongLineInspectionPolicy`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInspection/longLine/LongLineInspectionPolicy.java) |
| [com.intellij.macro](https://jb.gg/ipe?extensions=com.intellij.macro) | [`Macro`](%gh-ic%/platform/macro/src/com/intellij/ide/macro/Macro.java) |
| [com.intellij.macroFilter](https://jb.gg/ipe?extensions=com.intellij.macroFilter) | [`MacroFilter`](%gh-ic%/platform/macro/src/com/intellij/ide/macro/MacroFilter.java) |
| [com.intellij.marketplaceLocalRanker](https://jb.gg/ipe?extensions=com.intellij.marketplaceLocalRanker) ![Internal][internal] | [`MarketplaceLocalRanker`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/plugins/marketplace/ranking/MarketplaceLocalRanker.kt) |
| [com.intellij.marketplaceTextualFeaturesProvider](https://jb.gg/ipe?extensions=com.intellij.marketplaceTextualFeaturesProvider) ![Internal][internal] | [`MarketplaceTextualFeaturesProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/plugins/marketplace/statistics/features/MarketplaceTextualFeaturesProvider.kt) |
| [com.intellij.metaDataContributor](https://jb.gg/ipe?extensions=com.intellij.metaDataContributor) | [`MetaDataContributor`](%gh-ic%/platform/core-api/src/com/intellij/psi/meta/MetaDataContributor.java) |
| [com.intellij.methodHierarchyProvider](https://jb.gg/ipe?extensions=com.intellij.methodHierarchyProvider) | [`HierarchyProvider`](%gh-ic%/platform/lang-api/src/com/intellij/ide/hierarchy/HierarchyProvider.java) |
| [com.intellij.methodNavigationOffsetProvider](https://jb.gg/ipe?extensions=com.intellij.methodNavigationOffsetProvider) | [`MethodNavigationOffsetProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/navigation/MethodNavigationOffsetProvider.java) |
| [com.intellij.mlCodeCompletionConfigurable](https://jb.gg/ipe?extensions=com.intellij.mlCodeCompletionConfigurable) ![Internal][internal] | [`UnnamedConfigurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/UnnamedConfigurable.java) |
| [com.intellij.mlCompletionFeaturesCollector](https://jb.gg/ipe?extensions=com.intellij.mlCompletionFeaturesCollector) ![Internal][internal] | [`InlineCompletionFeaturesCollector`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/inline/completion/features/InlineCompletionFeaturesCollector.kt) |
| [com.intellij.modelScopeItemPresenter](https://jb.gg/ipe?extensions=com.intellij.modelScopeItemPresenter) ![Non-Dynamic][non-dynamic] | [`ModelScopeItemPresenter`](%gh-ic%/platform/lang-impl/src/com/intellij/analysis/dialog/ModelScopeItemPresenter.java) |
| [com.intellij.module.workingDirectoryProvider](https://jb.gg/ipe?extensions=com.intellij.module.workingDirectoryProvider) | [`WorkingDirectoryProvider`](%gh-ic%/platform/execution-impl/src/com/intellij/openapi/module/WorkingDirectoryProvider.java) |
| [com.intellij.moduleBuilder](https://jb.gg/ipe?extensions=com.intellij.moduleBuilder) | [`ModuleBuilder`](%gh-ic%/platform/lang-core/src/com/intellij/ide/util/projectWizard/ModuleBuilder.java) |
| [com.intellij.moduleConfigurationEditorProvider](https://jb.gg/ipe?extensions=com.intellij.moduleConfigurationEditorProvider) | [`ModuleConfigurationEditorProvider`](%gh-ic%/platform/lang-core/src/com/intellij/openapi/roots/ui/configuration/ModuleConfigurationEditorProvider.java) |
| [com.intellij.moduleNameGenerator](https://jb.gg/ipe?extensions=com.intellij.moduleNameGenerator) ![Experimental][experimental] | [`ModuleNameGenerator`](%gh-ic%/platform/lang-api/src/com/intellij/ide/util/projectWizard/ModuleNameGenerator.java) |
| [com.intellij.moduleRendererFactory](https://jb.gg/ipe?extensions=com.intellij.moduleRendererFactory) | [`ModuleRendererFactory`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/util/ModuleRendererFactory.java) |
| [com.intellij.moduleType](https://jb.gg/ipe?extensions=com.intellij.moduleType) ![Obsolete][obsolete] | [`ModuleType`](%gh-ic%/platform/lang-core/src/com/intellij/openapi/module/ModuleType.java) |
| [com.intellij.multiLangCommenter](https://jb.gg/ipe?extensions=com.intellij.multiLangCommenter) | [`MultipleLangCommentProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/psi/templateLanguages/MultipleLangCommentProvider.java) |
| [com.intellij.multipleRunLocationsProvider](https://jb.gg/ipe?extensions=com.intellij.multipleRunLocationsProvider) | [`MultipleRunLocationsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/execution/actions/MultipleRunLocationsProvider.kt) |
| [com.intellij.navbar](https://jb.gg/ipe?extensions=com.intellij.navbar) | [`NavBarModelExtension`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/navigationToolbar/NavBarModelExtension.java) |
| [com.intellij.newFileActionCategoryHandler](https://jb.gg/ipe?extensions=com.intellij.newFileActionCategoryHandler) ![Experimental][experimental] | [`NewFileActionCategoryHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/NewFileActionCategoryHandler.java) |
| [com.intellij.optionsApplicabilityFilter](https://jb.gg/ipe?extensions=com.intellij.optionsApplicabilityFilter) | [`OptionsApplicabilityFilter`](%gh-ic%/platform/lang-impl/src/com/intellij/application/options/OptionsApplicabilityFilter.java) |
| [com.intellij.outOfSourcesChecker](https://jb.gg/ipe?extensions=com.intellij.outOfSourcesChecker) | [`OutOfSourcesChecker`](%gh-ic%/platform/lang-api/src/com/intellij/openapi/projectRoots/OutOfSourcesChecker.java) |
| [com.intellij.overrideImplementsAnnotationsFilter](https://jb.gg/ipe?extensions=com.intellij.overrideImplementsAnnotationsFilter) | [`OverrideImplementsAnnotationsFilter`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/generation/OverrideImplementsAnnotationsFilter.java) |
| [com.intellij.packageDependencies.visitor](https://jb.gg/ipe?extensions=com.intellij.packageDependencies.visitor) | [`DependencyVisitorFactory`](%gh-ic%/platform/analysis-impl/src/com/intellij/packageDependencies/DependencyVisitorFactory.java) |
| [com.intellij.packageGroupRuleProvider](https://jb.gg/ipe?extensions=com.intellij.packageGroupRuleProvider) ![Internal][internal] | [`PackageGroupRuleProvider`](%gh-ic%/platform/usageView-impl/src/com/intellij/usages/impl/PackageGroupRuleProvider.kt) |
| [com.intellij.pathReferenceProvider](https://jb.gg/ipe?extensions=com.intellij.pathReferenceProvider) | [`PathReferenceProvider`](%gh-ic%/platform/lang-api/src/com/intellij/openapi/paths/PathReferenceProvider.java) |
| [com.intellij.patternDialectProvider](https://jb.gg/ipe?extensions=com.intellij.patternDialectProvider) ![Non-Dynamic][non-dynamic] | [`PatternDialectProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/packageDependencies/ui/PatternDialectProvider.java) |
| [com.intellij.patterns.patternClass](https://jb.gg/ipe?extensions=com.intellij.patterns.patternClass) | `Object` |
| [com.intellij.platform.backend.documentation.inlineDocumentationProvider](https://jb.gg/ipe?extensions=com.intellij.platform.backend.documentation.inlineDocumentationProvider) | [`InlineDocumentationProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/platform/backend/documentation/InlineDocumentationProvider.java) |
| [com.intellij.platform.backend.documentation.linkHandler](https://jb.gg/ipe?extensions=com.intellij.platform.backend.documentation.linkHandler) | [`DocumentationLinkHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/platform/backend/documentation/DocumentationLinkHandler.java) |
| [com.intellij.platform.backend.documentation.psiTargetProvider](https://jb.gg/ipe?extensions=com.intellij.platform.backend.documentation.psiTargetProvider) | [`PsiDocumentationTargetProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/platform/backend/documentation/PsiDocumentationTargetProvider.java) |
| [com.intellij.platform.backend.documentation.symbolTargetProvider](https://jb.gg/ipe?extensions=com.intellij.platform.backend.documentation.symbolTargetProvider) ![Experimental][experimental] | [`SymbolDocumentationTargetProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/platform/backend/documentation/SymbolDocumentationTargetProvider.java) |
| [com.intellij.platform.backend.documentation.targetProvider](https://jb.gg/ipe?extensions=com.intellij.platform.backend.documentation.targetProvider) | [`DocumentationTargetProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/platform/backend/documentation/DocumentationTargetProvider.java) |
| [com.intellij.platform.ijent.ijentExecFileProvider](https://jb.gg/ipe?extensions=com.intellij.platform.ijent.ijentExecFileProvider) ![Internal][internal] | [`IjentExecFileProvider`](%gh-ic%/platform/ijent/src/com/intellij/platform/ijent/IjentExecFileProvider.kt) |
| [com.intellij.platform.lang.lsWidget.itemsProvider](https://jb.gg/ipe?extensions=com.intellij.platform.lang.lsWidget.itemsProvider) ![Experimental][experimental] | [`LanguageServiceWidgetItemsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/platform/lang/lsWidget/LanguageServiceWidgetItemsProvider.kt) |
| [com.intellij.presentationProvider](https://jb.gg/ipe?extensions=com.intellij.presentationProvider) | [`PresentationProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/ide/presentation/PresentationProvider.java) |
| [com.intellij.printHandler](https://jb.gg/ipe?extensions=com.intellij.printHandler) | [`PrintActionHandler`](%gh-ic%/platform/lang-api/src/com/intellij/ide/actions/PrintActionHandler.java) |
| [com.intellij.printOption](https://jb.gg/ipe?extensions=com.intellij.printOption) | [`PrintOption`](%gh-ic%/platform/lang-impl/src/com/intellij/codeEditor/printing/PrintOption.java) |
| [com.intellij.problemFileHighlightFilter](https://jb.gg/ipe?extensions=com.intellij.problemFileHighlightFilter) ![Project-Level][project-level] | [`Condition`](%gh-ic%/platform/util/src/com/intellij/openapi/util/Condition.java) |
| [com.intellij.problemHighlightFilter](https://jb.gg/ipe?extensions=com.intellij.problemHighlightFilter) | [`ProblemHighlightFilter`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/daemon/ProblemHighlightFilter.java) |
| [com.intellij.problemsViewPanelProvider](https://jb.gg/ipe?extensions=com.intellij.problemsViewPanelProvider) ![Project-Level][project-level] | [`ProblemsViewPanelProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/analysis/problemsView/toolWindow/ProblemsViewPanelProvider.kt) |
| [com.intellij.programRunner](https://jb.gg/ipe?extensions=com.intellij.programRunner) | [`ProgramRunner`](%gh-ic%/platform/execution/src/com/intellij/execution/runners/ProgramRunner.java) |
| [com.intellij.project.converterProvider](https://jb.gg/ipe?extensions=com.intellij.project.converterProvider) | [`ConverterProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/conversion/ConverterProvider.java) |
| [com.intellij.projectFacetListener](https://jb.gg/ipe?extensions=com.intellij.projectFacetListener) ![Internal][internal] | [`ProjectFacetListener`](%gh-ic%/platform/lang-api/src/com/intellij/facet/ProjectFacetListener.java) |
| [com.intellij.projectSdkSetupValidator](https://jb.gg/ipe?extensions=com.intellij.projectSdkSetupValidator) | [`ProjectSdkSetupValidator`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/daemon/ProjectSdkSetupValidator.java) |
| [com.intellij.projectStructure.sourceRootEditHandler](https://jb.gg/ipe?extensions=com.intellij.projectStructure.sourceRootEditHandler) | [`ModuleSourceRootEditHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/roots/ui/configuration/ModuleSourceRootEditHandler.java) |
| [com.intellij.projectTaskRunner](https://jb.gg/ipe?extensions=com.intellij.projectTaskRunner) | [`ProjectTaskRunner`](%gh-ic%/platform/lang-api/src/com/intellij/task/ProjectTaskRunner.java) |
| [com.intellij.projectTemplateFileProcessor](https://jb.gg/ipe?extensions=com.intellij.projectTemplateFileProcessor) | [`ProjectTemplateFileProcessor`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/util/projectWizard/ProjectTemplateFileProcessor.java) |
| [com.intellij.projectTemplateParameterFactory](https://jb.gg/ipe?extensions=com.intellij.projectTemplateParameterFactory) | [`ProjectTemplateParameterFactory`](%gh-ic%/platform/lang-core/src/com/intellij/ide/util/projectWizard/ProjectTemplateParameterFactory.java) |
| [com.intellij.projectView.externalLibraries.workspaceModelNodesProvider](https://jb.gg/ipe?extensions=com.intellij.projectView.externalLibraries.workspaceModelNodesProvider) ![Experimental][experimental] | [`ExternalLibrariesWorkspaceModelNodesProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/projectView/impl/nodes/ExternalLibrariesWorkspaceModelNodesProvider.java) |
| [com.intellij.projectViewNestingRulesProvider](https://jb.gg/ipe?extensions=com.intellij.projectViewNestingRulesProvider) | [`ProjectViewNestingRulesProvider`](%gh-ic%/platform/lang-api/src/com/intellij/ide/projectView/ProjectViewNestingRulesProvider.java) |
| [com.intellij.projectViewNodeDecorator](https://jb.gg/ipe?extensions=com.intellij.projectViewNodeDecorator) ![Project-Level][project-level] | [`ProjectViewNodeDecorator`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/projectView/ProjectViewNodeDecorator.java) |
| [com.intellij.projectViewPane](https://jb.gg/ipe?extensions=com.intellij.projectViewPane) ![Project-Level][project-level] | [`AbstractProjectViewPane`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/projectView/impl/AbstractProjectViewPane.java) |
| [com.intellij.projectViewPaneSelectionHelper](https://jb.gg/ipe?extensions=com.intellij.projectViewPaneSelectionHelper) | [`ProjectViewPaneSelectionHelper`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/projectView/impl/ProjectViewPaneSelectionHelper.java) |
| [com.intellij.properties.files.provider](https://jb.gg/ipe?extensions=com.intellij.properties.files.provider) | [`PropertiesProvider`](%gh-ic%/platform/lang-api/src/com/intellij/properties/provider/PropertiesProvider.java) |
| [com.intellij.psi.declarationProvider](https://jb.gg/ipe?extensions=com.intellij.psi.declarationProvider) | [`PsiSymbolDeclarationProvider`](%gh-ic%/platform/core-api/src/com/intellij/model/psi/PsiSymbolDeclarationProvider.java) |
| [com.intellij.psi.referenceProvider](https://jb.gg/ipe?extensions=com.intellij.psi.referenceProvider) ![Non-Dynamic][non-dynamic] | [`PsiReferenceProvider`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReferenceProvider.java) |
| [com.intellij.readWriteAccessDetector](https://jb.gg/ipe?extensions=com.intellij.readWriteAccessDetector) | [`ReadWriteAccessDetector`](%gh-ic%/platform/core-api/src/com/intellij/codeInsight/highlighting/ReadWriteAccessDetector.java) |
| [com.intellij.readerModeMatcher](https://jb.gg/ipe?extensions=com.intellij.readerModeMatcher) | [`ReaderModeMatcher`](%gh-ic%/platform/editor-ui-api/src/com/intellij/codeInsight/actions/ReaderModeMatcher.kt) |
| [com.intellij.readerModeProvider](https://jb.gg/ipe?extensions=com.intellij.readerModeProvider) | [`ReaderModeProvider`](%gh-ic%/platform/editor-ui-api/src/com/intellij/codeInsight/actions/ReaderModeProvider.kt) |
| [com.intellij.refGraphAnnotator](https://jb.gg/ipe?extensions=com.intellij.refGraphAnnotator) | [`RefGraphAnnotator`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/reference/RefGraphAnnotator.java) |
| [com.intellij.refactoring.codeVisionSupport](https://jb.gg/ipe?extensions=com.intellij.refactoring.codeVisionSupport) | [`RefactoringCodeVisionSupport`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/RefactoringCodeVisionSupport.java) |
| [com.intellij.referenceImporter](https://jb.gg/ipe?extensions=com.intellij.referenceImporter) | [`ReferenceImporter`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/daemon/ReferenceImporter.java) |
| [com.intellij.referenceInjector](https://jb.gg/ipe?extensions=com.intellij.referenceInjector) | [`ReferenceInjector`](%gh-ic%/platform/analysis-api/src/com/intellij/psi/injection/ReferenceInjector.java) |
| [com.intellij.referenceProviderType](https://jb.gg/ipe?extensions=com.intellij.referenceProviderType) | [`PsiReferenceProvider`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReferenceProvider.java) |
| [com.intellij.retypeFileAssistant](https://jb.gg/ipe?extensions=com.intellij.retypeFileAssistant) | [`RetypeFileAssistant`](%gh-ic%/platform/lang-impl/src/com/intellij/internal/retype/RetypeFileAction.kt) |
| [com.intellij.roots.watchedRootsProvider](https://jb.gg/ipe?extensions=com.intellij.roots.watchedRootsProvider) | [`WatchedRootsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/openapi/roots/WatchedRootsProvider.java) |
| [com.intellij.runAnything.commandCustomizer](https://jb.gg/ipe?extensions=com.intellij.runAnything.commandCustomizer) | [`RunAnythingCommandCustomizer`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/runAnything/commands/RunAnythingCommandCustomizer.java) |
| [com.intellij.runAnything.commandHandler](https://jb.gg/ipe?extensions=com.intellij.runAnything.commandHandler) | [`RunAnythingCommandHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/runAnything/handlers/RunAnythingCommandHandler.java) |
| [com.intellij.runAnything.executionProvider](https://jb.gg/ipe?extensions=com.intellij.runAnything.executionProvider) | [`RunAnythingProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/runAnything/activity/RunAnythingProvider.java) |
| [com.intellij.runAnything.helpGroup](https://jb.gg/ipe?extensions=com.intellij.runAnything.helpGroup) | [`RunAnythingHelpGroup`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/runAnything/groups/RunAnythingHelpGroup.java) |
| [com.intellij.runConfigurationBeforeRunProviderDelegate](https://jb.gg/ipe?extensions=com.intellij.runConfigurationBeforeRunProviderDelegate) | [`RunConfigurationBeforeRunProviderDelegate`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/impl/RunConfigurationBeforeRunProviderDelegate.java) |
| [com.intellij.runConfigurationProducer](https://jb.gg/ipe?extensions=com.intellij.runConfigurationProducer) ![DumbAware][dumb-aware] | [`RunConfigurationProducer`](%gh-ic%/platform/lang-api/src/com/intellij/execution/actions/RunConfigurationProducer.java) |
| [com.intellij.runConfigurationTargetEnvironmentAdjusterFactory](https://jb.gg/ipe?extensions=com.intellij.runConfigurationTargetEnvironmentAdjusterFactory) ![Internal][internal] | [`Factory`](%gh-ic%/platform/execution/src/com/intellij/execution/target/RunConfigurationTargetEnvironmentAdjuster.kt) |
| [com.intellij.runConfigurationTemplateProvider](https://jb.gg/ipe?extensions=com.intellij.runConfigurationTemplateProvider) ![Project-Level][project-level] | [`RunConfigurationTemplateProvider`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/impl/RunManagerImpl.kt) |
| [com.intellij.runConfigurationsSettings](https://jb.gg/ipe?extensions=com.intellij.runConfigurationsSettings) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | [`RunConfigurationsSettings`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RunConfigurationsSettings.java) |
| [com.intellij.runDashboardCustomizer](https://jb.gg/ipe?extensions=com.intellij.runDashboardCustomizer) | [`RunDashboardCustomizer`](%gh-ic%/platform/lang-api/src/com/intellij/execution/dashboard/RunDashboardCustomizer.java) |
| [com.intellij.runDashboardDefaultTypesProvider](https://jb.gg/ipe?extensions=com.intellij.runDashboardDefaultTypesProvider) | [`RunDashboardDefaultTypesProvider`](%gh-ic%/platform/lang-api/src/com/intellij/execution/dashboard/RunDashboardDefaultTypesProvider.java) |
| [com.intellij.runDashboardGroupingRule](https://jb.gg/ipe?extensions=com.intellij.runDashboardGroupingRule) | [`RunDashboardGroupingRule`](%gh-ic%/platform/lang-api/src/com/intellij/execution/dashboard/RunDashboardGroupingRule.java) |
| [com.intellij.runLineMarkerContributor](https://jb.gg/ipe?extensions=com.intellij.runLineMarkerContributor) ![DumbAware][dumb-aware] | [`RunLineMarkerContributor`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/lineMarker/RunLineMarkerContributor.java) |
| [com.intellij.runToolbarProcess](https://jb.gg/ipe?extensions=com.intellij.runToolbarProcess) | [`RunToolbarProcess`](%gh-ic%/platform/execution/src/com/intellij/execution/runToolbar/RunToolbarProcess.kt) |
| [com.intellij.runningApplicationUpdaterProvider](https://jb.gg/ipe?extensions=com.intellij.runningApplicationUpdaterProvider) | [`RunningApplicationUpdaterProvider`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/update/RunningApplicationUpdaterProvider.java) |
| [com.intellij.safeDeleteTargetProvider](https://jb.gg/ipe?extensions=com.intellij.safeDeleteTargetProvider) | [`SafeDeleteTargetProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/safeDelete/api/SafeDeleteTargetProvider.kt) |
| [com.intellij.saveFileAsTemplateHandler](https://jb.gg/ipe?extensions=com.intellij.saveFileAsTemplateHandler) | [`SaveFileAsTemplateHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/SaveFileAsTemplateHandler.java) |
| [com.intellij.scopeDescriptorProvider](https://jb.gg/ipe?extensions=com.intellij.scopeDescriptorProvider) | [`ScopeDescriptorProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/util/scopeChooser/ScopeDescriptorProvider.kt) |
| [com.intellij.scopeParserExtension](https://jb.gg/ipe?extensions=com.intellij.scopeParserExtension) | [`PackageSetParserExtension`](%gh-ic%/platform/lang-impl/src/com/intellij/psi/search/scope/packageSet/PackageSetParserExtension.java) |
| [com.intellij.scratch.creationHelper](https://jb.gg/ipe?extensions=com.intellij.scratch.creationHelper) | [`ScratchFileCreationHelper`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/scratch/ScratchFileCreationHelper.java) |
| [com.intellij.scratch.rootType](https://jb.gg/ipe?extensions=com.intellij.scratch.rootType) | [`RootType`](%gh-ic%/platform/analysis-api/src/com/intellij/ide/scratch/RootType.java) |
| [com.intellij.sdkDownload](https://jb.gg/ipe?extensions=com.intellij.sdkDownload) | [`SdkDownload`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/roots/ui/configuration/projectRoot/SdkDownload.java) |
| [com.intellij.sdkFinder](https://jb.gg/ipe?extensions=com.intellij.sdkFinder) | [`SdkFinder`](%gh-ic%/platform/projectModel-impl/src/com/intellij/openapi/roots/impl/SdkFinder.java) |
| [com.intellij.sdkType](https://jb.gg/ipe?extensions=com.intellij.sdkType) | [`SdkType`](%gh-ic%/platform/lang-core/src/com/intellij/openapi/projectRoots/SdkType.java) |
| [com.intellij.searchEverywhereClassifier](https://jb.gg/ipe?extensions=com.intellij.searchEverywhereClassifier) | [`SearchEverywhereClassifier`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/SearchEverywhereClassifier.java) |
| [com.intellij.searchEverywhereContributor](https://jb.gg/ipe?extensions=com.intellij.searchEverywhereContributor) | [`SearchEverywhereContributorFactory`](%gh-ic%/platform/lang-api/src/com/intellij/ide/actions/searcheverywhere/SearchEverywhereContributorFactory.java) |
| [com.intellij.searchEverywhereMlContributorReplacement](https://jb.gg/ipe?extensions=com.intellij.searchEverywhereMlContributorReplacement) ![Internal][internal] | [`SearchEverywhereMlContributorReplacement`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/searcheverywhere/SearchEverywhereMlContributorReplacement.kt) |
| [com.intellij.searchEverywhereMlService](https://jb.gg/ipe?extensions=com.intellij.searchEverywhereMlService) ![Internal][internal] | [`SearchEverywhereMlService`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/searcheverywhere/SearchEverywhereMlService.kt) |
| [com.intellij.searchEverywherePreviewPrimaryUsageFinder](https://jb.gg/ipe?extensions=com.intellij.searchEverywherePreviewPrimaryUsageFinder) ![Internal][internal] | [`SearchEverywherePreviewPrimaryUsageFinder`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/searcheverywhere/SearchEverywherePreviewPrimaryUsageFinder.kt) |
| [com.intellij.searchEverywhereRemoteConverter](https://jb.gg/ipe?extensions=com.intellij.searchEverywhereRemoteConverter) | [`RemoteSearchEverywhereConverterSupplier`](%gh-ic%/platform/lang-api/src/com/intellij/ide/actions/searcheverywhere/remote/RemoteSearchEverywhereConverterSupplier.java) |
| [com.intellij.searchEverywhereReorderingService](https://jb.gg/ipe?extensions=com.intellij.searchEverywhereReorderingService) ![Internal][internal] | [`SearchEverywhereReorderingService`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/searcheverywhere/SearchEverywhereReorderingService.kt) |
| [com.intellij.searchEverywhereResultsEqualityProvider](https://jb.gg/ipe?extensions=com.intellij.searchEverywhereResultsEqualityProvider) | [`SEResultsEqualityProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/searcheverywhere/SEResultsEqualityProvider.kt) |
| [com.intellij.searchEverywhereSpellingCorrector](https://jb.gg/ipe?extensions=com.intellij.searchEverywhereSpellingCorrector) ![Internal][internal] | [`SearchEverywhereSpellingCorrectorFactory`](%gh-ic%/platform/lang-api/src/com/intellij/ide/actions/searcheverywhere/SearchEverywhereSpellingCorrector.kt) |
| [com.intellij.searchScopesProvider](https://jb.gg/ipe?extensions=com.intellij.searchScopesProvider) | [`SearchScopeProvider`](%gh-ic%/platform/analysis-impl/src/com/intellij/psi/search/SearchScopeProvider.java) |
| [com.intellij.searcher](https://jb.gg/ipe?extensions=com.intellij.searcher) | [`Searcher`](%gh-ic%/platform/indexing-api/src/com/intellij/model/search/Searcher.kt) |
| [com.intellij.semContributor](https://jb.gg/ipe?extensions=com.intellij.semContributor) | [`SemContributor`](%gh-ic%/platform/lang-api/src/com/intellij/semantic/SemContributor.java) |
| [com.intellij.serviceViewContributor](https://jb.gg/ipe?extensions=com.intellij.serviceViewContributor) | [`ServiceViewContributor`](%gh-ic%/platform/lang-api/src/com/intellij/execution/services/ServiceViewContributor.java) |
| [com.intellij.silentChangeVetoer](https://jb.gg/ipe?extensions=com.intellij.silentChangeVetoer) ![Internal][internal] | [`SilentChangeVetoer`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/daemon/impl/SilentChangeVetoer.java) |
| [com.intellij.stacktrace.fold](https://jb.gg/ipe?extensions=com.intellij.stacktrace.fold) ![Internal][internal] | `n/a` |
| [com.intellij.stacktrace.fold.line.modifier](https://jb.gg/ipe?extensions=com.intellij.stacktrace.fold.line.modifier) ![Experimental][experimental] | [`ConsoleLineModifier`](%gh-ic%/platform/lang-impl/src/com/intellij/execution/console/ConsoleLineModifier.java) |
| [com.intellij.statistician](https://jb.gg/ipe?extensions=com.intellij.statistician) | [`Statistician`](%gh-ic%/platform/analysis-api/src/com/intellij/psi/statistics/Statistician.java) |
| [com.intellij.stepsBeforeRunProvider](https://jb.gg/ipe?extensions=com.intellij.stepsBeforeRunProvider) ![Project-Level][project-level] ![DumbAware][dumb-aware] | [`BeforeRunTaskProvider`](%gh-ic%/platform/execution/src/com/intellij/execution/BeforeRunTaskProvider.java) |
| [com.intellij.structureViewBuilder](https://jb.gg/ipe?extensions=com.intellij.structureViewBuilder) | [`StructureViewBuilder`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/structureView/StructureViewBuilder.kt) |
| [com.intellij.symbolDeclarationPresentationProvider](https://jb.gg/ipe?extensions=com.intellij.symbolDeclarationPresentationProvider) | [`SymbolDeclarationPresentationProvider`](%gh-ic%/platform/core-api/src/com/intellij/model/presentation/SymbolDeclarationPresentationProvider.java) |
| [com.intellij.symbolNavigation](https://jb.gg/ipe?extensions=com.intellij.symbolNavigation) ![Experimental][experimental] | [`SymbolNavigationProvider`](%gh-ic%/platform/core-api/src/com/intellij/navigation/SymbolNavigationProvider.java) |
| [com.intellij.targetElementEvaluator](https://jb.gg/ipe?extensions=com.intellij.targetElementEvaluator) | [`TargetElementEvaluator`](%gh-ic%/platform/core-impl/src/com/intellij/codeInsight/TargetElementEvaluator.java) |
| [com.intellij.targetElementUtilExtender](https://jb.gg/ipe?extensions=com.intellij.targetElementUtilExtender) | [`TargetElementUtilExtender`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/TargetElementUtilExtender.java) |
| [com.intellij.templateCompletionProcessor](https://jb.gg/ipe?extensions=com.intellij.templateCompletionProcessor) | [`TemplateCompletionProcessor`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/template/macro/TemplateCompletionProcessor.java) |
| [com.intellij.testActionProvider](https://jb.gg/ipe?extensions=com.intellij.testActionProvider) | [`ToggleModelActionProvider`](%gh-ic%/platform/testRunner/src/com/intellij/execution/testframework/ToggleModelActionProvider.java) |
| [com.intellij.testCreator](https://jb.gg/ipe?extensions=com.intellij.testCreator) ![DumbAware][dumb-aware] | [`TestCreator`](%gh-ic%/platform/lang-api/src/com/intellij/testIntegration/TestCreator.java) |
| [com.intellij.testDiffProvider](https://jb.gg/ipe?extensions=com.intellij.testDiffProvider) | [`TestDiffProvider`](%gh-ic%/platform/testRunner/src/com/intellij/execution/testframework/actions/TestDiffProvider.java) |
| [com.intellij.testFinder](https://jb.gg/ipe?extensions=com.intellij.testFinder) | [`TestFinder`](%gh-ic%/platform/lang-api/src/com/intellij/testIntegration/TestFinder.java) |
| [com.intellij.testSrcLocator](https://jb.gg/ipe?extensions=com.intellij.testSrcLocator) ![Deprecated][deprecated] ![Removal][removal] | [`TestLocationProvider`](%gh-ic%/platform/execution-impl/src/com/intellij/testIntegration/TestLocationProvider.java) |
| [com.intellij.todoExtraPlaces](https://jb.gg/ipe?extensions=com.intellij.todoExtraPlaces) | [`ExtraPlaceChecker`](%gh-ic%/platform/indexing-impl/src/com/intellij/psi/impl/cache/impl/todo/TodoIndexers.java) |
| [com.intellij.todoIndexer](https://jb.gg/ipe?extensions=com.intellij.todoIndexer) | [`DataIndexer`](%gh-ic%/platform/util/src/com/intellij/util/indexing/DataIndexer.java) |
| [com.intellij.toolsCustomizer](https://jb.gg/ipe?extensions=com.intellij.toolsCustomizer) | [`ToolsCustomizer`](%gh-ic%/platform/lang-impl/src/com/intellij/tools/ToolsCustomizer.java) |
| [com.intellij.toolsProvider](https://jb.gg/ipe?extensions=com.intellij.toolsProvider) | [`ToolsProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/tools/ToolsProvider.java) |
| [com.intellij.trafficLightRendererContributor](https://jb.gg/ipe?extensions=com.intellij.trafficLightRendererContributor) | [`TrafficLightRendererContributor`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/daemon/impl/TrafficLightRendererContributor.java) |
| [com.intellij.treeGenerator](https://jb.gg/ipe?extensions=com.intellij.treeGenerator) | [`TreeGenerator`](%gh-ic%/platform/core-impl/src/com/intellij/psi/impl/source/tree/TreeGenerator.java) |
| [com.intellij.treeStructureProvider](https://jb.gg/ipe?extensions=com.intellij.treeStructureProvider) ![Project-Level][project-level] ![DumbAware][dumb-aware] | [`TreeStructureProvider`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/projectView/TreeStructureProvider.java) |
| [com.intellij.typeDeclarationProvider](https://jb.gg/ipe?extensions=com.intellij.typeDeclarationProvider) | [`TypeDeclarationProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/navigation/actions/TypeDeclarationProvider.java) |
| [com.intellij.typeHierarchyProvider](https://jb.gg/ipe?extensions=com.intellij.typeHierarchyProvider) | [`HierarchyProvider`](%gh-ic%/platform/lang-api/src/com/intellij/ide/hierarchy/HierarchyProvider.java) |
| [com.intellij.typeIcon](https://jb.gg/ipe?extensions=com.intellij.typeIcon) | `Object` |
| [com.intellij.typeName](https://jb.gg/ipe?extensions=com.intellij.typeName) | `Object` |
| [com.intellij.uiDebuggerExtension](https://jb.gg/ipe?extensions=com.intellij.uiDebuggerExtension) ![Non-Dynamic][non-dynamic] | [`UiDebuggerExtension`](%gh-ic%/platform/lang-impl/src/com/intellij/ui/debugger/UiDebuggerExtension.java) |
| [com.intellij.usageContextPanelProvider](https://jb.gg/ipe?extensions=com.intellij.usageContextPanelProvider) ![Project-Level][project-level] | [`Provider`](%gh-ic%/platform/usageView/src/com/intellij/usages/UsageContextPanel.java) |
| [com.intellij.usageFeaturesProvider](https://jb.gg/ipe?extensions=com.intellij.usageFeaturesProvider) ![Experimental][experimental] | [`UsageSimilarityFeaturesProvider`](%gh-ic%/platform/usageView/src/com/intellij/usages/similarity/features/UsageSimilarityFeaturesProvider.java) |
| [com.intellij.usageFilteringRuleProvider](https://jb.gg/ipe?extensions=com.intellij.usageFilteringRuleProvider) | [`UsageFilteringRuleProvider`](%gh-ic%/platform/usageView/src/com/intellij/usages/rules/UsageFilteringRuleProvider.java) |
| [com.intellij.usageGroupingRuleProvider](https://jb.gg/ipe?extensions=com.intellij.usageGroupingRuleProvider) | [`UsageGroupingRuleProvider`](%gh-ic%/platform/usageView/src/com/intellij/usages/rules/UsageGroupingRuleProvider.java) |
| [com.intellij.usageTargetProvider](https://jb.gg/ipe?extensions=com.intellij.usageTargetProvider) ![DumbAware][dumb-aware] | [`UsageTargetProvider`](%gh-ic%/platform/usageView/src/com/intellij/usages/UsageTargetProvider.java) |
| [com.intellij.usageToPsiElementProvider](https://jb.gg/ipe?extensions=com.intellij.usageToPsiElementProvider) | [`UsageToPsiElementProvider`](%gh-ic%/platform/usageView/src/com/intellij/usages/UsageToPsiElementProvider.java) |
| [com.intellij.usageTypeProvider](https://jb.gg/ipe?extensions=com.intellij.usageTypeProvider) | [`UsageTypeProvider`](%gh-ic%/platform/usageView-impl/src/com/intellij/usages/impl/rules/UsageTypeProvider.java) |
| [com.intellij.usageViewElementsListener](https://jb.gg/ipe?extensions=com.intellij.usageViewElementsListener) | [`UsageViewElementsListener`](%gh-ic%/platform/usageView-impl/src/com/intellij/usages/impl/UsageViewElementsListener.java) |
| [com.intellij.usageViewFactory](https://jb.gg/ipe?extensions=com.intellij.usageViewFactory) | [`UsageViewFactory`](%gh-ic%/platform/usageView-impl/src/com/intellij/usages/impl/UsageViewFactory.java) |
| [com.intellij.usageViewPopupFactory](https://jb.gg/ipe?extensions=com.intellij.usageViewPopupFactory) ![Internal][internal] | [`UsageViewPopupFactory`](%gh-ic%/platform/usageView-impl/src/com/intellij/usages/impl/UsageViewPopup.kt) |

### ml.xml

[`ml.xml`](%gh-ic%/platform/ml-impl/resources/META-INF/ml.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.platform.ml.impl.approach](https://jb.gg/ipe?extensions=com.intellij.platform.ml.impl.approach) ![Internal][internal] | [`MLTaskApproachBuilder`](%gh-ic%/platform/ml-api/src/com/intellij/platform/ml/MLTask.kt) |
| [com.intellij.platform.ml.impl.turboComplete.smartPipelineRunner](https://jb.gg/ipe?extensions=com.intellij.platform.ml.impl.turboComplete.smartPipelineRunner) ![Internal][internal] | [`SmartPipelineRunner`](%gh-ic%/platform/ml-impl/src/com/intellij/platform/ml/impl/turboComplete/SmartPipelineRunner.kt) |

### OpenTelemetryExtensions.xml

[`OpenTelemetryExtensions.xml`](%gh-ic%/platform/diagnostic/telemetry-impl/resources/META-INF/OpenTelemetryExtensions.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.openTelemetryExporterProvider](https://jb.gg/ipe?extensions=com.intellij.openTelemetryExporterProvider) ![Internal][internal] | [`OpenTelemetryExporterProvider`](%gh-ic%/platform/diagnostic/telemetry-impl/src/OpenTelemetryExporterProvider.kt) |

### PlatformExecutionActions.xml

[`PlatformExecutionActions.xml`](%gh-ic%/platform/execution-impl/src/META-INF/PlatformExecutionActions.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.execution.displayDescriptorChooser](https://jb.gg/ipe?extensions=com.intellij.execution.displayDescriptorChooser) | [`DisplayDescriptorChooser`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/StoppableRunDescriptors.kt) |
| [com.intellij.multilaunch.condition.template](https://jb.gg/ipe?extensions=com.intellij.multilaunch.condition.template) ![Experimental][experimental] | [`ConditionTemplate`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/multilaunch/execution/conditions/ConditionTemplate.kt) |
| [com.intellij.multilaunch.task.definition](https://jb.gg/ipe?extensions=com.intellij.multilaunch.task.definition) ![Experimental][experimental] | [`TaskExecutableTemplate`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/multilaunch/execution/executables/TaskExecutableTemplate.kt) |

### PlatformExtensionPoints.xml

[`PlatformExtensionPoints.xml`](%gh-ic%/platform/platform-resources/src/META-INF/PlatformExtensionPoints.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.ApplicationLoadListener](https://jb.gg/ipe?extensions=com.intellij.ApplicationLoadListener) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`ApplicationLoadListener`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/ApplicationLoadListener.kt) |
| [com.intellij.aboutPopupDescriptionProvider](https://jb.gg/ipe?extensions=com.intellij.aboutPopupDescriptionProvider) | [`AboutPopupDescriptionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/AboutPopupDescriptionProvider.kt) |
| [com.intellij.achromatopsiaSupport](https://jb.gg/ipe?extensions=com.intellij.achromatopsiaSupport) ![Non-Dynamic][non-dynamic] | [`ColorBlindnessSupport`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/ui/ColorBlindnessSupport.java) |
| [com.intellij.actionConfigurationCustomizer](https://jb.gg/ipe?extensions=com.intellij.actionConfigurationCustomizer) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`ActionConfigurationCustomizer`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/actionSystem/impl/ActionConfigurationCustomizer.kt) |
| [com.intellij.actionFromOptionDescriptorProvider](https://jb.gg/ipe?extensions=com.intellij.actionFromOptionDescriptorProvider) | [`ActionFromOptionDescriptorProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ide/ui/search/ActionFromOptionDescriptorProvider.java) |
| [com.intellij.actionOnSave](https://jb.gg/ipe?extensions=com.intellij.actionOnSave) | [`ActionOnSave`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/actionsOnSave/impl/ActionsOnSaveFileDocumentManagerListener.kt) |
| [com.intellij.actionOnSaveInfoProvider](https://jb.gg/ipe?extensions=com.intellij.actionOnSaveInfoProvider) | [`ActionOnSaveInfoProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/actionsOnSave/ActionOnSaveInfoProvider.java) |
| [com.intellij.actionPromoter](https://jb.gg/ipe?extensions=com.intellij.actionPromoter) | [`ActionPromoter`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/actionSystem/ActionPromoter.java) |
| [com.intellij.activityTracker](https://jb.gg/ipe?extensions=com.intellij.activityTracker) | [`ActivityTracker`](%gh-ic%/platform/backend/observation/src/com/intellij/platform/backend/observation/ActivityTracker.kt) |
| [com.intellij.additionalTextAttributes](https://jb.gg/ipe?extensions=com.intellij.additionalTextAttributes) ![Internal][internal] | `n/a` |
| [com.intellij.advancedSetting](https://jb.gg/ipe?extensions=com.intellij.advancedSetting) | `n/a` |
| [com.intellij.appStarter](https://jb.gg/ipe?extensions=com.intellij.appStarter) | [`ApplicationStarter`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/application/ApplicationStarter.kt) |
| [com.intellij.applicationConfigurable](https://jb.gg/ipe?extensions=com.intellij.applicationConfigurable) | [`Configurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/Configurable.java) |
| [com.intellij.applicationSettings](https://jb.gg/ipe?extensions=com.intellij.applicationSettings) ![Experimental][experimental] | [`PersistentStateComponent`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/components/PersistentStateComponent.java) |
| [com.intellij.authorizationProvider](https://jb.gg/ipe?extensions=com.intellij.authorizationProvider) ![Internal][internal] | [`AuthorizationProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/impl/AuthorizationProvider.java) |
| [com.intellij.backedVirtualFileProvider](https://jb.gg/ipe?extensions=com.intellij.backedVirtualFileProvider) ![Experimental][experimental] | [`BackedVirtualFileProvider`](%gh-ic%/platform/core-api/src/com/intellij/notebook/editor/BackedVirtualFileProvider.java) |
| [com.intellij.beforeRunStartupTasks](https://jb.gg/ipe?extensions=com.intellij.beforeRunStartupTasks) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | [`BeforeRunStartupTasks`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/startup/BeforeRunStartupTasks.kt) |
| [com.intellij.breadcrumbsPresentationProvider](https://jb.gg/ipe?extensions=com.intellij.breadcrumbsPresentationProvider) | [`BreadcrumbsPresentationProvider`](%gh-ic%/platform/platform-api/src/com/intellij/xml/breadcrumbs/BreadcrumbsPresentationProvider.java) |
| [com.intellij.bundledColorScheme](https://jb.gg/ipe?extensions=com.intellij.bundledColorScheme) | `n/a` |
| [com.intellij.bundledInspectionProfile](https://jb.gg/ipe?extensions=com.intellij.bundledInspectionProfile) ![Non-Dynamic][non-dynamic] | `n/a` |
| [com.intellij.bundledKeymap](https://jb.gg/ipe?extensions=com.intellij.bundledKeymap) ![Internal][internal] | `n/a` |
| [com.intellij.bundledQuickListsProvider](https://jb.gg/ipe?extensions=com.intellij.bundledQuickListsProvider) | [`BundledQuickListsProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/actionSystem/impl/BundledQuickListsProvider.java) |
| [com.intellij.cachedValuesFactory](https://jb.gg/ipe?extensions=com.intellij.cachedValuesFactory) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | [`CachedValuesFactory`](%gh-ic%/platform/core-impl/src/com/intellij/util/CachedValuesFactory.kt) |
| [com.intellij.cachesInvalidator](https://jb.gg/ipe?extensions=com.intellij.cachesInvalidator) | [`CachesInvalidator`](%gh-ic%/platform/ide-core/src/com/intellij/ide/caches/CachesInvalidator.java) |
| [com.intellij.cefDelegate](https://jb.gg/ipe?extensions=com.intellij.cefDelegate) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`CefDelegate`](%gh-ic%/platform/ui.jcef/jcef/CefDelegate.java) |
| [com.intellij.classpathStorageProvider](https://jb.gg/ipe?extensions=com.intellij.classpathStorageProvider) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`ClasspathStorageProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/roots/impl/storage/ClasspathStorageProvider.java) |
| [com.intellij.codeInsight.folding.collapseBlockHandler](https://jb.gg/ipe?extensions=com.intellij.codeInsight.folding.collapseBlockHandler) | [`CollapseBlockHandler`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/folding/CollapseBlockHandler.java) |
| [com.intellij.codeInsight.linkHandler](https://jb.gg/ipe?extensions=com.intellij.codeInsight.linkHandler) | [`TooltipLinkHandler`](%gh-ic%/platform/platform-api/src/com/intellij/codeInsight/highlighting/TooltipLinkHandler.java) |
| [com.intellij.codeInsight.template.postfixTemplateProvider](https://jb.gg/ipe?extensions=com.intellij.codeInsight.template.postfixTemplateProvider) | [`PostfixTemplateProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/templates/PostfixTemplateProvider.java) |
| [com.intellij.codeWithMe.authorizationProvider](https://jb.gg/ipe?extensions=com.intellij.codeWithMe.authorizationProvider) ![Deprecated][deprecated] ![Experimental][experimental] ![Internal][internal] | [`CodeWithMeAuthorizationProvider`](%gh-ic%/platform/platform-api/src/com/intellij/codeWithMe/CodeWithMeAuthorizationProvider.kt) |
| [com.intellij.codeWithMe.serverUrlProvider](https://jb.gg/ipe?extensions=com.intellij.codeWithMe.serverUrlProvider) ![Deprecated][deprecated] ![Experimental][experimental] ![Internal][internal] | [`CodeWithMeServerUrlProvider`](%gh-ic%/platform/platform-api/src/com/intellij/codeWithMe/CodeWithMeServerUrlProvider.kt) |
| [com.intellij.colorAndFontOptionsImportHandler](https://jb.gg/ipe?extensions=com.intellij.colorAndFontOptionsImportHandler) ![Non-Dynamic][non-dynamic] | [`ImportHandler`](%gh-ic%/platform/platform-impl/src/com/intellij/application/options/colors/ImportHandler.java) |
| [com.intellij.colorPickerListenerFactory](https://jb.gg/ipe?extensions=com.intellij.colorPickerListenerFactory) | [`ColorPickerListenerFactory`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/ColorPickerListenerFactory.java) |
| [com.intellij.config.codeVisionGroupSettingProvider](https://jb.gg/ipe?extensions=com.intellij.config.codeVisionGroupSettingProvider) | [`CodeVisionGroupSettingProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/codeVision/settings/CodeVisionGroupSettingProvider.kt) |
| [com.intellij.config.inlayGroupSettingProvider](https://jb.gg/ipe?extensions=com.intellij.config.inlayGroupSettingProvider) | [`InlayGroupSettingProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/settings/InlayGroupSettingProvider.kt) |
| [com.intellij.config.inlaySettingsProvider](https://jb.gg/ipe?extensions=com.intellij.config.inlaySettingsProvider) | [`InlaySettingsProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/settings/InlaySettingsProvider.kt) |
| [com.intellij.configurablesPatcher](https://jb.gg/ipe?extensions=com.intellij.configurablesPatcher) ![Experimental][experimental] ![Internal][internal] | [`ConfigurablesPatcher`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/actions/ConfigurablesPatcher.java) |
| [com.intellij.contentTabActionProvider](https://jb.gg/ipe?extensions=com.intellij.contentTabActionProvider) | [`ContentTabActionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/content/tabActions/ContentTabAction.kt) |
| [com.intellij.coursesStorageProvider](https://jb.gg/ipe?extensions=com.intellij.coursesStorageProvider) | [`CoursesStorageProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/welcomeScreen/learnIde/coursesInProgress/CoursesStorageProvider.kt) |
| [com.intellij.credentialStore](https://jb.gg/ipe?extensions=com.intellij.credentialStore) ![Non-Dynamic][non-dynamic] | [`CredentialStoreFactory`](%gh-ic%/platform/credential-store-impl/src/credentialStore/CredentialStoreFactory.java) |
| [com.intellij.customFileDropHandler](https://jb.gg/ipe?extensions=com.intellij.customFileDropHandler) ![Deprecated][deprecated] ![Project-Level][project-level] | [`CustomFileDropHandler`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/editor/CustomFileDropHandler.java) |
| [com.intellij.customizableActionGroupProvider](https://jb.gg/ipe?extensions=com.intellij.customizableActionGroupProvider) | [`CustomizableActionGroupProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/ui/customization/CustomizableActionGroupProvider.java) |
| [com.intellij.cutElementMarker](https://jb.gg/ipe?extensions=com.intellij.cutElementMarker) | [`CutElementMarker`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ide/CutElementMarker.java) |
| [com.intellij.dataValidators](https://jb.gg/ipe?extensions=com.intellij.dataValidators) ![Internal][internal] | [`DataValidators`](%gh-ic%/platform/ide-core-impl/src/com/intellij/ide/impl/DataValidators.java) |
| [com.intellij.defaultToolWindowLayout](https://jb.gg/ipe?extensions=com.intellij.defaultToolWindowLayout) | [`DefaultToolWindowLayoutExtension`](%gh-ic%/platform/platform-impl/src/com/intellij/toolWindow/defaultToolWindowlayoutProvider.kt) |
| [com.intellij.defender.config](https://jb.gg/ipe?extensions=com.intellij.defender.config) | [`Extension`](%gh-ic%/platform/platform-impl/src/com/intellij/diagnostic/WindowsDefenderChecker.java) |
| [com.intellij.dependencyCollector](https://jb.gg/ipe?extensions=com.intellij.dependencyCollector) | [`DependencyCollector`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/plugins/DependencyCollector.kt) |
| [com.intellij.dependencySupport](https://jb.gg/ipe?extensions=com.intellij.dependencySupport) | `n/a` |
| [com.intellij.deuteranopiaSupport](https://jb.gg/ipe?extensions=com.intellij.deuteranopiaSupport) ![Non-Dynamic][non-dynamic] | [`ColorBlindnessSupport`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/ui/ColorBlindnessSupport.java) |
| [com.intellij.diff.DiffExtension](https://jb.gg/ipe?extensions=com.intellij.diff.DiffExtension) | [`DiffExtension`](%gh-ic%/platform/diff-api/src/com/intellij/diff/DiffExtension.java) |
| [com.intellij.diff.DiffTool](https://jb.gg/ipe?extensions=com.intellij.diff.DiffTool) | [`DiffTool`](%gh-ic%/platform/diff-api/src/com/intellij/diff/DiffTool.java) |
| [com.intellij.diff.actions.ShowDiffAction.ExtensionProvider](https://jb.gg/ipe?extensions=com.intellij.diff.actions.ShowDiffAction.ExtensionProvider) | [`AnActionExtensionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/actionSystem/AnActionExtensionProvider.java) |
| [com.intellij.diff.actions.ShowStandaloneDiffAction.ExtensionProvider](https://jb.gg/ipe?extensions=com.intellij.diff.actions.ShowStandaloneDiffAction.ExtensionProvider) | [`AnActionExtensionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/actionSystem/AnActionExtensionProvider.java) |
| [com.intellij.diff.editor.diffRequestProcessorEditorCustomizer](https://jb.gg/ipe?extensions=com.intellij.diff.editor.diffRequestProcessorEditorCustomizer) | [`DiffRequestProcessorEditorCustomizer`](%gh-ic%/platform/diff-impl/src/com/intellij/diff/editor/DiffRequestProcessorEditorCustomizer.kt) |
| [com.intellij.diff.impl.DiffToolSubstitutor](https://jb.gg/ipe?extensions=com.intellij.diff.impl.DiffToolSubstitutor) ![Internal][internal] | [`DiffToolSubstitutor`](%gh-ic%/platform/diff-impl/src/com/intellij/diff/impl/DiffToolSubstitutor.java) |
| [com.intellij.diff.lang.DiffIgnoredRangeProvider](https://jb.gg/ipe?extensions=com.intellij.diff.lang.DiffIgnoredRangeProvider) | [`DiffIgnoredRangeProvider`](%gh-ic%/platform/diff-impl/src/com/intellij/diff/lang/DiffIgnoredRangeProvider.java) |
| [com.intellij.diff.merge.MergeTool](https://jb.gg/ipe?extensions=com.intellij.diff.merge.MergeTool) | [`MergeTool`](%gh-ic%/platform/diff-api/src/com/intellij/diff/merge/MergeTool.java) |
| [com.intellij.diff.merge.external.AutomaticExternalMergeTool](https://jb.gg/ipe?extensions=com.intellij.diff.merge.external.AutomaticExternalMergeTool) | [`AutomaticExternalMergeTool`](%gh-ic%/platform/diff-api/src/com/intellij/diff/merge/external/AutomaticExternalMergeTool.java) |
| [com.intellij.directoryProjectConfigurator](https://jb.gg/ipe?extensions=com.intellij.directoryProjectConfigurator) | [`DirectoryProjectConfigurator`](%gh-ic%/platform/platform-impl/src/com/intellij/platform/DirectoryProjectConfigurator.kt) |
| [com.intellij.directoryProjectGenerator](https://jb.gg/ipe?extensions=com.intellij.directoryProjectGenerator) | [`DirectoryProjectGenerator`](%gh-ic%/platform/platform-impl/src/com/intellij/platform/DirectoryProjectGenerator.java) |
| [com.intellij.documentationActionProvider](https://jb.gg/ipe?extensions=com.intellij.documentationActionProvider) | [`DocumentationActionProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/documentation/DocumentationActionProvider.java) |
| [com.intellij.dynamicActionConfigurationCustomizer](https://jb.gg/ipe?extensions=com.intellij.dynamicActionConfigurationCustomizer) | [`DynamicActionConfigurationCustomizer`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/actionSystem/impl/DynamicActionConfigurationCustomizer.java) |
| [com.intellij.editor.injectedFileChangesHandlerProvider](https://jb.gg/ipe?extensions=com.intellij.editor.injectedFileChangesHandlerProvider) | [`InjectedFileChangesHandlerProvider`](%gh-ic%/platform/editor-ui-api/src/com/intellij/injected/editor/InjectedFileChangesHandlerProvider.java) |
| [com.intellij.editor.linePainter](https://jb.gg/ipe?extensions=com.intellij.editor.linePainter) | [`EditorLinePainter`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/editor/EditorLinePainter.java) |
| [com.intellij.editorActionHandler](https://jb.gg/ipe?extensions=com.intellij.editorActionHandler) | [`EditorActionHandler`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/EditorActionHandler.java) |
| [com.intellij.editorAutoClosingHandler](https://jb.gg/ipe?extensions=com.intellij.editorAutoClosingHandler) ![Experimental][experimental] ![Internal][internal] | [`EditorAutoClosingHandler`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/fileEditor/impl/EditorAutoClosingHandler.kt) |
| [com.intellij.editorFactoryMouseListener](https://jb.gg/ipe?extensions=com.intellij.editorFactoryMouseListener) | [`EditorMouseListener`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/event/EditorMouseListener.java) |
| [com.intellij.editorFactoryMouseMotionListener](https://jb.gg/ipe?extensions=com.intellij.editorFactoryMouseMotionListener) | [`EditorMouseMotionListener`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/event/EditorMouseMotionListener.java) |
| [com.intellij.editorFileSwapper](https://jb.gg/ipe?extensions=com.intellij.editorFileSwapper) | [`EditorFileSwapper`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/fileEditor/impl/EditorFileSwapper.java) |
| [com.intellij.editorFloatingToolbarProvider](https://jb.gg/ipe?extensions=com.intellij.editorFloatingToolbarProvider) | [`FloatingToolbarProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/editor/toolbar/floating/FloatingToolbarProvider.kt) |
| [com.intellij.editorHighlighterProvider](https://jb.gg/ipe?extensions=com.intellij.editorHighlighterProvider) | [`EditorHighlighterProvider`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/fileTypes/EditorHighlighterProvider.java) |
| [com.intellij.editorNavigation](https://jb.gg/ipe?extensions=com.intellij.editorNavigation) | [`EditorNavigationDelegate`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/EditorNavigationDelegate.java) |
| [com.intellij.editorNotificationProvider](https://jb.gg/ipe?extensions=com.intellij.editorNotificationProvider) ![Project-Level][project-level] ![DumbAware][dumb-aware] | [`EditorNotificationProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ui/EditorNotificationProvider.java) |
| [com.intellij.editorTabColorProvider](https://jb.gg/ipe?extensions=com.intellij.editorTabColorProvider) ![DumbAware][dumb-aware] | [`EditorTabColorProvider`](%gh-ic%/platform/ide-core-impl/src/com/intellij/openapi/fileEditor/impl/EditorTabColorProvider.java) |
| [com.intellij.editorTabTitleProvider](https://jb.gg/ipe?extensions=com.intellij.editorTabTitleProvider) | [`EditorTabTitleProvider`](%gh-ic%/platform/ide-core-impl/src/com/intellij/openapi/fileEditor/impl/EditorTabTitleProvider.kt) |
| [com.intellij.editorTypedHandler](https://jb.gg/ipe?extensions=com.intellij.editorTypedHandler) ![Removal][removal] ![Non-Dynamic][non-dynamic] | [`TypedActionHandler`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/TypedActionHandler.java) |
| [com.intellij.eelProvider](https://jb.gg/ipe?extensions=com.intellij.eelProvider) ![Internal][internal] | [`EelProvider`](%gh-ic%/platform/eelProvider/src/com/intellij/platform/eel/provider/EelProvider.kt) |
| [com.intellij.emptyIntentionProvider](https://jb.gg/ipe?extensions=com.intellij.emptyIntentionProvider) ![Internal][internal] | [`EmptyIntentionProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/daemon/impl/EmptyIntentionProvider.kt) |
| [com.intellij.endUserAgreementUpdater](https://jb.gg/ipe?extensions=com.intellij.endUserAgreementUpdater) | `n/a` |
| [com.intellij.errorHandler](https://jb.gg/ipe?extensions=com.intellij.errorHandler) | [`ErrorReportSubmitter`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/diagnostic/ErrorReportSubmitter.java) |
| [com.intellij.eventLogCategory](https://jb.gg/ipe?extensions=com.intellij.eventLogCategory) | [`EventLogCategory`](%gh-ic%/platform/ide-core/src/com/intellij/notification/EventLogCategory.java) |
| [com.intellij.execution.syntheticConfigurationTypeProvider](https://jb.gg/ipe?extensions=com.intellij.execution.syntheticConfigurationTypeProvider) ![Experimental][experimental] | [`SyntheticConfigurationTypeProvider`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/SyntheticConfigurationTypeProvider.java) |
| [com.intellij.executionActionSuppressor](https://jb.gg/ipe?extensions=com.intellij.executionActionSuppressor) ![Experimental][experimental] ![Internal][internal] | [`ExecutionActionSuppressor`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/ExecutionActionSuppressor.java) |
| [com.intellij.experimentalFeature](https://jb.gg/ipe?extensions=com.intellij.experimentalFeature) ![Internal][internal] | `n/a` |
| [com.intellij.exportable](https://jb.gg/ipe?extensions=com.intellij.exportable) ![Deprecated][deprecated] ![Non-Dynamic][non-dynamic] | `n/a` |
| [com.intellij.externalComponentSource](https://jb.gg/ipe?extensions=com.intellij.externalComponentSource) | [`ExternalComponentSource`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/externalComponents/ExternalComponentSource.java) |
| [com.intellij.featureStatisticsBundle](https://jb.gg/ipe?extensions=com.intellij.featureStatisticsBundle) | `n/a` |
| [com.intellij.feedbackDescriptionProvider](https://jb.gg/ipe?extensions=com.intellij.feedbackDescriptionProvider) ![Non-Dynamic][non-dynamic] | [`FeedbackDescriptionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/FeedbackDescriptionProvider.kt) |
| [com.intellij.fileBreadcrumbsCollector](https://jb.gg/ipe?extensions=com.intellij.fileBreadcrumbsCollector) ![Project-Level][project-level] | [`FileBreadcrumbsCollector`](%gh-ic%/platform/platform-api/src/com/intellij/codeInsight/breadcrumbs/FileBreadcrumbsCollector.java) |
| [com.intellij.fileDocumentManagerListener](https://jb.gg/ipe?extensions=com.intellij.fileDocumentManagerListener) | [`FileDocumentManagerListener`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/fileEditor/FileDocumentManagerListener.java) |
| [com.intellij.fileDocumentSynchronizationVetoer](https://jb.gg/ipe?extensions=com.intellij.fileDocumentSynchronizationVetoer) | [`FileDocumentSynchronizationVetoer`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/fileEditor/FileDocumentSynchronizationVetoer.java) |
| [com.intellij.fileDropHandler](https://jb.gg/ipe?extensions=com.intellij.fileDropHandler) | [`FileDropHandler`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/editor/FileDropHandler.kt) |
| [com.intellij.fileEditorProvider](https://jb.gg/ipe?extensions=com.intellij.fileEditorProvider) ![DumbAware][dumb-aware] | [`FileEditorProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/openapi/fileEditor/FileEditorProvider.java) |
| [com.intellij.fileEditorProviderSuppressor](https://jb.gg/ipe?extensions=com.intellij.fileEditorProviderSuppressor) ![Internal][internal] | [`FileEditorProviderSuppressor`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/fileEditor/impl/FileEditorProviderSuppressor.java) |
| [com.intellij.fileEncodingProvider](https://jb.gg/ipe?extensions=com.intellij.fileEncodingProvider) | [`FileEncodingProvider`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/encoding/FileEncodingProvider.java) |
| [com.intellij.fileType](https://jb.gg/ipe?extensions=com.intellij.fileType) | [`FileType`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileTypes/FileType.java) |
| [com.intellij.fileTypeFactory](https://jb.gg/ipe?extensions=com.intellij.fileTypeFactory) ![Deprecated][deprecated] ![Non-Dynamic][non-dynamic] | [`FileTypeFactory`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/fileTypes/FileTypeFactory.java) |
| [com.intellij.fileTypeOverrider](https://jb.gg/ipe?extensions=com.intellij.fileTypeOverrider) ![Experimental][experimental] | [`FileTypeOverrider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/fileTypes/impl/FileTypeOverrider.java) |
| [com.intellij.fileTypeRegistrar](https://jb.gg/ipe?extensions=com.intellij.fileTypeRegistrar) ![Non-Dynamic][non-dynamic] | [`FileTypeRegistrar`](%gh-ic%/platform/ide-core/src/com/intellij/ide/highlighter/FileTypeRegistrar.java) |
| [com.intellij.fileTypeUsageSchemaDescriptor](https://jb.gg/ipe?extensions=com.intellij.fileTypeUsageSchemaDescriptor) ![Internal][internal] | [`FileTypeUsageSchemaDescriptor`](%gh-ic%/platform/platform-impl/src/com/intellij/internal/statistic/collectors/fus/fileTypes/FileTypeUsageSchemaDescriptor.java) |
| [com.intellij.findInDirectoryScopeProvider](https://jb.gg/ipe?extensions=com.intellij.findInDirectoryScopeProvider) ![Experimental][experimental] ![Internal][internal] | [`FindInDirectoryScopeProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/find/impl/FindInDirectoryScopeProvider.kt) |
| [com.intellij.flsConfigurationProvider](https://jb.gg/ipe?extensions=com.intellij.flsConfigurationProvider) ![Internal][internal] | [`FLSConfigurationProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/impl/FLSConfigurationProvider.java) |
| [com.intellij.fragments.dsl.builder.extender](https://jb.gg/ipe?extensions=com.intellij.fragments.dsl.builder.extender) ![Experimental][experimental] ![Internal][internal] | [`FragmentsDslBuilderExtender`](%gh-ic%/platform/platform-api/src/com/intellij/execution/ui/utils/FragmentsDslBuilder.kt) |
| [com.intellij.generalOptionsProvider](https://jb.gg/ipe?extensions=com.intellij.generalOptionsProvider) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`SearchableConfigurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/SearchableConfigurable.java) |
| [com.intellij.generalTroubleInfoCollector](https://jb.gg/ipe?extensions=com.intellij.generalTroubleInfoCollector) | [`GeneralTroubleInfoCollector`](%gh-ic%/platform/platform-impl/src/com/intellij/troubleshooting/GeneralTroubleInfoCollector.java) |
| [com.intellij.genericAuthProvider](https://jb.gg/ipe?extensions=com.intellij.genericAuthProvider) ![Experimental][experimental] ![Internal][internal] | [`GenericAuthProviderExtension`](%gh-ic%/platform/platform-impl/src/com/intellij/auth/GenericAuthProvider.kt) |
| [com.intellij.getDataRule](https://jb.gg/ipe?extensions=com.intellij.getDataRule) | [`GetDataRule`](%gh-ic%/platform/ide-core-impl/src/com/intellij/ide/impl/dataRules/GetDataRule.java) |
| [com.intellij.gitRepositoryInitializer](https://jb.gg/ipe?extensions=com.intellij.gitRepositoryInitializer) | [`GitRepositoryInitializer`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/GitRepositoryInitializer.java) |
| [com.intellij.gitSilentFileAdder](https://jb.gg/ipe?extensions=com.intellij.gitSilentFileAdder) ![Internal][internal] ![Project-Level][project-level] | [`GitSilentFileAdderProvider`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/GitSilentFileAdderProvider.java) |
| [com.intellij.groupConfigurable](https://jb.gg/ipe?extensions=com.intellij.groupConfigurable) | `n/a` |
| [com.intellij.gutterMarkPreprocessor](https://jb.gg/ipe?extensions=com.intellij.gutterMarkPreprocessor) ![Non-Dynamic][non-dynamic] | [`GutterMarkPreprocessor`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/GutterMarkPreprocessor.java) |
| [com.intellij.handleTypeFactory](https://jb.gg/ipe?extensions=com.intellij.handleTypeFactory) ![Non-Dynamic][non-dynamic] ![Internal][internal] ![Project-Level][project-level] | [`HandleTypeFactory`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/vcs/readOnlyHandler/HandleTypeFactory.java) |
| [com.intellij.http.fileEditorActionProvider](https://jb.gg/ipe?extensions=com.intellij.http.fileEditorActionProvider) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`RemoteFileEditorActionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/fileEditor/impl/http/RemoteFileEditorActionProvider.java) |
| [com.intellij.http.localFileFinder](https://jb.gg/ipe?extensions=com.intellij.http.localFileFinder) | [`LocalFileFinder`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/fileEditor/impl/http/LocalFileFinder.java) |
| [com.intellij.iconDescriptionBundle](https://jb.gg/ipe?extensions=com.intellij.iconDescriptionBundle) | `n/a` |
| [com.intellij.iconMapper](https://jb.gg/ipe?extensions=com.intellij.iconMapper) ![Internal][internal] | `n/a` |
| [com.intellij.iconMapperSuppressor](https://jb.gg/ipe?extensions=com.intellij.iconMapperSuppressor) ![Non-Dynamic][non-dynamic] | `n/a` |
| [com.intellij.ide.dynamicPluginVetoer](https://jb.gg/ipe?extensions=com.intellij.ide.dynamicPluginVetoer) | [`DynamicPluginVetoer`](%gh-ic%/platform/core-api/src/com/intellij/ide/plugins/DynamicPluginVetoer.kt) |
| [com.intellij.ideEventQueueDispatcher](https://jb.gg/ipe?extensions=com.intellij.ideEventQueueDispatcher) | [`EventDispatcher`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/IdeEventQueue.kt) |
| [com.intellij.idePerformanceListener](https://jb.gg/ipe?extensions=com.intellij.idePerformanceListener) ![Experimental][experimental] ![Internal][internal] | [`PerformanceListener`](%gh-ic%/platform/core-api/src/com/intellij/diagnostic/PerformanceListener.kt) |
| [com.intellij.ideRootPaneNorth](https://jb.gg/ipe?extensions=com.intellij.ideRootPaneNorth) ![Non-Dynamic][non-dynamic] | [`IdeRootPaneNorthExtension`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/IdeRootPaneNorthExtension.kt) |
| [com.intellij.ideStartupWizard](https://jb.gg/ipe?extensions=com.intellij.ideStartupWizard) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`IdeStartupWizard`](%gh-ic%/platform/platform-impl/bootstrap/src/com/intellij/platform/ide/bootstrap/IdeStartupWizard.kt) |
| [com.intellij.inspectionPopupLevelChangePolicy](https://jb.gg/ipe?extensions=com.intellij.inspectionPopupLevelChangePolicy) ![Internal][internal] | [`InspectionPopupLevelChangePolicy`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/editor/impl/InspectionPopupLevelChangePolicy.java) |
| [com.intellij.interactiveCourseFactory](https://jb.gg/ipe?extensions=com.intellij.interactiveCourseFactory) | [`InteractiveCourseFactory`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/InteractiveCourseFactory.kt) |
| [com.intellij.internal.ml.featureProvider](https://jb.gg/ipe?extensions=com.intellij.internal.ml.featureProvider) ![Internal][internal] | [`MLFeatureProvider`](%gh-ic%/platform/ml-api/src/com/intellij/internal/ml/MLFeatureProvider.kt) |
| [com.intellij.itemPresentationProvider](https://jb.gg/ipe?extensions=com.intellij.itemPresentationProvider) | [`ItemPresentationProvider`](%gh-ic%/platform/core-api/src/com/intellij/navigation/ItemPresentationProvider.java) |
| [com.intellij.iw.actionProvider](https://jb.gg/ipe?extensions=com.intellij.iw.actionProvider) | [`InspectionWidgetActionProvider`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/markup/InspectionWidgetActionProvider.kt) |
| [com.intellij.jbProtocolCommand](https://jb.gg/ipe?extensions=com.intellij.jbProtocolCommand) | [`JBProtocolCommand`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/application/JBProtocolCommand.kt) |
| [com.intellij.jbProtocolRevisionResolver](https://jb.gg/ipe?extensions=com.intellij.jbProtocolRevisionResolver) | [`JBProtocolRevisionResolver`](%gh-ic%/platform/lang-impl/src/com/intellij/navigation/JBProtocolRevisionResolver.java) |
| [com.intellij.jcef.appRequiredArgumentsProvider](https://jb.gg/ipe?extensions=com.intellij.jcef.appRequiredArgumentsProvider) ![Non-Dynamic][non-dynamic] | [`JBCefAppRequiredArgumentsProvider`](%gh-ic%/platform/ui.jcef/jcef/JBCefAppRequiredArgumentsProvider.kt) |
| [com.intellij.jdkDownloader.jdkInstallerListener](https://jb.gg/ipe?extensions=com.intellij.jdkDownloader.jdkInstallerListener) ![Internal][internal] | [`JdkInstallerListener`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/projectRoots/impl/jdkDownloader/JdkInstaller.kt) |
| [com.intellij.jdkUpdateCheckContributor](https://jb.gg/ipe?extensions=com.intellij.jdkUpdateCheckContributor) | [`JdkUpdateCheckContributor`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/projectRoots/impl/jdkDownloader/JdkUpdater.kt) |
| [com.intellij.jps.plugin](https://jb.gg/ipe?extensions=com.intellij.jps.plugin) | `n/a` |
| [com.intellij.keymapExtension](https://jb.gg/ipe?extensions=com.intellij.keymapExtension) | [`KeymapExtension`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/keymap/KeymapExtension.java) |
| [com.intellij.lang.syntaxHighlighterFactory](https://jb.gg/ipe?extensions=com.intellij.lang.syntaxHighlighterFactory) | [`SyntaxHighlighterFactory`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/fileTypes/SyntaxHighlighterFactory.java) |
| [com.intellij.library.toolWindow](https://jb.gg/ipe?extensions=com.intellij.library.toolWindow) ![DumbAware][dumb-aware] | [`ToolWindowFactory`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/ToolWindowFactory.kt) |
| [com.intellij.lightEditTabAttributesProvider](https://jb.gg/ipe?extensions=com.intellij.lightEditTabAttributesProvider) ![Experimental][experimental] | [`LightEditTabAttributesProvider`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/lightEdit/LightEditTabAttributesProvider.java) |
| [com.intellij.logsPreprocessor](https://jb.gg/ipe?extensions=com.intellij.logsPreprocessor) ![Internal][internal] | [`LogProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/logsUploader/LogProvider.kt) |
| [com.intellij.lowLevelProjectOpenProcessor](https://jb.gg/ipe?extensions=com.intellij.lowLevelProjectOpenProcessor) ![Internal][internal] | [`LowLevelProjectOpenProcessor`](%gh-ic%/platform/ide-core-impl/src/com/intellij/openapi/project/ex/LowLevelProjectOpenProcessor.kt) |
| [com.intellij.mac.dockMenuActions](https://jb.gg/ipe?extensions=com.intellij.mac.dockMenuActions) ![Non-Dynamic][non-dynamic] ![Experimental][experimental] ![Internal][internal] | [`MacDockMenuActions`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/mac/MacDockMenuActions.kt) |
| [com.intellij.meetNewUiCustomization](https://jb.gg/ipe?extensions=com.intellij.meetNewUiCustomization) ![Internal][internal] | [`MeetNewUiCustomization`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/ui/experimental/meetNewUi/MeetNewUiCustomization.kt) |
| [com.intellij.navbarLeftSide](https://jb.gg/ipe?extensions=com.intellij.navbarLeftSide) ![Internal][internal] | [`NavBarLeftSideExtension`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/navigationToolbar/NavBarLeftSideExtension.java) |
| [com.intellij.newProject.onboarding.tips](https://jb.gg/ipe?extensions=com.intellij.newProject.onboarding.tips) ![Internal][internal] | [`NewProjectOnboardingTips`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/wizard/NewProjectOnboardingTips.kt) |
| [com.intellij.newProjectWizard.generator](https://jb.gg/ipe?extensions=com.intellij.newProjectWizard.generator) | [`GeneratorNewProjectWizard`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/wizard/GeneratorNewProjectWizard.kt) |
| [com.intellij.newProjectWizard.language](https://jb.gg/ipe?extensions=com.intellij.newProjectWizard.language) ![Deprecated][deprecated] | [`LanguageNewProjectWizard`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/wizard/LanguageNewProjectWizard.kt) |
| [com.intellij.newProjectWizard.languageGenerator](https://jb.gg/ipe?extensions=com.intellij.newProjectWizard.languageGenerator) | [`LanguageGeneratorNewProjectWizard`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/wizard/language/LanguageGeneratorNewProjectWizard.kt) |
| [com.intellij.nonProjectFileWritingAccessExtension](https://jb.gg/ipe?extensions=com.intellij.nonProjectFileWritingAccessExtension) ![Project-Level][project-level] | [`NonProjectFileWritingAccessExtension`](%gh-ic%/platform/ide-core-impl/src/com/intellij/openapi/fileEditor/impl/NonProjectFileWritingAccessExtension.java) |
| [com.intellij.notification.group](https://jb.gg/ipe?extensions=com.intellij.notification.group) ![Non-Dynamic][non-dynamic] ![Internal][internal] | `n/a` |
| [com.intellij.notification.parentGroup](https://jb.gg/ipe?extensions=com.intellij.notification.parentGroup) ![Non-Dynamic][non-dynamic] ![Internal][internal] | `n/a` |
| [com.intellij.notificationRemindLaterHandler](https://jb.gg/ipe?extensions=com.intellij.notificationRemindLaterHandler) | [`NotificationRemindLaterHandler`](%gh-ic%/platform/ide-core/src/com/intellij/notification/NotificationRemindLaterHandler.kt) |
| [com.intellij.notificationRouter](https://jb.gg/ipe?extensions=com.intellij.notificationRouter) ![Internal][internal] | [`NotificationRouter`](%gh-ic%/platform/ide-core/src/com/intellij/notification/NotificationRouter.kt) |
| [com.intellij.obsoleteStorage](https://jb.gg/ipe?extensions=com.intellij.obsoleteStorage) | `n/a` |
| [com.intellij.pathMacroContributor](https://jb.gg/ipe?extensions=com.intellij.pathMacroContributor) | [`PathMacroContributor`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/PathMacroContributor.java) |
| [com.intellij.pathMacroExpandableProtocol](https://jb.gg/ipe?extensions=com.intellij.pathMacroExpandableProtocol) | `n/a` |
| [com.intellij.pathMacroFilter](https://jb.gg/ipe?extensions=com.intellij.pathMacroFilter) | [`PathMacroFilter`](%gh-ic%/jps/model-serialization/src/com/intellij/openapi/application/PathMacroFilter.java) |
| [com.intellij.persistentFsConnectionListener](https://jb.gg/ipe?extensions=com.intellij.persistentFsConnectionListener) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`PersistentFsConnectionListener`](%gh-ic%/platform/core-impl/src/com/intellij/openapi/vfs/newvfs/persistent/PersistentFsConnectionListener.java) |
| [com.intellij.platform.ml.descriptor](https://jb.gg/ipe?extensions=com.intellij.platform.ml.descriptor) ![Internal][internal] | [`TierDescriptor`](%gh-ic%/platform/ml-api/src/com/intellij/platform/ml/TierDescriptor.kt) |
| [com.intellij.platform.ml.environmentExtender](https://jb.gg/ipe?extensions=com.intellij.platform.ml.environmentExtender) ![Internal][internal] | [`EnvironmentExtender`](%gh-ic%/platform/ml-api/src/com/intellij/platform/ml/environment/EnvironmentExtender.kt) |
| [com.intellij.platform.ml.featureProvider](https://jb.gg/ipe?extensions=com.intellij.platform.ml.featureProvider) | `FeatureProvider` |
| [com.intellij.platform.ml.taskListener](https://jb.gg/ipe?extensions=com.intellij.platform.ml.taskListener) ![Internal][internal] | [`MLTaskGroupListener`](%gh-ic%/platform/ml-api/src/com/intellij/platform/ml/monitoring/MLApproachListener.kt) |
| [com.intellij.pluginReplacement](https://jb.gg/ipe?extensions=com.intellij.pluginReplacement) | [`PluginReplacement`](%gh-ic%/platform/platform-api/src/com/intellij/ide/plugins/PluginReplacement.java) |
| [com.intellij.pluginRepositoryAuthProvider](https://jb.gg/ipe?extensions=com.intellij.pluginRepositoryAuthProvider) | [`PluginRepositoryAuthProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/plugins/auth/PluginRepositoryAuthProvider.java) |
| [com.intellij.pluginSuggestionProvider](https://jb.gg/ipe?extensions=com.intellij.pluginSuggestionProvider) ![Internal][internal] | [`PluginSuggestionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/updateSettings/impl/pluginsAdvertisement/PluginSuggestionProvider.kt) |
| [com.intellij.pluginsViewCustomizer](https://jb.gg/ipe?extensions=com.intellij.pluginsViewCustomizer) ![Experimental][experimental] ![Internal][internal] | [`PluginsViewCustomizer`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/plugins/newui/PluginsViewCustomizer.kt) |
| [com.intellij.productivityFeaturesProvider](https://jb.gg/ipe?extensions=com.intellij.productivityFeaturesProvider) | [`ProductivityFeaturesProvider`](%gh-ic%/platform/platform-api/src/com/intellij/featureStatistics/ProductivityFeaturesProvider.java) |
| [com.intellij.projectAttachProcessor](https://jb.gg/ipe?extensions=com.intellij.projectAttachProcessor) | [`ProjectAttachProcessor`](%gh-ic%/platform/ide-core/src/com/intellij/projectImport/ProjectAttachProcessor.kt) |
| [com.intellij.projectCloseHandler](https://jb.gg/ipe?extensions=com.intellij.projectCloseHandler) ![Non-Dynamic][non-dynamic] | [`ProjectCloseHandler`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/project/ProjectCloseHandler.java) |
| [com.intellij.projectConfigurable](https://jb.gg/ipe?extensions=com.intellij.projectConfigurable) ![Project-Level][project-level] | [`Configurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/Configurable.java) |
| [com.intellij.projectCustomDataSynchronizer](https://jb.gg/ipe?extensions=com.intellij.projectCustomDataSynchronizer) ![Experimental][experimental] | [`ProjectCustomDataSynchronizer`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/ProjectCustomDataSynchronizer.kt) |
| [com.intellij.projectNameProvider](https://jb.gg/ipe?extensions=com.intellij.projectNameProvider) ![Non-Dynamic][non-dynamic] | [`ProjectNameProvider`](%gh-ic%/platform/ide-core-impl/src/com/intellij/openapi/project/ex/ProjectNameProvider.java) |
| [com.intellij.projectOpenProcessor](https://jb.gg/ipe?extensions=com.intellij.projectOpenProcessor) | [`ProjectOpenProcessor`](%gh-ic%/platform/platform-api/src/com/intellij/projectImport/ProjectOpenProcessor.kt) |
| [com.intellij.projectOriginInfoProvider](https://jb.gg/ipe?extensions=com.intellij.projectOriginInfoProvider) ![Internal][internal] | [`ProjectOriginInfoProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/impl/ProjectOriginInfoProvider.kt) |
| [com.intellij.projectServiceContainerCustomizer](https://jb.gg/ipe?extensions=com.intellij.projectServiceContainerCustomizer) ![Internal][internal] | [`ProjectServiceContainerCustomizer`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/project/impl/ProjectManagerImpl.kt) |
| [com.intellij.projectServiceContainerInitializedListener](https://jb.gg/ipe?extensions=com.intellij.projectServiceContainerInitializedListener) ![Internal][internal] | [`ProjectServiceContainerInitializedListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/project/impl/ProjectManagerImpl.kt) |
| [com.intellij.projectSetProcessor](https://jb.gg/ipe?extensions=com.intellij.projectSetProcessor) ![Non-Dynamic][non-dynamic] | [`ProjectSetProcessor`](%gh-ic%/platform/platform-api/src/com/intellij/projectImport/ProjectSetProcessor.java) |
| [com.intellij.projectSettings](https://jb.gg/ipe?extensions=com.intellij.projectSettings) ![Experimental][experimental] ![Project-Level][project-level] | [`PersistentStateComponent`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/components/PersistentStateComponent.java) |
| [com.intellij.projectStoreClassProvider](https://jb.gg/ipe?extensions=com.intellij.projectStoreClassProvider) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`ProjectStoreFactory`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/project/impl/ProjectStoreFactory.java) |
| [com.intellij.projectTemplate](https://jb.gg/ipe?extensions=com.intellij.projectTemplate) | `n/a` |
| [com.intellij.projectTemplatesFactory](https://jb.gg/ipe?extensions=com.intellij.projectTemplatesFactory) | [`ProjectTemplatesFactory`](%gh-ic%/platform/platform-impl/src/com/intellij/platform/ProjectTemplatesFactory.java) |
| [com.intellij.projectTypesProvider](https://jb.gg/ipe?extensions=com.intellij.projectTypesProvider) ![Experimental][experimental] | [`ProjectTypesProvider`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/project/ProjectTypesProvider.java) |
| [com.intellij.projectUndoProvider](https://jb.gg/ipe?extensions=com.intellij.projectUndoProvider) ![Project-Level][project-level] | [`UndoProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/command/impl/UndoProvider.java) |
| [com.intellij.protanopiaSupport](https://jb.gg/ipe?extensions=com.intellij.protanopiaSupport) ![Non-Dynamic][non-dynamic] | [`ColorBlindnessSupport`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/ui/ColorBlindnessSupport.java) |
| [com.intellij.protocolHandler](https://jb.gg/ipe?extensions=com.intellij.protocolHandler) | [`ProtocolHandler`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/ProtocolHandler.kt) |
| [com.intellij.protocolNavigationCommandProcessor](https://jb.gg/ipe?extensions=com.intellij.protocolNavigationCommandProcessor) ![Internal][internal] | [`ProtocolNavigationCommandProcessor`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/protocolHandler/ProtocolNavigationCommandProcessor.kt) |
| [com.intellij.proxySettingsOverrideProvider](https://jb.gg/ipe?extensions=com.intellij.proxySettingsOverrideProvider) | [`ProxySettingsOverrideProvider`](%gh-ic%/platform/platform-api/src/com/intellij/util/net/ProxySettingsOverrideProvider.kt) |
| [com.intellij.rawEditorTypedHandler](https://jb.gg/ipe?extensions=com.intellij.rawEditorTypedHandler) ![Removal][removal] ![Non-Dynamic][non-dynamic] | [`TypedActionHandler`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/TypedActionHandler.java) |
| [com.intellij.recentProjectsBranchesProvider](https://jb.gg/ipe?extensions=com.intellij.recentProjectsBranchesProvider) | [`RecentProjectsBranchesProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/vcs/RecentProjectsBranchesProvider.kt) |
| [com.intellij.recoveryAction](https://jb.gg/ipe?extensions=com.intellij.recoveryAction) ![Internal][internal] | [`RecoveryAction`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/actions/cache/Saul.kt) |
| [com.intellij.remote.credentialsLanguageContribution](https://jb.gg/ipe?extensions=com.intellij.remote.credentialsLanguageContribution) | [`CredentialsLanguageContribution`](%gh-ic%/platform/platform-impl/remote/src/com/intellij/remote/ext/CredentialsLanguageContribution.java) |
| [com.intellij.remote.credentialsType](https://jb.gg/ipe?extensions=com.intellij.remote.credentialsType) | [`CredentialsType`](%gh-ic%/platform/remote-core/src/remote/CredentialsType.java) |
| [com.intellij.remote.pathMappingProvider](https://jb.gg/ipe?extensions=com.intellij.remote.pathMappingProvider) | [`PathMappingProvider`](%gh-ic%/platform/platform-impl/remote/src/com/intellij/remote/PathMappingProvider.java) |
| [com.intellij.schemeExporter](https://jb.gg/ipe?extensions=com.intellij.schemeExporter) ![Internal][internal] | [`SchemeExporter`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/options/SchemeExporter.java) |
| [com.intellij.schemeImporter](https://jb.gg/ipe?extensions=com.intellij.schemeImporter) | [`SchemeImporter`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/options/SchemeImporter.java) |
| [com.intellij.search.additionalOptionsLocation](https://jb.gg/ipe?extensions=com.intellij.search.additionalOptionsLocation) | [`AdditionalLocationProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ide/ui/search/SearchableOptionsRegistrar.java) |
| [com.intellij.search.optionContributor](https://jb.gg/ipe?extensions=com.intellij.search.optionContributor) | [`SearchableOptionContributor`](%gh-ic%/platform/platform-api/src/com/intellij/ide/ui/search/SearchableOptionContributor.kt) |
| [com.intellij.search.projectOptionsTopHitProvider](https://jb.gg/ipe?extensions=com.intellij.search.projectOptionsTopHitProvider) | [`ProjectLevelProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/ui/OptionsSearchTopHitProvider.java) |
| [com.intellij.search.topHitProvider](https://jb.gg/ipe?extensions=com.intellij.search.topHitProvider) | [`SearchTopHitProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ide/SearchTopHitProvider.kt) |
| [com.intellij.search.traverseUiHelper](https://jb.gg/ipe?extensions=com.intellij.search.traverseUiHelper) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`TraverseUIHelper`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/ui/search/TraverseUIHelper.java) |
| [com.intellij.selectInTarget](https://jb.gg/ipe?extensions=com.intellij.selectInTarget) ![Project-Level][project-level] ![DumbAware][dumb-aware] | [`SelectInTarget`](%gh-ic%/platform/platform-api/src/com/intellij/ide/SelectInTarget.java) |
| [com.intellij.semanticRootProvider](https://jb.gg/ipe?extensions=com.intellij.semanticRootProvider) ![Non-Dynamic][non-dynamic] | [`RootSemanticAddressProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/vfs/newvfs/persistent/RootSemanticAddressProvider.java) |
| [com.intellij.settingsEntryPointActionProvider](https://jb.gg/ipe?extensions=com.intellij.settingsEntryPointActionProvider) | [`ActionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/actions/SettingsEntryPointAction.java) |
| [com.intellij.settingsEntryPointIconCustomizer](https://jb.gg/ipe?extensions=com.intellij.settingsEntryPointIconCustomizer) | [`IconCustomizer`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/actions/SettingsEntryPointAction.java) |
| [com.intellij.smartSelectProvider](https://jb.gg/ipe?extensions=com.intellij.smartSelectProvider) | [`SmartSelectProvider`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ide/SmartSelectProvider.java) |
| [com.intellij.sshCredentialProvider](https://jb.gg/ipe?extensions=com.intellij.sshCredentialProvider) | [`SshCredentialProvider`](%gh-ic%/platform/platform-impl/remote/src/com/intellij/remote/SshCredentialProvider.java) |
| [com.intellij.startPagePromoter](https://jb.gg/ipe?extensions=com.intellij.startPagePromoter) ![Internal][internal] | [`StartPagePromoter`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/StartPagePromoter.kt) |
| [com.intellij.statistic.eventLog.eventLoggerProvider](https://jb.gg/ipe?extensions=com.intellij.statistic.eventLog.eventLoggerProvider) | [`StatisticsEventLoggerProvider`](%gh-ic%/platform/statistics/src/com/intellij/internal/statistic/eventLog/StatisticsEventLogger.kt) |
| [com.intellij.statistic.eventLog.externalEventLogSettings](https://jb.gg/ipe?extensions=com.intellij.statistic.eventLog.externalEventLogSettings) ![Internal][internal] | [`ExternalEventLogSettings`](%gh-ic%/platform/statistics/src/com/intellij/internal/statistic/eventLog/ExternalEventLogSettings.java) |
| [com.intellij.statistic.eventLog.externalListenerProvider](https://jb.gg/ipe?extensions=com.intellij.statistic.eventLog.externalListenerProvider) ![Internal][internal] | [`ExternalEventLogListenerProviderExtension`](%gh-ic%/platform/statistics/src/com/intellij/internal/statistic/eventLog/ExternalEventLogListenerProviderExtension.java) |
| [com.intellij.statistic.eventLog.fusStateEventTracker](https://jb.gg/ipe?extensions=com.intellij.statistic.eventLog.fusStateEventTracker) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`FeatureUsageStateEventTracker`](%gh-ic%/platform/statistics/src/com/intellij/internal/statistic/eventLog/fus/FeatureUsageStateEventTracker.kt) |
| [com.intellij.statistics.actionCustomPlaceAllowlist](https://jb.gg/ipe?extensions=com.intellij.statistics.actionCustomPlaceAllowlist) | `n/a` |
| [com.intellij.statistics.actionIdsHolder](https://jb.gg/ipe?extensions=com.intellij.statistics.actionIdsHolder) ![Internal][internal] | [`ActionIdsHolder`](%gh-ic%/platform/platform-impl/src/com/intellij/internal/statistic/collectors/fus/actions/persistence/ActionIdsHolder.kt) |
| [com.intellij.statistics.applicationUsagesCollector](https://jb.gg/ipe?extensions=com.intellij.statistics.applicationUsagesCollector) ![Internal][internal] | [`ApplicationUsagesCollector`](%gh-ic%/platform/statistics/src/com/intellij/internal/statistic/service/fus/collectors/ApplicationUsagesCollector.kt) |
| [com.intellij.statistics.balloonIdsHolder](https://jb.gg/ipe?extensions=com.intellij.statistics.balloonIdsHolder) ![Internal][internal] | [`BalloonIdsHolder`](%gh-ic%/platform/platform-impl/src/com/intellij/internal/statistic/collectors/fus/ui/BalloonIdsHolder.java) |
| [com.intellij.statistics.collectorExtension](https://jb.gg/ipe?extensions=com.intellij.statistics.collectorExtension) | [`FeatureUsageCollectorExtension`](%gh-ic%/platform/statistics/src/com/intellij/internal/statistic/service/fus/collectors/FeatureUsageCollectorExtension.java) |
| [com.intellij.statistics.counterUsagesCollector](https://jb.gg/ipe?extensions=com.intellij.statistics.counterUsagesCollector) ![Internal][internal] | [`FeatureUsagesCollector`](%gh-ic%/platform/statistics/src/com/intellij/internal/statistic/service/fus/collectors/FeatureUsagesCollector.java) |
| [com.intellij.statistics.gotItTooltipAllowlist](https://jb.gg/ipe?extensions=com.intellij.statistics.gotItTooltipAllowlist) | `n/a` |
| [com.intellij.statistics.notificationIdsHolder](https://jb.gg/ipe?extensions=com.intellij.statistics.notificationIdsHolder) ![Internal][internal] | [`NotificationIdsHolder`](%gh-ic%/platform/platform-impl/src/com/intellij/notification/impl/NotificationIdsHolder.java) |
| [com.intellij.statistics.projectUsagesCollector](https://jb.gg/ipe?extensions=com.intellij.statistics.projectUsagesCollector) ![Internal][internal] | [`ProjectUsagesCollector`](%gh-ic%/platform/statistics/src/com/intellij/internal/statistic/service/fus/collectors/ProjectUsagesCollector.kt) |
| [com.intellij.statistics.validation.customValidationRule](https://jb.gg/ipe?extensions=com.intellij.statistics.validation.customValidationRule) | [`CustomValidationRule`](%gh-ic%/platform/statistics/src/com/intellij/internal/statistic/eventLog/validator/rules/impl/CustomValidationRule.java) |
| [com.intellij.statistics.validation.customValidationRuleFactory](https://jb.gg/ipe?extensions=com.intellij.statistics.validation.customValidationRuleFactory) | [`CustomValidationRuleFactory`](%gh-ic%/platform/statistics/src/com/intellij/internal/statistic/eventLog/validator/rules/impl/CustomValidationRuleFactory.java) |
| [com.intellij.statusBarWidgetFactory](https://jb.gg/ipe?extensions=com.intellij.statusBarWidgetFactory) | [`StatusBarWidgetFactory`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/StatusBarWidgetFactory.java) |
| [com.intellij.statusBarWidgetProvider](https://jb.gg/ipe?extensions=com.intellij.statusBarWidgetProvider) ![Deprecated][deprecated] ![Removal][removal] | [`StatusBarWidgetProvider`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/StatusBarWidgetProvider.java) |
| [com.intellij.streamProviderFactory](https://jb.gg/ipe?extensions=com.intellij.streamProviderFactory) ![Internal][internal] ![Project-Level][project-level] | [`StreamProviderFactory`](%gh-ic%/platform/projectModel-impl/src/com/intellij/configurationStore/StreamProviderFactory.kt) |
| [com.intellij.stripTrailingSpacesFilterFactory](https://jb.gg/ipe?extensions=com.intellij.stripTrailingSpacesFilterFactory) | [`StripTrailingSpacesFilterFactory`](%gh-ic%/platform/core-api/src/com/intellij/openapi/editor/StripTrailingSpacesFilterFactory.java) |
| [com.intellij.systemProperty](https://jb.gg/ipe?extensions=com.intellij.systemProperty) ![Non-Dynamic][non-dynamic] ![Internal][internal] | `n/a` |
| [com.intellij.testStatusListener](https://jb.gg/ipe?extensions=com.intellij.testStatusListener) ![Non-Dynamic][non-dynamic] | [`TestStatusListener`](%gh-ic%/platform/testRunner/src/com/intellij/execution/testframework/TestStatusListener.java) |
| [com.intellij.textEditorCustomizer](https://jb.gg/ipe?extensions=com.intellij.textEditorCustomizer) ![Internal][internal] | [`TextEditorCustomizer`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/fileEditor/impl/text/TextEditorCustomizer.kt) |
| [com.intellij.textEditorNecromancerAwaker](https://jb.gg/ipe?extensions=com.intellij.textEditorNecromancerAwaker) ![Non-Dynamic][non-dynamic] | [`NecromancerAwaker`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/editor/impl/zombie/Necromancer.kt) |
| [com.intellij.themeMetadataProvider](https://jb.gg/ipe?extensions=com.intellij.themeMetadataProvider) | `n/a` |
| [com.intellij.themeProvider](https://jb.gg/ipe?extensions=com.intellij.themeProvider) | `n/a` |
| [com.intellij.themeRemapper](https://jb.gg/ipe?extensions=com.intellij.themeRemapper) ![Internal][internal] | [`UiThemeRemapper`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/ui/laf/UiThemeMapper.kt) |
| [com.intellij.tipAndTrick](https://jb.gg/ipe?extensions=com.intellij.tipAndTrick) | `n/a` |
| [com.intellij.titleInfoProvider](https://jb.gg/ipe?extensions=com.intellij.titleInfoProvider) ![Non-Dynamic][non-dynamic] | [`TitleInfoProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/TitleInfoProvider.kt) |
| [com.intellij.toolWindow](https://jb.gg/ipe?extensions=com.intellij.toolWindow) ![DumbAware][dumb-aware] | [`ToolWindowFactory`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/ToolWindowFactory.kt) |
| [com.intellij.toolWindowAllowlist](https://jb.gg/ipe?extensions=com.intellij.toolWindowAllowlist) | `n/a` |
| [com.intellij.toolWindowContentExtractor](https://jb.gg/ipe?extensions=com.intellij.toolWindowContentExtractor) ![Internal][internal] | [`ToolWindowContentExtractor`](%gh-ic%/platform/platform-api/src/com/intellij/ui/viewModel/extraction/ToolWindowContentExtractor.java) |
| [com.intellij.toolWindowExtractor](https://jb.gg/ipe?extensions=com.intellij.toolWindowExtractor) ![Internal][internal] | [`ToolWindowViewModelExtractor`](%gh-ic%/platform/platform-api/src/com/intellij/ui/viewModel/extraction/ToolWindowViewModelExtractor.java) |
| [com.intellij.toolWindowExtractorMode](https://jb.gg/ipe?extensions=com.intellij.toolWindowExtractorMode) ![Experimental][experimental] | `n/a` |
| [com.intellij.toolbarQuickAction](https://jb.gg/ipe?extensions=com.intellij.toolbarQuickAction) ![Non-Dynamic][non-dynamic] | [`ToolbarAddQuickActionInfo`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/ui/customization/ToolbarAddQuickActionInfo.kt) |
| [com.intellij.trailingSpacesOptionsProvider](https://jb.gg/ipe?extensions=com.intellij.trailingSpacesOptionsProvider) | [`TrailingSpacesOptionsProvider`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/fileEditor/TrailingSpacesOptionsProvider.java) |
| [com.intellij.tree.CustomLanguageASTComparator](https://jb.gg/ipe?extensions=com.intellij.tree.CustomLanguageASTComparator) | [`CustomLanguageASTComparator`](%gh-ic%/platform/core-api/src/com/intellij/psi/tree/CustomLanguageASTComparator.java) |
| [com.intellij.tritanopiaSupport](https://jb.gg/ipe?extensions=com.intellij.tritanopiaSupport) ![Non-Dynamic][non-dynamic] | [`ColorBlindnessSupport`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/ui/ColorBlindnessSupport.java) |
| [com.intellij.troubleInfoCollector](https://jb.gg/ipe?extensions=com.intellij.troubleInfoCollector) | [`TroubleInfoCollector`](%gh-ic%/platform/platform-impl/src/com/intellij/troubleshooting/TroubleInfoCollector.java) |
| [com.intellij.trustedHostsConfigurableProvider](https://jb.gg/ipe?extensions=com.intellij.trustedHostsConfigurableProvider) ![Internal][internal] | [`TrustedHostsConfigurableProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/impl/TrustedHostsConfigurable.kt) |
| [com.intellij.trustedProjectsLocator](https://jb.gg/ipe?extensions=com.intellij.trustedProjectsLocator) | [`TrustedProjectsLocator`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/trustedProjects/TrustedProjectsLocator.kt) |
| [com.intellij.ui.optionEditorProvider](https://jb.gg/ipe?extensions=com.intellij.ui.optionEditorProvider) ![Experimental][experimental] | [`OptionEditorProvider`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/options/OptionEditorProvider.java) |
| [com.intellij.ui.suitableFontProvider](https://jb.gg/ipe?extensions=com.intellij.ui.suitableFontProvider) | [`SuitableFontProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ui/SuitableFontProvider.java) |
| [com.intellij.uiChangeListener](https://jb.gg/ipe?extensions=com.intellij.uiChangeListener) ![Internal][internal] | [`Listener`](%gh-ic%/platform/core-ui/src/ui/ExperimentalUI.kt) |
| [com.intellij.uiDataRule](https://jb.gg/ipe?extensions=com.intellij.uiDataRule) | [`UiDataRule`](%gh-ic%/platform/core-ui/src/openapi/actionSystem/UiDataProvider.kt) |
| [com.intellij.undoProvider](https://jb.gg/ipe?extensions=com.intellij.undoProvider) | [`UndoProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/command/impl/UndoProvider.java) |
| [com.intellij.undoReportHandler](https://jb.gg/ipe?extensions=com.intellij.undoReportHandler) ![Internal][internal] | [`UndoReportHandler`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/command/impl/UndoReportHandler.java) |
| [com.intellij.unknownSdkContributor](https://jb.gg/ipe?extensions=com.intellij.unknownSdkContributor) | [`UnknownSdkContributor`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/projectRoots/impl/UnknownSdkCollector.kt) |
| [com.intellij.unknownSdkResolver](https://jb.gg/ipe?extensions=com.intellij.unknownSdkResolver) | [`UnknownSdkResolver`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/roots/ui/configuration/UnknownSdkResolver.java) |
| [com.intellij.updateSettingsProvider](https://jb.gg/ipe?extensions=com.intellij.updateSettingsProvider) | [`UpdateSettingsProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/updateSettings/impl/UpdateSettingsProvider.java) |
| [com.intellij.updateSettingsUIProvider](https://jb.gg/ipe?extensions=com.intellij.updateSettingsUIProvider) | [`UpdateSettingsUIProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/updateSettings/impl/UpdateSettingsUIProvider.kt) |
| [com.intellij.usageFilteringRuleCustomizer](https://jb.gg/ipe?extensions=com.intellij.usageFilteringRuleCustomizer) ![Internal][internal] | [`UsageFilteringRuleCustomizer`](%gh-ic%/platform/usageView/src/com/intellij/usages/rules/UsageFilteringRuleCustomizer.kt) |
| [com.intellij.utf8BomOptionProvider](https://jb.gg/ipe?extensions=com.intellij.utf8BomOptionProvider) | [`Utf8BomOptionProvider`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/encoding/Utf8BomOptionProvider.java) |
| [com.intellij.vfs.local.fileOperationsHandler](https://jb.gg/ipe?extensions=com.intellij.vfs.local.fileOperationsHandler) | [`LocalFileOperationsHandler`](%gh-ic%/platform/analysis-api/src/com/intellij/openapi/vfs/LocalFileOperationsHandler.java) |
| [com.intellij.vfs.local.pluggableFileWatcher](https://jb.gg/ipe?extensions=com.intellij.vfs.local.pluggableFileWatcher) ![Non-Dynamic][non-dynamic] | [`PluggableFileWatcher`](%gh-ic%/platform/ide-core-impl/src/com/intellij/openapi/vfs/local/PluggableFileWatcher.java) |
| [com.intellij.virtualFileCustomDataConsumer](https://jb.gg/ipe?extensions=com.intellij.virtualFileCustomDataConsumer) ![Experimental][experimental] | [`VirtualFileCustomDataConsumer`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFileCustomDataConsumer.kt) |
| [com.intellij.virtualFileCustomDataProvider](https://jb.gg/ipe?extensions=com.intellij.virtualFileCustomDataProvider) ![Experimental][experimental] | [`VirtualFileCustomDataProvider`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFileCustomDataProvider.kt) |
| [com.intellij.warmupConfigurator](https://jb.gg/ipe?extensions=com.intellij.warmupConfigurator) ![Deprecated][deprecated] ![Removal][removal] | [`WarmupConfigurator`](%gh-ic%/platform/platform-api/src/com/intellij/ide/warmup/WarmupConfigurator.kt) |
| [com.intellij.webBrowserUrlProvider](https://jb.gg/ipe?extensions=com.intellij.webBrowserUrlProvider) ![DumbAware][dumb-aware] | [`WebBrowserUrlProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ide/browsers/WebBrowserUrlProvider.kt) |
| [com.intellij.webHelpProvider](https://jb.gg/ipe?extensions=com.intellij.webHelpProvider) | [`WebHelpProvider`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/help/WebHelpProvider.java) |
| [com.intellij.welcome.projectDetector](https://jb.gg/ipe?extensions=com.intellij.welcome.projectDetector) | [`ProjectDetector`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/welcomeScreen/ProjectDetector.java) |
| [com.intellij.welcomeFrameProvider](https://jb.gg/ipe?extensions=com.intellij.welcomeFrameProvider) | [`WelcomeFrameProvider`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/WelcomeFrameProvider.java) |
| [com.intellij.welcomeScreen](https://jb.gg/ipe?extensions=com.intellij.welcomeScreen) ![Non-Dynamic][non-dynamic] | [`WelcomeScreenProvider`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/WelcomeScreenProvider.java) |
| [com.intellij.welcomeScreenCustomization](https://jb.gg/ipe?extensions=com.intellij.welcomeScreenCustomization) ![Experimental][experimental] | [`WelcomeScreenCustomization`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/WelcomeScreenCustomization.java) |
| [com.intellij.welcomeTabFactory](https://jb.gg/ipe?extensions=com.intellij.welcomeTabFactory) | [`WelcomeTabFactory`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/WelcomeTabFactory.java) |
| [org.jetbrains.javaScriptDebuggerStarter](https://jb.gg/ipe?extensions=org.jetbrains.javaScriptDebuggerStarter) | [`JavaScriptDebuggerStarter`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/browsers/JavaScriptDebuggerStarter.java) |
| [org.jetbrains.urlOpener](https://jb.gg/ipe?extensions=org.jetbrains.urlOpener) | [`UrlOpener`](%gh-ic%/platform/platform-api/src/com/intellij/ide/browsers/UrlOpener.java) |

### PlatformLangComponents.xml

[`PlatformLangComponents.xml`](%gh-ic%/platform/platform-resources/src/META-INF/PlatformLangComponents.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.diagnostic.freezeNotifier](https://jb.gg/ipe?extensions=com.intellij.diagnostic.freezeNotifier) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`FreezeNotifier`](%gh-ic%/platform/platform-impl/src/com/intellij/diagnostic/FreezeNotifier.kt) |
| [com.intellij.registerToolWindowTaskProvider](https://jb.gg/ipe?extensions=com.intellij.registerToolWindowTaskProvider) ![Non-Dynamic][non-dynamic] ![Internal][internal] | [`RegisterToolWindowTaskProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/toolWindow/toolwindow.kt) |

### PlatformWarmup.xml

[`PlatformWarmup.xml`](%gh-ic%/platform/warmup/resources/META-INF/PlatformWarmup.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.projectBuildWarmupSupport](https://jb.gg/ipe?extensions=com.intellij.projectBuildWarmupSupport) ![Non-Dynamic][non-dynamic] ![Internal][internal] ![Project-Level][project-level] | [`ProjectBuildWarmupSupport`](%gh-ic%/platform/warmup/src/com/intellij/warmup/ProjectBuildWarmupSupport.kt) |
| [com.intellij.projectIndexesWarmupSupport](https://jb.gg/ipe?extensions=com.intellij.projectIndexesWarmupSupport) ![Non-Dynamic][non-dynamic] ![Internal][internal] ![Project-Level][project-level] | [`ProjectIndexesWarmupSupport`](%gh-ic%/platform/warmup/src/com/intellij/warmup/ProjectIndexesWarmupSupport.kt) |

### ProjectModel.xml

[`ProjectModel.xml`](%gh-ic%/platform/projectModel-api/resources/META-INF/ProjectModel.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.customLibraryTable](https://jb.gg/ipe?extensions=com.intellij.customLibraryTable) ![Internal][internal] | [`CustomLibraryTableDescription`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/libraries/CustomLibraryTableDescription.java) |
| [com.intellij.filePropertyPusher](https://jb.gg/ipe?extensions=com.intellij.filePropertyPusher) ![Experimental][experimental] | [`FilePropertyPusher`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/impl/FilePropertyPusher.java) |
| [com.intellij.moduleExtension](https://jb.gg/ipe?extensions=com.intellij.moduleExtension) | [`ModuleExtension`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ModuleExtension.java) |
| [com.intellij.orderEnumerationHandlerFactory](https://jb.gg/ipe?extensions=com.intellij.orderEnumerationHandlerFactory) | [`Factory`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/OrderEnumerationHandler.java) |
| [com.intellij.orderRootType](https://jb.gg/ipe?extensions=com.intellij.orderRootType) ![Non-Dynamic][non-dynamic] | [`OrderRootType`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/OrderRootType.java) |
| [com.intellij.primaryModuleManager](https://jb.gg/ipe?extensions=com.intellij.primaryModuleManager) | [`PrimaryModuleManager`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/module/PrimaryModuleManager.java) |
| [com.intellij.projectFileScanner](https://jb.gg/ipe?extensions=com.intellij.projectFileScanner) ![Internal][internal] | [`IndexableFileScanner`](%gh-ic%/platform/indexing-api/src/com/intellij/util/indexing/roots/IndexableFileScanner.java) |
| [com.intellij.workspace.bridgeInitializer](https://jb.gg/ipe?extensions=com.intellij.workspace.bridgeInitializer) ![Internal][internal] | [`BridgeInitializer`](%gh-ic%/platform/backend/workspace/src/BridgeInitializer.kt) |
| [com.intellij.workspaceModel.preUpdateHandler](https://jb.gg/ipe?extensions=com.intellij.workspaceModel.preUpdateHandler) ![Internal][internal] | [`WorkspaceModelPreUpdateHandler`](%gh-ic%/platform/backend/workspace/src/WorkspaceModelPreUpdateHandler.kt) |

### ProjectModelImpl.xml

[`ProjectModelImpl.xml`](%gh-ic%/platform/projectModel-impl/resources/META-INF/ProjectModelImpl.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.additionalLibraryRootsProvider](https://jb.gg/ipe?extensions=com.intellij.additionalLibraryRootsProvider) | [`AdditionalLibraryRootsProvider`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/AdditionalLibraryRootsProvider.java) |
| [com.intellij.directoryIndexExcludePolicy](https://jb.gg/ipe?extensions=com.intellij.directoryIndexExcludePolicy) ![Project-Level][project-level] | [`DirectoryIndexExcludePolicy`](%gh-ic%/platform/projectModel-impl/src/com/intellij/openapi/roots/impl/DirectoryIndexExcludePolicy.java) |
| [com.intellij.projectExtension](https://jb.gg/ipe?extensions=com.intellij.projectExtension) ![Internal][internal] ![Project-Level][project-level] | [`ProjectExtension`](%gh-ic%/platform/projectModel-impl/src/com/intellij/openapi/roots/ProjectExtension.java) |
| [com.intellij.projectPathMacroContributor](https://jb.gg/ipe?extensions=com.intellij.projectPathMacroContributor) ![Internal][internal] | [`ProjectWidePathMacroContributor`](%gh-ic%/platform/projectModel-impl/src/com/intellij/openapi/components/impl/ProjectWidePathMacroContributor.java) |
| [com.intellij.workspaceModel.entityLifecycleSupporter](https://jb.gg/ipe?extensions=com.intellij.workspaceModel.entityLifecycleSupporter) ![Experimental][experimental] | [`WorkspaceEntityLifecycleSupporter`](%gh-ic%/platform/backend/workspace/src/WorkspaceEntityLifecycleSupporter.kt) |
| [com.intellij.workspaceModel.facetContributor](https://jb.gg/ipe?extensions=com.intellij.workspaceModel.facetContributor) ![Internal][internal] | [`WorkspaceFacetContributor`](%gh-ic%/platform/lang-impl/src/com/intellij/workspaceModel/ide/legacyBridge/WorkspaceFacetContributor.kt) |
| [com.intellij.workspaceModel.fileIndexContributor](https://jb.gg/ipe?extensions=com.intellij.workspaceModel.fileIndexContributor) | [`WorkspaceFileIndexContributor`](%gh-ic%/platform/projectModel-impl/src/com/intellij/workspaceModel/core/fileIndex/WorkspaceFileIndexContributor.kt) |
| [com.intellij.workspaceModel.moduleExtensionBridgeFactory](https://jb.gg/ipe?extensions=com.intellij.workspaceModel.moduleExtensionBridgeFactory) ![Internal][internal] | [`ModuleExtensionBridgeFactory`](%gh-ic%/platform/projectModel-impl/src/com/intellij/workspaceModel/ide/legacyBridge/ModuleExtensionBridgeFactory.kt) |

### RefactoringExtensionPoints.xml

[`RefactoringExtensionPoints.xml`](%gh-ic%/platform/refactoring/resources/META-INF/RefactoringExtensionPoints.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.automaticRenamerFactory](https://jb.gg/ipe?extensions=com.intellij.automaticRenamerFactory) | [`AutomaticRenamerFactory`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/rename/naming/AutomaticRenamerFactory.java) |
| [com.intellij.findInProjectSearchEngine](https://jb.gg/ipe?extensions=com.intellij.findInProjectSearchEngine) ![Experimental][experimental] | [`FindInProjectSearchEngine`](%gh-ic%/platform/refactoring/src/com/intellij/find/FindInProjectSearchEngine.java) |
| [com.intellij.inlineActionHandler](https://jb.gg/ipe?extensions=com.intellij.inlineActionHandler) | [`InlineActionHandler`](%gh-ic%/platform/refactoring/src/com/intellij/lang/refactoring/InlineActionHandler.java) |
| [com.intellij.lang.namesValidator](https://jb.gg/ipe?extensions=com.intellij.lang.namesValidator) | [`NamesValidator`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/refactoring/NamesValidator.java) |
| [com.intellij.lang.refactoringSupport](https://jb.gg/ipe?extensions=com.intellij.lang.refactoringSupport) | [`RefactoringSupportProvider`](%gh-ic%/platform/refactoring/src/com/intellij/lang/refactoring/RefactoringSupportProvider.java) |
| [com.intellij.nameSuggestionProvider](https://jb.gg/ipe?extensions=com.intellij.nameSuggestionProvider) | [`NameSuggestionProvider`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/rename/NameSuggestionProvider.java) |
| [com.intellij.qualifiedNameProvider](https://jb.gg/ipe?extensions=com.intellij.qualifiedNameProvider) | [`QualifiedNameProvider`](%gh-ic%/platform/refactoring/src/com/intellij/ide/actions/QualifiedNameProvider.java) |
| [com.intellij.refactoring.elementListenerProvider](https://jb.gg/ipe?extensions=com.intellij.refactoring.elementListenerProvider) ![Project-Level][project-level] | [`RefactoringElementListenerProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/refactoring/listeners/RefactoringElementListenerProvider.java) |
| [com.intellij.refactoring.helper](https://jb.gg/ipe?extensions=com.intellij.refactoring.helper) | [`RefactoringHelper`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/RefactoringHelper.java) |
| [com.intellij.refactoring.inlineHandler](https://jb.gg/ipe?extensions=com.intellij.refactoring.inlineHandler) | [`InlineHandler`](%gh-ic%/platform/refactoring/src/com/intellij/lang/refactoring/InlineHandler.java) |
| [com.intellij.rename.inplace.resolveSnapshotProvider](https://jb.gg/ipe?extensions=com.intellij.rename.inplace.resolveSnapshotProvider) | [`ResolveSnapshotProvider`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/rename/ResolveSnapshotProvider.java) |
| [com.intellij.renameHandler](https://jb.gg/ipe?extensions=com.intellij.renameHandler) | [`RenameHandler`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/rename/RenameHandler.java) |
| [com.intellij.renameInputValidator](https://jb.gg/ipe?extensions=com.intellij.renameInputValidator) | [`RenameInputValidator`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/rename/RenameInputValidator.java) |
| [com.intellij.renamePsiElementProcessor](https://jb.gg/ipe?extensions=com.intellij.renamePsiElementProcessor) | [`RenamePsiElementProcessorBase`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/rename/RenamePsiElementProcessorBase.java) |
| [com.intellij.renameRefactoringDialogProvider](https://jb.gg/ipe?extensions=com.intellij.renameRefactoringDialogProvider) | [`RenameRefactoringDialogProvider`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/rename/RenameRefactoringDialogProvider.java) |
| [com.intellij.renamerFactory](https://jb.gg/ipe?extensions=com.intellij.renamerFactory) ![Experimental][experimental] | [`RenamerFactory`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/rename/RenamerFactory.java) |
| [com.intellij.testSourcesFilter](https://jb.gg/ipe?extensions=com.intellij.testSourcesFilter) | [`TestSourcesFilter`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/TestSourcesFilter.java) |
| [com.intellij.updateAddedFileProcessor](https://jb.gg/ipe?extensions=com.intellij.updateAddedFileProcessor) | [`UpdateAddedFileProcessor`](%gh-ic%/platform/core-impl/src/com/intellij/psi/impl/file/UpdateAddedFileProcessor.java) |
| [com.intellij.vetoRenameCondition](https://jb.gg/ipe?extensions=com.intellij.vetoRenameCondition) | [`Condition`](%gh-ic%/platform/util/src/com/intellij/openapi/util/Condition.java) |
| [com.intellij.virtualFileQualifiedNameProvider](https://jb.gg/ipe?extensions=com.intellij.virtualFileQualifiedNameProvider) | [`VirtualFileQualifiedNameProvider`](%gh-ic%/platform/refactoring/src/com/intellij/ide/actions/VirtualFileQualifiedNameProvider.java) |

### RefactoringLangExtensionPoints.xml

[`RefactoringLangExtensionPoints.xml`](%gh-ic%/platform/platform-resources/src/META-INF/RefactoringLangExtensionPoints.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.changeSignature.usageProvider](https://jb.gg/ipe?extensions=com.intellij.changeSignature.usageProvider) ![Experimental][experimental] | [`ChangeSignatureUsageProvider`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/changeSignature/ChangeSignatureUsageProvider.java) |
| [com.intellij.changeSignatureDetector](https://jb.gg/ipe?extensions=com.intellij.changeSignatureDetector) | [`LanguageChangeSignatureDetector`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/changeSignature/inplace/LanguageChangeSignatureDetector.java) |
| [com.intellij.lang.refactoringSupport.classMembersRefactoringSupport](https://jb.gg/ipe?extensions=com.intellij.lang.refactoringSupport.classMembersRefactoringSupport) | [`ClassMembersRefactoringSupport`](%gh-ic%/platform/lang-api/src/com/intellij/refactoring/classMembers/ClassMembersRefactoringSupport.java) |
| [com.intellij.moveFileHandler](https://jb.gg/ipe?extensions=com.intellij.moveFileHandler) | [`MoveFileHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/move/moveFilesOrDirectories/MoveFileHandler.java) |
| [com.intellij.refactoring.changeSignatureUsageProcessor](https://jb.gg/ipe?extensions=com.intellij.refactoring.changeSignatureUsageProcessor) | [`ChangeSignatureUsageProcessor`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/changeSignature/ChangeSignatureUsageProcessor.java) |
| [com.intellij.refactoring.copyHandler](https://jb.gg/ipe?extensions=com.intellij.refactoring.copyHandler) | [`CopyHandlerDelegate`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/copy/CopyHandlerDelegate.java) |
| [com.intellij.refactoring.extractIncludeHandler](https://jb.gg/ipe?extensions=com.intellij.refactoring.extractIncludeHandler) | [`RefactoringActionHandler`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/RefactoringActionHandler.java) |
| [com.intellij.refactoring.introduceParameterObject](https://jb.gg/ipe?extensions=com.intellij.refactoring.introduceParameterObject) | [`IntroduceParameterObjectDelegate`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/introduceParameterObject/IntroduceParameterObjectDelegate.java) |
| [com.intellij.refactoring.invertBoolean](https://jb.gg/ipe?extensions=com.intellij.refactoring.invertBoolean) | [`InvertBooleanDelegate`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/invertBoolean/InvertBooleanDelegate.java) |
| [com.intellij.refactoring.moveDirectoryWithClassesHelper](https://jb.gg/ipe?extensions=com.intellij.refactoring.moveDirectoryWithClassesHelper) | [`MoveDirectoryWithClassesHelper`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/move/moveClassesOrPackages/MoveDirectoryWithClassesHelper.java) |
| [com.intellij.refactoring.moveHandler](https://jb.gg/ipe?extensions=com.intellij.refactoring.moveHandler) | [`MoveHandlerDelegate`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/move/MoveHandlerDelegate.java) |
| [com.intellij.refactoring.pushDown](https://jb.gg/ipe?extensions=com.intellij.refactoring.pushDown) | [`PushDownDelegate`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/memberPushDown/PushDownDelegate.java) |
| [com.intellij.refactoring.safeDeleteProcessor](https://jb.gg/ipe?extensions=com.intellij.refactoring.safeDeleteProcessor) | [`SafeDeleteProcessorDelegate`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/safeDelete/SafeDeleteProcessorDelegate.java) |
| [com.intellij.rename.symbolRenameTargetFactory](https://jb.gg/ipe?extensions=com.intellij.rename.symbolRenameTargetFactory) | [`SymbolRenameTargetFactory`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/rename/symbol/SymbolRenameTargetFactory.java) |
| [com.intellij.renameFileActionProvider](https://jb.gg/ipe?extensions=com.intellij.renameFileActionProvider) | [`RenameFileActionProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/actions/RenameFileActionProvider.java) |
| [com.intellij.suggestedRefactoringSupport](https://jb.gg/ipe?extensions=com.intellij.suggestedRefactoringSupport) | [`SuggestedRefactoringSupport`](%gh-ic%/platform/lang-api/src/com/intellij/refactoring/suggested/SuggestedRefactoringSupport.kt) |

### RegExpPlugin.xml

[`RegExpPlugin.xml`](%gh-ic%/RegExpSupport/resources/META-INF/RegExpPlugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.regExpCapabilitiesProvider](https://jb.gg/ipe?extensions=com.intellij.regExpCapabilitiesProvider) | [`RegExpCapabilitiesProvider`](%gh-ic%/RegExpSupport/src/org/intellij/lang/regexp/RegExpCapabilitiesProvider.java) |
| [com.intellij.regExpLanguageHost](https://jb.gg/ipe?extensions=com.intellij.regExpLanguageHost) | [`RegExpLanguageHost`](%gh-ic%/RegExpSupport/src/org/intellij/lang/regexp/RegExpLanguageHost.java) |
| [com.intellij.regExpMatcherProvider](https://jb.gg/ipe?extensions=com.intellij.regExpMatcherProvider) | [`RegExpMatcherProvider`](%gh-ic%/RegExpSupport/src/org/intellij/lang/regexp/RegExpMatcherProvider.java) |
| [com.intellij.regExpModifierProvider](https://jb.gg/ipe?extensions=com.intellij.regExpModifierProvider) | [`RegExpModifierProvider`](%gh-ic%/RegExpSupport/src/org/intellij/lang/regexp/RegExpModifierProvider.java) |

### RemoteDevUtil.xml

[`RemoteDevUtil.xml`](%gh-ic%/platform/remoteDev-util/resources/META-INF/RemoteDevUtil.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.remoteDev.configureClientHook](https://jb.gg/ipe?extensions=com.intellij.remoteDev.configureClientHook) | [`ConfigureClientHook`](%gh-ic%/platform/remoteDev-util/src/com/intellij/remoteDev/downloader/ConfigureClientHook.kt) |

### smRunner.xml

[`smRunner.xml`](%gh-ic%/platform/smRunner/resources/META-INF/smRunner.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.importTestOutput](https://jb.gg/ipe?extensions=com.intellij.importTestOutput) | [`ImportTestOutputExtension`](%gh-ic%/platform/smRunner/src/com/intellij/execution/testframework/sm/runner/history/ImportTestOutputExtension.java) |

### SpellCheckerPlugin.xml

[`SpellCheckerPlugin.xml`](%gh-ic%/spellchecker/src/META-INF/SpellCheckerPlugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.spellchecker.builtInDictionariesProvider](https://jb.gg/ipe?extensions=com.intellij.spellchecker.builtInDictionariesProvider) ![Internal][internal] | [`BuiltInDictionariesProvider`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/settings/BuiltInDictionariesProvider.kt) |
| [com.intellij.spellchecker.bundledDictionaryProvider](https://jb.gg/ipe?extensions=com.intellij.spellchecker.bundledDictionaryProvider) | [`BundledDictionaryProvider`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/BundledDictionaryProvider.java) |
| [com.intellij.spellchecker.dictionary.checker](https://jb.gg/ipe?extensions=com.intellij.spellchecker.dictionary.checker) | [`DictionaryChecker`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/dictionary/DictionaryChecker.java) |
| [com.intellij.spellchecker.dictionary.customDictionaryProvider](https://jb.gg/ipe?extensions=com.intellij.spellchecker.dictionary.customDictionaryProvider) | [`CustomDictionaryProvider`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/dictionary/CustomDictionaryProvider.java) |
| [com.intellij.spellchecker.dictionary.runtimeDictionaryProvider](https://jb.gg/ipe?extensions=com.intellij.spellchecker.dictionary.runtimeDictionaryProvider) | [`RuntimeDictionaryProvider`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/dictionary/RuntimeDictionaryProvider.java) |
| [com.intellij.spellchecker.dictionaryLayersProvider](https://jb.gg/ipe?extensions=com.intellij.spellchecker.dictionaryLayersProvider) ![Internal][internal] | [`DictionaryLayersProvider`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/DictionaryLevel.kt) |
| [com.intellij.spellchecker.quickFixFactory](https://jb.gg/ipe?extensions=com.intellij.spellchecker.quickFixFactory) ![Internal][internal] | [`SpellCheckerQuickFixFactory`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/quickfixes/SpellCheckerQuickFixFactory.kt) |
| [com.intellij.spellchecker.support](https://jb.gg/ipe?extensions=com.intellij.spellchecker.support) ![DumbAware][dumb-aware] | [`SpellcheckingStrategy`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/tokenizer/SpellcheckingStrategy.java) |

### structuralsearch.xml

[`structuralsearch.xml`](%gh-ic%/platform/structuralsearch/resources/META-INF/structuralsearch.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.structuralsearch.filterProvider](https://jb.gg/ipe?extensions=com.intellij.structuralsearch.filterProvider) | [`FilterProvider`](%gh-ic%/platform/structuralsearch/source/com/intellij/structuralsearch/plugin/ui/filters/FilterProvider.java) |
| [com.intellij.structuralsearch.profile](https://jb.gg/ipe?extensions=com.intellij.structuralsearch.profile) | [`StructuralSearchProfile`](%gh-ic%/platform/structuralsearch/source/com/intellij/structuralsearch/StructuralSearchProfile.java) |
| [com.intellij.structuralsearch.specialXmlTagExtractor](https://jb.gg/ipe?extensions=com.intellij.structuralsearch.specialXmlTagExtractor) | [`SpecialElementExtractor`](%gh-ic%/platform/structuralsearch/source/com/intellij/structuralsearch/SpecialElementExtractor.java) |

### tasks.xml

[`tasks.xml`](%gh-ic%/platform/tasks-platform-impl/resources/META-INF/tasks.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.tasks.contextProvider](https://jb.gg/ipe?extensions=com.intellij.tasks.contextProvider) | [`WorkingContextProvider`](%gh-ic%/platform/tasks-platform-api/src/com/intellij/tasks/context/WorkingContextProvider.java) |

### UsageViewActions.xml

[`UsageViewActions.xml`](%gh-ic%/platform/usageView/resources/idea/UsageViewActions.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.generatedSourceUsageFilter](https://jb.gg/ipe?extensions=com.intellij.generatedSourceUsageFilter) | [`GeneratedSourceUsageFilter`](%gh-ic%/platform/usageView/src/com/intellij/usages/rules/GeneratedSourceUsageFilter.kt) |
| [com.intellij.usages.usageReferenceClassProvider](https://jb.gg/ipe?extensions=com.intellij.usages.usageReferenceClassProvider) ![Non-Dynamic][non-dynamic] | [`UsageReferenceClassProvider`](%gh-ic%/platform/usageView/src/com/intellij/usages/impl/UsageReferenceClassProvider.kt) |

### VcsExtensionPoints.xml

[`VcsExtensionPoints.xml`](%gh-ic%/platform/vcs-impl/resources/META-INF/VcsExtensionPoints.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.changesGroupingPolicy](https://jb.gg/ipe?extensions=com.intellij.changesGroupingPolicy) ![Internal][internal] | [`ChangesGroupingPolicyFactory`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/ui/ChangesGroupingPolicyFactory.java) |
| [com.intellij.changesViewContent](https://jb.gg/ipe?extensions=com.intellij.changesViewContent) ![Internal][internal] ![Project-Level][project-level] | [`ChangesViewContentProvider`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/ui/ChangesViewContentProvider.java) |
| [com.intellij.checkinHandlerFactory](https://jb.gg/ipe?extensions=com.intellij.checkinHandlerFactory) | [`CheckinHandlerFactory`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/checkin/CheckinHandlerFactory.java) |
| [com.intellij.checkoutCompletedListener](https://jb.gg/ipe?extensions=com.intellij.checkoutCompletedListener) | [`CheckoutListener`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/checkout/CheckoutListener.java) |
| [com.intellij.checkoutListener](https://jb.gg/ipe?extensions=com.intellij.checkoutListener) | [`CheckoutListener`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/checkout/CheckoutListener.java) |
| [com.intellij.checkoutProvider](https://jb.gg/ipe?extensions=com.intellij.checkoutProvider) | [`CheckoutProvider`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/CheckoutProvider.java) |
| [com.intellij.editChangelistSupport](https://jb.gg/ipe?extensions=com.intellij.editChangelistSupport) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | [`EditChangelistSupport`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/ui/EditChangelistSupport.java) |
| [com.intellij.generalVcsSettingsExtension](https://jb.gg/ipe?extensions=com.intellij.generalVcsSettingsExtension) ![Project-Level][project-level] | [`UnnamedConfigurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/UnnamedConfigurable.java) |
| [com.intellij.ignoredFileContentProvider](https://jb.gg/ipe?extensions=com.intellij.ignoredFileContentProvider) ![Project-Level][project-level] | [`IgnoredFileContentProvider`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/IgnoredFileContentProvider.java) |
| [com.intellij.ignoredFileProvider](https://jb.gg/ipe?extensions=com.intellij.ignoredFileProvider) | [`IgnoredFileProvider`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/IgnoredFileProvider.java) |
| [com.intellij.openapi.vcs.actions.AnnotateToggleAction.Provider](https://jb.gg/ipe?extensions=com.intellij.openapi.vcs.actions.AnnotateToggleAction.Provider) | [`Provider`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/actions/AnnotateToggleAction.java) |
| [com.intellij.openapi.vcs.changes.actions.CreatePatchFromChangesAction.Clipboard.ExtensionProvider](https://jb.gg/ipe?extensions=com.intellij.openapi.vcs.changes.actions.CreatePatchFromChangesAction.Clipboard.ExtensionProvider) | [`AnActionExtensionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/actionSystem/AnActionExtensionProvider.java) |
| [com.intellij.openapi.vcs.changes.actions.CreatePatchFromChangesAction.Dialog.ExtensionProvider](https://jb.gg/ipe?extensions=com.intellij.openapi.vcs.changes.actions.CreatePatchFromChangesAction.Dialog.ExtensionProvider) | [`AnActionExtensionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/actionSystem/AnActionExtensionProvider.java) |
| [com.intellij.openapi.vcs.changes.actions.diff.ChangeDiffRequestProvider](https://jb.gg/ipe?extensions=com.intellij.openapi.vcs.changes.actions.diff.ChangeDiffRequestProvider) | [`ChangeDiffRequestProvider`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/actions/diff/ChangeDiffRequestProvider.java) |
| [com.intellij.openapi.vcs.changes.actions.diff.ChangeDiffViewerWrapperProvider](https://jb.gg/ipe?extensions=com.intellij.openapi.vcs.changes.actions.diff.ChangeDiffViewerWrapperProvider) ![Internal][internal] | [`ChangeDiffViewerWrapperProvider`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/actions/diff/ChangeDiffViewerWrapperProvider.java) |
| [com.intellij.openapi.vcs.changes.ui.filePathIconProvider](https://jb.gg/ipe?extensions=com.intellij.openapi.vcs.changes.ui.filePathIconProvider) | [`FilePathIconProvider`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/FilePathIconProvider.java) |
| [com.intellij.openapi.vcs.changes.vcsPreservingExecutor](https://jb.gg/ipe?extensions=com.intellij.openapi.vcs.changes.vcsPreservingExecutor) | [`VcsPreservingExecutor`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/VcsPreservingExecutor.java) |
| [com.intellij.openapi.vcs.history.actions.GetVersionAction.ExtensionProvider](https://jb.gg/ipe?extensions=com.intellij.openapi.vcs.history.actions.GetVersionAction.ExtensionProvider) | [`AnActionExtensionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/actionSystem/AnActionExtensionProvider.java) |
| [com.intellij.openapi.vcs.history.actions.ShowDiffAfterWithLocalAction.ExtensionProvider](https://jb.gg/ipe?extensions=com.intellij.openapi.vcs.history.actions.ShowDiffAfterWithLocalAction.ExtensionProvider) | [`AnActionExtensionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/actionSystem/AnActionExtensionProvider.java) |
| [com.intellij.openapi.vcs.history.actions.ShowDiffBeforeWithLocalAction.ExtensionProvider](https://jb.gg/ipe?extensions=com.intellij.openapi.vcs.history.actions.ShowDiffBeforeWithLocalAction.ExtensionProvider) | [`AnActionExtensionProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/actionSystem/AnActionExtensionProvider.java) |
| [com.intellij.openapi.vcs.impl.LocalLineStatusTrackerProvider](https://jb.gg/ipe?extensions=com.intellij.openapi.vcs.impl.LocalLineStatusTrackerProvider) | [`LocalLineStatusTrackerProvider`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/impl/LineStatusTrackerManager.kt) |
| [com.intellij.openapi.vcs.ui.cloneDialog.VcsCloneDialogExtension](https://jb.gg/ipe?extensions=com.intellij.openapi.vcs.ui.cloneDialog.VcsCloneDialogExtension) | [`VcsCloneDialogExtension`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/ui/cloneDialog/VcsCloneDialogExtension.kt) |
| [com.intellij.openapi.vcs.ui.commitOptionsDialogExtension](https://jb.gg/ipe?extensions=com.intellij.openapi.vcs.ui.commitOptionsDialogExtension) ![Internal][internal] | [`CommitOptionsDialogExtension`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/ui/CommitOptionsDialogExtension.kt) |
| [com.intellij.patch.extension](https://jb.gg/ipe?extensions=com.intellij.patch.extension) | [`PatchEP`](%gh-ic%/platform/vcs-api/vcs-api-core/src/com/intellij/openapi/diff/impl/patch/PatchEP.java) |
| [com.intellij.unresolvedMergeCheckProvider](https://jb.gg/ipe?extensions=com.intellij.unresolvedMergeCheckProvider) | [`UnresolvedMergeCheckProvider`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/checkin/UnresolvedMergeCheckProvider.java) |
| [com.intellij.vcs](https://jb.gg/ipe?extensions=com.intellij.vcs) ![Internal][internal] | [`AbstractVcs`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/AbstractVcs.java) |
| [com.intellij.vcs.actions.ScheduleForAdditionActionExtension](https://jb.gg/ipe?extensions=com.intellij.vcs.actions.ScheduleForAdditionActionExtension) | [`ScheduleForAdditionActionExtension`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/actions/ScheduleForAdditionActionExtension.kt) |
| [com.intellij.vcs.baseContentProvider](https://jb.gg/ipe?extensions=com.intellij.vcs.baseContentProvider) ![Project-Level][project-level] | [`VcsBaseContentProvider`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/impl/VcsBaseContentProvider.java) |
| [com.intellij.vcs.branchStateProvider](https://jb.gg/ipe?extensions=com.intellij.vcs.branchStateProvider) ![Project-Level][project-level] | [`BranchStateProvider`](%gh-ic%/platform/vcs-api/src/com/intellij/vcs/branch/BranchStateProvider.java) |
| [com.intellij.vcs.changeListChangeAssigner](https://jb.gg/ipe?extensions=com.intellij.vcs.changeListChangeAssigner) ![Experimental][experimental] ![Project-Level][project-level] | [`ChangeListChangeAssigner`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/ChangeListChangeAssigner.java) |
| [com.intellij.vcs.changeListDecorator](https://jb.gg/ipe?extensions=com.intellij.vcs.changeListDecorator) ![Project-Level][project-level] | [`ChangeListDecorator`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/ChangeListDecorator.java) |
| [com.intellij.vcs.changes.changesViewModifier](https://jb.gg/ipe?extensions=com.intellij.vcs.changes.changesViewModifier) ![Project-Level][project-level] | [`ChangesViewModifier`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/ChangesViewModifier.java) |
| [com.intellij.vcs.changes.changesViewNodeAction](https://jb.gg/ipe?extensions=com.intellij.vcs.changes.changesViewNodeAction) ![Experimental][experimental] ![Project-Level][project-level] | [`ChangesViewNodeAction`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/ChangesViewNodeAction.java) |
| [com.intellij.vcs.changes.localCommitExecutor](https://jb.gg/ipe?extensions=com.intellij.vcs.changes.localCommitExecutor) ![Project-Level][project-level] | [`CommitExecutor`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/CommitExecutor.java) |
| [com.intellij.vcs.checkoutProcessor](https://jb.gg/ipe?extensions=com.intellij.vcs.checkoutProcessor) | [`VcsCheckoutProcessor`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/VcsCheckoutProcessor.java) |
| [com.intellij.vcs.codeVisionLanguageContext](https://jb.gg/ipe?extensions=com.intellij.vcs.codeVisionLanguageContext) ![Experimental][experimental] | [`VcsCodeVisionLanguageContext`](%gh-ic%/platform/vcs-api/src/com/intellij/codeInsight/hints/VcsCodeVisionLanguageContext.kt) |
| [com.intellij.vcs.commitMessageProvider](https://jb.gg/ipe?extensions=com.intellij.vcs.commitMessageProvider) | [`CommitMessageProvider`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/ui/CommitMessageProvider.java) |
| [com.intellij.vcs.consoleFolding](https://jb.gg/ipe?extensions=com.intellij.vcs.consoleFolding) | [`VcsConsoleFolding`](%gh-ic%/platform/vcs-impl/src/com/intellij/vcs/console/VcsConsoleView.kt) |
| [com.intellij.vcs.envCustomizer](https://jb.gg/ipe?extensions=com.intellij.vcs.envCustomizer) | [`VcsEnvCustomizer`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/VcsEnvCustomizer.java) |
| [com.intellij.vcs.fileStatusProvider](https://jb.gg/ipe?extensions=com.intellij.vcs.fileStatusProvider) ![Project-Level][project-level] | [`FileStatusProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/vcs/impl/FileStatusProvider.java) |
| [com.intellij.vcs.ignoredFilesHolder](https://jb.gg/ipe?extensions=com.intellij.vcs.ignoredFilesHolder) ![Project-Level][project-level] | [`Provider`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/VcsManagedFilesHolder.java) |
| [com.intellij.vcs.lineStatusClientIdRenderer](https://jb.gg/ipe?extensions=com.intellij.vcs.lineStatusClientIdRenderer) ![Non-Dynamic][non-dynamic] ![Internal][internal] ![Project-Level][project-level] | [`LineStatusClientIdRenderer`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/ex/LineStatusClientIdRenderer.kt) |
| [com.intellij.vcs.shelve.name](https://jb.gg/ipe?extensions=com.intellij.vcs.shelve.name) | [`ShelveTitleProvider`](%gh-ic%/platform/vcs-api/src/com/intellij/vcs/ShelveTitleProvider.kt) |
| [com.intellij.vcs.taskHandler](https://jb.gg/ipe?extensions=com.intellij.vcs.taskHandler) ![Project-Level][project-level] | [`VcsTaskHandler`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/VcsTaskHandler.java) |
| [com.intellij.vcs.unversionedFilesHolder](https://jb.gg/ipe?extensions=com.intellij.vcs.unversionedFilesHolder) ![Project-Level][project-level] | [`Provider`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/VcsManagedFilesHolder.java) |
| [com.intellij.vcs.vcsSymlinkResolver](https://jb.gg/ipe?extensions=com.intellij.vcs.vcsSymlinkResolver) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | [`VcsSymlinkResolver`](%gh-ic%/platform/vcs-api/src/com/intellij/vcs/VcsSymlinkResolver.java) |
| [com.intellij.vcsAnnotationGutterActionProvider](https://jb.gg/ipe?extensions=com.intellij.vcsAnnotationGutterActionProvider) | [`AnnotationGutterActionProvider`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/annotate/AnnotationGutterActionProvider.java) |
| [com.intellij.vcsAnnotationGutterColumnProvider](https://jb.gg/ipe?extensions=com.intellij.vcsAnnotationGutterColumnProvider) | [`AnnotationGutterColumnProvider`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/annotate/AnnotationGutterColumnProvider.java) |
| [com.intellij.vcsAwareCheckoutListener](https://jb.gg/ipe?extensions=com.intellij.vcsAwareCheckoutListener) | [`VcsAwareCheckoutListener`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/checkout/VcsAwareCheckoutListener.java) |
| [com.intellij.vcsBulkMovesOnlyChangesFilter](https://jb.gg/ipe?extensions=com.intellij.vcsBulkMovesOnlyChangesFilter) | [`BulkMovesOnlyChangesFilter`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/changes/ui/browser/BulkMovesOnlyChangesFilter.java) |
| [com.intellij.vcsChangesViewRefresher](https://jb.gg/ipe?extensions=com.intellij.vcsChangesViewRefresher) ![Project-Level][project-level] | [`ChangesViewRefresher`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/ChangesViewRefresher.java) |
| [com.intellij.vcsCheckinHandlerFactory](https://jb.gg/ipe?extensions=com.intellij.vcsCheckinHandlerFactory) | [`VcsCheckinHandlerFactory`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/checkin/VcsCheckinHandlerFactory.kt) |
| [com.intellij.vcsConfigurableProvider](https://jb.gg/ipe?extensions=com.intellij.vcsConfigurableProvider) | [`VcsConfigurableProvider`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/VcsConfigurableProvider.java) |
| [com.intellij.vcsIgnoreChecker](https://jb.gg/ipe?extensions=com.intellij.vcsIgnoreChecker) | [`VcsIgnoreChecker`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/VcsIgnoreChecker.java) |
| [com.intellij.vcsPopupProvider](https://jb.gg/ipe?extensions=com.intellij.vcsPopupProvider) | [`VcsQuickListContentProvider`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/actions/VcsQuickListContentProvider.java) |
| [com.intellij.vcsRepositoryInitializer](https://jb.gg/ipe?extensions=com.intellij.vcsRepositoryInitializer) | [`VcsRepositoryInitializer`](%gh-ic%/platform/vcs-api/src/com/intellij/vcs/VcsRepositoryInitializer.java) |
| [com.intellij.vcsRootChecker](https://jb.gg/ipe?extensions=com.intellij.vcsRootChecker) | [`VcsRootChecker`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/VcsRootChecker.java) |
| [com.intellij.vcsSelectionProvider](https://jb.gg/ipe?extensions=com.intellij.vcsSelectionProvider) | [`VcsSelectionProvider`](%gh-ic%/platform/vcs-api/src/com/intellij/vcsUtil/VcsSelectionProvider.java) |
| [com.intellij.vcsStartupActivity](https://jb.gg/ipe?extensions=com.intellij.vcsStartupActivity) ![Non-Dynamic][non-dynamic] | [`VcsStartupActivity`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/impl/VcsInitialization.kt) |

### WebSymbolsExtensionPoints.xml

[`WebSymbolsExtensionPoints.xml`](%gh-ic%/platform/webSymbols/resources/META-INF/WebSymbolsExtensionPoints.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.webSymbols.codeCompletionItemCustomizer](https://jb.gg/ipe?extensions=com.intellij.webSymbols.codeCompletionItemCustomizer) | [`WebSymbolCodeCompletionItemCustomizer`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/completion/WebSymbolCodeCompletionItemCustomizer.kt) |
| [com.intellij.webSymbols.context](https://jb.gg/ipe?extensions=com.intellij.webSymbols.context) | [`WebSymbolsContextProvider`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/context/WebSymbolsContextProvider.kt) |
| [com.intellij.webSymbols.contextSourceProximityProvider](https://jb.gg/ipe?extensions=com.intellij.webSymbols.contextSourceProximityProvider) | [`WebSymbolsContextSourceProximityProvider`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/context/WebSymbolsContextSourceProximityProvider.kt) |
| [com.intellij.webSymbols.declarationProvider](https://jb.gg/ipe?extensions=com.intellij.webSymbols.declarationProvider) | [`WebSymbolDeclarationProvider`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/declarations/WebSymbolDeclarationProvider.kt) |
| [com.intellij.webSymbols.defaultIconProvider](https://jb.gg/ipe?extensions=com.intellij.webSymbols.defaultIconProvider) | [`WebSymbolDefaultIconProvider`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolDefaultIconProvider.kt) |
| [com.intellij.webSymbols.documentationCustomizer](https://jb.gg/ipe?extensions=com.intellij.webSymbols.documentationCustomizer) | [`WebSymbolDocumentationCustomizer`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/documentation/WebSymbolDocumentationCustomizer.kt) |
| [com.intellij.webSymbols.framework](https://jb.gg/ipe?extensions=com.intellij.webSymbols.framework) | [`WebSymbolsFramework`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/framework/WebSymbolsFramework.kt) |
| [com.intellij.webSymbols.highlightInLanguage](https://jb.gg/ipe?extensions=com.intellij.webSymbols.highlightInLanguage) | `n/a` |
| [com.intellij.webSymbols.inspectionToolMapping](https://jb.gg/ipe?extensions=com.intellij.webSymbols.inspectionToolMapping) | `n/a` |
| [com.intellij.webSymbols.psiSourcedSymbol](https://jb.gg/ipe?extensions=com.intellij.webSymbols.psiSourcedSymbol) | `n/a` |
| [com.intellij.webSymbols.psiSourcedSymbolProvider](https://jb.gg/ipe?extensions=com.intellij.webSymbols.psiSourcedSymbolProvider) | [`PsiSourcedWebSymbolProvider`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/PsiSourcedWebSymbolProvider.kt) |
| [com.intellij.webSymbols.queryConfigurator](https://jb.gg/ipe?extensions=com.intellij.webSymbols.queryConfigurator) | [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt) |
| [com.intellij.webSymbols.queryResultsCustomizerFactory](https://jb.gg/ipe?extensions=com.intellij.webSymbols.queryResultsCustomizerFactory) | [`WebSymbolsQueryResultsCustomizerFactory`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryResultsCustomizerFactory.kt) |
| [com.intellij.webSymbols.webTypes](https://jb.gg/ipe?extensions=com.intellij.webSymbols.webTypes) | `n/a` |
| [com.intellij.webSymbols.webTypes.filter](https://jb.gg/ipe?extensions=com.intellij.webSymbols.webTypes.filter) | [`WebSymbolsFilter`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/webTypes/filters/WebSymbolsFilter.kt) |
| [com.intellij.webSymbols.webTypes.symbolFactory](https://jb.gg/ipe?extensions=com.intellij.webSymbols.webTypes.symbolFactory) | [`WebTypesSymbolFactory`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/webTypes/WebTypesSymbolFactory.kt) |
| [com.intellij.webSymbols.webTypes.symbolTypeSupportFactory](https://jb.gg/ipe?extensions=com.intellij.webSymbols.webTypes.symbolTypeSupportFactory) ![Internal][internal] | [`WebTypesSymbolTypeSupportFactory`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/webTypes/WebTypesSymbolTypeSupportFactory.kt) |

### WorkspaceModelExtensions.xml

[`WorkspaceModelExtensions.xml`](%gh-ic%/platform/workspace/jps/src/META-INF/WorkspaceModelExtensions.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.workspaceModel.customFacetRelatedEntitySerializer](https://jb.gg/ipe?extensions=com.intellij.workspaceModel.customFacetRelatedEntitySerializer) ![Internal][internal] | [`CustomFacetRelatedEntitySerializer`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/serialization/impl/CustomFacetRelatedEntitySerializer.kt) |
| [com.intellij.workspaceModel.customModuleComponentSerializer](https://jb.gg/ipe?extensions=com.intellij.workspaceModel.customModuleComponentSerializer) ![Internal][internal] | [`CustomModuleComponentSerializer`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/serialization/impl/CustomModuleComponentSerializer.kt) |
| [com.intellij.workspaceModel.customModuleRootsSerializer](https://jb.gg/ipe?extensions=com.intellij.workspaceModel.customModuleRootsSerializer) ![Internal][internal] | [`CustomModuleRootsSerializer`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/serialization/impl/CustomModuleRootsSerializer.kt) |

### xdebugger.xml

[`xdebugger.xml`](%gh-ic%/platform/xdebugger-impl/resources/META-INF/xdebugger.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.xdebugger.attachDebuggerProvider](https://jb.gg/ipe?extensions=com.intellij.xdebugger.attachDebuggerProvider) | [`XAttachDebuggerProvider`](%gh-ic%/platform/xdebugger-impl/src/com/intellij/xdebugger/attach/XAttachDebuggerProvider.java) |
| [com.intellij.xdebugger.attachHostProvider](https://jb.gg/ipe?extensions=com.intellij.xdebugger.attachHostProvider) | [`XAttachHostProvider`](%gh-ic%/platform/xdebugger-impl/src/com/intellij/xdebugger/attach/XAttachHostProvider.kt) |
| [com.intellij.xdebugger.attachHostSettingsProvider](https://jb.gg/ipe?extensions=com.intellij.xdebugger.attachHostSettingsProvider) | [`XAttachHostSettingsProvider`](%gh-ic%/platform/xdebugger-impl/src/com/intellij/xdebugger/impl/ui/attach/dialog/extensions/XAttachHostSettingsProvider.kt) |
| [com.intellij.xdebugger.breakpointGroupingRule](https://jb.gg/ipe?extensions=com.intellij.xdebugger.breakpointGroupingRule) | [`XBreakpointGroupingRule`](%gh-ic%/platform/xdebugger-api/src/com/intellij/xdebugger/breakpoints/ui/XBreakpointGroupingRule.java) |
| [com.intellij.xdebugger.breakpointType](https://jb.gg/ipe?extensions=com.intellij.xdebugger.breakpointType) | [`XBreakpointType`](%gh-ic%/platform/xdebugger-api/src/com/intellij/xdebugger/breakpoints/XBreakpointType.java) |
| [com.intellij.xdebugger.configurableProvider](https://jb.gg/ipe?extensions=com.intellij.xdebugger.configurableProvider) | [`DebuggerConfigurableProvider`](%gh-ic%/platform/xdebugger-api/src/com/intellij/xdebugger/settings/DebuggerConfigurableProvider.java) |
| [com.intellij.xdebugger.controlExceptionBreakpointSupport](https://jb.gg/ipe?extensions=com.intellij.xdebugger.controlExceptionBreakpointSupport) | [`ControlExceptionBreakpointSupport`](%gh-ic%/platform/xdebugger-api/src/com/intellij/xdebugger/codeinsight/ControlExceptionBreakpointSupport.kt) |
| [com.intellij.xdebugger.debuggerSupport](https://jb.gg/ipe?extensions=com.intellij.xdebugger.debuggerSupport) ![Deprecated][deprecated] | [`DebuggerSupport`](%gh-ic%/platform/xdebugger-impl/src/com/intellij/xdebugger/impl/DebuggerSupport.java) |
| [com.intellij.xdebugger.dialog.item.presentation.provider](https://jb.gg/ipe?extensions=com.intellij.xdebugger.dialog.item.presentation.provider) ![Experimental][experimental] | [`XAttachDialogItemPresentationProvider`](%gh-ic%/platform/xdebugger-impl/src/com/intellij/xdebugger/impl/ui/attach/dialog/extensions/XAttachDialogItemPresentationProvider.kt) |
| [com.intellij.xdebugger.dialog.presentation.provider](https://jb.gg/ipe?extensions=com.intellij.xdebugger.dialog.presentation.provider) ![Experimental][experimental] | [`XAttachDialogPresentationProvider`](%gh-ic%/platform/xdebugger-impl/src/com/intellij/xdebugger/impl/ui/attach/dialog/extensions/XAttachDialogPresentationProvider.kt) |
| [com.intellij.xdebugger.dialog.process.view.provider](https://jb.gg/ipe?extensions=com.intellij.xdebugger.dialog.process.view.provider) ![Internal][internal] | [`XAttachToProcessViewProvider`](%gh-ic%/platform/xdebugger-impl/src/com/intellij/xdebugger/impl/ui/attach/dialog/extensions/XAttachToProcessViewProvider.kt) |
| [com.intellij.xdebugger.hotSwapUiExtension](https://jb.gg/ipe?extensions=com.intellij.xdebugger.hotSwapUiExtension) ![Internal][internal] | [`HotSwapUiExtension`](%gh-ic%/platform/xdebugger-impl/src/com/intellij/xdebugger/impl/hotswap/ui.kt) |
| [com.intellij.xdebugger.inlineBreakpointsDisabler](https://jb.gg/ipe?extensions=com.intellij.xdebugger.inlineBreakpointsDisabler) ![Experimental][experimental] | [`InlineBreakpointsDisabler`](%gh-ic%/platform/xdebugger-api/src/com/intellij/xdebugger/breakpoints/InlineBreakpointsDisabler.kt) |
| [com.intellij.xdebugger.inlineValuePopupProvider](https://jb.gg/ipe?extensions=com.intellij.xdebugger.inlineValuePopupProvider) | [`InlineValuePopupProvider`](%gh-ic%/platform/xdebugger-impl/src/com/intellij/xdebugger/impl/inline/InlineValuePopupProvider.java) |
| [com.intellij.xdebugger.settings](https://jb.gg/ipe?extensions=com.intellij.xdebugger.settings) | [`XDebuggerSettings`](%gh-ic%/platform/xdebugger-api/src/com/intellij/xdebugger/settings/XDebuggerSettings.java) |
| [com.intellij.xdebugger.textValueVisualizer](https://jb.gg/ipe?extensions=com.intellij.xdebugger.textValueVisualizer) ![Experimental][experimental] | [`TextValueVisualizer`](%gh-ic%/platform/xdebugger-api/src/com/intellij/xdebugger/ui/TextValueVisualizer.kt) |

### xml.xml

[`xml.xml`](%gh-ic%/xml/impl/resources/META-INF/xml.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.completion.htmlInTextCompletionEnabler](https://jb.gg/ipe?extensions=com.intellij.completion.htmlInTextCompletionEnabler) ![Internal][internal] | [`HtmlInTextCompletionEnabler`](%gh-ic%/xml/impl/src/com/intellij/codeInsight/completion/HtmlInTextCompletionEnabler.java) |
| [com.intellij.completion.htmlInTextCompletionPopupExtension](https://jb.gg/ipe?extensions=com.intellij.completion.htmlInTextCompletionPopupExtension) ![Internal][internal] | [`HtmlInTextCompletionPopupExtension`](%gh-ic%/xml/impl/src/com/intellij/codeInsight/completion/HtmlInTextCompletionPopupExtension.java) |
| [com.intellij.html.compatibleLanguage](https://jb.gg/ipe?extensions=com.intellij.html.compatibleLanguage) ![Experimental][experimental] | `n/a` |

### XmlPlugin.xml

[`XmlPlugin.xml`](%gh-ic%/platform/platform-resources/src/META-INF/XmlPlugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.embeddedTokenHighlighter](https://jb.gg/ipe?extensions=com.intellij.embeddedTokenHighlighter) | [`EmbeddedTokenHighlighter`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/ide/highlighter/EmbeddedTokenHighlighter.java) |
| [com.intellij.embeddedTokenTypesProvider](https://jb.gg/ipe?extensions=com.intellij.embeddedTokenTypesProvider) | [`EmbeddedTokenTypesProvider`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/lexer/EmbeddedTokenTypesProvider.java) |
| [com.intellij.html.attributeValueProvider](https://jb.gg/ipe?extensions=com.intellij.html.attributeValueProvider) | [`HtmlAttributeValueProvider`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/html/impl/providers/HtmlAttributeValueProvider.java) |
| [com.intellij.html.codestyle.panel](https://jb.gg/ipe?extensions=com.intellij.html.codestyle.panel) | [`HtmlCodeStylePanelExtension`](%gh-ic%/xml/impl/src/com/intellij/application/options/HtmlCodeStylePanelExtension.java) |
| [com.intellij.html.embeddedContentSupport](https://jb.gg/ipe?extensions=com.intellij.html.embeddedContentSupport) | [`HtmlEmbeddedContentSupport`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/html/embedding/HtmlEmbeddedContentSupport.kt) |
| [com.intellij.html.htmlScriptInjectionBlocker](https://jb.gg/ipe?extensions=com.intellij.html.htmlScriptInjectionBlocker) | [`HtmlScriptInjectionBlocker`](%gh-ic%/xml/impl/src/com/intellij/psi/impl/source/html/HtmlScriptInjectionBlocker.java) |
| [com.intellij.html.scriptContentProvider](https://jb.gg/ipe?extensions=com.intellij.html.scriptContentProvider) | [`HtmlScriptContentProvider`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/lang/HtmlScriptContentProvider.java) |
| [com.intellij.html.scriptDocumentationProvider](https://jb.gg/ipe?extensions=com.intellij.html.scriptDocumentationProvider) ![Obsolete][obsolete] | [`DocumentationProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/documentation/DocumentationProvider.java) |
| [com.intellij.standardResource](https://jb.gg/ipe?extensions=com.intellij.standardResource) | `n/a` |
| [com.intellij.standardResourceProvider](https://jb.gg/ipe?extensions=com.intellij.standardResourceProvider) | [`StandardResourceProvider`](%gh-ic%/xml/xml-psi-api/src/com/intellij/javaee/StandardResourceProvider.java) |
| [com.intellij.webSmartKeysConfigurable](https://jb.gg/ipe?extensions=com.intellij.webSmartKeysConfigurable) | [`UnnamedConfigurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/UnnamedConfigurable.java) |
| [com.intellij.xml.attributeDescriptorsProvider](https://jb.gg/ipe?extensions=com.intellij.xml.attributeDescriptorsProvider) | [`XmlAttributeDescriptorsProvider`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/xml/XmlAttributeDescriptorsProvider.java) |
| [com.intellij.xml.autoPopupEnabler](https://jb.gg/ipe?extensions=com.intellij.xml.autoPopupEnabler) ![Experimental][experimental] | [`XmlAutoPopupEnabler`](%gh-ic%/xml/xml-psi-api/src/com/intellij/xml/psi/codeInsight/XmlAutoPopupEnabler.java) |
| [com.intellij.xml.elementDescriptorProvider](https://jb.gg/ipe?extensions=com.intellij.xml.elementDescriptorProvider) | [`XmlElementDescriptorProvider`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/psi/impl/source/xml/XmlElementDescriptorProvider.java) |
| [com.intellij.xml.fileNSInfoProvider](https://jb.gg/ipe?extensions=com.intellij.xml.fileNSInfoProvider) | [`XmlFileNSInfoProvider`](%gh-ic%/xml/xml-psi-api/src/com/intellij/psi/xml/XmlFileNSInfoProvider.java) |
| [com.intellij.xml.idContributor](https://jb.gg/ipe?extensions=com.intellij.xml.idContributor) | [`XmlIdContributor`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/xml/util/XmlIdContributor.java) |
| [com.intellij.xml.implicitIdRefProvider](https://jb.gg/ipe?extensions=com.intellij.xml.implicitIdRefProvider) | [`ImplicitIdRefProvider`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/psi/impl/source/resolve/reference/impl/providers/ImplicitIdRefProvider.java) |
| [com.intellij.xml.implicitNamespaceDescriptorProvider](https://jb.gg/ipe?extensions=com.intellij.xml.implicitNamespaceDescriptorProvider) | [`ImplicitNamespaceDescriptorProvider`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/javaee/ImplicitNamespaceDescriptorProvider.java) |
| [com.intellij.xml.namedReferenceProvider](https://jb.gg/ipe?extensions=com.intellij.xml.namedReferenceProvider) ![Experimental][experimental] | [`PsiSymbolReferenceProvider`](%gh-ic%/platform/core-api/src/com/intellij/model/psi/PsiSymbolReferenceProvider.java) |
| [com.intellij.xml.namespaceHelper](https://jb.gg/ipe?extensions=com.intellij.xml.namespaceHelper) | [`XmlNamespaceHelper`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/xml/XmlNamespaceHelper.java) |
| [com.intellij.xml.nsColorProvider](https://jb.gg/ipe?extensions=com.intellij.xml.nsColorProvider) | [`XmlNSColorProvider`](%gh-ic%/xml/xml-analysis-impl/src/com/intellij/codeInsight/daemon/impl/analysis/XmlNSColorProvider.java) |
| [com.intellij.xml.psiPolicy](https://jb.gg/ipe?extensions=com.intellij.xml.psiPolicy) | [`XmlPsiPolicy`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/psi/impl/source/xml/XmlPsiPolicy.java) |
| [com.intellij.xml.relatedToHtmlFilesContributor](https://jb.gg/ipe?extensions=com.intellij.xml.relatedToHtmlFilesContributor) | [`RelatedToHtmlFilesContributor`](%gh-ic%/xml/impl/src/com/intellij/navigation/RelatedToHtmlFilesContributor.java) |
| [com.intellij.xml.schemaProvider](https://jb.gg/ipe?extensions=com.intellij.xml.schemaProvider) ![DumbAware][dumb-aware] | [`XmlSchemaProvider`](%gh-ic%/xml/xml-psi-api/src/com/intellij/xml/XmlSchemaProvider.kt) |
| [com.intellij.xml.startTagEndToken](https://jb.gg/ipe?extensions=com.intellij.xml.startTagEndToken) | [`StartTagEndTokenProvider`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/psi/xml/StartTagEndTokenProvider.java) |
| [com.intellij.xml.tagNameProvider](https://jb.gg/ipe?extensions=com.intellij.xml.tagNameProvider) | [`XmlTagNameProvider`](%gh-ic%/xml/impl/src/com/intellij/xml/XmlTagNameProvider.java) |
| [com.intellij.xml.undefinedElementFixProvider](https://jb.gg/ipe?extensions=com.intellij.xml.undefinedElementFixProvider) | [`XmlUndefinedElementFixProvider`](%gh-ic%/xml/xml-analysis-impl/src/com/intellij/xml/XmlUndefinedElementFixProvider.java) |
| [com.intellij.xml.validateHandler](https://jb.gg/ipe?extensions=com.intellij.xml.validateHandler) | [`ValidateXmlHandler`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/xml/actions/validate/ValidateXmlHandler.java) |
| [com.intellij.xml.xmlAttributeRenameProvider](https://jb.gg/ipe?extensions=com.intellij.xml.xmlAttributeRenameProvider) | [`XmlUnknownAttributeQuickFixProvider`](%gh-ic%/xml/xml-analysis-impl/src/com/intellij/codeInspection/htmlInspections/XmlUnknownAttributeQuickFixProvider.java) |
| [com.intellij.xml.xmlCustomTagHighlightingStrategy](https://jb.gg/ipe?extensions=com.intellij.xml.xmlCustomTagHighlightingStrategy) ![Experimental][experimental] | [`XmlCustomTagHighlightingStrategy`](%gh-ic%/xml/xml-psi-api/src/com/intellij/openapi/editor/XmlCustomTagHighlightingStrategy.java) |
| [com.intellij.xml.xmlExtension](https://jb.gg/ipe?extensions=com.intellij.xml.xmlExtension) | [`XmlExtension`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/xml/XmlExtension.java) |
| [com.intellij.xml.xmlSuppressionProvider](https://jb.gg/ipe?extensions=com.intellij.xml.xmlSuppressionProvider) ![DumbAware][dumb-aware] | [`XmlSuppressionProvider`](%gh-ic%/xml/xml-psi-api/src/com/intellij/codeInspection/XmlSuppressionProvider.java) |
| [com.intellij.xml.xmlTagRuleProvider](https://jb.gg/ipe?extensions=com.intellij.xml.xmlTagRuleProvider) | [`XmlTagRuleProvider`](%gh-ic%/xml/xml-analysis-api/src/com/intellij/xml/XmlTagRuleProvider.java) |
| [com.intellij.xml.xmlTypedHandlersAdditionalSupport](https://jb.gg/ipe?extensions=com.intellij.xml.xmlTypedHandlersAdditionalSupport) | [`XmlTypedHandlersAdditionalSupport`](%gh-ic%/xml/xml-psi-api/src/com/intellij/openapi/editor/XmlTypedHandlersAdditionalSupport.java) |
| [com.intellij.xml.zenCodingFilter](https://jb.gg/ipe?extensions=com.intellij.xml.zenCodingFilter) | [`ZenCodingFilter`](%gh-ic%/xml/impl/src/com/intellij/codeInsight/template/emmet/filters/ZenCodingFilter.java) |
| [com.intellij.xml.zenCodingGenerator](https://jb.gg/ipe?extensions=com.intellij.xml.zenCodingGenerator) | [`ZenCodingGenerator`](%gh-ic%/xml/impl/src/com/intellij/codeInsight/template/emmet/generators/ZenCodingGenerator.java) |
| [com.intellij.xmlStructureViewBuilderProvider](https://jb.gg/ipe?extensions=com.intellij.xmlStructureViewBuilderProvider) | [`XmlStructureViewBuilderProvider`](%gh-ic%/xml/xml-structure-view-api/src/com/intellij/ide/structureView/xml/XmlStructureViewBuilderProvider.java) |
| [com.intellij.xmlStructureViewElementProvider](https://jb.gg/ipe?extensions=com.intellij.xmlStructureViewElementProvider) | [`XmlStructureViewElementProvider`](%gh-ic%/xml/xml-structure-view-api/src/com/intellij/ide/structureView/xml/XmlStructureViewElementProvider.java) |

[deprecated]: https://img.shields.io/badge/-Deprecated-lightgrey?style=flat-square
[removal]: https://img.shields.io/badge/-Removal-red?style=flat-square
[obsolete]: https://img.shields.io/badge/-Obsolete-grey?style=flat-square
[experimental]: https://img.shields.io/badge/-Experimental-violet?style=flat-square
[internal]: https://img.shields.io/badge/-Internal-darkred?style=flat-square
[project-level]: https://img.shields.io/badge/-Project--Level-blue?style=flat-square
[non-dynamic]: https://img.shields.io/badge/-Non--Dynamic-orange?style=flat-square
[dumb-aware]: https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Internal Actions Menu

<link-summary>Introduction to Internal Actions helping to develop, debug and test plugins.</link-summary>

The <ui-path>Tools | Internal Actions</ui-path> menu provides plugin developers with a suite of tools to help develop, debug, and test their IntelliJ Platform plugins.

<snippet id="enable_internal_mode_tip">

> If the menu item <ui-path>Tools | Internal Actions</ui-path> is not available in the IDE, then the first step is [Enabling Internal Mode](enabling_internal.md).
>

</snippet>

Click on the following topics to learn more about the <ui-path>Internal Actions</ui-path> menu.

* [Enabling Internal Mode](enabling_internal.md) provides instructions for enabling the Internal Actions menu.
* [UI Tools](internal_ui_sub.md) has information about some tools for inspecting and testing plugin UI.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Internal Actions – UI Inspector

<link-summary>UI Inspector allows checking properties of a component selected in the frame of running IDE instance.</link-summary>

The _UI Inspector_ is a tool to interrogate elements of the IDE's UI to get an internal description of each element.

<include from="internal_actions_intro.md" element-id="enable_internal_mode_tip"></include>

## Enabling the UI Inspector

> This step isn't required when using 2021.1 release or later.

Before using the _UI Inspector_, it must be enabled by selecting the menu item <ui-path>Tools | Internal Actions | UI | UI Inspector</ui-path>.
The enabled state of the _UI Inspector_ is modal; it remains enabled until it is disabled by selecting the menu item again.

## Using the UI Inspector

Centering the cursor on a UI element and pressing <shortcut>Ctrl+Alt</shortcut> (<shortcut>Ctrl+Option</shortcut> on macOS) when _clicking_ the left mouse button reveals the properties of the Swing component.

For example, to get information about the <control>Build Project</control> button's "hammer" icon on the toolbar (highlighted in green), put the mouse cursor on the icon and press <shortcut>Ctrl/Cmd+Alt</shortcut> while clicking the mouse.

The _UI Inspector_ displays the icon details:

![Internal Icon Info](internal_ui_inspector_icon_info.png)

## `added-at` Property

Sometimes, inspecting complex component's properties is not enough to understand how the component was created and configured.
_UI Inspector_ gives the possibility of finding the code where the selected component was added, which makes it much easier to understand which APIs can be used to build custom components with similar complexity.

To find the place were component was added, select the <control>added-at</control> property to show the stacktrace:

![added-at stack trace](internal_ui_inspector_added_at.png)

## Specific Component Properties

Various components used in the IntelliJ Platform expose additional properties.
These can be useful to locate the underlying implementation, related Action, etc.

Custom Swing components can also provide additional properties via [`UiInspectorContextProvider`](%gh-ic%/platform/platform-api/src/com/intellij/internal/inspector/UiInspectorContextProvider.java) or its dedicated subclasses (2020.1 and later).

### Editor

| Type                                                                                                                                           | Properties                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <p>[`ActiveGutterRenderer`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/markup/ActiveGutterRenderer.java)<br/>(2023.1+)</p> | <p><control>Clicked Renderer (Class)</control> - `ActiveGutterRenderer` instance/class</p>                                                                                                                                                                                                                                                                                                                                                                    |
| <p>[`GutterIconRenderer`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/markup/GutterIconRenderer.java)<br/>(2023.1+)</p>     | <p><control>Clicked Renderer (Class)</control> - `GutterIconRenderer` instance/class</p><p><control>Accessible Name</control> - `GutterIconRenderer.getAccessibleName()`</p><p><control>Icon</control> - `GutterIconRenderer.getIcon()`</p><p><control>Marker Info - Element / Navigation Handler</control> - [`LineMarkerInfo.getElement() / getNavigationHandler()`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/daemon/LineMarkerInfo.java)</p> |
| [`GutterMark`](%gh-ic%/platform/editor-ui-api/src/com/intellij/codeInsight/daemon/GutterMark.java)                                             | <p><control>gutter renderer</control> - [`GutterMark`](%gh-ic%/platform/editor-ui-api/src/com/intellij/codeInsight/daemon/GutterMark.java) implementation</p>                                                                                                                                                                                                                                                                                                 |
| <p>[`Inlay`](inlay_hints.md)<br/>(2023.1+)</p>                                                                                                 | <p><control>Inlay Renderer (Class)</control> - `Inlay.getRenderer()` instance/class</p><p><control>Inlay Gutter Renderer</control> - `Inlay.getGutterIconRenderer()`</p><p><control>Inlay Properties</control> - `Inlay.getProperties()`</p>                                                                                                                                                                                                                  |
| [`IntentionAction`/`QuickFix`](code_inspections_and_intentions.md)                                                                             | <p><control>intention action</control>/<control>quick fix</control> - [`IntentionAction`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/IntentionAction.java) / [`QuickFix`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/QuickFix.java) implementation</p>                                                                                                                                                           |

### Action

| Type                                      | Properties                                                                                                                                                                                                                                                          |
|-------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [`AnAction`](basic_action_system.md)      | <p><control>Action</control> - [`AnAction`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnAction.java) implementation</p><p><control>Action ID</control> - Action `id`</p><p><control>Action Plugin ID</control> - contributing plugin</p> |
| [`ActionToolbar`](basic_action_system.md) | <p><control>Toolbar Group</control> - Action Group ID</p><p><control>All Toolbar Groups</control> - contained Action Group IDs</p><p><control>Target component</control> - `ActionToolbar.setTargetComponent()`</p>                                                 |

### IDE and UI Components

| Type                                 | Properties                                                                                                                                                                                                                                              |
|--------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [`DialogWrapper`](dialog_wrapper.md) | <control>dialogWrapperClass</control> - [`DialogWrapper`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/DialogWrapper.java) implementation                                                                                                  |
| [`ToolWindow`](tool_windows.md)      | <p><control>Tool Window ID</control> - `id`</p><p><control>Tool Window Icon</control> - `icon`</p><p><control>Tool Window Factory</control> - [`ToolWindowFactory`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/ToolWindowFactory.kt)</p> |
| [`Tree`](lists_and_trees.md)         | <control>treeModelClass</control> - `javax.swing.tree.TreeModel` implementation                                                                                                                                                                         |

## Inspecting Settings

Enable <ui-path>View | Appearance | Details in Tree View</ui-path> in [Internal Mode](enabling_internal.md) to show Settings page `id` in the tree.

Some additional properties are available when inspecting <control>Settings</control> dialog (2023.1+).

> _UI Inspector_ must be invoked only after opening the <control>Settings</control> dialog.

| <p>Settings page</p><p>Reference</p>                                                                                             | Properties                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|----------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <p>_All settings_</p><p>[](settings_guide.md)</p>                                                                                | <p><control>Configurable class</control> - [`Configurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/Configurable.java) class</p><p><control>Configurable ID</control> - `id` attribute</p><p><control>Configurable weight</control> - `groupWeight` attribute</p>                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <p><ui-path>Editor &#124; Color Scheme</ui-path></p><p>[](syntax_highlighting_and_error_highlighting.md#text-attributes-key)</p> | <p><control>Text Attributes Key</control> - [`TextAttributesKey`](%gh-ic%/platform/core-api/src/com/intellij/openapi/editor/colors/TextAttributesKey.java) external name</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <p><ui-path>Editor &#124; File Types</ui-path></p><p>[](registering_file_type.md)</p>                                            | <p><control>FileTypeID</control> - `FileType.getName()`</p><p><control>FileType Class</control> - [`FileType`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileTypes/FileType.java) implementation</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <p><ui-path>Editor &#124; Inspections</ui-path></p><p>[](code_inspections.md)</p>                                                | <p><control>Inspection key</control> - Inspection `id`</p><p><control>Inspection tool class</control> - Inspection implementation</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <p><ui-path>Editor &#124; Inlays</ui-path></p><p>[](inlay_hints.md)</p>                                                          | <p><control>Inlay Group Key</control> - [`InlayGroupSettingProvider.getGroup().key`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/settings/InlayGroupSettingProvider.kt)</p><p><control>Inlay Group Key</control> - [`InlayGroup.key`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/InlayHintsProvider.kt)</p><p><control>Inlay Provider Model ID</control> - [`InlayProviderSettingsModel.id`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/settings/InlayProviderSettingsModel.kt)</p><p><control>Inlay ImmediateConfigurable ID</control> - [`ImmediateConfigurable.Case.id`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hints/InlayHintsProvider.kt)</p> |
| <p><ui-path>Editor &#124; Intentions</ui-path></p><p>[](code_intentions.md)</p>                                                  | <p><control>Intention Class</control> - [`IntentionAction`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/intention/IntentionAction.java) class</p><p><control>Intention description directory</control> - `<descriptionDirectoryName>`</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <p><ui-path>Plugins</ui-path></p><p>[](plugin_configuration_file.md)</p>                                                         | <p><control>Plugin ID</control> - Plugin `<id>`</p><p><control>Plugin Dependencies</control> - IDs of dependent plugins</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
<!-- Copyright 2000-2022 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Internal Actions - LaF Defaults

<link-summary>Using LaF Defaults window to view and prototype UI control colors in a running IDE.</link-summary>

The <control>LaF Defaults</control> window provides a key-value pair lookup for UI Controls.
It also allows interactive prototyping of UI Control color changes.

_LaF_ stands for _Look and Feel_, see [Swing Tutorial](https://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/index.html) for more details.

<include from="internal_actions_intro.md" element-id="enable_internal_mode_tip"></include>

## Opening LaF Defaults

The <control>LaF Defaults</control> window is opened by selecting the menu item <ui-path>Tools | Internal Actions | UI | LaF Defaults</ui-path>.

It has two columns representing key-value pairs for UI Controls:

* The <control>Name</control> column contains the UI Control `key` for each IntelliJ Platform UI element available at runtime.
* The <control>Value</control> column contains the UI Control color `value` for each IntelliJ Platform UI element.

## Using the LaF Panel

### Finding UI Controls

The <control>LaF Defaults</control> window is used interactively by entering a UI element type - e.g. `Panel` - in the <control>Filter</control> text box at the top.
<control>LaF Defaults</control> shows the list of UI Control names matching the filter.

Enable <control>Colors only</control> to show only entries with color value.

Clicking on one of the names narrows the information to show only the key-value pair for that UI element:

![LaF Lookup](internal_lafd_win.png)

### Prototyping the Color of UI Controls

The color of UI Controls can be changed (in real time) by clicking in the <control>Value</control> column next to a <control>Name</control> (`key`) of interest.
The <control>Choose Color</control> window is displayed.
Color changes can be specified as RGB, HSB, hexadecimal, or using the graphical color picker.
Pressing the <control>Choose</control> button changes the UI Control color immediately.

UI Control colors can be reset using the <control>Choose Color</control> window, or by resetting the [theme](https://www.jetbrains.com/help/idea/settings-appearance.html).
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Internal Actions - UI Submenu

<link-summary>Introduction to "Internal Actions | UI" submenu.</link-summary>

The Internal Actions UI submenu provides IntelliJ Platform plugin developers with a suite of tools to help develop, debug, and test their IntelliJ Platform project UI.

<include from="internal_actions_intro.md" element-id="enable_internal_mode_tip"></include>

## The Tools Available on the UI Submenu
Here are some tools available on the UI submenu of the Internal Actions menu:
* [UI Inspector](internal_ui_inspector.md) is a tool to get an internal description with each UI element's properties.
* [LaF Defaults](internal_ui_laf_defaults.md) provides a way to lookup the key-value pair for a UI element, and the ability to prototype the color of UI Controls.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Internationalization

<link-summary>Tips about implementing message bundles, organizing translations, etc.</link-summary>

To enable IntelliJ-based IDEs and plugins for _National Language Support (NLS)_, all `String` instances in the code can be split into three categories:
- **NLS strings** - strings which are shown to users in the UI: texts in dialogs, menu items, descriptions of inspections, error messages, etc.
- **non-NLS strings** - strings which are used internally and aren't shown in UI: attributes in configuration files, keys in indices and caches, etc.
- **NLS-safe strings** - strings which don't need to be localized but can be shown in UI: strings written by users (e.g., parts of program code, file names, URLs, etc.), names of frameworks (in some cases names of frameworks may be translated, e.g., if they consist of multiple words), etc.

By default, a string is considered as non-NLS.

## NLS Annotations

There is a set of NLS-related annotations, which can be used for annotating strings in the IDE or plugin code.
Annotating strings enables inspecting NLS string content correctness.

For example, if an API method parameter is annotated as an NLS string, any hardcoded string passed as a value will be reported and extracting it to a message bundle will be proposed as a quick fix.
Another example is inspecting whether a given string value is properly capitalized for the usage context.

> Internationalization-related inspections can be enabled in <ui-path>Settings | Editor | Inspections</ui-path> in the following groups (some inspections require enabling _Java Internationalization_ bundled plugin):
> - <ui-path>Java | Internationalization</ui-path>
> - <ui-path>Java | Properties files</ui-path>
> - <ui-path>Properties files</ui-path>

Consider using the following annotations:
- [`@Nls`](%gh-java-annotations%/common/src/main/java/org/jetbrains/annotations/Nls.java) - for NLS strings.
  The `capitalization` attribute allows to specify required capitalization.
- [`@NonNls`](%gh-java-annotations%/common/src/main/java/org/jetbrains/annotations/NonNls.java) - for non-NLS strings
- [`@NlsSafe`](%gh-ic%/platform/util/base/src/com/intellij/openapi/util/NlsSafe.java) - for NLS-safe strings

### NLS Context Annotations

NLS context annotations are semantic annotations describing the context where the annotated strings are intended to be used.
For example, [`@InspectionMessage`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/util/InspectionMessage.java) should be used for strings displayed as messages reported by inspections.

NLS context annotations must be annotated with `@Nls` and they can define:
- capitalization requirement - via `@Nls.capitalization` attribute
- [`@NlsContext`](%gh-ic%/platform/util/src/com/intellij/openapi/util/NlsContext.java) - specifies default prefix and suffix for property keys, which will be suggested by the <control>I18nize hardcoded string literal</control> quick fix provided by <ui-path>Java | Internationalization | Hardcoded strings</ui-path> inspection

The IntelliJ Platform provides NLS context annotations, including:
- general contexts: [`NlsContexts`](%gh-ic%/platform/util/src/com/intellij/openapi/util/NlsContexts.java) nested annotations
- action contexts: [`NlsActions`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/util/NlsActions.java) nested annotations
- miscellaneous contexts:
  [`@InspectionMessage`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/util/InspectionMessage.java),
  [`@IntentionFamilyName`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/util/IntentionFamilyName.java),
  [`@IntentionName`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/util/IntentionName.java),
  [`@GutterName`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/daemon/GutterName.java),
  [`@TooltipTitle`](%gh-ic%/platform/platform-api/src/com/intellij/ide/TooltipTitle.java)

To find all available annotations, search for `@NlsContext` usages in the [intellij-community](https://github.com/JetBrains/intellij-community) source code.

If the provided set of NLS context annotations are not sufficient, create custom annotations.

### A Single NLS Category Restriction

It is important not to use the same string instance for both NLS and non-NLS categories.
If it is required to use some class as a key in configuration files and present it in the UI, create two separate methods (`getId`, `getDisplayName`) even if they return the same value in the default locale.

### Avoiding Non-NLS Strings in Message Bundle

To enable localization, all NLS strings must be placed in [resource bundle](#message-bundles) files.
It is important to avoid adding non-NLS strings to a resource bundle.
At best, this will add unnecessary work for translators, but it is also quite possible that if such a string is translated, it could break some features.

## Message Bundles

All NLS strings from a module should be added to a <path>*.properties</path> file.
A standard location of message files in JAR is <path>/messages/\*.properties</path>.
In [Gradle-based plugin](developing_plugins.md#gradle-plugin) project sources, message files are located in <path>\$MODULE_ROOT\$/src/main/resources/messages/\*.properties</path>.

> A standard convention for naming a message bundle properties file is <path>*Bundle.properties</path>.
>
> If a plugin project is multi-module, and it combines resources into a single JAR, make sure that all bundle files have unique names or paths.
> Otherwise, only the last packed bundle file will exist in the distribution package.
>
{style="warning"}

A corresponding [bundle class](#message-bundle-class) should be used to access the strings from the code.

> Enable <control>Plugin DevKit | Plugin descriptor | Plugin.xml i18n verification</control> inspection for reporting hardcoded texts in [plugin descriptor files](plugin_configuration_file.md).

### Message Bundle Class

The recommended approach to create a bundle class is to delegate getting messages to [`DynamicBundle`](%gh-ic%/platform/core-api/src/com/intellij/DynamicBundle.java), e.g.:

<tabs group="languages">

<tab title="Kotlin" group-key="kotlin">

```kotlin
@NonNls
private const val BUNDLE = "messages.ExampleBundle"

internal object ExampleBundle {
  private val INSTANCE = DynamicBundle(ExampleBundle::class.java, BUNDLE)

  fun message(
      key: @PropertyKey(resourceBundle = BUNDLE) String,
      vararg params: Any
  ): @Nls String {
    return INSTANCE.getMessage(key, *params)
  }

  fun lazyMessage(
      @PropertyKey(resourceBundle = BUNDLE) key: String,
      vararg params: Any
  ): Supplier<@Nls String> {
    return INSTANCE.getLazyMessage(key, *params)
  }
}
```
</tab>
<tab title="Java" group-key="java">

```java
final class ExampleBundle {
  @NonNls
  private static final String BUNDLE = "messages.ExampleBundle";
  private static final DynamicBundle INSTANCE =
      new DynamicBundle(ExampleBundle.class, BUNDLE);

  private ExampleBundle() {}

  public static @NotNull @Nls String message(
      @NotNull @PropertyKey(resourceBundle = BUNDLE) String key,
      Object @NotNull ... params
  ) {
    return INSTANCE.getMessage(key, params);
  }

  public static Supplier<@Nls String> lazyMessage(
      @NotNull @PropertyKey(resourceBundle = BUNDLE) String key,
      Object @NotNull ... params
  ) {
    return INSTANCE.getLazyMessage(key, params);
  }
}
```
</tab>

</tabs>

Do not extend `DynamicBundle` in bundle classes.

Annotating message key parameter with [`@PropertyKey`](%gh-java-annotations%/common/src/main/java/org/jetbrains/annotations/PropertyKey.java) adds the IDE support in the client code, e.g., reporting unresolved message keys.

### Moving Strings to Message Bundles

> Make sure the encoding for bundle files is set to UTF-8 in <ui-path>Settings | Editor | File Encodings | Properties Files (*.properties)</ui-path>.

IntelliJ IDEA provides inspections with fixes which help with moving strings to message bundles, e.g. <ui-path>Editor | Inspections | Java | Internationalization | Hardcoded strings</ui-path> for Java and Kotlin code.

It is possible to move multiple hardcoded strings to a message bundle in batch mode.

<procedure title="Moving Hardcoded Strings to a Message Bundle">

1. Invoke the <ui-path>Code | Analyse Code | Run Inspection by Name...</ui-path> action.
2. Select the <control>Hardcoded strings</control> inspection.
3. Select the inspection scope and run the inspection.
4. In the <control>Problems</control> tool window, select the items to internationalize.
5. Invoke the <control>I18nize hardcoded string literal</control> quick fix.
6. Provide the message bundle file and resource bundle expression.
7. Review the internationalized messages. It is possible to delete items and adjust their keys.
8. Click the <control>OK</control> button.

</procedure>

## Internationalization Tips

### Property Keys

It is important to specify a prefix for the property key describing the context in which UI string is used, especially for short strings.

For example, `set=Set` property is hard to translate as the message usage context is unclear.
It is required to find usages of such a message to properly translate it, which is a very time-consuming process.
Also, other developers may reuse the same property for a different meaning of the word, and after that it will be impossible to translate it correctly.

The simplest way to specify the prefix is annotating the parameter with one of [`@NlsContext` annotations](#nls-context-annotations).
It will cause the IDE to generate prefix and suffix automatically when the string is moved to a message bundle.

### Using `&` in Messages

The `&` symbol in message bundles is used to specify [mnemonic](mnemonics.md) characters for buttons and labels.
To use `&` in a value, escape it by a backslash (note that you also need to escape the backslash symbol):
```
section.title=Drag \\\& Drop
```

### Long Values

To wrap a long value in a message bundle, put a backslash at the end of the line, and continue the value on the next line with an indent.
Starting spaces on the next line are ignored, so if a space character is required before the word in the next line, add a space before the backslash:
```
key=very, very long \
  description
```

In the above example, `message("key")` evaluates to `very, very long description`.

Note that the backslash at the end of a line doesn't add a line break into the resulting value.
For line breaks, use `\n`.

### Avoid Programmatic String Transformations

They include but are not limited to:
- capitalization (e.g., "usage" and "Usage")
- pluralization (e.g., "child" and "children")
- grammatical casing ("das Projekt" and "dem Projekt" - "the project" in German used for different grammatical cases: "the project" and "of the project" accordingly)
- gender-based modification (e.g., "nuevo" and "nueva" - "new" in Spanish used for a masculine and feminine subject accordingly)

Such transformations make the incorrect assumption about:
- existence of a transformation in another language (e.g., there might be no casing in some language)
- rules of transformation in another language (e.g., capitalization rules may differ)
- context of the transformed string (e.g., the same word might be used in different contexts)

In all above cases, it is better to put the result string into the bundle.
Example:

<table>
    <tr>
        <td width="50%">
            <b>Wrong</b>
        </td>
        <td>
            <b>Correct</b>
        </td>
    </tr>
    <tr>
        <td width="50%">
            Message bundle:
            <code-block>
              term.node=node
              ‎
            </code-block>
            Code:
            <code-block lang="java">
              message("term.node")
              pluralize(message("term.node"))
            </code-block>
        </td>
        <td>
            Message bundle:
            <code-block>
              term.node=node
              term.nodes=nodes
            </code-block>
            Code:
            <code-block lang="java">
              message("term.node")
              message("term.nodes")
            </code-block>
        </td>
    </tr>
</table>

### Internationalization of String Concatenations

#### Concatenation of Localized Strings and User Input

If an NLS string is not a simple literal but obtained as a concatenation of several values, always use [MessageFormat](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/MessageFormat.html) pattern to extract it to a message bundle.

For example, to internationalize `"Delete Class " + className` add the following property:
```
title.delete.class=Delete Class {0}
```
and access it with `message("title.delete.class", className)` in the client code.

Patterns should be used even if the changing part of the string is the last or the first element in the concatenation, because this may change when the message is translated to a language with a different grammar.

> Note that single quotes are used for escaping in `MessageFormat` patterns, and to use `'` character it is required to double it: `''`.
>
> For example, below are the correct sentences:
> ```
> # single quote in the value below is not escaped,
> # because MessageFormat pattern is not used:
> checkbox.text.do.not.show.again=Don't show again
>
> # single quote in the value below is escaped,
> # because MessageFormat pattern is used (notice "{0}"):
> error.message.file.does.not.exist=File {0} doesn''t exist
> ```
>
{title="Escaping Single Quotes in MessageFormat Patterns"}

#### Avoid Composing NLS Strings from Parts

If it is required to include a dynamically obtained string in a message, it is necessary to use message patterns as described above.
However, in other cases, it is better to avoid composing NLS strings from smaller parts stored in separate properties:
- the concatenation of words in the sentence incorrectly assumes that the translated sentence will have the same words in the same order and form in other languages
- it is harder to properly translate messages

The following example won't be translated correctly into the languages which use word cases:

English messages:
```
dialog.title.add.0=Add {0}
dialog.title.edit.0=Edit {0}
dialog.title.name.0.1={0} ''{1}''
concept.library=Library
concept.dependency=Dependency
```

Polish translations:
```
dialog.title.add.0=Dodaj {0}
dialog.title.add.0=Edytuj {0}
concept.library=Bibilioteka
concept.dependency=Zależność
```

Correct result:
```kotlin
message("dialog.title.name.0.1", message("concept.library"), "foo")
// Biblioteka 'foo'
```

Wrong result:
```kotlin
message("dialog.title.add.0", message("concept.library"))
// Dodaj Biblioteka
// wrong case and capitalization (correct: "Dodaj bibliotekę")
```

If several localized strings (non-user input) are used to concatenate the string, then the following techniques can be used (in order of preference):
1. Consider reworking the UI to avoid the string concatenation (consult the UX expert if your organization has any, or check [IntelliJ Platform UI Guidelines](ui_guidelines_welcome.topic)).
   - Put string parts into different UI elements.
   - Remove a UI element which shows the concatenated string.
2. Rephrase the string.
   - Use a generic term:
     `"Select " + term + " to preview"` where term is `"usage"` or `"occurrence"` or `"match"` → `"Select result to preview"`.
   - Don't use the term at all:
     `"Preview " + term` → `"Preview"`

     The UI might still need a slight rework to be clear what will be previewed (consult the UX expert if possible).
   - In some cases, it might be correct to use the sentence concatenation:
     ```
     guidelines.browser.tab.name={0} | IntelliJ Platform UI Guidelines
     google.docs.browser.tab.name={0} - Google Docs
     ```
3. Provide the whole string for each context and term pair:
   ```
   dialog.title.add.library=Add Library
   dialog.title.edit.library=Edit Library
   dialog.title.name.library.0=Library ''{0}''
   dialog.title.add.dependency=Add Dependency
   dialog.title.edit.dependency=Edit Dependency
   dialog.title.name.dependency.0=Dependency ''{0}''
   ```
   This approach is the least preferred:
   - Given X terms and Y contexts, it will result in X*Y strings.
     It is acceptable to have several strings for small X and Y.
     For more cases, the translations may become unmaintainable.
   - If plugins provide terms via an extension point, the extension point API would require a change to provide full strings.

#### Messages Depending on Numbers

Sometimes it is required to change a message depending on a number, for example, to pluralize a noun or use a proper form for a verb.
In that case, use ChoiceFormat patterns.

It starts with an index of the argument which will be used for choosing a variant, then the `choice` word follows,
and the rest specifies pairs of numbers and corresponding values separated by `|`.

For example, for pattern:
```
title.selected.files=Selected {0,choice,1#File|2#Files}
```
the expression `message("title.selected.files", count)` will evaluate to:
- `"Selected File"` if `count` is `1` or less
- `"Selected Files"` if `count` is `2` or greater

The number before `#` characters does not specify the exact value but start of the range.
The corresponding variant will be used if the argument is greater or equal to the number in this clause and less than the number in the next clause.
For example, for pattern:
```
label.selected.files={0,choice,0#No files are|1#One file is|2#A few files are|10#Many files are} selected
```
the expression `message("label.selected.files", 6)` will evaluate to `"A few files are selected"`.

If an argument is referred in one of the choice's variants, it becomes a message pattern itself, and this **adds additional layer of escaping of single quotes**, so to add `'` character in such a variant, add: `''''`.
For example, below is the correct sentence:
```
warning.message={0,choice,1#One person doesn''t|2#{0} people don''''t} like MessageFormat
```

In some cases, the ordinal format can be useful.
It adds an appropriate ending to numbers, so it turns into `1st`, `2nd`, `3rd`, `10th`, and so on:
```
parameter.cast.fix=Cast {0,number,ordinal} parameter to {1}
```

### Formatting Non-Textual Values

Different countries and languages display numbers, dates and times, durations, file sizes, and other values, in a localized way.
The IntelliJ Platform provides some utils to display them properly.

#### Date and Time

- [`DateFormatUtil`](%gh-ic%/platform/platform-api/src/com/intellij/util/text/DateFormatUtil.java) ([IDE's locale](providing_translations.md#getting-the-current-locale-programmatically) is supported since 2024.1)
- [`NlsMessages.formatDateLong()`](%gh-ic%/platform/ide-core-impl/src/com/intellij/ide/nls/NlsMessages.java)

#### Durations

- [`NlsMessages.formatDuration()`](%gh-ic%/platform/ide-core-impl/src/com/intellij/ide/nls/NlsMessages.java)

#### File Sizes

- [`Formats.formatFileSize()`](%gh-ic%/platform/util/base/src/com/intellij/openapi/util/text/Formats.java) (the units are not localized and the default JVM locale is used instead of the [IDE's locale](providing_translations.md#getting-the-current-locale-programmatically))

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Project Wizard Tutorial

<link-summary>The Project Wizard Tutorial section overview.</link-summary>

This set of tutorials shows how to manipulate the process of project creation.
Configuring Project Wizard automatically allows you to do the following:

1. [Adding New Steps to Project Wizard](adding_new_steps.md)
2. [Supporting Module Types](module_types.md)

**Note:**

Main utilities to configure a custom project wizard can be found in the package
[lang-api.ide.util.projectWizard](%gh-ic%/platform/lang-api/src/com/intellij/ide/util/projectWizard).
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Key Topics

<link-summary>Overview of IntelliJ Platform key concepts and extension points.</link-summary>

The IntelliJ Platform is extensive and very capable, and its size and scope can initially be very daunting.
This page is intended to list the key topics that a plugin author would be interested in, and provide quick links to the most common extension points.

## Essential Concepts

- [](developing_plugins.md).
- [](testing_plugins.md).
- Component model - the IntelliJ Platform is a component-based application and is responsible for creating components and injecting dependencies.
  Understanding this is necessary for building plugins.
- [Extension Points](plugin_extensions.md) - how to register components with extension points, and how to find out what extension points are available.
- [](virtual_file.md) - all file access should go through the Virtual File System, which abstracts and caches the file system.
  It means you can work with files that are on the local file system, in a zip file or are old versions from version control.

> See also [](glossary.md) for a handy reference of common terms.
>

## Code Model

The IntelliJ Platform's code model is called the PSI - the [Program Structure Interface](psi.md).
The PSI parses code, builds indexes, and creates a semantic model.

## Common Extension Points

The IntelliJ Platform is extremely extensible, and most features and services can be extended.
Some common extension points are:

* [](basic_action_system.md) - menu and toolbar items
* [](code_inspections.md) - code analysis that looks at the syntax trees and semantic models and highlight issues in the editor.
* [](code_intentions.md) - context-specific actions that are available in the <shortcut>Alt+Enter</shortcut> menu when the text caret is at a particular location.
* [](code_completion.md).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Kotlin Coroutines
<primary-label ref="2024.1"/>

<link-summary>Introduction to Kotlin Coroutines in the IntelliJ Platform.</link-summary>

The IntelliJ Platform is a multithreading environment that executes many asynchronous and non-blocking tasks to avoid UI freezes.
These tasks are usually executed in background threads, which is a standard approach in the JVM world.

Since version 1.1, [Kotlin](using_kotlin.md) has introduced coroutines as a lightweight and easy to implement alternative to threads.
The IntelliJ Platform started adapting coroutines in its APIs and internal code, and since 2024.1 it is recommended to use the coroutines approach over threads.

> Plugins _must_ use the bundled Kotlin Coroutines library, see [](using_kotlin.md#coroutinesLibraries).
>
{style="warning"}

### Coroutines Advantages

The reason for coroutines being lightweight is the fact that they aren't bound to OS native threads, as opposed to the JVM threads.
It enables much less memory consumption and cheaper context switching, which makes the platform and plugins more performant.
For example, it is straightforward to run 100.000 coroutines on a standard computer, which is not possible with threads as it would cause `OutOfMemoryError`.

Besides performance, there are more advantages of using coroutines:
- Coroutines greatly simplify the way of writing non-blocking code.
  What was usually implemented with hard to understand, implement, and maintain callbacks, with coroutines looks like regular sequential/imperative code.
- Coroutines allow for implementing structured concurrency (coroutines can spawn child coroutines), which allows for easily managing the lifecycle of concurrent tasks and error handling.
  For example, cancelling a parent coroutine automatically cancels all child coroutines.
- It is trivial to switch execution of the code parts between UI and background threads.

[//]: # (TODO: add links to the specific topics when ready)

### Java Interoperability

Coroutines provide very limited Java interoperability, and coroutine-based APIs can’t be used to the full extent from Java code.

Kotlin Coroutines are new to the IntelliJ Platform and aren't yet widely adopted in public APIs.
In the future, the number of coroutine-based APIs will grow, and using only Java may not be enough to implement a fully functional plugin.
It will be required to use [Kotlin](using_kotlin.md), at least partially, for example, to implement coroutine-based [extension points](plugin_extension_points.md).

## Learning Resources

Before going to the next coroutine-related sections, it is highly recommended to go through the following resources.
It will help understand coroutines and become fluent with available APIs:

- [Official Kotlin Coroutines Guide](https://kotlinlang.org/docs/coroutines-guide.html)
- KotlinConf talks by Roman Elizarov (Kotlin Coroutines architect):
  - [Introduction to Coroutines](https://www.youtube.com/watch?v=_hfBv0a09Jc)
  - [Deep Dive into Coroutines on JVM](https://www.youtube.com/watch?v=YrrUCSi72E8)
  - [Coroutines in Practice](https://www.youtube.com/watch?v=a3agLJQ6vt8)
  - [Asynchronous Data Streams with Flow](https://www.youtube.com/watch?v=tYcqn48SMT8)

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Kotlin UI DSL Version 1
<primary-label ref="Deprecated"/>

<link-summary>Kotlin DSL for creating UI forms with input components bound to state object.</link-summary>

<tldr>

**UI Guidelines:** [](layout.md)

</tldr>

> When targeting IntelliJ Platform 2021.3 and later only use [](kotlin_ui_dsl_version_2.md).
>
> **The version documented on this page is deprecated and will be removed in future platform releases.**
>
> Please note [breaking changes](api_changes_list.md) can occur for this API between major releases.
>
{style="warning" title="Kotlin UI SDL Version 1 vs 2"}

Kotlin UI DSL allows creating UI forms with input components bound to state objects.
The forms are built by using a declarative Kotlin syntax.
It shares similarities with [Jetpack Compose](https://developer.android.com/jetpack/compose) for Android and is intended to build UI forms or part of forms for, e.g. dialogs and settings pages.

The Kotlin UI DSL is not intended to build general UIs, like tool windows controls that trigger some actions and do not contain any input components bound to state objects.
For this purpose, use [custom Swing components](user_interface_components.md) from the IntelliJ Platform or the standard ones.

This document covers the Kotlin UI DSL in IntelliJ Platform 2019.2.
 A lot of the features described in this document are not available for plugins targeting earlier versions.

The _Kotlin UI DSL Version 1_ functions are located in the [`com.intellij.ui.layout`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/layout) package.

## Layout Structure

> See [](layout.md) topic in UI Guidelines for recommendations on arranging UI controls in dialogs.
>

Use [`panel`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/layout/layout.kt) to create UI:

```kotlin
panel {
  row {
    // child components
  }
}
```

Rows are created vertically from top to bottom, in the same order as lines of code that call `row`.
Inside one row, you add components from left to right in the same order calls to factory method or `()` appear in each row.
Every component is effectively placed in its own grid cell.

The label for the row can be specified as a parameter for the `row` method:

```kotlin
row("Parameters") { ... }
```

Rows can be nested.
Components in a nested row block are considered to be subordinate to the containing row and are indented accordingly.

```kotlin
row {
  checkBox(...)
  row {
    textField(...) // indented relatively to the checkbox above
  }
}
```

To put multiple components in the same grid cell, wrap them in a `cell` method:

```kotlin
row {
  // These two components will occupy two columns in the grid
  label(...)
  textField(...)

  // These two components will be placed in the same grid cell
  cell {
    label(...)
    textField(...)
  }
}
```

To put a component on the right side of a grid row, use the `right` method:

```kotlin
row {
  rememberCheckBox()
  right {
    link("Forgot password")
  }
}
```

> To visually debug layout, enable <control>UI DSL Debug Mode</control> from [Internal Actions - UI Submenu](internal_ui_sub.md).
>

## Adding Components

There are two ways to add child components.
The recommended way is to use factory methods `label`, `button`, `radioButton`, `link`, etc.
It allows you to create consistent UI and reuse common patterns.

These methods also support **property bindings**, allowing you to automatically load the value displayed in the component from a property and to store it back.
The easiest way to do that is to pass a reference to a Kotlin bound property:

```kotlin
checkBox("Show tabs in single row", uiSettings::scrollTabLayoutInEditor)
```

Note that the bound property reference syntax also can be used to reference Java fields, but not getter/setter pairs.

Alternatively, many factory methods support specifying a getter/setter pair for cases when a property mapping is more complicated:

```kotlin
checkBox(
  "Show file extensions in editor tabs",
  { !uiSettings.hideKnownExtensionInTabs },
  { uiSettings.hideKnownExtensionInTabs = !it })
```

If you want to add a component for which there are no factory methods, you can simply invoke an instance of your component, using the `()` overloaded operator:

```kotlin
val customComponent = MyCustomComponent()
panel {
  row { customComponent() }
}
```

## Supported Components

### Labels

Use the `label` method:

```kotlin
label("Sample text")
```

### Checkboxes

See examples above.

### Radio Buttons

Radio button groups are created using the `buttonGroup` block.
There are two ways to use it.
If the selected radio button corresponds to a specific value of a single property, pass the property binding to the `buttonGroup` method and the specific values to `radioButton` functions:

```kotlin
buttonGroup(mySettings::providerType) {
  row { radioButton("In native Keychain", ProviderType.KEYCHAIN) }
  row { radioButton("In KeePass", ProviderType.KEEPASS) }
}
```

If the selected radio button is controlled by multiple boolean properties, use `buttonGroup` with no binding and specify property bindings for all but one of the radio buttons:

```kotlin
buttonGroup {
  row { radioButton("The tab on the left") }
  row { radioButton("The tab on the right", uiSettings::activeRightEditorOnClose) }
  row { radioButton("Most recently opened tab", uiSettings::activeMruEditorOnClose) }
}
```

### Text Fields

Use the `textField` method for a simple text field:

```kotlin
row("Username:") {
    textField(settings::userName)
}
```

For entering numbers, use `intTextField`:

```kotlin
intTextField(uiSettings::editorTabLimit, columns = 4, range = EDITOR_TABS_RANGE)
```

For password text fields, there is no factory function available, so you need to use `()`:

```kotlin
val passwordField = JPasswordField()
val panel = panel {
  // ...
  row { passwordField() }
}
```

To specify the size of a text field, either pass the `columns` parameter as shown in the `intTextField` example above, or use `growPolicy()`:

```kotlin
val userField = JTextField(credentials?.userName)
val panel = panel {
  row("Username:") { userField().growPolicy(GrowPolicy.SHORT_TEXT) }
}
```

### Combo Boxes

Use the `comboBox` method with either a bound property, or a getter/setter pair:

```kotlin
comboBox(DefaultComboBoxModel<Int>(tabPlacements), uiSettings::editorTabPlacement)

comboBox<PgpKey>(
  pgpListModel,
  { getSelectedPgpKey() ?: pgpListModel.items.firstOrNull() },
  { mySettings.state.pgpKeyId = if (usePgpKey.isSelected) it?.keyId else null })
```

### Spinners

Use the `spinner` method:

```kotlin
spinner(retypeOptions::retypeDelay, minValue = 0, maxValue = 5000, step = 50)
```

### Link Label

Use the `link` method:

```kotlin
link("Forgot password?") {
  // handle click, e.g. showing dialog
}
```

To open URL in the browser, use `browserLink`:

```kotlin
browserLink("Open Homepage", "https://www.jetbrains.com")
```

### Separators

Use the `titledRow` method and put the controls under the separator into the nested block:

```kotlin
titledRow("Appearance") {
  row { checkBox(...) }
}
```

### Explanatory Text

Use the `comment` parameter:

```kotlin
checkBox(message("checkbox.smart.tab.reuse"),
       uiSettings::reuseNotModifiedTabs,
       comment = message("checkbox.smart.tab.reuse.inline.help"))
```

## Integrating Panels with Property Bindings

A panel returned by the `panel` method is an instance of [`DialogPanel`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/DialogPanel.kt).
This base class supports the standard `apply()`, `reset()`, and `isModified()` methods.

### Dialogs

**Reference**: [DialogWrapper](dialog_wrapper.md)

If you're using a [`DialogPanel`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/DialogPanel.kt) as the main panel of a `DialogWrapper`, the `apply()` method will be automatically called when the dialog is closed using <control>OK</control> action.
The other methods are unused in this case.

Use the `focused()` method to specify which control should be focused when the dialog is initialized:

```kotlin
return panel {
  row("Target class name:") {
    textField(::className).focused()
  }
}
```

### Configurables

**Reference**: [Settings Guide](settings_guide.md)

If you're using the UI DSL to implement a [`Configurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/Configurable.java), use [`BoundConfigurable`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/options/BoundConfigurable.kt) as the base class.
In this case, the `Configurable` methods will be automatically delegated to the panel.

## Enabling and Disabling Controls

Use the `enableIf` method to bind the enabled state of a control to the values entered in other controls.
The parameter of the method is a **predicate**.

```kotlin
checkBox("Show tabs in single row", uiSettings::scrollTabLayoutInEditor)
  .enableIf(myEditorTabPlacement.selectedValueIs(SwingConstants.TOP))
```

The available predicates are:
* `selected` to check the selected state of a checkbox or radio button
* `selectedValueIs` and `selectedValueMatches` to check the selected item in a combo box.

Predicates can be combined with `and` and `or` infix functions:

```kotlin
checkBox("Hide tabs if there is no space", uiSettings::hideTabsIfNeed)
  .enableIf(myEditorTabPlacement.selectedValueMatches { it != UISettings.TABS_NONE } and
              myScrollTabLayoutInEditorCheckBox.selected)
```

## Examples

Sample usages in IntelliJ Platform IDEs:

| User Interface                                                                                                                | Implementation                                                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------|
| <ui-path>Settings &#124; Editor &#124; Reader Mode</ui-path>                                                                  | [`ReaderModeConfigurable`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/actions/ReaderModeConfigurable.kt)            |
| <control>New Branch</control> dialog in Git ([Manage Git branches](https://www.jetbrains.com/help/idea/manage-branches.html)) | [`GitNewBranchDialog`](%gh-ic%/plugins/git4idea/src/git4idea/branch/GitNewBranchDialog.kt)                                       |
| <ui-path>Settings &#124; Tools &#124; Diff & Merge</ui-path>                                                                  | [`DiffSettingsConfigurable`](%gh-ic%/platform/diff-impl/src/com/intellij/diff/settings/DiffSettingsConfigurable.kt)              |
| <ui-path>Settings &#124; Editor &#124; General &#124; Editor Tabs</ui-path>                                                   | [`EditorTabsConfigurable`](%gh-ic%/platform/platform-impl/src/com/intellij/application/options/editor/EditorTabsConfigurable.kt) |

<include from="kotlin_ui_dsl_version_2.md" element-id="ui_inspector_added_at"></include>

## FAQ

### One Cell Is Minimum, Second One Is Maximum

Set `CCFlags.growX` and `CCFlags.pushX` for some component in the second cell.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Kotlin UI DSL Version 2
<primary-label ref="2021.3"/>

<link-summary>Kotlin DSL for creating UI forms with input components bound to a state object.</link-summary>

<tldr>

**UI Guidelines:** [](layout.md)

</tldr>

> This page describes API available in IntelliJ Platform releases **2021.3 and later** only.
>
> See [](kotlin_ui_dsl.md) for targeting earlier releases.
>

Kotlin UI DSL Version 2 allows creating UI forms with input components bound to state objects.
The forms are built by using a declarative Kotlin syntax and follow the official IntelliJ Platform UI conventions described in the [](ui_guidelines_welcome.topic).
The library is written in [Kotlin](using_kotlin.md) and makes it easy to develop user interfaces like [dialogs](dialog_wrapper.md) and [settings pages](settings.md).

The Kotlin UI DSL is not intended to build general UIs, like [tool windows](tool_window.md) controls that trigger some actions and do not contain any input components bound to state objects.
For this purpose, use [custom Swing components](user_interface_components.md) from the IntelliJ Platform or the standard ones.

The _Kotlin UI DSL Version 2_ functions are located in the [`com.intellij.ui.dsl.builder`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/dsl/builder) package.

## UI DSL Examples

It is highly recommended to take a look at the UI DSL demo available via <ui-path>Tools | Internal Actions | UI | UI DSL Showcase</ui-path> (see [Internal Actions](internal_actions_intro.md) if not available in your IDE instance).

It describes some UI DSL basics and contains explanations, tips, a list of all available components, and many examples with links to the source code.

> All sections below refer to the relevant tab available in this demo:
>
> **UI DSL Showcase Tab**: _Tab Name_ (Link to sources of demonstration tab)
>

<snippet id="ui_inspector_added_at">

> To understand how a component visible in the IDE is created in code, see the component's [`added-at` property in the UI Inspector](internal_ui_inspector.md#added-at-property).
> Note that it is not limited only to components created with Kotlin UI DSL, but helps to understand the creation of any visible Swing component.
>

</snippet>

## UI DSL Basics

**UI DSL Showcase Tab**: Basics (Sources: [`DemoBasics`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoBasics.kt))

See the following simple example of UI DSL:

```kotlin
panel {
  row("Enter value:") {
    textField()
  }
}
```

Building content of any form starts from `panel {` which returns [`DialogPanel`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/DialogPanel.kt) filled with components described inside the panel block.
A panel consists of any number of rows marked with `row` tag created vertically from top to bottom.

Every row consists of cells where the last cell in a row occupies the remaining width.
Inside one row, cells are added from left to right in the same order calls to factory methods or `cell()` appear in each row.
Cells can contain one component or a sub-panel.

If there are unoccupied cells at the end of a row, they are merged into one cell with the last non-empty cell.

## `Panel`

[`Panel`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/dsl/builder/Panel.kt) is the start interface for building content.
It can consist of several rows and different UI groups.

### `Panel.row`

Adds row with the label if present.

### `Panel.indent`

**UI DSL Showcase Tab**: Gaps (Sources: [`DemoGaps`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoGaps.kt))

Adds standard left indent:

```kotlin
row {
  label("Not indented row")
}
indent {
  row {
    label("Indented row")
  }
}
```

### `Panel.separator`

**UI DSL Showcase Tab**: Groups (Sources: [`DemoGroups`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoGroups.kt))

Adds horizontal line separator with an optional title.

### `Panel.panel`

Creates a sub-panel that occupies the whole width and uses its own grid inside.

### `Panel.rowsRange`

Creates a grouped rows range to perform operations on them like `enabled`, `enabledIf` etc.
All rows use the parent grid.

### `Panel.group`

**UI DSL Showcase Tab**: Groups (Sources: [`DemoGroups`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoGroups.kt))

Adds a panel with an independent grid, optional title, and some vertical space above and below the group.

```kotlin
group("Title") {
  row("Row:") {
    textField()
  }
}
```

### `Panel.groupRowsRange`

Similar to `Panel.group()` method but uses the same grid as the parent.

### `Panel.collapsibleGroup`

**UI DSL Showcase Tab**: Groups (Sources: [`DemoGroups`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoGroups.kt))

Adds a collapsible panel with independent grid, title, and some vertical space above and below the group.

```kotlin
collapsibleGroup("Title") {
  row("Row:") {
    textField()
  }
}
```

### `Panel.buttonsGroup`

**UI DSL Showcase Tab**: Groups (Sources: [`DemoGroups`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoGroups.kt))

Unions `Row.radioButton` in one group.
Must also be used for `Row.checkBox` if these are grouped with a title.

```kotlin
var value = true
buttonsGroup("Panel.buttonsGroup:") {
 row {
  radioButton("true", true)
 }
 row {
  radioButton("false", false)
 }
}.bind({ value }, { value = it })
```

### `Panel.onApply`/`onReset`/`onIsModified`

Registers callbacks that will be called from `DialogPanel.apply()`/`reset()`/`isModified()` methods.

## `Row`

Every row is represented by the [`Row`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/dsl/builder/Row.kt) interface.
It contains all available factory methods for creating components (like `button()`, `label()`, `textField()`, etc.) and methods for row configuration.

### `Row.layout`

**UI DSL Showcase Tab**: Row Layout (Sources: [`DemoRowLayout`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoRowLayout.kt))

There are three possible layouts:
- `INDEPENDENT`: all cells of the row (including label if present) independent of the parent grid.
  That means this row has its own grid.
- `LABEL_ALIGNED`: label is aligned with the parent grid, other components independent of the parent grid.
- `PARENT_GRID`: all components, including label (if present), are in the parent grid.

The default value is `LABEL_ALIGNED` when a label is provided for the row, `INDEPENDENT` otherwise.

```kotlin
row("Label:") {
  textField()
}
row("Long label:") {
  textField()
}
```

Here both labels are aligned together because rows have `LABEL_ALIGNED` by default.
If an independent layout is needed, then `INDEPENDENT` layout should be used:

```kotlin
row("Long label:") {
  textField()
}.layout(RowLayout.INDEPENDENT)
```

### `Row.resizableRow`

The row becomes resizable and occupies all vertical free space.
For several resizable rows, extra free space is divided between rows equally.

### `Row.rowComment`

**UI DSL Showcase Tab**: Comments (Sources: [`DemoComments`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoComments.kt))

Adds comment after the row with an appropriate color and font.
Visibility and enabled state of the row affects row comment as well.

### `Row.cell`

Adds `component`.
Use it only for custom specific components, all standard components like `label()`, `button()`, `checkbox()` etc. are covered by dedicated [`Row`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/dsl/builder/Row.kt) factory methods.

For example, there is no method for password field so that the following code can be used:

```kotlin
val passwordField = JPasswordField()
row {
  cell(passwordField)
}
```

### `Row.scrollCell(component)`

Adds `component` wrapped with [`JBScrollPane`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/JBScrollPane.java).

### `Row.topGap`/`bottomGap`

Adds a gap above/below the current row.
It is visible together with the row.
By default, `NONE` is used.
Between unrelated settings, `SMALL` can be used.
`MEDIUM` is used between groups and usually set automatically by `group()` method and similar ones.

### `Row.visible`/`enabled`

**UI DSL Showcase Tab**: Enabled/Visible (Sources: [`DemoAvailability`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoAvailability.kt))

Sets visibility/enabled state of the row, including row comment (see `Row.rowComment`) and all children recursively.
The row is invisible/disabled if there is an invisible/disabled parent.

### `Row.visibleIf`/`enabledIf`

**UI DSL Showcase Tab**: Enabled/Visible (Sources: [`DemoAvailability`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoAvailability.kt))

Binds row visibility/enabled state to the provided predicate.
Below is an example of a checkbox whose enabled state depends on another checkbox:

```kotlin
lateinit var checkBox: Cell<JBCheckBox>
row {
  checkBox = checkBox("Check to enable option")
}
row {
  checkBox("Option 1")
}.enabledIf(checkBox.selected)
```

### `Row.panel`

**UI DSL Showcase Tab**: Groups (Sources: [`DemoGroups`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoGroups.kt))

Creates a sub-panel inside the cell of the row.
The panel contains its own set of rows and cells.
For example, it is possible to create several columns by creating a row with several panels inside.

## `Cell`

Every component in the UI DSL builder is wrapped into [`Cell`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/dsl/builder/Cell.kt) class.
Standard components should not be created directly but with factory methods from [`Row`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/dsl/builder/Row.kt) class like `checkBox()`, `button()` and others because of additional functionality, e.g., `textField()` is configured with the column's width, radio buttons are placed into radio buttons groups.

### `Cell.component`

`JComponent` that occupies the cell.

### `Cell.horizontalAlign`/`verticalAlign`
{#cell-horizontalVerticalAlign}

> Deprecated in 2022.3, use [](#cell-align) instead.

Sets horizontal/vertical alignment of content inside the cell.

```kotlin
row("Row:") {
  textField()
    .horizontalAlign(HorizontalAlign.FILL)
}
```

### `Cell.align`
{#cell-align}

_2022.3_

Updates horizontal and/or vertical alignment of the component inside the cell.
Default alignment is `AlignX.LEFT` and `AlignY.CENTER`.

To stretch the content on whole cell, use `AlignX.FILL`/`AlignY.FILL`/`Align.FILL`.
For setting both horizontal and vertical alignment, use `Align` constants or overloaded plug operator
like `align(AlignX.LEFT + AlignY.TOP)`.

```kotlin
row("Row:") {
  textField()
    .align(AlignX.FILL)
}
```

### `Cell.resizableColumn`

**UI DSL Showcase Tab**: Tips (Sources: [`DemoTips`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoTips.kt))

Marks column of the cell as resizable: the column occupies all extra horizontal space in the panel and changes size together with the panel.
It's possible to have several resizable columns, which means extra space is shared between them.
There is no need to set resizable for cells in different rows, but in the same column: it has no additional effect.
Note that the size and placement of components in columns are managed by [](#cell-align) ([](#cell-horizontalVerticalAlign) for pre-2022.3).

```kotlin
row("Row") {
  textField()
    .resizableColumn()
  link("Config...") {}
}
```

### `Cell.gap`

**UI DSL Showcase Tab**: Gaps (Sources: [`DemoGaps`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoGaps.kt))

Separates the next cell in the current row with `rightGap`.
`RightGap.SMALL` gap is set after row label automatically by `Panel.row()` methods.

Below are some cases where `RightGap.SMALL` should be used:

```kotlin
row {
  val checkBox = checkBox("Use mail:")
                  .gap(RightGap.SMALL)
  textField()
}
row("Width:") {
  textField()
    .gap(RightGap.SMALL)
  label("pixels")
}
```

### `Cell.visible`/`enabled`

**UI DSL Showcase Tab**: Enabled/Visible (Sources: [`DemoAvailability`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoAvailability.kt))

Sets visibility/enabled state of the cell and all children recursively.
The cell is invisible/disabled if there is an invisible/disabled parent.

### `Cell.visibleIf`/`enabledIf`

**UI DSL Showcase Tab**: Enabled/Visible (Sources: [`DemoAvailability`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoAvailability.kt))

Binds cell visibility/enabled state to the provided predicate.

```kotlin
row {
  val mailCheckBox = checkBox("Use mail:")
                      .gap(RightGap.SMALL)
  textField()
    .enabledIf(mailCheckBox.selected)
}
```

### `Cell.comment`

**UI DSL Showcase Tab**: Comments (Sources: [`DemoComments`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoComments.kt))

Adds comment under the cell aligned by left edge with an appropriate color and font size (macOS uses smaller font).
Comment can contain HTML tags except `<html>`, which is added automatically.
The comment occupies the available width before the following comment (if present) or the whole remaining width.
Visibility and enabled state of the cell affect comment as well.

```kotlin
row("Label:") {
  textField()
    .comment("Comment for textField")
}
```

### `Cell.label`

**UI DSL Showcase Tab**: Components Labels (Sources: [`DemoComponentLabels`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoComponentLabels.kt))

Adds label at the specified position.
`LabelPosition.TOP` labels occupy available width before the next top label (if present) or the whole remaining width.
Visibility and enabled state of the cell affect the label as well.

```kotlin
row {
  textField()
    .label("Cell label on top:", LabelPosition.TOP)
}
```

### `Cell.onApply`/`onReset`/`onIsModified`

Registers callbacks that will be called for the component from `DialogPanel.apply()`/`reset()`/`isModified()` methods.

## Placeholder

Used as a reserved cell in the layout.
It can be created by `Row.placeholder()` method and populated by content later via component property or reset to `null`.

## Bindings

It is possible to bind component values to properties with the following methods.

### `Cell.graphProperty`

> Removed in 2023.3, use `validationRequestor(property::afterPropagation)` instead.

Binds `component` value changing to property.
The property is updated when the value is changed and is not related to `DialogPanel.apply()`.
The method is rarely used directly.
There are many extensions for specific components described in [](#cellbind).

### `Cell.bind`

**UI DSL Showcase Tab**: Binding (Sources: [`DemoBinding`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/ui/uiDslShowcase/DemoBinding.kt))

Binds `component` value provided by `componentGet` and `componentSet` methods to the specified binding property.
The property is applied only when `DialogPanel.apply()` is invoked.
Methods `DialogPanel.isModified()` and `DialogPanel.reset()` are also supported automatically for bound properties.

The `bind()` method is rarely used directly.
There are many extensions for specific components, see the following example:

```kotlin
row {
  checkBox("Checkbox")
    .bindSelected(model::checkbox)
}
row("textField:") {
  textField()
    .bindText(model::textField)
}
row("intTextField(0..100):") {
  intTextField()
    .bindIntText(model::intTextField)
}
row("comboBox:") {
  comboBox(Color.values())
    .bindItem(model::comboBoxColor)
}
row("slider:") {
  slider(0, 100, 10, 50)
    .bindValue(model::slider)
}
row("spinner:") {
  spinner(0..100)
    .bindIntValue(model::spinner)
}
buttonsGroup(title = "radioButton:") {
 for (value in Color.values()) {
  row {
   radioButton(value.name, value)
  }
 }
}.bind(model::radioButtonColor)
```

## Version 1 and 2 Comparison

In UI DSL version 2, some crucial problems from version 1 have been fixed, so porting is highly desirable.
See [](#migration-from-version-1) on how to port existing UI DSL code from version 1 to version 2 API.
Version 1 is deprecated and will be removed in future platform releases.

The following significant changes were made:

- Reduced API, which allows conceiving API easier and faster.
  Example: there were 5 overloaded methods `Cell.checkBox()` in version 1, now only one method remains.
  Functionality for binding properties is extracted into `Cell<T>.bindSelected()` methods.
- UI DSL became stricter, so the available API in every context is much smaller.
  Example: code like `row { row {` is forbidden now.
- Structured API is mostly based on interfaces, because it's easier to learn API by grouped methods.
  Only a small part of the API is implemented as extensions.
- KDoc is widely used.
- MIG layout is fully removed from the new UI DSL and replaced by `GridLayout`.
  Because MIG layout is an external library, it's hard to fix bugs there (e.g., there are layout problems when components become invisible) and extend its functionality.
  Fixed focus ring cropping problems: when components are placed near the panel border focus ring could be cropped if panel insets do not specify enough space.
- Implemented [Placeholder](#placeholder) that allows replacing components at runtime after content is shown.

### Migration from Version 1

The new API is very similar to the old one and covers almost all functionality now, so moving to the new version can be done quickly.

Version 1 is placed in `com.intellij.ui.layout` package.

Version 2 is placed in `com.intellij.ui.dsl.builder` package.

<procedure title="Migration Steps">

1. Having a screenshot or live version of the initial components layout can help
2. Remove imports of old UI DSL starting with `com.intellij.ui.layout`
3. Go to the place where the panel is created and import new UI DSL `com.intellij.ui.dsl.builder` suggested by IntelliJ IDEA
4. Update non-compilable code, using the following table

</procedure>

| Version 1                                         | Version 2                                                             |
|---------------------------------------------------|-----------------------------------------------------------------------|
| `row { row {`                                     | `indent { row {`                                                      |
| `row { cell(isFullWidth = true)`                  | `row {`                                                               |
| `fullRow {`                                       | `row {`                                                               |
| `titledRow(…) {`                                  | `group(…) {`                                                          |
| `hideableRow`                                     | `collapsibleGroup`                                                    |
| `cell` used as sub-grid                           | `row { panel { … } }`                                                 |
| `component(…)` or its invocation via `()`         | `cell(…)`                                                             |
| `enableIf`                                        | `enabledIf`                                                           |
| `checkBox(text, bindOptions)`                     | `checkBox(text).bindSelected(bindOptions)`                            |
| `radioButton(text, bindOptions)`                  | `radioButton(text).bindSelected(bindOptions)`                         |
| `comboBox(…, bindOptions)`                        | `comboBox(text).bindItem(bindOptions)`                                |
| `textField(bindOptions, columns)`                 | `textField().bindText(bindOptions).columns(columns)`                  |
| `scrollableTextArea(bindOptions, rows, columns)`  | `textArea().bindText(bindOptions).rows(rows).columns(columns)`        |
| `intTextField(bindOptions, columns, range, step)` | `intTextField(range, step).bindIntText(bindOptions).columns(columns)` |
| `textFieldWithBrowseButton(bindOptions, …)`       | `textFieldWithBrowseButton(…).bindText(bindOptions)`                  |
| `.growPolicy(GrowPolicy.COLUMNS_SHORT)`           | `.columns(SHORT_TEXT)`                                                |
| `.growPolicy(GrowPolicy.MEDIUM_TEXT)`             | `.columns(COLUMNS_MEDIUM)`                                            |
| `label(…, bold = true)`                           | `label(…).bold()`                                                     |
| `withLeftGap()`                                   | For previous left cell use `Cell.gap(SMALL)`                          |
| `withLeftGap(gapLeft)`                            | Please do not use custom gaps if possible                             |
| `withLargeLeftGap()`                              | Not needed, this gap is set by default                                |
| `withValidationOnInput`                           | `validationOnInput`                                                   |
| `withValidationOnApply`                           | `validationOnApply`                                                   |
| `withErrorOnApplyIf`                              | `errorOnApply`                                                        |
| `withBinding`                                     | `bind`                                                                |
<!-- Copyright 2000-2025 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 2. Language and File Type

<link-summary>Sample implementation of Simple language and file type definitions.</link-summary>

<tldr>

**Reference**: [](registering_file_type.md)

**Code**: [`SimpleLanguage`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleLanguage.java),
[`SimpleIcons`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleIcons.java),
[`SimpleFileType`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleFileType.java)

</tldr>

<snippet id="custom_language_tutorial_header">

> This page is part of multi-step [](custom_language_support_tutorial.md).
> All previous steps must be executed in sequence for the code to work.

</snippet>

The IntelliJ Platform determines file type by examining the name of a file.
Each language has [Language](%gh-ic%/platform/core-api/src/com/intellij/lang/Language.java) and [LanguageFileType](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileTypes/LanguageFileType.java) objects defining the language.
Register the `LanguageFileType` with the IntelliJ Platform in the plugin configuration file.

## Define the Language

The language implemented in this tutorial is named "Simple" - note the case of the name.
The [`SimpleLanguage`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleLanguage.java) class is defined in the `org.intellij.sdk.language` package of the `simple_language_plugin` code sample:

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleLanguage.java" include-symbol="SimpleLanguage"}

## Define an Icon

The [icon](%gh-sdk-samples-master%/simple_language_plugin/src/main/resources/icons/jar-gray.png) for the Simple Language is defined by the
[`SimpleIcons`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleIcons.java) class.
Please see [](icons.md) for details on how to define and use icons.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleIcons.java" include-symbol="SimpleIcons"}

## Define a File Type

The [`SimpleFileType`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleFileType.java) is defined by subclassing [`LanguageFileType`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileTypes/LanguageFileType.java):

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleFileType.java" include-symbol="SimpleFileType"}

## Register the File Type

The Simple Language file type is registered via the `com.intellij.fileType` extension point in <path>[plugin.xml](plugin_configuration_file.md)</path> and registered with <path>*.simple</path> extension:

```xml
<extensions defaultExtensionNs="com.intellij">
  <fileType
      name="Simple File"
      implementationClass="org.intellij.sdk.language.SimpleFileType"
      fieldName="INSTANCE"
      language="Simple"
      extensions="simple"/>
</extensions>
```

## Run the Project

Run the plugin by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

Create an empty file with the extension <path>.simple</path>, and IntelliJ IDEA automatically associates it with our language.
Note the appearance of the Simple Language file icon next to the <path>test.simple</path> file in the <control>Project</control> Tool Window, and the editor tab for the file.

![File Type Factory](file_type_factory.png){width="800"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Language Injection

<link-summary>Injecting a language into different language elements.</link-summary>

<tldr>

**Product Help:** [Language injections](https://www.jetbrains.com/help/idea/language-injections-settings.html)

</tldr>

Language injection is the way the IntelliJ Platform handles different languages within the same source file.
Well-known examples are:

* Regular expressions in Java string literals
* SQL queries in Java string literals
* Fenced code blocks within Markdown files

Injected code is always bound to a specific context that depends on the surrounding code, and the IntelliJ Platform treats injected fragments as separate small files that are in a different language.
To ensure highlighting and code-insight features work correctly, these fragments must be a valid statement or expression in the injected language.
The three examples from above would then be shown like this in IntelliJ IDEs:

<tabs>
<tab title="Regex">

![Regex Language Injection](regex_language_injection.png){border-effect="line"}

</tab>
<tab title="SQL">

![SQL Language Injection](sql_language_injection.png){border-effect="line"}

</tab>
<tab title="Markdown">

![Markdown Language Injection](markdown_code_language_injection.png){border-effect="line"}

</tab>
</tabs>

It's not unusual that injected fragments are distributed among, e.g., several strings that are concatenated like it is common for SQL queries.
To solve this, the IntelliJ Platform allows injecting a language into several fragments at once.
Multiple parts are then considered belonging together.

As a plugin author, you can provide language injection in different ways:

* For simple cases, the bundled [IntelliLang plugin](https://plugins.jetbrains.com/plugin/13374-intellilang) can handle injections,
  and plugin authors need to provide a configuration with patterns that specify the context where languages should be injected.
  IntelliLang can also be extended to support unknown custom languages.
* Implementing the `com.intellij.languageInjectionContributor` extension point (EP) provides a high-level API for the injection of other languages.
  For more control over how a language is injected, plugin authors use the `com.intellij.languageInjectionPerformer` EP.
* Implementing the `com.intellij.multiHostInjector` EP gives plugin authors the most control over where and how language injection will take place.

In the following sections, we'll discuss these three options in more detail.

## IntelliLang

First, please read the available [documentation](https://www.jetbrains.com/help/idea/language-injections-settings.html) on IntelliLang.
A good point to start with is to inspect available language injections that you can find in the IntelliLang settings under <ui-path>Settings | Editor | Language Injections</ui-path>.
The injections shown are configured through XML files and loaded automatically.

### Example

Let's take a look at the Java `String.matches()` method that injects the RegExp language into the string of the first argument.
In the IntelliLang settings, it is defined as one possible injection in Java code.

![Language Injection Settings](language_injection_settings.png){border-effect="line"}

Double-clicking on this entry shows the exact context where a RegExp can be injected, and `String.matches()` is one of several possibilities.
On the plugin side, these entries are defined in the file [`javaInjections.xml`](%gh-ic%/plugins/IntelliLang/java-support/resources/javaInjections.xml):

```xml
<injection language="RegExp" injector-id="java">
  <display-name>String (java.lang)</display-name>
  ...
  <place><![CDATA[
    psiParameter()
      .ofMethod(0, psiMethod().withName("matches")
      .withParameters("java.lang.String")
      .definedInClass("java.lang.String"))
  ]]></place>
</injection>
```

The XML file with the injection configurations is loaded through the `org.intellij.intelliLang.injectionConfig` EP in the file
[`intellilang-java-support.xml`](%gh-ic%/plugins/IntelliLang/resources/META-INF/intellilang-java-support.xml).

```xml
<extensions defaultExtensionNs="org.intellij.intelliLang">
  <languageSupport
      implementation="org.intellij.plugins.intelliLang.inject.java.JavaLanguageInjectionSupport"/>
  <injectionConfig config="resources/javaInjections.xml"/>
</extensions>
```

### Implementation

It is important to make a distinction between plugin authors who want to provide injections into existing languages and plugin authors who want to provide support for IntelliLang injections in their custom language.
Both define their injections by providing XML configurations and loading them through the <path>[plugin.xml](plugin_configuration_file.md)</path>.
However, custom language authors need to implement the `org.intellij.intelliLang.languageSupport` EP to make their language and PSI element patterns known to IntelliLang.
Therefore, plugin authors who want to provide injections for existing languages can skip the first step.

#### Implement `org.intellij.intelliLang.languageSupport` EP

Implement the `org.intellij.intelliLang.languageSupport` EP and use
[`AbstractLanguageInjectionSupport`](%gh-ic%/plugins/IntelliLang/src/org/intellij/plugins/intelliLang/inject/AbstractLanguageInjectionSupport.java) as a base class.
Please refer to the API docs of
[`LanguageInjectionSupport`](%gh-ic%/plugins/IntelliLang/src/org/intellij/plugins/intelliLang/inject/LanguageInjectionSupport.java)
for information on methods to override and use
[`JavaLanguageInjectionSupport`](%gh-ic%/plugins/IntelliLang/java-support/org/intellij/plugins/intelliLang/inject/java/JavaLanguageInjectionSupport.java)
as an example implementation.

#### Create Injection Configuration

Create an XML file with the injection configuration.
You can export existing injections from the IntelliLang settings to create a template and then edit it.
[](element_patterns.md) are used to specify the context where injections will take place.
Custom language authors can use the specific patterns returned from their implementation of
[`JavaLanguageInjectionSupport.getPatternClasses`](%gh-ic%/plugins/IntelliLang/java-support/org/intellij/plugins/intelliLang/inject/java/JavaLanguageInjectionSupport.java).

The `injection` tag requires the attributes `language` and `injector-id`.
The first one specifies the `language-id`
(see [`Language.getID()`](%gh-ic%/platform/core-api/src/com/intellij/lang/Language.java)) of the language that is injected.
The second one is the id of the host language
(see [`JavaLanguageInjectionSupport.getId()`](%gh-ic%/plugins/IntelliLang/java-support/org/intellij/plugins/intelliLang/inject/java/JavaLanguageInjectionSupport.java)).
For instance, injecting SQLite into Python code is specified by the following opening tag:

```xml
<injection language="SQLite" injector-id="python">
  ...
</injection>
```

Inside an injection, the following tags can be used:

| XML Tag                   | Description                                                                                                                                                                                                                                                                 |
|---------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `<display-name>`          | A short name for the injection.                                                                                                                                                                                                                                             |
| `<place>`                 | The element pattern that defines where an injection will take place. The content is wrapped in `![CDATA[...]]`.                                                                                                                                                             |
| `<prefix>` and `<suffix>` | Static content that is wrapped around the injected code, e.g., to make it a valid expression. For example, to a CSS color specification inside a string, it can be wrapped with the prefix `div { color:` and the suffix `;}` to make it a valid CSS expression.            |
| `<value-pattern>`         | A regex for the content that specifies when this injection should be applied. Regex groups can specify the text range of the injection (e.g. `^javascript:(.+)`, see [`xmlInjections-html.xml`](%gh-ic%/plugins/IntelliLang/xml-support/resources/xmlInjections-html.xml)). |
| `<ignore-pattern>`        | A regex for the content that specifies when this injection should not be applied.                                                                                                                                                                                           |

#### Create an XML File to Load the Configuration

Create an XML file <path>myLanguageID-injections.xml</path> next to your <path>plugin.xml</path> that loads the above configuration.
Custom language authors also register their implementation of the `languageSupport` EP there.

```xml
<idea-plugin>
  <extensions defaultExtensionNs="org.intellij.intelliLang">
    <injectionConfig config="path/to/your/injections.xml"/>
  </extensions>
</idea-plugin>
```

#### Load the Injection Configuration in plugin.xml

The injections are an optional dependency that only works when IntelliLang is enabled.
Therefore, you load the configuration optionally in your main <path>plugin.xml</path>:

````xml
<depends
    optional="true"
    config-file="myLanguageID-injections.xml">org.intellij.intelliLang</depends>
````

## `LanguageInjectionContributor` and `LanguageInjectionPerformer`

The `com.intellij.languageInjectionContributor` EP provides injection information for the given context in terms of _what_ to inject.
As a plugin author, implement [`LanguageInjectionContributor`](%gh-ic%/platform/core-api/src/com/intellij/lang/injection/general/LanguageInjectionContributor.java) to provide context-specific injections.

For instance, if you want to inject a YAML or JSON to a literal language depending on some conditions, you could implement this interface like this:

```java
final class MyInjector implements LanguageInjectionContributor {

  @Override
  public @Nullable Injection getInjection(@NotNull PsiElement context) {
    if (!isConfigPlace(context)) return null;
    if (shouldInjectYaml(context)) {
      return new SimpleInjection(
          YAMLLanguage.INSTANCE, "", "", null
      );
    } else if (shouldInjectJSON(context)) {
      return new SimpleInjection(
          JsonLanguage.INSTANCE, "", "", null
      );
    }
    return null;
  }
}
```

Register the implementation in your <path>plugin.xml</path>:

```xml
<languageInjectionContributor
    implementationClass="MyInjector"
    language="YourLanguage"/>
```

If you want more control over how the injection should be done then implement the `com.intellij.languageInjectionPerformer` EP which allows for complex language injections, e.g. for concatenation or interpolation of strings.
If it is not implemented, then the
[`DefaultLanguageInjectionPerformer`](%gh-ic%/plugins/IntelliLang/src/org/intellij/plugins/intelliLang/inject/DefaultLanguageInjectionPerformer.java)
will be used.

For the `com.intellij.languageInjectionPerformer` EP, two methods need to be implemented in [`LanguageInjectionPerformer`](%gh-ic%/platform/core-api/src/com/intellij/lang/injection/general/LanguageInjectionPerformer.java).
First, `isPrimary()` determines if this is the default `LanguageInjectionPerformer` for the language and if it handles most of the injections.
If there is no primary `LanguageInjectionPerformer` found, then a fallback injection will be performed.

The method `performInjection()` does the actual injection into the context PSI element and/or some elements around it if needed in case if they are semantically connected (concatenation injection for instance).

> To use Language Injection API in your project, [add dependency](plugin_dependencies.md#project-setup) on the `org.intellij.intelliLang` plugin.
>
{style="note"}

## `MultiHostInjector`

[`MultiHostInjector`](%gh-ic%/platform/core-api/src/com/intellij/lang/injection/MultiHostInjector.java) registered in `com.intellij.multiHostInjector` EP is a very low-level API, but it gives plugin authors the most freedom.
It performs language injection inside other PSI elements, e.g. inject SQL inside an XML tag text or inject regular expressions into Java string literals.

Plugin authors need to implement `getLanguagesToInject()` to provide a list of places to inject a language, and `elementsToInjectIn()` to return a list of elements to inject.

For example, inject regular expressions into Java string literal:

```java
final class MyRegExpToJavaInjector implements MultiHostInjector {

  @Override
  public void getLanguagesToInject(@NotNull MultiHostRegistrar registrar,
                                   @NotNull PsiElement context) {
    if (context instanceof PsiLiteralExpression && shouldInject(context)) {
      registrar
        .startInjecting(RegExpLanguage.INSTANCE)
        .addPlace(null, null,
                  (PsiLanguageInjectionHost)context,
                  innerRangeStrippingQuotes(context))
        .doneInjecting();
    }
  }

  @Override
  public @NotNull List<? extends Class<? extends PsiElement>> elementsToInjectIn() {
    return List.of(PsiLiteralExpression.class);
  }
}
```

Register the implementation in your <path>plugin.xml</path>:

```xml
<multiHostInjector
    implementation="MyRegExpToJavaInjector"/>
```

A more complex example is when you need to inject into several fragments at once.
For example, if we have an XML-based DSL:

```xml
<myDSL>
  <method>
    <name>foo</name>
    <body>System.out.println(42);</body>
  </method>
</myDSL>
```

which should be converted to the equivalent Java code:

```java
class MyDsl { void foo() { System.out.println(42); } }
```

Here, we need to inject Java into several places at once, i.e. method name and its body:

```java
final class MyDSLInjector implements MultiHostInjector {

  @Override
  public void getLanguagesToInject(@NotNull MultiHostRegistrar registrar,
                                   @NotNull PsiElement context) {
    if (context instanceof XmlText && isMethodTag(context)) {
      registrar.startInjecting(JavaLanguage.INSTANCE);

      // construct class header, method header,
      // inject method name, append code block start
      registrar.addPlace("class MyDsl { void ", "() {",
                         (PsiLanguageInjectionHost)context,
                         rangeForMethodName(context));

      // inject method body, append closing braces
      // to form a valid Java class structure
      registrar.addPlace(null, "}}", context, rangeForBody(context));
      registrar.doneInjecting();
    }
  }

  @Override
  public @NotNull List<? extends Class<? extends PsiElement>> elementsToInjectIn() {
    return List.of(XmlText.class);
  }
}
```

Now, inside the editor the injected portion will work as expected where foo is the method name and `System.out.println(42);` will look and feel like a method body with highlighting, completion, and goto definition working.

## Formatting
<primary-label ref="2022.3"/>

To control delegation of formatting to containing file, implement [`InjectedFormattingOptionsProvider`](%gh-ic%/platform/code-style-api/src/com/intellij/formatting/InjectedFormattingOptionsProvider.java) and register in `com.intellij.formatting.injectedOptions` extension point.

## Injection Highlighting

To suppress highlighting from <control>Code | Injected language fragment</control> setting in <ui-path>Settings | Editor | Color Scheme | General</ui-path>, injection host must implement [`InjectionBackgroundSuppressor`](%gh-ic%/platform/analysis-impl/src/com/intellij/psi/impl/source/tree/injected/InjectionBackgroundSuppressor.java).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Language Server Protocol (LSP)

<primary-label ref="CommercialIDEs"/>

<link-summary>Language Server Protocol (LSP) support in IntelliJ-based IDEs</link-summary>

The [Language Server Protocol](https://microsoft.github.io/language-server-protocol/) (LSP) is an open-standard protocol developed by Microsoft. It enables communication between development tools and Language Servers.
Language Servers can provide language-specific features such as code completion, documentation, and formatting, which is far easier than implementing language support from scratch.
It also reduces the need for constant maintenance and tracking of changes in relevant languages and tools, making it easier to bring consistent language support to various development environments.

However, the canonical [](custom_language_support.md) provided by IntelliJ Platform still offers a wider range of integration with IDE features than handling and presenting data provided by a Language Server.
Therefore, the LSP approach shouldn't be considered as a replacement for the existing language API, but rather as an added value.

<video src="https://www.youtube.com/watch?v=N4bkzOqxI4E"/>

_Gain insights into the Language Server Protocol (LSP) and its capabilities while exploring the implementation journey of the
[Contextive plugin](https://plugins.jetbrains.com/plugin/23928-contextive/),
designed to document and utilize domain terminology within codebases.
Chris Simon shares the challenges faced and offers practical tips for aspiring LSP developers._

## Supported IDEs

<primary-label ref="2023.2"/>

The integration with the Language Server Protocol is created as an extension to the *paid* IntelliJ-based IDEs.
Therefore, plugins using Language Server integration are not available in Community releases of JetBrains products and Android Studio from Google.

The LSP API is publicly available as part of the IntelliJ Platform in the following IDEs:
IntelliJ IDEA Ultimate, WebStorm, PhpStorm, PyCharm Professional, DataSpell, RubyMine, CLion, Aqua, DataGrip, GoLand, Rider, and RustRover.

## LSP Plugin Setup

The plugin must target [](idea_ultimate.md) version `2023.2` or later.

### Gradle Build Script

<tabs>
<tab title="IntelliJ Platform Gradle Plugin (2.x)">

Relevant <path>build.gradle.kts</path> configuration:

```kotlin
plugins {
  id("org.jetbrains.intellij.platform") version "%intellij-platform-gradle-plugin-version%"
}

repositories {
  mavenCentral()

  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaUltimate("%ijPlatform%")
  }
}
```

</tab>

<tab title="Gradle IntelliJ Plugin (1.x)">

Upgrade the Gradle IntelliJ Plugin to the latest version.
It will attach the LSP API sources and code documentation to the project.

Relevant <path>build.gradle.kts</path> configuration:

```kotlin
plugins {
  // ...
  id("org.jetbrains.intellij") version "%gradle-intellij-plugin-version%"
}

intellij {
  version = "%ijPlatform%"
  type = "IU"
}
```

For projects based on the [](plugin_github_template.md), update the Gradle IntelliJ Plugin to the latest version,
and amend the values in <path>gradle.properties</path> accordingly.

</tab>
</tabs>

### plugin.xml

The <path>plugin.xml</path> configuration file must specify the dependency on the IntelliJ Platform _Ultimate_ module:

```xml

<idea-plugin>
  <!-- ... -->
  <depends>com.intellij.modules.ultimate</depends>
</idea-plugin>
```

### IDE Setup

Since 2024.2, LSP API sources are provided with the `IntelliJ IDEA Ultimate sources` artifact.
See [](tools_intellij_platform_gradle_plugin.md#attaching-sources) on how to enable downloading sources.
Then, use <ui-path>Navigate | Class...</ui-path> to open the `LspServerManager` class.
In the opened editor, invoke <control>Download IntelliJ Platform sources</control> to download and attach sources.

#### Earlier IDE Versions

The LSP API sources are bundled in the IntelliJ IDEA Ultimate distribution and can be found within the <path>\$IDEA_INSTALLATION\$/lib/src/src_lsp-openapi.zip</path> archive.

> Due to technical limitations in IDEs before 2024.1, it is necessary to manually attach sources to the IntelliJ IDEA Ultimate dependency.
> To do so, when reviewing the compiled class which belongs to the LSP API, run the _Choose Sources..._ action, and point to the
> <path>\$IDEA_INSTALLATION\$/lib/src/src_lsp-openapi.zip</path> file.
>
{style="note" title="Attaching Sources in IDE before 2024.1"}

## Supported Features

The LSP support provided by the IntelliJ Platform covers the following features for these releases:

### 2024.3

- Color Preview ([`textDocument/documentColor`](https://microsoft.github.io/language-server-protocol/specification#textDocument_documentColor))
- Document Save Notification ([`textDocument/didSave`](https://microsoft.github.io/language-server-protocol/specification/#textDocument_didSave)) [2024.3.1]

### 2024.2

- Find Usages ([`textDocument/references`](https://microsoft.github.io/language-server-protocol/specification#textDocument_references))
- Completion Item Resolve Request ([`completionItem/resolve`](https://microsoft.github.io/language-server-protocol/specification/#completionItem_resolve))
- Code Action Resolve Request ([`codeAction/resolve`](https://microsoft.github.io/language-server-protocol/specification/#codeAction_resolve))
- Semantic Highlighting ([`textDocument/semanticTokens/full`](https://microsoft.github.io/language-server-protocol/specification/#semanticTokens_fullRequest)) [2024.2.2]

### 2024.1

- Communication channel: Socket
- Execute a command ([`workspace/executeCommand`](https://microsoft.github.io/language-server-protocol/specification/#workspace_executeCommand))
- Apply a WorkspaceEdit ([`workspace/applyEdit`](https://microsoft.github.io/language-server-protocol/specification/#workspace_applyEdit))
- Show Document Request ([`window/showDocument`](https://microsoft.github.io/language-server-protocol/specification/#window_showDocument))

### 2023.3

- Intention actions ([`textDocument/codeAction`](https://microsoft.github.io/language-server-protocol/specification/#textDocument_codeAction))
- Code formatting ([`textDocument/formatting`](https://microsoft.github.io/language-server-protocol/specification/#textDocument_formatting))
- Request cancellation ([`$/cancelRequest`](https://microsoft.github.io/language-server-protocol/specification/#cancelRequest))
- Quick documentation ([`textDocument/hover`](https://microsoft.github.io/language-server-protocol/specification#textDocument_hover)) [2023.3.2]
- Client-side file watcher ([`workspace/didChangeWatchedFiles`](https://microsoft.github.io/language-server-protocol/specification#workspace_didChangeWatchedFiles)) [2023.3.2]

### 2023.2

- Communication channel: StdIO
- Errors and warnings highlighting ([`textDocument/publishDiagnostics`](https://microsoft.github.io/language-server-protocol/specification/#textDocument_publishDiagnostics))
- Quick-fixes for errors and warnings ([`textDocument/codeAction`](https://microsoft.github.io/language-server-protocol/specification/#textDocument_codeAction))
- Code completion ([`textDocument/completion`](https://microsoft.github.io/language-server-protocol/specification/#textDocument_completion))
- Go to Declaration ([`textDocument/definition`](https://microsoft.github.io/language-server-protocol/specification/#textDocument_definition))

## Basic Implementation

As a reference, check out the [Prisma ORM](https://plugins.jetbrains.com/plugin/20686-prisma-orm) open-source plugin implementation: [Prisma ORM LSP](%gh-ij-plugins%/prisma/src/org/intellij/prisma/ide/lsp)

<procedure title="Minimal LSP Plugin Setup">

1. Implement `LspServerSupportProvider` and within the `LspServerSupportProvider.fileOpened()` method, spin up the relevant LSP server descriptor, which can decide if the given file is supported by using the `LspServerDescriptor.isSupportedFile()` check method.
2. [Register](plugin_extensions.md#declaring-extensions) it as a `com.intellij.platform.lsp.serverSupportProvider` [Extension Point (EP)](plugin_extension_points.md):
3. Tell how to start the server by implementing `LspServerDescriptor.createCommandLine()`.

```kotlin
import com.intellij.platform.lsp.api.LspServerSupportProvider
import com.intellij.platform.lsp.api.ProjectWideLspServerDescriptor

internal class FooLspServerSupportProvider : LspServerSupportProvider {
  override fun fileOpened(project: Project, file: VirtualFile, serverStarter: LspServerStarter) {
    if (file.extension == "foo") {
      serverStarter.ensureServerStarted(FooLspServerDescriptor(project))
    }
  }
}

private class FooLspServerDescriptor(project: Project) : ProjectWideLspServerDescriptor(project, "Foo") {
  override fun isSupportedFile(file: VirtualFile) = file.extension == "foo"
  override fun createCommandLine() = GeneralCommandLine("foo", "--stdio")
}
```

</procedure>

### Status Bar Integration

<primary-label ref="2024.1"/>

A dedicated <control>Language Services</control> status bar widget is available to monitor the status of all LSP servers.
Override `LspServerSupportProvider.createLspServerWidgetItem()` to provide a custom icon and link to [Settings](settings.md) page (if available).

```kotlin
override fun createLspServerWidgetItem(
  lspServer: LspServer,
  currentFile: VirtualFile?
) =
  LspServerWidgetItem(
    lspServer, currentFile,
    FooIcons.PluginIcon, FooConfigurable::class.java
  )
```

If there are configuration problems preventing from starting an LSP server, the plugin can provide a widget item
with an error and give the user a hint how to fix the problem.

## Language Server Integration

Language Server is a separate process that analyzes source code and provides language-specific features to development tools.
When creating a plugin that uses LSP within the IDE, there are two possibilities for providing a Language Server to end-users:

- Bundle a [Language Server implementation](https://microsoft.github.io/language-server-protocol/implementors/servers/) binary as a resource delivered with a plugin.
- Provide a possibility for users to define the location of the Language Server binary in their environment.

The Prisma ORM plugin presents the first approach, which distributes the <path>prisma-language-server.js</path> script and uses a local Node.js interpreter to run it.

For more complex cases, the plugin may request to provide a detailed configuration with a dedicated [Settings](settings_guide.md) implementation.

## Customization

To fine-tune or disable the implementation of LSP-based features, plugins may override the corresponding properties of the `LspServerDescriptor` class.
See the [property documentation](#ide-setup) for more details.

### 2023.3

{id="customization_2023_3"}

- `lspFormattingSupport`
- `lspHoverSupport`

### 2023.2

{id="customization_2023_2"}

- `lspGoToDefinitionSupport`
- `lspCompletionSupport`
- `lspDiagnosticsSupport`
- `lspCodeActionsSupport`
- `lspCommandsSupport`

To handle custom (undocumented) requests and notifications from the LSP server, override `LspServerDescriptor.createLsp4jClient` property and the `Lsp4jClient` class according to their documentation.

To send custom (undocumented) requests and notifications to the LSP server, override `LspServerDescriptor.lsp4jServerClass` property and implement the `LspClientNotification` and/or `LspRequest` classes.
The documentation in the source code includes implementation examples.

See the [bundled LSP API source code](#ide-setup) and its documentation for more information.

## Troubleshooting

All the IDE and LSP server communication logs are passed to the IDE log file.

To include them, add the following entry to the <control>Help | Diagnostic Tools | Debug Log Settings…</control> configuration dialog:

```
#com.intellij.platform.lsp
```

For more information, see the [](ide_infrastructure.md#logging) section.

## Integration Overview

Integrating the Language Server Protocol (LSP) into a plugin for IntelliJ-based IDEs involves a trade-off between simple and fast language support and a complex custom language support plugin with IDE capabilities.

When considering the LSP-based approach, it is important to assess the following criteria for providing a Language Server to end users:

- OS dependency of the Language Server.
- Availability of the latest version online.
- Compatibility with breaking changes between versions.
- Feasibility of requesting the user to provide the Language Server binary path.

## Sample Plugins

The following open-source plugins make use of LSP:

- [Prisma ORM](%gh-ij-plugins%/prisma/src/org/intellij/prisma/ide/lsp)

Explore third-party plugins using LSP on [IntelliJ Platform Explorer](https://jb.gg/ipe?extensions=com.intellij.platform.lsp.serverSupportProvider).

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Launching Coroutines
<primary-label ref="2024.1"/>

<link-summary>Techniques for launching coroutines from various contexts.</link-summary>

<include from="coroutines_snippets.md" element-id="learnCoroutines"/>

There are two approaches to launching coroutines in the IntelliJ Platform:
1. [Service with its own scope](#launching-coroutine-from-service-scope). (recommended)
2. [The `runBlockingCancellable` function](#using-runblockingcancellable).

## Launching Coroutine From Service Scope

The recommended approach is creating a [service](plugin_services.md) that receives [its scope](coroutine_scopes.md#service-scopes) via the constructor injection and launching a coroutine from the service methods.
Please note that while creating a service instance does allocate additional resources, using a dedicated service and scope remains a lightweight and, most importantly, safe solution for launching coroutines.
It should be used whenever possible.

The pattern is as follows:

<tabs>
<tab title="Application Service">

```kotlin
@Service
class MyApplicationService(
  private val cs: CoroutineScope
) {
  fun scheduleSomething() {
    cs.launch {
      // do something
    }
  }
}
```

</tab>
<tab title="Project Service">

```kotlin
@Service(Service.Level.PROJECT)
class MyProjectService(
  private val project: Project,
  private val cs: CoroutineScope
) {
  fun scheduleSomething() {
    cs.launch {
      // do something
    }
  }
}
```

</tab>
</tabs>

The injected scope is created per service, so each instance has its own isolated scope with a common parent, which is an [intersection scope](coroutine_scopes.md#intersection-scopes).
The injected scope is canceled when the container (application/project) is shut down or when the plugin is unloaded.

## Using `runBlockingCancellable`

> Using `runBlockingCancellable` is not recommended.
> Use [service scopes](#launching-coroutine-from-service-scope) whenever possible.
>
{style="warning"}

In a standard coroutine-based application, the bridge between the regular blocking code and the suspending code is the [`runBlocking`](https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/run-blocking.html) function.

In the IntelliJ Platform, a similar purpose is achieved by the [`runBlockingCancellable`](%gh-ic%/platform/core-api/src/com/intellij/openapi/progress/coroutines.kt) function.
In addition to the same semantics as `runBlocking`, the action gets canceled when the current progress indicator or the current job is canceled.

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Layout

<link-summary>UI guidelines on laying out the controls in dialogs.</link-summary>

Arrange UI controls in dialogs according to the rules below to help people locate the necessary settings faster and understand how they are related. <br/>

Independent controls:

- [Labeled input controls](#labeled-input-controls): fields, combo boxes, text areas, etc.
- [Checkboxes and radio buttons](#checkboxes-and-radio-buttons)
- [Buttons and links](#buttons-and-links)
- [Lists, trees, tables](#lists-trees-and-tables)

[Dependent controls ](#dependent-controls)— controls that depend on a parent control. <br/><br/>

Organize controls into easily readable groups with [vertical and horizontal insets](layout.md#organize-with-insets).

[//]: # (TODO: See [Dialog window]&#40;dialog_window.md&#41; for buttons and other controls at the bottom of a dialog.)

## Independent controls

### Labeled input controls

Labeled input controls are: [input field](input_field.md), [combo box](combo_box.md), [drop-down list](drop_down.md), [text area](text_area.md), and spinner.

By default, put input controls with labels of similar length on different lines and align their input boxes on the left side.

![](1_01_input_similar_labels.png){width=391}

Do **not** align input boxes on the left side if one label is twice as long as the other one or even longer.

![](1_02_input_different_labels_incorrect.png){width=391}

![](1_02_input_different_labels_correct.png){width=391}

If several related input controls have labels of up to 10 characters and their input boxes are short, organize them in two columns. Do **not** use more than two columns.

![](1_03_short_inputs.png){width=391}

If an input box is long, and the horizontal space is limited, place the label above the box. Otherwise, always put the label and the box on the same line.

![](1_04_input_top_label.png){width=412}

#### Separated by other controls

If there are two input controls with labels of similar length that are separated from each other by a single control, align their input boxes on the left side.

![](1_05_separated_by_one.png){width=452}

Align only the input boxes of the neighboring input controls. If there are several input controls on a page, and they are separated from each other by two or more other UI elements, do **not** align their input boxes.

![](1_06_separated_by_two.png){width=452}

If input groups are separated by a group of other UI controls, align only the boxes located within one group.

![](1_07_separated_groups.png){width=616}

#### Labels and right borders

Always left-align labels.

> This alignment is inconsistent with macOS guidelines, but the aim is to maintain consistency in all JetBrains IDEs on all supported platforms.
>
{style="note"}

![](1_08_label_alignment.png){width=464}

Align the right borders of input boxes that have a similar length. For alignment, use [built-in icons](built_in_button.md). Do **not** use buttons.

![](1_09_built_in_button.png){width=302}

### Checkboxes and radio buttons

By default, put independent checkboxes and radio button groups on different lines.

![](2_01_checkbox_radio_column.png){width=358}

If there is a group of 2–3 checkboxes with short labels (1–3 words), place them on the same line.
The same rule applies to radio buttons.
With this alignment, controls form a short sentence, making it easier to understand their meaning compared to when they are split into several lines.

![](2_02_checkbox_radio_line.png){width=358}

When there is an input control on one line and a group of checkboxes or radio buttons on the next line, and their labels are of similar length
(one is no more than 5 characters longer than the other), align the input box with the checkbox/radio button.

If one label is much longer than the other, do **not** align these UI elements.

![](2_03_align_group_labels.png){width=461}

If a checkbox group does not have a label, align it with other independent controls by the left side.

![](2_03_align_without_group_labels.png){width=417}

4 and more checkboxes can be arranged in columns:

* Arrange checkboxes with labels of up to 30 characters in 2 columns.

![](2_04_checkbox_2_columns.png){width=417}

* Arrange checkboxes with labels of up to 15 characters in 3 columns.

![](2_05_checkbox_3_columns.png){width=417}

Do **not** arrange radio buttons from one group in several columns. Splitting a group of radio buttons into two or more columns makes it unclear that all these radio buttons belong to the same setting.

![](2_06_radio_columns_incorrect.png){width=417}

### Buttons and links

Align an independent button or link to the left with other controls.

![](3_01_button_column.png){width=361}

![](3_01_link_column.png){width=361}

If there are 2–3 buttons or links with labels of up to 30 characters each, place them on one line.

![](3_02_button_line.png){width=361}

Do **not** arrange buttons or links in several columns. Such a layout takes more time to parse visually.

![](3_03_button_columns.png){width=361}

### Lists, trees and tables

Choose a control width such that most of the common values are visible. Take the whole width of the dialog if necessary.

![](4_01_table_full_width.png){width=638}

If the dialog containing the control is noticeably wider than the control itself, reduce the length of the control.

Do **not** put other independent controls to the right of a list, tree, or table.
They would look like dependent controls in the master-detail layout.

![](4_02_table_fixed_width.png){width=638}

If there are several lists, trees, or tables in a dialog, make them of the same width.

![](4_03_aligned_lists.png){width=452}

## Dependent controls

<p>Align controls according to the rules below to show that they are related.</p>

Place 2–3 related UI controls on the same line if each control takes up to 30 characters. This way the user needs to read just one line, and it is quicker to see that the controls depend on each other.

![](5_01_dependent_one_line.png){width=497}

<p>In all other cases, place interrelated controls on different lines:</p>

Main control: **labeled input control**.

* Align other dependent elements with the left border of the input box.

![](5_03_dependent_on_field_checkbox.png){width=281}

![](5_03_dependent_on_field_button.png){width=281}

* If an input's label is long or the input box is very short, align by the label and add a horizontal inset.

![](5_04_dependent_on_field_long_label.png){width=489}

Main control: **checkbox** or **radio button**. Align dependent controls by the label.

![](5_02_dependent_on_checkbox.png){width=342}

When the main control or one of the dependent controls takes the whole width of a panel, left align all elements.

![](5_05_whole_width_text_area.png){width=475 style=block}
*The text area is the main control, the button is the dependent control.*

![](5_06_whole_width_checkbox.png){width=475 style=block}
*The checkbox is the main control, the table is the dependent control.*

When the main control takes the whole width of a panel, and there is one small dependent control (for example, a drop-down list), place this dependent control to the top-right corner, above the main control.

![](5_07_whole_width_top_right_corner.png){width=475}

[//]: # (TODO: See [Master-detail layout]&#40;masterdetail_layout.md&#41; for more information on how to lay out controls if they depend on lists or trees.)

See the [Inline help text](inline_help_text.md#placement) and [Tooltip](tooltip.md#question-mark-icon-for-help-tooltips) articles for details on how to arrange help information in dialogs.

If controls do **not** depend on each other, left-align them all. Otherwise, the user might think that controls are linked.

![](5_09_incorrect_alignment.png){width=517 style=block}
*The spinners do not depend on the top checkbox.*

## Organize with insets

Use vertical insets to break a list of controls into easily readable groups. Compare:

<format color="Red" style="bold">Incorrect</format>

![](6_02_group_insets_incorrect.png){width=396 style=block}
*The list of controls is hard to scan quickly because the controls "stick" together.*

<format color="Green" style="bold">Correct</format>

![](6_02_group_insets_correct.png){width=396 style=block}
*Scanning a list of controls becomes easier when vertical insets are added between the groups of controls.*

Treat insets with extra care and make sure that elements within a group are actually related. An unnecessary inset may create a false impression that the controls are grouped. This complicates the UI and might cause confusion.

<format color="Red" style="bold">Incorrect</format>

![](6_04_inset_incorrect.png){width=396 style=block}
*The first checkbox depends on the combo box which is shown with the horizontal inset. However, the checkboxes appear grouped because they are closer.*

<format color="Green" style="bold">Correct</format>

![](6_04_inset_correct.png){width=396 style=block}
*The first checkbox is closer to its main control, and it is easier to see that the combo box and checkbox are related.*

Horizontal insets also matter for grouping controls.

<format color="Red" style="bold">Incorrect</format>

![](6_05_hor_inset_incorrect.png){width=396 style=block}
*The checkboxes and the "Length" fields look independent because the horizontal inset between them is bigger than the vertical inset below the second checkbox.*

<format color="DarkOrange" style="bold">Better</format>

![](6_05_hor_inset_better.png){width=396 style=block}
*With smaller horizontal and bigger vertical insets, the checkboxes and the "Length" fields look related. However, it could be made better if the repeating word "Separator" appears only once.*

<format color="Green" style="bold">Correct</format>

![](6_05_hor_inset_correct.png){width=396 style=block}
*Correct grouping and no duplicates help understand the UI quicker.*

See [Groups of controls](groups_of_controls.md) for how to organize a bigger group of controls.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Learning Resources

<link-summary>Links to articles and webinars about plugin development.</link-summary>

<include from="snippets.md" element-id="subscribeNews"/>

## Articles

- [WebStorm Under the Hood: How We Added Astro Support to Our IDE](https://blog.jetbrains.com/webstorm/2023/08/webstorm-under-the-hood-how-we-added-astro-support-to-our-ide/) 07/2023
- [The Plugin Obfuscation Experience](https://blog.jetbrains.com/platform/2022/05/the-plugin-obfuscation-experience/) 05/2022
- [Themes in IntelliJ-based IDEs](https://blog.jetbrains.com/platform/2021/10/themes-in-intellij-based-ides/) 10/2021

### Revamping Plugins

The Revamping Plugins series is about sharing the experience of updating outdated plugins to align with the latest IntelliJ Platform SDK guidelines.

- [Revamping Plugins #1 – .ignore](https://blog.jetbrains.com/platform/2021/01/revamping-plugins-ignore/) 01/2021
- [Revamping Plugins #2 – IDEA Feature Suggester](https://blog.jetbrains.com/platform/2021/03/revamping-plugins-2-idea-feature-suggester/) 03/2021
- [Revamping Plugins #3 – Migrating from DevKit to the Gradle build system](https://blog.jetbrains.com/platform/2021/12/migrating-from-devkit-to-the-gradle-build-system/) 12/2021

### Building a Plugin for WebStorm

A tutorial blog post series for JavaScript developers.

- [Part 1](https://blog.jetbrains.com/webstorm/2021/09/building-a-plugin-for-webstorm-part-1/) 09/2021
- [Part 2](https://blog.jetbrains.com/webstorm/2021/11/building-a-plugin-for-webstorm-part-2/) 11/2021
- [Part 3](https://blog.jetbrains.com/webstorm/2022/03/building-a-plugin-for-webstorm-part-3/) 03/2022

## Webinars

| Webinar                                                                                                                                                                                  | Info                                                                                                                                                                                                                                                                                                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **JetBrains Plugin Developer Conf 2024** <p>Various speakers, 11/2024</p> <video src="https://www.youtube.com/watch?v=nsEGDXvnsa4;list=PLQ176FUIyIUajtzSBY4OzKECmU1R47_XG" width="300"/> | Playlist with various talks about plugin development                                                                                                                                                                                                                                                                                      |
| **Migrating Kotlin Plugins to K2 Mode** <p>Anna Kozlova/Anton Arhipov/Dmitrii Gridin, 10/2024</p> <video src="https://www.youtube.com/watch?v=HDyWQLNMJQ8" width="300"/>                 | <p>&nbsp;</p><p>Using Analysis API with the new default K2 mode</p>                                                                                                                                                                                                                                                                       |
| **How To Build a Plugin for JetBrains IDEs (Analog.js Example)** <p>Piotr Tomiak & guests, 02/2024</p> <video src="https://www.youtube.com/watch?v=UHWhLxBYfKs" width="300"/>            | <p>&nbsp;</p><p>Walking you through the first steps of building a community plugin for Analog.js</p>                                                                                                                                                                                                                                      |
| **Busy Plugin Developers #7** <p>Natalia Melnikova, 11/2023</p> <video src="https://www.youtube.com/watch?v=4nCpkhVZsxM" width="300"/>                                                   | <p>&nbsp;</p><p>How to Upload a Plugin and Get It Approved on JetBrains Marketplace</p>                                                                                                                                                                                                                                                   |
| **Busy Plugin Developers #6** <p>Dmitry Tseyler, 05/2023</p> <video src="https://www.youtube.com/watch?v=tzl3QldlcsU" width="300"/>                                                      | <p>&nbsp;</p><p>Polaris plugin for IntelliJ Platform code search (no longer available)</p>                                                                                                                                                                                                                                                |
| **Busy Plugin Developers #5** <p>Matthias Koch, 09/2022</p> <video src="https://www.youtube.com/watch?v=y8adERbgt_M"  width="300"/>                                                      | <p>&nbsp;</p><p>Building Extensions for Rider and ReSharper</p>                                                                                                                                                                                                                                                                           |
| **Busy Plugin Developers #4** <p>Dmitry Kandalov/Yann Cebron, 04/2022</p> <video src="https://www.youtube.com/watch?v=pgGg-IwUQYM" width="300"/>                                         | <p>&nbsp;</p><p>Adding IDE Features at runtime using LivePlugin</p>                                                                                                                                                                                                                                                                       |
| **Busy Plugin Developers #3** <p>Jakub Chrzanowski/Anna Maltceva/Yann Cebron, 11/2021</p> <video src="https://www.youtube.com/watch?v=9J0j-90dC60" width="300"/>                         | <p>&nbsp;</p><p>Building Themes for IntelliJ-based IDEs</p><p>Latest updates to JetBrains Marketplace</p>                                                                                                                                                                                                                                 |
| **Busy Plugin Developers #2** <p>Anna Maltceva/Łukasz Wawrzyk/Jakub Chrzanowski, 09/2021</p> <video src="https://www.youtube.com/watch?v=oB1GA9JeeiY" width="300"/>                      | <p>&nbsp;</p><p>How to improve your Marketplace plugin page to attract more users</p><p>ide-probe, a testing and benchmarking framework for IntelliJ-based IDEs</p>                                                                                                                                                                       |
| **Busy Plugin Developers #1** <p>Jakub Chrzanowski/Semyon Atamas/Paweł Lipski, 07/2021</p> <video src="https://www.youtube.com/watch?v=vAlor5-hC0Q" width="300"/>                        | <p>&nbsp;</p><p>What is Gradle IntelliJ Plugin</p><p>New features of Gradle IntelliJ Plugin</p><p>How to start with Gradle IntelliJ Plugin</p><p>Types of signing and how they work</p><p>How JetBrains Marketplace signature works</p><p>How to sign your plugin</p><p>Tools and tips for testing UI of IntelliJ Plugins</p>             |
| **Make IntelliJ IDEA Your Own** <p>Sirisha Pratha, 05/2021</p> <video src="https://www.youtube.com/watch?v=cAwH_DbFrfw?t=1120" width="300"/>                                             | <p>&nbsp;</p><p>In this session, we'll explore the benefits provided by IntelliJ IDEA's customization options, and you will learn how to make the IDE your own. We will also look at the plugins available on the JetBrains Marketplace, discuss the process of developing them, and demo a few custom ones.</p>                          |
| **IntelliJ IDEA Conf 2021** <p>Various Speakers, 02/2021</p> <video src="https://www.youtube.com/watch?v=akrPpWAZzQk&amp;list=PLPZy-hmwOdEUdLO-AKiJJ7LuZ3p16zJ4x" width="300"/>          | <p>&nbsp;</p><p>Playlist includes a number of presentations related to plugin development</p>                                                                                                                                                                                                                                             |
| **Busy Plugin Developers #0** <p>Mikhail Vink/Jakub Chrzanowski/Yann Cebron, 12/2020</p> <video src="https://www.youtube.com/watch?v=-6D5-xEaYig" width="300" />                         | <p>&nbsp;</p><p>IntelliJ Platform Plugin Template</p><p>Plugin DevKit Features</p><p>IntelliJ Platform Explorer</p><p>What's coming in 2021?</p><p>Introduction to the Marketplace</p><p>How to make your plugin successful?</p><p>Sell on the Marketplace</p>                                                                            |
| **How We Built Comma, the Raku IDE, on the IntelliJ Platform** <p>Jonathan Worthington, 01/2020</p> <video src="https://www.youtube.com/watch?v=zDP9uUMYrvs" width="300"/>               | <p>&nbsp;</p><p>How to build custom language support</p><p>How to go from a language support plugin to an IDE</p><p>Lessons Learned</p><p>[Blog post](https://blog.jetbrains.com/platform/2020/01/webinar-recording-how-we-built-comma-the-raku-ide-on-the-intellij-platform/)</p>                                                        |
| **Building IntelliJ IDEA plugins in Scala** <p>Igal Tabachnik, 2020</p> <video src="https://www.youtube.com/watch?v=IPO-cY_giNA" width="300"/>                                           | <p>&nbsp;</p><p>In this talk, I will show how to create plugins for IDEA from scratch in Scala, and show why Scala's unique features make it a great fit for such tasks as inspecting and manipulating Abstract Syntax Trees (ASTs) to create your own custom suggestions and quick fixes.</p>                                            |
| **Live Development of a PyCharm Plugin** <p>Joachim Ansorg, 2019</p> <video src="https://www.youtube.com/watch?v=cR-28eaXGQI" width="300"/>                                              | <p>&nbsp;</p><p>Background and architecture of IntelliJ plugins</p><p>Development using tests</p><p>Implementing interesting extension points</p><p>Viewing the plugin in the IDE (PyCharm)</p><p>[Blog post](https://blog.jetbrains.com/pycharm/2019/01/webinar-recording-live-development-of-a-pycharm-plugin-with-joachim-ansorg/)</p> |
| **Build Developer Tools On Top of IntelliJ Platform** <p>Dmitry Jemerov, 2013</p> <video src="https://www.youtube.com/watch?v=vQDzjGzkPFc" width="300"/>                                 | <p>&nbsp;</p><p>This webinar makes an overview on IntelliJ Platform and explains how you can use it for building your own products.</p>                                                                                                                                                                                                   |
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 4. Lexer and Parser Definition

<link-summary>Sample implementation of Simple language lexer and parser.</link-summary>

<tldr>

**Reference**: [](implementing_lexer.md)

**Code**: [`Simple.flex`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/Simple.flex),
[`SimpleLexerAdapter`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleLexerAdapter.java),
[`SimpleFile`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleFile.java),
[`SimpleTokenSets`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleTokenSets.java),
[`SimpleParserDefinition`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleParserDefinition.java)

**Testing**: [](parsing_test.md)

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

The lexical analyzer defines how the contents of a file are broken into tokens, which is the basis for supporting custom language features.
The easiest way to create a lexer is to use [JFlex](https://jflex.de/).

## Define a Lexer

Define a [`Simple.flex`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/Simple.flex) file with rules for the Simple Language lexer in package `org.intellij.sdk.language`.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/Simple.flex"}

## Generate a Lexer Class

Now generate a lexer class via <ui-path>Run JFlex Generator</ui-path> from the context menu on <path>Simple.flex</path> file.

> Users from China, please see [important configuration](https://github.com/JetBrains/Grammar-Kit/issues/300#issuecomment-1476498645).

The Grammar-Kit plugin uses the JFlex lexer generation.
When running for the first time, JFlex prompts for a destination folder to download the JFlex library and skeleton.
Choose the project root directory, for example <path>code_samples/simple_language_plugin</path>.

After that, the IDE generates the lexer under the <path>gen</path> directory, for example in <path>simple_language_plugin/src/main/gen/org/intellij/sdk/language/SimpleLexer</path>.

> [](tools_gradle_grammar_kit_plugin.md) can be used alternatively.
>

## Define a Lexer Adapter

The JFlex lexer needs to be adapted to the IntelliJ Platform Lexer API.
Implement [`SimpleLexerAdapter`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleLexerAdapter.java) by subclassing [`FlexAdapter`](%gh-ic%/platform/core-api/src/com/intellij/lexer/FlexAdapter.java).

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleLexerAdapter.java" include-symbol="SimpleLexerAdapter"}

## Define a Root File

The [`SimpleFile`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleFile.java) implementation is the top-level node of the [tree of `PsiElements`](implementing_parser_and_psi.md) for a Simple Language file.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleFile.java" include-symbol="SimpleFile"}

## Define Token Sets

Define all sets of related token types from `SimpleTypes` in [`SimpleTokenSets`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleTokenSets.java).

```java

```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleTokenSets.java" include-symbol="SimpleTokenSets"}

## Define a Parser

The Simple Language parser is defined in [`SimpleParserDefinition`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleParserDefinition.java) by subclassing [`ParserDefinition`](%gh-ic%/platform/core-api/src/com/intellij/lang/ParserDefinition.java).
To avoid unnecessary classloading when initializing the extension point implementation, all `TokenSet` return values should use constants from dedicated `$Language$TokenSets` class.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleParserDefinition.java" include-symbol="SimpleParserDefinition"}

## Register the Parser Definition

Registering the parser definition in the <path>[plugin.xml](plugin_configuration_file.md)</path> file makes it available to the IntelliJ Platform.
Use the `com.intellij.lang.parserDefinition` extension point for registration.
For example, see <path>simple_language_plugin/src/main/resources/META-INF/plugin.xml</path>.

```xml
<extensions defaultExtensionNs="com.intellij">
  <lang.parserDefinition
      language="Simple"
      implementationClass="org.intellij.sdk.language.SimpleParserDefinition"/>
</extensions>
```

## Run the Project

Run the plugin by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

Create a <path>test.simple</path>  file with the following content:

```properties
# You are reading the ".properties" entry.
! The exclamation mark can also mark text as comments.
website = https://en.wikipedia.org/
language = English
# The backslash below tells the application to continue reading
# the value onto the next line.
message = Welcome to \
          Wikipedia!
# Add spaces to the key
key\ with\ spaces = This is the value that could be looked up with the key "key with spaces".
# Unicode
tab : \u0009
```

Use the [PsiViewer plugin or built-in PSI viewer](explore_api.md#internalMode) and check how the lexer breaks the content of the file into tokens,
and the parser transforms the tokens into PSI elements.

![PSI Elements](psi_elements.png)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Library

<link-summary>Accessing and managing libraries.</link-summary>

<tldr>

**Product Help:** [Libraries](https://www.jetbrains.com/help/idea/library.html)

</tldr>

A library is an archive of compiled code (such as JAR files) that modules depend on.

A particular type of programmatically defined libraries is [Predefined Libraries](#predefined-libraries).

## Library Types

The IntelliJ Platform supports three types of libraries:

### Module Library

The library classes are visible only in this module and the library information is recorded in the module <path>.iml</path> file.

### Project Library

The library classes are visible within the project and the library information is recorded under <path>.idea/libraries</path> directory or in the project <path>.ipr</path> file.

### Global Library

The library information is recorded in the <path>applicationLibraries.xml</path> file in <path>\$USER_HOME\$/.IntelliJIdea/config/options</path> directory. Global libraries are similar to project libraries, but are visible for different projects.

## Working with Libraries

<include from="project.md" element-id="useWorkspaceModelAPI"/>

Package [`com.intellij.openapi.roots.libraries`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/libraries) provides functionality for working with project libraries and JAR files.

### Getting a List of Libraries a Module Depends On

To get the list of libraries that a module depends on, use `OrderEnumerator.forEachLibrary` as follows.

```java
List<String> libraryNames = new ArrayList<>();
ModuleRootManager.getInstance(module).orderEntries().forEachLibrary(library -> {
  libraryNames.add(library.getName());
  return true;
});
Messages.showInfoMessage(StringUtil.join(libraryNames, "\n"), "Libraries in Module");
```

This sample code outputs a list of libraries that the given module depends on.

### Getting a List of All Libraries

To manage the lists of application and project libraries, use [`LibraryTable`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/libraries/LibraryTable.java).
The list of application-level library tables is accessed by calling [`LibraryTablesRegistrar.getLibraryTable()`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/libraries/LibraryTablesRegistrar.java), whereas the list of project-level library tables is accessed via `LibraryTablesRegistrar.getLibraryTable(Project)`.
Get the list of libraries in it via `LibraryTable.getLibraries()`.

To get the list of all module libraries defined in a given module, use API from [`OrderEntryUtil`](%gh-ic%/platform/projectModel-impl/src/com/intellij/openapi/roots/impl/OrderEntryUtil.java):

```java
OrderEntryUtil.getModuleLibraries(ModuleRootManager.getInstance(module));
```

### Getting the Library Content

[`Library`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/libraries/Library.java) provides the `getUrls()` method to get a list of source roots and classes the library includes.

```java
StringBuilder roots = new StringBuilder("The " + lib.getName() + " library includes:\n");
roots.append("Sources:\n");
for (String each : lib.getUrls(OrderRootType.SOURCES)) {
  roots.append(each).append("\n");
}
roots.append("Classes:\n");
for (String each : lib.getUrls(OrderRootType.CLASSES)) {
  roots.append(each).append("\n");
}
Messages.showInfoMessage(roots.toString(), "Library Info");
```

### Creating a Library

For module-level libraries, use the simplified APIs from [`ModuleRootModificationUtil`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ModuleRootModificationUtil.java) to add a library with a single API call.
An example of using these APIs can be found in the [project_model](%gh-sdk-samples-master%/project_model/src/main/java/org/intellij/sdk/project/model/ModificationAction.java) code sample.

<procedure title="Library Creation Steps">

* Get a [write action](threading_model.md#write-actions)
* Get the library table add the library to. Use one of the following, depending on the library level:
    * `LibraryTablesRegistrar.getInstance().getLibraryTable()`
    * `LibraryTablesRegistrar.getInstance().getLibraryTable(Project)`
    * `ModuleRootManager.getInstance(module).getModifiableModel().getModuleLibraryTable()`
* Create the library by calling `LibraryTable.createLibrary()`
* Add contents to the library (see below)
* For a module-level library, commit the modifiable model returned by `ModuleRootManager.getInstance(module).getModifiableModel()`.

</procedure>

### Adding Contents or Modifying a Library

<procedure title="Adding/Changing Library Roots">

* Get a [write action](threading_model.md#write-actions)
* Get a **modifiable model** for the library, using `Library.getModifiableModel()`
* Use methods such as `Library.ModifiableModel.addRoot()` to perform the necessary changes
* Commit the model using `Library.ModifiableModel.commit()`.

</procedure>

### Adding a Library Dependency to a Module

Use `ModuleRootModificationUtil.addDependency(Module, Library)` from under a [write action](threading_model.md#write-actions).

### Checking Belonging to a Library

The [`ProjectFileIndex`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ProjectFileIndex.java) interface implements a number of methods that can used to check whether the specified file belongs to the project library classes or library sources.

* To check if a specified virtual file is a compiled class file use
  ```java
    ProjectFileIndex.isLibraryClassFile(virtualFile)
  ```
* To check if a specified virtual file or directory belongs to library classes use
  ```java
    ProjectFileIndex.isInLibraryClasses(virtualFileorDirectory)
  ```
* To check if the specified virtual file or directory belongs to library sources use
  ```java
    ProjectFileIndex.isInLibrarySource(virtualFileorDirectory)
  ```

See the [project_model](%gh-sdk-samples-master%/project_model/src/main/java/org/intellij/sdk/project/model/ProjectFileIndexSampleAction.java) sample plugin to see how the method mentioned above can be applied.

More details on libraries can be found in the [plugin_model](%gh-sdk-samples-master%/project_model/src/main/java/org/intellij/sdk/project/model/LibrariesAction.java) code sample.

## Predefined Libraries

[`AdditionalLibraryRootsProvider`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/AdditionalLibraryRootsProvider.java) registered in `com.intellij.additionalLibraryRootsProvider` extension point
allows providing synthetic/predefined libraries ([`SyntheticLibrary`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/SyntheticLibrary.java)) in a project without exposing them in the model.
By default, they're also hidden from UI.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Light and Heavy Tests

<link-summary>Introduction to light tests reusing a single project for multiple tests, and heavy tests creating a new project for each test.</link-summary>

<include from="tests_and_fixtures.md" element-id="testFrameworkDependencies"/>

Plugin tests run in a real, rather than mocked, IntelliJ Platform environment and use real implementations for most application and project [services](plugin_services.md).

Loading and initializing all the project components and services for a project to run tests is a relatively expensive operation, and it is desired to avoid doing it for each test.
Dependently on the loading and execution time, we make a difference between *light* tests and *heavy* tests available in the IntelliJ Platform test framework:

* *Light* tests reuse a project from the previous test run when possible.
* *Heavy* tests create a new project for each test.

Light and heavy tests use different base classes or fixture classes, as described below.

> Because of the performance difference, we recommend plugin developers to write *light* tests whenever possible.
>
{style="note"}

## Light Tests

The standard way of writing a light test is to extend one of the following classes:

<tabs>
<tab title="Default">

Use [`LightPlatformTestCase`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/LightPlatformTestCase.java)
or [`BasePlatformTestCase`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/fixtures/BasePlatformTestCase.java)
for tests that don't have any dependency on Java functionality.

For 2019.2 and earlier, use [`LightPlatformCodeInsightFixtureTestCase`](%gh-ic-223%/platform/testFramework/src/com/intellij/testFramework/fixtures/LightPlatformCodeInsightFixtureTestCase.java).

**Examples:**
- [`JavaCopyrightTest`](%gh-ic%/java/java-tests/testSrc/com/intellij/copyright/JavaCopyrightTest.kt)
- [`HtmlDocumentationTest`](%gh-ic%/xml/tests/src/com/intellij/html/HtmlDocumentationTest.java)
- [`AcceptWordAsCorrectTest`](%gh-ic%/spellchecker/testSrc/com/intellij/spellchecker/inspector/AcceptWordAsCorrectTest.java)

</tab>

<tab title="Plugins using Java PSI">

> An explicit dependency on `TestFramework.Plugin.Java` is required, see [test-framework dependencies](tools_intellij_platform_gradle_plugin_dependencies_extension.md#testing).
>
{title="Java Test Framework (2024.2+)"}

For tests that require the [Java PSI](idea.md#java) or related functionality:
- [`LightJavaCodeInsightFixtureTestCase`](%gh-ic%/java/testFramework/src/com/intellij/testFramework/fixtures/LightJavaCodeInsightFixtureTestCase.java) for JUnit 3
- [`LightJavaCodeInsightFixtureTestCase4`](%gh-ic%/java/testFramework/src/com/intellij/testFramework/fixtures/LightJavaCodeInsightFixtureTestCase4.kt) for JUnit 4 (2021.1 and later)
- [`LightJavaCodeInsightFixtureTestCase5`](%gh-ic%/java/testFramework/src/com/intellij/testFramework/fixtures/LightJavaCodeInsightFixtureTestCase5.kt) for JUnit 5 (2021.1 and later)

For 2019.2 and earlier, use [`LightCodeInsightFixtureTestCase`](%gh-ic%/java/testFramework/src/com/intellij/testFramework/fixtures/LightCodeInsightFixtureTestCase.java).

**Examples:**
- [`PatternValidatorTest`](%gh-ic%/plugins/IntelliLang/IntelliLang-tests/test/org/intellij/plugins/intelliLang/pattern/PatternValidatorTest.java) (JUnit 3)
- [`JavaCtrlMouseTest`](%gh-ic%/java/java-tests/testSrc/com/intellij/java/codeInsight/javadoc/JavaCtrlMouseTest.kt) (JUnit 4)
- [`MissingJavadocHighlightingTest`](%gh-ic%/java/java-tests/testSrc/com/intellij/java/codeInsight/daemon/MissingJavadocHighlightingTest.java) (JUnit 5)

> See [](testing_faq.md#how-to-test-a-jvm-language) on how to set up your test environment to obtain the required _Mock JDK_ automatically.

</tab>
</tabs>

### LightProjectDescriptor

When writing a light test, it is possible to specify the requirements of the project used in test, such as the module type, the configured [SDK](sdk.md), [facets](facet.md), [libraries](library.md), etc.
It is done by extending the [`LightProjectDescriptor`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/LightProjectDescriptor.java) class and returning the project descriptor (usually stored in `static final` field) from `getProjectDescriptor()`.

Before executing each test, the project instance will be reused if the test case returns the same project descriptor as the previous one or recreated if the descriptor is different (`equals() = false`).

When [testing JVM languages](testing_faq.md#how-to-test-a-jvm-language), see also [`DefaultLightProjectDescriptor`](%gh-ic%/java/testFramework/src/com/intellij/testFramework/fixtures/DefaultLightProjectDescriptor.java).

## Heavy Tests

The standard way of writing a heavy test is to extend [`HeavyPlatformTestCase`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/HeavyPlatformTestCase.java).

> In 2019.3, `PlatformTestCase` has been renamed to [`HeavyPlatformTestCase`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/HeavyPlatformTestCase.java) reflecting its "heavy test" characteristics.
>
{style="note"}

**Examples:**
- [`ModuleDeleteProviderTest`](%gh-ic%/java/java-tests/testSrc/com/intellij/openapi/roots/ui/configuration/actions/ModuleDeleteProviderTest.java)
- [`FacetTypeUnloadingTest`](%gh-ic%/java/idea-ui/testSrc/com/intellij/facet/FacetTypeUnloadingTest.kt)
- [`SourceFolderManagerTest`](%gh-ic%/platform/external-system-impl/testSrc/com/intellij/openapi/externalSystem/service/project/manage/SourceFolderManagerTest.kt)

### Setting Up a Multi-Module Project

If a test requires a multi-module project, using a heavy test is **required**.
The following code snippet presents a multi-module Java project setup:

```java
TestFixtureBuilder<IdeaProjectTestFixture> projectBuilder =
    IdeaTestFixtureFactory.getFixtureFactory().createFixtureBuilder(getName());

// fixture must be created before adding modules:
myFixture = JavaTestFixtureFactory.getFixtureFactory()
    .createCodeInsightFixture(projectBuilder.getFixture());

// add and configure modules:
JavaModuleFixtureBuilder<?> builder1 =
    projectBuilder.addModule(JavaModuleFixtureBuilder.class);
// optionally, configure the module, e.g.:
// builder1.setLanguageLevel(...);
// builder1.addJdk(...);

JavaModuleFixtureBuilder<?> builder2 =
    projectBuilder.addModule(JavaModuleFixtureBuilder.class);
// configure another module...
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 8. Line Marker Provider

<link-summary>Sample implementation of line marker provider adding gutter icons for Simple language property occurrences in Java files, and allowing to navigate to a property definition.</link-summary>

<tldr>

**Code**: [`SimpleLineMarkerProvider`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleLineMarkerProvider.java)

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

Line markers help annotate code with icons on the gutter.
These markers can provide navigation targets to related code.

## Define a Line Marker Provider

A line marker provider annotates usages of Simple Language properties within Java code and provides navigation to the definition of these properties.
The visual marker is a Simple Language icon in the gutter of the Editor window.

The [`SimpleLineMarkerProvider`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleLineMarkerProvider.java) subclasses [`RelatedItemLineMarkerProvider`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/daemon/RelatedItemLineMarkerProvider.java).
For this example, override the `collectNavigationMarkers()` method to collect usage of a Simple Language [key and separators](language_and_filetype.md#define-the-language):

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleLineMarkerProvider.java" include-symbol="SimpleLineMarkerProvider"}

Extending from [`GutterIconDescriptor`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/daemon/GutterIconDescriptor.java) allows configuring gutter icons to be shown via <ui-path>Settings | Editor | General | Gutter Icons</ui-path>.

## Best Practices for Implementing Line Marker Providers

This section addresses important details about implementing a marker provider.

The `collectNavigationMarkers()` method should:
* Only return line marker information consistent with the element passed into the method.
  For example, do not return a _class_ marker if `getLineMarkerInfo()` was called with an element that corresponds to a _method_.
* Return line marker information for the appropriate element at the correct scope of the PSI tree.
  Return leaf elements only - i.e., the smallest possible elements.
  For example, do not return method marker for [`PsiMethod`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/PsiMethod.java).
  Instead, return it for the [`PsiIdentifier`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/PsiIdentifier.java) which contains the name of the method.

![Line Marker Location](line_marker_location.png){width="900"}

What happens when a `LineMarkerProvider` returns marker information for a `PsiElement` that is a higher node in the PSI tree?
For example, if `MyWrongLineMarkerProvider()` erroneously returns a `PsiMethod` instead of a `PsiIdentifier` element:

```java
final class MyWrongLineMarkerProvider implements LineMarkerProvider {
  public LineMarkerInfo getLineMarkerInfo(@NotNull PsiElement element) {
    if (element instanceof PsiMethod) {
      return new LineMarkerInfo(element, ...);
    }
    return null;
  }
}
```

The consequences of the `MyWrongLineMarkerProvider()` implementation have to do with how the IntelliJ Platform performs inspections.
For performance reasons, inspection, and specifically the [`LineMarkersPass`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/daemon/impl/LineMarkersPass.java) queries all [`LineMarkerProviders`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/daemon/LineMarkerProviders.java) in two phases:
* The first pass is for all elements visible in the Editor window,
* The second pass is for the rest of the elements in the file.

If providers return nothing for either area, the line markers get cleared.
However, if a method like `actionPerformed()` is not completely visible in the Editor window (as shown in the image above,) and `MyWrongLineMarkerProvider()` returns marker info for the `PsiMethod` instead of `PsiIdentifier`, then:
* The first pass removes line marker info because whole `PsiMethod` isn't visible.
* The second pass tries to add a line marker because `MyWrongLineMarkerProvider()` is called for the `PsiMethod`.

As a result, _the line marker icon would blink annoyingly_.
To fix this problem for this case, rewrite `MyWrongLineMarkerProvider` to return info for `PsiIdentifier` instead of `PsiMethod` as shown below:

```java
final class MyCorrectLineMarkerProvider implements LineMarkerProvider {
  public LineMarkerInfo getLineMarkerInfo(@NotNull PsiElement element) {
    if (element instanceof PsiIdentifier &&
            element.getParent() instanceof PsiMethod) {
      return new LineMarkerInfo(element, ...);
    }
    return null;
  }
}
```

## Register the Line Marker Provider

The `SimpleLineMarkerProvider` implementation is registered with the IntelliJ Platform in the plugin configuration file using the `com.intellij.codeInsight.lineMarkerProvider` extension point.

```xml
<extensions defaultExtensionNs="com.intellij">
  <codeInsight.lineMarkerProvider
      language="JAVA"
      implementationClass="org.intellij.sdk.language.SimpleLineMarkerProvider"/>
</extensions>
```

## Run the Project

Run the plugin by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

Open the Java [Test file](annotator.md#run-the-project).
Now the icon appears next to line 3 on the gutter.
A user can click on the icon to navigate to the property definition.

![Line Marker](line_marker.png)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Link

<link-summary>UI guidelines on using links.</link-summary>

<tldr>

**Implementation:** [`ActionLink`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/ActionLink.kt), [`DropDownLink`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/DropDownLink.kt)

</tldr>

![](01_link_example.png){width=120}

## When to use

Use a regular link for navigation between pages of the same window.

![](02_deployment_server.png){width=494}

*This option is in the Settings dialog. "Configure servers" opens another page of the same dialog.*

![](03_manage_scopes.png){width=411}

*Do not use a button to navigate to another page of the same window.*

Use an external link for navigation to web resources. See below for the [external link icon](#external-link-icon).

![](04_external_link.png){width=248}

Use a regular or [drop-down link](#drop-down-link) for secondary actions in packed or small UI areas.

![](05_action_regular_link.png){width=367}

*The "Reset" action is a link for two reasons: (1) The action appears only when the default value in the field is changed and reverting to a default is considered a rare scenario. (2) A lightweight link fits better than a button in this busy layout.*

![](06_action_dropdown.png){width=550}

*The "Modify options" drop-down link fits into the top right corner of a busy layout.*

Do <control>not</control> use links for primary actions or when a UI is not constrained.
Use a [button](button.topic) or a [drop down list](drop_down.md) instead.
These controls can be selected from the keyboard and are bigger and easier to click.

![](07_android_sdk.png){width=451}

## How to use

### Writing guidelines

Use sentence capitalization.

Add an ellipsis to a button-link if it opens another UI area where input is possible. See examples for the [Button](button.topic).

Do not use words like "navigate" or "click here". A link already implies navigation or clicking.

![](08_writing_1.png){width=398}

When possible, replace "Learn more" and other generic phrases with more informative ones.

![](08_writing_2.png){width=316}

### Link as a part of text

A link can be a part of a checkbox or radio button label or of any stand-alone text, like the text in an [empty state](empty_state.md) or in [context help](context_help.md).

![](09_part_of_text_1.png){width=403}

Make a link the minimum phrase that is enough to understand what will happen without reading the whole text.

![](09_part_of_text_2.png){width=489}

### Link in a tree or table

Use a link as a secondary action for some items of a tree or table.

![](10_tree.png){width=387}

If an action is needed for all items of a tree or table:

* Add an [icon button](icon_button.md) to a toolbar.
* For a list of choices, add a separate table column of drop-down cells (see [Table](table.md#editing-values)).
* If a link in every tree or table line has meaningful formatting, leave it:
  ![](11_table.png){width=342}
  *Links in the "Push Commits" window have the format that helps understand the relation between them: "[remote repository] : [branch]". Moving these links elsewhere would break this meaning.*

### External link icon

Always add the arrow icon for an external link. The icon shows that the user will switch to a browser and lose the current context.

![](04_external_link.png){width=248}
<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
val externalLink = ActionLink("External link") {
  BrowserUtil.browse("https://www.jetbrains.com")
}.apply {
  setExternalLinkIcon()
}
```

</tab>
<tab title="Java" group-key="java">

```java
ActionLink externalLink = new ActionLink(
    "External link",
    event -> BrowserUtil.browse("https://www.jetbrains.com")
);
externalLink.setExternalLinkIcon();
```

</tab>
</tabs>

An exception is a help topic link in [empty states](empty_state.md).
The help icon already hints that this is an external help resource, so the arrow icon is unnecessary.

![](12_external_link_no_icon.png){width=164}

### Drop-down link

Drop-down links show a context menu or a popup.
Use [`DropDownLink`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/DropDownLink.kt) to implement a drop-down link.

![](13_drop_down_links.png){width=445}

## Placement

Lay out button-links as buttons and dropdown-links as combo boxes. See [Layout](layout.md).

## Built-in behavior

A focused link is activated from the keyboard with <shortcut>Space</shortcut>.

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# List and Tree Controls

<link-summary>Creating list and tree components consistent with IntelliJ Platform UI components.</link-summary>

### `JBList` and `Tree`

Whenever you would normally use a standard [Swing `JList`](https://docs.oracle.com/javase/8/docs/api/javax/swing/JList.html) component, it's recommended to use the [`JBList`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/JBList.java) class as drop-in replacement. [`JBList`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/JBList.java) supports the following additional features on top of [`JList`](https://docs.oracle.com/javase/8/docs/api/javax/swing/JList.html):

* Drawing a tooltip with complete text of an item if the item doesn't fit into the list box width.
* Drawing a gray text message in the middle of the list box when it contains no items.
  The text can be customized by calling `getEmptyText().setText()`.
* Drawing a busy icon in the top right corner of the list box to indicate that a background operation is being performed.
  This can be enabled by calling `setPaintBusy()`.

Similarly, the [`Tree`](%gh-ic%/platform/platform-api/src/com/intellij/ui/treeStructure/Tree.java) class provides a replacement for the standard [`JTree`](https://docs.oracle.com/javase/8/docs/api/javax/swing/JTree.html) class.
In addition to the features of [`JBList`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/JBList.java), it supports wide selection painting (Mac style) and auto-scroll on drag & drop.

### `ColoredListCellRenderer` and `ColoredTreeCellRenderer`

When you need to customize the presentation of items in a list box or a tree, it's recommended to use the [`ColoredListCellRenderer`](%gh-ic%/platform/platform-api/src/com/intellij/ui/ColoredListCellRenderer.java) or [`ColoredTreeCellRenderer`](%gh-ic%/platform/platform-api/src/com/intellij/ui/ColoredTreeCellRenderer.java) classes as the cell renderer.
These classes allow you to compose the presentation out of multiple text fragments with different attributes by calling `append()` and to set an optional icon for the item by calling `setIcon()`.
The renderer automatically takes care of setting the correct text color for selected items and of many other platform-specific rendering details.

### `ListSpeedSearch` and `TreeSpeedSearch`

To facilitate keyboard-based selection of items in a list box or a tree, you can install a speed search handler on it using the [`ListSpeedSearch`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/ListSpeedSearch.java) and [`TreeSpeedSearch`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/TreeSpeedSearch.java).
This can be done simply by calling `new ListSpeedSearch(list)` or `new TreeSpeedSearch(tree)`.
To customize the text which is used to locate the element, override the `getElementText()` method.
Alternatively, you can pass a function to convert items to strings.
A function needs to be passed as `elementTextDelegate` to the [`ListSpeedSearch`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/ListSpeedSearch.java) constructor or as `toString` to the [`TreeSpeedSearch`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/TreeSpeedSearch.java) constructor.

### `ToolbarDecorator`

A very common task in plugin development is showing a list or a tree where the user is allowed to add, remove, edit or reorder the items.
The implementation of this task is greatly facilitated by the [`ToolbarDecorator`](%gh-ic%/platform/platform-api/src/com/intellij/ui/ToolbarDecorator.java) class.
This class provides a toolbar with actions on items and automatically enables drag & drop reordering of items in list boxes if supported by the underlying list model.
The position of the toolbar above or below the list depends on the platform under which the IDE is running.

To use a toolbar decorator:

* If you need to support removing and reordering of items in a list box, make sure the model of your list implements the [`EditableModel`](%gh-ic%/platform/util/ui/src/com/intellij/util/ui/EditableModel.java) interface.
  [`CollectionListModel`](%gh-ic%/platform/util/ui/src/com/intellij/ui/CollectionListModel.java) is a handy model class that implements this interface.
* Call [`ToolbarDecorator.createDecorator()`](%gh-ic%/platform/platform-api/src/com/intellij/ui/ToolbarDecorator.java) to create a decorator instance.
* If you need to support adding and/or removing items, call `setAddAction()` and/or `setRemoveAction()`.
* If you need other buttons in additional to the standard ones, call `addExtraAction()` or `setActionGroup()`.
* Call `createPanel()` and add the component it returns to your panel.

<!--
### AbstractTreeBuilder and AbstractTreeStructure
TODO link to tutorial
-->
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Live Templates

<link-summary>Live templates support overview.</link-summary>

<tldr>

**Product Help:** [Live templates](https://www.jetbrains.com/help/idea/using-live-templates.html)

</tldr>

*Live Templates* are customizable rules that allow developers to abbreviate repetitive text patterns or surround code fragments with repetitive constructs in the editor.

When a user types the designated abbreviation followed by a configurable *expansion key* (usually <shortcut>Tab</shortcut>), the IDE transforms the preceding input sequence to its full-length output, and update the cursor position.

For example, consider a Java `for` loop.
Typically, the end user would need to type `for (int i = 0; i < 10; i++) {<Enter><Tab><Enter><Enter>}<Up>`.
This pattern may be shortened to `fori<Tab>` and the remaining contents will be expanded, leaving the following structure:

```java
for (int i = [|]; i < []; i++) {
  []
}
```

As the user completes each section of the `for` loop and presses `Tab`, the cursor advances to the next position in the editor.

Another use-case for live templates is surrounding the selected code with additional constructs.
When a user selects a code fragment and invokes the <ui-path>Code | Surround With...</ui-path> action and chooses the template from the list, the code is wrapped with the content defined in the template.

Consider the following Java method with the selected fragment inside `<selection>`:

```java
public void testMethod() {
  <selection>getActions()</selection>
}
```

Invoking the <ui-path>Code | Surround With...</ui-path> action and selecting the <control>Iterate Iterable or array</control> template would transform the code to:

```java
public void testMethod() {
  for (Action action : getActions()) {
    <cursor>
  }
}
```

> See the [](surround_with.md) section for the information on how to implement more advanced code surrounding.
>
{style="note"}

For more information about creating Custom Live Templates, refer to the [corresponding documentation](https://www.jetbrains.com/idea/help/creating-and-editing-live-templates.html).

These sections describe how to add Live Templates, and their associated building blocks, to plugins.
 * [](providing_live_templates.md)
   * [](live_templates_configuration_file.md)
 * [](creating_live_template_functions.md)
<!-- Copyright 2000-2025 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Live Templates Configuration File

<show-structure for="chapter" depth="4"/>

<link-summary>Live templates configuration file contains all the information about templates provided by the plugin.</link-summary>

This page lists and describes all the elements and attributes used in live templates configuration files.

## Configuration Structure Overview

<include from="snippets.md" element-id="descriptorDocumentationProviderNote"/>

[//]: # (GENERATED CONTENT START)

[//]: # (This content is generated by generate_descriptor_pages.main.kts script.)
[//]: # (DO NOT EDIT IT MANUALLY)

- [`<templateSet>`](#templateSet)
  - [`<template>`](#templateSet__template)
    - [`<variable>`](#templateSet__template__variable)
    - [`<context>`](#templateSet__template__context)
      - [`<option>`](#templateSet__template__context__option)

## `templateSet`
{#templateSet}

<tldr>

**Reference:** [Live Templates](live_templates.md)
, [Live Templates (IntelliJ IDEA Web Help)](https://www.jetbrains.com/help/idea/settings-live-templates.html)

</tldr>

The live templates file root element.

{type="narrow"}
Required
: **yes**


{type="narrow"}
Attributes
:
- `group` _(optional)_<br/>
  Name of the template set group, which is displayed in <ui-path>Settings | Editor | Live Templates</ui-path> list.
  If the group name is not provided, then templates' XML file name is used by default.
- `replace` _(optional)_<br/>

    Name of a template group that this template set replaces.
    Templates from the replaced group are removed and are skipped in settings and completion.

Children
:
  - [`<template>`](#templateSet__template)

### `template`
{#templateSet__template}

Describes a template.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `id` _(optional)_<br/>
  Optional template identifier.
- `name` _(**required**)_<br/>
  The template abbreviation typed by users in the editor to expand it.
  The abbreviation must be unique in the group containing the template.
- `value` _(**required**)_<br/>
  The text that the template is expanded to.<br/>
  It may contain plain text and reference [variables](#templateSet__template__variable) in the format `$VARIABLE_NAME$`.
  To escape a dollar sign `$` in the template text, use `$$`.
- `resource-bundle` _(optional)_<br/>
  Message bundle containing the template description specified by `key`.
- `key` _(optional)_<br/>
  The key of the template description provided in a message bundle defined by `resource-bundle`.
  Description is used in the UI.
  Overrides the value of `description`.
- `description` _(optional)_<br/>
  The template description used in the UI.
  It is ignored if the description is provided with `resource-bundle` and `key`.
- `shortcut` _(optional)_<br/>
  Defines a character that expands the template.
  Allowed values:
    - `SPACE` - space key
    - `TAB` - tab key
    - `ENTER` - enter key
    - `CUSTOM` - key defined in the <control>By default expand with</control> field in <ui-path>Settings | Editor | Live Templates</ui-path>
    - `NONE` - disables expanding with a key
- `toReformat` _(optional)_<br/>
  Defines whether the inserted code should be reformatted according to the language code style.<br/>
  Default value: `false`.
- `toShortenFQNames` _(optional)_<br/>
  Defines whether qualified names in the expanded code should be shortened,
  for example, fully qualified names of Java classes are imported.<br/>
  Shortening qualified names is performed in implementations of [`TemplateOptionalProcessor`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/template/impl/TemplateOptionalProcessor.java).<br/>
  Default value: `false`.
- `useStaticImport` _(optional)_<br/>
  Defines whether symbols used in the expanded code should be statically imported, if possible.<br/>
  Importing symbols statically is performed in implementations of [`TemplateOptionalProcessor`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/template/impl/TemplateOptionalProcessor.java).<br/>
  Default value: `false`.
- `deactivated` _(optional)_<br/>

    Allows deactivating the template.
    Deactivated templates are listed in the UI and can be activated by users.<br/>
    Default value: `false`.

Children
:
  - [`<context>`](#templateSet__template__context)
  - [`<variable>`](#templateSet__template__variable)

#### `variable`
{#templateSet__template__variable}

<tldr>

**Reference:** [Template Variables](https://www.jetbrains.com/help/idea/edit-template-variables-dialog.html)

</tldr>

Defines a variable to be used in the template `value`.
A single template can provide multiple variables.

The order of the variables determines the order in which the IDE will switch between
the corresponding input fields when the template is expanded.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `name` _(optional)_<br/>
  The variable name that is referenced in the [`<template>`](#templateSet__template) element's `value` attribute.
- `expression` _(optional)_<br/>
  Expression to calculate the value of the corresponding template input field automatically.<br/>
  The expression may contain the following constructs:
    - string constants in escaped double quotes, for example, `&quot;value&quot;`
    - names of other variables defined in the template, for example, `ANOTHER_VAR`
    - functions ([built-in](https://www.jetbrains.com/help/idea/template-variables.html#predefined_functions) or [custom](creating_live_template_functions.md)) with possible arguments
- `defaultValue` _(optional)_<br/>
  The default value for the corresponding input field of the expanded template
  if the expression does not give any result after calculation.<br/>
  It can refer to other live template variables, for example, `ANOTHER_VAR`.<br/>
  To define the default value as a literal, enclose it in escaped quotation marks, for example, `&quot;value&quot;`.
- `alwaysStopAt` _(optional)_<br/>

    If `true`, the IDE will always stop at the corresponding input of the expanded template.<br/>
    If `false`, the IDE will skip the corresponding input of the expanded template if the input value is defined.<br/>
    Default value: `false`.

Examples
:
- Empty variable allowing to provide a value manually by a user:
    ```xml
    <variable
        name="MY_VAR"
        expression=""
        defaultValue=""
        alwaysStopAt="true"/>
    ```
- Variable inserting the content of the clipboard,
and referencing the `PLACEHOLDER` variable if the clipboard content is empty:
    ```xml
    <variable
        name="PLACEHOLDER"
        expression=""
        defaultValue=""
        alwaysStopAt="true"/>
    <variable
        name="MY_VAR"
        expression="clipboard()"
        defaultValue="PLACEHOLDER"
        alwaysStopAt="true"/>
    ```
- Variable invoking completion and providing the `myValue` value if the completion doesn't provide any result:
    ```xml
    <variable
        name="MY_VAR"
        expression="complete()"
        defaultValue="&quot;myValue&quot;"
        alwaysStopAt="true"/>
    ```

#### `context`
{#templateSet__template__context}

Defines a mapping of a context type (for example, a Java method, a Markdown file) to applicability of the template
in this context type.

{type="narrow"}
Required
: no

Children
:
  - [`<option>`](#templateSet__template__context__option)

Example
:
  ```xml
  <context>
    <option name="JAVA_CODE" value="true"/>
    <option name="JAVA_COMMENT" value="false"/>
    <option name="JAVA_STRING" value="false"/>
  </context>
  ```

##### `option`
{#templateSet__template__context__option}

An entry specifying whether a given context type defined by the
`name` attribute is applicable for the template.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `name` _(**required**)_<br/>
  The context type name.<br/>
  To implement a custom context type, see the
  [context type implementation](providing_live_templates.md#implement-templatecontexttype)
  tutorial.
- `value` _(**required**)_<br/>

    A boolean value determining whether the context type defined with the
    [`<option>`](#templateSet__template__context__option) element's
    `name`
    attribute is applicable for the template.<br/>
    As context types are hierarchical, the `false` value can be used when the parent context type is applicable,
    and it is required to disable the applicability of more specific child context types.

[//]: # (GENERATED CONTENT END)

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Loader

<link-summary>UI guidelines on using loaders.</link-summary>

<tldr>

**Implementation:** [`AnimatedIcon.Default`](%gh-ic%/platform/ide-core/src/com/intellij/ui/AnimatedIcon.java)

</tldr>

A loader informs users about performing a lengthy operation.

![](loader.png){width=330}

## When to use

Follow the rules for [progress indicators](progress_indicators.md).

## How to use

The loader form and sizes are the same in all themes. Use the default 16x16 loader in all cases.
<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
JLabel(
    "Loading...",
    AnimatedIcon.Default(),
    SwingConstants.LEFT
)
```

</tab>
<tab title="Java" group-key="java">

```java
new JLabel(
    "Loading...",
    new AnimatedIcon.Default(),
    SwingConstants.LEFT
);
```

</tab>
</tabs>



A loader may have a label if the process is long and the loader is shown in an empty area. In this case, use a [progress text](progress_text.md) as the label:

![](loader_with_progress_text.png){width=597}

Remove the loader as soon as the process completes.

## Placement

<table style="none">

<tr>
    <td> Inside a field </td>
    <td> <img src="placement_field.png" width="161"/> </td>
</tr>

<tr>
    <td colspan="2">
        <code-block lang="java">
            ExpandableTextField textField = new ExpandableTextField();
            textField.addExtension(
              Extension.create(new AnimatedIcon.Default(), null, null)
            );
        </code-block>
    </td>
</tr>

<tr>
    <td>In a corner</td>
    <td> <img src="placement_corner.png" width="32" />
    </td>
</tr>

<tr>
    <td>  Next to an item </td>
    <td> <img src="placement_item.png" width="55" /> </td>
</tr>

<tr>
    <td> Before a progress text </td>
    <td> <img src="placement_progress_text.png" width="110" />
    </td>
</tr>

</table>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Marketing

> Please make sure to follow the guidelines from [Plugin Overview page](https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html) for an optimal presentation of your plugin on JetBrains Marketplace.
> The _Busy Plugin Developers. Episode 2_ discusses [5 tips for optimizing JetBrains Marketplace plugin page](https://youtu.be/oB1GA9JeeiY?t=52) in more detail.
>
> Plugin vendors can also submit a blog post for the JetBrains Platform blog, please see [Contributing to the Blog](https://plugins.jetbrains.com/docs/marketplace/contributing-to-the-blog.html) for details.

<link-summary>Widgets and badges for marketing material</link-summary>

## Embeddable Widgets

[JetBrains Marketplace](https://plugins.jetbrains.com) provides embeddable widgets that you can place on your website using a simple code snippet:

- Embeddable **Plugin Card** - renders an information card with the plugin name, icon, description, last update, and download counter,
- Embeddable **Install Plugin** Button - provides a button that allows installing your plugin right in the user's IDE, if it is currently open.

For more details, please follow the [Embeddable Content](https://plugins.jetbrains.com/docs/marketplace/embeddable-content.html) section in the JetBrains Marketplace documentation.

## Readme Badges

Adding badges to the <path>README</path> files in open-source projects is common for providing additional information for users.

Below are listed a few badges related to the IntelliJ SDK and plugins development provided by [shields.io](https://shields.io):

> The following code snippets contain `:pluginId` and `:packageName` placeholders.
>
> `:pluginId` can be obtained from your plugin page URL, like: `https://plugins.jetbrains.com/plugin/6954-kotlin` - in this case, it's `6954`.
>
> `:pluginId` also accepts a string ID that can be found in <control>Versions</control> tab, like `https://plugins.jetbrains.com/plugin/6954-kotlin/versions`.
>
> `:packageName` for ReSharper accepts only string ID.
>
{style="note"}

### Downloads

**IntelliJ Plugins**

![Downloads](https://img.shields.io/badge/downloads-10M-brightgreen)
```
![Downloads](https://img.shields.io/jetbrains/plugin/d/:pluginId)
```

**ReSharper Plugins**

![Downloads](https://img.shields.io/badge/downloads-90k-brightgreen)
```
![Downloads](https://img.shields.io/resharper/dt/:packageName)
```

### Rating

**IntelliJ Plugin Numeric Rating**

![Rating](https://img.shields.io/badge/rating-4.5/5-brightgreen)
```
![Rating](https://img.shields.io/jetbrains/plugin/r/rating/:pluginId)
```

**IntelliJ Plugin Stars Rating**

![Rating](https://img.shields.io/badge/rating-%E2%98%85%E2%98%85%E2%98%85%E2%98%85%C2%BD-brightgreen){ignore-vars="true"}
```
![Rating](https://img.shields.io/jetbrains/plugin/r/stars/:pluginId)
```

### Version

**IntelliJ Plugins**

![Version](https://img.shields.io/jetbrains/plugin/v/IdeaVim)
```
![Version](https://img.shields.io/jetbrains/plugin/v/:pluginId)
```

**ReSharper Plugins**

![Version](https://img.shields.io/badge/resharper-v2017.2.0-blue)
```
![Version](https://img.shields.io/resharper/v/:packageName)
```

**ReSharper Plugins (incl. pre-releases)**


![Version](https://img.shields.io/badge/resharper-v2017.3.0--pre0001-yellow)
```
![Version](https://img.shields.io/resharper/v/:packageName?include_prereleases)
```

### Other Badges

**GitHub Actions Workflow**

![Build](https://github.com/JetBrains/intellij-sdk-docs/actions/workflows/code-samples.yml/badge.svg)
```
![Build](https://github.com/<OWNER>/<REPOSITORY>/actions/workflows/<WORKFLOW_FILE>/badge.svg)
```

**JetBrains IntelliJ Platform SDK Docs**

[![JetBrains IntelliJ Platform SDK Docs](https://jb.gg/badges/docs.svg)](https://plugins.jetbrains.com/docs/intellij)
```
[![JetBrains IntelliJ Platform SDK Docs](https://jb.gg/badges/docs.svg)](https://plugins.jetbrains.com/docs/intellij)
```

**JetBrains Platform Slack**

[![Slack](https://img.shields.io/badge/Slack-#intellij--platform-blue?style=flat-square&logo=Slack)](https://plugins.jetbrains.com/slack)
```
[![Slack](https://img.shields.io/badge/Slack-#intellij--platform-blue?style=flat-square&logo=Slack)](https://plugins.jetbrains.com/slack)
```

**@JBPlatform on X (formerly Twitter)**

[![X Follow](https://img.shields.io/badge/follow-@JBPlatform-1DA1F2?logo=x)](https://x.com/JBPlatform)
```
[![X Follow](https://img.shields.io/badge/follow-@JBPlatform-1DA1F2?logo=x)](https://x.com/JBPlatform)
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Messaging Infrastructure

<link-summary>Subscribing and publishing messages via message bus.</link-summary>

IntelliJ Platform's messaging infrastructure is an implementation of [Publisher Subscriber Pattern](https://w.wiki/5xaV) that provides additional features like _broadcasting on hierarchy_ and special _nested events_ processing (a _nested event_ is an event directly or indirectly fired from the callback of another event).

> All available listeners/topics are listed on [](intellij_platform_extension_point_list.md) under _Listeners_ sections.

## Design

The following sections describe the main components of the messaging API:
- [Topic](#topic)
- [Message Bus](#message-bus)
- [Connection](#connection)

### Topic

The [`Topic`](%gh-ic%/platform/extensions/src/com/intellij/util/messages/Topic.java) class serves as an endpoint at the messaging infrastructure.
Clients are allowed to subscribe to a specific topic within a bus and send messages to that topic within that particular bus.
To clarify the corresponding message bus, a `Topic` field declaration should be annotated with `@Topic.AppLevel` and/or `@Topic.ProjectLevel`.

```plantuml
@startuml

skinparam monochrome true
skinparam DefaultFontName JetBrains Sans
skinparam DefaultFontSize 14
skinparam classAttributeIconSize 0
hide empty fields
hide empty methods

left to right direction

class "com.intellij.util.messages.Topic" as Topic {
  +getDisplayName()
  +getBroadcastDirection()
}

class ListenerClass {
  +method1()
  {method} ...
  +methodN()
}

Topic o--> "1 " ListenerClass

@enduml
```

#### Topic Properties

Display name
: Human-readable name used for logging/monitoring purposes.

Broadcast direction
: See [](#broadcasting) for more details. The default value is `TO_CHILDREN`.

Listener class
: A business interface for a particular topic.
  Subscribers register an implementation of this interface at the messaging infrastructure.
  Publishers later retrieve objects that conform to the interface (IS-A) and call any methods defined on those implementations.
  The messaging infrastructure takes care of dispatching the message to all subscribers of the topic by calling the same method with the same arguments on the registered implementation callbacks.

### Message Bus

[`MessageBus`](%gh-ic%/platform/extensions/src/com/intellij/util/messages/MessageBus.kt) is the core of the messaging system.
It is used in the following scenarios:

```plantuml
@startuml

skinparam monochrome true
skinparam DefaultFontName JetBrains Sans
skinparam DefaultFontSize 14

:Subscriber:
(Create connection) as (C)
note top of (C): Necessary for subscribing
Subscriber --> C

:Publisher:
(Publish)
Publisher --> Publish

@enduml
```

### Connection

Connection is represented by [`MessageBusConnection`](%gh-ic%/platform/extensions/src/com/intellij/util/messages/MessageBusConnection.kt) class and manages all subscriptions for a particular client within a particular bus.

```plantuml
@startuml

skinparam monochrome true
skinparam DefaultFontName JetBrains Sans
skinparam DefaultFontSize 14
hide empty members
hide circle

class MessageBus
class MessageBusConnection
class "Default Handler" as DH
class "(Topic-Handler)" as TH

MessageBus "1" o-- "*" MessageBusConnection
MessageBusConnection o-- "0..1" DH
MessageBusConnection *-- "*" TH

@enduml
```

Connection stores *topic-handler* mappings - callbacks to invoke when message for the target topic is received (not more than one handler per topic within the same connection is allowed).

It's possible to specify *default handler* and subscribe to the target topic without explicitly provided callback.
Connection will use that *default handler* when storing a topic-handler mapping.

It's possible to explicitly release acquired resources (see `disconnect()`).
Also, it can be plugged to standard semi-automatic disposing ([`Disposable`](%gh-ic%/platform/util/src/com/intellij/openapi/Disposable.java)).

## Messaging API Usage

The sample below assumes a Project-level topic.

### Defining a Business Interface and a Topic

Create an interface with the business methods and a topic field bound to the business interface:

```java
public interface ChangeActionNotifier {

  @Topic.ProjectLevel
  Topic<ChangeActionNotifier> CHANGE_ACTION_TOPIC =
      Topic.create("custom name", ChangeActionNotifier.class);

  void beforeAction(Context context);
  void afterAction(Context context);
}
```

### Subscribing to a Topic

```plantuml
@startuml

skinparam monochrome true
skinparam DefaultFontName JetBrains Sans
skinparam DefaultFontSize 14
skinparam DefaultTextAlignment center
skinparam ActivityBorderThickness 1

left to right direction

' Define the activity
(*) --> if "" then
  --> [no connection] "Get a message\nbus reference"
  --> "Create\na connection\nto the bus"
  --> "Subscribe"
else
  --> [connection exists] "Subscribe"
endif
--> (*)
@enduml
```

> If targeting 2019.3 or later, use [declarative registration](plugin_listeners.md) whenever possible.
>
{style="note"}

```java
project.getMessageBus().connect().subscribe(
    ChangeActionNotifier.CHANGE_ACTION_TOPIC,
    new ChangeActionNotifier() {
        @Override
        public void beforeAction(Context context) {
          // Process 'before action' event.
        }
        @Override
        public void afterAction(Context context) {
          // Process 'after action' event.
        }
});
```

`MessageBus` instances are available via [`ComponentManager.getMessageBus()`](%gh-ic%/platform/extensions/src/com/intellij/openapi/components/ComponentManager.java).
Many standard interfaces implement returning a message bus, e.g., [`Application.getMessageBus()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/Application.java) and [`Project.getMessageBus()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/Project.java).

### Publishing Messages

```plantuml
@startuml

skinparam monochrome true
skinparam DefaultFontName JetBrains Sans
skinparam DefaultFontSize 14
skinparam DefaultTextAlignment center
skinparam ActivityBorderThickness 1

left to right direction

' Define the activity
(*) --> "Get message\nbus reference"
  --> "Ask the bus\nfor a particular\ntopic's publisher"
  --> "Call target\nmethod on\npublisher"
  --> "Messaging calls\nthe same method\non target handlers"
--> (*)
@enduml
```

```java
public void doChange(Context context) {
  ChangeActionNotifier publisher = project.getMessageBus()
      .syncPublisher(ChangeActionNotifier.CHANGE_ACTION_TOPIC);
  publisher.beforeAction(context);
  try {
    // do action
  } finally {
    publisher.afterAction(context);
  }
}
```

## Broadcasting

Message buses can be organised into hierarchies.
Moreover, the IntelliJ Platform has them already:

```plantuml
@startuml

skinparam monochrome true
skinparam DefaultFontName JetBrains Sans
skinparam DefaultFontSize 14
hide empty members
hide circle

left to right direction

' Define the objects in the diagram
class "application bus" as AB
class "project bus" as PB
class "module bus" as MB

' Define the class relationships
AB o-- "*" PB
PB o-- "*" MB
@enduml
```

That allows to notify subscribers registered in one message bus on messages sent to another message bus.

Example setup:

```plantuml
@startuml

skinparam monochrome true
skinparam DefaultFontName JetBrains Sans
skinparam DefaultFontSize 14
hide empty members
hide circle
top to bottom direction

class "application bus" as AB
class "project bus" as PB
class "connection1" as C1

class "connection2" as C2
class "connection3" as C3
class "topic1-handler1" as T1H1

class "topic1-handler2" as T1H2
class "topic1-handler3" as T1H3

AB o-- PB
AB *-- C1

PB *-- C2
PB *-- C3
C1 *-- T1H1

C2 *-- T1H2
C3 *-- T1H3

@enduml
```

The example setup presents a simple hierarchy (the *application bus* is a parent of the *project bus*) with three subscribers for the same topic.

If *topic1* defines broadcast direction as `TO_CHILDREN`, we get the following:
1. A message is sent to *topic1* via *application bus*.
2. *handler1* is notified about the message.
3. The message is delivered to the subscribers of the same topic within *project bus* (*handler2* and *handler3*).

The main benefit of broadcasting is managing subscribers that are bound to child buses but interested in parent bus-level events.
In the example above, we may want to have project-specific functionality that reacts to the application-level events.
All we need to do is to subscribe to the target topic within the *project bus*.
No hard reference to the project-level subscriber will be stored at application-level then, i.e., we just avoided memory leak on project re-opening.

Broadcast configuration is defined per-topic.
The following options are available:

- `TO_CHILDREN` (default)
- `TO_DIRECT_CHILDREN`
- `NONE`
- `TO_PARENT`

See [`Topic.BroadcastDirection`](%gh-ic%/platform/extensions/src/com/intellij/util/messages/Topic.java) for detailed description of each option.

## Nested Messages

_Nested message_ is a message sent (directly or indirectly) during another message processing.
The IntelliJ Platform's messaging infrastructure guarantees that all messages sent to particular topic will be delivered at the sending order.

Consider the following configuration:

```plantuml
@startuml

skinparam DefaultFontName JetBrains Sans
skinparam DefaultFontSize 14
hide empty members
hide circle

top to bottom direction

class "bus" as B

class "connection1" as C1
class "connection2" as C2

class "topic-handler1" as TH1
class "topic-handler2" as TH2


B *-- C1
B *-- C2

C1 *-- TH1
C2 *-- TH2
@enduml
```

When a message is sent to the target topic, the following happens:

- _message1_ is sent
- _handler1_ receives _message1_ and sends _message2_ to the same topic
- _handler2_ receives _message1_
- _handler2_ receives _message2_
- _handler1_ receives _message2_

## Tips and Tricks

### Relief Listeners Management

Messaging infrastructure is very light-weight, so it's possible to reuse it at local sub-systems in order to relieve [Subscribers](https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern){ignore-vars="true"} construction.
Let's see what is necessary to do then:

1. Define business interface to work with.
2. Create shared message bus and topic that uses the interface above (_shared_ here means that either _subject_ or _subscribers_ know about them).

A manual implementation would require:

1. Define listener interface (business interface).
2. Provide reference to the _subject_ to all interested listeners.
3. Add listeners storage and listeners management methods (add/remove) to the _subject_.
4. Manually iterate all listeners and call target callback in all places where new event is fired.

### Avoid Shared Data Modification from Subscribers

We had a problem in a situation when two subscribers tried to modify the same document
([IDEA-71701](https://youtrack.jetbrains.com/issue/IDEA-71701)).

The thing is that every document change is performed by the following scenario:

1. _before change_ event is sent to all document listeners and some of them publish new messages during that;
2. actual change is performed;
3. _after change_ event is sent to all document listeners;

We had the following then:

1. _message1_ is sent to the topic with two subscribers;
2. _message1_ is queued for both subscribers;
3. _message1_ delivery starts;
4. _subscriber1_ receives _message1_;
5. _subscriber1_ issues document modification request at particular range (e.g. _document.delete(startOffset, endOffset)_);
6. _before change_ notification is sent to the document listeners;
7. _message2_ is sent by one of the standard document listeners to another topic within the same message bus during _before change_ processing;
8. the bus tries to deliver all pending messages before queuing _message2_;
9. _subscriber2_ receives _message1_ and also modifies a document;
10. the call stack is unwound and _actual change_ phase of document modification operation requested by _subscriber1_ begins;

**The problem** is that document range used by _subscriber1_ for initial modification request is invalid if _subscriber2_ has changed document's range before it.
# Migrating DevKit Plugin to Gradle

<!-- Copyright 2000-2022 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<link-summary>Migrating existing DevKit-based plugins to Gradle setup.</link-summary>

> See [Revamping Plugins #3 – Migrating from DevKit to the Gradle build system](https://blog.jetbrains.com/platform/2021/12/migrating-from-devkit-to-the-gradle-build-system/) blog post for a step-by-step walk-through.

Converting a plugin created with the old DevKit approach (which can be used for [creating themes](creating_theme_project.md)) to a Gradle-based plugin project can be done using the <control>New Project</control> wizard to create a Gradle-based project around the existing DevKit-based project:
* Ensure the directory containing the DevKit-based IntelliJ Platform plugin project can be fully recovered if necessary.
* Delete all the artifacts of the DevKit-based project:
    * <path>.idea</path> directory
    * <path>[modulename].iml</path> file
    * <path>out</path> directory
* Arrange the existing source files within the project directory in the Gradle [source set](https://docs.gradle.org/current/userguide/java_plugin.html#sec:java_project_layout) format.
* Use the <control>[New Project](creating_plugin_project.md#create-ide-plugin)</control> wizard as though creating a new Gradle-based plugin project from scratch. On the <control>New Project</control> page choose the <control>IDE Plugin</control> generator and set the values of:
    * <control>Group</control> to the existing package in the initial source set.
    * <control>Artifact</control> to the name of the existing plugin.
    * <control>Name</control> to the name of the directory where the existing plugin is located, e.g. if the plugin project base directory is <path>/Users/john/Projects/old_plugin</path>, it should be the <path>old_plugin</path>.
    * <control>Location</control> to the name of the plugin's parent directory, e.g. if the plugin project base directory is <path>/Users/john/Projects/old_plugin</path>, it should be the <path>/Users/john/Projects</path>.
* Click <control>Finish</control> to create the new Gradle-based plugin.
* [Add more modules](https://www.jetbrains.com/help/idea/gradle.html#gradle_add_module) using Gradle [source sets](https://www.jetbrains.com/help/idea/gradle.html#gradle_source_sets) as needed.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Miscellaneous Swing Components

<link-summary>Overview of useful Swing components provided by IntelliJ Platform.</link-summary>

### `Messages`

[`Messages`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/Messages.java) provides a way to show simple
message boxes, input dialogs (modal dialogs with a text field), and chooser dialogs (modal dialogs with a combo box).
On macOS, the message boxes use the native UI.

The `showCheckboxMessageDialog()` function provides an easy way to implement a <control>Do not show this again</control> checkbox on messages.

> It is recommended to use non-modal notifications instead of modal message boxes whenever appropriate.
> Refer to the [](notifications.md) topic for more information.
>
{title="Avoid Modal Dialogs"}

### `JBSplitter`

[`JBSplitter`](%gh-ic%/platform/platform-api/src/com/intellij/ui/JBSplitter.java) is a replacement for the standard [`JSplitPane`](https://docs.oracle.com/javase/8/docs/api/javax/swing/JSplitPane.html) class.
Unlike some other JetBrains-enhanced Swing components, it is not a drop-in replacement and has a different API.
However, to achieve a consistent user experience, it is recommended to use `JBSplitter` instead of the standard `JSplitPane`.

To add components to the splitter, call the `setFirstComponent()` and `setSecondComponent()` methods.

`JBSplitter` supports automatic remembering of the split proportion.
To enable it, call the `setSplitterProportionKey()` method and pass the unique ID under which the proportion will be stored.

### `JBTabs`

[`JBTabs`](%gh-ic%/platform/platform-api/src/com/intellij/ui/tabs/JBTabs.java) is an implementation of the tab control, used for editor tabs and a few other components.
It has a significantly different look & feel compared to the standard Swing tabs and looks less native on the macOS platform,
so it's up to the developer to choose which tab control would be more appropriate.

### Toolbars

See [](toolbar.md) in the UI Guidelines for an overview.

[](basic_action_system.md#buildingToolbarPopupMenu) covers creating `AnAction`-based toolbars.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Mnemonics

<link-summary>Guidelines on using mnemonics.</link-summary>

A mnemonic is an alphanumeric character, which indicates the key to press to activate a command or navigate to a component.

There are *regular* and *numeric* mnemonics.

* Regular mnemonics are used inside the text. The mnemonic is underlined in this case to be distinguishable.

  In a control:

  ![](inside.png){width=264}

  In a menu:

  ![](menu.png){width=288}

  Activate the control by pressing the mnemonic with:

    * Alt modifier key on Windows/Linux

    * Ctrl+Alt modifier keys on macOS.

* Numeric mnemonics are used as the first numeric character of an action in a popup:

  ![](first.png){width=373 style=block}
  *Invoke the action by pressing the corresponding number key.*

## When to use

Specify mnemonics wherever possible in menus and controls. Mnemonics make the functionality more usable for power users who interact through the keyboard. Moreover, mnemonics make the functionality accessible for users with disabilities.

If there are many actions and/or controls, and it is not possible to assign mnemonics for all of them:

* Provide mnemonics for the most frequently used actions/controls.

* Provide mnemonics for [group headers](group_header.md) for quick navigation to the first element of the group.

Note: The rules for using numeric mnemonics in popups are under discussion. [Contact us](https://youtrack.jetbrains.com/issues/IJSDK) if you have questions.

## How to use

![](letters.png){width=555}

Make mnemonics in the label discoverable, they must be easy to find:

* Use letters at the beginning of the first or second word of the label.

* Use letters with wide widths, such as w, m, and capital letters.

* Avoid using letters that are difficult to see when they are assigned to underlined keys. These letters include:

    * Letters with descenders, such as g, j, p, q, or y.

    * Letters next to a letter with a descender.

    * Letters that are only one pixel wide, such as i or l.

Make it easy to remember for the most frequently used actions:

* Use standard Windows mnemonic if any. For example, Properties, Rename, Delete, Cut, Copy, Paste, Exit, etc.
  Note that Windows users are more likely to form habits for mnemonics as mnemonics are not that common on macOS or Linux.

* Do **not** use silent letters. For example, Design, Column, etc.

Do **not** assign mnemonics to the default or Cancel buttons. The default button is typically assigned to the ENTER key, and Cancel is assigned to the ESC key.

Do **not** use the same mnemonic letter twice in the same window; duplicated mnemonics confuse users. If you need to assign a new mnemonic in an existing context, check that it's not already taken. If it is, prioritize the mnemonic for the more frequently used action.

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Modifying the PSI

<link-summary>Creating, deleting, and modifying PSI elements.</link-summary>

The PSI is a read/write representation of the source code as a tree of elements corresponding to a source file's structure.
You can modify the PSI by *adding*, *replacing*, and *deleting* PSI elements.

To perform these operations, you use methods such as `PsiElement.add()`, `PsiElement.delete()`, and `PsiElement.replace()`, as well as other methods defined in the [`PsiElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java) interface that let you process multiple elements in a single operation, or to specify the exact location in the tree where an element needs to be added.

Like document operations, PSI modifications need to be wrapped in a write action and in command (and can only be performed in the event dispatch thread).
See [the Documents article](documents.md#what-are-the-rules-of-working-with-documents) for more information on commands and write actions.

## Creating the New PSI

The PSI elements to add to the tree or replace existing PSI elements are usually *created from text*.
In the most general case, you use the `createFileFromText()` method of [`PsiFileFactory`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiFileFactory.java) to create a new file that contains the code construct which you need to add to the tree or to use as a replacement for an existing element, traverse the resulting tree to locate the specific part that you need, and then pass that element to `add()` or `replace()`.
See also [](psi_files.md#how-do-i-create-a-psi-file).

Most languages provide factory methods that let you create specific code constructs more easily.
Examples:
* [`PsiJavaParserFacade`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/PsiJavaParserFacade.java) class contains methods such as `createMethodFromText()`, which creates a Java method from the given text
* [`SimpleElementFactory.createProperty()`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleElementFactory.java) creating a Simple language property

When you're implementing refactorings, [intentions](code_intentions.md), or inspection [quickfixes](code_inspections_and_intentions.md) that work with existing code, the text that you pass to the various `createFromText()` methods will combine hard-coded fragments and fragments of code taken from the existing file.
For small code fragments (individual identifiers), you can simply append the text from the existing code to the text of the code fragment you are building.
In that case, you need to make sure that the resulting text is syntactically correct.
Otherwise, the `createFromText()` method will throw an exception.

For larger code fragments, it's best to perform the modification in several steps:

* create a replacement tree fragment from the text, leaving placeholders for the user code fragments;
* replace the placeholders with the user code fragments;
* replace the element in the original source file with the replacement tree.

This ensures that the user code's formatting is preserved and that the modification does not introduce any unwanted whitespace changes.
Just as everywhere else in the IntelliJ Platform API, the text passed to `createFileFromText()` and other `createFromText()` methods must use only `\n` as line separators.

As an example of this approach, see the quickfix in the `ComparingStringReferencesInspection` [example](code_inspections.md):

```java
```
{src="comparing_string_references_inspection/src/main/java/org/intellij/sdk/codeInspection/ComparingStringReferencesInspection.java" include-symbol="applyFix"}

## Maintaining Tree Structure Consistency

The PSI modification methods do not restrict you in the way you can build the resulting tree structure.
For example, when working with a Java class, you can add a `for` statement as a direct child of a `PsiMethod` element, even though the Java parser will never produce such a structure (the `for` statement will always be a child of the `PsiCodeBlock`) representing the method body.
Modifications that produce incorrect tree structures may appear to work, but they will lead to problems and exceptions later.
Therefore, you always need to ensure that the structure you built with PSI modification operations is the same as what the parser would produce when parsing the code that you've created.

To make sure you're not introducing inconsistencies, you can call `PsiTestUtil.checkFileStructure()` in the tests for your action that modifies the PSI.
This method ensures that the structure you've built is the same as what the parser produces.

## Whitespaces and Imports

When working with PSI modification functions, you should never create individual whitespace nodes (spaces or line breaks) from the text.
Instead, all whitespace modifications are performed by the formatter, which follows the code style settings selected by the user.
Formatting is automatically performed at the end of every command, and if you need, you can also perform it manually using the `reformat(PsiElement)` method in the [`CodeStyleManager`](%gh-ic%/platform/core-api/src/com/intellij/psi/codeStyle/CodeStyleManager.java) class.

Also, when working with Java code (or with code in other languages with a similar import mechanism such as Groovy or Python), you should never create imports manually.
Instead, you should insert fully-qualified names into the code you're generating, and then call the `shortenClassReferences()` method in the  [`JavaCodeStyleManager`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/codeStyle/JavaCodeStyleManager.java) (or the equivalent API for the language you're working with).
This ensures that the imports are created according to the user's code style settings and inserted into the file's correct place.

## Combining PSI and Document Modifications

In some cases, you need to perform a PSI modification and then to perform an operation on the document you've just modified through the PSI (for example, start a [live template](live_templates.md)).
To complete the PSI-based post-processing (such as formatting) and commit the changes to the document, call `doPostponedOperationsAndUnblockDocument()` on [`PsiDocumentManager`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiDocumentManager.java) instance.
<!-- Copyright 2000-2023 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Module

<tldr>

**Product Help:** [Modules](https://www.jetbrains.com/help/idea/modules.html)

</tldr>

<link-summary>Modules represent a unit of a project.</link-summary>

A module is a discrete unit of functionality that can be run, tested, and debugged independently.
Modules include such things as source code, build scripts, unit tests, deployment descriptors, etc.

## Module Components

### Content Roots

The directories where the files belonging to the module (source code, resources, etc.) are stored.
Each directory can belong to one and only one module; it's not possible to share a content root between multiple modules.

### Source roots

A content root can have multiple source roots underneath it.
Source roots can have different types: regular source roots, test source roots, resource roots, etc.

In IntelliJ IDEA, source roots are used as roots of the package hierarchy structure.
Java classes directly under a source root will be in the root package.
Source roots can also be used to implement more fine-grained dependency checks.
Code under a regular source root cannot depend on code under a test source root.

> Not all other IntelliJ Platform-based IDEs use source roots.

### Order Entries

The dependencies of a module, which are stored in an ordered list.
A dependency can be a reference to an [SDK](sdk.md), a [library](library.md), or another module.

### Facets

The list of framework-specific configuration entries represented in a dedicated [](facet.md).

### Other

In addition to that, a module can store other settings, such as a module-specific [SDK](sdk.md), compile output path settings, etc.
Plugins can store additional data associated with a module by creating facets or module-level components.

## Working with Modules

<include from="project.md" element-id="useWorkspaceModelAPI"/>

The IntelliJ Platform provides a number of classes and interfaces you can use to work with modules:

* [`Module`](%gh-ic%/platform/core-api/src/com/intellij/openapi/module/Module.java)
* [`ModuleUtil`](%gh-ic%/platform/lang-api/src/com/intellij/openapi/module/ModuleUtil.java) and [`ModuleUtilCore`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/module/ModuleUtilCore.java)
* [`ModuleManager`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/module/ModuleManager.kt)
* [`ModuleRootManager`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ModuleRootManager.java)
* [`ModuleRootModel`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ModuleRootModel.java)
* [`ModifiableModuleModel`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/module/ModifiableModuleModel.java)
* [`ModifiableRootModel`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ModifiableRootModel.java)

This section discusses how to complete some common tasks related to management of modules.

See [Changing the Project Structure](project.md#changing-the-project-structure) for information on modifying project/module structure.

### How do I get a list of modules the project includes?

Use the `ModuleManager.getModules()` method.

### How do I get dependencies and classpath of a module?

_Order entries_ include SDK, libraries and other modules the module uses.
With the IntelliJ IDEA UI, you can view order entries for a module on the <control>Dependencies</control> tab of the <control>Project Structure</control> dialog box.

To explore the module dependencies, use the [`OrderEnumerator`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/OrderEnumerator.java) class.

The following code snippet illustrates how you can get classpath (classes root of all dependencies) for a module:

```java
VirtualFile[] roots = ModuleRootManager.getInstance(module).orderEntries().classes().getRoots();
```

### How do I get the SDK the module uses?

Use the `ModuleRootManager.getSdk()` method.
This method returns a value of the [`Sdk`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/projectRoots/Sdk.java) type.

The following code snippet illustrates how you can get detailed information on SDK the specified module uses:

```java
ModuleRootManager moduleRootManager = ModuleRootManager.getInstance(module);
Sdk sdk = moduleRootManager.getSdk();
String jdkInfo = "Module: " + module.getName() +
    " SDK: " + sdk.getName() +
    " SDK version: " + sdk.getVersionString() +
    " SDK home directory: " + sdk.getHomePath();
```

### How do I get a list of modules on which this module directly depends?

Use the `ModuleRootManager.getDependencies()` method to get an array of the `Module` type values or the `ModuleRootManager.getDependencyModuleNames()` to get an array of module names.
To clarify, consider the following code snippet:

```java
ModuleRootManager moduleRootManager = ModuleRootManager.getInstance(module);
Module[] dependentModules = moduleRootManager.getDependencies();
String[] dependentModulesNames = moduleRootManager.getDependencyModuleNames();
```

### How do I get a list of modules that depend on this module?

Use the `ModuleManager.getModuleDependentModules(module)` method.

Note that you can also check whether a module (*module1*) depends on another specified module (*module2*) using the `ModuleManager.isModuleDependent()` method in the following way:

```java
boolean isDependent = ModuleManager.getInstance(project).isModuleDependent(module1, module2);
```

### How do I get a module to which the specified file or PSI element belongs?

* To get the project module to which the specified file belongs, use the `ModuleUtil.findModuleForFile()` static method.

  To clarify, consider the following code snippet:

```java
String pathToFile = "/Users/john/plugins/myPlugin/src/MyAction.java";
VirtualFile virtualFile = LocalFileSystem.getInstance().findFileByPath(pathToFile);
Module module = ModuleUtil.findModuleForFile(virtualFile, myProject);
String moduleName = module == null ? "Module not found" : module.getName();
```

* To get the project module to which the specified [PSI element](psi_elements.md) belongs, use the `ModuleUtil.findModuleForPsiElement()` method.

### Storing a Reference to a Module

Use [`ModulePointer`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/module/ModulePointer.java) to store a reference to a `Module` by its instance or name.
A removal or rename of the `Module` will be tracked automatically.

### Accessing Module Roots

Information about module roots can be accessed via [`ModuleRootManager`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ModuleRootManager.java).
For example, the following snippet shows how to access the content roots of a module:

```java
VirtualFile[] contentRoots = ModuleRootManager.getInstance(module).getContentRoots();
```

### Checking Belonging to a Module Source Root

To check if a virtual file or directory belongs to a module source root, use the `ProjectFileIndex.getSourceRootForFile()` method.
This method returns `null` if the file or directory does not belong to any source root of modules in the project.

```java
VirtualFile moduleSourceRoot = ProjectRootManager.getInstance(project).getFileIndex().getSourceRootForFile(virtualFileOrDirectory);
```

### Java: Compiler Output Properties

Obtain [`CompilerModuleExtension`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/CompilerModuleExtension.java) for given `Module` instance to access <control>Compiler Output</control> path related properties.

## Receiving Notifications About Module Changes

To receive notifications about module changes (modules being added, removed or renamed), use the [message bus](messaging_infrastructure.md) and the `ProjectTopics.MODULES` topic:

```java
project.getMessageBus().connect().subscribe(
    ProjectTopics.MODULES,
    new ModuleListener() {
      @Override
      public void moduleAdded(@NotNull Project project, @NotNull Module module) {
        // action
      }
    });
```

If targeting 2019.3 or later, [declarative registration](plugin_listeners.md) is available as well.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Supporting Module Types

<link-summary>Adding custom module types.</link-summary>

IntelliJ Platform provides a set of standard module types.
However, an application might need a module of a type that isn't supported yet.
This tutorial shows how to register a new module type and link it to the project creation procedure and the UI.

The source code for the [`module`](%gh-sdk-samples-master%/module) and [`project_wizard`](%gh-sdk-samples-master%/project_wizard) code samples is used throughout this tutorial.

## Pre-Requirements

Create an empty plugin project.
See the [](creating_plugin_project.md) section for details.

> The UI for selecting module types and the creation of modules through project wizard is IntelliJ IDEA-specific.
>
{style="note"}

## Register a New Module Type

Add a new `com.intellij.moduleType` implementation with the IntelliJ Platform in the <path>[plugin.xml](plugin_configuration_file.md)</path> configuration file.

```xml
<extensions defaultExtensionNs="com.intellij">
  <moduleType
      id="DEMO_MODULE_TYPE"
      implementationClass="org.intellij.sdk.module.DemoModuleType"/>
</extensions>
```

## Implement `ModuleType` Interface

Create the `DemoModuleType` implementation based on [`ModuleType`](%gh-ic%/platform/lang-core/src/com/intellij/openapi/module/ModuleType.java).

`getNodeIcon()` should return module type specific icon.

```java
```
{src="module/src/main/java/org/intellij/sdk/module/DemoModuleType.java" include-symbol="DemoModuleType"}

## Implement Custom Module Builder

Create `DemoModuleBuilder` based on [`ModuleBuilder`](%gh-ic%/platform/lang-core/src/com/intellij/ide/util/projectWizard/ModuleBuilder.java).

```java
```
{src="module/src/main/java/org/intellij/sdk/module/DemoModuleBuilder.java" include-symbol="DemoModuleBuilder"}

## Provide Custom Wizard Steps

Provide a straightforward implementation of UI components for the project creating stage.
Create a generic `DemoModuleWizardStep` based on [`ModuleWizardStep`](%gh-ic%/platform/lang-core/src/com/intellij/ide/util/projectWizard/ModuleWizardStep.java)

```java
```
{src="module/src/main/java/org/intellij/sdk/module/DemoModuleWizardStep.java" include-symbol="DemoModuleWizardStep"}

## Creating a Module of New Type

After compiling and running the plugin in a development instance, create a new project.
Select <ui-path>File | New | Module...</ui-path>.
A new module type and its settings panel are available in the Project Wizard.

![New Module Type](new_module_type.png){width="800"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Multiple Carets

<link-summary>Working with multiple carets in a single editor.</link-summary>

<tldr>

**Product Help:** [Multiple cursors and selection ranges](https://www.jetbrains.com/help/idea/multicursor.html)

</tldr>

Most editor actions (keyboard navigation, text insertion and deletion, etc.) will be applied to each caret independently.
Each caret has its own associated selection, which is a continuous range of document characters (can be empty).
When after some action two or more carets end up in the same visual position, they are merged into a single caret with their associated selections merged into a single one.
A similar thing will happen when selections for several carets become overlapped: only one of the carets will remain, and the selections will be merged.

There's a concept of _primary_ caret — the one on which non-multi-caret-aware actions and the actions which need a single-point document context (like code completion) will operate.
Currently, the most recent caret is considered the primary one.

## Core Functionality

Core logic related to multi-caret implementation such as accessing currently existing carets, adding and removing carets, is available via [`CaretModel`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/CaretModel.java).
For text selection, see [`SelectionModel`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/SelectionModel.java).

Methods in `CaretModel` and `SelectionModel` to query and modify caret and selection positions work by default on the primary caret.
In the context of `CaretModel.runForEachCaret()` method though, they operate on the current caret.

`SelectionModel.getBlockSelectionStarts()` and `getBlockSelectionEnds()` work in multi-caret state, returning all selected regions.

## Editor Actions

### `EditorAction` and `EditorActionHandler`

When [`EditorActionHandler`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/EditorActionHandler.java) is invoked, an additional parameter will be passed to it: a caret instance on which it should operate, or `null` if it's invoked without any caret context.
If the handler invokes another handler (delegate handler for the same `actionId` or a completely unrelated handler), that parameter should normally be passed to the delegate unchanged (unless no context caret has been provided to the handler, but it needs to invoke another handler on a specific caret).
Of course, the handler can just ignore the caret parameter if its functionality is not related to caret/selection position.

If the handler needs to implement multi-caret functionality it can do so explicitly in the overridden `doExecute` method, but if it just needs that method to be invoked for each caret, it suffices to pass a parameter to `EditorActionHandler` constructor to make `doExecute` called for each caret when the handler is invoked without a specific caret context.

### Editor Action Delegates

The following delegates are available:

* [`EnterHandlerDelegate`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/enter/EnterHandlerDelegate.java)
* [`BackspaceHandlerDelegate`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/BackspaceHandlerDelegate.java)
* [`JoinLinesHandlerDelegate`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/JoinLinesHandlerDelegate.java)
* [`EditorNavigationDelegate`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/EditorNavigationDelegate.java)
* [`SmartEnterProcessor`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/smartEnter/SmartEnterProcessor.java)
* [`CommentCompleteHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/CommentCompleteHandler.java)
* [`StatementUpDownMover`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/moveUpDown/StatementUpDownMover.java)
* [`CodeBlockProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/CodeBlockProvider.java)

There is no need to make any changes in the handlers to support multiple carets — they are already invoked for each caret.

## Typing Actions

### `TypedActionHandler`, `TypedHandlerDelegate`

[`TypedActionHandler`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/TypedActionHandler.java) and [`TypedHandlerDelegate`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/TypedHandlerDelegate.java) implementations are invoked only once for each typed character.
If those handlers need to support multiple carets, they will need to implement that explicitly.

[`EditorModificationUtil`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/EditorModificationUtil.java).
`typeInStringAtCaretHonorMultipleCarets()` method is available to do the most common task in this case: inserting the same text into all caret positions and/or moving all carets relatively to their current position.
Examples of its usage:

* [`TypedAction`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/TypedAction.java).
* [`XmlGtTypedHandler`](%gh-ic%/xml/impl/src/com/intellij/codeInsight/editorActions/XmlGtTypedHandler.java).

> [`TypedHandlerDelegate`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/TypedHandlerDelegate.java) implementations are invoked automatically for each caret.
> If one wants to implement custom multicaret behaviour on typing, [`TypedActionHandler`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/editor/actionSystem/TypedActionHandler.java) needs to be provided instead.
>
{style="note"}

## Code Insight Actions

Existing actions inheriting from [`CodeInsightAction`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/actions/CodeInsightAction.java) will work for primary caret only.
To support multiple carets, one should subclass [`MultiCaretCodeInsightAction`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/actions/MultiCaretCodeInsightAction.java) instead.
Each caret might have a different editor and PSI instance, so using the old API is not possible.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Navigation Bar

<link-summary>Implementing custom navigation bars.</link-summary>

<tldr>

**Product Help:** [Navigation bar](https://www.jetbrains.com/help/idea/guided-tour-around-the-user-interface.html#navigation-bar)

</tldr>

The navigation bar implementation is used to customize and extend the
[navigation bar](https://www.jetbrains.com/help/idea/guided-tour-around-the-user-interface.html#navigation-bar)
structure.

The starting point for the navigation bar extension is the
[`NavBarModelExtension`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/navigationToolbar/NavBarModelExtension.java)
interface, which is registered in the `com.intellij.navbar` extension point.

To reuse the IntelliJ Platform implementation, you can extend one of two classes:

- [`DefaultNavBarExtension`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/navigationToolbar/DefaultNavBarExtension.java)
- [`StructureAwareNavBarModelExtension`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/navigationToolbar/StructureAwareNavBarModelExtension.kt)

## Default Navigation Bar

`DefaultNavBarExtension` is the basic implementation of the navigation bar for any files.
Inherit from this class if you want to create a simple navigation bar where you can change the display of folders or files for your language.

In this case, you probably only need to override the following two methods:

- `getPresentableText()` – returns a string representation of the navigation bar part element passed to it.
- `getIcon()` – returns the icon for the navigation bar part passed to it.

## Structure Aware Navigation Bar

`StructureAwareNavBarModelExtension` is an advanced implementation that provides the ability to display specific file elements (e.g., the name of classes, functions, etc.) in a bar e.g.,
the name of the class at the current caret position.
Inherit from it if you want to add navigation bar support to your language with support for specific file elements.

> Don't forget to implement [](structure_view.md), this is necessary to build a file structure model based on which the navigation bar displays a specific element.
{style="note"}

In this case, you will also need to override the `getLanguage()` in addition to the two methods described earlier, this method returns the language instance for which this extension will work.

The `adjustElement()` method allows you to modify the navigation bar element.
It can be used, for example, when you want to show a class in the navigation bar when the caret is located in a comment that is attached to the class.

You probably won't need to override other methods unless you want to write your own implementation of the entire `NavBarModelExtension` interface.

Note that the `getSuitableClasses()` method on the structure view model class that implements `com.intellij.ide.structureView.TextEditorBasedStructureViewModel` (see [](structure_view.md))
must return all the element types you want to display in the navigation bar.

**Example:** [Custom Language Support Tutorial: Structure Aware Navigation Bar](structure_aware_navbar.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Navigating the PSI

<link-summary>Navigating the PSI tree elements to find required information about parents or children.</link-summary>

There are three main ways to navigate the PSI: *top-down*, *bottom-up*, and *references*.
In the first scenario,  you have a PSI file or another higher-level element (for example, a method). You need to find all elements that match a specified condition (for example, all variable declarations).
In the second scenario, you have a specific point in the PSI tree (for example, the element at caret) and need to find out something about its context (for example, the element in which it has been declared).
Finally, *references* allow you to navigate from the usages of an element (e.g., a method call) to the declaration (the method being called) and back.
References are described in a [separate topic](psi_references.md).

## Top-Down Navigation

The most common way to perform top-down navigation is to use a [Visitor](https://en.wikipedia.org/wiki/Visitor_pattern).
To use a visitor, you create a class (usually an anonymous inner class) that extends the base visitor class, overrides the methods that handle the elements you're interested in, and passes the visitor instance to `PsiElement.accept()`.

The base classes for visitors are language-specific.
For example, if you need to process elements in a Java file, you extend [`JavaRecursiveElementVisitor`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/JavaRecursiveElementVisitor.java) and override the methods corresponding to the Java element types you're interested in.

The following snippet shows the use of a visitor to find all Java local variable declarations:

```java
file.accept(new JavaRecursiveElementVisitor() {
  @Override
  public void visitLocalVariable(@NotNull PsiLocalVariable variable) {
    super.visitLocalVariable(variable);
    System.out.println("Found a variable at offset " +
         variable.getTextRange().getStartOffset());
  }
});
```

In many cases, you can also use more specific APIs for top-down navigation.
For example, if you need to get a list of all methods in a Java class, you can use a visitor, but a much easier way to do that is calling `PsiClass.getMethods()`.

[`PsiTreeUtil`](%gh-ic%/platform/core-api/src/com/intellij/psi/util/PsiTreeUtil.java) contains a number of general-purpose, language-independent functions for PSI tree navigation, some of which (for example, `findChildrenOfType()`) perform top-down navigation.

## Bottom-Up Navigation

The starting point for bottom-up navigation is either a specific element in the PSI tree (for example, the result of resolving a reference) or an offset.
If you have an offset, you can find the corresponding PSI element by calling `PsiFile.findElementAt()`.
This method returns the element at the lowest level of the tree (for example, an identifier), and you need to navigate the tree up if you want to determine the broader context.

In most cases, bottom-up navigation is performed by calling `PsiTreeUtil.getParentOfType()`.
This method goes up the tree until it finds the element of the type you've specified.
For example, to find the containing method, you call `PsiTreeUtil.getParentOfType(element, PsiMethod.class)`.

In some cases, you can also use specific navigation methods.
For example, to find the class where a method is contained, you call `PsiMethod.getContainingClass()`.

The following snippet shows how these calls can be used together:

```java
PsiFile psiFile = anActionEvent.getData(CommonDataKeys.PSI_FILE);
PsiElement element = psiFile.findElementAt(offset);
PsiMethod containingMethod = PsiTreeUtil.getParentOfType(element, PsiMethod.class);
PsiClass containingClass = containingMethod.getContainingClass();
```

To see how the navigation works in practice, please refer to the [code sample](%gh-sdk-samples-master%/psi_demo/src/main/java/org/intellij/sdk/psi/PsiNavigationDemoAction.java).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Navigation

<link-summary>Implementing navigation to resolved symbols or other PSI elements.</link-summary>
<primary-label ref="2020.3"/>

> This API is currently in development and thus in experimental state.
>
{style="warning"}

The <ui-path>Navigate | Declaration or Usages</ui-path> action is performed in several steps.

## Direct Navigation

Direct navigation is the navigation from `PsiElement` to another `PsiElement`,
such as navigation from `break` keyword to the end of a loop in Java, without showing any popups.

To provide `PsiElement` for direct navigation, implement and register
[`DirectNavigationProvider`](%gh-ic%/platform/core-api/src/com/intellij/navigation/DirectNavigationProvider.java) in `com.intellij.lang.directNavigationProvider` EP.

## Symbol Navigation

If there is no Direct navigation available under the caret, then the IntelliJ Platform proceeds with `Symbol` navigation.
In this step the IntelliJ Platform computes the navigation targets based on target symbols,
which it obtains by resolving a [reference](declarations_and_references.md#references).
If there are several target symbols or several navigation targets defined for a symbol,
then the IDE shows the navigation popup to ask the user to choose where to go.

The [`NavigationTarget`](%gh-ic%/platform/core-api/src/com/intellij/platform/backend/navigation/NavigationTarget.java)
is essentially a pair of a `Navigatable` and
a [`TargetPresentation`](%gh-ic%/platform/core-api/src/com/intellij/platform/backend/presentation/TargetPresentation.kt)
instances (where to go and what to show in the popup).

To provide navigation targets by a `Symbol`, either:
- implement and register
  [`SymbolNavigationProvider`](%gh-ic%/platform/core-api/src/com/intellij/navigation/SymbolNavigationProvider.java) in `com.intellij.symbolNavigation` EP;
- or implement
  [`NavigatableSymbol`](%gh-ic%/platform/core-api/src/com/intellij/navigation/NavigatableSymbol.java)
  in the `Symbol`.

## Showing Usages

If there are no navigation targets available, then the IntelliJ Platform starts finding usages of the target symbol
obtained by resolving a [reference](declarations_and_references.md#references)
or from a [declaration](declarations_and_references.md#declarations).

> Existing implementations of the mentioned extension points can be found on the [IntelliJ Platform Explorer](explore_api.md#32-search-the-intellij-platform-explorer).
>
{style="note"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Notifications

<link-summary>UI guidelines on using notifications.</link-summary>

Notifications inform users about the status of user or system initiated operations. They can have different actions depending on the message.

Types of notifications:

- Alert
- [Banner](banner.md)
- [Notification balloon](balloon.md)

## What notification to use

Choose a notification type based on a combination of two factors:

1. Is **user action** required to proceed?
    - [Required immediately](#action-is-required-immediately)
    - [Required but not immediately](#action-is-required-but-not-immediately)
    - [Not required](#action-is-not-required-to-proceed)

2. From what **context** the notification was initiated?
    - Editor
    - Tool window
    - Dialog
    - Any other location


### Action is required immediately
Use an alert in any context:
![An alert 'Open Project' asking where to open 'myJavaProject' with options to cancel, open in a new window or this window](notification_type_alert.png){width=706}

### Action is required but not immediately
Use a [banner](banner.md) if the context is the editor, a tool window, or a dialog:
![A banner in the editor with a warning 'Project JDK is not defined' and action 'Setup JDK'](notification_type_banner_action_required_editor.png){width=706}

In any other context, use a [notification balloon](balloon.md).

### Action is not required to proceed
Use a [notification balloon](balloon.md) in any context except dialogs:
![A notification balloon warning about a shortcut conflict with a description and actions 'Modify shortcuts' and 'Don't show again'](notification_type_balloon_action_not_required.png){width=706}

In a dialog, use a [banner](banner.md):
![A banner in a dialog with a notification 'Interactive lesson available' and actions 'Open lesson' and an icon button to close the banner](notification_type_banner_action_required_dialog.png){width=706}


<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Notifications

<link-summary>Notifying users about errors, action statuses, or other events without interrupting their workflow by showing modal message boxes requiring confirmation.</link-summary>

<tldr>

**UI Guidelines:** [](notification_types.md)

</tldr>

One of the leading design principles is avoiding the use of modal message boxes for notifying the user about errors and other situations that may warrant the user's attention.
As a replacement, the IntelliJ Platform provides multiple non-modal notification UI options.

### Dialogs

<tldr>

**UI Guidelines:** [](validation_errors.md)

</tldr>

When working in a dialog, do not check the validity of the input and notify the user about invalid data with a modal dialog when the <control>OK</control> button is pressed.
Instead, use
[`DialogWrapper.doValidate()`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/DialogWrapper.java)
described in the [Dialogs](dialog_wrapper.md#input-validation) section.

### Editor Hints

For actions invoked from the editor (such as refactorings, navigation actions, and different code insight features), the best way to notify the user about the inability to perform an action is to use the [`HintManager`](%gh-ic%/platform/platform-api/src/com/intellij/codeInsight/hint/HintManager.java) class.

Its method `showErrorHint()` displays a floating popup above the editor which is automatically hidden when the user starts performing another action in the editor.
Other [`HintManager`](%gh-ic%/platform/platform-api/src/com/intellij/codeInsight/hint/HintManager.java) methods can be used for displaying other kinds of non-modal notification hints over an editor.

### Editor Banner

<tldr>

**UI Guidelines:** [](banner.md)

</tldr>

Notifications that appear at the top of the file editor are a great way to ask the user to take an important action that would otherwise impede their experience if ignored (e.g., missing SDK, setup/project configuration requiring user input).

Register an implementation of [`EditorNotificationProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ui/EditorNotificationProvider.java) using `com.intellij.editorNotificationProvider` extension point.
If access to indexes is not required, it can be marked [dumb-aware](indexing_and_psi_stubs.md#DumbAwareAPI).

A commonly used UI implementation is [`EditorNotificationPanel`](%gh-ic%/platform/platform-api/src/com/intellij/ui/EditorNotificationPanel.java).

### "Got It" Notification

{id="gotIt"}

<tldr>

**UI Guidelines:** [](got_it_tooltip.md)

</tldr>

Use to highlight important new/changed features via [`GotItTooltip`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/GotItTooltip.kt).

### Top-Level Notifications (Balloons)

{id="balloons"}

<tldr>

**UI Guidelines:** [](balloon.md)

**Product Help**: [Notifications](https://www.jetbrains.com/help/idea/notifications.html)

</tldr>

The most general way to display non-modal notifications is to use the [`Notifications`](%gh-ic%/platform/ide-core/src/com/intellij/notification/Notifications.java) class.

It has two main advantages:

* The user can control the way each notification type is displayed under <ui-path>Settings | Appearance & Behavior | Notifications</ui-path>
* All displayed notifications are gathered in the <control>Notifications</control> tool window and can be reviewed later

> See [](tool_windows.md#tool-window-notification) for showing balloons for a specific tool window.

The specific method used to display a notification is [`Notifications.Bus.notify()`](%gh-ic%/platform/ide-core/src/com/intellij/notification/Notifications.java).
If the current Project is known, please use overload with the ` Project ` parameter, so the notification is shown in its associated frame.

The text of the notification can include HTML tags for presentation purposes.
Use `Notification.addAction(AnAction)` to add links below the content, use [`NotificationAction`](%gh-ic%/platform/ide-core/src/com/intellij/notification/NotificationAction.java) for convenience.

The `groupId` parameter of the [`Notification`](%gh-ic%/platform/ide-core/src/com/intellij/notification/Notification.java) constructor specifies a notification type.
The user can choose the display type corresponding to each notification type under <ui-path>Settings | Appearance & Behavior | Notifications</ui-path>.

To specify the preferred display type, you need to use [`NotificationGroup`](%gh-ic%/platform/ide-core/src/com/intellij/notification/NotificationGroup.kt) to create notifications.

Please see the following steps for setup, depending on the target platform version.

<tabs>

<tab title="2020.3 and later">

`NotificationGroup` is registered in <path>[plugin.xml](plugin_configuration_file.md)</path> using the ` com.intellij.notificationGroup ` extension point.
Use `key` to provide a localized group display name.

```xml

<extensions defaultExtensionNs="com.intellij">
  <notificationGroup id="Custom Notification Group"
                     displayType="BALLOON"
                     key="notification.group.name"/>
</extensions>
```

Registered instances can then be obtained via their `id`.

> Code insight is available for parameters expecting a notification group `id`.
>

<br/>

```java
public class MyNotifier {

  public static void notifyError(Project project, String content) {
    NotificationGroupManager.getInstance()
        .getNotificationGroup("Custom Notification Group")
        .createNotification(content, NotificationType.ERROR)
        .notify(project);
  }

}
```

</tab>

<tab title="Pre-2020.3">

`NotificationGroup` is registered in code.

```java
public class MyNotifier {

  private static final NotificationGroup NOTIFICATION_GROUP =
      new NotificationGroup("Custom Notification Group",
              NotificationDisplayType.BALLOON, true);

  public static void notifyError(Project project, String content) {
    NOTIFICATION_GROUP.createNotification(content, NotificationType.ERROR)
        .notify(project);
  }

}
```

</tab>

</tabs>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<!-- EP List Directory: /contrib/ -->

# Open Source Plugins Extension Point and Listener List

<link-summary>Overview of Extension Points and Listeners for OSS plugins bundled with IntelliJ IDEA Ultimate and other IDEs.</link-summary>

<tldr>

**Repository**: [intellij-plugins](https://github.com/JetBrains/intellij-plugins)

</tldr>

Overview of Extension Points and Listeners for open source plugins available in [](idea_ultimate.md) and other IDEs.

65 Extension Points and 10 Listeners

<include from="snippets.md" element-id="ep_list_legend"/>


## IntelliJ Open Source Plugins

### IntelliJ Open Source Plugins – Listeners

| Topic | Listener |
|-------|----------|
| [ChangeListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.dts.settings.DtsSettings.ChangeListener)  ![Project-Level][project-level] | [`ChangeListener`](%gh-ij-plugins%/dts/src/com/intellij/dts/settings/DtsSettings.kt) |
| [FlexBuildConfigurationChangeListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.lang.javascript.flex.projectStructure.model.impl.FlexBuildConfigurationChangeListener)  | [`FlexBuildConfigurationChangeListener`](%gh-ij-plugins%/flex/src/com/intellij/lang/javascript/flex/projectStructure/model/impl/FlexBuildConfigurationChangeListener.java) |
| [SerialPortsListener.Companion#SERIAL_PORTS_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.plugins.serialmonitor.service.SerialPortsListener)  | [`SerialPortsListener`](%gh-ij-plugins%/serial-monitor/src/main/java/com/intellij/plugins/serialmonitor/service/SerialPortsListener.kt) |
| [PlatformioServiceKt#PLATFORMIO_UPDATES_TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cpp.embedded.platformio.PlatformioUpdatesNotifier)  ![Project-Level][project-level] | [`PlatformioUpdatesNotifier`](%gh-ij-plugins%/platformio/src/com/jetbrains/cidr/cpp/embedded/platformio/PlatformioService.kt) |
| [PlatformioSettingsListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.cidr.cpp.embedded.platformio.project.PlatformioSettingsListener)  | [`PlatformioSettingsListener`](%gh-ij-plugins%/platformio/src/com/jetbrains/cidr/cpp/embedded/platformio/project/PlatformioSettings.kt) |
| [DartAnalysisServerMessages#DART_ANALYSIS_TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.lang.dart.analyzer.DartAnalysisServerMessages.DartAnalysisNotifier)  | [`DartAnalysisNotifier`](%gh-ij-plugins%/Dart/src/com/jetbrains/lang/dart/analyzer/DartAnalysisServerMessages.java) |
| [PerforceSettings#OFFLINE_MODE_EXITED](https://jb.gg/ipe/listeners?topics=java.lang.Runnable)  | `Runnable` |
| [P4ConfigListener#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.idea.perforce.perforce.connections.P4ConfigListener)  ![Internal][internal] ![Project-Level][project-level] | [`P4ConfigListener`](%gh-ij-plugins%/PerforceIntegration/src/org/jetbrains/idea/perforce/perforce/connections/PerforceExternalConfigTracker.kt) |
| [P4EnvHelper#P4_ENV_CHANGED](https://jb.gg/ipe/listeners?topics=org.jetbrains.idea.perforce.perforce.connections.P4EnvHelper.P4EnvListener)  ![Project-Level][project-level] | [`P4EnvListener`](%gh-ij-plugins%/PerforceIntegration/src/org/jetbrains/idea/perforce/perforce/connections/P4EnvHelper.java) |
| [FrameworkDefinitionListener#TOPIC](https://jb.gg/ipe/listeners?topics=org.osmorc.settings.FrameworkDefinitionListener)  | [`FrameworkDefinitionListener`](%gh-ij-plugins%/osmorc/src/org/osmorc/settings/FrameworkDefinitionListener.java) |


### AngularJS

[`AngularJS`](%gh-ij-plugins%/Angular/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.angular2.configProvider](https://jb.gg/ipe?extensions=org.angular2.configProvider) | [`AngularConfigProvider`](%gh-ij-plugins%/Angular/src/org/angular2/cli/config/AngularConfigProvider.kt) |
| [org.angular2.entitiesSource](https://jb.gg/ipe?extensions=org.angular2.entitiesSource) | [`Angular2EntitiesSource`](%gh-ij-plugins%/Angular/src/org/angular2/entities/Angular2EntitiesSource.kt) |
| [org.angular2.frameworkHandler](https://jb.gg/ipe?extensions=org.angular2.frameworkHandler) ![Experimental][experimental] | [`Angular2FrameworkHandler`](%gh-ij-plugins%/Angular/src/org/angular2/entities/Angular2FrameworkHandler.kt) |
| [org.angular2.importsHandler](https://jb.gg/ipe?extensions=org.angular2.importsHandler) | [`Angular2ImportsHandler`](%gh-ij-plugins%/Angular/src/org/angular2/codeInsight/imports/Angular2ImportsHandler.kt) |
| [org.angular2.jsHandlersFactory](https://jb.gg/ipe?extensions=org.angular2.jsHandlersFactory) | [`Angular2JSHandlersFactory`](%gh-ij-plugins%/Angular/src/org/angular2/codeInsight/Angular2HandlersFactory.kt) |
| [org.angular2.templateScopesProvider](https://jb.gg/ipe?extensions=org.angular2.templateScopesProvider) | [`Angular2TemplateScopesProvider`](%gh-ij-plugins%/Angular/src/org/angular2/codeInsight/template/Angular2TemplateScopesProvider.kt) |

### com.intellij.dts

[`com.intellij.dts`](%gh-ij-plugins%/dts/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.clion.dtsUtil](https://jb.gg/ipe?extensions=com.intellij.clion.dtsUtil) | [`DtsCLionUtil`](%gh-ij-plugins%/dts/src/com/intellij/dts/clion/DtsCLionUtil.kt) |
| [com.intellij.dts.settings.disabler](https://jb.gg/ipe?extensions=com.intellij.dts.settings.disabler) | [`DtsSettingsDisabler`](%gh-ij-plugins%/dts/src/com/intellij/dts/settings/DtsSettingsDisabler.kt) |

### com.intellij.flex

[`com.intellij.flex`](%gh-ij-plugins%/flex/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.flex.breakpoint.type.provider](https://jb.gg/ipe?extensions=com.intellij.flex.breakpoint.type.provider) ![Non-Dynamic][non-dynamic] | [`BreakpointTypeProvider`](%gh-ij-plugins%/flex/src/com/intellij/lang/javascript/flex/debug/FlexBreakpointsHandler.java) |

### com.thoughtworks.gauge

[`com.thoughtworks.gauge`](%gh-ij-plugins%/gauge/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.thoughtworks.gauge.moduleImporter](https://jb.gg/ipe?extensions=com.thoughtworks.gauge.moduleImporter) | [`GaugeModuleImporter`](%gh-ij-plugins%/gauge/src/com/thoughtworks/gauge/wizard/GaugeModuleImporter.java) |

### Dart

[`Dart`](%gh-ij-plugins%/Dart/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [Dart.completionExtension](https://jb.gg/ipe?extensions=Dart.completionExtension) | [`DartCompletionExtension`](%gh-ij-plugins%/Dart/src/com/jetbrains/lang/dart/ide/completion/DartCompletionExtension.java) |
| [Dart.completionTimerExtension](https://jb.gg/ipe?extensions=Dart.completionTimerExtension) | [`DartCompletionTimerExtension`](%gh-ij-plugins%/Dart/src/com/jetbrains/lang/dart/ide/completion/DartCompletionTimerExtension.java) |

### dts-withCLion.xml

[`dts-withCLion.xml`](%gh-ij-plugins%/dts/resources/META-INF/dts-withCLion.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.dts.cmake.configurationDataProvider](https://jb.gg/ipe?extensions=com.intellij.dts.cmake.configurationDataProvider) | [`DtsCMakeModelConfigurationDataProvider`](%gh-ij-plugins%/dts/src/com/intellij/dts/clion/impl/DtsCMakeModelConfigurationDataProvider.kt) |

### gherkin

[`gherkin`](%gh-ij-plugins%/cucumber/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.plugins.cucumber.injector.injectorExtensionPoint](https://jb.gg/ipe?extensions=org.jetbrains.plugins.cucumber.injector.injectorExtensionPoint) | [`GherkinInjectorExtensionPoint`](%gh-ij-plugins%/cucumber/src/org/jetbrains/plugins/cucumber/injector/GherkinInjectorExtensionPoint.java) |
| [org.jetbrains.plugins.cucumber.steps.cucumberJvmExtensionPoint](https://jb.gg/ipe?extensions=org.jetbrains.plugins.cucumber.steps.cucumberJvmExtensionPoint) | [`CucumberJvmExtensionPoint`](%gh-ij-plugins%/cucumber/src/org/jetbrains/plugins/cucumber/CucumberJvmExtensionPoint.java) |

### idea.plugin.protoeditor

[`idea.plugin.protoeditor`](%gh-ij-plugins%/protobuf/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.protobuf.codeImplementationSearcher](https://jb.gg/ipe?extensions=com.intellij.protobuf.codeImplementationSearcher) | [`PbCodeImplementationSearcher`](%gh-ij-plugins%/protobuf/protoeditor-core/src/com/intellij/protobuf/ide/gutter/PbGeneratedCodeConverterProvider.kt) |
| [com.intellij.protobuf.fileResolveProvider](https://jb.gg/ipe?extensions=com.intellij.protobuf.fileResolveProvider) ![Project-Level][project-level] | [`FileResolveProvider`](%gh-ij-plugins%/protobuf/protoeditor-core/src/com/intellij/protobuf/lang/resolve/FileResolveProvider.java) |
| [com.intellij.protobuf.generatedCodeConverterProvider](https://jb.gg/ipe?extensions=com.intellij.protobuf.generatedCodeConverterProvider) | [`PbGeneratedCodeConverterProvider`](%gh-ij-plugins%/protobuf/protoeditor-core/src/com/intellij/protobuf/ide/gutter/PbGeneratedCodeConverterProvider.kt) |
| [com.intellij.protobuf.nameGeneratorContributor](https://jb.gg/ipe?extensions=com.intellij.protobuf.nameGeneratorContributor) | [`NameGeneratorContributor`](%gh-ij-plugins%/protobuf/protoeditor-core/src/com/intellij/protobuf/lang/names/NameGeneratorContributor.java) |
| [com.intellij.protobuf.projectSettingsConfigurator](https://jb.gg/ipe?extensions=com.intellij.protobuf.projectSettingsConfigurator) ![Project-Level][project-level] | [`ProjectSettingsConfigurator`](%gh-ij-plugins%/protobuf/protoeditor-core/src/com/intellij/protobuf/ide/settings/ProjectSettingsConfigurator.java) |
| [com.intellij.protobuf.schemaProvider](https://jb.gg/ipe?extensions=com.intellij.protobuf.schemaProvider) ![Project-Level][project-level] | [`SchemaProvider`](%gh-ij-plugins%/protobuf/protoeditor-core/src/com/intellij/protobuf/lang/resolve/SchemaProvider.java) |

### intellij.prettierJS

[`intellij.prettierJS`](%gh-ij-plugins%/prettierJS/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.prettierjs.codeStyleInstaller](https://jb.gg/ipe?extensions=com.intellij.prettierjs.codeStyleInstaller) | [`PrettierCodeStyleInstaller`](%gh-ij-plugins%/prettierJS/src/com/intellij/prettierjs/codeStyle/PrettierCodeStyleInstaller.java) |

### intellij.qodana.coverage.xml

[`intellij.qodana.coverage.xml`](%gh-ij-plugins%/qodana/coverage/resources/intellij.qodana.coverage.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.qodana.coverage.cloudArtifactsProcessor](https://jb.gg/ipe?extensions=com.intellij.qodana.coverage.cloudArtifactsProcessor) | [`CoverageCloudArtifactsProcessor`](%gh-ij-plugins%/qodana/coverage/src/org/jetbrains/qodana/staticAnalysis/inspections/coverage/CoverageCloudArtifactsProcessor.kt) |

### name.kropp.intellij.makefile

[`name.kropp.intellij.makefile`](%gh-ij-plugins%/makefile/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.makefile.toolWindowStripeController](https://jb.gg/ipe?extensions=com.intellij.makefile.toolWindowStripeController) | [`MakefileToolWindowStripeController`](%gh-ij-plugins%/makefile/src/com/jetbrains/lang/makefile/toolWindow/MakefileToolWindowStripeController.kt) |

### org.intellij.qodana

[`org.intellij.qodana`](%gh-ij-plugins%/qodana/core/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [org.intellij.qodana.azureCiConfigUpdateHandler](https://jb.gg/ipe?extensions=org.intellij.qodana.azureCiConfigUpdateHandler) | [`AzureCIConfigHandler`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/extensions/ci/AzureCIConfigHandler.kt) |
| [org.intellij.qodana.bitbucketCiConfigUpdateHandler](https://jb.gg/ipe?extensions=org.intellij.qodana.bitbucketCiConfigUpdateHandler) | [`BitbucketCIConfigHandler`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/extensions/ci/BitbucketCIConfigHandler.kt) |
| [org.intellij.qodana.circleCiConfigUpdateHandler](https://jb.gg/ipe?extensions=org.intellij.qodana.circleCiConfigUpdateHandler) | [`CircleCIConfigHandler`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/extensions/ci/CircleCIConfigHandler.kt) |
| [org.intellij.qodana.configUpdateHandler](https://jb.gg/ipe?extensions=org.intellij.qodana.configUpdateHandler) | [`ConfigUpdateHandler`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/extensions/ConfigUpdateHandler.kt) |
| [org.intellij.qodana.contextMarginProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.contextMarginProvider) | [`ContextMarginProvider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/staticAnalysis/sarif/ContextMarginProvider.kt) |
| [org.intellij.qodana.cyclomaticComplexityFileVisitor](https://jb.gg/ipe?extensions=org.intellij.qodana.cyclomaticComplexityFileVisitor) | [`CyclomaticComplexityMetricFileVisitor`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/staticAnalysis/inspections/metrics/inspections/cyclomaticComplexity/CyclomaticComplexityMetricFileVisitor.kt) |
| [org.intellij.qodana.defaultQodanaYamlItemProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.defaultQodanaYamlItemProvider) | [`QodanaYamlItemProvider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/settings/QodanaYamlItem.kt) |
| [org.intellij.qodana.externalToolsConfigurationProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.externalToolsConfigurationProvider) | [`ExternalToolsConfigurationProvider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/staticAnalysis/inspections/runner/externalTools/ExternalToolsConfigurationProvider.kt) |
| [org.intellij.qodana.externalToolsProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.externalToolsProvider) | [`ExternalToolsProvider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/staticAnalysis/inspections/runner/externalTools/ExternalToolsProvider.kt) |
| [org.intellij.qodana.githubCiConfigHandler](https://jb.gg/ipe?extensions=org.intellij.qodana.githubCiConfigHandler) | [`GitHubCIConfigHandler`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/extensions/ci/GitHubCIConfigHandler.kt) |
| [org.intellij.qodana.gitlabCiConfigHandler](https://jb.gg/ipe?extensions=org.intellij.qodana.gitlabCiConfigHandler) | [`GitLabCIConfigHandler`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/extensions/ci/GitLabCIConfigHandler.kt) |
| [org.intellij.qodana.globalOutputConsumer](https://jb.gg/ipe?extensions=org.intellij.qodana.globalOutputConsumer) ![Internal][internal] | [`GlobalOutputConsumer`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/staticAnalysis/inspections/runner/globalOutput/GlobalOutputConsumer.kt) |
| [org.intellij.qodana.highlightingListener](https://jb.gg/ipe?extensions=org.intellij.qodana.highlightingListener) | [`QodanaHighlightingListener`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/highlight/QodanaHighlightingListener.kt) |
| [org.intellij.qodana.inspectionKtsDefaultImportProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.inspectionKtsDefaultImportProvider) | [`InspectionKtsDefaultImportProvider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/inspectionKts/imports.kt) |
| [org.intellij.qodana.inspectionKtsExampleProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.inspectionKtsExampleProvider) | [`Provider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/inspectionKts/examples/InspectionKtsExample.kt) |
| [org.intellij.qodana.inspectionKtsTemplateProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.inspectionKtsTemplateProvider) | [`Provider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/inspectionKts/templates/InspectionKtsTemplate.kt) |
| [org.intellij.qodana.inspectionProfileProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.inspectionProfileProvider) | [`QodanaInspectionProfileProvider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/staticAnalysis/profile/QodanaInspectionProfileProvider.java) |
| [org.intellij.qodana.jenkinsConfigHandler](https://jb.gg/ipe?extensions=org.intellij.qodana.jenkinsConfigHandler) | [`JenkinsConfigHandler`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/extensions/ci/JenkinsConfigHandler.kt) |
| [org.intellij.qodana.metricTable](https://jb.gg/ipe?extensions=org.intellij.qodana.metricTable) | [`MetricTable`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/staticAnalysis/inspections/metrics/database/tables/MetricTable.kt) |
| [org.intellij.qodana.metricsAggregator](https://jb.gg/ipe?extensions=org.intellij.qodana.metricsAggregator) | [`MetricAggregator`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/staticAnalysis/inspections/metrics/aggregators/MetricAggregator.kt) |
| [org.intellij.qodana.problemsViewModuleSupport](https://jb.gg/ipe?extensions=org.intellij.qodana.problemsViewModuleSupport) | [`QodanaGroupByModuleSupport`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/ui/problemsView/QodanaGroupByModuleSupport.kt) |
| [org.intellij.qodana.projectDescriber](https://jb.gg/ipe?extensions=org.intellij.qodana.projectDescriber) | [`QodanaProjectDescriber`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/staticAnalysis/projectDescription/QodanaProjectDescriber.kt) |
| [org.intellij.qodana.psiViewerSupport](https://jb.gg/ipe?extensions=org.intellij.qodana.psiViewerSupport) | [`PsiViewerSupport`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/inspectionKts/ui/psi-viewer.kt) |
| [org.intellij.qodana.qodanaHighlightInfoComparator](https://jb.gg/ipe?extensions=org.intellij.qodana.qodanaHighlightInfoComparator) | [`QodanaHighlightInfoComparator`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/extensions/QodanaHighlightInfoComparator.kt) |
| [org.intellij.qodana.qodanaHighlightInfoTypeProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.qodanaHighlightInfoTypeProvider) | [`QodanaHighlightInfoTypeProvider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/extensions/QodanaHighlightInfoTypeProvider.kt) |
| [org.intellij.qodana.qodanaHighlightingSupportInfoProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.qodanaHighlightingSupportInfoProvider) | [`QodanaHighlightingSupportInfoProvider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/extensions/QodanaHighlightingSupportInfoProvider.kt) |
| [org.intellij.qodana.qodanaScriptFactory](https://jb.gg/ipe?extensions=org.intellij.qodana.qodanaScriptFactory) ![Internal][internal] | [`QodanaScriptFactory`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/staticAnalysis/script/QodanaScriptFactory.kt) |
| [org.intellij.qodana.quickFixesStrategyProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.quickFixesStrategyProvider) | [`QuickFixesStrategyProvider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/staticAnalysis/sarif/QuickFixesStrategyProvider.kt) |
| [org.intellij.qodana.reportMetadataArtifact](https://jb.gg/ipe?extensions=org.intellij.qodana.reportMetadataArtifact) | [`ReportMetadataArtifactProvider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/report/LoadedReport.kt) |
| [org.intellij.qodana.repositoryInfoProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.repositoryInfoProvider) | [`RepositoryInfoProvider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/extensions/RepositoryInfoProvider.kt) |
| [org.intellij.qodana.repositoryRevisionProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.repositoryRevisionProvider) | [`RepositoryRevisionProvider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/extensions/RepositoryRevisionProvider.kt) |
| [org.intellij.qodana.sarifReportContributor](https://jb.gg/ipe?extensions=org.intellij.qodana.sarifReportContributor) | [`SarifReportContributor`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/staticAnalysis/sarif/SarifReportContributor.kt) |
| [org.intellij.qodana.setupCIProviderFactory](https://jb.gg/ipe?extensions=org.intellij.qodana.setupCIProviderFactory) | [`SetupCIProviderFactory`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/ui/ci/SetupCIProvider.kt) |
| [org.intellij.qodana.vcsIgnoredFilesProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.vcsIgnoredFilesProvider) | [`VcsIgnoredFilesProvider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/extensions/VcsIgnoredFilesProvider.kt) |
| [org.intellij.qodana.vcsRevisionProvider](https://jb.gg/ipe?extensions=org.intellij.qodana.vcsRevisionProvider) | [`VcsRevisionProvider`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/vcs/VcsRevisionProvider.kt) |
| [org.intellij.qodana.workflowExtension](https://jb.gg/ipe?extensions=org.intellij.qodana.workflowExtension) ![Internal][internal] | [`QodanaWorkflowExtension`](%gh-ij-plugins%/qodana/core/src/org/jetbrains/qodana/staticAnalysis/workflow/QodanaWorkflowExtension.kt) |

### org.jetbrains.plugins.vue

[`org.jetbrains.plugins.vue`](%gh-ij-plugins%/vuejs/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.vuejs.containerInfoProvider](https://jb.gg/ipe?extensions=com.intellij.vuejs.containerInfoProvider) | [`VueContainerInfoProvider`](%gh-ij-plugins%/vuejs/src/org/jetbrains/vuejs/model/source/VueContainerInfoProvider.kt) |
| [com.intellij.vuejs.templateScopesProvider](https://jb.gg/ipe?extensions=com.intellij.vuejs.templateScopesProvider) | [`VueTemplateScopesProvider`](%gh-ij-plugins%/vuejs/src/org/jetbrains/vuejs/codeInsight/template/VueTemplateScopesProvider.kt) |

### Osmorc

[`Osmorc`](%gh-ij-plugins%/osmorc/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [Osmorc.frameworkIntegrator](https://jb.gg/ipe?extensions=Osmorc.frameworkIntegrator) | [`FrameworkIntegrator`](%gh-ij-plugins%/osmorc/src/org/osmorc/frameworkintegration/FrameworkIntegrator.java) |

### PerforceDirectPlugin

[`PerforceDirectPlugin`](%gh-ij-plugins%/PerforceIntegration/src/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [Perforce.P4ConnectionParametersProvider](https://jb.gg/ipe?extensions=Perforce.P4ConnectionParametersProvider) ![Experimental][experimental] | [`P4ConnectionParametersProvider`](%gh-ij-plugins%/PerforceIntegration/src/org/jetbrains/idea/perforce/perforce/connections/P4ConnectionParametersProvider.kt) |

### tslint

[`tslint`](%gh-ij-plugins%/tslint/resources/META-INF/plugin.xml)

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.tslint.configDetector](https://jb.gg/ipe?extensions=com.intellij.tslint.configDetector) | [`TsLintConfigDetector`](%gh-ij-plugins%/tslint/src/com/intellij/lang/javascript/linter/tslint/config/TsLintConfigDetector.java) |

[deprecated]: https://img.shields.io/badge/-Deprecated-lightgrey?style=flat-square
[removal]: https://img.shields.io/badge/-Removal-red?style=flat-square
[obsolete]: https://img.shields.io/badge/-Obsolete-grey?style=flat-square
[experimental]: https://img.shields.io/badge/-Experimental-violet?style=flat-square
[internal]: https://img.shields.io/badge/-Internal-darkred?style=flat-square
[project-level]: https://img.shields.io/badge/-Project--Level-blue?style=flat-square
[non-dynamic]: https://img.shields.io/badge/-Non--Dynamic-orange?style=flat-square
[dumb-aware]: https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Parameter Info

<link-summary>Implementing parameter info handler allowing to display method/function parameter names and types before providing actual values.</link-summary>

<tldr>

**Product Help:** [Parameter info](https://www.jetbrains.com/help/idea/viewing-reference-information.html#view-parameter-info)

</tldr>

Custom languages can use
[`ParameterInfoHandler`](%gh-ic%/platform/lang-api/src/com/intellij/lang/parameterInfo/ParameterInfoHandler.java)
registered in `com.intellij.codeInsight.parameterInfo` extension point (EP) to show information about parameters in method and function calls.
This is a convenient way to display type signatures directly as a popup in the editor without having to consult the documentation.
If it is available, the IDE can show this popup automatically after a short delay, or it can be invoked explicitly via
<ui-path>View | Parameter Info</ui-path>.

Parameter info is dynamic and can update the displayed information when the caret is moved or additional code is typed.
This allows for highlighting entries or marking the current parameter at the caret position.
Therefore, the interface of the
[`ParameterInfoHandler`](%gh-ic%/platform/lang-api/src/com/intellij/lang/parameterInfo/ParameterInfoHandler.java)
EP consists of methods for initially collecting the required information
to display parameter information at the caret position as well as methods to update what should be displayed during edits.

## Implementation

Language authors implement
[`ParameterInfoHandler`](%gh-ic%/platform/lang-api/src/com/intellij/lang/parameterInfo/ParameterInfoHandler.java)
which takes two type parameters: `ParameterOwner` and `ParameterType`.
For the explanations that follow, we assume that `ParameterOwner` is a PSI element that represents a function call in a language,
and `ParameterType` represents (possibly several) function definitions.

Additionally, `ParameterInfoHandler` uses several context types that are mutable and used to adjust what and how parameter information is displayed.
These contexts are, e.g.,
[`CreateParameterInfoContext`](%gh-ic%/platform/lang-api/src/com/intellij/lang/parameterInfo/CreateParameterInfoContext.java),
[`UpdateParameterInfoContext`](%gh-ic%/platform/lang-api/src/com/intellij/lang/parameterInfo/UpdateParameterInfoContext.java)
and
[`ParameterInfoUIContext`](%gh-ic%/platform/lang-api/src/com/intellij/lang/parameterInfo/ParameterInfoUIContext.java)
and they all derive from
[`ParameterInfoContext`](%gh-ic%/platform/lang-api/src/com/intellij/lang/parameterInfo/ParameterInfoContext.java).

### Initial Phase

The initial phase describes what happens when no parameter info is currently displayed and it is invoked either automatically or by the user.

1. The `findElementForParameterInfo()` method is called.
   When overriding this method, language authors use the provided `CreateParameterInfoContext` to access, e.g., the file and offset of the current editor.
   The goal is to identify the `ParameterOwner` i.e. a function call at the current offset if it exists.
   It is advised to extract the actual search for the function call into a separate method since it can be re-used later.
   The `findElementForParameterInfo()` implementation should find all matching function definitions and store them using `setItemsToShow()` of the context parameter.
2. If the returned function call element is valid, the `showParameterInfo()` method is invoked.
   Implementations of this method usually just call `showHint()` of the `CreateParameterInfoContext` providing the offset at which the popup should appear.
3. For each item to show from step 1, the `updateUI()` method is called.
   No heavy work is allowed in this method since it runs on [EDT](threading_model.md), and it should only update the UI representation using, e.g.,
   `setUIComponentEnabled()` or `setupUIComponentPresentation()` of the provided `ParameterInfoUIContext`.
4. After that the following methods are called which will be explained in the next phase: `findElementForUpdatingParameterInfo()`,
   `updateParameterInfo()`, `updateUI()`.

### Update Phase

When a parameter info popup is displayed and the user types something or moves the caret, the displayed information is updated.
This allows for, e.g., highlighting a function usage with different arguments or simply moving the parameter info box closer to the caret.
Therefore, when the user moves the caret or types something, the following happens:

1. The `syncUpdateOnCaretMove()` method is called.
2. The `findElementForUpdatingParameterInfo()` method is called and it should find the correct function call (`ParameterOwner`) for the changed caret position.
   Implementations return `null` if an appropriate element could not be found or if it is different from `getParameterOwner()` of the provided `UpdateParameterInfoContext`.
   If `null` is returned, the `dispose()` method is called.
3. The `processFoundElementForUpdatingParameterInfo()` method is called which allows for additional adjustments of the `UpdateParameterInfoContext`.
   By default, this method does nothing and it's usually not necessary to implement it.
4. The `updateParameterInfo()` is called. Many implementations only invoke `setParameterOwner()` of the `UpdateParameterInfoContext` here.
5. The `updateUI()` method is called for each item in the `getItemsToShow()` array of the context which were collected in the initial phase.

## Further Tips

Language authors can implement
[`ParameterInfoHandlerWithTabActionSupport`](%gh-ic%/platform/lang-api/src/com/intellij/lang/parameterInfo/ParameterInfoHandlerWithTabActionSupport.java)
to extend the parameter info functionality with the ability to jump between parameter positions by pressing the tab key.
For recurring tasks like finding the index of the current parameter in a function call,
[`ParameterInfoUtils`](%gh-ic%/platform/lang-api/src/com/intellij/lang/parameterInfo/ParameterInfoUtils.java) provides a collection of useful functions.

It is further helpful to inspect all the context-interfaces that extend from `ParameterInfoContext` and can be found in the `com.intellij.lang.parameterInfo` package
as they provide insight into what data of the parameter info can be accessed and changed in the different stages.

Methods of the `ParameterInfoHandler` that have a default implementation can usually be ignored.
`syncUpdateOnCaretMove()` and `supportsOverloadSwitching()` are used internally by the IntelliJ Platform and are not required to be implemented by plugins.
The `dispose()` method is called when the currently displayed parameter info is invalidated and destroyed.
Only `isWhitespaceSensitive()` which is used in the `getCurrentOffset()` method of
[`ParameterInfoControllerBase`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/hint/ParameterInfoControllerBase.java)
should be implemented when whitespace matters in a language.

Note that parameter info works during indexing (using incomplete data) when the implementations is marked [dumb aware](indexing_and_psi_stubs.md#DumbAwareAPI).
It is recommended to adapt tests for [dumb mode](indexing_and_psi_stubs.md#dumb-mode) since the results might be surprising,
and more changes to the handler might be required for better results.

Finally, language authors should be aware of the global
[`CodeInsightSettings#SHOW_FULL_SIGNATURES_IN_PARAMETER_INFO`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/CodeInsightSettings.java)
setting that can be used to present results that are consistent with the default IDE behavior.
For Java, for instance, the IDE shows the full signature of the method/function on parameter info if this setting is enabled.

## Examples

Existing, moderately complex, implementations of `ParameterInfoHandler` in the IntelliJ Platform that can serve as a reference are:

* [`XPathParameterInfoHandler`](%gh-ic%/plugins/xpath/xpath-lang/src/org/intellij/lang/xpath/XPathParameterInfoHandler.java)
* [`XmlParameterInfoHandler`](%gh-ic%/xml/impl/src/com/intellij/codeInsight/hint/api/impls/XmlParameterInfoHandler.java)

Implementations of third party plugins can be discovered using the
[IntelliJ Platform Explorer](https://plugins.jetbrains.com/intellij-platform-explorer?extensions=com.intellij.codeInsight.parameterInfo).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 2. Parsing Test

<tldr>

**Tested Functionality**: [](lexer_and_parser_definition.md)

</tldr>

<include from="tests_prerequisites.md" element-id="custom_language_testing_tutorial_header"></include>

For more complex Lexers (e.g., having additional logic), it is advisable to add separate tests inheriting from [`LexerTestCase`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/LexerTestCase.java).

## Update Grammar and Regenerate the Parser
Before creating the parsing test, ensure the parser definition (<path>Simple.bnf</path>) includes the lines shown below.
These additional lines facilitate testing incorrect keys.

If the lines below are not present in <path>Simple.bnf</path>, replace the existing `property` definition with the lines below.
Don't forget to regenerate the parser after updating the file!
Right-click on the <path>Simple.bnf</path> file and select <control>Generate Parser Code</control>.

```bnf
property ::= (KEY? SEPARATOR VALUE?) | KEY {
  pin=3
  recoverWhile="recover_property"
  mixin="org.intellij.sdk.language.psi.impl.SimpleNamedElementImpl"
  implements="org.intellij.sdk.language.psi.SimpleNamedElement"
  methods=[getKey getValue getName setName getNameIdentifier getPresentation]
}
private recover_property ::= !(KEY|SEPARATOR|COMMENT)
```

## Define Input Test Data
Create the <path>ParsingTestData.simple</path> properties file in the <path>testData</path> folder.
Note the last few lines define a purposely incorrect key.

```properties
```
{src="simple_language_plugin/src/test/testData/ParsingTestData.simple"}

## Copy the Expected PSI Tree
The easiest way to get the expected PSI structure for any file is to use the [built-in PSI viewer](explore_api.md#internalMode).
Run the project and use <ui-path>Tools | View PSI Structure...</ui-path>
(enable [Internal Mode](enabling_internal.md) explicitly for the IDE instance if the menu is not available).

![PSI Tree Copy](plugin_copy_psi.png)

Use the <control>Copy PSI</control> button to copy the expected PSI structure to the clipboard.

## Define the Output Reference Test Data
Create a file <path>ParsingTestData.txt</path> with the copied PSI tree.

```properties
```
{src="simple_language_plugin/src/test/testData/ParsingTestData.txt"}

## Define a Parsing Test
Subclass [`ParsingTestCase`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/ParsingTestCase.java) to create `SimpleParsingTest`:
Override `getTestDataPath()`, and return the path from the root of this plugin module to the <path>testData</path> directory.

```java
```
{src="simple_language_plugin/src/test/java/org/intellij/sdk/language/SimpleParsingTest.java"}

## Run the Test

<include from="custom_language_testing_snippets.md" element-id="runTests"/>
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Persistence Model

<link-summary>Introduction to the IntelliJ Platform Persistence Model.</link-summary>

The IntelliJ Platform Persistence Model is used to store a variety of information.
For example, [Run Configurations](run_configurations.md) and [Settings](settings.md) are stored using the Persistence Model.

There are two distinct approaches, depending on the type of data being persisted:
* [Persisting State of Components](persisting_state_of_components.md)
* [Persisting Sensitive Data](persisting_sensitive_data.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Persisting Sensitive Data

<link-summary>Storing passwords, tokens, and other sensitive data securely with Credentials Store API.</link-summary>

The Credentials Store API allows you to store sensitive user data securely, like passwords, server URLs, etc.

## How to Use
Use [`PasswordSafe`](%gh-ic%/platform/credential-store/src/ide/passwordSafe/PasswordSafe.kt) to work with credentials.

_Common Utility Method:_

```java
private CredentialAttributes createCredentialAttributes(String key) {
  return new CredentialAttributes(
    CredentialAttributesKt.generateServiceName("MySystem", key)
  );
}
```

### Retrieve Stored Credentials

```java
String key = null; // e.g. serverURL, accountID
CredentialAttributes attributes = createCredentialAttributes(key);
PasswordSafe passwordSafe = PasswordSafe.getInstance();

Credentials credentials = passwordSafe.get(attributes);
if (credentials != null) {
  String password = credentials.getPasswordAsString();
}

// or get password only
String password = passwordSafe.getPassword(attributes);
```

### Store Credentials

```java
CredentialAttributes attributes = createCredentialAttributes(key);
Credentials credentials = new Credentials(username, password);
PasswordSafe.getInstance().set(attributes, credentials);
```

To remove stored credentials, pass `null` for the `credentials` parameter.

## Storage
The default storage format depends on the OS.

| OS      | Storage                                               |
|---------|-------------------------------------------------------|
| Windows | File in [KeePass][Windows] format                     |
| macOS   | Keychain using [Security Framework][macOS]            |
| Linux   | [Secret Service API][linux] using [libsecret][linux2] |

[Windows]: https://keepass.info
[macOS]: https://developer.apple.com/documentation/security/keychain_services
[linux]: https://specifications.freedesktop.org/secret-service-spec/latest/
[linux2]: https://wiki.gnome.org/Projects/Libsecret

Users can override the default behavior in <ui-path>Settings | Appearance & Behavior | System Settings | Passwords</ui-path>.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Persisting State of Components

<!-- https://jb.gg/ij-psoc -->

<link-summary>Persisting data that is available after the IDE restarts and can be shared between different IDE installations.</link-summary>

The IntelliJ Platform provides an API that allows components or services to persist their state between restarts of the IDE.
The API allows for persisting simple key-value entries and complex state classes.

> For persisting sensitive data like passwords, see [Persisting Sensitive Data](persisting_sensitive_data.md).
>
{style="warning"}

## Using `PersistentStateComponent`

The [`PersistentStateComponent`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/components/PersistentStateComponent.java) interface allows for persisting state classes and gives the most flexibility for defining the values to be persisted, their format, and storage location.

To use it:
- mark a [service](plugin_services.md) (project or application-level service for storing project or application data, respectively) as implementing the `PersistentStateComponent` interface
- define the state class
- specify the storage location using [`@State`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/components/State.java)

Note that instances of extensions can't persist their state by implementing `PersistentStateComponent`.
If an extension needs to have a persistent state, define a separate service responsible for managing that state.

### Implementing the `PersistentStateComponent` Interface

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

The easiest way to implement a persistent state component in Kotlin is extending [`SimplePersistentStateComponent`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/components/SimplePersistentStateComponent.kt), which implements `PersistentStateComponent`.

`SimplePersistentStateComponent` is parameterized by a subclass of [`BaseState`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/components/BaseState.kt).
`BaseState` provides a set of handy [property delegates](https://kotlinlang.org/docs/delegated-properties.html), which make it easy to create properties with default values.
In addition, delegates track property modifications internally, which helps decrease calling `PersistentStateComponent.getState()` by the platform.

It is recommended to create separate classes for a component and its state:

```kotlin
@Service
@State(...)
class MySettings : SimplePersistentStateComponent<MyState>(MyState())

class MyState : BaseState() {
  var value by string()
}
```

</tab>
<tab title="Java" group-key="java">

The implementation of `PersistentStateComponent` must be parameterized with the type of state class.
The state class can either be a separate class, or the class implementing `PersistentStateComponent`.

<chapter title="Persistent Component with Separate State Class">

In this case, the state class instance is typically stored as a field in the `PersistentStateComponent` class.
When the state is loaded from the storage, it is assigned to the state field (see `loadState()`):

```java
@Service
@State(...)
class MySettings implements PersistentStateComponent<MySettings.State> {

  static class State {
    public String value;
  }

  private State myState = new State();

  @Override
  public State getState() {
    return myState;
  }

  @Override
  public void loadState(State state) {
    myState = state;
  }
}
```

Using a separate state class is the recommended approach.

</chapter>

<chapter title="Persistent Component Being a State Class">

In this case, `getState()` returns the component itself, and `loadState()` copies properties of the state loaded from storage to the component instance:

```java
@Service
@State(...)
class MySettings implements PersistentStateComponent<MySettings> {

  public String stateValue;

  @Override
  public MySettings getState() {
    return this;
  }

  @Override
  public void loadState(MySettings state) {
    XmlSerializerUtil.copyBean(state, this);
  }
}
```

</chapter>

</tab>
</tabs>

### Implementing the State Class

The implementation of `PersistentStateComponent` works by serializing public fields, [annotated](%gh-ic%/platform/util/src/com/intellij/util/xmlb/annotations) private fields (see also [Customizing the XML format of persisted values](#customizing-the-xml-format-of-persisted-values)), and bean properties into an XML format.

To exclude a public field or bean property from serialization, annotate the field or getter with [`@Transient`](%gh-ic%/platform/util/src/com/intellij/util/xmlb/annotations/Transient.java).

Note that the state class must have a default constructor.
It should return the component's default state: the one used if there is nothing persisted in the XML files yet.

State class should have an `equals()` method, but state objects are compared by fields if it is not implemented.

The following types of values can be persisted:

- numbers (both primitive types, such as `int`, and boxed types, such as `Integer`)
- booleans
- strings
- collections
- maps
- enums

For other types, extend [`Converter`](%gh-ic%/platform/util/src/com/intellij/util/xmlb/api.kt).
See the example below.

#### Converter Example
{collapsible="true"}

```java
class LocalDateTimeConverter extends Converter<LocalDateTime> {
  public LocalDateTime fromString(@NotNull String value) {
    long epochMilli = Long.parseLong(value);
    ZoneId zoneId = ZoneId.systemDefault();
    return Instant.ofEpochMilli(epochMilli)
        .atZone(zoneId)
        .toLocalDateTime();
  }

  public String toString(LocalDateTime value) {
    ZoneId zoneId = ZoneId.systemDefault();
    long toEpochMilli = value.atZone(zoneId)
        .toInstant()
        .toEpochMilli();
    return Long.toString(toEpochMilli);
  }
}
```

Define the converter above in [`@OptionTag`](%gh-ic%/platform/util/src/com/intellij/util/xmlb/annotations/OptionTag.java) or [`@Attribute`](%gh-ic%/platform/util/src/com/intellij/util/xmlb/annotations/Attribute.java):

```java
class State {
  @OptionTag(converter = LocalDateTimeConverter.class)
  public LocalDateTime dateTime;
}
```

### Defining the Storage Location

To specify where precisely the persisted values are stored, add the ` @State ` annotation to the `PersistentStateComponent` class.

It has the following fields:
- `name` (required) – specifies the name of the state (name of the root tag in XML).
- `storages` – one or more of [`@Storage`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/components/Storage.java) annotations to specify the storage locations.
  Optional for project-level values – a standard project file is used in this case.
- `reloadable` (optional) – if set to false, a full project (or application) reload is required when the XML file is changed externally, and the state has changed.

The simplest ways of specifying the `@Storage` annotation are as follows:
- `@Storage(StoragePathMacros.WORKSPACE_FILE)` – for values stored in the project workspace file (project-level components only).
- `@Storage("yourName.xml")` – if a component is project-level, for <path>.ipr</path>-based projects, a standard project file is used automatically, and there is no need to specify anything.

The state is persisted in a separate file by specifying a different setting for the `value` parameter, which was the `file` parameter before 2016.x.

> For application-level storage, it is strongly recommended to use a custom file.
> Using of <path>other.xml</path> is deprecated.
>
{style="note"}

When planning your storage location, consider its intended purpose.
A project-level custom file should be preferred for storing plugin settings.
To store cached values, use `@Storage(StoragePathMacros.CACHE_FILE)`.
Refer to [`StoragePathMacros`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/components/StoragePathMacros.java) for commonly used macros.

The `roamingType` parameter of the `@Storage` annotation specifies the roaming type when the [settings are shared](#sharing-settings-between-ide-installations):

- `RoamingType.DEFAULT` – settings are shared
- `RoamingType.PER_OS` – settings are shared per operating system
- `RoamingType.DISABLED` – settings sharing is disabled

> If there are multiple components that store state in the same file, they must have the same `roamingType` attribute value.
>
{style="warning"}

### Sharing Settings Between IDE Installations

<tldr>

**Product Help:** [Share IDE settings](https://www.jetbrains.com/help/idea/sharing-your-ide-settings.html)

</tldr>

It is possible to share the persistent state of components between different IDE installations.
This allows users to have the same settings on every development machine or to share their settings within a team.

Settings can be shared via the following functionalities:
- _[Settings Sync](https://www.jetbrains.com/help/idea/sharing-your-ide-settings.html#IDE_settings_sync)_ plugin that allows synchronizing settings on JetBrains servers. Users can select the category of settings that are synchronized.
- _[Settings Repository](https://www.jetbrains.com/help/idea/sharing-your-ide-settings.html#settings-repository)_ plugin that allows synchronizing settings in a Git repository created and configured by a user.
- _[Export Settings](https://www.jetbrains.com/help/idea/2019.3/sharing-your-ide-settings.html#import-export-settings)_ feature that allows for the manual import and export of settings.

> Synchronization via the _Settings Sync_ or _Settings Repository_ plugins only works when these plugins are installed and enabled.

The decision about making a specific component's state shareable should be made carefully.
Only the settings that aren't specific to a given machine should be shared, for example, paths to user-specific directories shouldn't be shared.
If a component contains both shareable and non-shareable data, it should be split into two separate components.

#### Settings Sync Plugin
<primary-label ref="2022.3"/>

To include a plugin's component state in the _Settings Sync_ plugin synchronization, the following requirements must be met:
- The `RoamingType` is defined via the `roamingType` attribute of the `@Storage` annotation and is not equal to `DISABLED`.
- The `SettingsCategory` is defined via the `category` attribute of the `@State` annotation and is not equal to `OTHER`.
- There is no other `PersistentStateComponent`, which is stored in the same XML file and has a different `RoamingType`.

If the component state is OS-dependent, the `roamingType` of the `@Storage` annotation must be set to `RoamingType.PER_OS`.

> Note that <path>other.xml</path> file is non-roamable and declaring it in the `@Storage` annotation will disable roaming of the component state.
> It is recommended to use a separate XML file for the component or use another existing storage file.
>
{style="warning"}

#### Settings Repository Plugin and Export Settings Feature

> The _Settings Repository_ plugin is unbundled starting with version 2022.3 and will be no longer maintained.
>
{style="warning"}

Persistent components can be shared via the _Settings Repository_ plugin and _Export Settings_ feature, depending on the `roamingType` of the `@Storage` annotation.
See the [](#defining-the-storage-location) for more details.

### Customizing the XML Format of Persisted Values

> Consider using annotation parameters only to achieve backward compatibility.
> Otherwise, feel free to file issues about specific serialization cosmetics.
>
{style="note"}

If you want to use the default bean serialization but need to customize the storage format in XML (for example, for compatibility with previous versions of a plugin or externally defined XML formats), use the
[`@Tag`](%gh-ic%/platform/util/src/com/intellij/util/xmlb/annotations/Tag.java),
[`@Attribute`](%gh-ic%/platform/util/src/com/intellij/util/xmlb/annotations/Attribute.java),
[`@Property`](%gh-ic%/platform/util/src/com/intellij/util/xmlb/annotations/Property.java),
[`@MapAnnotation`](%gh-ic%/platform/util/src/com/intellij/util/xmlb/annotations/MapAnnotation.java),
[`@XMap`](%gh-ic%/platform/util/src/com/intellij/util/xmlb/annotations/XMap.java),
and [`@XCollection`](%gh-ic%/platform/util/src/com/intellij/util/xmlb/annotations/XCollection.java)
annotations.

If the state to serialize doesn't map cleanly to a JavaBean, then `org.jdom.Element` can be used as the state class.
In that case, use the `getState()` method to build an XML element with an arbitrary structure, which then is saved directly in the state XML file.
In the `loadState()` method, deserialize the JDOM element tree using any custom logic.
This is not recommended and should be avoided whenever possible.

To disable the expansion of path macros ([`PathMacro`](%gh-ic%/platform/macro/src/com/intellij/ide/macro/PathMacro.java))
in stored values, implement [`PathMacroFilter`](%gh-ic%/jps/model-serialization/src/com/intellij/openapi/application/PathMacroFilter.java)
and register in `com.intellij.pathMacroFilter` extension point.

### Migrating Persisted Values

If the underlying persistence model or storage format has changed, a [`ConverterProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/conversion/ConverterProvider.java) can provide [`ProjectConverter`](%gh-ic%/platform/lang-impl/src/com/intellij/conversion/ProjectConverter.java), whose `getAdditionalAffectedFiles()` method returns affected files to migrate and performs programmatic migration of stored values.

### Persistent Component Lifecycle

The `PersistentStateComponent.loadState()` method is called after the component has been created (only if there is some non-default state persisted for the component), and after the XML file with the persisted state is changed externally (for example, if the project file was updated from the version control system).
In the latter case, the component is responsible for updating the UI and other related components according to the changed state.

The `PersistentStateComponent.getState()` method is called every time the settings are saved (for example, on frame deactivation or when closing the IDE).
If the state returned from `getState()` is equal to the default state (obtained by creating the state class with a default constructor), nothing is persisted in the XML.
Otherwise, the returned state is serialized in XML and stored.

## Using `PropertiesComponent` for Simple Non-Roamable Persistence

If the plugin needs to persist a few simple values, the easiest way to do so is to use the [`PropertiesComponent`](%gh-ic%/platform/core-api/src/com/intellij/ide/util/PropertiesComponent.java) service.
It can save both application-level values and project-level values in the workspace file.
Roaming is disabled for `PropertiesComponent`, so use it only for temporary, non-roamable properties.

Use the `PropertiesComponent.getInstance()` method for storing application-level values and the `PropertiesComponent.getInstance(Project)` method for storing project-level values.

Since all plugins share the same namespace, it is highly recommended prefixing key names (for example, using plugin ID `com.example.myCustomSetting`).

## Legacy API (`JDOMExternalizable`) {collapsible="true"}

Older components use the [`JDOMExternalizable`](%gh-ic%/platform/util/src/com/intellij/openapi/util/JDOMExternalizable.java) interface for persisting state.
It uses the `readExternal()` method for reading the state from a JDOM element, and `writeExternal()` to write the state.

Implementations can manually store the state in attributes and sub-elements or use the [`DefaultJDOMExternalizer`](%gh-ic%/platform/util/src/com/intellij/openapi/util/DefaultJDOMExternalizer.java) class to store the values of all public fields automatically.

Components save their state in the following files:

- Project-level: project (<path>.ipr</path>) file.
  However, if the workspace option in the <path>[plugin.xml](plugin_configuration_file.md)</path> file is set to `true`, then the workspace (<path>.iws</path>) file is used instead.
- Module-level: module (<path>.iml</path>) file.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<!-- EP List Directory: /phpstorm/ -->

# PHP Extension Point and Listener List

<link-summary>Overview of Extension Points and Listeners for PHP.</link-summary>

<tldr>

**Product-Specific Plugin Development**: [PhpStorm](phpstorm.md)

</tldr>

62 Extension Points and 11 Listeners for PHP

See [](intellij_platform_extension_point_list.md) for IntelliJ Platform.

<include from="snippets.md" element-id="ep_list_legend"/>

## PhpStorm

### PhpStorm – Listeners

| Topic | Listener |
|-------|----------|
| [ComposerInstalledPackagesService#PACKAGE_MANAGER_TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.php.composer.actions.update.ComposerInstalledPackagesService.ComposerUpdateListener)  ![Project-Level][project-level] | `ComposerUpdateListener` |
| [RepositoriesComposerConfig#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.php.composer.json.cache.ComposerRepositoriesChangedListener)  | `ComposerRepositoriesChangedListener` |
| [StateChangedListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.php.config.PhpProjectSharedConfiguration.StateChangedListener)  | `StateChangedListener` |
| [StateChangedListener#LANGUAGE_LEVEL_CHANGED_TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.php.config.PhpProjectSharedConfiguration.StateChangedListener)  | `StateChangedListener` |
| [PhpProjectWorkspaceConfiguration#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.php.config.PhpProjectWorkspaceConfigurationListener)  | `PhpProjectWorkspaceConfigurationListener` |
| [DefaultStubsPathListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.php.config.PhpRuntimeConfiguration.DefaultStubsPathListener)  | `DefaultStubsPathListener` |
| [PhpInterpreterConflictResolveListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.php.config.interpreters.PhpInterpretersManagerImpl.PhpInterpreterConflictResolveListener)  | `PhpInterpreterConflictResolveListener` |
| [StateChangedListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.php.debug.listener.PhpDebugExternalConnectionsAccepter.StateChangedListener)  | `StateChangedListener` |
| [RectorChangesListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.php.rector.RectorChangesListener)  | `RectorChangesListener` |
| [PhpRemoteInterpreterChangedListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.php.remote.interpreter.ui.PhpRemoteInterpreterConfigurationForm.PhpRemoteInterpreterChangedListener)  | `PhpRemoteInterpreterChangedListener` |
| [CustomExpectationNotifier.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.pestphp.pest.features.customExpectations.CustomExpectationNotifier)  ![Project-Level][project-level] | `CustomExpectationNotifier` |


### com.intellij.phing

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.phing.phpFileDescriptionProvider](https://jb.gg/ipe?extensions=com.intellij.phing.phpFileDescriptionProvider) ![Non-Dynamic][non-dynamic] | `PhingPhpFileDescriptionProvider` |
| [com.intellij.phing.propertyFilesManager](https://jb.gg/ipe?extensions=com.intellij.phing.propertyFilesManager) ![Non-Dynamic][non-dynamic] | `PropertyFilesManager` |

### com.intellij.php.psalm

| Extension Point | Implementation |
|-----------------|----------------|
| [com.jetbrains.php.tools.quality.Psalm.PsalmConfigurationProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.tools.quality.Psalm.PsalmConfigurationProvider) ![Non-Dynamic][non-dynamic] | `PsalmConfigurationProvider` |

### com.intellij.php.tools.quality.phpstan

| Extension Point | Implementation |
|-----------------|----------------|
| [com.jetbrains.php.tools.quality.PhpStan.PhpStanConfigurationProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.tools.quality.PhpStan.PhpStanConfigurationProvider) ![Non-Dynamic][non-dynamic] | `PhpStanConfigurationProvider` |

### com.jetbrains.php

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.php.debug.template.configurable](https://jb.gg/ipe?extensions=com.intellij.php.debug.template.configurable) ![Internal][internal] ![Project-Level][project-level] | `PhpTemplateDebugConfigurable` |
| [com.intellij.php.debug.templateLanguage](https://jb.gg/ipe?extensions=com.intellij.php.debug.templateLanguage) ![Internal][internal] | `PhpTemplateLanguagePathMapper` |
| [com.intellij.php.typeProvider2](https://jb.gg/ipe?extensions=com.intellij.php.typeProvider2) ![Deprecated][deprecated] | `PhpTypeProvider2` |
| [com.intellij.phpDeadCode](https://jb.gg/ipe?extensions=com.intellij.phpDeadCode) | [`EntryPoint`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/reference/EntryPoint.java) |
| [com.intellij.phpRunConfigurationExtension](https://jb.gg/ipe?extensions=com.intellij.phpRunConfigurationExtension) | `PhpRunConfigurationExtension` |
| [com.jetbrains.php.arrayShapesProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.arrayShapesProvider) | `PhpArrayShapesProvider` |
| [com.jetbrains.php.baseLexerProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.baseLexerProvider) ![Internal][internal] | `PhpBaseLexerProvider` |
| [com.jetbrains.php.classAliasProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.classAliasProvider) | `PhpClassAliasProvider` |
| [com.jetbrains.php.composer.execProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.composer.execProvider) | `ComposerExecutionProvider` |
| [com.jetbrains.php.composerConfigClient](https://jb.gg/ipe?extensions=com.jetbrains.php.composerConfigClient) ![Internal][internal] | `ComposerConfigClient` |
| [com.jetbrains.php.config.customFormatFunctionsProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.config.customFormatFunctionsProvider) | `PhpCustomFormatFunctionsProvider` |
| [com.jetbrains.php.config.interpreterFormProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.config.interpreterFormProvider) | `PhpInterpreterFormProvider` |
| [com.jetbrains.php.config.interpreters.PhpInterpretersStateListener](https://jb.gg/ipe?extensions=com.jetbrains.php.config.interpreters.PhpInterpretersStateListener) | `PhpInterpretersStateListener` |
| [com.jetbrains.php.coreMethodProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.coreMethodProvider) ![Internal][internal] | `PhpCoreHandler` |
| [com.jetbrains.php.customFunctionIndex](https://jb.gg/ipe?extensions=com.jetbrains.php.customFunctionIndex) | `PhpCustomFunctionIndex` |
| [com.jetbrains.php.customFunctionPredicate](https://jb.gg/ipe?extensions=com.jetbrains.php.customFunctionPredicate) ![Internal][internal] | `PhpCustomFunctionPredicateIndex` |
| [com.jetbrains.php.debug.mapping.localPathFixer](https://jb.gg/ipe?extensions=com.jetbrains.php.debug.mapping.localPathFixer) | `PhpLocalPathFixer` |
| [com.jetbrains.php.deprecationFixesProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.deprecationFixesProvider) | `PhpDeprecationQuickFixesProvider` |
| [com.jetbrains.php.deprecationProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.deprecationProvider) | `PhpDeprecationProvider` |
| [com.jetbrains.php.dfaStateFromAssertionProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.dfaStateFromAssertionProvider) ![Internal][internal] | `PhpDfaStateFromAssertionProvider` |
| [com.jetbrains.php.docPrefixProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.docPrefixProvider) ![Internal][internal] | `PhpDocPrefixProvider` |
| [com.jetbrains.php.docTagValuesStubProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.docTagValuesStubProvider) | `PhpCustomDocTagValuesStubProvider` |
| [com.jetbrains.php.expressionClassNamesProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.expressionClassNamesProvider) ![Internal][internal] | `PhpExpressionClassNamesProvider` |
| [com.jetbrains.php.externalUsagesSearcher](https://jb.gg/ipe?extensions=com.jetbrains.php.externalUsagesSearcher) | `PhpExternalUsagesSearcher` |
| [com.jetbrains.php.frameworkProjectConfigurableProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.frameworkProjectConfigurableProvider) | `PhpFrameworkConfigurableProvider` |
| [com.jetbrains.php.frameworkUsageProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.frameworkUsageProvider) | `PhpFrameworkUsageProvider` |
| [com.jetbrains.php.includedPathsContributor](https://jb.gg/ipe?extensions=com.jetbrains.php.includedPathsContributor) | `PhpIncludedPathsContributor` |
| [com.jetbrains.php.injectionExternalFragmentSubstProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.injectionExternalFragmentSubstProvider) ![Project-Level][project-level] | `PhpInjectionExternalFragmentSubstProvider` |
| [com.jetbrains.php.keyTypeProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.keyTypeProvider) ![Internal][internal] | `PhpKeyTypeProvider` |
| [com.jetbrains.php.libraryRoot](https://jb.gg/ipe?extensions=com.jetbrains.php.libraryRoot) ![Internal][internal] | `PhpLibraryRootProvider` |
| [com.jetbrains.php.magicMethodProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.magicMethodProvider) ![Internal][internal] | `PhpMagicHandler` |
| [com.jetbrains.php.metaSignatureResolver](https://jb.gg/ipe?extensions=com.jetbrains.php.metaSignatureResolver) ![Internal][internal] | `PhpMetaSignatureResolver` |
| [com.jetbrains.php.metaTableProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.metaTableProvider) ![Internal][internal] | `PhpMetaTableProvider` |
| [com.jetbrains.php.noReturnProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.noReturnProvider) | `PhpNoReturnProvider` |
| [com.jetbrains.php.openSettingsProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.openSettingsProvider) | `Settings` |
| [com.jetbrains.php.phpunit.phpUnitSettingsLoader](https://jb.gg/ipe?extensions=com.jetbrains.php.phpunit.phpUnitSettingsLoader) ![Internal][internal] | `PhpUnitSettingsLoader` |
| [com.jetbrains.php.predefinedVariableProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.predefinedVariableProvider) | `PhpPredefinedVariableProvider` |
| [com.jetbrains.php.referenceResolver2](https://jb.gg/ipe?extensions=com.jetbrains.php.referenceResolver2) | `PhpMultipleDeclarationFilter` |
| [com.jetbrains.php.referenceScopeExtension](https://jb.gg/ipe?extensions=com.jetbrains.php.referenceScopeExtension) ![Experimental][experimental] | `PhpReferenceScopeExtension` |
| [com.jetbrains.php.relatedToPhpFilesContributor](https://jb.gg/ipe?extensions=com.jetbrains.php.relatedToPhpFilesContributor) | `RelatedToPhpFilesContributor` |
| [com.jetbrains.php.remote.remoteInterpreterManager](https://jb.gg/ipe?extensions=com.jetbrains.php.remote.remoteInterpreterManager) | `PhpRemoteInterpreterManager` |
| [com.jetbrains.php.templateLanguageHighlightingExtension](https://jb.gg/ipe?extensions=com.jetbrains.php.templateLanguageHighlightingExtension) ![Internal][internal] | `TemplateLanguageBackgroundColorProvider` |
| [com.jetbrains.php.testFramework.phpTestOldConfigHolder](https://jb.gg/ipe?extensions=com.jetbrains.php.testFramework.phpTestOldConfigHolder) ![Deprecated][deprecated] ![Internal][internal] | `PhpTestFrameworkOldConfigHolder` |
| [com.jetbrains.php.testFrameworkType](https://jb.gg/ipe?extensions=com.jetbrains.php.testFrameworkType) | `PhpTestFrameworkType` |
| [com.jetbrains.php.tools.quality.laravelPint.laravelPintConfigurationProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.tools.quality.laravelPint.laravelPintConfigurationProvider) | `LaravelPintConfigurationProvider` |
| [com.jetbrains.php.tools.quality.messDetector.messDetectorConfigurationProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.tools.quality.messDetector.messDetectorConfigurationProvider) | `MessDetectorConfigurationProvider` |
| [com.jetbrains.php.tools.quality.phpCSFixer.phpCSFixerConfigurationProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.tools.quality.phpCSFixer.phpCSFixerConfigurationProvider) | `PhpCSFixerConfigurationProvider` |
| [com.jetbrains.php.tools.quality.phpcs.phpCSConfigurationProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.tools.quality.phpcs.phpCSConfigurationProvider) | `PhpCSConfigurationProvider` |
| [com.jetbrains.php.tools.quality.type](https://jb.gg/ipe?extensions=com.jetbrains.php.tools.quality.type) | `QualityToolType` |
| [com.jetbrains.php.typeProvider3](https://jb.gg/ipe?extensions=com.jetbrains.php.typeProvider3) ![Deprecated][deprecated] | `PhpTypeProvider3` |
| [com.jetbrains.php.typeProvider4](https://jb.gg/ipe?extensions=com.jetbrains.php.typeProvider4) | `PhpTypeProvider4` |

### com.jetbrains.php.behat

| Extension Point | Implementation |
|-----------------|----------------|
| [com.jetbrains.php.behat.gherkinContextProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.behat.gherkinContextProvider) | `ContextInterfaceProvider` |

### com.jetbrains.php.blade

| Extension Point | Implementation |
|-----------------|----------------|
| [com.jetbrains.php.blade.bladeDirectiveContributor](https://jb.gg/ipe?extensions=com.jetbrains.php.blade.bladeDirectiveContributor) ![Experimental][experimental] | `BladeDirectiveContributor` |

### com.jetbrains.php.framework

| Extension Point | Implementation |
|-----------------|----------------|
| [com.jetbrains.php.framework.descriptionProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.framework.descriptionProvider) ![Internal][internal] | `FrameworkDescriptionProvider` |

### intellij.php.frontback.impl.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.php.docTagParserExtension](https://jb.gg/ipe?extensions=com.intellij.php.docTagParserExtension) ![Internal][internal] | `PhpDocTagParser` |

### phpstorm-remote-interpreter-plugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.jetbrains.php.remote.interpreter.ui.customConfigProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.remote.interpreter.ui.customConfigProvider) | `PhpProjectConfigComponentProvider` |
| [com.jetbrains.php.remote.phpHelperScriptProvider](https://jb.gg/ipe?extensions=com.jetbrains.php.remote.phpHelperScriptProvider) | `PhpHelperScriptProvider` |
| [com.jetbrains.php.remote.remoteProcessManager](https://jb.gg/ipe?extensions=com.jetbrains.php.remote.remoteProcessManager) | `PhpRemoteProcessManager` |

[deprecated]: https://img.shields.io/badge/-Deprecated-lightgrey?style=flat-square
[removal]: https://img.shields.io/badge/-Removal-red?style=flat-square
[obsolete]: https://img.shields.io/badge/-Obsolete-grey?style=flat-square
[experimental]: https://img.shields.io/badge/-Experimental-violet?style=flat-square
[internal]: https://img.shields.io/badge/-Internal-darkred?style=flat-square
[project-level]: https://img.shields.io/badge/-Project--Level-blue?style=flat-square
[non-dynamic]: https://img.shields.io/badge/-Non--Dynamic-orange?style=flat-square
[dumb-aware]: https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# PHP Open API

<link-summary>Introduction to PHP Open API.</link-summary>

> Please join the dedicated [intellij-php](https://jetbrains-platform.slack.com/archives/C5P9YB0LT/p1653913208725609) Slack channel to discuss PHP related plugin development.
>

## Dependency in plugin.xml

```xml
<depends>com.jetbrains.php</depends>
```

## PHP PSI

`com.jetbrains.php.lang.psi.elements.*;`

## Utility Classes

### `PhpFilePathUtils`

`com.jetbrains.php.lang.psi.elements.impl.PhpFilePathUtils` contains helper methods for working with paths from PSI elements.

- `getFileName()` returns a constant string representation of the path from the PSI element.

    For example, for the expression:

    ```php
    // in file: /bin/folder/file.php
    __DIR__ . "/file2.php";
    ```

    it returns `"/bin/folder/file2.php"`.

    Note that the element passed as an argument can contain any expression that can be statically evaluated to a constant.

- `getReferences()` returns all path references from the PSI element.

    Using this method in conjunction with
    [PsiReferenceContributor](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReferenceContributor.java)
    you can add autocompletion for string literals in the specific contexts.
    For example, if certain PHP functions in your code accept paths, you can autocomplete them when writing arguments.

    Note that PhpStorm automatically adds references for concatenation expressions with `__DIR__` or `dirname(__FILE__)` function call.

## PHP Extension Points

> See [](php_extension_point_list.md) for the complete list.
>
{style="note"}
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Incompatible PHP OpenAPI Changes in PhpStorm

<link-summary>Breaking PHP Open API changes page list.</link-summary>

The following pages list the breaking changes in IDE releases with required/recommended steps to take by plugin authors.

* [Changes in 2020.3](php_open_api_breaking_changes_203.md)
* [Changes in 2020.2](php_open_api_breaking_changes_202.md)
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Incompatible PHP OpenAPI changes in PhpStorm 2020.2

<link-summary>List of known breaking PHP Open API changes in 2020.2.</link-summary>

## Union Types Support
PhpStorm 2020.2 introduced support for [PHP union types](https://wiki.php.net/rfc/union_types_v2), which resulted in some PSI-breaking changes.

In earlier versions, type hints in parameters, properties, and return types were parsed inconsistently:
* Return types used a separate `PhpReturnType` wrapper element, which contained the nullability question mark and the actual type's class reference.
* Parameters and properties used no wrapper element: class references and nullability question mark were plain children of `Parameter` or `CLASS_FIELDS`.

As of PhpStorm 2020.2, class references with the question mark are uniformly wrapped into the `PhpTypeDeclaration` element, which is the parent for `PhpReturnType`, `PhpFieldType`, and `PhpParameterType`.

If your existing code fetches a class reference directly from the parent element, it is now required to get `PhpTypeDeclaration` first, and then call `PhpTypeDeclaration#getClassReferences()`.

Before 2020.2:

```java
private void handleParameterBefore(Parameter parameter) {
  ClassReference classReference = PsiTreeUtil.getChildOfType(parameter, ClassReference.class);
  handleReference(classReference);
}
```

After 2020.2:

```java
private void handleParameterAfter(Parameter parameter) {
  PhpTypeDeclaration typeDeclaration = PsiTreeUtil.getChildOfType(parameter, PhpTypeDeclaration.class);
  for (ClassReference classReference : typeDeclaration.getClassReferences()) {
    handleReference(classReference);
  }
}
```

## Deprecated `PhpReturnType.getClassReference()`
As of PhpStorm 2020.2, `PhpReturnType.getClassReference()` is deprecated, since there can be multiple class references.
This method also became nullable, since in earlier versions an incomplete `?` type was parsed just as a question mark, but now it is parsed as `PhpTypeDeclaration` with empty `getClassReferences()`.

Before 2020.2:

```java
private void handleReturnTypeBefore(PhpReturnType returnType) {
  ClassReference classReference = returnType.getClassReference();
  handleReference(classReference);
}
```

After 2020.2:

```java
private void handleReturnTypeAfter(PhpReturnType returnType) {
  for (ClassReference classReference : returnType.getClassReferences()) {
    handleReference(classReference);
  }
}
```
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Incompatible PHP OpenAPI changes in PhpStorm 2020.3

<link-summary>List of known breaking PHP Open API changes in 2020.3.</link-summary>

## PHP 8 Support
PhpStorm 2020.3 introduces support for the upcoming PHP 8, which results in several noticeable changes in the PhpStorm internals.

### Throw Expression
In PHP 8, the [throw expression has been converted to a statement](https://wiki.php.net/rfc/throw_expression), so that it can now be used in arrow functions and coalescing and ternary expressions.

The following changes were introduced:
* The PSI element `com.jetbrains.php.lang.psi.elements.PhpThrow` is now deprecated, and the new PSI element `com.jetbrains.php.lang.psi.elements.PhpThrowExpression` is introduced instead.

* We encourage using `PhpThrowExpression`, since such expressions can appear in more places.

* `PhpThrow` PSI layout has changed: it is now a `Statement` with a single child `PhpThrowExpression`. The `PhpThrow#getArgument` delegates to `PhpThrowExpression#getArgument` for now.

* In PhpStorm 2020.2, the `PhpThrow` class will be removed and replaced with `StatementImpl`.

See the [YouTrack issue](https://youtrack.jetbrains.com/issue/WI-54357) for details.

### Trailing Comma in Parameter Lists
Previously supported only in argument lists, [trailing commas can now be used in parameter lists](https://wiki.php.net/rfc/trailing_comma_in_parameter_list), as well.

The following changes were introduced:
* The last psi-element of parameter lists can now be `PhpTokenTypes.opCOMMA`. This might affect getting the last parameter: earlier the last psi-element of `ParameterList` was always a parameter but now it can also  be a comma.

* If you are using `PsiElement.getLastChild()` to get the last parameter, it is now recommended replacing it with getting a parameter by index via `ParameterList.getParameter(int)`.

See the [YouTrack issue](https://youtrack.jetbrains.com/issue/WI-54481) for details.

### Non-Capturing Catches
With this PHP 8 change, it is now possible to catch exceptions [without capturing them to variables](https://wiki.php.net/rfc/non-capturing_catches).

The following changes were introduced:
* `Catch` now might not have a variable inside.
  The `@Nullable` annotation for the method `Catch.getException()` that returns a variable was already available.
  However, if you are getting a variable from `Catch` differently, or ignoring the `@Nullable` annotation, you need to be aware of this case effective since PHP 8.0.

See the [YouTrack issue](https://youtrack.jetbrains.com/issue/WI-54484) for details.

### Constructor Property Promotion
The new shorthand syntax allows defining class properties by ["promoting" the constructor parameters](https://wiki.php.net/rfc/constructor_promotion) with a visibility keyword (`public`, `protected`, or `private`).

The following changes were introduced:
* `com.jetbrains.php.lang.psi.elements.Parameter` now can contain one of `com.jetbrains.php.lang.lexer.PhpTokenTypes#tsVARIABLE_MODIFIERS` as a child element.

See the [YouTrack issue](https://youtrack.jetbrains.com/issue/WI-54485) for details.

### Nullsafe Operator
The [new nullsafe operator](https://wiki.php.net/rfc/nullsafe_operator) `?->` with full short-circuiting allows applying the null-coalescing behavior to method calls, thus eliminating the need for additional null checks.

The following changes were introduced:
* `com.jetbrains.php.lang.psi.elements.MemberReference` now has an optional child `com.jetbrains.php.lang.lexer.PhpTokenTypes#opQUEST` between the class reference and `com.jetbrains.php.lang.lexer.PhpTokenTypes#ARROW`.

See the [YouTrack issue](https://youtrack.jetbrains.com/issue/WI-54639) for details.

### Named Parameters
With [named parameters](https://wiki.php.net/rfc/named_params), you can pass arguments to a function based on the parameter name, rather than its position.

The following changes were introduced:
* The layout of `com.jetbrains.php.lang.psi.elements.ParameterList` for call sites has changed.
  Earlier, it was a comma-separated list of arguments; now, each argument can have optional previous siblings: `com.jetbrains.php.lang.lexer.PhpTokenTypes#IDENTIFIER` and `com.jetbrains.php.lang.lexer.PhpTokenTypesopCOLON`.

See the [YouTrack issue](https://youtrack.jetbrains.com/issue/WI-54640) for details.

### Attributes
With [attributes](https://wiki.php.net/rfc/attributes_v2), you can provide structured, syntactic metadata to declarations of classes, properties, functions, methods, parameters, and constants.

The following changes were introduced:
* New PSI elements `PhpAttribute` and `PhpAttributesList` were added.

* Possible attributes' owners (`com.jetbrains.php.lang.psi.elements.Function`, `com.jetbrains.php.lang.psi.elements.Parameter`, and so on) can now have zero or more instances of `PhpAttributesList` as first children.
  This means that now it is not safe to assume that `PhpPsiElement#getFirstChild` will return some token.
  We encourage finding the needed tokens by `IElementType` manually.

* If a PHPDoc comment of a named element is preceded by `PhpAttribute`, it will not be a sibling of a named element, but rather a child.
  We encourage using `PhpNamedElement#getDocComment` (which is already updated to reflect the changes) instead of finding the PHPDoc comment manually.

* The stub tree structure has changed for some elements.
  If this causes problems in plugins, consider using higher-level facilities or [contact support](https://www.jetbrains.com/help/phpstorm/getting-started.html#contact-support) for additional help.

See the [YouTrack issue](https://youtrack.jetbrains.com/issue/WI-53163) for details.

### Match Expression
New [match expressions](https://wiki.php.net/rfc/match_expression_v2) provide functionality similar to `switch`, but with safer semantics and the ability to return values.

The following changes were introduced:
* New PSI elements: `PhpMatchExpression` and `PhpMatchArm`.

* A list of match arms is obtained via `PhpMatchExpression#getMatchArms()`. The default match arm is not included in this list and is obtained by calling `PhpMatchExpression#getDefaultMatchArm()`.

* Each `PhpMatchArm` provides a list of conditions via `PhpMatchArm#getConditions()`. The method returns an empty list for the default match arm.

* Match arm body expression is obtained by invoking `PhpMatchArm#getBodyExpression()`.

See the [YouTrack issue](https://youtrack.jetbrains.com/issue/WI-54356) for details.

## Twig Support Changes
The following changes were introduced:
* PSI layout of Twig variables and fields has been changed.
  Earlier, Twig variables and fields used to be parsed as `PsiIdentifier`; now they are wrapped into new PSI elements: `TwigVariable` and `TwigField`.

* `TwigField` may be nested and contain a variable or other fields inside.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# PHP Type Providers

<link-summary>Providing element type information for PHP type inference mechanism.</link-summary>

Type inference in PhpStorm is built on top of type providers, each of which is responsible for inferring the types of
specific PSI elements.
For example, `com.jetbrains.php.lang.psi.resolve.types.PhpArrayAccessTP` is responsible for inferring the types of expressions like `$arr[10]`.
There are dozens of such providers, and they all work one after another to provide type information when needed.

All providers inherit from `com.jetbrains.php.lang.psi.resolve.types.PhpTypeProvider4`, which is registered in the `com.jetbrains.php.typeProvider4` extension point.

## Types in PhpStorm

The first phase of type inference takes place at the indexing stage.
At this phase, PhpStorm calls `PhpTypeProvider4.getType()` on each type provider.
PhpStorm only has access to local information from the current file and can't use information from other files as well as indexes because it doesn't yet build them.
Sometimes, it can deduce the exact type from this information, but in other cases this is impossible because PhpStorm requires information from other files.

Because of this, there are two kinds of types in PhpStorm:

- Complete types
- Incomplete types

### Complete Types

Complete types are types that are known exactly based on **only** the local information of the current file.

```php
<?php

$a = 100;
```

The type of the expression that's assigned to the `$a` variable is Complete type `int`, since PhpStorm can definitely infer that a numeric literal is of type `int`.

```php
<?php

function foo(string $a): string {
  echo $a;
}
```

Here, since the `$a` parameter has a `string` type hint, PhpStorm can infer the Complete type `string`.

### Incomplete Types

Incomplete types are types that need additional information from other project files besides the containing file.

Suppose we have two files:

<path>foo.php</path>:

```php
<?php

function foo(): string {
  return "Hello World!";
}
```

<path>main.php</path>:

```php
<?php

$a = foo();
echo $a;
```

In the <path>main.php</path> file, we call the `foo()`, which is defined in another <path>foo.php</path> file.
Because of this, PhpStorm won't be able to infer the type of the `$a` variable during the indexing stage, since it depends on the definition of the `foo()` from another file.

For such cases, PhpStorm will create an Incomplete type in which writes all the necessary information to resolve the type when it finishes indexing.
In this case, it's the name of the function being called, so PhpStorm will create an Incomplete type `#F\foo`.

#### Incomplete Types Structure

At the beginning there is a `#` character, which is a marker that the type is Incomplete.

It's followed by the type provider's unique key.
PhpStorm uses this key to decide which type provider to pass the Incomplete type to resolve.

The rest of the line is the encoded information.
In the example above, this is the fully qualified name of the function.

PhpStorm will further pass the created Incomplete type after it finishes the indexing to resolve it into a Complete type.
It will choose instance of `PhpTypeProvider4` that have `PhpTypeProvider4.getKey()` equal to the character after `#`.
In other words, same provider is supposed to provide incomplete type starting with `#` + result of call `PhpTypeProvider4.getKey()`, this will result in that this type will be passes to the same `PhpTypeProvider4.complete()` instance during resolve.

During indexing, PhpStorm collects information about all types of elements in this way and stores them in the index.
When there is a need for the type of some expression, PhpStorm passes the Incomplete type obtained at the indexing stage for resolving.

#### Incomplete Types Resolving

The second phase of type inference is the global Incomplete type resolution.
At this phase, PhpStorm calls `PhpTypeProvider4.complete()` of each type provider.
All Incomplete types are passed to the providers that created them.
At this point, PhpStorm can access any information from other files to resolve the Incomplete type.

### Union Types

Since PHP is a dynamically typed language, at the type inference stage PhpStorm can get a situation where the type can be either one or the other.

For example:

```php
<?php

$a = 100;
if (rand(0, 10) > 5) {
  $a = "Hello World!";
}

$a; // (1)
```

In (1), the variable `$a` will be of type `int|string` because PhpStorm can't deduce exactly which branch the execution will take.

PhpStorm stores this types as separate strings inside the [`PhpType`](#phptype) class.
Each of the types can be either Complete or Incomplete.
In the Incomplete type resolving process, PhpStorm will resolve each union type individually.

Since some providers may return types for the same PSI element, union types may appear for some elements.

## `PhpType`

PhpStorm uses the `com.jetbrains.php.lang.psi.resolve.types.PhpType` class to work with types.

To add types to it, use `add()`, which can take either another `PhpType` or a `string`.

To check that a type is Complete, use `isComplete()`.

To resolve the Incomplete type, use `global()`.
This method shouldn't be used during indexing, namely inside `PhpTypeProvider4.getType()`.

### How to get `PhpType` from PSI?

In PhpStorm, PSI elements with types implement the `com.jetbrains.php.lang.psi.elements.PhpTypedElement` interface.
To get the type of element, use the `getType()`.

## `PhpTypeProvider4` Implementation

`PhpTypeProvider4` interface:

```java
/**
 * Extension point to implement to provide Type information on various PhpPsiElements.
 */
public interface PhpTypeProvider4 {
  ExtensionPointName<PhpTypeProvider4> EP_NAME = ExtensionPointName.create("com.jetbrains.php.typeProvider4");

  /**
   * @return Your custom signature key, i.e. "Я". Do not use any of PhpTypeSignatureKey.XXX constants though!
   */
  char getKey();

  /**
   * @param element to deduce type for - using only LOCAL info. <b>THIS IS MOST CRUCIAL ASPECT TO FOLLOW</b>
   * @return type for element, null if no insight. You can return a custom signature here to be later decoded by getBySignature.
   */
  @Nullable
  PhpType getType(PsiElement element);

  /**
   * @param expression to complete - Here you can use index lookups
   * @param project well so you can reach the PhpIndex based stuff
   * @return type for element, null if no insight. You can return a custom signature here to be later decoded by getBySignature.
   */
  @Nullable
  PhpType complete(String expression, Project project);

  /**
   * Here you can extend the signature lookups
   * @param expression Signature expression to decode. You can use PhpIndex.getBySignature() to look up expression internals.
   * @param visited Recursion guard: please pass this on into any phpIndex calls having same parameter
   * @param depth Recursion guard: please pass this on into any phpIndex calls having same parameter
   * @param project well so you can reach the PhpIndex
   * @return null if no match
   */
  Collection<? extends PhpNamedElement> getBySignature(String expression, Set<String> visited, int depth, Project project);

  default boolean emptyResultIsComplete() {
    return false;
  }

  @Internal
  default boolean interceptsNativeSignature() {
    return false;
  }

}
```

To implement `PhpTypeProvider4`, you need to override 4 methods:

1. `getKey()` returns a character that will be unique for this type provider.
   This can be any character, as long as it's unique, for example, PhpStorm uses hieroglyphs.
   See also `com.jetbrains.php.lang.psi.resolve.types.PhpCharBasedTypeKey`.

   > When choosing a provider key, keep in mind that other plugins may already be using it.
   > In this case, there will be an error stating that the key is duplicated, which will lead to incorrect work of both plugins.
   >
   {style="note"}

2. `getType()` returns the type of the expression for the given element.
   It's called at the indexing stage, and therefore its implementation **can't access** any information from the index and **must** rely only on local information.
   If you need some information, then pack the required data into a string and return an Incomplete type based on this string.

3. `complete()` resolves an Incomplete type into a Complete type.
   All strings of Incomplete types are sequentially passed to this method, it should return a Complete type for them.

4. `getBySignature()` provides additional elements or references.

You can also override the `emptyResultIsComplete()`, which indicates whether the `null` returned from the `complete()` is a valid result, which means that PhpStorm won't add the `mixed` to the resulting type.

## Example Implementation

The goal of this example is to provide types for field references assigned in `setUp` method if containing class is PHPUnit one.

### Define a `PhpUnitFiledInitializedInSetUpMethodsTP`

```java
import com.intellij.openapi.project.Project;
import com.intellij.psi.PsiElement;
import com.intellij.util.containers.MultiMap;
import com.jetbrains.php.PhpIndex;
import com.jetbrains.php.lang.psi.elements.*;
import com.jetbrains.php.lang.psi.elements.impl.PhpClassImpl;
import com.jetbrains.php.phpunit.PhpUnitUtil;
import org.jetbrains.annotations.NotNull;
import org.jetbrains.annotations.Nullable;

import java.util.Collection;
import java.util.Set;

public class PhpUnitFiledInitializedInSetUpMethodsTP implements PhpTypeProvider4 {

  @Override
  public char getKey() {
    return 'Ю';
  }

  @Nullable
  @Override
  public PhpType getType(PsiElement element) {
    if (element instanceof Field) {
      PhpClass phpClass = ((Field) element).getContainingClass();
      if (phpClass != null) {
        MultiMap<String, AssignmentExpression> accessMap = PhpClassImpl.getPhpUnitSetUpAssignmentsPerField(phpClass);
        if (accessMap.containsKey(((Field) element).getName())) {
          Collection<AssignmentExpression> expressions = accessMap.get(((Field) element).getName());
          for (AssignmentExpression expression : expressions) {
            PhpType type = expression.getType();
            if (!type.isEmpty()) {
              PhpType phpType = new PhpType();
              String classFQN = phpClass.getFQN();
              for (String t : type.getTypes()) {
                phpType.add("#" + getKey() + classFQN + getKey() + t);
              }
              return phpType;
            }
          }
        }
      }
    }
    return null;
  }

  @Nullable
  @Override
  public PhpType complete(String expression, Project project) {
    int indexOfSign = expression.indexOf(getKey());
    int indexOfDelimiter = expression.indexOf(getKey(), indexOfSign + 1);
    String classFqn = expression.substring(indexOfSign + 1, indexOfDelimiter);
    String type = expression.substring(indexOfDelimiter + 1);
    if (isPhpUnitClass(project, classFqn)) {
      return new PhpType().add(type);
    }
    return null;
  }

  static boolean isPhpUnitClass(Project project, @NotNull String classFqn) {
    return PhpIndex.getInstance(project).getClassesByFQN(classFqn).stream().anyMatch(PhpUnitUtil::extendsRootTestClass);
  }

  @Override
  public Collection<? extends PhpNamedElement> getBySignature(String expression, Set<String> visited, int depth, Project project) {
    return null;
  }

}
```

### Register the `PhpUnitFiledInitializedInSetUpMethodsTP`

The `PhpUnitFiledInitializedInSetUpMethodsTP` implementation is registered with the IntelliJ Platform in the
plugin configuration file using the `com.jetbrains.php.typeProvider4` extension point.

```xml
<extensions defaultExtensionNs="com.jetbrains">
  <php.typeProvider4
          implementation="com.jetbrains.php.lang.psi.resolve.types.PhpUnitFiledInitializedInSetUpMethodsTP"/>
</extensions>
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# PhpStorm Plugin Development

<link-summary>Introduction to developing plugins for PhpStorm.</link-summary>

<var name="productID" value="phpstorm"/>
<var name="marketplaceProductID" value="phpstorm"/>
<include from="snippets.md" element-id="jetbrainsIDE_TLDR"/>

[PhpStorm](https://www.jetbrains.com/phpstorm/) is an IntelliJ Platform-based product.
Plugin projects targeting PhpStorm can be developed using [IntelliJ IDEA](idea.md).

See also:

* [](plugin_alternatives.md#phpstorm-advanced-metadata)
* [](php_open_api.md)
* [](existing_plugins.md)

> Please join the dedicated [intellij-php](https://jetbrains-platform.slack.com/archives/C5P9YB0LT/p1653913208725609) Slack channel to discuss PHP related plugin development.
>

## PhpStorm Plugin Setup

### Gradle Build Script

#### IntelliJ Platform Gradle Plugin (2.x)

Define a dependency using [`phpstorm()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md), see _Versions_ link on top of this page for all available versions.
See [](tools_intellij_platform_gradle_plugin.md#dependenciesLocalPlatform) for using a local installation.

A dependency on the bundled `com.jetbrains.php` plugin must be added using the [`bundledPlugin()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins) helper.

Minimum <path>build.gradle.kts</path> setup:

```kotlin
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    phpstorm("<versionNumber>")
    bundledPlugin("com.jetbrains.php")
  }
}
```

#### Gradle IntelliJ Plugin (1.x)

{collapsible="true" default-state="collapsed"}

<primary-label ref="Obsolete"/>

<include from="tools_gradle_intellij_plugin.md" element-id="gradlePluginObsolete"/>

<tabs>

<tab title="PhpStorm IDE">

The configuration of targeting PhpStorm IDE follows the methods described in [Configuring Plugin Projects Using a Product-Specific Attribute](dev_alternate_products.md#using-a-product-specific-attribute).

The possibility of configuring the `PS` IntelliJ Platform type was introduced in [](tools_gradle_intellij_plugin.md) 1.8.0.
Only the versions of PhpStorm 2022.2 and newer are supported.

The table below summarizes the Gradle IntelliJ Plugin attributes to set in the plugin project's Gradle build script.
Click on an entry in the table's *Attribute* column to go to the documentation about that attribute.

| `gradle-intellij-plugin` Attribute                                               | Attribute Value                                                         |
|----------------------------------------------------------------------------------|-------------------------------------------------------------------------|
| [`intellij.type`](tools_gradle_intellij_plugin.md#intellij-extension-type)       | `PS` for PhpStorm.                                                      |
| [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version) | Set to the targeted `PS` version (only versions 2022.2+ are supported). |

</tab>

<tab title="PHP Plugin">

PhpStorm plugins targeting versions older than 2022.2 are developed using the Ultimate Edition of IntelliJ IDEA.
The IntelliJ IDEA Ultimate Edition (with the PHP plugin) must be used for developing PhpStorm plugins because the PHP plugin is incompatible with IntelliJ IDEA Community Edition.
However, this IntelliJ IDEA Ultimate configuration runs the risk of accidentally using some APIs that are not available in PhpStorm.
The recommended best practice is to use PhpStorm for testing.

Configuration of a Gradle-based PhpStorm plugin project is used as a tutorial in the section [Configuring Plugin Projects using the IntelliJ IDEA Product Attribute](dev_alternate_products.md#using-the-intellij-idea-product-attribute).
Many techniques are discussed, such as choosing a version of IntelliJ IDEA Ultimate given a targeted version of PhpStorm.

The table below summarizes the [](tools_gradle_intellij_plugin.md) attributes to set in the plugin project's Gradle build script.
Click on an entry in the table's *Attribute* column to go to the documentation about that attribute.
To see how these attributes appear in the Gradle build script for PhpStorm, see [](dev_alternate_products.md#configuring-gradle-build-script-using-the-intellij-idea-product-attribute).

| `gradle-intellij-plugin` Attribute                                               | Attribute Value                                                                                                                                                                                                                 |
|----------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [`intellij.type`](tools_gradle_intellij_plugin.md#intellij-extension-type)       | `IU` for IntelliJ IDEA Ultimate. The required PHP plugin isn't compatible with IntelliJ IDEA Community Edition.                                                                                                                 |
| [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version) | Set to the same `IU` BRANCH.BUILD as the PhpStorm target version, e.g. `193.5233.102`.                                                                                                                                          |
| [`intellij.plugins`](tools_gradle_intellij_plugin.md#intellij-extension-plugins) | <p>`com.jetbrains.php:193.5233.102` for the PHP plugin.</p><p>See below for PHP plugin version information.</p>                                                                                                                 |
| [`runIde.ideDir`](tools_gradle_intellij_plugin.md#tasks-runide-idedir)           | <p>Path to locally installed target version of PhpStorm. For example, on macOS:</p><p><path>/Users/\$USERNAME\$/Library/Application Support/JetBrains/Toolbox/apps/PhpStorm/ch-0/193.5233.101/PhpStorm.app/Contents</path>.</p> |

The PHP plugin version is explicitly declared because it isn't bundled with IntelliJ IDEA Ultimate Edition.
Select a [version](https://plugins.jetbrains.com/plugin/6610-php/versions) of the PHP plugin compatible with the [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version).

</tab>

</tabs>

### plugin.xml

The dependency on the PHP plugin APIs (`com.jetbrains.php`) must be declared in the <path>[plugin.xml](plugin_configuration_file.md)</path> file, as shown in the tutorial [Configuring plugin.xml](dev_alternate_products.md#configuring-pluginxml) section.
# Contributing to the IntelliJ Platform

<!-- Copyright 2000-2023 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

<link-summary>How to participate and contribute in IntelliJ Platform development.</link-summary>

Please make sure to read the [Code of Conduct](intellij-sdk-docs-original_CODE_OF_CONDUCT.md).

## Participate in the Community

### Participate in Newsgroups and Forums

There are several community [forums and newsgroups](https://intellij-support.jetbrains.com/hc/en-us/community/topics) you can join to discuss the IntelliJ Platform and IDEs.
The forums are an excellent source for users and contributors interested in having technical discussions, answering questions, or resolving potential issues for newcomers.

### Link to IntelliJ Platform Homepage

The success of any open-source project depends on the number of people who use the product and contribute back to the project.
By linking to [https://www.jetbrains.com/opensource/idea](https://www.jetbrains.com/opensource/idea), you can increase the chances of a new user or contributor finding out about the project and joining the community.

If you're as excited about IntelliJ IDEA Community Edition as we are, you can show it by linking to us.
Project logos and other assets are [also available](https://www.jetbrains.com/company/brand/logos/).

### Promote IntelliJ Platform and IntelliJ IDEA Community Edition

Help promote the platform and IDE by using your blog, Twitter, Facebook, or submitting an article to your favorite local magazine.
If you are a member of a different open-source community, why not mention IntelliJ IDEA on their discussion forums or at conferences?
If you love IntelliJ IDEA, don't hold back — speak up!
The more developers use IntelliJ IDEA, the more bugs will be caught, the more plugins will be written, the more visible the project, and the more benefits the community will get!

## Help Others Learn

### Write Documents

We're always looking for new articles about IntelliJ IDEA features as well as documentation for the IntelliJ Platform.
You can write tutorials, how-tos, sample applications, or share your experience with the IntelliJ Platform.
You can publish your documentation on a website or blog, or submit a [pull request](intellij-sdk-docs-original_CONTRIBUTING.md) to the SDK Docs.

### Produce Screencasts

Screencasts have recently become very popular as a way to show other developers how to use the tool effectively.
You can record a screencast about a particular feature or use case you discovered and would like to share it with the community.

## Contribute Code

### File a Bug Report

Bug reports take little time to file and are very helpful to developers.
This is one of the easiest contributions you can make.
When you discover a problem with the IDE or the platform, please report it.
Make sure you provide information about your environment (available from <ui-path>About</ui-path> menu), steps to reproduce the issue, as well as a written description of the problem.
You can file a bug in our [YouTrack issue tracker](https://youtrack.jetbrains.com/issues/IDEA).
Before submitting an issue, please search for already submitted ones describing the same problem — and if you find one, feel free to vote for it.

### Help Triage Existing Bug Reports

Over the years, users have submitted thousands of issues to the IntelliJ IDEA issue tracker.
Many of the unresolved issues are no longer applicable to the latest version of IntelliJ IDEA, are duplicates, or require additional information to be resolved.
Leaving comments notifying about the status of such issues helps the team keep the issue tracker clean and useful for everyone.

### Write a Plugin

One of the best ways to contribute a larger piece of code, adding extra functionality to IntelliJ IDEA or any of the other IntelliJ Platform-based IDEs, is by writing a plugin.
You can submit a plugin to the [JetBrains Marketplace](https://plugins.jetbrains.com/), making it available for all users.
When writing a plugin, you have control over the code and don't need to sign the contribution agreement.

### Submit a Patch

If you would like to improve the code in the IntelliJ Platform or the core functionality of IntelliJ IDEA, you can submit a pull request to the [IntelliJ IDEA Community Edition repository on GitHub](https://github.com/JetBrains/intellij-community).
When preparing the change, please make sure to follow the [](intellij_coding_guidelines.md).
A developer will review your contribution and, if it meets the quality criteria and fits well with the rest of the code, you'll be notified about the acceptance of the patch.

Looking for issues to work on? Issues marked with [#patch_welcome](https://youtrack.jetbrains.com/issues/IDEA?q=%23patch_welcome%20%23unresolved) tag are looking for external contributors.

Alternatively, you can attach a patch to the ticket in the [YouTrack bug database](https://youtrack.jetbrains.com/issues/IDEA).
You can either file a new issue with the patch attached or attach a patch to an issue submitted by another user.
In this case, you will also need to sign the [JetBrains Contributor License Agreement (CLA)](https://www.jetbrains.com/agreements/cla/) to complete your contribution.

### Become a Committer

Developers with a long history of submitting high-quality patches can gain direct commit rights.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Platform Theme Colors

<link-summary>Guidelines on working with themes.</link-summary>

There are two default color themes: IntelliJ Light and Darcula.

![](01_default_themes.png){width=689}

Use the colors consistently within the default themes. To do so, follow these guidelines:

* [Icons](icons.md)
* UI components
* Editor scheme TBD
* Chart TBD

## UI components

Colors for UI components are specified with **color keys**.
A color key is a name of a color property in a particular component, e.g. `ComboBox.background`, or a generic color property for several components, e.g. `Component.borderColor`.

![](02_keys_naming.png){width=735}

*Color keys of a combo box*

Each key has two default color values: one for IntelliJ Light and another for Darcula. Example: `ComboBox.background` is #FFFFFF in IntelliJ Light and #3C3F41 in Darcula.

Keys allow creating [custom color themes](themes_getting_started.md). A custom theme is one of the default themes plus a set of color keys with new values in a JSON file. Example: the High contrast theme is a custom theme based on Darcula. New color values are stored in the [`HighContrast.theme.json`](%gh-ic%/platform/platform-resources/src/themes/HighContrast.theme.json) JSON file.

See custom themes in the <a href="https://plugins.jetbrains.com/search?tags=Theme">plugins repository</a>.

See the meanings of the parts in a color key in the [key naming scheme](themes_metadata.md#key-naming-scheme).

See a complete list of keys with their descriptions in the JSON files: [`IntelliJPlatform.themeMetadata.json`](%gh-ic%/platform/platform-resources/src/themes/metadata/IntelliJPlatform.themeMetadata.json), [`JDK.themeMetadata.json`](%gh-ic%/platform/platform-resources/src/themes/metadata/JDK.themeMetadata.json).

See the color values for the currently selected theme in the <control>LaF Defaults</control> dialog:

> To store color values between theme switching, use a scratch <path>*.theme.json</path> file.
> This might be useful if you want to test colors before implementing them.
> See guidelines for the [Theme JSON Structure](themes_customize.md#defining-named-colors).

* The dialog is available in the [internal mode](enabling_internal.md). See <ui-path>Tools | Internal Actions | UI</ui-path> in the main menu or find it with <control>Help | Find Action</control>.
* Some color keys are not shown in the dialog by default because they are loaded at runtime with a corresponding UI component. Open the UI with this component to see such keys in the dialog.
* Edit a color in the dialog to preview it in the IDE. The edited color is stored until the theme is switched.

![](03_LaF_Defaults.png){width=641}

> For IntelliJ designers:
> * Provide color keys in design specifications to be sure that correct keys are used.
> * When a new key is implemented, check that [`IntelliJPlatform.themeMetadata.json`](%gh-ic%/platform/platform-resources/src/themes/metadata/IntelliJPlatform.themeMetadata.json) has the new key with the `since` parameter and description, and the old keys are deprecated.
>
{style="note"}

If a color is needed:

1. Choose a color value for all default themes:

* Try reusing any of the existing colors first. Use the LaF Defaults dialog to see the existing colors.
* If none of them fit, choose two new color values that are consistent with IntelliJ Light and Darcula palettes in hue and contrast.

2. Choose a color key if a component does not have it:

* Use an existing color key if it fits semantically. Otherwise, a UI component might get an unexpected color in a custom color theme.
* Create a new key if none of the existing ones fit semantically. Follow the naming scheme.

**Example**

<format color="Red" style="bold">Incorrect:</format> A new component with a light-blue background reuses Focus.borderColor which has a light-blue color in the default themes. A theme author decides they need a bright focus border and changes the color value for Focus.borderColor. As a result, the new component has a bright background with the text unreadable over it.

<format color="Green" style="bold">Correct:</format> A new component with a light-blue background has its own color key <code>ComponentName.background</code>.


**Implementation**
Use `JBColor.namedColor` to set a color key and fallback color values:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
val SELECTED_BACKGROUND_COLOR: Color =
    JBColor.namedColor(
        "CompletionPopup.selectionBackground",
        JBColor(0xc5dffc, 0x113a5c)
    )
```

</tab>
<tab title="Java" group-key="java">

```java
private static final Color SELECTED_BACKGROUND_COLOR =
    JBColor.namedColor(
        "CompletionPopup.selectionBackground",
        new JBColor(0xc5dffc, 0x113a5c)
    );
```

</tab>
</tabs>
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Actions

<link-summary>Introduction to actions allowing to invoke plugin functionalities.</link-summary>

The IntelliJ Platform provides the concept of _actions_.
An action is a class derived from [`AnAction`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnAction.java), whose `actionPerformed()` method is called when its menu item or toolbar button is selected.

Actions are the most common way for a user to invoke the functionality of your plugin.
An action can be invoked from a menu or a toolbar, using a keyboard shortcut or the <ui-path>Help | Find Action...</ui-path> lookup.

Actions are organized into groups, which, in turn, can contain other groups.
A group of actions can form a toolbar or a menu.
Subgroups of the group can form submenus of a menu.

The user can customize all registered actions via [Menus and Toolbars](https://www.jetbrains.com/help/idea/customize-actions-menus-and-toolbars.html) settings.

Please see [Action System](basic_action_system.md) on how to create and register actions in the IDE.
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Alternatives to Implementing a Plugin

<link-summary>Alternative strategies and tools to avoid building a "full" plugin.</link-summary>

In some cases, implementing an actual IntelliJ Platform plugin can be overkill, and using one of the alternative approaches listed below may provide you with the required value in a much shorter time.
If you need a functionality that is specific to your project domain, conventions, or practices, you can avoid all the steps that are required to implement and publish a plugin and provide these features as a part of your project or IDE configuration files.

Before you start the IntelliJ Platform plugin development, define your requirements and verify if they can be covered with any of the alternatives described below.
Consider implementing an actual plugin only when the described solutions are insufficient in your case and there is a significant number of developers who can benefit from it.

## Structural Search and Replace Inspections

The [Structural Search and Replace (SSR)](https://www.jetbrains.com/help/idea/structural-search-and-replace.html) functionality allows defining search patterns which are based not only on textual information but also on the structure of the searched code fragments, no matter how it is formatted or commented.
The SSR templates can be used for [creating custom inspections](https://www.jetbrains.com/help/idea/creating-custom-inspections.html), which can be an alternative for programmatic [code inspections](code_inspections.md).
Depending on requirements, an inspection can report an issue for a code fragment matching a given template, but also provide a quick fix replacing the reported fragment with the configured replacement template.
All inspection metadata like name, problem tooltip, and description are configurable.
A single inspection can use multiple search and replacement templates.

Once SSR inspections are created and configured, they can be shared with other team members via [inspection profiles](https://www.jetbrains.com/help/idea/customizing-profiles.html).

SSR inspections can be created only for languages providing SSR support.
To verify if a given language supports SSR, invoke the <ui-path>Edit | Find | Search Structurally...</ui-path> action in an IDE supporting the language, and check if it is present in the <control>Language</control> select list.

> See the [I(J)nspector](https://ijnspector.wordpress.com/) blog for practical SSR templates examples.
>
{style="note"}

## IDE Scripting Console

The [IDE scripting console](https://www.jetbrains.com/help/idea/ide-scripting-console.html) can be used for automating IDE's features and extracting required information, e.g., about a current project.
Scripts can access the IntelliJ Platform APIs and can be implemented in Kotlin, JavaScript, or Groovy by default, but it is also possible to use other languages compliant with the [JCR-223 specification](https://www.jcp.org/en/jsr/detail?id=223).

Created scripts are stored in the [IDE configuration directory](https://www.jetbrains.com/help/idea/directories-used-by-the-ide-to-store-settings-caches-plugins-and-logs.html#config-directory) and can't be shared as part of project files or configuration.

## Flora Plugin
<secondary-label ref="incubating"/>

The [Flora](https://plugins.jetbrains.com/plugin/17669-flora-beta-) plugin allows for developing project-specific extensions as Kotlin Script (<path>\*.kts</path>) or JavaScript (<path>\*.js</path>) files.
Flora extensions have access to all available IntelliJ Platform APIs, just like a regular plugin.

Every extension is represented by a single file and stored directly in a project's <path>.plugins</path> directory.
Extensions can be easily shared with other team members by adding the <path>.plugins</path> directory to VCS.
Also, adding the Flora plugin in the <ui-path>Settings | Build, Execution, Deployment | Required Plugins</ui-path> and sharing this configuration as part of a project makes it effortless to deliver additional IDE functionalities to your team without any manual setup.

> Please note that the Flora plugin is in an experimental state.

## LivePlugin

The [LivePlugin](https://plugins.jetbrains.com/plugin/7282-liveplugin) allows for extending IntelliJ-based IDEs functionalities at the runtime, without the need of restarting IDE.
It adds a new <control>Plugins</control> tool window that lists all available extensions and allows managing them.
Extensions can be implemented in Kotlin or Groovy and edited directly in the IDE.
Extensions can use all IntelliJ Platform APIs and additional LivePlugin API that shorten common use cases.

Created extensions are stored on the IDE level and can be shared with other team members as plain files, GitHub gists, or repositories.
Additionally, if they are stored in a project's <path>.live-plugins</path> directory and LivePlugin's <control>Run Project Specific Plugins</control> option is enabled, all extensions from this directory will be loaded automatically when the project is opened and unloaded when the project is closed.

> See the LivePlugin [description](https://dmitrykandalov.com/liveplugin), [presentation](https://www.youtube.com/watch?v=GcYa4lMRta0), and [extensions examples](https://github.com/dkandalov/live-plugin#more-examples) for more information.
>
{style="note"}

## PhpStorm Advanced Metadata

[PhpStorm](https://www.jetbrains.com/phpstorm/) supports special [metadata files](https://www.jetbrains.com/help/phpstorm/ide-advanced-metadata.html) describing the behavior of methods and functions.
This information is used for using the existing IDE features such as code completion, navigation, finding usages, and others.
The metadata files can be [part of project files](https://www.jetbrains.com/help/phpstorm/ide-advanced-metadata.html#create-metadata-files-inside-your-project), which makes it easy to share it between team members via version control.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Class Loaders

<link-summary>Introduction and tips for using plugin class loaders.</link-summary>

A separate class loader is used to load the classes of each plugin.
This allows each plugin to use a different library version, even if the same library is used by the IDE itself or by another plugin.

## Bundled Libraries

[Third-Party Software and Licenses](https://www.jetbrains.com/legal/third-party-software/) lists all bundled libraries and their versions for each product.

## Overriding IDE Dependencies

Gradle 7 introduced `implementation` scope, replacing `compile` scope.
For this setup, to use project defined dependency instead of the bundled IDE version, add the following snippet to your Gradle build script:

<tabs>
<tab title="Kotlin">

```kotlin
configurations.all {
  resolutionStrategy.sortArtifacts(ResolutionStrategy.SortOrder.DEPENDENCY_FIRST)
}
```

</tab>
<tab title="Groovy">

```groovy
configurations.all {
  resolutionStrategy.sortArtifacts(ResolutionStrategy.SortOrder.DEPENDENCY_FIRST)
}
```

</tab>
</tabs>

## Classes from Plugin Dependencies

By default, the main IDE class loader loads classes that are not found in the plugin class loader.
However, in the <path>[plugin.xml](plugin_configuration_file.md)</path> file, you may use the [`<depends>`](plugin_configuration_file.md#idea-plugin__depends) element to specify that a [plugin depends](plugin_dependencies.md) on one or more other plugins.
In this case, the class loaders of those plugins will be used for classes not found in the current plugin.
This allows a plugin to reference classes from other plugins.

## Using `ServiceLoader`

Some libraries use [`ServiceLoader`](https://docs.oracle.com/javase/8/docs/api/index.html?java/util/ServiceLoader.html) to detect and load implementations.
For this to work in a plugin, the context class loader must be set to the plugin's classloader and restored afterwards with the original one around initialization code:

```java
Thread currentThread = Thread.currentThread();
ClassLoader originalClassLoader = currentThread.getContextClassLoader();
ClassLoader pluginClassLoader = this.getClass().getClassLoader();
try {
  currentThread.setContextClassLoader(pluginClassLoader);
  // code working with ServiceLoader here
} finally {
  currentThread.setContextClassLoader(originalClassLoader);
}
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Plugin Compatibility with IntelliJ Platform Products

<link-summary>Declaring and verifying compatibility of plugins developed for multiple IntelliJ Platform-based IDEs.</link-summary>

All products based on the IntelliJ Platform are built on the same underlying API.
Some of these products share features built on top of the platform, such as Java support in IntelliJ IDEA and Android Studio.
Underlying those shared features are shared components.
When authoring a plugin for the IntelliJ Platform, it is important to understand and declare dependencies on these components.
Otherwise, it may not be possible to load or run the plugin in a product because the components on which it depends aren't available.

## Declaring Plugin Dependencies

For the purposes of dependencies, a _module_ can be thought of as a built-in plugin that ships as a non-removable part of a product.
A working definition of a dependency is that a plugin project cannot be run without the module present in an IntelliJ Platform-based product.
Declaring a dependency on a module also expresses a plugin's compatibility with a product in that the IntelliJ Platform determines whether a product contains the correct modules to support a plugin before loading it.

[](plugin_dependencies.md) describes the syntax for declaring plugin dependencies and optional plugin dependencies.
This document describes the IntelliJ Platform modules' functionality to aid in determining the dependencies of a plugin.

The way dependency declarations are handled by the IntelliJ Platform is determined by the contents of the <path>[plugin.xml](plugin_configuration_file.md)</path> file:
* If a plugin does not declare any dependencies in its <path>plugin.xml</path> file, or if it declares dependencies only on other plugins but not modules, it's assumed to be a legacy plugin and is loaded only in IntelliJ IDEA.
  This configuration of the dependency declaration is deprecated; do not use it for new plugin projects.
* If a plugin declares at least _one_ module dependency in its <path>plugin.xml</path> file, the plugin is loaded if an IntelliJ Platform-based product contains _all the modules and plugins_ on which the plugin has declared a dependency.

> Always verify declared dependencies work as expected, see [](#verifying-dependency).
>
{style="warning"}

## Modules

A _module_ represents a built-in plugin that is a non-removable part of a product.
Some modules are available in all products, and some modules are available only in some, or even just one product.
This section identifies and discusses modules of both types.

### Declaring Incompatibility with Module
<primary-label ref="2020.2"/>

A plugin can declare incompatibility with an arbitrary module by specifying [`<incompatible-with>`](plugin_configuration_file.md#idea-plugin__incompatible-with) containing module ID in its <path>plugin.xml</path>.

### Modules Available in All Products

A core set of modules is available in all standalone IDE products based on the IntelliJ Platform.
These modules provide a set of shared functionalities.
The following table lists modules that are currently available in all products.

> All plugins should declare a dependency on **`com.intellij.modules.platform`** to indicate dependence on shared functionality.
>
{style="note"}

| Module for [`<depends>`](plugin_configuration_file.md#idea-plugin__depends) Element | Functionality                                                                                                 |
|-------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
| **`com.intellij.modules.platform`**                                                 | Messaging, Themes, UI Components, Files, Documents, Actions, Components, Services, Extensions, Editors        |
| `com.intellij.modules.lang`                                                         | File Type, Lexer, Parser, Highlighting, References, Code Completion, Find, Rename, Formatter, Code Navigation |
| `com.intellij.modules.xml`                                                          | XML, XML DOM, XSD/DTD, DOM Model                                                                              |
| `com.intellij.modules.vcs`                                                          | VCS Revision Numbers, File Status, Change Lists, File History, Annotations                                    |
| `com.intellij.modules.xdebugger`                                                    | Debug Session, Stack Frames, Break Points, Source Positions, Memory Views, Tracked Instances                  |

As of this writing, if a plugin: **A)** is dependent _only_ on one or more of the modules in the table above, **and B)** declares those module dependencies in <path>plugin.xml</path>, then any product developed by JetBrains based on the IntelliJ Platform will load it.

### Modules Specific to Functionality

More specialized functionality is also delivered via modules and plugins in IntelliJ Platform-based products.
For example, the `com.intellij.modules.python` module supports the Python language-specific functionality.
If a plugin uses this module's functionality, such as Python-specific inspections and refactoring, it must declare a dependency on this module.

Note that not all products define and declare modules.
For example, PhpStorm does not have its own module, but the product itself depends on (and ships with) the PHP language plugin.
A plugin project is compatible with PHP functionality if it declares a dependency on this PHP language plugin.

> A high-level feature comparison tool for JetBrains IDEs is available [here](https://www.jetbrains.com/products/compare/).
>

The following table lists modules or built-in plugins that provide specific functionality, and the products currently shipping with them.
This table is not exhaustive, to see a list of all modules, invoke code completion inside `<depends>` element in the <path>plugin.xml</path> file.

| Module or Plugin for [`<depends>`](plugin_configuration_file.md#idea-plugin__depends) Element | Functionality                                                                                                                                       | Product Compatibility                                                                                                                                                      |
|-----------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `com.intellij.modules.java` or `com.intellij.java`<p>See [](#java) below.</p>                 | **Java** language PSI Model, Inspections, Intentions, Completion, Refactoring, Test Framework                                                       | IntelliJ IDEA, Android Studio                                                                                                                                              |
| `com.intellij.modules.androidstudio`                                                          | Android SDK Platform, Build Tools, Platform Tools, SDK Tools                                                                                        | Android Studio                                                                                                                                                             |
| `com.intellij.modules.cidr.lang`                                                              | **C, C++, Objective-C/C++** language PSI Model, Swift/Objective-C Interaction, Inspections, Intentions, Completion, Refactoring, Test Framework     | AppCode, CLion                                                                                                                                                             |
| `com.intellij.modules.cidr.debugger`                                                          | Debugger Watches, Evaluations, Breakpoints, Inline Debugging                                                                                        | AppCode, CLion, RubyMine                                                                                                                                                   |
| `com.intellij.modules.appcode` or `com.intellij.appcode`<p>See [](#appcodeclion) below.</p>   | Xcode Project Model, CocoaPods, Core Data Objects, Device & Simulator Support                                                                       | AppCode                                                                                                                                                                    |
| `com.intellij.modules.clion` or `com.intellij.clion`<p>See [](#appcodeclion) below.</p>       | CMake, Profiler, Embedded Development, Remote Development, Remote Debug, Disassembly                                                                | CLion                                                                                                                                                                      |
| `com.intellij.cidr.base`                                                                      | Native Debugger Integration, Utility Classes, C/C++ Project Model/Workspace Support (OCWorkspace, CidrWorkspace, etc.), C/C++ Build and Run Support | AppCode, CLion                                                                                                                                                             |
| `com.intellij.database`                                                                       | **Database Tools and SQL** language PSI Model, Inspections, Completion, Refactoring, Queries                                                        | DataGrip, IntelliJ IDEA Ultimate, AppCode, PhpStorm, PyCharm Professional, RubyMine, CLion, GoLand, Rider, and WebStorm if the Database Tools and SQL plugin is installed. |
| `org.jetbrains.plugins.go`                                                                    | **Go** language PSI Model, Inspections, Intentions, Completion, Refactoring, Test Framework                                                         | GoLand                                                                                                                                                                     |
| `com.intellij.modules.python`                                                                 | **Python** language PSI Model, Inspections, Intentions, Completion, Refactoring, Test Framework                                                     | PyCharm, and other products if the Python plugin is installed.                                                                                                             |
| `com.intellij.modules.rider`                                                                  | Connection to **ReSharper** Process in Background                                                                                                   | Rider                                                                                                                                                                      |
| `com.intellij.modules.ruby`                                                                   | **Ruby** language PSI Model, Inspections, Intentions, Completion, Refactoring, Test Framework                                                       | RubyMine, and IntelliJ IDEA Ultimate if the Ruby plugin is installed.                                                                                                      |
| `com.intellij.modules.ultimate`                                                               | Licensing                                                                                                                                           | All commercial IDEs (IntelliJ IDEA Ultimate, PhpStorm, DataGrip, ...)                                                                                                      |
| `com.intellij.swift`                                                                          | **Swift** language PSI Model, Inspections, Intentions, Completion, Refactoring, Test Framework                                                      | AppCode, CLion                                                                                                                                                             |
| `com.jetbrains.php`                                                                           | **PHP** language PSI Model, Inspections, Intentions, Completion, Refactoring, Test Framework                                                        | PhpStorm, and other products if the PHP plugin is installed.                                                                                                               |
| `JavaScript`                                                                                  | **JavaScript** language PSI Model, Inspections, Intentions, Completion, Refactoring, Test Framework                                                 | WebStorm, and other products if the JavaScript plugin is installed.                                                                                                        |

#### Java

The [Java language functionality](https://blog.jetbrains.com/platform/2019/06/java-functionality-extracted-as-a-plugin/) was extracted as a plugin in version 2019.2 of the IntelliJ Platform.
This refactoring separated the Java implementation from the other, non-language portions of the platform.
A dependency on the Java plugin (Plugin ID `com.intellij.java`) must be setup using [](plugin_dependencies.md).

#### AppCode/CLion
<primary-label ref="2020.3"/>

The [AppCode and CLion code was restructured](https://blog.jetbrains.com/clion/2020/12/migration-guide-for-plugins-2020-3/) in version 2020.3.
This refactoring extracted some functionalities into specific modules for easier maintainability and reuse between AppCode/CLion and other JetBrains IDEs.
Consequently, [dependencies](plugin_dependencies.md) on [AppCode](app_code.md) and [CLion](clion.md) functionalities are expressed differently in <path>plugin.xml</path> depending on the version of the IDE being targeted:


<tabs>

<tab title="CLion">

* Syntax for 2020.3 and later releases:
  * <path>plugin.xml</path> (_allowable alternative_):
    ```xml
    <depends>com.intellij.clion</depends>
    ```

  * Gradle build script (_required_):

    <tabs group="languages">
    <tab title="Kotlin" group-key="kotlin">

    ```kotlin
    intellij {
      plugins.set(listOf("com.intellij.clion"))
    }
    ```

    </tab>
    <tab title="Groovy" group-key="groovy">

    ```groovy
    intellij {
      plugins = ['com.intellij.clion']
    }
    ```

    </tab>
    </tabs>

* Syntax _required_ for releases prior to 2020.3, _allowable_ in all releases:
  * <path>plugin.xml</path>:
    ```xml
    <depends>com.intellij.modules.clion</depends>
    ```

See also: [](clion.md).

</tab>

<tab title="AppCode">

* Syntax for 2020.3 and later releases:
  * <path>plugin.xml</path> (_allowable alternative_):
    ```xml
    <depends>com.intellij.appcode</depends>
    ```

  * Gradle build script (_required_):

    <tabs group="languages">
    <tab title="Kotlin" group-key="kotlin">

    ```kotlin
    intellij {
      plugins.set(listOf("com.intellij.appcode"))
    }
    ```

    </tab>
    <tab title="Groovy" group-key="groovy">

    ```groovy
    intellij {
      plugins = ['com.intellij.appcode']
    }
    ```

    </tab>
    </tabs>

* Syntax _required_ for releases prior to 2020.3, _allowable_ in all releases:
  * <path>plugin.xml</path>:
    ```xml
    <depends>com.intellij.modules.appcode</depends>
    ```

See also: [](app_code.md).

</tab>

</tabs>

## Exploring Module and Plugin APIs

Once the [dependency on a module or plugin](plugin_dependencies.md) is declared in <path>plugin.xml</path>, it's useful to explore the packages and classes available in that dependency.
The section below gives some recommended procedures for discovering what's available in a module or plugin on which a project depends.
These procedures assume a project has the Gradle build script and <path>plugin.xml</path> dependencies configured correctly.

### Exploring APIs as a Consumer

Exploring the available packages and classes in a plugin or module utilizes features in the IntelliJ IDEA IDE.

If the project is not up-to-date, [reimport the Gradle project](https://www.jetbrains.com/help/idea/work-with-gradle-projects.html#gradle_refresh_project) as a first step.
Reimporting the project will automatically update the dependencies.

In the <control>Project</control> tool window, select <control>Project</control> View and scroll to the bottom to see [External Libraries](https://www.jetbrains.com/help/idea/project-tool-window.html#content_pane).
Look for the library `Gradle:unzipped.com.jetbrains.plugins:foo:`, where "foo" matches, or is similar to the contents of the [`<depends>`](plugin_configuration_file.md#idea-plugin__depends)
tags in <path>plugin.xml</path> or the plugin dependency declarations in the Gradle build script
(2.x: [](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins), 1.x: [`intellij.plugins`](tools_gradle_intellij_plugin.md#intellij-extension-plugins)).

The image below shows the External Libraries for the example plugin project configuration explained in [Configuring Gradle build script](dev_alternate_products.md#configuring-gradle-build-script-using-the-intellij-idea-product-attribute) and [Configuring plugin.xml](dev_alternate_products.md#configuring-pluginxml).

![Example PhpStorm Project Libraries](php_prj_libs.png){width="700"}

Expand the External Library (as shown) to reveal the JAR files contained in the library.
Drill down into the JAR files to expose the packages and (decompiled) classes.

### Exploring APIs as an Extender

If a project is dependent on a plugin or module, in some cases, the project can also [extend](plugin_extensions.md) the functionality available from the plugin or module.

> See [Explore the IntelliJ Platform API](explore_api.md) for more information and strategies.
> Dedicated Extension Point Lists specific to IDEs are available under _Product Specific_.
>

To browse the opportunities for an extension, start by placing the cursor on the contents of the [`<depends>`](plugin_configuration_file.md#idea-plugin__depends) elements in the project's <path>plugin.xml</path> file.
Use the [Go to Declaration](https://www.jetbrains.com/help/idea/navigating-through-the-source-code.html#go_to_declaration) IDE feature to navigate to the <path>plugin.xml</path> file for the plugin on which the project depends.

For example, performing this procedure on the `<depends>com.jetbrains.php</depends>` declaration in a project's <path>plugin.xml</path> file will navigate to the <path>plugin.xml</path> file for the `com.jetbrains.php` (PHP) project.
A common, but not universal, pattern in the IntelliJ Platform is for a plugin (like PHP) to declare [`<extensionPoints>`](plugin_configuration_file.md#idea-plugin__extensionPoints) and then implement each one as [`<extensions>`](plugin_configuration_file.md#idea-plugin__extensions).
Continuing the example, search the PHP plugin's <path>plugin.xml</path> file for:
* `<extensionPoints>` to find the opportunities for extending the PHP plugin's functionality.
* `<extensions defaultExtensionNs="com.jetbrains.php">` to find where the PHP plugin extends functionality.
  The extension namespace (in this example `com.jetbrains.php`) will match the [`<id>`](plugin_configuration_file.md#idea-plugin__id) defined in the <path>plugin.xml</path> file.

> If a dependency plugin [bundles its API sources](bundling_plugin_openapi_sources.md) in the distribution file, the Gradle IntelliJ Plugin (1.7.0+) will attach them to the plugin dependency in IDE, making sources available when navigating to the plugin API classes.
>


## Verifying Dependency

Before marking a plugin project as _dependent only on modules in a target product_ in addition to `com.intellij.modules.platform`, verify the plugin isn't implicitly dependent on any APIs that are specific to IntelliJ IDEA.

For [Gradle-based](developing_plugins.md) projects, [](verifying_plugin_compatibility.md#plugin-verifier) can be used to ensure compatibility with all specified target IDEs.

For DevKit-based projects, [create an SDK](setting_up_theme_environment.md#add-intellij-platform-plugin-sdk) pointing to an installation of the intended target IntelliJ Platform-based product, e.g., PhpStorm, rather than IntelliJ IDEA.
Use the same development version of the IntelliJ Platform as the targeted product.

Based on the tables above, the [JetBrains Marketplace](https://plugins.jetbrains.com/) automatically detects the JetBrains products with which a plugin is compatible, and makes the compatibility information available to plugin authors.
The compatibility information determines if plugins are available for users of a particular JetBrains product.

## Platform API Version Compatibility

The API of IntelliJ Platform and bundled plugins may change between releases.
The significant changes that may break plugins are listed on [Incompatible Changes in IntelliJ Platform and Plugins API](api_changes_list.md) page.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Components (Deprecated)
<primary-label ref="Deprecated"/>

<link-summary>Migrating deprecated plugin components to the current solutions.</link-summary>

> When writing new plugins, creating Components must be avoided.
> Any existing Components should be migrated to services, extensions, or listeners (see below).
>
{style="warning" title="Deprecation Notice"}

Plugin Components are a legacy feature supported for compatibility with plugins created for older versions of the IntelliJ Platform.
Plugins using Components don't support [dynamic loading](dynamic_plugins.md) (the ability to install, update, and uninstall plugins without restarting the IDE).

Plugin Components are defined in the `<application-components>`, `<project-components>`, and `<module-components>` sections in a [Plugin Configuration File](plugin_configuration_file.md).

## Migration

To migrate existing code from Components to modern APIs, see the following guidelines.

### Manage State

To manage some state or logic that is only necessary when the user performs a specific operation, use a [Service](plugin_services.md).

### Persisting State

To store the state of your plugin at the application or project level, use a [Service](plugin_services.md) and implement the `PersistentStateComponent` interface.
See [Persisting State of Components](persisting_state_of_components.md) for details.

### Subscribing to Events

To subscribe to events, use a [listener](plugin_listeners.md) or create an [extension](plugin_extensions.md) for a dedicated extension point (for example, `com.intellij.editorFactoryListener`) if one exists for the event to subscribe to.

### Application Startup

> Executing code on application startup should be avoided whenever possible because it slows down startup.
>
{style="warning"}

Plugin code should only be executed when projects are opened (see [Project Open](#project-open)) or when the user invokes an action of a plugin.
If this can't be avoided, add a [listener](plugin_listeners.md) subscribing to the [`AppLifecycleListener`](%gh-ic%/platform/ide-core/src/com/intellij/ide/AppLifecycleListener.java) topic.
See also [Running Tasks Once](ide_infrastructure.md#running-tasks-once).

### Project Open

<tabs>

<tab title="2023.1 and later">

Using [Kotlin coroutines](kotlin_coroutines.md), implement [`ProjectActivity`](%gh-ic%/platform/core-api/src/com/intellij/openapi/startup/StartupActivity.kt) and register in `com.intellij.postStartupActivity` extension point.
Examples:
- [`PowerSaveModeNotifier`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/PowerSaveModeNotifier.kt)
- [`TipOfTheDayStartupActivity`](%gh-ic%/platform/tips-of-the-day/src/com/intellij/ide/TipOfTheDayStartupActivity.kt)

Implementation in [Kotlin](using_kotlin.md) is required because Java doesn't support suspending functions.

</tab>

<tab title="Pre-2023.1">

To execute code when a project is being opened, use one of these two [extensions](plugin_extensions.md):

`com.intellij.postStartupActivity`
: [`StartupActivity`](%gh-ic%/platform/core-api/src/com/intellij/openapi/startup/StartupActivity.kt) for immediate execution on [EDT](threading_model.md).
Implement `DumbAware` to indicate activity can run in a background thread (in parallel with other such tasks).

`com.intellij.backgroundPostStartupActivity`
: [`StartupActivity.Background`](%gh-ic%/platform/core-api/src/com/intellij/openapi/startup/StartupActivity.kt) for execution with a 5-second delay in a background thread (2019.3 or later).

Any long-running or CPU-intensive tasks should be made visible to users by using `ProgressManager.run(Task.Backgroundable)` (see [](background_processes.md)).
Access to indexes must be wrapped with [`DumbService`](indexing_and_psi_stubs.md#dumb-mode), see also [](threading_model.md).

See also [](ide_infrastructure.md#running-tasks-once).

</tab>

</tabs>

### Project and Application Close

To execute code on project closing or application shutdown, implement the [`Disposable`](%gh-ic%/platform/util/src/com/intellij/openapi/Disposable.java) interface in a [Service](plugin_services.md) and place the code in the `dispose()` method.
Alternatively, use `Disposer.register()` passing a `Project` or `Application` service instance as the `parent` argument (see [Choosing a Disposable Parent](disposers.md#choosing-a-disposable-parent)).
<!-- Copyright 2000-2025 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Plugin Configuration File

<show-structure for="chapter" depth="4"/>

<link-summary>Plugin configuration file contains all the information about the plugin, as well as all registered extensions, actions, listeners, etc.</link-summary>

The <path>plugin.xml</path> configuration file contains all the information about the plugin, which is displayed in the [plugins' settings dialog](https://www.jetbrains.com/help/idea/managing-plugins.html), and all registered extensions, actions, listeners, etc.
The sections below describe all the elements in detail.

The example <path>plugin.xml</path> files can be found in the [IntelliJ SDK Docs Code Samples](https://github.com/JetBrains/intellij-sdk-code-samples) repository.

## Additional Plugin Configuration Files

A plugin can contain additional configuration files beside the main <path>plugin.xml</path>.
They have the same format, and they are included with the `config-file` attribute of [`<depends>`](#idea-plugin__depends) elements specifying [plugin dependencies](plugin_dependencies.md).
However, some elements and attributes required in <path>plugin.xml</path> are ignored in additional configuration files.
If the requirements differ, the documentation below will state it explicitly.
One use case for additional configuration files is when a plugin provides optional features that are only available in some IDEs and require [certain modules](plugin_compatibility.md#modules-specific-to-functionality).

## Useful Resources

Please make sure to follow the guidelines from [Plugin Overview page](https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html) for an optimal presentation of your plugin on JetBrains Marketplace.
The _Busy Plugin Developers. Episode 2_ discusses [5 tips for optimizing JetBrains Marketplace plugin page](https://youtu.be/oB1GA9JeeiY?t=52) in more detail.

See also [](marketing.md) about widgets and badges.

## Configuration Structure Overview

> If an element or an attribute is not documented on this page, consider them as configuration items intended to be used by JetBrains only.
> They must not be used by third-party plugins.
>
{title="Private Configuration Elements" style="warning"}

Deprecated elements are omitted in the list below.

<include from="snippets.md" element-id="descriptorDocumentationProviderNote"/>

[//]: # (GENERATED CONTENT START)

[//]: # (This content is generated by generate_descriptor_pages.main.kts script.)
[//]: # (DO NOT EDIT IT MANUALLY)

- [`<idea-plugin>`](#idea-plugin)
  - [`<id>`](#idea-plugin__id)
  - [`<name>`](#idea-plugin__name)
  - [`<version>`](#idea-plugin__version)
  - [`<product-descriptor>`](#idea-plugin__product-descriptor)
  - [`<idea-version>`](#idea-plugin__idea-version)
  - [`<vendor>`](#idea-plugin__vendor)
  - [`<description>`](#idea-plugin__description)
  - [`<change-notes>`](#idea-plugin__change-notes)
  - [`<depends>`](#idea-plugin__depends)
  - [`<incompatible-with>`](#idea-plugin__incompatible-with)
  - [`<extensions>`](#idea-plugin__extensions)
    - [An Extension](#idea-plugin__extensions__-)
  - [`<extensionPoints>`](#idea-plugin__extensionPoints)
    - [`<extensionPoint>`](#idea-plugin__extensionPoints__extensionPoint)
      - [`<with>`](#idea-plugin__extensionPoints__extensionPoint__with)
  - [`<resource-bundle>`](#idea-plugin__resource-bundle)
  - [`<actions>`](#idea-plugin__actions)
    - [`<action>`](#idea-plugin__actions__action)
      - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
      - [`<keyboard-shortcut>`](#idea-plugin__actions__action__keyboard-shortcut)
      - [`<mouse-shortcut>`](#idea-plugin__actions__action__mouse-shortcut)
      - [`<override-text>`](#idea-plugin__actions__action__override-text)
      - [`<synonym>`](#idea-plugin__actions__action__synonym)
      - [`<abbreviation>`](#idea-plugin__actions__action__abbreviation)
    - [`<group>`](#idea-plugin__actions__group)
      - [`<action>`](#idea-plugin__actions__action)
        - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
        - [`<keyboard-shortcut>`](#idea-plugin__actions__action__keyboard-shortcut)
        - [`<mouse-shortcut>`](#idea-plugin__actions__action__mouse-shortcut)
        - [`<override-text>`](#idea-plugin__actions__action__override-text)
        - [`<synonym>`](#idea-plugin__actions__action__synonym)
        - [`<abbreviation>`](#idea-plugin__actions__action__abbreviation)
      - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
      - [`<override-text>`](#idea-plugin__actions__action__override-text)
      - [`<reference>`](#idea-plugin__actions__group__reference)
        - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
      - [`<separator>`](#idea-plugin__actions__group__separator)
        - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
    - [`<reference>`](#idea-plugin__actions__group__reference)
      - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
  - [`<applicationListeners>`](#idea-plugin__applicationListeners)
    - [`<listener>`](#idea-plugin__applicationListeners__listener)
  - [`<projectListeners>`](#idea-plugin__projectListeners)
    - [`<listener>`](#idea-plugin__applicationListeners__listener)

## `idea-plugin`
{#idea-plugin}

The <path>plugin.xml</path> file root element.

{type="narrow"}
Required
: **yes**


{type="narrow"}
Attributes
:
- `url` _(optional; ignored in an [additional config file](#additional-plugin-configuration-files))_<br/>
  The link to the plugin homepage displayed on the plugin page in
  the [JetBrains Marketplace](https://plugins.jetbrains.com).
- `require-restart` _(optional)_<br/>

    The boolean value determining whether the plugin installation, update, or uninstallation requires an IDE restart
    (see [Dynamic Plugins](dynamic_plugins.md) for details).<br/>
    Default value: `false`.

Children
:
  - [`<actions>`](#idea-plugin__actions)
  - [`<applicationListeners>`](#idea-plugin__applicationListeners)
  - [`<change-notes>`](#idea-plugin__change-notes)
  - [`<depends>`](#idea-plugin__depends)
  - [`<description>`](#idea-plugin__description)
  - [`<extensionPoints>`](#idea-plugin__extensionPoints)
  - [`<extensions>`](#idea-plugin__extensions)
  - [`<id>`](#idea-plugin__id)
  - [`<idea-version>`](#idea-plugin__idea-version)
  - [`<incompatible-with>`](#idea-plugin__incompatible-with)
  - [`<name>`](#idea-plugin__name)
  - [`<product-descriptor>`](#idea-plugin__product-descriptor)
  - [`<projectListeners>`](#idea-plugin__projectListeners)
  - [`<resource-bundle>`](#idea-plugin__resource-bundle)
  - [`<vendor>`](#idea-plugin__vendor)
  - [`<version>`](#idea-plugin__version)
  - [`<application-components>`](#idea-plugin__application-components)  ![Deprecated][deprecated]
  - [`<module-components>`](#idea-plugin__module-components)  ![Deprecated][deprecated]
  - [`<project-components>`](#idea-plugin__project-components)  ![Deprecated][deprecated]

### `id`
{#idea-plugin__id}

A unique identifier of the plugin.
It should be a fully qualified name similar to Java packages and must not collide with the ID of existing plugins.
The ID is a technical value used to identify the plugin in the IDE and [JetBrains Marketplace](https://plugins.jetbrains.com).
Please use characters, numbers, and `'.'`/`'-'`/`'_'` symbols only and keep it reasonably short.

> Make sure to pick a stable ID, as the value cannot be changed later after public release.
>
{style="warning"}

{type="narrow"}
Required
: no; ignored in an [additional config file](#additional-plugin-configuration-files)<br/>
**It is highly recommended to set in <path>plugin.xml</path> file.**<br/>
The element can be skipped in the source <path>plugin.xml</path> file if the Gradle plugin `patchPluginXml` task
([2.x](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml),
[1.x](tools_gradle_intellij_plugin.md#tasks-patchpluginxml))
is enabled and configured.


Default value
: Value of the [`<name>`](#idea-plugin__name) element.

Example
:
  ```xml
  <id>com.example.framework</id>
  ```

### `name`
{#idea-plugin__name}

<tldr>

**Reference:** [JetBrains Marketplace: Plugin Name](https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name)

</tldr>

The user-visible plugin display name (Title Case).

{type="narrow"}
Required
: **yes**; ignored in an [additional config file](#additional-plugin-configuration-files)


Example
:
  ```xml
  <name>My Framework Support</name>
  ```

### `version`
{#idea-plugin__version}

<tldr>

**Reference:** [JetBrains Marketplace: Semantic Versioning](https://plugins.jetbrains.com/docs/marketplace/semver.html)

</tldr>

The plugin version displayed in the <control>Plugins</control> settings dialog and on the
[JetBrains Marketplace](https://plugins.jetbrains.com) plugin page.
Plugins uploaded to the JetBrains Marketplace must follow semantic versioning.

{type="narrow"}
Required
: **yes**; ignored in an [additional config file](#additional-plugin-configuration-files)<br/>
The element can be skipped in the source <path>plugin.xml</path> file if the Gradle plugin `patchPluginXml` task
([2.x](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml),
[1.x](tools_gradle_intellij_plugin.md#tasks-patchpluginxml))
is enabled and configured.


Example
:
  ```xml
  <version>1.3.18</version>
  ```

### `product-descriptor`
{#idea-plugin__product-descriptor}

<tldr>

**Reference:** [JetBrains Marketplace: How to add required parameters for paid plugins](https://plugins.jetbrains.com/docs/marketplace/add-required-parameters.html)

</tldr>

[Paid](https://plugins.jetbrains.com/build-and-market) or
[Freemium](https://plugins.jetbrains.com/docs/marketplace/freemium.html) plugin descriptor.

{type="narrow"}
Required
: only for paid or freemium plugins; ignored in an [additional config file](#additional-plugin-configuration-files)<br/>
**Do not add `<product-descriptor>` element in a free plugin.**



{type="narrow"}
Attributes
:
- `code` _(**required**)_<br/>
  The plugin product code used in the JetBrains Sales System.
  The code must be agreed with JetBrains in advance and follow
  [the requirements](https://plugins.jetbrains.com/docs/marketplace/obtain-a-product-code-from-jetbrains.html).
- `release-date` _(**required**)_<br/>
  Date of the major version release in the `YYYYMMDD` format.
- `release-version` _(**required**)_<br/>
  A major version in a special number format.
- `optional` _(optional)_<br/>
  The boolean value determining whether the plugin is
  a [Freemium](https://plugins.jetbrains.com/docs/marketplace/freemium.html) plugin.<br/>
  Default value: `false`.
- `eap` _(optional)_<br/>

    Specifies the boolean value determining whether the plugin is an EAP release.<br/>
    Default value: `false`.

### `idea-version`
{#idea-plugin__idea-version}

<tldr>

**Reference:** [Build Number Ranges](build_number_ranges.md)

</tldr>

The plugin's range of compatible IntelliJ-based IDE versions.

{type="narrow"}
Required
: **yes**; ignored in an [additional config file](#additional-plugin-configuration-files)<br/>
The element can be skipped in the source <path>plugin.xml</path> file if the Gradle plugin `patchPluginXml` task
([2.x](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml),
[1.x](tools_gradle_intellij_plugin.md#tasks-patchpluginxml))
is enabled and configured.



{type="narrow"}
Attributes
:
- `since-build` _(**required**)_<br/>
  The lowest IDE version compatible with the plugin.
- `until-build` _(optional)_<br/>

    The highest IDE version compatible with the plugin.
    Undefined value declares compatibility with all the IDEs since the version specified by the `since-build`
    (also with the future builds that may cause incompatibility errors).

Examples
:
- Compatibility with a specific build number (2021.3.3) and higher versions:
    ```xml
    <idea-version since-build="213.7172.25"/>
    ```
- Compatibility with versions from any of `213` branches to any of `221` branches:
    ```xml
    <idea-version
        since-build="213" until-build="221.*"/>
    ```

### `vendor`
{#idea-plugin__vendor}

<tldr>

**Reference:** [JetBrains Marketplace: Contacts and Resources](https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#contacts-and-resources)

</tldr>

The vendor name or organization ID (if created) in the <control>Plugins</control> settings dialog and on
the [JetBrains Marketplace](https://plugins.jetbrains.com) plugin page.

{type="narrow"}
Required
: **yes**; ignored in an [additional config file](#additional-plugin-configuration-files)



{type="narrow"}
Attributes
:
- `url` _(optional)_<br/>
  The URL to the vendor's homepage.
  Supports `https://` and `http://` scheme links.
- `email` _(optional)_<br/>

    The vendor's email address.

Examples
:
- Personal vendor with an email address provided:
    ```xml
    <vendor email="joe@example.com">Joe Doe</vendor>
    ```
- Organizational vendor with a website URL and email address provided:
    ```xml
    <vendor
        url="https://mycompany.example.com"
        email="contact@example.com">
      My Company
    </vendor>
    ```

### `description`
{#idea-plugin__description}

<tldr>

**Reference:** [JetBrains Marketplace: Plugin Description](https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description)

</tldr>

The plugin description displayed on the [JetBrains Marketplace](https://plugins.jetbrains.com) plugin page and in
the <control>Plugins</control> settings dialog.

Simple HTML elements, like text formatting, paragraphs, lists, etc., are allowed and must be wrapped into
`<![CDATA[` ... `]]>` section.

{type="narrow"}
Required
: **yes**; ignored in an [additional config file](#additional-plugin-configuration-files)<br/>
The element can be skipped in the source <path>plugin.xml</path> file if the Gradle plugin `patchPluginXml` task
([2.x](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml),
[1.x](tools_gradle_intellij_plugin.md#tasks-patchpluginxml))
is enabled and configured.


Example
:
  ```xml
  <description><![CDATA[
  Provides support for My Framework.
  The support includes:
  <ul>
    <li>code completion</li>
    <li>references</li>
  </ul>
  For more information visit the
  <a href="https://example.com">project site</a>.
  ]]></description>
  ```

### `change-notes`
{#idea-plugin__change-notes}

<tldr>

**Reference:** [JetBrains Marketplace: Change Notes](https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#change-notes)

</tldr>

A short summary of new features, bugfixes, and changes provided with the latest plugin version.
Change notes are displayed on the [JetBrains Marketplace](https://plugins.jetbrains.com) plugin page and in
the <control>Plugins</control> settings dialog.

Simple HTML elements, like text formatting, paragraphs, lists, etc., are allowed and must be wrapped into
`<![CDATA[` ... `]]>` section.

{type="narrow"}
Required
: no; ignored in an [additional config file](#additional-plugin-configuration-files)<br/>
The element can be skipped in the source <path>plugin.xml</path> file if the Gradle plugin `patchPluginXml` task
([2.x](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml),
[1.x](tools_gradle_intellij_plugin.md#tasks-patchpluginxml))
is enabled and configured.


Example
:
  ```xml
  <change-notes><![CDATA[
  <h2>New Features</h2>
  <ul>
    <li>Feature 1</li>
    <li>Feature 2</li>
  </ul>
  <h2>Bug Fixes</h2>
  <ul>
    <li>Fixed issue 1</li>
    <li>Fixed issue 2</li>
  </ul>
  ]]></change-notes>
  ```

### `depends`
{#idea-plugin__depends}

<tldr>

**Reference:** [Plugin Dependencies](plugin_dependencies.md)
, [Modules Specific to Functionality](plugin_compatibility.md#modules-specific-to-functionality)

</tldr>

Specifies a dependency on another plugin or a module of an IntelliJ Platform-based product.
A single [`<idea-plugin>`](#idea-plugin) element can contain multiple `<depends>` elements.

{type="narrow"}
Required
: no; in most cases dependency on the
[platform](plugin_compatibility.md#modules-available-in-all-products)
module is needed



{type="narrow"}
Attributes
:
- `optional` _(optional)_<br/>
  Boolean value defining whether the dependency is optional to load the plugin in the IDE.
  If the dependency plugin is not installed in the current IDE, and `optional` is:
    - `true` - the plugin will be loaded
    - `false` (default) - the plugin will not be loaded
- `config-file` _(required when `optional` is `true`)_<br/>

    Relative path to an
    [additional configuration file](#additional-plugin-configuration-files),
    loaded only if the dependency plugin is installed in the current IDE.

Examples
:
- Required plugin dependency:
    ```xml
    <depends>com.example.dependencypluginid</depends>
    ```
- Required dependency on the IntelliJ IDEA Java Module:
    ```xml
    <depends>com.intellij.modules.java</depends>
    ```
- Optional plugin dependency:
    ```xml
    <depends optional="true">
      com.example.dependencypluginid
    </depends>
    ```
- Required module dependency with additional configuration:
    ```xml
    <depends
        config-file="myPluginId-withJava.xml">
      com.intellij.modules.java
    </depends>
    ```
- Optional module dependency with additional configuration:
    ```xml
    <depends
        optional="true"
        config-file="myPluginId-withKotlin.xml">
      org.jetbrains.kotlin
    </depends>
    ```

### `incompatible-with`
{#idea-plugin__incompatible-with}

<primary-label ref="2020.2"/>

<tldr>

**Reference:** [Declaring Incompatibility with Module](plugin_compatibility.md#declaring-incompatibility-with-module)

</tldr>

Declares incompatibility with a provided module.

{type="narrow"}
Required
: no; ignored in an [additional config file](#additional-plugin-configuration-files)


Example
:
  ```xml
  <incompatible-with>
    com.intellij.modules.appcode.ide
  </incompatible-with>
  ```

### `extensions`
{#idea-plugin__extensions}

<tldr>

**Reference:** [Extensions](plugin_extensions.md)

</tldr>

Defines the plugin extensions.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `defaultExtensionNs` _(optional)_<br/>

    Default extensions namespace.
    It allows skipping the common prefix in fully qualified extension point names.
    Usually, the `com.intellij` namespace is used when the plugin implements IntelliJ Platform extensions.

Children
:
The children elements are registrations of instances
of [extension points](#idea-plugin__extensionPoints__extensionPoint) provided by the IntelliJ Platform or plugins.
<br/>
An extension element name is defined by its extension point via
`name`
or `qualifiedName` attributes.
<br/>
An extension element attributes depend on the extension point implementation, but all extensions support basic attributes:
`id`, `order`,
and `os`.


Examples
:
- Extensions' declaration with a default namespace:
    ```xml
    <extensions defaultExtensionNs="com.intellij">
      <applicationService
          serviceImplementation="com.example.Service"/>
    </extensions>
    ```
- Extensions' declaration using the fully qualified extension name:
    ```xml
    <extensions>
      <com.example.vcs.myExtension
          implementation="com.example.MyExtension"/>
    </extensions>
    ```

#### An Extension
{#idea-plugin__extensions__-}

An extension instance registered under [`<extensions>`](#idea-plugin__extensions).

Listed attributes are basic attributes available for all extensions.
The list of actual attributes can be longer depending on the extension point implementation.



{type="narrow"}
Attributes
:
- `id` _(optional)_<br/>
  Unique extension identifier.
  It allows for referencing an extension in other attributes, for example, in
  `order`.
  <br/>
  To not clash with other plugins defining extensions with the same identifier,
  consider prepending the identifier with a prefix related to the plugin [`<id>`](#idea-plugin__id) or 
  [`<name>`](#idea-plugin__name), for example, `id="com.example.myplugin.myExtension"`.
- `order` _(optional)_<br/>
  Allows for ordering the extension relative to other instances of the same extension point.
  Supported values:
    - `first` - orders the extension as first.
       It is not guaranteed that the extension will be the first if multiple extensions are defined as `first`.
    - `last` - orders the extension as last.
       It is not guaranteed that the extension will be the last if multiple extensions are defined as `last`.
    - `before extension_id` - orders the extension before an extension with
       the given `id`
    - `after extension_id` - orders the extension after an extension with
       the given `id`
  <br/>
  Values can be combined, for example, `order="after extensionY, before extensionX"`.
- `os` _(optional)_<br/>

    Allows restricting an extension to a given OS.
    Supported values:
      - `freebsd`
      - `linux`
      - `mac`
      - `unix`
      - `windows`
    
    For example, `os="windows"` registers the extension on Windows only.

### `extensionPoints`
{#idea-plugin__extensionPoints}

<tldr>

**Reference:** [Extension Points](plugin_extension_points.md)

</tldr>

Extension points defined by the plugin.

{type="narrow"}
Required
: no

Children
:
  - [`<extensionPoint>`](#idea-plugin__extensionPoints__extensionPoint)

#### `extensionPoint`
{#idea-plugin__extensionPoints__extensionPoint}

<tldr>

**Reference:** [Declaring Extension Points](plugin_extension_points.md#declaring-extension-points)

</tldr>

A single extension point entry of the [`<extensionPoints>`](#idea-plugin__extensionPoints) defined by the plugin.
A single [`<extensionPoints>`](#idea-plugin__extensionPoints) element can contain multiple `<extensionPoint>` elements.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `name` _(`name` or `qualifiedName` is **required**)_<br/>
  The extension point name that should be unique in the scope of the plugin, e.g., `myExtension`.
  The fully qualified name of the extension point is built at runtime by prepending the value of the `name`
  attribute with the plugin [`<id>`](#idea-plugin__id) + `.` prefix.<br/>
  Example: when the `name` is `myExtension` and plugin ID is `com.example.myplugin`, the fully qualified name of
  the EP will be `com.example.myplugin.myExtension`.<br/>
  Only one of the `name` and
  `qualifiedName` attributes can be
  specified.
- `qualifiedName` _(`name` or `qualifiedName` is **required**)_<br/>
  The fully qualified name of the extension point.
  It should be unique between different plugins, and it is recommended to include a plugin ID to guarantee uniqueness,
  e.g., `com.example.myplugin.myExtension`.<br/>
  Only one of the `name` and `qualifiedName` attributes can be specified.
- `interface` _(`interface` or `beanClass` is **required**)_<br/>
  The fully qualified name of the interface to be implemented for extending the plugin's functionality.<br/>
  Only one of the `interface` and `beanClass` attributes can be specified.
- `beanClass` _(`interface` or `beanClass` is **required**)_<br/>
  The fully qualified name of the extension point bean class providing additional information to the plugin.<br/>
  The bean class specifies one or several properties annotated with the
  [`@Attribute`](%gh-ic%/platform/util/src/com/intellij/util/xmlb/annotations/Attribute.java)
  annotation.
  Note that bean classes do not follow the JavaBean standard.
  Implement
  [`PluginAware`](%gh-ic%/platform/extensions/src/com/intellij/openapi/extensions/PluginAware.java)
  to obtain information about the plugin providing the actual extension (see [Error Handling](plugin_extension_points.md#error-handling)).<br/>
  Only one of the `interface` and `beanClass` attributes can be specified.
- `dynamic` _(optional)_<br/>
  Boolean value defining whether the extension point meets the requirements to be
  [dynamic](plugin_extension_points.md#dynamic-extension-points),
  which is a prerequisite for [dynamic plugins](dynamic_plugins.md).<br/>
  Default value: `false`.
- `area` _(optional)_<br/>

    The scope in which the [extension](plugin_extensions.md) is
    instantiated.
    It is not recommended to use non-default values.
    Allowed values:
      - `IDEA_APPLICATION` _(default)_
      - `IDEA_PROJECT`
      - `IDEA_MODULE` (**deprecated**)

Children
:
  - [`<with>`](#idea-plugin__extensionPoints__extensionPoint__with)

##### `with`
{#idea-plugin__extensionPoints__extensionPoint__with}

Specifies the required parent type for class names provided in extension point tags or attributes.
A single [`<extensionPoint>`](#idea-plugin__extensionPoints__extensionPoint) element can contain
multiple `<with>` elements.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `tag` _(`tag` or `attribute` is **required**)_<br/>
  The name of the tag holding the fully qualified name of the class which parent type will be limited
  by the type provided in the `implements` attribute.<br/>
  Only one of the `tag` and `attribute` attributes can be specified.
- `attribute` _(`tag` or `attribute` is **required**)_<br/>
  The name of the attribute holding the fully qualified name of the class which parent type will be limited
  by the type provided in the `implements` attribute.<br/>
  Only one of the `tag` and `attribute` attributes can be specified.
- `implements` _(**required**)_<br/>

    The fully qualified name of the parent type limiting the type provided in the place specified by
    `tag` or
    `attribute`.

Example
:
  An extension point which restricts the type provided in a `myClass` attribute to be an instance
  of `com.example.ParentType`, and the type provided in a `someClass` element to be an instance
  of `java.lang.Comparable`:
  
  ```xml
  <extensionPoint
      name="myExtension"
      beanClass="com.example.MyExtension">
    <with
        attribute="myClass"
        implements="com.example.ParentType"/>
    <with
        tag="someClass"
        implements="java.lang.Comparable"/>
  </extensionPoint>
  ```
  
  When using the above extension point, an implementation could be registered as follows:
  
  ```xml
  <myExtension ...
      myClass="com.example.MyCustomType">
    <someClass>com.example.MyComparable</someClass>
  </myExtension>
  ```
  
  where:
  
  - `com.example.MyCustomType` must be a subtype of `com.example.ParentType`
  - `com.example.MyComparable` must be a subtype of `java.lang.Comparable`

### `resource-bundle`
{#idea-plugin__resource-bundle}

A resource bundle to be used with message key attributes in extension declarations and for
[action and group localization](basic_action_system.md#localizing-actions-and-groups).
A single [`<idea-plugin>`](#idea-plugin) element can contain multiple `<resource-bundle>` elements.

{type="narrow"}
Required
: no

Example
:
  To load the content of <path>messages/Bundle.properties</path> bundle, declare:
    ```xml
    <resource-bundle>messages.Bundle</resource-bundle>
    ```

### `actions`
{#idea-plugin__actions}

<tldr>

**Reference:** [Actions](basic_action_system.md)

</tldr>

Defines the plugin actions.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `resource-bundle` _(optional; available since 2020.1)_<br/>

    Defines the dedicated actions resource bundle.
    See [Localizing Actions and Groups](basic_action_system.md#localizing-actions-and-groups)
    for more details.

Children
:
  - [`<action>`](#idea-plugin__actions__action)
  - [`<group>`](#idea-plugin__actions__group)
  - [`<reference>`](#idea-plugin__actions__group__reference)

Example
:
  ```xml
  <actions resource-bundle="messages.ActionsBundle">
    <!--
    Actions/Groups defined here will use keys
    from the ActionsBundle.properties bundle.
    -->
  </actions>
  ```

#### `action`
{#idea-plugin__actions__action}

<tldr>

**Reference:** [Registering Actions in plugin.xml](basic_action_system.md#registering-actions-in-pluginxml)

</tldr>

A single action entry of the [`<actions>`](#idea-plugin__actions) implemented by the plugin.
A single `<actions>` element can contain multiple `<action>` elements.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `id` _(**required**)_<br/>
  A unique action identifier.
  The action identifier must be unique between different plugins.
  Thus, it is recommended to prepend it with the value of the plugin [`<id>`](#idea-plugin__id).
- `class` _(**required**)_<br/>
  The fully qualified name of the action implementation class.
- `text` _(**required** if the action is not
[localized](basic_action_system.md#localizing-actions-and-groups))_<br/>
  The default long-version text to be displayed for the action (tooltip for toolbar button or text for menu item).
- `description` _(optional)_<br/>
  The text which is displayed in the status bar when the action is focused.
- `icon` _(optional)_<br/>
  The icon that is displayed on the toolbar button or next to the action menu item.
  See [Working with Icons](icons.md) for more information
  about defining and using icons.
- `use-shortcut-of` _(optional)_<br/>

    The ID of the action whose keyboard shortcut this action will use.

Children
:
  - [`<abbreviation>`](#idea-plugin__actions__action__abbreviation)
  - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
  - [`<keyboard-shortcut>`](#idea-plugin__actions__action__keyboard-shortcut)
  - [`<mouse-shortcut>`](#idea-plugin__actions__action__mouse-shortcut)
  - [`<override-text>`](#idea-plugin__actions__action__override-text)
  - [`<synonym>`](#idea-plugin__actions__action__synonym)

Examples
:
- Action declaring explicit `text`:
    ```xml
    <action
        id="com.example.myframeworksupport.MyAction"
        class="com.example.impl.MyAction"
        text="Do Action"
        description="Do something with the code"
        icon="AllIcons.Actions.GC">
      <!-- action children elements -->
    </action>
    ```
- Action without the `text` attribute must use the texts from the resource bundle declared with
the [`<resource-bundle>`](#idea-plugin__resource-bundle) element,
or the `resource-bundle` attribute of
the [`<actions>`](#idea-plugin__actions) element:
    ```xml
    <action
        id="com.example.myframeworksupport.MyAction"
        class="com.example.impl.MyAction"
        icon="AllIcons.Actions.GC"/>
    ```

##### `add-to-group`
{#idea-plugin__actions__action__add-to-group}

Specifies that the action should be added to an existing [`<group>`](#idea-plugin__actions__group).
A single action can be added to multiple groups.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `group-id` _(**required**)_<br/>
  Specifies the ID of the [`<group>`](#idea-plugin__actions__group) to which the action is added.
  The group must be an implementation of the
  [`DefaultActionGroup`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/actionSystem/DefaultActionGroup.java)
  class.
- `anchor` _(optional)_<br/>
  Specifies the position of the action relative to other actions.
  Allowed values:
    - `first` - the action is placed as the first in the group
    - `last` _(default)_ - the action is placed as the last in the group
    - `before` - the action is placed before the action specified by the `relative-to-action` attribute
    - `after` - the action is placed after the action specified by the `relative-to-action` attribute
- `relative-to-action` _(**required** if `anchor` is `before`/`after`)_<br/>

    The action before or after which the current action is inserted.

Example
:
  ```xml
    <add-to-group
        group-id="ToolsMenu"
        anchor="after"
        relative-to-action="GenerateJavadoc"/>
  ```

##### `keyboard-shortcut`
{#idea-plugin__actions__action__keyboard-shortcut}

Specifies the keyboard shortcut for the action.
A single action can have several keyboard shortcuts.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `keymap` _(**required**)_<br/>
  Specifies the keymap for which the action shortcut is active.
  IDs of the standard keymaps are defined as constants in the
  [KeymapManager](%gh-ic%/platform/platform-api/src/com/intellij/openapi/keymap/KeymapManager.java)
  class.
- `first-keystroke` _(**required**)_<br/>
  Specifies the first keystroke of the action shortcut.
  The keystrokes are specified according to the regular Swing rules.
- `second-keystroke` _(optional)_<br/>
  Specifies the second keystroke of the action shortcut.
- `remove` _(optional)_<br/>
  Removes a shortcut from the specified action.
- `replace-all` _(optional)_<br/>

    Removes all keyboard and mouse shortcuts from the specified action before adding
    the specified shortcut.

Examples
:
- Add the first and second keystrokes to all keymaps:
    ```xml
    <keyboard-shortcut
        keymap="$default"
        first-keystroke="control alt G"
        second-keystroke="C"/>
    ```
- Remove the given shortcut from the _Mac OS X_ keymap:
    ```xml
    <keyboard-shortcut
        keymap="Mac OS X"
        first-keystroke="control alt G"
        second-keystroke="C"
        remove="true"/>
    ```
- Remove all existing keyboard and mouse shortcuts and register one for the _Mac OS X 10.5+_ keymap only:
    ```xml
    <keyboard-shortcut
        keymap="Mac OS X 10.5+"
        first-keystroke="control alt G"
        second-keystroke="C"
        replace-all="true"/>
    ```

##### `mouse-shortcut`
{#idea-plugin__actions__action__mouse-shortcut}

Specifies the mouse shortcut for the action.
A single action can have several mouse shortcuts.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `keymap` _(**required**)_<br/>
  Specifies the keymap for which the action shortcut is active.
  IDs of the standard keymaps are defined as constants in the
  [KeymapManager](%gh-ic%/platform/platform-api/src/com/intellij/openapi/keymap/KeymapManager.java)
  class.
- `keystroke` _(**required**)_<br/>
  Specifies the clicks and modifiers for the action.
  It is defined as a sequence of words separated by spaces:
    - modifier keys: `shift`, `control`, `meta`, `alt`, `altGraph`
    - mouse buttons: `button1`, `button2`, `button3`
    - button double-click: `doubleClick`
- `remove` _(optional)_<br/>
  Removes a shortcut from the specified action.
- `replace-all` _(optional)_<br/>

    Removes all keyboard and mouse shortcuts from the specified action before adding
    the specified shortcut.

Examples
:
- Add the shortcut to all keymaps:
    ```xml
    <mouse-shortcut
        keymap="$default"
        keystroke="control button3 doubleClick"/>
    ```
- Remove the given shortcut from the _Mac OS X_ keymap:
    ```xml
    <mouse-shortcut
        keymap="Mac OS X"
        keystroke="control button3 doubleClick"
        remove="true"/>
    ```
- Remove all existing keyboard and mouse shortcuts and register one for the _Mac OS X 10.5+_ keymap only:
    ```xml
    <mouse-shortcut
        keymap="Mac OS X 10.5+"
        keystroke="control button3 doubleClick"
        replace-all="true"/>
    ```

##### `override-text`
{#idea-plugin__actions__action__override-text}

<primary-label ref="2020.1"/>

Defines an alternate menu action or group text depending on context: menu location, toolbar, and other.

{type="narrow"}
Supported
:
2020.1+ for actions<br/>
2020.3+ for groups

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `place` _(**required**)_<br/>
  Declares where the alternate text should be used.
- `text` _(`text` or `use-text-of-place` is **required**)_<br/>
  Defines the text to be displayed for the action.
- `use-text-of-place` _(`text` or `use-text-of-place` is **required**)_<br/>

    Defines a location whose text should be displayed for this action.

Examples
:
- Explicitly overridden text:
    ```xml
    <!--
    Default action text:
    "Garbage Collector: Collect _Garbage"
    -->
    <action
        class="com.example.CollectGarbage"
        text="Garbage Collector: Collect _Garbage"
        ...>
      <!--
      Alternate text displayed anywhere in the main menu:
      "Collect _Garbage"
      -->
      <override-text
          place="MainMenu"
          text="Collect _Garbage"/>
    </action>
    ```
- Overridden text reused from the `MainMenu` place:
    ```xml
    <override-text
        place="EditorPopup"
        use-text-of-place="MainMenu"/>
    ```

##### `synonym`
{#idea-plugin__actions__action__synonym}

<primary-label ref="2020.3"/>

Defines an alternative text for searching the action in <ui-path>Help | Find Action...</ui-path> or
<ui-path>Navigate | Search Everywhere</ui-path> popups.
A single action can have multiple synonyms.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `key` _(`key` or `text` is **required**)_<br/>
  The key of the synonym text provided in a [message bundle](basic_action_system.md#localizing-actions-and-groups).
- `text` _(`key` or `text` is **required**)_<br/>

    The synonym text.

Example
:
  ```xml
  <!-- Default action text: Delete Element -->
  <synonym key="my.action.text.remove.element"/>
  <synonym text="Remove Element"/>
  ```

##### `abbreviation`
{#idea-plugin__actions__action__abbreviation}

Defines an abbreviation for searching the action in <ui-path>Help | Find Action...</ui-path> or
<ui-path>Navigate | Search Everywhere</ui-path> popups.
A single action can have multiple abbreviations.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `value` _(**required**)_<br/>

    The abbreviation value.

Example
:
  ```xml
  <!-- Default action text: UI Inspector -->
  <abbreviation value="uii"/>
  ```

#### `group`
{#idea-plugin__actions__group}

<tldr>

**Reference:** [Grouping Actions](basic_action_system.md#grouping-actions)

</tldr>

Defines an action group.
The [`<action>`](#idea-plugin__actions__action), `<group>` and [`<separator>`](#idea-plugin__actions__group__separator) elements defined inside the group are automatically included in it.
The `<group>` elements can be nested.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `id` _(**required**)_<br/>
  A unique group identifier.
  The group identifier must be unique between different plugins.
  Thus, it is recommended to prepend it with the value of the plugin [`<id>`](#idea-plugin__id).
- `class` _(optional)_<br/>
  The fully qualified name of the group implementation class.
  If not specified,
  [`DefaultActionGroup`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/actionSystem/DefaultActionGroup.java)
  is used.
- `text` _(**required** if the `popup` is `true` and the group is not
[localized](basic_action_system.md#localizing-actions-and-groups))_<br/>
  The default long-version text to be displayed for the group (text for the menu item showing the submenu).
- `description` _(optional)_<br/>
  The text which is displayed in the status bar when the group is focused.
- `icon` _(optional)_<br/>
  The icon that is displayed next to the group menu item.
  See [Working with Icons](icons.md) for more information about defining
  and using icons.
- `popup` _(optional)_<br/>
  Boolean flag defining whether the group items are presented in the submenu popup.
    - `true` - group actions are placed in a submenu
    - `false` _(default)_ - actions are displayed as a section of the same menu delimited by separators
- `compact` _(optional)_<br/>
  Boolean flag defining whether disabled actions within this group are hidden.
  If the value is:
    - `true` - disabled actions are hidden
    - `false` _(default)_ - disabled actions are visible
- `use-shortcut-of` _(optional)_<br/>
  The ID of the action whose keyboard shortcut this group will use.
- `searchable` _(optional; available since 2020.3)_<br/>

    Boolean flag defining whether the group is displayed in <ui-path>Help&nbsp;|&nbsp;Find Action...</ui-path>
    or <ui-path>Navigate | Search Everywhere</ui-path> popups.<br/>
    Default value: `true`.

Children
:
  - [`<action>`](#idea-plugin__actions__action)
  - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
  - [`<group>`](#idea-plugin__actions__group)
  - [`<override-text>`](#idea-plugin__actions__action__override-text)
  - [`<reference>`](#idea-plugin__actions__group__reference)
  - [`<separator>`](#idea-plugin__actions__group__separator)

Examples
:
- Group declaring explicit `text`:
    ```xml
    <group
        id="com.example.myframeworksupport.MyGroup"
        popup="true"
        text="My Tools">
      <!-- group children elements -->
    </group>
    ```
- A popup group without the `text` attribute must use the texts from the resource bundle declared with
the [`<resource-bundle>`](#idea-plugin__resource-bundle) element,
or the `resource-bundle` attribute
of the [`<actions>`](#idea-plugin__actions) element:
    ```xml
    <group
        id="com.example.myframeworksupport.MyGroup"
        popup="true"/>
    ```
- A group with custom implementation and icon:
    ```xml
    <group
        id="com.example.myframeworksupport.MyGroup"
        class="com.example.impl.MyGroup"
        icon="AllIcons.Actions.GC"/>
    ```

##### `reference`
{#idea-plugin__actions__group__reference}

Allows adding an existing action to the group.
The element can be used directly under the [`<actions>`](#idea-plugin__actions) element, or in
the [`<group>`](#idea-plugin__actions__group) element.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `ref` _(**required**)_<br/>
  The ID of the action to add to a group.
- `id` _(optional)_<br/>
    **_Deprecated_**: Use `ref` instead. 

    The ID of the action to add to a group.

Children
:
  - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)

Examples
:
- An action reference in a group:
    ```xml
    <group ...>
      <reference ref="EditorCopy"/>
    </group>
    ```
- An action reference registered directly in the [`<actions>`](#idea-plugin__actions) element:
    ```xml
    <actions>
      <reference ref="com.example.MyAction">
        <add-to-group group-id="ToolsMenu"/>
      </reference>
    </group>
    ```

##### `separator`
{#idea-plugin__actions__group__separator}

Defines a separator between actions in a group.
The element can be used directly under the [`<actions>`](#idea-plugin__actions) element with the child
[`<add-to-group>`](#idea-plugin__actions__action__add-to-group) element defining the target group, or in the
[`<group>`](#idea-plugin__actions__group) element.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `text` _(optional)_<br/>
  Text displayed on the separator.
  Separator text is displayed only in specific contexts such as popup menus, toolbars, etc.
- `key` _(optional)_<br/>

    The [message key]([message key](https://plugins.jetbrains.com/docs/intellij/basic-action-system.html#localizing-actions-and-groups)) for the separator text.
    The message bundle for use should be registered via the `resource-bundle` attribute of
    the [`<actions>`](#idea-plugin__actions) element.
    The attribute is ignored if the `text` attribute is specified.

Children
:
  - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)

Examples
:
- A separator dividing two actions in a group:
    ```xml
    <group ...>
      <action .../>
      <separator/>
      <action .../>
    </group>
    ```
- A separator registered directly in the [`<actions>`](#idea-plugin__actions) element:
    ```xml
    <actions>
      <separator>
        <add-to-group
            group-id="com.example.MyGroup"
            anchor="first"/>
      </separator>
    </group>
    ```
- A separator with a defined text:
    ```xml
    <separator text="Group By"/>
    ```
- A separator with a text defined by a message key:
    ```xml
    <separator key="message.key"/>
    ```

### `applicationListeners`
{#idea-plugin__applicationListeners}

<primary-label ref="2019.3"/>

<tldr>

**Reference:** [Defining Application-Level Listeners](plugin_listeners.md#defining-application-level-listeners)

</tldr>

Defines the application-level listeners.

{type="narrow"}
Required
: no

Children
:
  - [`<listener>`](#idea-plugin__applicationListeners__listener)

#### `listener`
{#idea-plugin__applicationListeners__listener}

<primary-label ref="2019.3"/>

<tldr>

**Reference:** [Listeners](plugin_listeners.md)

</tldr>

Defines a single application or project-level listener.
A single [`<applicationListeners>`](#idea-plugin__applicationListeners) or
[`<projectListeners>`](#idea-plugin__projectListeners) can contain multiple `<listener>` elements.

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `topic` _(**required**)_<br/>
  The fully qualified name of the listener interface corresponding to the type of received events.
- `class` _(**required**)_<br/>
  The fully qualified name of the class implementing the listener interface that receives and handles the events.
- `os` _(optional; available since 2020.1)_<br/>
  Restricts listener instantiation to a specific operating system.
  Allowed values:
    - `freebsd`
    - `mac`
    - `linux`
    - `unix`
    - `windows`
- `activeInTestMode` _(optional)_<br/>
  Boolean flag defining whether the listener should be instantiated in test mode.<br/>
  Default value: `true`.
- `activeInHeadlessMode` _(optional)_<br/>

    Boolean flag defining whether the listener should be instantiated in headless mode.<br/>
    Default value: `true`.

Example
:
  ```xml
  <listener
      topic="com.intellij.ide.AppLifecycleListener"
      class="com.example.MyListener"
      os="mac"
      activeInTestMode="false"/>
  ```

### `projectListeners`
{#idea-plugin__projectListeners}

<primary-label ref="2019.3"/>

<tldr>

**Reference:** [Defining Project-Level Listeners](plugin_listeners.md#defining-project-level-listeners)

</tldr>

Defines the project-level listeners.

{type="narrow"}
Required
: no

Children
:
  - [`<listener>`](#idea-plugin__applicationListeners__listener)

### `application-components`
{#idea-plugin__application-components collapsible="true" initial-collapse-state="collapsed"}

<primary-label ref="Deprecated"/>

> Do not use it in new plugins.
> See [Components](plugin_components.md) for the migration guide.
>
{style="warning"}

Defines a list of application [components](plugin_components.md).

{type="narrow"}
Deprecated
:
since 2020.1

{type="narrow"}
Required
: no

Children
:
  - [`<component>`](#idea-plugin__application-components__component)  ![Deprecated][deprecated]

#### `component`
{#idea-plugin__application-components__component}

> Do not use it in new plugins.
> See [Components](plugin_components.md) for the migration guide.
>
{style="warning"}

Defines a single application, project, or
module [component](plugin_components.md).
A single [`<application-components>`](#idea-plugin__application-components),
[`<project-components>`](#idea-plugin__project-components), or [`<module-components>`](#idea-plugin__module-components)
element can contain multiple `<component>` elements.

{type="narrow"}
Deprecated
:
since 2020.1

{type="narrow"}
Required
: no

Children
:
  - [`<headless-implementation-class>`](#idea-plugin__application-components__component__headless-implementation-class)  ![Deprecated][deprecated]
  - [`<implementation-class>`](#idea-plugin__application-components__component__implementation-class)  ![Deprecated][deprecated]
  - [`<interface-class>`](#idea-plugin__application-components__component__interface-class)  ![Deprecated][deprecated]
  - [`<loadForDefaultProject>`](#idea-plugin__application-components__component__loadForDefaultProject)  ![Deprecated][deprecated]
  - [`<option>`](#idea-plugin__application-components__component__option)  ![Deprecated][deprecated]

##### `implementation-class`
{#idea-plugin__application-components__component__implementation-class}

> Do not use it in new plugins.
> See [Components](plugin_components.md) for the migration guide.
>
{style="warning"}

The fully qualified name of the component implementation class.

{type="narrow"}
Deprecated
:
since 2020.1

{type="narrow"}
Required
: **yes**

##### `interface-class`
{#idea-plugin__application-components__component__interface-class}

> Do not use it in new plugins.
> See [Components](plugin_components.md) for the migration guide.
>
{style="warning"}

The fully qualified name of the component interface class. If not specified, the interface will be the same as
defined by [`<implementation-class>`](#idea-plugin__application-components__component__interface-class) element.

{type="narrow"}
Deprecated
:
since 2020.1

{type="narrow"}
Required
: no

##### `headless-implementation-class`
{#idea-plugin__application-components__component__headless-implementation-class}

> Do not use it in new plugins.
> See [Components](plugin_components.md) for the migration guide.
>
{style="warning"}

The fully qualified name of the component implementation class to be used when the IDE runs in headless mode.

{type="narrow"}
Deprecated
:
since 2020.1

{type="narrow"}
Required
: no

##### `option`
{#idea-plugin__application-components__component__option}

> Do not use it in new plugins.
> See [Components](plugin_components.md) for the migration guide.
>
{style="warning"}

Allows to provide additional component options.
A single [`<component>`](#idea-plugin__application-components__component) element can contain multiple `<option>` elements.

{type="narrow"}
Deprecated
:
since 2020.1

{type="narrow"}
Required
: no


{type="narrow"}
Attributes
:
- `name` _(**required**)_<br/>
  Option name.
- `value` _(**required**)_<br/>

    Option value.

##### `loadForDefaultProject`
{#idea-plugin__application-components__component__loadForDefaultProject}

> Do not use it in new plugins.
> See [Components](plugin_components.md) for the migration guide.
>
{style="warning"}

If present, the component is instantiated also for the default project. It takes effect only when used inside
[`<project-components>`](#idea-plugin__project-components) element.

{type="narrow"}
Deprecated
:
since 2020.1

{type="narrow"}
Required
: no

### `project-components`
{#idea-plugin__project-components collapsible="true" initial-collapse-state="collapsed"}

<primary-label ref="Deprecated"/>

> Do not use it in new plugins.
> See [Components](plugin_components.md) for the migration guide.
>
{style="warning"}

Defines a list of project [components](plugin_components.md).

{type="narrow"}
Deprecated
:
since 2020.1

{type="narrow"}
Required
: no

Children
:
  - [`<component>`](#idea-plugin__application-components__component)  ![Deprecated][deprecated]

### `module-components`
{#idea-plugin__module-components collapsible="true" initial-collapse-state="collapsed"}

<primary-label ref="Deprecated"/>

> Do not use it in new plugins.
> See [Components](plugin_components.md) for the migration guide.
>
{style="warning"}

Defines a list of module [components](plugin_components.md).

{type="narrow"}
Deprecated
:
since 2020.1

{type="narrow"}
Required
: no

Children
:
  - [`<component>`](#idea-plugin__application-components__component)  ![Deprecated][deprecated]

[//]: # (GENERATED CONTENT END)

[deprecated]: https://img.shields.io/badge/-Deprecated-7f7f7f?style=flat-square
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Plugin Content

<link-summary>Layout and contents of a plugin distribution file.</link-summary>

Plugin distribution are built using the dedicated Gradle `buildPlugin` task (Reference: [2.x](tools_intellij_platform_gradle_plugin_tasks.md#buildPlugin),
[1.x](tools_gradle_intellij_plugin.md#tasks-buildplugin)) or [Plugin DevKit](deploying_theme.md).

The plugin distribution <path>.jar</path> file contains:

- configuration file (<path>META-INF/plugin.xml</path>) ([Plugin Configuration File](plugin_configuration_file.md))
- classes implementing the plugin functionality
- recommended: plugin logo file(s) (<path>META-INF/pluginIcon*.svg</path>) ([Plugin Logo](plugin_icon_file.md))

> See [](plugin_user_experience.md#distribution-size) for important steps to optimize the plugin distribution file.


Targeting a plugin distribution to a specific OS is not possible ([issue](https://youtrack.jetbrains.com/issue/MP-1896)).

### Plugin Without Dependencies

A plugin consisting of a single <path>.jar</path> file is placed in the <path>/plugins</path> directory.

```plantuml
@startuml

skinparam TitleFontName JetBrains Sans
skinparam TitleFontStyle plain
skinparam TitleFontSize 16
skinparam DefaultTextAlignment left

title
  <IDE directory>
  |_ plugins
    |_ sample.jar // (Plugin distribution) //
      |_ com
        |_ company
          |_ Sample.class // (Class ""com.company.Sample"") //
      |_ ...
      |_ META-INF
        |_ plugin.xml // (Plugin Configuration File) //
        |_ pluginIcon.svg // (Plugin Logo) //
        |_ pluginIcon_dark.svg // (Plugin Logo, dark variant) //
end title
@enduml
```

### Plugin With Dependencies

The plugin <path>.jar</path> file is placed in the <path>/lib</path> folder under the plugin's "root" folder, together with all required bundled libraries.

All JARs from the <path>/lib</path> folder are automatically added to the classpath (see also [Plugin Class Loaders](plugin_class_loaders.md)).

<snippet id="doNotRepackageLibraries">

> Do not repackage libraries into the main plugin JAR file.
> Otherwise, [Plugin Verifier](verifying_plugin_compatibility.md) will yield false positives for unresolved classes and methods.
>
{title="Do Not Repackage Libraries" style="warning"}

</snippet>

```plantuml
@startuml

skinparam TitleFontName JetBrains Sans
skinparam TitleFontStyle plain
skinparam TitleFontSize 16
skinparam DefaultTextAlignment left

title
  <IDE directory>
  |_ plugins
    |_ sample
      |_ lib
        |_ lib_foo.jar // (Required bundled library #1) //
        |_ lib_bar.jar // (Required bundled library #2) //
        |_ ...
        |_ sample.jar // (Plugin distribution) //
          |_ com
            |_ company
              |_ Sample.class // (Class ""com.company.Sample"") //
          |_ ...
          |_ META-INF
            |_ plugin.xml // (Plugin Configuration File) //
            |_ pluginIcon.svg // (Plugin Logo) //
            |_ pluginIcon_dark.svg // (Plugin Logo, dark variant) //
end title
@enduml
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Plugin Dependencies

<!-- https://jb.gg/ij-plugin-dependencies -->

<link-summary>Declaring dependencies on other IntelliJ Platform-based plugins.</link-summary>

A plugin may depend on API and classes from other plugins, either bundled or third-party.

This document describes the syntax for declaring plugin dependencies and optional plugin dependencies.
For more information about dependencies on the IntelliJ Platform modules, see [](plugin_compatibility.md).

> For adding dependencies on 3rd party libraries, use regular [Gradle dependency management](https://docs.gradle.org/current/userguide/core_dependency_management.html).
>
{style="note"}

<procedure title="Required Steps">

To express a dependency on classes from other plugins or modules, perform the following three required steps detailed below on this page:

1. Locate Plugin ID
2. Project Setup
3. Declaration in <path>[plugin.xml](plugin_configuration_file.md)</path>

> If `java.lang.NoClassDefFoundError` occurs at runtime, most likely Step 3 was omitted.
>
> Otherwise, loading the plugin dependency may have failed, please check log files from
> the [Development Instance](ide_development_instance.md#development-instance-settings-caches-logs-and-plugins)).
>
{title="Getting java.lang.NoClassDefFoundError"}

</procedure>

## 1. Locating Plugin ID and Preparing Sandbox
{#locating-plugin-id-and-preparing-sandbox}

A compatible version must be chosen carefully according to the plugin's [compatibility](build_number_ranges.md).
For non-bundled plugins, it is not possible to specify the minimum/maximum version for the dependent plugin. ([Issue](https://youtrack.jetbrains.com/issue/IDEABKL-7906))

### JetBrains Marketplace

For plugins published on [JetBrains Marketplace](https://plugins.jetbrains.com):

1. Open plugin's detail page
2. Scroll down to the bottom section <control>Additional Information</control>
3. Copy <control>Plugin ID</control>

### Bundled and Other Plugins

All IDs of bundled plugins can be gathered using a dedicated Gradle task.
See _Other_ tab on how to locate the plugin ID for a plugin distribution file.

<tabs>

<tab title="IntelliJ Platform Gradle Plugin (2.x)">

Use [`printBundledPlugins`](tools_intellij_platform_gradle_plugin_tasks.md#printBundledPlugins) task.

</tab>

<tab title="Gradle IntelliJ Plugin (1.x)">

Use [`listBundledPlugins`](tools_gradle_intellij_plugin.md#tasks-listbundledplugins) task.

</tab>

<tab title="Other">

Locate the plugin's main JAR file containing <path>META-INF/plugin.xml</path> descriptor with [`<id>`](plugin_configuration_file.md#idea-plugin__id) tag (use [`<name>`](plugin_configuration_file.md#idea-plugin__name) if `<id>` is not specified).

Bundled plugins are located in <path>\$PRODUCT_ROOT\$/plugins/\$PLUGIN_NAME\$/lib/\$PLUGIN_NAME\$.jar</path>.

</tab>

</tabs>

#### IDs of Bundled Plugins

The following table lists some commonly used bundled plugins and their ID.
See also [](plugin_compatibility.md#modules-specific-to-functionality).

<!-- please do not add more entries unless it's clearly a popular plugin -->

| Plugin Name               | Plugin ID                       | Related Documentation                                                            |
|---------------------------|---------------------------------|----------------------------------------------------------------------------------|
| Copyright                 | `com.intellij.copyright`        |                                                                                  |
| CSS                       | `com.intellij.css`              | [](webstorm.md)                                                                  |
| Database Tools and SQL    | `com.intellij.database`         | [](data_grip.md)                                                                 |
| Gradle                    | `com.intellij.gradle`           |                                                                                  |
| Groovy                    | `org.intellij.groovy`           |                                                                                  |
| IntelliLang               | `org.intellij.intelliLang`      | [](language_injection.md)                                                        |
| Java                      | `com.intellij.java`             | [](idea.md#java)                                                                 |
| JavaScript and TypeScript | `JavaScript`                    | [](webstorm.md)                                                                  |
| JSON                      | `com.intellij.modules.json`     | [JSON plugin introduction notes](api_changes_list_2024.md#json-plugin-new-20243) |
| Kotlin                    | `org.jetbrains.kotlin`          | [](idea.md#kotlin)                                                               |
| Markdown                  | `org.intellij.plugins.markdown` |                                                                                  |
| Maven                     | `org.jetbrains.idea.maven`      |                                                                                  |
| Spring                    | `com.intellij.spring`           | [](spring_api.md)                                                                |
| Spring Boot               | `com.intellij.spring.boot`      | [](spring_api.md#spring-boot)                                                    |
| YAML                      | `org.jetbrains.plugins.yaml`    |                                                                                  |

### Preparing Sandbox

If the plugin is not bundled with the target IDE, run the (sandbox) [IDE Development Instance](ide_development_instance.md) of your target IDE and install the plugin there.

## 2. Project Setup
{#project-setup}

Depending on the chosen development workflow (Gradle or DevKit), one of the following steps is necessary.

### IntelliJ Platform Gradle Plugin (2.x)

{collapsible="true" default-state="expanded"}

Define dependencies on plugins using the provided helper functions in the `dependencies {}` block of the <path>build.gradle.kts</path> file:

```kotlin
dependencies {
  intellijPlatform {
    bundledPlugin("<pluginId>")
    plugin("<nonBundledPluginId>:<version>")
  }
}
```

For bundled plugins, use `bundledPlugin()`. Use `plugin()` for non-bundled plugins (for example, from [JetBrains Marketplace](https://plugins.jetbrains.com)).

See [](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins) for full reference and additional options.

### Gradle IntelliJ Plugin (1.x)

{collapsible="true" default-state="collapsed"}

<primary-label ref="Obsolete"/>

<include from="tools_gradle_intellij_plugin.md" element-id="gradlePluginObsolete"/>

> Please see the [`intellij.plugins`](tools_gradle_intellij_plugin.md#intellij-extension-plugins) property for acceptable values.
>
{style="note"}

Add the dependency to the [`intellij.plugins`](tools_gradle_intellij_plugin.md#intellij-extension-plugins) parameter in your build script:

<tabs>
<tab title="Kotlin">

```kotlin
intellij {
  plugins.set(listOf("com.example.another-plugin:1.0"))
}
```

</tab>
<tab title="Groovy">

```groovy
intellij {
  plugins = ['com.example.another-plugin:1.0']
}
```

</tab>
</tabs>

> Transitive dependencies required for tests must currently be [specified explicitly](https://github.com/JetBrains/gradle-intellij-plugin/issues/38).
>
{style="note"}

### Plugin DevKit

{collapsible="true" default-state="collapsed"}

> Existing DevKit-based projects can be [converted to use Gradle setup](migrating_plugin_devkit_to_gradle.md) where dependency management is fully automated.
>
{style="note"}

Add the JARs of the plugin on which the project depends to the <control>Classpath</control> of the [*IntelliJ Platform SDK*](setting_up_theme_environment.md#add-intellij-platform-plugin-sdk).

> Do not add the plugin JARs as a library: this will fail at runtime because the IntelliJ Platform will load two separate copies of the dependency plugin classes.
>
{style="warning"}

<procedure title="Adding a plugin dependency in DevKit-based plugin">

1. Open the <control>Project Structure</control> dialog and go to <ui-path>Platform Settings | SDKs</ui-path> section.
2. Select the SDK used in the project.
3. Click the <control>+</control> button in the <control>Classpath</control> tab.
4. Select the plugin JAR depending on whether it is bundled or non-bundled plugin:
   - For bundled plugins, the plugin JAR files are located in <path>plugins/\$PLUGIN_NAME\$</path> or <path>plugins/\$PLUGIN_NAME\$/lib</path> under the main installation directory.
   - For non-bundled plugins, depending on the platform version, the plugin JAR files are located in:
     - [plugins directory for versions 2020.1+](https://www.jetbrains.com/help/idea/directories-used-by-the-ide-to-store-settings-caches-plugins-and-logs.html#plugins-directory)
     - [plugins directory for versions pre-2020.1](https://www.jetbrains.com/help/idea/2019.3/tuning-the-ide.html#plugins-directory)

</procedure>

## 3. Dependency Declaration in plugin.xml
{#dependency-declaration-in-pluginxml}

Regardless of whether a plugin project uses [](plugin_compatibility.md#modules-available-in-all-products), or [](plugin_compatibility.md#modules-specific-to-functionality), the correct module must be listed as a dependency in <path>plugin.xml</path>.
If a project depends on another plugin, the dependency must be declared like a [module](plugin_compatibility.md#modules).
If only general IntelliJ Platform features (APIs) are used, then a default dependency on `com.intellij.modules.platform` must be declared.

To display a list of available IntelliJ Platform modules, invoke the [code completion](https://www.jetbrains.com/help/idea/auto-completing-code.html#4eac28ba) feature for the [`<depends>`](plugin_configuration_file.md#idea-plugin__depends) element contents while editing the plugin project's <path>plugin.xml</path> file.

In the <path>plugin.xml</path>, add a `<depends>` tag with the dependency plugin's ID as its content.
Continuing with the example from [Project Setup](#project-setup) above, the dependency declaration in <path>plugin.xml</path> would be:

```xml
<depends>com.example.another-plugin</depends>
```

## Optional Plugin Dependencies

A plugin can also specify an optional plugin dependency.
In this case, the plugin will load even if the plugin it depends on is not installed or enabled, but part of the plugin's functionality will not be available.

Declare additional `optional="true"` and required `config-file` attribute pointing to the [optional plugin descriptor file](plugin_configuration_file.md#additional-plugin-configuration-files):

```xml
<depends
    optional="true"
    config-file="myPluginId-optionalPluginName.xml">dependency.plugin.id</depends>
```

> Additional plugin descriptor files must follow the naming pattern <path>myPluginId-\$NAME\$.xml</path> resulting in unique filenames to prevent problems with classloaders in tests ([Details](https://youtrack.jetbrains.com/issue/IDEA-205964)).
>
{style="note"}

### Sample

The plugin adds additional highlighting for Java and Kotlin files.
The main <path>plugin.xml</path> defines a required dependency on the Java plugin (plugin ID `com.intellij.java`) and registers the corresponding `com.intellij.annotator` extension.
Additionally, it specifies an optional dependency on the Kotlin plugin (plugin ID `org.jetbrains.kotlin`):

<path>plugin.xml</path>
```xml
<idea-plugin>
   ...
   <depends>com.intellij.java</depends>

   <depends
       optional="true"
       config-file="myPluginId-withKotlin.xml">org.jetbrains.kotlin</depends>

   <extensions defaultExtensionNs="com.intellij">
      <annotator
          language="JAVA"
          implementationClass="com.example.MyJavaAnnotator"/>
   </extensions>
</idea-plugin>
```

The configuration file <path>myPluginId-withKotlin.xml</path> is located in the same directory as the main <path>plugin.xml</path> file.
In that file, the annotator extension for Kotlin is defined:

<path>myPluginId-withKotlin.xml</path>

```xml
<idea-plugin>
   <extensions defaultExtensionNs="com.intellij">
      <annotator
          language="kotlin"
          implementationClass="com.example.MyKotlinAnnotator"/>
   </extensions>
</idea-plugin>
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Extension Points

<link-summary>Allowing to extend plugin's functionality by other plugins.</link-summary>

> See [Plugin Extensions](plugin_extensions.md) for _using_ extension points in your plugin.
>
{style="note"}

By defining _extension points_ in your plugin, you can allow other plugins to extend your plugin's functionality.
There are two types of extension points:

* _Interface_ extension points allow other plugins to extend your plugins with _code_.
  When defining an interface extension point, specify an interface, and other plugins will provide classes implementing that interface.
  The providing plugin can then invoke methods on this interface.
  In most cases, the interface can be annotated with `@ApiStatus.OverrideOnly` (see [](verifying_plugin_compatibility.md#override-only-api)).
* _Bean_ extension points allow other plugins to extend a plugin with _data_.
  Specify the fully qualified name of an extension class, and other plugins will provide data that will be turned into instances of that class.

<procedure title="Declaring Extension Point" id="declaring-extension-points">

1. Add an [`<extensionPoints>`](plugin_configuration_file.md#idea-plugin__extensionPoints) section to <path>plugin.xml</path>, if it's not yet present there.
2. Add a child element [`<extensionPoint>`](plugin_configuration_file.md#idea-plugin__extensionPoints__extensionPoint).
3. Specify the extension point name with the `name` or `qualifiedName` attribute __*__.
4. Depending on the extension point type, specify the `interface` or `beanClass` attribute __*__.
5. If required, specify the `area` attribute __*__.

See the [](#example).

__*__ _see the **Attributes** section for [`<extensionPoint>`](plugin_configuration_file.md#idea-plugin__extensionPoints__extensionPoint) for details_

</procedure>

The plugin that contributes to the extension point will read the specified properties from the <path>plugin.xml</path> file.

If extension implementations are filtered according to [dumb mode](indexing_and_psi_stubs.md#dumb-mode), the base class should be
marked with [`PossiblyDumbAware`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/PossiblyDumbAware.java) to highlight this.
Use [`DumbService.getDumbAwareExtensions()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/DumbService.kt) to retrieve dumb-aware implementations.

Base classes for extensions requiring a key:

- [`LanguageExtension`](%gh-ic%/platform/core-api/src/com/intellij/lang/LanguageExtension.java)
- [`FileTypeExtension`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileTypes/FileTypeExtension.java)
- [`ClassExtension`](%gh-ic%/platform/core-api/src/com/intellij/openapi/util/ClassExtension.java)
- [`KeyedExtensionCollector`](%gh-ic%/platform/core-api/src/com/intellij/openapi/util/KeyedExtensionCollector.java)

> See [](bundling_plugin_openapi_sources.md) section explaining how to expose extension points sources to other plugins.
>
{style="note"}

## Example

Consider example extension points declarations:

<path>myPlugin/META-INF/plugin.xml</path>

```xml
<idea-plugin>
  <id>my.plugin</id>

  <extensionPoints>
    <extensionPoint
        name="myExtensionPoint1"
        interface="com.example.MyInterface"/>

    <extensionPoint
        name="myExtensionPoint2"
        beanClass="com.example.MyBeanClass"/>
  </extensionPoints>

</idea-plugin>
```

The `com.example.MyBeanClass` bean class used in the above `plugin.xml` file is implemented as follows:

<path>myPlugin/src/com/myplugin/MyBeanClass.java</path>

```java
public final class MyBeanClass extends AbstractExtensionPointBean {

  @Attribute("key")
  public String key;

  @Attribute("implementationClass")
  public String implementationClass;

  public String getKey() {
    return key;
  }

  public String getClass() {
    return implementationClass;
  }

}
```

> See [Extension properties code insight](plugin_extensions.md#extension-properties-code-insight) on how to provide smart completion/validation.

For above extension points, their usage in _anotherPlugin_ would look like this (see also [Declaring Extensions](plugin_extensions.md#declaring-extensions)):

<path>anotherPlugin/META-INF/plugin.xml</path>

```xml
<idea-plugin>
  <id>another.plugin</id>

  <!-- Declare dependency on plugin defining extension point: -->
  <depends>my.plugin</depends>

  <!-- Use "my.plugin" namespace: -->
  <extensions defaultExtensionNs="my.plugin">
    <myExtensionPoint1
            key="someKey"
            implementationClass="com.example.MyImplementation"/>

    <myExtensionPoint2
            implementation="another.MyInterfaceImpl"/>
  </extension>

</idea-plugin>
```

## Using Extension Points

To refer to all registered extension instances at runtime, declare an [`ExtensionPointName`](%gh-ic%/platform/extensions/src/com/intellij/openapi/extensions/ExtensionPointName.kt) with private visibility passing in the fully qualified name matching its [declaration in plugin.xml](#declaring-extension-points).
If needed, provide a public method to query registered extensions (Sample: [`TestSourcesFilter.isTestSources()`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/TestSourcesFilter.java)).

<path>myPlugin/src/com/myplugin/MyExtensionUsingService.java</path>

```java
@Service
public final class MyExtensionUsingService {

  private static final ExtensionPointName<MyBeanClass> EP_NAME =
      ExtensionPointName.create("my.plugin.myExtensionPoint1");

  public void useRegisteredExtensions() {
    for (MyBeanClass extension : EP_NAME.getExtensionList()) {
      String key = extension.getKey();
      String clazz = extension.getClass();
      // ...
    }
  }

}
```

A gutter icon for the `ExtensionPointName` declaration allows navigating to the corresponding [`<extensionPoint>`](plugin_configuration_file.md#idea-plugin__extensionPoints__extensionPoint) declaration in <path>plugin.xml</path>.
Code insight is available for the extension point name String literal (2022.3).

### Error Handling

When processing extension implementations or registrations, there might be errors, compatibility and configuration issues.
Use [`PluginException`](%gh-ic%/platform/core-api/src/com/intellij/diagnostic/PluginException.java) to log and correctly attribute the causing plugin for
[builtin error reporting](ide_infrastructure.md#error-reporting).

To report use of deprecated API, use `PluginException.reportDeprecatedUsage()` methods.

**Examples:**
- [`CompositeFoldingBuilder.assertSameFile()`](%gh-ic%/platform/core-api/src/com/intellij/lang/folding/CompositeFoldingBuilder.java)
- [`InspectionProfileEntry.getDisplayName()`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInspection/InspectionProfileEntry.java)

## Dynamic Extension Points
<primary-label ref="2020.1"/>

To support [Dynamic Plugins](dynamic_plugins.md), an extension point must adhere to specific usage rules:

- extensions are enumerated on every use and extensions instances are not stored anywhere
- alternatively, an [`ExtensionPointListener`](%gh-ic%/platform/extensions/src/com/intellij/openapi/extensions/ExtensionPointListener.kt) can perform any necessary updates of data structures (register via `ExtensionPointName.addExtensionPointListener()`)

Extension points matching these conditions can then be marked as _dynamic_ by adding `dynamic="true"` in their declaration:

```xml
<extensionPoints>
  <extensionPoint
          name="myDynamicExtensionPoint"
          beanClass="com.example.MyBeanClass"
          dynamic="true"/>
</extensionPoints>
```

All non-dynamic extension points are highlighted via <control>Plugin DevKit | Plugin descriptor | Plugin.xml dynamic plugin verification</control> inspection.
<!-- Copyright 2000-2025 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Extensions

<link-summary>Extensions are the most common way of customizing functionality in the IDE.</link-summary>

_Extensions_ are the most common way for a plugin to extend the IntelliJ Platform's functionality in a way that is not as straightforward as adding an action to a menu or toolbar.

The following are some of the most common tasks achieved using extensions:

* The `com.intellij.toolWindow` extension point allows plugins to add [tool windows](tool_windows.md) (panels displayed at the sides of the IDE user interface);
* The `com.intellij.applicationConfigurable` and `com.intellij.projectConfigurable` extension points allow plugins to add pages to the [Settings dialog](settings.md);
* [Custom language plugins](custom_language_support.md) use many extension points to extend various language support features in the IDE.

There are more than 1500 extension points available in the platform and the bundled plugins, allowing customizing different parts of the IDE behavior.

## Exploring Available Extensions

[](intellij_platform_extension_point_list.md) and [](intellij_community_plugins_extension_point_list.md) list all available extension points in IntelliJ Platform and from bundled plugins in IntelliJ IDEA.
Additionally, dedicated Extension Point and Listener Lists specific to IDEs are available under _Product Specific_.
Browse usages inside existing implementations of open-source IntelliJ Platform plugins via [IntelliJ Platform Explorer](https://jb.gg/ipe).

Alternatively (or when using 3rd party extension points), all available extension points for the specified namespace (`defaultExtensionNs`) can be listed using auto-completion inside the [`<extensions>`](plugin_configuration_file.md#idea-plugin__extensions) block in <path>[plugin.xml](plugin_configuration_file.md)</path>.
Use <ui-path>View | Quick Documentation</ui-path> in the lookup list to access more information about the extension point and implementation (if applicable).
See [](explore_api.md) for more information and strategies.

## Declaring Extensions

> Auto-completion, Quick Documentation, and other code insight features are available on extension point tags and attributes in <path>plugin.xml</path>.

<procedure title="Declaring Extension">

1. Add an [`<extensions>`](plugin_configuration_file.md#idea-plugin__extensions) element to <path>plugin.xml</path> if it's not yet present there.
   Set the `defaultExtensionNs` attribute to one of the following values:
    * `com.intellij` if the plugin extends the IntelliJ Platform core functionality.
    * `{ID of a plugin}` if the plugin extends the functionality of another plugin (must configure [plugin dependencies](plugin_dependencies.md)).
2. Add a new child element to the `<extensions>` element.
   The child element's name must match the name of the used [extension point](plugin_extension_points.md).
3. Depending on the type of the extension point, do one of the following:
    * If the extension point was declared using the `interface` attribute, set the `implementation` attribute to the name of the class that implements the specified interface.
    * If the extension point was declared using the `beanClass` attribute, set all properties annotated with the [`@Attribute`](%gh-ic%/platform/util/src/com/intellij/util/xmlb/annotations/Attribute.java) and [`Tag`](%gh-ic%/platform/util/src/com/intellij/util/xmlb/annotations/Tag.java) annotations in the specified bean class.

   See the [](plugin_extension_points.md#declaring-extension-points) section for details.
4. In addition to attributes defined by the extension point, the extension element can specify basic attributes (see the attributes list in [](plugin_configuration_file.md#idea-plugin__extensions__-) section).
5. Implement the extension API as required (see [](#implementing-extension)).

</procedure>

To clarify this procedure, consider the following sample section of the <path>plugin.xml</path> file that defines two extensions designed to access the `com.intellij.appStarter` and `com.intellij.projectTemplatesFactory` extension points in the IntelliJ Platform,
and one extension to access the `another.plugin.myExtensionPoint` extension point in another plugin `another.plugin`:

```xml
<!--
  Declare extensions to access extension points in the IntelliJ Platform.
  These extension points have been declared using "interface".
 -->
<extensions defaultExtensionNs="com.intellij">
  <appStarter
      implementation="com.example.MyAppStarter"/>
  <projectTemplatesFactory
      implementation="com.example.MyProjectTemplatesFactory"/>
</extensions>

<!--
  Declare extensions to access extension points in a custom plugin "another.plugin".
  The "myExtensionPoint" extension point has been declared using "beanClass"
  and exposes custom properties "key" and "implementationClass".
-->
<extensions defaultExtensionNs="another.plugin">
  <myExtensionPoint
      key="keyValue"
      implementationClass="com.example.MyExtensionPointImpl"/>
</extensions>
```

<procedure id="implementing-extension" title="Implementing Extension">

Please note the following important points:

- Extension implementation must be stateless. Use explicit [services](plugin_services.md) for managing (runtime) data.
- Avoid any initialization in the constructor, see also notes for [services](plugin_services.md#ctor).
- Do not perform any static initialization. Use inspection <control>Plugin DevKit | Code | Static initialization in extension point implementations</control> (2023.3).
- An extension implementation must not be registered as a [service](plugin_services.md) additionally. Use inspection <control>Plugin DevKit | Code | Extension registered as service/component</control> (2023.3).
- If an extension instance needs to "opt out" in certain scenarios, it can throw [`ExtensionNotApplicableException`](%gh-ic%/platform/extensions/src/com/intellij/openapi/extensions/ExtensionNotApplicableException.java) in its constructor.

When using [Kotlin](using_kotlin.md):

- Do not use `object` but `class` for implementation. [More details](using_kotlin.md#object-vs-class)
- Do not use `companion object` to avoid excessive classloading/initialization when the extension class is loaded.
  Use top-level declarations or objects instead. [More details](using_kotlin.md#companion-object-extensions)

</procedure>

### Extension Properties Code Insight

Several tooling features are available to help configure bean class extension points in <path>plugin.xml</path>.

#### Required Properties
<primary-label ref="2019.3"/>

Properties annotated with [`RequiredElement`](%gh-ic%/platform/core-api/src/com/intellij/openapi/extensions/RequiredElement.java) are inserted automatically and validated.

If the given property is allowed to have an explicit empty value, set `allowEmpty` to `true` (2020.3+).

#### Class names

Property names matching the following list will resolve to a fully qualified class name:

- `implementation`
- `className`
- ending with `Class` (case-sensitive)
- `serviceInterface`/`serviceImplementation`

A required parent type can be specified in the [extension point declaration](plugin_extension_points.md) via [`<with>`](plugin_configuration_file.md#idea-plugin__extensionPoints__extensionPoint__with):

```xml
<extensionPoint name="myExtension" beanClass="MyExtensionBean">
  <with
      attribute="psiElementClass"
      implements="com.intellij.psi.PsiElement"/>
</extensionPoint>
```

#### Custom resolve

Property name `language` (or ending in `*Language`, 2020.2+) resolves to all present [`Language`](%gh-ic%/platform/core-api/src/com/intellij/lang/Language.java) IDs.

Similarly, `action` and `actionId` (2024.3+) resolve to all registered [`<action>`](plugin_configuration_file.md#idea-plugin__actions__action) IDs.

#### Deprecation/ApiStatus

Properties marked as `@Deprecated` or annotated with any of [`ApiStatus`](%gh-java-annotations%/common/src/main/java/org/jetbrains/annotations/ApiStatus.java) `@Internal`, `@Experimental`, `@ScheduledForRemoval`, or `@Obsolete` will be highlighted accordingly.

#### Enum properties
<primary-label ref="2020.1"/>

Attributes with `Enum` type support code insight with _lowerCamelCased_ notation. Note: Enum implementation must not override `toString()`.

#### I18n
<primary-label ref="2019.2"/>

Annotating with [`@Nls`](%gh-java-annotations%/common/src/main/java/org/jetbrains/annotations/Nls.java) validates a UI `String` capitalization according to the text property `Capitalization` enum value.
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# IntelliJ Platform Plugin Template

<link-summary>IntelliJ Platform Plugin Template is a GitHub template containing a minimal preconfigured plugin project and GitHub Actions CI workflows that cover building, testing and deploying the plugin.</link-summary>

The IntelliJ Platform Plugin Template is the alternative solution for creating a new Gradle-based IntelliJ Platform plugin with the [New Project Wizard](creating_plugin_project.md).

[IntelliJ Platform Plugin Template][gh:plugin-template] is a GitHub repository that provides a pure boilerplate template to make it easier to create a new Gradle-based plugin project.

The main goal of this template is to speed up the setup phase of plugin development for both new and experienced developers by preconfiguring the project scaffold and CI, linking to the proper documentation pages, and keeping everything organized.

> Note: This template uses [](tools_intellij_platform_gradle_plugin.md).

GitHub Template allows you to create a new repository from the scaffold without having to copy and paste content, clone repositories, or clear the history manually.
All you have to do is click the <control>Use this template</control> button on the GitHub project page (you must be logged in with your GitHub account).
After that, the GitHub Actions workflow will be triggered to override or remove any template-specific configurations, such as the plugin name, current changelog, etc.

Once this is complete, the project is ready to be cloned to your local environment and opened with [IntelliJ IDEA](https://www.jetbrains.com/idea/download).

For more details, refer to the [IntelliJ Platform Plugin Template][gh:plugin-template] project documentation.

> The recording of the _Busy Plugin Developer. Episode 0_ webinar describes and shows [how to use the IntelliJ Platform Plugin Template](https://youtu.be/-6D5-xEaYig?t=230) in detail.
>
{style="note"}

[gh:plugin-template]: https://github.com/JetBrains/intellij-platform-plugin-template
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Plugin Logo

<link-summary>Plugin logo requirements and best practices.</link-summary>

Beginning in version 2019.1, the IntelliJ Platform supports representing a plugin with a logo.
A _Plugin Logo_ is intended to be a unique representation of a plugin's functionality, technology, or company.

When opening <path>plugin.xml</path> in editor, inspection
<control>Plugin DevKit | Plugin descriptor | Plugin Logo check</control> (2024.3+,
for earlier versions <control>Plugin DevKit | Plugin descriptor | Plugin.xml validity</control>)
will highlight a missing plugin icon.

**Note:** icons and images used within a plugin have different requirements.
See [](icons.md) for more information.

## Plugin Logo Usages
Plugin Logos are shown in the [JetBrains Marketplace](https://plugins.jetbrains.com).
They also appear in the Settings [Plugin Manager](https://www.jetbrains.com/help/idea/managing-plugins.html) UI in IntelliJ Platform-based IDEs.
Whether online or in the product UI, a Plugin Logo helps users to identify a plugin more quickly in a list, as shown below:

![Example Product Plugin Settings Dialog](plugin_prefs.png){width="800"}

> When browsing [custom plugin repositories](custom_plugin_repository.md), there is no support for showing logos for plugins hosted there but not yet installed.
>
{style="note"}

## Plugin Logo Requirements

> Please see also these [important requirements](https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-logo) for JetBrains Marketplace.
>
{style="note"}

For a Plugin Logo to be displayed correctly within an IntelliJ Platform-based IDE, it must:
* Follow the best practices design guidelines,
* Be in the correct file format,
* Conform to file name conventions,
* Have the correct size,
* Be in the <path>META-INF</path> folder of the plugin distribution file.

### Plugin Logo Size
The Plugin Logo should be provided in one size: 40px by 40px.

A Plugin Logo is displayed in two sizes, and scales automatically in each context:
* 40px by 40px in the plugins list in the Plugin Manager UI.
* 80px by 80px in the plugin details screen in the Plugin Manager UI and on the plugin's page in JetBrains Marketplace.

Verify that Plugin Logo designs are effective in both sizes and all display contexts.

### Plugin Logo Shape
Plugin Logo designs should leave at least 2px transparent padding around the perimeter, as shown below:

![36px by 36px is the area where the visible part of the Logo should fit](icon_size.png){width="225"}

Make sure Plugin Logos have the same visual weight as the logos in the examples below.
The more filled a Plugin Logo design is, the less actual space it needs.
See more examples of [visual weight compensation](icons_style.md#basic-shapes) in the UI Guidelines for Icons.

For basic shapes, use the following sizes.
Note the different areas of transparent padding used for each shape:

|            ![Square 32px by 32px](square_logo.png){width="225"}             |        ![Circle 36px in diameter](circle_logo.png){width="225"}         |
|:---------------------------------------------------------------------------:|:-----------------------------------------------------------------------:|
|                         _Square logo 32px by 32px_                          |                    _Circular logo 36px in diameter_                     |
| ![Horizontal rectangle 36px by 26px](rectangle_horizontal.png){width="225"} | ![Vertical rectangle 26px by 36px](rectangle_vertical.png){width="225"} |
|                 _Horizontal rectangular logo 36px by 26px_                  |                _Vertical rectangular logo 26px by 36px_                 |
{style="none"}

### Plugin Logo Colors
If the plugin's technology already has a logo, use its colors.
Check the license terms before using the logo.
If there is no existing logo, or its use is prohibited, create a custom logo based on the [Action Colors Palette](icons_style.md#action-icons) in the UI Guidelines for Icons.

| ![The YouTrack Plugin Logo uses the YouTrack product logo ](yt_logo.png){height="200" width="200"} | ![The Keymap Plugin Logo uses a color from the Action Colors Palette](keymap_logo.png){:height="200" width="200"} |
|:--------------------------------------------------------------------------------------------------:|:-----------------------------------------------------------------------------------------------------------------:|
|                   _The YouTrack Plugin Logo uses<br/>the YouTrack product logo_                    |                     _The Keymap Plugin Logo uses a color<br/>from the Action Colors Palette_                      |
{style="none"}

Ensure a Plugin Logo is visible on both light and dark backgrounds.
If one Plugin Logo design does not work on both light and dark backgrounds, create separate light and dark versions of the Plugin Logo.
The examples below illustrate how a Plugin Logo design may work well for a light background but not for a dark background.
Consequently, a separate Plugin Logo for dark backgrounds is needed.

| ![Plugin Logo on Light Theme](light_version.png){width="225"} |     ![Light Plugin Logo on Dark Theme](dark_bad.png){width="225"}     |     ![Plugin Logo for Dark Theme](dark_good.png){width="225"}      |
|:-------------------------------------------------------------:|:---------------------------------------------------------------------:|:------------------------------------------------------------------:|
| _The light Plugin Logo design<br/>works well on light theme_  | _The light Plugin Logo design does<br/>not work well on a dark theme_ | _A separate, dark Plugin Logo design<br/>works well on dark theme_ |
{style="none"}

### Plugin Logo File Format
All Plugin Logo images must be in SVG format.
This vector image format is required because the Plugin Logo file must be small (ideally less than 2-3kB), and the image must scale without any loss of quality.

> Using automatic conversion of bitmap graphics to SVG is highly discouraged, as the resulting files have excessive size (100kB or more).
>
{style="warning"}

### Plugin Logo File Naming Convention
Name the Plugin Logo files according to the following conventions:
* <path>pluginIcon.svg</path> is the default Plugin Logo.
  If a separate Logo file for dark themes exists in the plugin, then this file is used solely for light themes,
* <path>pluginIcon_dark.svg</path> is an optional, alternative Plugin Logo for use solely with dark IDE themes.

## Adding Plugin Logo Files to a Plugin Project
The Plugin Logo files must be packaged in the <path>META-INF</path> folder of the [plugin main JAR file](plugin_content.md).

To include Plugin Logo files, place them into the plugin project's <path>resources/META-INF</path> folder.
For example:

![Plugin Logo Files in META-INF folder](resource_directory_structure.png){width="450"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Listeners

<link-summary>Listeners allow subscription to application and project events.</link-summary>

_Listeners_ allow plugins to subscribe to events delivered through the message bus (see [Messaging infrastructure](messaging_infrastructure.md) for details).

Listeners are defined at application (global) or [project](project.md) level.

> All available listeners/topics are listed on [](intellij_platform_extension_point_list.md) and [](intellij_platform_extension_point_list.md) under _Listeners_ sections.
> Browse usages inside existing implementations of open-source IntelliJ Platform plugins via [IntelliJ Platform Explorer](https://jb.gg/ipe).
>

Listener implementations must be stateless and may not implement life-cycle (e.g., `Disposable`).
Use inspection <control>Plugin DevKit | Code | Listener implementation implements 'Disposable'</control> to verify (2023.3).

Declarative registration of listeners (2019.3 and later) allows achieving better performance than registering listeners from code.
The advantage is because listener instances get created lazily — the first time an event is sent to the topic — and not during application startup or project opening.

## Defining Application-Level Listeners

To define an application-level listener, add the [`<applicationListeners>`](plugin_configuration_file.md#idea-plugin__applicationListeners) section to <path>[plugin.xml](plugin_configuration_file.md)</path>:

```xml
<idea-plugin>
  <applicationListeners>
    <listener
        class="myPlugin.MyListenerClass"
        topic="BaseListenerInterface"/>
  </applicationListeners>
</idea-plugin>
```

The `topic` attribute specifies the listener interface corresponding to the type of events to receive.
Usually, this is the interface used as the type parameter of the [`Topic`](%gh-ic%/platform/extensions/src/com/intellij/util/messages/Topic.java) instance for the type of events.
The `class` attribute specifies the class in the plugin that implements the listener interface and receives the events.

As a specific example, to receive events about all [Virtual File System](virtual_file_system.md) changes, implement the `BulkFileListener` interface, corresponding to the topic `VirtualFileManager.VFS_CHANGES`.
To subscribe to this topic from code, use something like the following snippet:

```java
messageBus.connect().subscribe(VirtualFileManager.VFS_CHANGES,
    new BulkFileListener() {
      @Override
      public void after(@NotNull List<? extends VFileEvent> events) {
        // handle the events
      }
});
```

To use declarative registration, it's no longer required to reference the `Topic` instance.
Instead, refer directly to the listener interface class:

```xml
<applicationListeners>
  <listener
      class="myPlugin.MyVfsListener"
      topic="com.intellij.openapi.vfs.newvfs.BulkFileListener"/>
</applicationListeners>
```

Then provide the listener implementation:

```java
package myPlugin;

final class MyVfsListener implements BulkFileListener {
  @Override
  public void after(@NotNull List<? extends VFileEvent> events) {
    // handle the events
  }
}
```

## Defining Project-Level Listeners

[Project](project.md)-level listeners are registered in the same way, except that the top-level tag is [`<projectListeners>`](plugin_configuration_file.md#idea-plugin__projectListeners).
They can be used to listen to project-level events, for example, [tool window](tool_windows.md) operations:

```xml
<idea-plugin>
  <projectListeners>
    <listener
        class="myPlugin.MyToolWindowListener"
        topic="com.intellij.openapi.wm.ex.ToolWindowManagerListener"/>
  </projectListeners>
</idea-plugin>
```

The class implementing the listener interface can define a one-argument constructor accepting a [`Project`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/Project.java), and it will receive the instance of the project for which the listener is created:

```java
package myPlugin;

final class MyToolWindowListener implements ToolWindowManagerListener {
  private final Project project;

  MyToolWindowListener(Project project) {
    this.project = project;
  }

  @Override
  public void stateChanged(@NotNull ToolWindowManager toolWindowManager) {
    // handle the state change
  }
}
```

## Additional Attributes

Registration of listeners can be restricted using the following attributes.

`os`
: Allows restricting listener to given OS, e.g., `os="windows"` for Windows only (2020.1 and later)

`activeInTestMode`
: Set to `false` to disable listener if [`Application.isUnitTestMode()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/Application.java) returns `true`

`activeInHeadlessMode`
: Set to `false` to disable listener if [`Application.isHeadlessEnvironment()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/Application.java) returns `true`.
  Also covers `activeInTestMode` as test mode implies headless mode.

> If declared listener topics are intended to be used by other plugins depending on your plugin, consider [bundling their sources](bundling_plugin_openapi_sources.md) in the plugin distribution.
>
{style="note"}
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# JetBrains Marketplace

<link-summary>Overview of key JetBrains Marketplace Documentation topics.</link-summary>

JetBrains provides an official plugin repository [JetBrains Marketplace](https://plugins.jetbrains.com) for all IntelliJ Platform-based IDEs, as well as other products.

> These pages have moved to [JetBrains Marketplace Documentation](https://plugins.jetbrains.com/docs/marketplace). Please update your bookmarks.
>
{style="warning"}

For your convenience, pages previously part of this documentation are linked below:

* [API Reference](https://plugins.jetbrains.com/docs/marketplace/api-reference.html)
  * [Plugin Upload](https://plugins.jetbrains.com/docs/marketplace/plugin-upload.html)
  * [Plugins List](https://plugins.jetbrains.com/docs/marketplace/plugins-list.html)
  * [Plugin Details](https://plugins.jetbrains.com/docs/marketplace/plugin-details.html)
  * [Plugin Update Download](https://plugins.jetbrains.com/docs/marketplace/plugin-update-download.html)
  * [Maven Interface](https://plugins.jetbrains.com/docs/marketplace/maven-interface.html)
  * [Plugin Developers List](https://plugins.jetbrains.com/docs/marketplace/plugin-developers-list.html)
* [Plugin Recommendations](https://plugins.jetbrains.com/docs/marketplace/intellij-plugin-recommendations.html)
* [Custom Release Channels](https://plugins.jetbrains.com/docs/marketplace/custom-release-channels.html)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Required Experience

<link-summary>Required technology knowledge.</link-summary>

The IntelliJ Platform is a JVM application, implemented mostly in [Java](https://www.oracle.com/java/) and [Kotlin](https://kotlinlang.org).
At this time, it's not possible to develop plugins for the IntelliJ Platform in non-JVM languages).

<include from="intellij_platform.md" element-id="pluginAlternatives"/>

Developing a plugin for the IntelliJ Platform requires knowledge and experience with the following technologies and concepts:

- Java, Kotlin, or any other JVM language, and its standard and third-party libraries
- [Gradle](https://gradle.org/) or a similar build system (for example, Maven)
- [Swing](https://en.wikipedia.org/wiki/Swing_(Java)) for building user interfaces
- [Java Concurrency Model](https://docs.oracle.com/javase/tutorial/essential/concurrency/index.html)
- experience with IntelliJ Platform-based IDE (for example, [IntelliJ IDEA](https://www.jetbrains.com/idea/))

Keep in mind that the IntelliJ Platform is a large project, and while we are doing our best to cover as many topics as possible,
it is not possible to include every feature and use-case in the documentation.
Developing a plugin will sometimes require digging into the [IntelliJ Platform code](https://github.com/JetBrains/intellij-community)
and analyzing the [example implementations in other plugins](https://jb.gg/ipe).

> It is highly recommended to get familiar with the [](explore_api.md) section before starting with the plugin implementation.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Services

<link-summary>Registering and using on-demand services to encapsulate plugin functionality.</link-summary>

A _service_ is a plugin component loaded on demand when your plugin calls the `getService()` method of corresponding [`ComponentManager`](%gh-ic%/platform/extensions/src/com/intellij/openapi/components/ComponentManager.java) instance (see [Types](#types)).
The IntelliJ Platform ensures that only one instance of a service is loaded even though it is called several times.
Services are used to encapsulate logic operating on a set of related classes or to provide some reusable functionality that can be used across the plugin project.
Conceptually, they don't differ from the service classes in other languages or frameworks.

A service must have an implementation class used for service instantiation.
A service may also have an interface class used to obtain the service instance and provide the service's API.

A service needing a shutdown hook/cleanup routine can implement [`Disposable`](%gh-ic%/platform/util/src/com/intellij/openapi/Disposable.java) and perform necessary work in `dispose()` (see [](disposers.md#automatically-disposed-objects)).

> If declared services are intended to be used by other plugins depending on your plugin, consider [bundling their sources](bundling_plugin_openapi_sources.md) in the plugin distribution.
>
{style="note" title="Services as API"}

#### Types

The IntelliJ Platform offers three types of services: _application-level_ services (global singleton), _project-level_ services, and _module-level_ services.
For the latter two, a separate instance of the service is created for each instance of its corresponding scope, see [Project Model Introduction](project_model.md).

> Avoid using module-level services as it can increase memory usage for projects with many modules.
>
{style="note"}
{id="moduleServiceNote"}

#### Constructor

{#ctor}

To improve startup performance, avoid any heavy initializations in the constructor.

Project/Module-level service constructors can have a [`Project`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/Project.java)/[`Module`](%gh-ic%/platform/core-api/src/com/intellij/openapi/module/Module.java) argument.

> Using constructor injection of dependency services is deprecated (and not supported in [](#light-services)) for performance reasons.
>
> Other service dependencies must be [acquired only when needed](#retrieving-a-service) in all corresponding methods, e.g., if you need a service to get some data or execute a task, retrieve the service before calling its methods.
> Do not retrieve services in constructors to store them in class fields.
>
> Use inspection <control>Plugin DevKit | Code | Non-default constructors for service and extension class</control> to verify code.
>
{style="warning" title="Do not use Constructor Injection"}

##### Kotlin Coroutines

When using [](kotlin_coroutines.md), a distinct service [scope](coroutine_scopes.md) can be injected as parameter.

<include from="coroutine_scopes.md" element-id="serviceScopes"/>

## Light Services

A service not going to be overridden or exposed as API to other plugins does not need to be registered in <path>[plugin.xml](plugin_configuration_file.md)</path> (see [](#declaring-a-service)).
Instead, annotate the service class with [`@Service`](%gh-ic%/platform/core-api/src/com/intellij/openapi/components/Service.java) (see [](#examples)).
The service instance will be created in the scope according to the caller (see [](#retrieving-a-service)).

### Light Service Restrictions

* None of these attributes/restrictions (available for [registration of non-light services](#declaring-a-service)) is allowed: `id`, `os`, `client`, `overrides`, `configurationSchemaKey`/`preload` (Internal API).
* There is no separate headless/test implementation required.
* Service class must be `final`.
* [Constructor injection](#ctor) of dependency services is not supported.
* If an application-level service is a [PersistentStateComponent](persisting_state_of_components.md), roaming must be disabled (`roamingType = RoamingType.DISABLED`).

Use these inspections to verify above restrictions and highlight non-light services that can be converted (2023.3):

- <control>Plugin DevKit | Code | Light service must be final</control>
- <control>Plugin DevKit | Code | Mismatch between light service level and its constructor</control>
- <control>Plugin DevKit | Code | A service can be converted to a light one</control> and corresponding <control>Plugin DevKit | Plugin descriptor | A service can be converted to a light one</control> for <path>plugin.xml</path>

### Examples

{id="lightServiceExamples"}

<tabs group="languages">


<tab title="Java" group-key="java">

Application-level light service:

```java

@Service
public final class MyAppService {

  public void doSomething(String param) {
    // ...
  }

}
```

Project-level light service example:

```java

@Service(Service.Level.PROJECT)
public final class MyProjectService {

  private final Project myProject;

  MyProjectService(Project project) {
    myProject = project;
  }

  public void doSomething(String param) {
    String projectName = myProject.getName();
    // ...
  }

}
```

</tab>

<tab title="Kotlin" group-key="kotlin">

Application-level light service:

```kotlin
@Service
class MyAppService {
  fun doSomething(param: String) {
    // ...
  }
}
```

Project-level light service example:

```kotlin
@Service(Service.Level.PROJECT)
class MyProjectService(private val project: Project) {
  fun doSomething(param: String) {
    val projectName = project.name
    // ...
  }
}
```

</tab>

</tabs>

## Declaring a Service

To register a non-[Light Service](#light-services), distinct extension points are provided for each type:

* `com.intellij.applicationService` – application-level service
* `com.intellij.projectService` – project-level service
* `com.intellij.moduleService` – module-level service (not recommended, see [Note](#types))

The service implementation is specified in the required `serviceImplementation` attribute.

### Service API

To expose a service's API, create a separate class for `serviceInterface` and extend it in the corresponding class registered in `serviceImplementation`.
If `serviceInterface` isn't specified, it is supposed to have the same value as `serviceImplementation`.
Use inspection <control>Plugin DevKit | Plugin descriptor | Plugin.xml extension registration</control> to highlight redundant `serviceInterface` declarations.

### Additional Attributes

A service can be restricted to a certain OS via the `os` attribute.

To provide a custom implementation for test or headless environment, specify `testServiceImplementation` or `headlessImplementation` respectively.

### Examples

<tabs group="languages">

<tab title="Java" group-key="java">

Application-level service:

- Interface:

  ```java
  public interface MyAppService {
    void doSomething(String param);
  }
  ```

- Implementation:

  ```java
  final class MyAppServiceImpl implements MyAppService {
    @Override
    public void doSomething(String param) {
      // ...
    }
  }
  ```

Project-level service:

- Interface:

  ```java
  public interface MyProjectService {
    void doSomething(String param);
  }
  ```

- Implementation:

  ```java
  final class MyProjectServiceImpl implements MyProjectService {
    private final Project myProject;

    MyProjectServiceImpl(Project project) {
      myProject = project;
    }

    public void doSomething(String param) {
      String projectName = myProject.getName();
      // ...
    }
  }
  ```

</tab>

<tab title="Kotlin" group-key="kotlin">

Application-level service:

- Interface:

  ```kotlin
  interface MyAppService {
    fun doSomething(param: String)
  }
  ```

- Implementation:

  ```kotlin
  internal class MyAppServiceImpl : MyAppService {
    override fun doSomething(param: String) {
      // ...
    }
  }
  ```

Project-level service:

- Interface:

  ```kotlin
  interface MyProjectService {
    fun doSomething(param: String)
  }
  ```

- Implementation:

  ```kotlin
  internal class MyProjectServiceImpl(private val project: Project)
      : MyProjectService {

    fun doSomething(param: String) {
      val projectName = project.name
      // ...
    }
  }
  ```

</tab>

</tabs>

Registration in <path>plugin.xml</path>:

```xml

<extensions defaultExtensionNs="com.intellij">
  <!-- Declare the application-level service -->
  <applicationService
          serviceInterface="com.example.MyAppService"
          serviceImplementation="com.example.MyAppServiceImpl"/>

  <!-- Declare the project-level service -->
  <projectService
          serviceInterface="com.example.MyProjectService"
          serviceImplementation="com.example.MyProjectServiceImpl"/>
</extensions>
```

## Retrieving a Service

> **Never** acquire service instances prematurely or store them in fields for later use.
> Instead, **always** obtain service instances directly and **only** at the location where they're needed.
> Failing to do so will lead to unexpected exceptions and severe consequences for the plugin's functionality.
>
> Such problems are highlighted via inspections (2023.3):
> - <control>Plugin DevKit | Code | Application service assigned to a static final field or immutable property</control>
> - <control>Plugin DevKit | Code | Incorrect service retrieving</control>
> - <control>Plugin DevKit | Code | Simplifiable service retrieving</control>
>
{style="warning" title="Correct Service Retrieval"}

Getting a service doesn't need a read action and can be performed from any thread.
If a service is requested from several [threads](threading_model.md), it will be initialized in the first thread, and other threads will be blocked until it is fully initialized.

<tabs group="languages">
<tab title="Java" group-key="java">

```java
MyAppService applicationService =
    ApplicationManager.getApplication().getService(MyAppService.class);

MyProjectService projectService =
    project.getService(MyProjectService.class);
```

Service implementations can wrap these calls with convenient static `getInstance()` or `getInstance(Project)` method:

```java
MyAppService applicationService = MyAppService.getInstance();

MyProjectService projectService = MyProjectService.getInstance(project);
```

</tab>

<tab title="Kotlin" group-key="kotlin">

```kotlin
val applicationService = service<MyAppService>()

val projectService = project.service<MyProjectService>()
```

</tab>

</tabs>

<chapter title="Getting Service Flow" collapsible="true" default-state="collapsed">

```plantuml
@startuml
skinparam monochrome true
skinparam DefaultFontName JetBrains Sans
skinparam DefaultFontSize 13
skinparam DefaultTextAlignment center
skinparam NoteTextAlignment left

' default 1.5
skinparam ActivityBorderThickness 1
' default 2
skinparam PartitionBorderThickness 1.5

:getService;
note right
  Allowed in any thread.
  Call on demand only.
  Never cache the result.
  Do not call in constructors
  unless needed.
end note

if (Is Light Service) then (yes)
else (no)
  if (Is Service Declaration Found) then (yes)
  else (no)
    :Return null;
    detach
  endif
endif

if (Is Created and Initialized?) then (yes)
else (no)
  if (Is Container Active?) then (yes)
    partition "synchronized\non service class" {
      if (Is Created and Initialized?) then (yes)
      else (no)
        if (Is Initializing?) then (yes)
          :Throw
          PluginException
          (Cyclic Service
          Initialization);
          detach
        else (no)
          partition "non-cancelable" {
            :Create Instance]
            note right
              Avoid getting other
              services to reduce
              the initialization tree.
              The fewer the
              dependencies,
              the faster and more
              reliable initialization.
            end note

            :Register to be Disposed
            on Container Dispose
            (Disposable only)]
            :Load Persistent State
            (PersistentStateComponent
            only)]
          }
        endif
      endif
    }
  else (disposed or dispose in progress)
    :Throw
    ProcessCanceledException;
    detach
  endif
endif

:Return Instance;

@enduml
```

</chapter>

## Sample Plugin

To clarify how to use services, consider the **maxOpenProjects** sample plugin available in the [code samples](%gh-sdk-samples-master%/max_opened_projects).

This plugin has an application service counting the number of currently opened projects in the IDE.
If this number exceeds the maximum number of simultaneously opened projects allowed by the plugin (3), it displays an information message.

See [Code Samples](code_samples.md) on how to set up and run the plugin.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Plugin Signing

<link-summary>Plugin signing ensures that end users get unmodified plugin distribution that was actually published to JetBrains Marketplace.</link-summary>

Plugin Signing is a mechanism introduced in the 2021.2 release cycle to increase security in [JetBrains Marketplace](https://plugins.jetbrains.com) and all of our IntelliJ-based IDEs.

The Marketplace signing is designed to ensure that plugins are not modified over the course of the publishing and delivery pipeline.
If the author does not sign the plugin or has a revoked certificate, a warning dialog will appear in the IDE during installation.

On our side, we will check if the public part of a key is present, and we will verify the signature.
This is similar to the [Google upload key](https://developer.android.com/studio/publish/app-signing#generate-key) mechanism.

## How Signing Works

To be sure a file has not been modified, the file will be signed twice – first by the plugin author, then by JetBrains Marketplace.

The plugin author's sign-verify process is as follows:

- A plugin author generates a key pair ~~and uploads the public part to JetBrains Marketplace~~ (this feature is not yet available).
- A build tool signs a plugin file during the assembly process.
- The user uploads the plugin file to JetBrains Marketplace.
- JetBrains Marketplace checks if the public key is present in the user profile.
- JetBrains Marketplace verifies the signature.
- The JetBrains sign-verify process is as follows:
  - JetBrains CA is used as the source of truth here.
  - Its public part will be added to the IDE Java TrustStore, while the private part will be used only once to generate an intermediate certificate.
  - The private key of JetBrains CA is super-secret; in fact, we've already said too much.

The intermediate certificate issues a certificate that will be used to sign plugins.
This way, it will be possible to re-generate this certificate without access to JetBrains CA's super-secret private key.
The private key of the intermediate certificate is issued and kept in the AWS Certificate Manager, and no application has access to it; people's access is also limited.
So now we have an AWS-based Intermediate CA.
The public part of the intermediate certificate will be added to the plugin file together with the signing certificate.

The certificate used to sign plugins is stored securely, too.
JetBrains Marketplace uses AWS KMS as a signature provider to sign plugin files.

## Signing Methods

To provide a suitable method for plugin signing, we have introduced the [Marketplace ZIP Signer](https://github.com/JetBrains/marketplace-zip-signer) library.
It can be executed using the [`signPlugin`](tools_gradle_intellij_plugin.md#tasks-signplugin) task provided by the [](tools_gradle_intellij_plugin.md) if your project is Gradle-based.
Alternatively, a standalone [CLI Tool](#cli-tool) can be used.

Both methods require a private certificate key to be already present.

### Generate Private Key

To generate an RSA <path>private.pem</path> private key, run the `openssl genpkey` command in the terminal, as below:

```bash
openssl genpkey\
  -aes-256-cbc\
  -algorithm RSA\
  -out private_encrypted.pem\
  -pkeyopt rsa_keygen_bits:4096
```

After that, it's required to convert it into the RSA form with:

```bash
openssl rsa\
  -in private_encrypted.pem\
  -out private.pem
````

At this point, the generated <path>private.pem</path> content should be provided to the [`signPlugin.privateKey`](tools_gradle_intellij_plugin.md#tasks-signplugin-privatekey) property.
Provided password should be specified as the [`signPlugin.password`](tools_gradle_intellij_plugin.md#tasks-signplugin-password) property in the [`signPlugin`](tools_gradle_intellij_plugin.md#tasks-signplugin) configuration.

As a next step, we will generate a <path>chain.crt</path> certificate chain with:

```bash
openssl req\
  -key private.pem\
  -new\
  -x509\
  -days 365\
  -out chain.crt
```

The content of the <path>chain.crt</path> file will be used for the [`signPlugin.certificateChain`](tools_gradle_intellij_plugin.md#tasks-signplugin-certificatechain) property.

> Information about generating a public key based on the private key will be added later, when uploading public keys to JetBrains Marketplace is available.

### Gradle IntelliJ Plugin

In version `1.x`, the Gradle IntelliJ Plugin provides the [`signPlugin`](tools_gradle_intellij_plugin.md#tasks-signplugin) task, which will be executed automatically right before the [`publishPlugin`](tools_gradle_intellij_plugin.md#tasks-publishplugin) task when [`signPlugin.certificateChain`](tools_gradle_intellij_plugin.md#tasks-signplugin-certificatechain) and [`signPlugin.privateKey`](tools_gradle_intellij_plugin.md#tasks-signplugin-privatekey) signing properties are specified.
Otherwise, it'll be skipped.

An example [`signPlugin`](tools_gradle_intellij_plugin.md#tasks-signplugin) task configuration may look like:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
signPlugin {
  certificateChain.set("""
    -----BEGIN CERTIFICATE-----
    MIIElgCCAn4CCQDo83LWYj2QSTANBgkqhkiG9w0BAQsFADANMQswCQYDVQQGEwJQ
    ...
    gdZzxCN8t1EmH8kD2Yve6YKGFCRAIIzveEg=
    -----END CERTIFICATE-----
  """.trimIndent())

  privateKey.set("""
    -----BEGIN RSA PRIVATE KEY-----
    MIIJKgIBAAKCAgEAwU8awS22Rw902BmwVDDBMlTREX440BAAVM40NW3E0lJ7YTJG
    ...
    EnNBfIVFhh6khisKqTBWSEo5iS2RYJcuZs961riCn1LARztiaXL4l17oW8t+Qw==
    -----END RSA PRIVATE KEY-----
  """.trimIndent())

  password.set("8awS22%#3(4wVDDBMlTREX")
}

publishPlugin {
  token.set("perm:a961riC....l17oW8t+Qw==")
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
signPlugin {
  certificateChain = """
    -----BEGIN CERTIFICATE-----
    MIIElgCCAn4CCQDo83LWYj2QSTANBgkqhkiG9w0BAQsFADANMQswCQYDVQQGEwJQ
    ...
    gdZzxCN8t1EmH8kD2Yve6YKGFCRAIIzveEg=
    -----END CERTIFICATE-----
  """.stripIndent()

  privateKey = """
    -----BEGIN RSA PRIVATE KEY-----
    MIIJKgIBAAKCAgEAwU8awS22Rw902BmwVDDBMlTREX440BAAVM40NW3E0lJ7YTJG
    ...
    EnNBfIVFhh6khisKqTBWSEo5iS2RYJcuZs961riCn1LARztiaXL4l17oW8t+Qw==
    -----END RSA PRIVATE KEY-----
  """.stripIndent()

  password = "8awS22%#3(4wVDDBMlTREX"
}

publishPlugin {
  token = "perm:a961riC....l17oW8t+Qw=="
}
```

</tab>
</tabs>

> Do not commit your credentials to the Version Control System! To avoid that, you may use environment variables, like:
> ```
> token.set(providers.environmentVariable("PUBLISH_TOKEN"))
> password.set(providers.environmentVariable("PRIVATE_KEY_PASSWORD"))
> ```
>
{style="warning"}

Instead of using the [`signPlugin.privateKey`](tools_gradle_intellij_plugin.md#tasks-signplugin-privatekey) and [`signPlugin.certificateChain`](tools_gradle_intellij_plugin.md#tasks-signplugin-certificatechain) properties which expect the key and certificate chain content to be provided directly, it's also possible to specify the paths to the files containing the key and certificate chain content.
To do that, use the [`signPlugin.privateKeyFile`](tools_gradle_intellij_plugin.md#tasks-signplugin-privatekeyfile) and [`signPlugin.certificateChainFile`](tools_gradle_intellij_plugin.md#tasks-signplugin-certificatechainfile) properties instead.

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
signPlugin {
  certificateChainFile.set(file("certificate/chain.crt"))
  privateKeyFile.set(file("certificate/private.pem"))
  password.set("8awS22%#3(4wVDDBMlTREX")
}

publishPlugin {
  token.set("perm:a961riC....l17oW8t+Qw==")
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
signPlugin {
  certificateChainFile = file("certificate/chain.crt")
  privateKeyFile = file("certificate/private.pem")
  password = "8awS22%#3(4wVDDBMlTREX"
}

publishPlugin {
  token = "perm:a961riC....l17oW8t+Qw=="
}
```

</tab>
</tabs>

### Provide Secrets to IDE

To avoid storing hard-coded values in the project configuration, the most suitable method for local development would be using environment variables provided within the _Run/Debug Configuration_.

To specify secrets like `PUBLISH_TOKEN` and values required for the [`signPlugin`](tools_gradle_intellij_plugin.md#tasks-signplugin) task, modify your Gradle configuration as follows:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
signPlugin {
  certificateChain.set(providers.environmentVariable("CERTIFICATE_CHAIN"))
  privateKey.set(providers.environmentVariable("PRIVATE_KEY"))
  password.set(providers.environmentVariable("PRIVATE_KEY_PASSWORD"))
}

publishPlugin {
  token.set(providers.environmentVariable("PUBLISH_TOKEN"))
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
signPlugin {
  certificateChain = providers.environmentVariable("CERTIFICATE_CHAIN")
  privateKey = providers.environmentVariable("PRIVATE_KEY")
  password = providers.environmentVariable("PRIVATE_KEY_PASSWORD")
}

publishPlugin {
  token = providers.environmentVariable("PUBLISH_TOKEN")
}
```

</tab>
</tabs>

In the <control>Run/Debug Configuration</control> for [`publishPlugin`](tools_gradle_intellij_plugin.md#tasks-publishplugin) Gradle task, provide <control>Environment Variables</control> using relevant environment variable names:

![Run/Debug Configuration Environment Variables](plugin_singing_env_variables.png)

> Note that both the private key and certificate chain are multi-line values.
> It is necessary to transform them first using Base64 encoding before providing the single-line field in the <control>Environment Variables</control> panel.
>
> [`signPlugin.privateKey`](tools_gradle_intellij_plugin.md#tasks-signplugin-privatekey) and [`signPlugin.certificateChain`](tools_gradle_intellij_plugin.md#tasks-signplugin-certificatechain) properties will automatically detect and decode the Base64-encoded values.
>
> {style="warning"}

### CLI Tool

CLI tool is required if you don't rely on the Gradle IntelliJ Plugin – i.e., when working with [Themes](developing_themes.md).

To get the latest Marketplace ZIP Signer CLI Tool, visit the [JetBrains/marketplace-zip-signer](https://github.com/JetBrains/marketplace-zip-signer/releases) GitHub Releases page.
After downloading the <path>marketplace-zip-signer-cli.jar</path>, execute it as below:

```bash
java -jar marketplace-zip-signer-cli.jar sign\
  -in "unsigned.zip"\
  -out "signed.zip"\
  -cert-file "/path/to/chain.crt"\
  -key-file "/path/to/private.pem"\
  -key-pass "PRIVATE_KEY_PASSWORD"
```

## Signing for Custom Repositories

Signing plugins hosted on a custom repository can be accomplished for added trust between the repository and installation.
However, unlike Marketplace, the custom repository will not re-sign the plugin with the JetBrains key.
Instead, a trusted private CA or self-signed certificate can be used to sign and validate plugins.

### Verification

Before looking at how we can sign a plugin, let's first review how verification works when a non-JetBrains certificate is used.
As of 2021.2, during verification, IntelliJ-based IDEs check if the plugin was signed by the JetBrains CA certificate or any public key provided by the user via <ui-path>Settings | Plugins | Manage Plugin Certificates</ui-path>. In 2021.2.1, a system property has been added: `intellij.plugins.truststore`, pointing to a trusted JKS TrustStore.
During verification, the plugin's public key is extracted from the signature.
The last certificate entry in the chain matched against the certificates stored in one of the storages from above.

### Using a Trusted Internal CA

If an internal CA is available, you can use this to generate certificates for signing.
When choosing this route, the certificate chain includes the root CA public key at the end of the chain.

With this approach, existing internal TrustStores may exist and could be used.
Be sure when choosing a TrustStore that the CAs are limited to the internal CAs you trust.
Using a TrustStore with public CAs can expose the users to an attack vector.

If adding a TrustStore to a user's environment is not possible, the user may also add the root CAs public key to <ui-path>Settings | Plugins | Manage Plugin Certificates</ui-path>.

### Using Self-Signed Certificates

Using a self-signed certificate is an option if no internal CAs exist.
To generate the key and public key, see: [Generate Private Key](#generate-private-key)

If providing users with a TrustStore, you can generate one with the public key using `keytool`:

```bash
keytool -import -alias IdeaPlugin -file chain.crt -keystore pluginKeystore.jks -storepass changeit
```
(note: the TrustStore password must remain `changeit`)

Otherwise, users may add the public key manually to <ui-path>Settings | Plugins | Manage Plugin Certificates</ui-path>.

## Plugin Signature Verification

To verify the signature of a plugin, you can use the [`verifyPluginSignature`](tools_gradle_intellij_plugin.md#tasks-verifypluginsignature) task.

By default, this task will use the same certificate chain as provided to the [`signPlugin`](tools_gradle_intellij_plugin.md#tasks-signplugin) task in the previous section.

To verify the signature using [CLI tool](#cli-tool), execute the `verify` command as below:

```bash
java -jar marketplace-zip-signer-cli.jar verify\
  -in "signed.zip"\
  -cert "/path/to/chain.crt"
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Plugin Types

<link-summary>Overview and examples of different kinds of plugins.</link-summary>

Products based on the IntelliJ Platform can be modified and adjusted for custom purposes by adding plugins.
All downloadable plugins are available from the [JetBrains Marketplace](https://plugins.jetbrains.com/).

The most common types of plugins include:

* Custom language support
* Framework integration
* Tool integration
* User interface add-ons
* Themes

<include from="intellij_platform.md" element-id="pluginAlternatives"/>

## Custom Language Support

Custom language support provides basic functionality for working with a particular programming language, that includes:

* File type recognition
* Lexical analysis
* Syntax highlighting
* Formatting
* Code insight and code completion
* Inspections and quick fixes
* Intention actions

Plugins can also augment existing (bundled) custom languages, e.g., by providing additional inspections, intentions, or any other features.

Refer to the [Custom Language Support Tutorial](custom_language_support_tutorial.md) to learn more about the topic.

## Framework Integration

Framework integration consists of improved code insight features, which are typical for a given framework, as well as the option to use framework-specific functionality directly from the IDE.
Sometimes it also includes language support elements for a custom syntax or DSL.

* Specific code insight
* Direct access to framework-specific functionality

Refer to the [IntelliJ-HCL](%gh-ij-plugins%/terraform) as an example of framework integration.
More reference plugins can be found on [JetBrains Marketplace](https://plugins.jetbrains.com/search?orderBy=update%20date&shouldHaveSource=true&tags=Framework).

## Tool Integration

Tool integration makes it possible to manipulate third-party tools and components directly from the IDE without switching contexts, that implies:

* Implementation of additional actions
* Related UI components
* Access to external resources

Refer to the [Gerrit integration](https://plugins.jetbrains.com/plugin/7272) plugin as an example.

## User Interface Add-Ons

Plugins in this category apply various changes to the standard user interface of the IDE.
Some newly added components are interactive and provide new functionality, while others are limited to visual modifications only.
The [Foldable ProjectView](https://plugins.jetbrains.com/plugin/17288-foldable-projectview) plugin may serve as an example.

## Themes

[Themes](themes_getting_started.md) give designers the ability to customize the appearance of built-in IDE UI elements.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Plugin User Experience (UX)

<link-summary>Ensuring a good user experience for your plugin.</link-summary>

_User Experience (UX)_ is a term describing the experience users feel when using a product.
It covers not only aspects like visual presentation, performance, stability, or ease of use, but anything that affects the user's satisfaction.
It's an overall impression of using a product that strongly indicates whether a user likes it or not.

IntelliJ Platform-based plugins are products, and providing a good UX is very important for retaining users and making them recommend your plugin to others.
A bad plugin UX can negatively impact the user base, as users tend to abandon plugins that bring frustration, e.g., by instability, poor performance, or complexity.

The following sections explain the selected plugin UX areas.

## General Advice

Great IntelliJ Platform plugins, like any other products, should bring significant value to users.
When planning your work, talk and try to understand what your users need the most and prioritize crucial functionalities.

If you are unsure about an implemented solution, consider sharing the work in progress with a limited group of users (e.g., your colleagues or active community members) and gathering the feedback that will help you improve the final result.
See the [Custom Release Channels](publishing_plugin.md#specifying-a-release-channel) section for information on how to automate sharing the pre-release plugin versions.

### Feedback

Gathering feedback on the existing features can help identify what works well and what should be improved, which also increases the overall plugin quality.

<video src="https://www.youtube.com/watch?v=J3VEfTUX6Bs"/>

_This session covers best practices for addressing feature requests, handling bug reports, navigating diverse communication styles, and fostering user engagement._

## Ease of Use

Plugins should be just easy to use.
Ideally, all the features should work out of the box after the installation, without any special user interactions, like manually enabling crucial plugin features.
Default settings should reflect the typical plugin usage in a standard project.

All the settings and actions should be easy to find and be placed in the proper [settings](settings.md) or [action group](grouping_action.md), e.g.:

* Framework plugin settings should be placed under the <ui-path>Settings | Languages & Frameworks</ui-path>
* Action marking a directory as a plugin-specific root type should be added to <ui-path>Mark Directory as...</ui-path> group

Plugins that are hard to configure with features that are hard to find may be quickly abandoned out of frustration.

## Stability

Plugins that throw a lot of errors visible in the messages panel and execute actions resulting in incorrect behavior, e.g., generating incorrect code, are considered unstable and unreliable.

To improve the overall stability and minimize the risk of introducing regression issues, it is critical to implement [functional tests](testing_plugins.md) with a low maintenance cost.
It is a great safety net, which in the long term, will speed up your development and help you release new versions without the fear of breaking existing plugin features.

It's nearly impossible to develop software without bugs, so it is recommended to set up an issue tracker where users can report errors.
In addition, it's worth implementing [error reporting](ide_infrastructure.md#error-reporting) that allows sending reports directly from within the IDE, with all required information attached.
To reproduce and understand problems in production, use [logging](ide_infrastructure.md#logging) consistently.

## Performance

Even if a plugin works correctly and looks pleasing, poor performance will impact user satisfaction.
Slow highlighting, code completion, code generation, and other features may break the user's workflow and cause frustration leading to plugin uninstallation.
Always try to follow the performance tips described on the relevant topic pages, e.g., [](psi_performance.md), [](threading_model.md#avoiding-ui-freezes), [](indexing_and_psi_stubs.md#improving-indexing-performance).

Making as much functionality as possible working during [dumb mode](indexing_and_psi_stubs.md#dumb-mode) can also improve perceived performance.

## Distribution Size

In addition to the plugin execution performance, it is recommended to optimize the size of the plugin distribution that is downloaded by users from JetBrains Marketplace.
Users with a poor internet connection may cancel the download when they realize that it will take too long to wait for a plugin they are not sure will meet their expectations.

Consider the following techniques for optimizing the plugin distribution size:

* Decrease the number of dependencies. Check if the target platform includes utilities (like those mentioned in [](ui_faq.md)) or [libraries](api_changes_list.md#bundled-library-updates) you need and reuse them.
* Make sure no unneeded or multiple versions of the same dependencies are packaged in the plugin distribution.
* Optimize assets like icons, images, videos, etc.
* If large resources (e.g., SDKs, reference documentation) are needed only in specific setups, consider downloading them by the plugin on-demand instead of bundling them in the plugin distribution.

[Obfuscation](https://plugins.jetbrains.com/docs/marketplace/obfuscate-the-plugin.html) may also help reduce the distribution file size.

## Consistent Behavior

When designing and implementing features, review existing functionalities of the IDE and plugins and design your features in a similar and consistent way.
A consistent approach will make it easier for users to work with your plugin, increasing overall satisfaction.

If you implement [custom language support](custom_language_support.md), review and consider implementing extension points from the [](additional_minor_features.md) list so that your plugin provides an experience consistent with other plugins.

## Consistent and Good-Looking UI

If a plugin UI significantly differs from the other application parts, it can feel alien to people and might be considered low quality or neglected.
Review and follow the rules described in the [](ui_guidelines_welcome.topic).
Pay attention to [icons](icons_style.md) and make them match the IDE style.
Use the UI controls recommended for a given use case.
Use [UI Inspector](internal_ui_inspector.md) to see how the existing UI is implemented.

## High-Quality Texts

Bad-quality labels or texts with typos and grammatical errors make a bad impression.
All the UI texts should follow the rules described in the _Text_ section of the [](ui_guidelines_welcome.topic).
It is recommended to proofread the texts or use one of the [spellcheck plugins](https://plugins.jetbrains.com/search?tags=Spellcheck).

## Plugin Description and Presentation

The description on the plugin page is the place where users have the first contact with the plugin, and its content helps them to decide if it is what they are looking for.
The description should be clear, polished, and follow the rules described in the JetBrains Marketplace [documentation](https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description).
See also this webinar about [5 tips for optimizing the JetBrains Marketplace plugin page](https://youtu.be/oB1GA9JeeiY?t=52).

## Providing Translations

[Translating](providing_translations.md) the plugin may improve the experience and increase the adoption of non-English speaking users, for example, in the dynamically growing Chinese market.
Even if translating is not planned in the nearest future, it is recommended to make the plugin ready for translation by following recommendations from the [](internationalization.md) section.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Quick Start Guide

<link-summary>Introduction to IntelliJ Platform plugin development.</link-summary>

This section covers the basics of working with the IntelliJ Platform.
It will familiarize you with the working environment, project structure, and frequently used API components.

* [](plugin_alternatives.md)
* [](plugin_required_experience.md)
* [](plugin_types.md)
* [](developing_plugins.md)
* [](plugin_structure.topic)
* [Implementing Plugin in Kotlin](using_kotlin.md)
* [](plugin_signing.md)
* [](ide_development_instance.md)
* [](faq.md)

> If you are interested in the UI theme development, please see [Themes](themes_getting_started.md).
>
{style="note"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Popups

<link-summary>Creating different kinds of popups.</link-summary>

The IntelliJ Platform user interface makes extensive use of popups - semi-modal windows that have no chrome (explicit closing buttons) and disappear automatically on focus loss.
Making use of these controls in your plugin ensures a consistent user experience between your plugin and the rest of the IDE.

Popups can optionally display a title, are optionally movable and resizable (and support remembering their size), and can be nested (show another popup when an item is selected).

The [`JBPopupFactory`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/popup/JBPopupFactory.java) interface allows you to create popups that display different kinds of components, depending on your specific needs.
The most commonly used methods are:

| Method                          | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|---------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `createComponentPopupBuilder()` | <p>Generic, allows showing any [Swing](https://docs.oracle.com/javase/tutorial/uiswing/start/index.html) component.</p><p>See [`ComponentPopupBuilder`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/popup/ComponentPopupBuilder.java)'s methods for possible options.</p><p>**Example:** [`IntentionPreviewPopupUpdateProcessor`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/intention/impl/preview/IntentionPreviewPopupUpdateProcessor.kt) creating a popup rendering the intention preview.</p> |
| `createPopupChooserBuilder()`   | <p>For choosing one or more items from a plain `java.util.List`.</p><p>See [`PopupChooserBuilder`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/popup/PopupChooserBuilder.java)'s methods for possible options.</p><p>**Example:** [`ShowMessageHistoryAction`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/actions/ShowMessageHistoryAction.kt) creating a popup with recent commit messages history in the commit message text area.</p>                                                              |
| `createConfirmation()`          | <p>For choosing between two options, and performing different actions depending on which option is selected.</p><p>**Example:** [`VariableInplaceRenamer`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/rename/inplace/VariableInplaceRenamer.java) creating confirmation popup after invalid variable name is provided in the inplace rename action.</p>                                                                                                                                                          |
| `createActionGroupPopup()`      | <p>Show actions from an [Action Group](grouping_action.md) and executes the action selected by the user.</p><p>**Example:** [`ShowRecentFindUsagesGroup`](%gh-ic%/platform/lang-impl/src/com/intellij/find/impl/ShowRecentFindUsagesGroup.java) invoked via <ui-path>Edit / Find Usages / Recent Find Usages</ui-path> and showing recent find usages group popup.</p>                                                                                                                                                        |

### Action Groups

Action group popups support different ways of choosing an action from the keyboard, in addition to the normal arrow keys.
By passing one of the constants in the [`JBPopupFactory.ActionSelectionAid`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/popup/JBPopupFactory.java) enumeration, you can choose whether an action can be selected by
- pressing a key corresponding to its sequential number
- typing part of its text (speed search)
- pressing a mnemonic character

For popups with a fixed set of items, the recommended selection method is sequential numbering.
For popups with a variable and potentially large number of items, speed search typically works best.

### List Popups

To create a list-like popup which is more flexible than a simple
[`JList`](https://docs.oracle.com/javase/8/docs/api/javax/swing/JList.html)
and doesn't represent the possible choices as actions in an action group, use
[`JBPopupFactory.createListPopup()`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/popup/JBPopupFactory.java)
with a
[`ListPopupStep`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/ui/popup/ListPopupStep.java)
implementation (usually, [`BaseListPopupStep`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/popup/util/BaseListPopupStep.java) is used as a base).
The key methods to override are:
- `getTextFor()` - returning the text to display for an item
- `onChosen()` - called when an item is selected

By returning a new popup step from the `onChosen()` method, you can implement hierarchical (nested) popups.

### Showing Popup

Once you've created the popup, you need to display it by calling one of the `show()` methods.
You can let the IntelliJ Platform automatically choose the position based on the context, by calling `showInBestPositionFor()`, or specify the position explicitly through methods like `showUnderneathOf()` and `showInCenterOf()`.

> The `show()` methods return immediately and do not wait for the popup to be closed.
>
{style="note"}

To perform some action when the popup is closed, use one of the following approaches:
- attach a listener to it using the `addListener()` method
- override a method of the popup contents such as [`PopupStep.onChosen()`](%gh-ic%/platform/core-ui/src/openapi/ui/popup/PopupStep.java)
- attach an event handler to your own component within the popup
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Postfix Completion

<link-summary>Postfix completion allows generating or wrapping existing code into additional constructs without navigating the caret back.</link-summary>

<tldr>

**Product Help:** [Postfix Completion](https://www.jetbrains.com/help/idea/auto-completing-code.html#postfix_completion)

</tldr>

The Postfix Completion functionality allows developers to wrap a code fragment with a predefined template by typing a template abbreviation just after an expression meant to be wrapped, expanded, or modified.
It relieves developers from typing repetitive or non-trivial code or helps to create the code faster, e.g., often it is convenient to write a code part and surround it with the required block without navigating the caret backward.

Consider a situation where a developer is not very familiar with a current Java project API and doesn't know how to name a variable that will be a result of an expression they want to type.
The postfix completion makes it possible to write an expression at first and create a variable assignment with suggested names by adding a postfix template abbreviation at the end of the expression.

Assume that a user typed the following Java code:

```java
void confirmOrder(Cart cart) {
  cart.getDeliveryType().getDeliveryCost()<caret>
}
```

To avoid moving the caret to the beginning of the line, the user can quickly create a variable assignment by adding the `.var` postfix abbreviation and expanding the template:

```java
void confirmOrder(Cart cart) {
  cart.getDeliveryType().getDeliveryCost().var<ENTER>
}
```

When the template is applied, the above code is expanded to:

```java
void confirmOrder(Cart cart) {
  Money deliveryCost = cart.getDeliveryType().getDeliveryCost();<caret>
}
```

In addition, the user can choose the best matching variable name from the name suggestions popup.

These sections describe how to implement Postfix Templates, and their associated building blocks, to plugins:
- [](postfix_templates.md)
- [](advanced_postfix_templates.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Postfix Templates

<link-summary>Postfix templates implement possibility to modify or wrap the existing code in additional constructs without navigating the caret back.</link-summary>

The IntelliJ Platform allows plugins to provide custom postfix templates specific to the supported languages, frameworks, or libraries.

To provide custom postfix templates for an existing or custom language, register an implementation of
[`PostfixTemplateProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/templates/PostfixTemplateProvider.java)
in the `com.intellij.codeInsight.template.postfixTemplateProvider` extension point (EP).

The `PostfixTemplateProvider` extension contains the list of templates that extend the
[`PostfixTemplate`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/templates/PostfixTemplate.java)
class.
During the code completion mechanism, all postfix template providers registered for the current language are queried for their templates.
All templates enabled and applicable in the current context will be added to the completion popup items set.

**Examples:**
- [`JavaPostfixTemplateProvider`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/template/postfix/templates/JavaPostfixTemplateProvider.java) providing Java postfix templates
- [`PyPostfixTemplateProvider`](%gh-ic%/python/src/com/jetbrains/python/codeInsight/postfix/PyPostfixTemplateProvider.java) providing Python postfix templates

## Postfix Templates Implementation

The simplest way to create a postfix template is by extending the
[`PostfixTemplate`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/postfix/templates/PostfixTemplate.java)
class and implementing the key methods:
- `boolean isApplicable()` determining whether the template can be used in the context described by parameters
- `void expand()` inserting the template content in the editor

**Examples:**
- [`InstanceofExpressionPostfixTemplate`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/template/postfix/templates/InstanceofExpressionPostfixTemplate.java) surrounding an expression with the _instanceof_ check
- [`TryWithResourcesPostfixTemplate`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/template/postfix/templates/TryWithResourcesPostfixTemplate.java) wrapping a selected expression in _try-with-resources_ block

> See the [](advanced_postfix_templates.md) section for information on how to implement postfix templates with more advanced features and editing possibilities.
>
{style="note"}

## Postfix Template Description

All postfix templates must provide descriptions and examples showing the code before and after a template is expanded.
The files describing the template must be placed in the plugin's <path>resources</path> in the <path>postfixTemplates/\$TEMPLATE_NAME\$</path> where the _\$TEMPLATE_NAME\$_ directory must match the simple name of the template class,
e.g., for a template implemented in `com.example.IntroduceVariablePostfixTemplate` class, the directory name should be named as <path>IntroduceVariablePostfixTemplate</path>.

Providing the description explaining the template purpose and context details is achieved by creating the <path>description.html</path> file.

Providing the code snippets showing the template in "before" and "after" expanding states is achieved via the <path>before.\$EXTENSION\$.template</path> and <path>after.\$EXTENSION\$.template</path> files accordingly.
The _\$EXTENSION\$_ placeholder should be replaced with the extension of the template language, e.g., <path>before.kt.template</path> for a Kotlin template.

> If a plugin project is multi-module, and it combines resources into a single JAR, make sure that all template description files have unique names or paths.
> Otherwise, only the last packed description file will exist in the distribution package.
>
{style="warning"}

> See the [](providing_translations.md#bundled-translations) section for information about how to provide postfix template description translations in plugins.

The code snippets included in the example files can use the `<spot>` marker, which should surround the most important code parts, e.g., expression to expand and position of the caret after expanding.
Marked parts will be highlighted in the <ui-path>Settings | Editor | General | Postfix Completion</ui-path> settings page, making it easier for users to understand how a template is expanded, e.g.:
- <path>before.java.template</path>:
  ```java
  <spot>cart.getProducts()</spot>.var
  ```

- <path>after.java.template</path>:
  ```java
  List<Product> products = cart.getProducts();<spot></spot>
  ```

Template example files can also use the `$key` placeholder which is replaced with the actual template key in the preview UI, e.g., consider a template with the `var` key:

<compare first-title="Content" second-title="Rendition">

```java
cart.getProducts()$key
```

```java
cart.getProducts().var
```

</compare>

The gutter icons for a postfix template class allow navigating to the corresponding description and before/after files in plugin resources.

**Example:**
[`TryWithResourcesPostfixTemplate`](%gh-ic%/java/java-impl/src/postfixTemplates/TryWithResourcesPostfixTemplate)
directory containing description files for
[`TryWithResourcesPostfixTemplate`](%gh-ic%/java/java-impl/src/com/intellij/codeInsight/template/postfix/templates/TryWithResourcesPostfixTemplate.java)
template.
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 1. Prerequisites

<link-summary>Steps required before starting implementation of a sample custom language support.</link-summary>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

## Download and Install IntelliJ IDEA

Download and install either IntelliJ IDEA Ultimate or IntelliJ IDEA Community Edition from [here](https://www.jetbrains.com/idea/download/).

## Check out Community Edition Source Files

> While not required, having the full sources of the platform and all bundled plugins available for browsing allows finding related implementations.
>
{style="note"}

Download the IntelliJ IDEA Community Edition source files as described in the IntelliJ IDEA Community Edition [README](%gh-ic%/README.md) file.

## Install Required Plugins

Make sure that the _Plugin DevKit_ and _Gradle_ plugins are enabled.

<include from="snippets.md" element-id="pluginDevKitAvailability"/>

Install and enable [Grammar-Kit](https://plugins.jetbrains.com/plugin/6606-grammar-kit) and [PsiViewer](https://plugins.jetbrains.com/plugin/227-psiviewer) (optionally) plugins.

## Create a Project

Create an empty [IntelliJ Platform Plugin project](creating_plugin_project.md) or start using [](plugin_github_template.md) when creating a plugin hosted on GitHub.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Progress Bar

<link-summary>UI guidelines on using progress bars.</link-summary>

<tldr>

**Implementation:** [`JProgressBar`](https://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)

</tldr>

A progress bar informs users about the progress of a lengthy operation.

![](determinate_example.png){width=308}

## When to use

Follow the rules for [progress indicators](progress_indicators.md).

## How to use

### Types

Use **determinate** progress bar, if the process duration is known:

![](determinate_example.png){width=308}

Otherwise, use **indeterminate** progress bar:

![](indeterminate_example.png){width=308}

If an indeterminate process reaches a point where its duration can be determined, switch to a determinate progress bar. For example:

![](progress_bar_indeterminate.png){width=308}

![](progress_bar_determinate.png){width=308}

### Process name and details

A progress bar can have a process name and process details. For wording, follow the rules for [progress text](progress_text.md).

#### Process name

Place a process name above the progress bar:

![](label_above.png){width=308}

If the vertical space is limited, place the process name with a colon on the left:

![](progress_bar_label_left.png){width=308}

If there are several processes in a group, add a bold header. The header is a noun.

![](several_progresses.png){width=308}

Do **not** show a process name for inline processes:

![](progress_bar_tool_window.png){width=605}

#### Process details

Place process details under the progress bar in one line:

![](comment.png){width=308}

The length of the comment is limited by the progress bar:

![](comment_long.png){width=308}

If space is limited, show percentage completed:

![](horizontaly.png){width=342}

#### In dialog

Use a process name as a dialog header, capitalize the title and remove ellipsis. Process details appear above the progress bar:

![](dialog.png){width=544}

#### In status bar

Place a process name under the progress bar in the Status bar:

![](status_bar.png){width=238}

### Process status

If a process consists of substeps that can fail but do not terminate the process, then use green and red colors to show the intermediate status.
For example, show the status of the running tests:

![](progress_color.png){width=390}

Do **not** color progress bar to show the final result of the task, use [notifications](notification_types.md).
In case of success, show notification for the user-initiated tasks, in case of failure — for all tasks.

### Process control

Provide the Cancel button in the progress dialog if the process can be interrupted (see [Loading Project dialog](#in-dialog)).
Use the Stop button if interrupting does not return the environment to its previous state.

Use the Stop icon if there are several processes running at the same time in one dialog or there is not enough space for the button (e.g., [Status bar](#in-status-bar)):

![](tasks_dialog.png){width=700}

Always place the Stop icon on the right next to the progress bar. On hover over the Stop icon, show the "Stop" or "Cancel" comment under the progress bar instead of process details:

![](hover_stop_icon.png){width=332}

If the process takes a long time and can prevent the user from performing tasks, provide an option to pause a process using the Pause button or the Pause icon.
Replace process details with the "Pause" comment on hover over the Pause icon:

![](pause.png){width=331}

It is **not** recommended providing an option to pause the process. It is preferable that the process runs in the background and does not interfere with a user.

If a user pauses the process, show "Paused" under the progress bar.
Replace the Pause icon with Resume, show "Resume" under the progress bar and when hovered over the Resume button:

![](resume.png){width=330}

Hide the progress bar as soon as the process completes.

## Sizes and placement

The progress form and sizes are the same in all themes.

![](progress_bar_sizes.png){width=586}




<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Progress Indicators

<link-summary>UI guidelines on using progress indicators.</link-summary>

<tldr>

**Implementation**: Progress tracking in [Progress API](background_processes.md#tracking-progress) and [Kotlin Coroutines](coroutine_execution_contexts.md#suspending-context-progress-reporting)

</tldr>

Progress indicators inform users about an ongoing operation. There are three types of indicators:

* [Loader](loader.md)
* [Progress text](progress_text.md)
* [Progress bar](progress_bar.md)

## Which indicator to use

If an operation lasts for less than a second in most cases, do not show any progress indicator. Progress indicators for a short operation are distracting.

If the user has to wait until a process completes to continue working with the app, show a progress bar in a modal dialog.

![](progress_dialog.png){width=440}

If the progress is non-modal, select progress indicator based on where it appears.

* [Input field, combo box, drop-down](#input-field-combo-box-drop-down)

* [Search field](#search-field)

* [Tree, list, tool window](#tree-list-tool-window)

* [Breadcrumb and dialog label](#breadcrumb-and-dialog-label)

* [Settings dialog](#settings-dialog)

* [Empty state](#empty-state)

* [Main window](#main-window)

### Input field, combo box, drop-down

Place the loader inside an input field on the right to show that the field content is being loaded or checked.

![](combo_box_loader.png){width=201}

### Search field

Place the loader on the right to show that search is being performed.

![](search_field_loader.png){width=262}

### Tree, list, tool window

If each tree node loads independently, and it’s important to know the current state of each node, show the loader instead of the node icon:

![](tree_loader_icon.png){width=372}

If nodes do not have icons, or icons can’t be replaced for some reason, show progress text after the node’s label:

![](tree_text.png){width=400}

If the loader applies to the whole content, place it in the top right corner:

![](tree_loader_corner.png){width=400}

If processes start simultaneously and have the same execution time, place the loader in the top right corner of the area.
For example, in the <control>Push</control> dialog, repositories are loaded at the same time.
Loaders in each line will blink at the same time and will look distracting.

![](tree_loader_push.png){width=400}

If the top right corner of the area is taken with content and there is no space for the loader, show the progress bar at the top of the tool window.
For example, the VCS Log tool window has a progress bar at the top when the content is loading or during searching.

![](progress_tool_window.png){width=605}

### Breadcrumb and dialog label

Place the loader after breadcrumbs or a dialog label to show that the page is being loaded:

![](breadcrumb_loader.png){width=274}

### Settings dialog

If some settings or configurations take a significant time to load, it’s preferable to reserve space for a progress bar.
For example, show a progress bar while installing a plugin:

![](settings_loader.png){width=251}

### Empty state

If the state is empty, show progress text. For example, in search dialogs, and the details panel in settings or tool windows:

![](empty_state_text.png){width=708}

Show one more progress indicator, e.g., a loader like on the example above, if loading continues when some data is already displayed.

If a process takes longer than 4 seconds, provide [process details](progress_text.md#details), e.g., the time left or passed, work units
like the current step, to indicate that the process is being performed and is not hanging:

![](empty_state_details.png){width=576}

If it’s not possible to provide progress details, show the loader to indicate that a long process is not frozen:

![](empty_state_loader.png){width=576}

### Main window

If a process is long and can run in the background, show the progress bar in the main window in the status bar:

![](status_bar_progress.png){width=238}

Or in a non-modal dialog:

![](tasks_dialog.png){width=700}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Progress Text

<link-summary>UI guidelines on writing progress texts.</link-summary>

![](desc.png){width=632}

## When to use

Follow the rules for [progress indicators](progress_indicators.md).

## How to use

### Process name

Use the progressive form of the verb which describes the process, for example:

![](progressive_form.png){width=288}

Add an ellipsis at the end to show that an action is in progress.

Use sentence case for process names.

A process name remains unchanged while the process runs.

Do not animate the ellipsis, as it attracts too much attention.
The progressive verb form, the text position and the style are enough to understand that this is an action in progress.

### Details

Use sentence case for details.

Do not provide details that are meaningless for the user, for example, "Please wait":

<format color="Red" style="bold">Incorrect</format>

![](meaningless.png){width=288}

Add time units if the remaining time can be predicted.

Round up the first time unit to one of the following numeric anchors: 1, 2, 3, 5, 10, 15, 20 and 30.
For example, if there are 7 minutes and 50 seconds remaining, the progress text should read "About 10 minutes left".
If less than 5 seconds are left, it should say "About 5 seconds left".

![](time.png){width=288}

Use work units if the remaining time cannot be predicted, as they help the user understand why the process takes so long.

Work units: the current step, the currently processed file, the number of processed files/tde amount of information, the percentage of work completed, and so on:

![](work.png){width=288}

The time passed if the user controls the process, for example, needs to stop it after a certain time:

![](passed.png){width=288}

<p>Update the timer every second.</p>

### Cancellation action

If the process can be cancelled, add a [link](link.md) for the cancel action for an empty state:

![](cancellation.png){width=475}

Use title case for the cancel action.

Replace progress text with the loaded data or an [empty state](empty_state.md) when the process has finished.
Show another progress indicator, e.g., a loader as in the example below, if loading continues after some data has been displayed.

![](empty_state_text.png){width=708}

### Trees

Do not show details or a link to cancel the operation for progress in trees and lists. Only show the process name since space is limited here.

## Sizes and placement

### Empty state

Center-align the first line of the progress text if it is no longer than 200px.
If it is longer than 200px, center-align characters from the first 200px and put the rest of the characters to the right.

Left-align subsequent lines with the first line.

The minimum text width is 40 characters.
If an area is too narrow to fit the minimum text width, show text using the whole width, including margins.
If no space is left, hide the text under area borders.

Wrap text when the area’s width changes.

Fields and vertical spaces:

![](fields.png){width=757}

### Tree

![](progress_text_tree.png){width=261}

## Style

Font color is the same as for [Empty state](empty_state.md) text.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Project

<link-summary>Introduction to projects and their structure. Retrieving and modifying project setup.</link-summary>

<tldr>

**Product Help:** [Configure projects](https://www.jetbrains.com/help/idea/working-with-projects.html)

</tldr>

> Everything in the IntelliJ Platform SDK is done within the context of a project.

The IntelliJ Platform stores the project configuration data in XML files.
The list of those files depends on the chosen [project format](https://www.jetbrains.com/help/idea/creating-and-managing-projects.html#project-formats):

<tabs>
<tab title="Directory-Based">

Project and workspace settings are stored in a number of XML files under the <path>\$project_home_directory\$/.idea</path> directory.
Each XML file is responsible for its own set of settings and can be recognized by its name: <path>projectCodeStyle.xml</path>, <path>encodings.xml</path>, <path>vcs.xml</path> etc.
As for the file-based format projects, <path>.iml</path> files describe modules.

</tab>

<tab title="File-Based (Legacy)">

For file-based format projects (legacy), the information core to the project itself (e.g., location of the component modules, compiler settings, etc.) is stored in the <path>\$project_name\$.ipr</path> file.
The information about modules the project includes is stored in <path>\$module_name\$.iml</path> files.
Module files are created for each module.

</tab>
</tabs>

Note that direct access to project files isn't required to load or save settings.
See [Persisting State of Components](persisting_state_of_components.md) for more information.

## Working with Projects

<snippet id="useWorkspaceModelAPI">

> The [](workspace_model.md) API is available since 2024.2 for use by third-party plugins and should be preferred over using the [Project Model](project_model.md) API.
>
> See [](workspace_model.md#interoperability) and [](workspace_model_usages.md).
>
{title="Workspace Model API (2024.2+)" style="note"}

</snippet>

To work with projects and project files, use the following classes and interfaces:

* [`Project`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/Project.java)
* [`ProjectRootManager`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ProjectRootManager.java)
* [`ProjectManager`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/project/ProjectManager.java)
* [`ProjectFileIndex`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ProjectFileIndex.java)

Other classes for working with the project model are located in the [`projectModel-api.openapi`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi) package.
Basic API classes and interfaces for the concepts of [`Project`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/Project.java), [`Module`](%gh-ic%/platform/core-api/src/com/intellij/openapi/module/Module.java) and [`Application`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/Application.java)  are placed in the [`core-api.openapi`](%gh-ic%/platform/core-api/src/com/intellij/openapi) package.

### How to get a `Project` instance?

A Project instance is available in multiple contexts:

| Context                          | API                                                                                                                                                                                                                                                      |
|----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [Action](basic_action_system.md) | <p>[`AnActionEvent.getProject()`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnActionEvent.java)</p><p>[`DataContext.getData(CommonDataKeys.PROJECT)`](%gh-ic%/platform/core-ui/src/openapi/actionSystem/DataContext.java)</p> |
| [Editor](editor_basics.md)       | [`Editor.getProject()`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/Editor.java)                                                                                                                                                      |
| [Module](module.md)              | [`Module.getProject()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/module/Module.java)                                                                                                                                                           |
| [PSI](psi.md)                    | [`PsiElement.getProject()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java)                                                                                                                                                              |
| [Tests](testing_plugins.md)      | [`IdeaProjectTestFixture.getProject()`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/fixtures/IdeaProjectTestFixture.java)                                                                                                              |

It is also possible to retrieve projects in generic contexts:
* Project from [`VirtualFile`](virtual_file.md):
  * [`ProjectLocator.guessProjectForFile(VirtualFile)`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/ProjectLocator.kt) - returns any project containing a given file.
  * [`ProjectLocator.getProjectsForFile(VirtualFile)`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/ProjectLocator.kt) - returns the list of projects that a given file is a part of.
* List of currently opened projects: [`ProjectManager.getOpenProjects()`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/project/ProjectManager.java)

### Getting a List of Source Roots for All Modules in a Project

Use the `ProjectRootManager.getContentSourceRoots()` method.
To clarify this, consider the following code snippet:

```java
String projectName = project.getName();
VirtualFile[] vFiles = ProjectRootManager.getInstance(project)
    .getContentSourceRoots();
String sourceRootsList = Arrays.stream(vFiles)
    .map(VirtualFile::getUrl)
    .collect(Collectors.joining("\n"));
Messages.showInfoMessage("Source roots for the " + projectName +
    " plugin:\n" + sourceRootsList, "Project Properties");
```

### Checking If a File Belongs to a Project

Use [`ProjectFileIndex`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ProjectFileIndex.java) to get this information:

```java
ProjectFileIndex projectFileIndex =
    ProjectRootManager.getInstance(project).getFileIndex();
```

### Getting the Content or Source Root to Which a File or Directory Belongs

Use the `ProjectFileIndex.getContentRootForFile()` and `ProjectFileIndex.getSourceRootForFile()` methods.
For example:

```java
VirtualFile moduleContentRoot = ProjectRootManager.getInstance(project)
    .getFileIndex().getContentRootForFile(virtualFileOrDirectory);
VirtualFile moduleSourceRoot = ProjectRootManager.getInstance(project)
    .getFileIndex().getSourceRootForFile(virtualFileOrDirectory);
```

Note that this method returns `null` if the file or directory does not belong to any source root of modules in the project.

### Checking Whether a File or Directory Is Related to the Project Libraries

The [`ProjectFileIndex`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ProjectFileIndex.java) interface implements a number of methods you can use to check whether the specified file belongs to the project library classes or library sources:
* `isLibraryClassFile()`: Returns `true` if the specified `virtualFile` is a compiled class file.
* `isInLibraryClasses()`: Returns `true` if the specified `virtualFileOrDirectory` belongs to library classes.
* `isInLibrarySource()`: Returns `true` if the specified `virtualFileOrDirectory` belongs to library sources.

### Getting the Project SDK

Note that by default, the project modules use the project SDK.
Optionally, you can configure an individual SDK for each module.
See [SDK](sdk.md) for more details.

## Changing the Project Structure

Utility classes used for modifying the project structure can be found in the package [`projectModel-impl.openapi`](%gh-ic%/platform/projectModel-impl/src/com/intellij/openapi).
Its [`roots`](%gh-ic%/platform/projectModel-impl/src/com/intellij/openapi/roots) subpackage contains instances and utilities intended for work with project and module source roots, including [`ModuleRootModificationUtil`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ModuleRootModificationUtil.java) and [`ProjectRootUtil`](%gh-ic%/platform/projectModel-impl/src/com/intellij/openapi/projectRoots/impl/ProjectRootUtil.java).
Project structure changes need to be performed in [write action](threading_model.md#write-actions).

Refer to the [project_model](%gh-sdk-samples-master%/project_model/src/main/java/org/intellij/sdk/project/model/ModificationAction.java) code sample to learn how project structure modification can be implemented.

## Receiving Notifications About Project Structure Changes

To receive notifications about changes in project structure (modules or libraries being added or removed, module dependencies being changed, and so on), use the [message bus](messaging_infrastructure.md) and the `ProjectTopics.PROJECT_ROOTS` topic:

```java
project.getMessageBus().connect().subscribe(
    ProjectTopics.PROJECT_ROOTS,
    new ModuleRootListener() {
      @Override
      public void rootsChanged(@NotNull ModuleRootEvent event) {
        // action
      }
    });
```

If targeting 2019.3 or later, [declarative registration](plugin_listeners.md) is available as well.

The event only notifies that something has changed; if more details are needed about what changes have occurred, keep a copy of the state of the project structure model which is relevant, and to compare it with the state after the change.

## Receiving Notification About Project Close/Open Events

Use [`ProjectManagerListener`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/project/ProjectManagerListener.java) [listener](plugin_listeners.md) or [project open activity](plugin_components.md#project-open).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Project Model

<link-summary>Introduction to project structure and components.</link-summary>

[//]: # (TODO: split into parts accordingly to the table of contents)

This topic considers the concept of projects based on the IntelliJ Platform and related subjects, such as modules, libraries, facets, and SDKs.

> The [](workspace_model.md) API is available since 2024.2 for use by third-party plugins and should be preferred over using the Project Model API.
> See [](workspace_model.md#interoperability) and [](workspace_model_usages.md).
>
> Since the 2020.3 release, related internal changes are included;
> see this [blog post](https://blog.jetbrains.com/platform/2020/10/new-implementation-of-project-model-interfaces-in-2020-3/) for details.
> This shouldn't affect any plugins using the Project Model API properly and which don't access internal classes.
>
{style="note" title="Workspace Model API (2024.2+)"}

## Project

<tldr>

**Reference**: [](project.md)

**Product Help**: [Projects](https://www.jetbrains.com/help/idea/creating-and-managing-projects.html)

</tldr>

A project encapsulates all of a project's source code, libraries, and build instructions into a single organizational unit.

> Everything in the IntelliJ Platform SDK is done within the context of a project.

A project defines collections referred to as [Modules](#module) and [Libraries](#library).
Depending on the project's logical and functional requirements, a _single-module_ or a _multi-module_ project can be created.

## Module

<tldr>

**Reference**: [](module.md)

**Product Help**: [Modules](https://www.jetbrains.com/help/idea/creating-and-managing-modules.html)

</tldr>

A module is a discrete unit of functionality that can be run, tested, and debugged independently.
Modules include such things as source code, build scripts, unit tests, deployment descriptors, etc.

In a project, each module can use a specific [Software Development Kit (SDK)](#sdk) or inherit the SDK defined at the project level.
A module can depend on other modules of the project.

## Library

<tldr>

**Reference**: [](library.md)

**Product Help**: [Libraries](https://www.jetbrains.com/help/idea/library.html)

</tldr>

A library is an archive of compiled code (such as JAR files) on which modules depend.
The IntelliJ Platform supports three types of libraries: Module, Project, and Global Libraries.

## SDK

<tldr>

**Reference**: [](sdk.md)

**Product Help**: [SDK](https://www.jetbrains.com/help/idea/sdk.html)

</tldr>

Every project uses a Software Development Kit (SDK).
For Java projects, SDK is referred to as JDK (Java Development Kit).

The SDK determines which API library is used to build the project.
For a multi-module project, the project SDK is common for all [modules](#module) within the project by default.
Optionally, a project can configure an individual SDK for each module.

## Facet

<tldr>

**Reference**: [](facet.md)

**Product Help**: [Facets](https://www.jetbrains.com/help/idea/facet-page.html)

</tldr>

A facet represents a certain configuration, specific for a particular framework or technology associated with a [module](#module).
A module can have multiple facets.

## Configuration

<tldr>

**Product Help**: [Project Structure](https://www.jetbrains.com/help/idea/project-settings-and-structure.html)

</tldr>

The user can configure all entities listed above in the <control>Project Structure</control> dialog.

Use [`ProjectSettingsService`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/roots/ui/configuration/ProjectSettingsService.java) to open related entries programmatically.
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Project View

<link-summary>Changing the project view nodes representation.</link-summary>

<tldr>

**Product Help:** [Project tool window](https://www.jetbrains.com/help/idea/project-tool-window.html)

</tldr>

* [](tree_structure_view.md)

## Decorating Project View Nodes

Plugin authors can modify the representation of nodes in the project view.
This is used to, e.g., change the icon of module nodes to reflect the module type or add URL and server path
to Python Jupyter directories as location strings.

To modify project view node representations, implement
[`ProjectViewNodeDecorator`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/projectView/ProjectViewNodeDecorator.java)
and register it as `com.intellij.projectViewNodeDecorator` extension.
From the interface only the `decorate()` method that modifies `ProjectViewNode`s needs to be implemented.
If you need to update your node representation on certain events, please use
[`ProjectView.refresh()`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/projectView/ProjectView.java).
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Project Wizard - Adding Support for Creating New Project Types

<link-summary>Implementing a custom project creation wizard.</link-summary>

## Project Wizard

Working with the project wizard can be illustrated with the [RedLine SmallTalk plugin](https://github.com/bulenkov/RedlineSmalltalk). See also [](intro_project_wizard.md).

## Implementing a New Module Type

Additional support for specific tools and technologies is usually done via implementing some certain module type which is attached to the project.
New module type should be derived from the class [`ModuleType`](%gh-ic%/platform/lang-core/src/com/intellij/openapi/module/ModuleType.java).

## Custom Project Wizard

Main utilities to configure a custom project wizard can be found in the package [`lang-api.ide.util.projectWizard`](%gh-ic%/platform/lang-api/src/com/intellij/ide/util/projectWizard).
These classes and interfaces serve the following purposes:

* Modification of the configuration wizard view
* Adding new steps to the wizard
* Providing additional setting for project creation
* Handling activities during project creation
* Initial environment configuration

### Module Type

To create a new module type add an extension

```xml
<moduleType
    id="MY_MODULE"
    implementationClass="st.redline.smalltalk.module.MyModuleType"/>
```

to the [`plugin.xml`](https://github.com/bulenkov/RedlineSmalltalk/blob/master/resources/META-INF/plugin.xml).
A custom module type should extend the [`ModuleType`](%gh-ic%/platform/lang-core/src/com/intellij/openapi/module/ModuleType.java) generic from [`ModuleBuilder`](%gh-ic%/platform/lang-core/src/com/intellij/ide/util/projectWizard/ModuleBuilder.java).
The following [module type implementation](https://github.com/bulenkov/RedlineSmalltalk/blob/master/src/st/redline/smalltalk/module/RsModuleType.java) of a custom module type shows how this instance can be registered and implemented.

### Implementing Module Builder

To set up a new module environment [`ModuleBuilder`](%gh-ic%/platform/lang-core/src/com/intellij/ide/util/projectWizard/ModuleBuilder.java) class should be extended and registered as an extension point like the following snippet shows:

```xml
<extensions defaultExtensionNs="com.intellij">
  <moduleBuilder
      builderClass="org.jetbrains.plugins.ruby.rails.facet.versions.MyModuleBuilder"/>
</extensions>
```

Functionality which is mandatory to implement consists of:

* Setting up a root model for the new module by overriding
  ```java
  public abstract void setupRootModel(
      ModifiableRootModel modifiableRootModel) throws ConfigurationException;
  ```
* Getting a module type
  ```java
  public abstract ModuleType getModuleType();
  ```

See [`JavaModuleBuilder`](%gh-ic%/java/openapi/src/com/intellij/ide/util/projectWizard/JavaModuleBuilder.java) to understand better how to implement a module builder.

If your module type is based on the Java module and meant to support Java as well, extending [`JavaModuleBuilder`](%gh-ic%/java/openapi/src/com/intellij/ide/util/projectWizard/JavaModuleBuilder.java) is enough.
No extension point needs to be registered.
Refer to [SmallTalk module type](https://github.com/bulenkov/RedlineSmalltalk/blob/master/src/st/redline/smalltalk/module/RsModuleType.java) to see how [`JavaModuleBuilder`](%gh-ic%/java/openapi/src/com/intellij/ide/util/projectWizard/JavaModuleBuilder.java) can be derived.

> Starting with the 2022.1 release, IntelliJ-based IDEs use the refreshed project wizard and some module builder base classes return `false` from `isAvailable()` when the new wizard is enabled.
> If your module builder is not visible in 2022.1, make sure that your `ModuleBuilder.isAvailable()` returns `true`.
>
{style="note"}

### Implementing Module Builder Listener

Module builder listener reacts on a new module creation, which could be done either as a part of the project creation process, or as adding a new module to the already existing project.
To provide a certain behavior right after a module has been created, module builder should implement [`ModuleBuilderListener.moduleCreated(Module)`](%gh-ic%/platform/lang-core/src/com/intellij/ide/util/projectWizard/ModuleBuilderListener.java).

Examples of the tasks executed right after a module has been created may include configuring module roots, looking up for an SDK and setting it up, adding a specific facet if required, etc.
For more details, please see the following [SmallTalk custom module type](https://github.com/bulenkov/RedlineSmalltalk/blob/master/src/st/redline/smalltalk/module/RsModuleType.java) implementation.

### Adding New Wizard Steps

Adding new steps to the module wizard can be done by overriding [`AbstractModuleBuilder.createWizardSteps(WizardContext, ModulesProvider)`](%gh-ic%/platform/lang-core/src/com/intellij/ide/util/projectWizard/AbstractModuleBuilder.java).
See an example [module builder](https://github.com/bulenkov/RedlineSmalltalk/blob/master/src/st/redline/smalltalk/module/RsModuleBuilder.java).
If this method returns a non-empty array of [`ModuleWizardStep`](%gh-ic%/platform/lang-core/src/com/intellij/ide/util/projectWizard/ModuleWizardStep.java) objects, new steps will be shown in their indexing order while creating a new module.
The following [implementation](https://github.com/bulenkov/RedlineSmalltalk/blob/master/src/st/redline/smalltalk/module/RsModuleWizardStep.java) for the SmallTalk project type illustrates how a custom wizard step can be created.
The [`RsModuleWizardStep`](https://github.com/bulenkov/RedlineSmalltalk/blob/master/src/st/redline/smalltalk/module/RsModuleWizardStep.java) class is derived from `ModuleWizardStep`, which has two methods to be overridden:

* ```java
  public JComponent getComponent();
  ```
  defines how the step will look like
* ```java
  public void updateDataModel();
  ```
  commits data from UI into `ModuleBuilder` and `WizardContext`

## Facet

Facets in IntelliJ are the way to store multiple kinds of module-specific settings, for instance to make a language support or framework available in some given module.
To understand facets better from the end-user's point of view, see the [Facet](facet.md) documentation section.

## Implementing Project Structure Detector

To support the creation of your module when a project is imported from existing sources, extend [`ProjectStructureDetector`](%gh-ic%/java/idea-ui/src/com/intellij/ide/util/projectWizard/importSources/ProjectStructureDetector.java).
To detect the files your module supports, implement `ProjectStructureDetector.detectRoots()`.

Refer to the [Smalltalk project structure detector](https://github.com/bulenkov/RedlineSmalltalk/blob/master/src/st/redline/smalltalk/module/RsProjectStructureDetector.java) to see example implementation.

But detecting the files is not enough, you also need to create a module for the project if appropriate by implementing `setupProjectStructure()`.
Here is an example that creates a module if no other modules exist in the project structure.

```java
@Override
public void setupProjectStructure(@NotNull Collection<DetectedProjectRoot> roots,
                                  @NotNull ProjectDescriptor projectDescriptor,
                                  @NotNull ProjectFromSourcesBuilder builder) {
  List<ModuleDescriptor> modules = projectDescriptor.getModules();
  if (modules.isEmpty()) {
    modules = new ArrayList<>();
    for (DetectedProjectRoot root : roots) {
      modules.add(new ModuleDescriptor(root.getDirectory(),
          MyModuleType.getInstance(), ContainerUtil.emptyList()));
    }
    projectDescriptor.setModules(modules);
  }
}
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Providing File and Code Templates

<link-summary>Creating file templates and assigning them to categories.</link-summary>

The IntelliJ Platform allows plugins to provide custom file templates specific to the plugin's functionalities.
In order to include custom templates in the plugin, a template file has to be created and placed in the specific place of plugin resources, depending on the template's purpose.

## Creating File Templates

There are multiple ways of creating file templates:
* [Use "File | Save File as Template…" action](https://www.jetbrains.com/help/idea/using-file-and-code-templates.html#save-file-as-template)
* [Create a new file template](https://www.jetbrains.com/help/idea/using-file-and-code-templates.html#create-new-template)
* [Copy an existing file template](https://www.jetbrains.com/help/idea/using-file-and-code-templates.html#copy-existing-template)

Once the file templates are created and saved, they should be copied to the plugin project's <path>resources</path> directory.
The created template can be found in the [IDE configuration directory](https://www.jetbrains.com/help/idea/directories-used-by-the-ide-to-store-settings-caches-plugins-and-logs.html#config-directory) in the <path>fileTemplates</path> directory, or they can be exported via <ui-path>File | Manage IDE Settings | Export Settings</ui-path> by selecting the <control>File Templates (schemes)</control> checkbox.
The exported ZIP file will contain the <path>fileTemplates</path> directory with the created templates.
The <path>fileTemplates</path> directory should be moved to the plugin project's <path>resources</path> folder, and the <path>.ft</path> extension must be added to the template files, e.g., <path>My Class.java</path> must be renamed to <path>My Class.java.ft</path>.

The template name and extension displayed in the IDE settings will automatically be extracted from the file name.
The <control>Enable Live Templates</control> option will be enabled if the template's content includes a `#[[$` fragment.
Note that [live templates](live_templates.md) expressions should be surrounded with `#[[` and `]]#` tokens to avoid being parsed by the Apache Velocity template engine.

> Please note that adding templates with child/multiple files in custom plugins is currently not supported.
>
{style="note"}

### File Templates Categories

File templates can be assigned to one of the predefined categories depending on their purpose and type.

#### Files

The <control>Files</control> category contains templates used for creating new files.
This is the main category, and it includes all templates placed directly in the <path>fileTemplates</path> directory.
It should contain only templates for given language core entities, e.g., a class, an interface, or other items that users very frequently create.
If the language defines a lot of core entities, see [](using_file_templates.md#custom-create-file-from-template-actions) for a more user-friendly solution.

#### Includes

The <control>Includes</control> category contains reusable fragments used for including in other file templates using the Apache Velocity `#parse()` directive, e.g., license header or documentation comment skeleton.
It includes templates located in the <path>fileTemplates/includes</path> directory.

#### Code

The <control>Code</control> category contains templates used for inserting in existing files, e.g., a code fragment used in an [intention action](code_intentions.md) or [quick fix](code_inspections.md#quick-fix-implementation).
It includes templates located in the <path>fileTemplates/code</path> directory.

#### Internal

The <control>Internal</control> category contains templates that are not visible in the IDE settings by default and cannot be edited by users.
It includes templates located in the <path>fileTemplates/internal</path> directory.

#### Other

The <control>Other</control> category contains other templates organized in groups.
It includes templates located in the <path>fileTemplates/j2ee</path> directory and registered via the `com.intellij.fileTemplateGroup` extension point (EP).
Note that the <path>j2ee</path> directory name is historical and unrelated to the J2EE technology.
This category is intended for templates that are not used for creating core language entities or are used less frequently by users, e.g., a specific XML configuration file, a framework-specific class in Java language, etc.
To include file templates in the <control>Other</control> section of the <ui-path>Settings | Editor | File and Code Templates</ui-path> settings page, provide an implementation of the
[`FileTemplateGroupDescriptorFactory`](%gh-ic%/platform/lang-api/src/com/intellij/ide/fileTemplates/FileTemplateGroupDescriptorFactory.java)
and register it via the `com.intellij.fileTemplateGroup` EP.

**Example:**
[`MavenFileTemplateGroupFactory`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/utils/MavenFileTemplateGroupFactory.java)

Note that
[`FileTemplateGroupDescriptor`](%gh-ic%/platform/lang-api/src/com/intellij/ide/fileTemplates/FileTemplateGroupDescriptor.java)
is a subclass of
[`FileTemplateDescriptor`](%gh-ic%/platform/core-api/src/com/intellij/ide/fileTemplates/FileTemplateDescriptor.java),
which allows creating nested groups.

## Creating File Template Description

By default, the description contains generic text about the syntax and properties of the given template.
It is highly recommended to provide a custom description explaining its purpose and any available properties.
Overriding the default description is achieved by creating an HTML file with the name matching template's name but with the <path>.html</path> extension.
Example:
* Template file name: <path>My Class.java.ft</path>
* Description file name: <path>My Class.java.html</path>

The description file must be located in the same directory as the template file.
It is recommended to follow the convention from the
[`default.html`](%gh-ic%/platform/platform-resources-en/src/fileTemplates/default.html)
file.

> If a plugin project is multi-module, and it combines resources into a single JAR, make sure that all template description files have unique names or paths.
> Otherwise, only the last packed description file will exist in the distribution package.
>
{style="warning"}

> See the [](providing_translations.md#bundled-translations) section for information about how to provide file template description translations in plugins.

## Providing Default File Template Properties

A file template body can use a set of [predefined properties](https://www.jetbrains.com/help/idea/file-template-variables.html#predefined_template_variables) exposed by the IntelliJ Platform out of the box.
Some languages or frameworks may require additional properties exposed to existing templates.
To provide custom properties, implement
[`DefaultTemplatePropertiesProvider`](%gh-ic%/platform/lang-api/src/com/intellij/ide/fileTemplates/DefaultTemplatePropertiesProvider.java)
and register it via the `com.intellij.defaultTemplatePropertiesProvider` EP.

**Example:** Java Plugin's
[`TemplatePackagePropertyProvider`](%gh-ic%/java/java-impl/src/com/intellij/ide/fileTemplates/TemplatePackagePropertyProvider.java)
providing `PACKAGE_NAME` property based on the directory a file is created in.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Providing Live Templates

<link-summary>Adding custom Live Templates.</link-summary>

This tutorial illustrates how to add default Custom Live Templates to an IntelliJ Platform plugin, and assign valid contexts for these templates based on the surrounding code and file type.
In addition, the tutorial discusses how to export existing Live Templates, and bundle them within a plugin.
Any Live Template that can be created and exported can be added to a plugin by following the Template Creation, Export, and Extension Point Registration processes.

This tutorial uses the SDK code sample [`live_templates`](%gh-sdk-samples-master%/live_templates).

## Template Creation

Get started by [creating a new Live Template](https://www.jetbrains.com/idea/help/creating-and-editing-live-templates.html) within the IntelliJ Platform-based IDE:
* Add a new Template Group, "Markdown" and create a new Live Template under this group.
* Assign the template the abbreviation "**{**".
* Assign the description "**SDK: New link reference**".
* Paste the following snippet into the <control>Template text</control> field:

```text
[$TEXT$]($LINK$)$END$
```

The variables `$TEXT$` and `$LINK$` may be further configured in the <control>Edit variables</control> dialogue to reorder their precedence and bind to the functions that invoke auto-completion at the appropriate time.
In the <control>Edit variables</control> dialog, set the <control>Expression</control> for the `LINK` to `complete()` using the combo box.

There are many [predefined functions](https://www.jetbrains.com/help/idea/template-variables.html#predefined_functions) that developers should become familiar with before implementing any unique functionality in a plugin.

> Consider iteratively testing the Live Template using the current editor and a markdown file to minimize debugging later.
>

## Export the Live Template

Once the Live Template produces the expected result, [export the Live Template](https://www.jetbrains.com/help/idea/sharing-live-templates.html).
The export produces a file called <path>Markdown.xml</path> with the following contents:

> See [](live_templates_configuration_file.md) for a detailed description of the templates XML file structure and elements.
>
{style="note"}

```xml
<templateSet group="Markdown">
  <template
      name="{"
      value="[$TEXT$]($LINK$)$END$"
      description="SDK: New link reference"
      toReformat="false"
      toShortenFQNames="false">
    <variable
        name="TEXT"
        expression=""
        defaultValue=""
        alwaysStopAt="true"/>
    <variable
        name="LINK"
        expression="complete()"
        defaultValue=""
        alwaysStopAt="true"/>
  </template>
</templateSet>
```

> To [localize](providing_translations.md) the description, instead of the `description` attribute, use `key` and `resource-bundle` attributes pointing to a key in a [message bundle](internationalization.md#message-bundles) (code insight is available in 2020.3 and later).
> A quick fix to extract the localized key is available since 2024.2.

Copy this file into the [plugin's resources folder](%gh-sdk-samples-master%/live_templates/src/main/resources/liveTemplates).

## Implement `TemplateContextType`

A [`TemplateContextType`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/template/TemplateContextType.java) tells the IntelliJ Platform where the Live Template is applicable: Markdown files.
Every context must have a unique `TemplateContextType` defined for it, and the Platform defines many context types out of the box.
The `MarkdownContext` class defines it for Markdown files.
Ultimately, a file's extension determines the applicable Markdown context.

```java
```
{src="live_templates/src/main/java/org/intellij/sdk/liveTemplates/MarkdownContext.java" include-symbol="MarkdownContext"}

> Once the `MarkdownContext` is defined, be sure to add the new context type to the previously created Live Template settings file.
>
{style="note"}

Within the `<template>...</template>` elements in the <path>Markdown.xml</path> [Live Template definition file](#export-the-live-template), add the following context elements:

```xml
<template>
  <variable ... />
  <context>
    <option name="MARKDOWN" value="true"/>
  </context>
</template>
```

It is not always necessary to define your own `TemplateContextType`, as there are many existing template contexts already defined in the IntelliJ Platform.
Consider reusing one of the many existing template context types that inherit from `TemplateContextType` if you are augmenting language support to an existing area.

## Completing the Live Template Implementation

Depending on the version of the IntelliJ Platform, different steps are used to complete the implementation of the feature.

<tabs>

<tab title="2022.3 and later">

Using the `com.intellij.defaultLiveTemplates` and `com.intellij.liveTemplateContext` extension points, register the implementations with the IntelliJ Platform.
The `file` attribute in `com.intellij.defaultLiveTemplates` EP specifies `path/filename` under the <path>src/main/resources</path> folder.

Specify required `contextId` attribute in `com.intellij.liveTemplateContext` EP instead of [`TemplateContextType`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/template/TemplateContextType.java) constructor (existing declarations will continue working).

```xml
<extensions defaultExtensionNs="com.intellij">
  <defaultLiveTemplates file="/liveTemplates/Markdown.xml"/>
  <liveTemplateContext
          contextId="MARKDOWN"
          implementation="org.intellij.sdk.liveTemplates.MarkdownContext"/>
</extensions>
```

</tab>

<tab title="Versions since 2020.1 till 2022.3">

Using the `com.intellij.defaultLiveTemplates` and `com.intellij.liveTemplateContext` extension points, register the implementations with the IntelliJ Platform.
The `file` attribute in the `com.intellij.defaultLiveTemplates` EP specifies `path/filename` under the <path>src/main/resources</path> folder.

```xml
<extensions defaultExtensionNs="com.intellij">
  <defaultLiveTemplates file="/liveTemplates/Markdown.xml"/>
  <liveTemplateContext
      implementation="org.intellij.sdk.liveTemplates.MarkdownContext"/>
</extensions>
```

</tab>

<tab title="Versions 2019.3 and Earlier">

The `MarkdownTemplateProvider` implementing [`DefaultLiveTemplatesProvider`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/template/impl/DefaultLiveTemplatesProvider.java) tells the Platform where to find the Live Template settings file.
Make sure to include the full path to the file, relative to the <path>src/main/resources</path> directory, excluding the file extension.

```java
package org.intellij.sdk.liveTemplates;

import com.intellij.codeInsight.template.impl.DefaultLiveTemplatesProvider;
import org.jetbrains.annotations.Nullable;

final class MarkdownTemplateProvider implements DefaultLiveTemplatesProvider {
  @Override
  public String[] getDefaultLiveTemplateFiles() {
    return new String[]{"liveTemplates/Markdown"};
  }

  @Nullable
  @Override
  public String[] getHiddenLiveTemplateFiles() {
    return null;
  }
}
```

Using the `com.intellij.defaultLiveTemplatesProvider` and `com.intellij.liveTemplateContext` extension points, register the implementations with the IntelliJ Platform.

```xml
<extensions defaultExtensionNs="com.intellij">
  <defaultLiveTemplatesProvider
      implementation="org.intellij.sdk.liveTemplates.MarkdownTemplateProvider"/>
  <liveTemplateContext
      implementation="org.intellij.sdk.liveTemplates.MarkdownContext"/>
</extensions>
```

</tab>
</tabs>

## Check Plugin

Now verify the plugin is working correctly.
Run the plugin in a Development Instance and verify there is a new entry under <ui-path>Settings | Live Templates | Markdown | \{ (SDK: New link reference)</ui-path>.

Finally, create a new file <path>test.md</path> and confirm that the Live Template works by entering a <shortcut>{</shortcut> character and then pressing <shortcut>Tab</shortcut>.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Providing Translations

<link-summary>Translating IDE and plugin texts used in UI, inspections, file templates, and other elements</link-summary>

Translations for IntelliJ Platform products and plugins can be provided in two ways:
- [](#language-packs)
- [](#bundled-translations)

<video src="https://www.youtube.com/watch?v=36BPMPBFCG4"/>

_This talk covers how to implement localization in JetBrains plugins.
While JetBrains IDEs are available in Simplified Chinese, Japanese, and Korean, most plugins remain English-only.
Joachim demonstrates how to easily localize different plugin elements like messages, settings, inspections, and file templates.
The session also provides tips on localizing plugin descriptions for Marketplace, websites, or handbooks._

## Language Packs

Localizing IDEs is achieved by providing language packs (see [language packs](https://plugins.jetbrains.com/search?tags=Language%20Pack) provided by JetBrains).
Language packs are IntelliJ Platform plugins containing translations of UI texts.
Official language packs contain translations of all the UI texts used in the IDE and in plugins developed by JetBrains.

Note that language packs aim for full IDE localization.
If it is required to translate a plugin, see the [](#bundled-translations) section.

Language packs must define their language.
The language definition is provided in the [`plugin.xml`](plugin_configuration_file.md) file with `com.intellij.languageBundle` extension point (EP), for example:
```xml
<extensions defaultExtensionNs="com.intellij">
  <languageBundle locale="zh-CN"/>
</extensions>
```

The `locale` attribute defines the translation language on two possible levels:
- region level, for example: `zh-CN` – Chinese (Simplified), `zh-TW` – Chinese (Taiwan)
- language level, for example, `ja` – Japanese

> Note that `com.intellij.languageBundle` EP is internal and must be used by JetBrains only.
>
{style="warning"}

### Language Selection

<tabs>
<tab title="2024.2+">

In versions 2024.2 and newer language packs are bundled in IDE distributions.
To select the IDE language, follow the instruction from the [IntelliJ IDEA Web Help](https://www.jetbrains.com/help/idea/language-and-region.html#language).

</tab>
<tab title="Pre-2024.2">

In versions 2024.1 and older, there is no language selector in the IDE, and language packs serve as the IDE "language switcher."
Installing a language pack changes the IDE language to the one defined by the `languageBundle` EP.
Only a single language pack can be installed at the same time, and restart is required for the translations to take effect.

</tab>
</tabs>

### Getting the Current Locale Programmatically

To get a current UI language set in the IDE, use [`DynamicBundle.getLocale()`](%gh-ic%/platform/core-api/src/com/intellij/DynamicBundle.java).

### Language Pack Translations Structure

See the [translated elements](#translated-elements) list for the elements possible to translate.
All the elements should be located in exactly the same paths as in original locations in their JAR files.

For example, if the original location of a message bundle is <path>\$PLUGIN_JAR\$/messages/AbcBundle.properties</path>, it must be located in <path>\$LANGUAGE_PACK_JAR\$/messages/AbcBundle.properties</path>.

In case of doubts, it is recommended to inspect the contents of existing language packs.

## Bundled Translations

<primary-label ref="2024.1"/>

> Note that bundled translations are in the experimental state.
>
{style="warning"}

The IntelliJ Platform partially supports providing translations directly bundled in the IDE or plugins.
See the [translated elements](#translated-elements) list for the elements possible to translate.

An IDE module or a plugin can provide multiple language translations in a single distribution, for example, `zh-CN` and `ja`.
Proper localization files will be used at runtime depending on the [IDE language](#language-selection).

### Bundled Translations Structure

Translations for a specific language can be organized in two ways as shown below.
The proper directory layout/filename suffixes is the only thing needed for the translations to work.
No additional actions like registering EPs are needed.

#### Language Directory

Translated resources are stored in a dedicated directory structure.

<path>/localization/\$LANGUAGE_CODE\$/\$REGION_CODE\$</path> (`$REGION_CODE$` level is optional).

Example:
  - Original template description:

    <path>/fileTemplates/code/JavaDoc Class.java.html</path>
  - Translated template description: <path></path>

    <path>/localization/zh/CN/fileTemplates/code/JavaDoc Class.java.html</path>

#### Localization Suffix in Filename

Translated resources are stored in files with dedicated filename.

<path>/intentionDescriptions/QuickEditAction/description_\$LANGUAGE_CODE\$_\$REGION_CODE\$.html</path>

Example:
  - Original template description:

    <path>/intentionDescriptions/QuickEditAction/description.html</path>
  - Translated template description: <path></path>

    <path>/intentionDescriptions/QuickEditAction/description_zh_CN.html</path>

## Translated Elements

The following table contains the possible translated elements and information about their support in language packs and IDE/plugins.

| Element                                                                                                                                                                     | Language Pack | Bundled Translations                                                                     |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|------------------------------------------------------------------------------------------|
| [Message bundles](internationalization.md#message-bundles)<p>(<path>*.properties</path> files)</p>                                                                          | Yes           | Since 2024.1<p>_Use [`DynamicBundle`](internationalization.md#message-bundle-class)_</p> |
| [Inspection descriptions](code_inspections.md#inspection-description)<p>(<path>*.html</path> files in <path>/inspectionDescriptions</path> directory)</p>                   | Yes           | Since 2024.1                                                                             |
| [Intention descriptions](code_intentions.md#about-intention-actions)<p>(<path>*.html</path> files in <path>/intentionDescriptions</path> directory)</p>                     | Yes           | Since 2024.1                                                                             |
| [File template descriptions](providing_file_templates.md#creating-file-template-description)<p>(<path>*.html</path> files in the <path>/fileTemplates</path> directory)</p> | Yes           | Since 2024.2                                                                             |
| [Postfix template descriptions](postfix_templates.md#postfix-template-description)<p>(<path>*.xml</path> file in <path>/postfixTemplates</path> directory)</p>              | Yes           | Since 2024.2                                                                             |
| Tips of the day<p>(<path>*.html</path> files in <path>tips</path> directory)</p>                                                                                            | Yes           | Since 2024.2                                                                             |

See the [IntelliJ Platform UI Guidelines | Text](capitalization.md) sections for good practices about writing UI texts.

## Translation Lookup Order

Translations can be provided on three different levels:
- region-specific translation
- language-specific translation
- default translation (English)

In addition, translations can be [organized in directories or with file suffixes](#bundled-translations-structure), and the same translation can be provided by a [language pack](#language-packs) or [IDE/plugin](#bundled-translations).

All these conditions determine how a single translation is resolved at runtime.
The lookup order is as follows:

1. Translation file from the language pack.
2. Region level (for example, `zh_CN`, `zh_TW`) localization file:
    1. located within the <path>localization</path> directory of the IDE or plugin
    2. via suffix within the IDE or plugin

    {type="alpha-lower"}
3. Language level (for example, `zh`) localization file:
    1. located within the <path>localization</path> directory of the IDE or plugin
    2. via suffix within the IDE or plugin

   {type="alpha-lower"}
4. Default file (no suffix) within the IDE or plugin (original English message).

   {type="alpha-lower"}

### Example

Assume that the current IDE language is set to Simplified Chinese (`zh_CN`).
To find an example <path>messages/MyBundle.properties</path> message bundle for this language, the locations will be searched in the following order:
1. <path>messages/MyBundle.properties</path> (in the selected language pack plugin)
2. <path>localization/zh/CN/messages/MyBundle.properties</path> (region level)
3. <path>messages/MyBundle_zh_CN.properties</path> (region level)
4. <path>localization/zh/messages/MyBundle.properties</path> (language level)
5. <path>messages/MyBundle_zh.properties</path> (language level)
6. <path>messages/MyBundle.properties</path> (default)

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Program Structure Interface (PSI)

<link-summary>Introduction to Program Structure Interface (PSI) responsible for parsing and creating the syntactic and semantic code model.</link-summary>

The Program Structure Interface, commonly referred to as PSI, is the layer in the IntelliJ Platform responsible for parsing files and creating the syntactic and semantic code model that powers so many of the platform's features.

* [PSI Files](psi_files.md)
* [File View Providers](file_view_providers.md)
* [PSI Elements](psi_elements.md)

> See [useful tools](explore_api.md#internalMode) on how to inspect the PSI structure and its properties.
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# PSI Cookbook

<link-summary rel="excerpt"/>
<p id="excerpt">
This page gives recipes for the most common operations for working with the PSI (Program Structure Interface).
</p>

Unlike [Developing Custom Language Plugins](custom_language_support.md), it is about working with the PSI of existing languages (such as Java).

> See also the [](psi_performance.md) section.
>

## General

### How do I find a file if I know its name but don't know the path?

[`FilenameIndex.getFilesByName()`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/FilenameIndex.java)

### How do I find where a particular PSI element is used?

[`ReferencesSearch.search()`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/searches/ReferencesSearch.java)

### How do I rename a PSI element?

[`RefactoringFactory.createRename()`](%gh-ic%/platform/lang-api/src/com/intellij/refactoring/RefactoringFactory.java)

### How can I cause the PSI for a virtual file to be rebuilt?

[`FileContentUtil.reparseFiles()`](%gh-ic%/platform/analysis-api/src/com/intellij/util/FileContentUtil.java)

## Java Specific

> If your plugin depends on Java functionality and targets 2019.2 or later, see [](plugin_compatibility.md#java).
> Also consider using [UAST](uast.md) if your plugin supports other JVM languages.
>
{style="note"}

### How do I find all inheritors of a class?

[`ClassInheritorsSearch.search()`](%gh-ic%/java/java-indexing-api/src/com/intellij/psi/search/searches/ClassInheritorsSearch.java)

### How do I find a class by qualified name?

[`JavaPsiFacade.findClass()`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/JavaPsiFacade.java)

### How do I find a class by short name?

[`PsiShortNamesCache.getClassesByName()`](%gh-ic%/java/java-indexing-api/src/com/intellij/psi/search/PsiShortNamesCache.java)

### How do I find a superclass of a Java class?

[`PsiClass.getSuperClass()`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/PsiClass.java)

### How do I get a reference to the containing package of a Java class?

```java
PsiJavaFile javaFile = (PsiJavaFile) psiClass.getContainingFile();
PsiPackage psiPackage = JavaPsiFacade.getInstance(project)
    .findPackage(javaFile.getPackageName());
```

or

[`PsiUtil.getPackageName()`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/util/PsiUtil.java)

### How do I find the methods overriding a specific method?

[`OverridingMethodsSearch.search()`](%gh-ic%/java/java-indexing-api/src/com/intellij/psi/search/searches/OverridingMethodsSearch.java)

### How do I check the presence of a JVM library?
<primary-label ref="2023.2"/>

Use dedicated (and heavily cached) methods from [`JavaLibraryUtil`](%gh-ic%/java/openapi/src/com/intellij/java/library/JavaLibraryUtil.java):

- `hasLibraryClass()` to check presence via known library class FQN
- `hasLibraryJar()` using Maven coordinates (for example, `io.micronaut:micronaut-core`).
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# PSI Elements

<link-summary>Introduction to PSI elements.</link-summary>

A PSI (Program Structure Interface) file represents a hierarchy of PSI elements (so-called _PSI trees_).
A single [PSI file](psi_files.md) (itself being a PSI element) may expose several PSI trees in specific programming languages (see [](file_view_providers.md)).
A PSI element, in its turn, can have child PSI elements.

PSI elements and operations at the level of individual PSI elements are used to explore the source code's internal structure as it is interpreted by the IntelliJ Platform.
For example, you can use PSI elements to perform code analysis, such as [code inspections](https://www.jetbrains.com/help/idea/code-inspection.html) or [intention actions](https://www.jetbrains.com/idea/help/intention-actions.html).

The [`PsiElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java) class is the common base class for PSI elements.

## How do I get a PSI element?

| Context                          | API                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [Action](basic_action_system.md) | <p>[`AnActionEvent.getData(CommonDataKeys.PSI_ELEMENT)`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnActionEvent.java)</p><p>Note: If an editor is currently open and the element under caret is a [reference](psi_references.md), this will return the result of resolving the reference.</p>                                                                          |
| [PSI File](psi_files.md)         | <p>[`PsiFile.findElementAt(offset)`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiFile.java) - This returns a leaf element at the specified offset, normally a lexer token. Use `PsiTreeUtil.getParentOfType()` to find the element of the exact type.</p><p>[`PsiRecursiveElementWalkingVisitor`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiRecursiveElementWalkingVisitor.java)</p> |
| [Reference](psi_references.md)   | [`PsiReference.resolve()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReference.java)                                                                                                                                                                                                                                                                                                       |

## What can I do with PSI elements?

See [](psi_cookbook.md) and [](modifying_psi.md).
# PSI Files

<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<link-summary>PSI File represents file content as a hierarchy of elements in a particular programming language.</link-summary>

A PSI (Program Structure Interface) file is the root of a structure representing a file's contents as a hierarchy of elements in a particular programming language.

The [`PsiFile`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiFile.java) class is the common base class for all PSI files, while files in a specific language are usually represented by its subclasses.  For example, the [`PsiJavaFile`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/PsiJavaFile.java) class represents a Java file, and the [`XmlFile`](%gh-ic%/xml/xml-psi-api/src/com/intellij/psi/xml/XmlFile.java) class represents an XML file.

Unlike [](virtual_file.md) and [](documents.md), which have application scope (even if multiple projects are open, each file is represented by the same
[`VirtualFile`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFile.java) instance), PSI has [](project.md) scope:
the same file is represented by multiple `PsiFile` instances if the file belongs to multiple projects open at the same time.

## How do I get a PSI file?

| Context                          | API                                                                                                                                                                                                                                                                                                                                    |
|----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [Action](basic_action_system.md) | [`AnActionEvent.getData(CommonDataKeys.PSI_FILE)`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnActionEvent.java)                                                                                                                                                                                            |
| [Document](documents.md)         | [`PsiDocumentManager.getPsiFile()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiDocumentManager.java)                                                                                                                                                                                                                            |
| [PSI Element](psi_elements.md)   | [`PsiElement.getContainingFile()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java) (may return `null` if the PSI element is not contained in a file)                                                                                                                                                                   |
| [Virtual File](virtual_file.md)  | [`PsiManager.findFile()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiManager.java), [`PsiUtilCore.toPsiFiles()`](%gh-ic%/platform/core-api/src/com/intellij/psi/util/PsiUtilCore.java)                                                                                                                                          |
| File Name                        | [`FilenameIndex.getVirtualFilesByName()`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/FilenameIndex.java) and locate via [`PsiManager.findFile()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiManager.java) or [`PsiUtilCore.toPsiFiles()`](%gh-ic%/platform/core-api/src/com/intellij/psi/util/PsiUtilCore.java) |

## What can I do with a PSI file?

Most interesting modification operations are performed on the level of individual PSI elements, not files as a whole.

To iterate over the elements in a file, use

```java
psiFile.accept(new PsiRecursiveElementWalkingVisitor() {
  // visitor implementation ...
});
```

See also [](navigating_psi.md).

## Where does a PSI file come from?

As PSI is language-dependent, PSI files are created using the [`Language`](%gh-ic%/platform/core-api/src/com/intellij/lang/Language.java) instance:

```java
LanguageParserDefinitions.INSTANCE
    .forLanguage(MyLanguage.INSTANCE)
    .createFile(fileViewProvider);
```

Like [](documents.md), PSI files are created on-demand when the PSI is accessed for a particular file.

## How long do PSI files persist?

Like [](documents.md), PSI files are weakly referenced from the corresponding `VirtualFile` instances and can be garbage-collected if not referenced by anyone.

## How do I create a PSI file?

[`PsiFileFactory.createFileFromText()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiFileFactory.java) creates an in-memory PSI file with the specified contents.

To save the PSI file to disk, use its parent directory's [`PsiDirectory.add()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiDirectory.java).

## How do I get notified when PSI files change?

`PsiManager.addPsiTreeChangeListener()` allows you to receive notifications about all changes to the PSI tree of a project.
Alternatively, register [`PsiTreeChangeListener`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiTreeChangeListener.java) in `com.intellij.psi.treeChangeListener` extension point.

> Please see [`PsiTreeChangeEvent`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiTreeChangeEvent.java) Javadoc for common problems when dealing with PSI events.
>
{style="note"}

## How do I extend PSI?

PSI can be extended to support additional languages through custom language plugins.
For more details on developing custom language plugins, see the [](custom_language_support.md) reference guide.

## What are the rules for working with PSI?

Any changes done to the content of PSI files are reflected in documents, so all [rules for working with documents](documents.md#what-are-the-rules-of-working-with-documents) (read/write actions, commands, read-only status handling) are in effect.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 6. PSI Helpers and Utilities

<link-summary>Extending the Simple language PSI classes with the utility and helper methods.</link-summary>

<tldr>

**Code**: [`SimplePsiImplUtil`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/impl/SimplePsiImplUtil.java),[`SimpleUtil`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleUtil.java)

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

Helper classes and utilities can be embedded in the code generated by Grammar-Kit.

> Note that due to the [lack of support for two-pass generation](https://github.com/JetBrains/gradle-grammar-kit-plugin/issues/3), extending PSI elements with methods via utils is not supported in [Gradle Grammar-Kit Plugin](tools_gradle_grammar_kit_plugin.md).
>
{style="warning"}

## Define Helper Methods for Generated PSI Elements

Custom methods in [PSI](psi.md) classes are defined separately, and Grammar-Kit embeds them into generated code.
Define a utility class with these helper methods:

```java
package org.intellij.sdk.language.psi.impl;

import com.intellij.lang.ASTNode;
import org.intellij.sdk.language.psi.SimpleProperty;
import org.intellij.sdk.language.psi.SimpleTypes;

public class SimplePsiImplUtil {

  public static String getKey(SimpleProperty element) {
    ASTNode keyNode = element.getNode().findChildByType(SimpleTypes.KEY);
    if (keyNode != null) {
      // IMPORTANT: Convert embedded escaped spaces to simple spaces
      return keyNode.getText().replaceAll("\\\\ ", " ");
    } else {
      return null;
    }
  }

  public static String getValue(SimpleProperty element) {
    ASTNode valueNode = element.getNode().findChildByType(SimpleTypes.VALUE);
    if (valueNode != null) {
      return valueNode.getText();
    } else {
      return null;
    }
  }

}
```

The parser generates the `SimpleProperty` interface referenced in the code above.

## Update Grammar and Regenerate the Parser

Now the utility class is added to the grammar file via the `psiImplUtilClass` global attribute.
Add the `methods` attribute for a particular rule to specify which one should be used for PSI classes.

Compare the `property` rule below to the [previous definition](grammar_and_parser.md#define-the-grammar).

```bnf
{
  parserClass="org.intellij.sdk.language.parser.SimpleParser"

  extends="com.intellij.extapi.psi.ASTWrapperPsiElement"

  psiClassPrefix="Simple"
  psiImplClassSuffix="Impl"
  psiPackage="org.intellij.sdk.language.psi"
  psiImplPackage="org.intellij.sdk.language.psi.impl"

  elementTypeHolderClass="org.intellij.sdk.language.psi.SimpleTypes"
  elementTypeClass="org.intellij.sdk.language.psi.SimpleElementType"
  tokenTypeClass="org.intellij.sdk.language.psi.SimpleTokenType"

  psiImplUtilClass="org.intellij.sdk.language.psi.impl.SimplePsiImplUtil"
}

simpleFile ::= item_*

private item_ ::= (property|COMMENT|CRLF)

property ::= (KEY? SEPARATOR VALUE?) | KEY
{
  methods=[getKey getValue]
}
```

After including the above changes in the grammar, [regenerate](grammar_and_parser.md#generate-a-parser) the parser and PSI classes.

## Define a Utility to Search Properties

Create [`SimpleUtil`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleUtil.java) utility class to search PSI elements for defined properties over the project.
It will be used later when implementing [code completion](completion_contributor.md).

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleUtil.java" include-symbol="SimpleUtil"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# PSI Performance

<link-summary>Performance tips on working with PSI.</link-summary>

See also [](threading_model.md#avoiding-ui-freezes) and [](indexing_and_psi_stubs.md#improving-indexing-performance).

> [IDE Perf](https://plugins.jetbrains.com/plugin/15104-ide-perf) plugin provides on-the-fly performance diagnostic tools, including a dedicated view for [`CachedValue`](#cache-results-of-heavy-computations) metrics.

## Avoid Expensive Methods of `PsiElement`

Avoid `PsiElement`'s methods which are expensive with deep trees.

`getText()` traverses the whole tree under the given element and concatenates strings, consider using `textMatches()` instead.

`getTextRange()`, `getContainingFile()`, and `getProject()` traverse the tree up to the file, which can be long in very nested trees.
If you only need PSI element length, use `getTextLength()`.

`getContainingFile()` and `getProject()` often can be computed once per task and then stored in fields or passed via parameters.

Additionally, methods such as `getText()`, `getNode()`, or `getTextRange()`, need the AST, obtaining which can be quite an expensive operation, see next section.

## Avoid Using Many PSI Trees/Documents

Avoid loading too many parsed trees or documents into memory at the same time.
Ideally, only AST nodes from files open in the editor should be present in the memory.
Everything else, even if it's needed for resolve/highlighting purposes, can be accessed via PSI interfaces, but its implementations should [use stubs](stub_indexes.md) underneath, which are less CPU- and memory-expensive.

If stubs don't suit your case well (e.g., the information you need is large and/or very rarely needed, or you're developing a plugin for a language whose PSI you don't control), you can create a [custom index or gist](indexing_and_psi_stubs.md).

To ensure you're not loading AST accidentally, you can use [`AstLoadingFilter`](%gh-ic%/platform/core-api/src/com/intellij/util/AstLoadingFilter.java) in production and `PsiManagerEx.setAssertOnFileLoadingFilter()` in tests.

The same applies to documents: only the ones opened in editors should be loaded.
Usually, you shouldn't need document contents (as most information can be retrieved from PSI).
If you nevertheless need documents, consider saving the information you need to provide in a [custom index or gist](indexing_and_psi_stubs.md) to get it more cheaply later.
If you still need documents, then at least ensure you load them one by one and don't hold them on strong references to let GC free the memory as quickly as possible.

## Cache Results of Heavy Computations

Method calls such as `PsiElement.getReference()` (and `getReferences()`), `PsiReference.resolve()` (and `multiResolve()` and other equivalents) or computation of expression types, type inference results, control flow graphs, etc. can be expensive.
To avoid paying this cost several times, the result of such computation can be cached and reused.
Usually, [`CachedValue`](%gh-ic%/platform/core-api/src/com/intellij/psi/util/CachedValue.java) created with [`CachedValueManager`](%gh-ic%/platform/core-api/src/com/intellij/psi/util/CachedValuesManager.java) works well for this purpose.

If the information you cache depends only on a subtree of the current PSI element (and nothing else: no resolve results or other files), you can cache it in a field in your `PsiElement` implementation and drop the cache in an override of `ASTDelegatePsiElement.subtreeChanged()`.

### Using `ProjectRootManager` as Dependency
{id="projectRootManagerDependency"}

<primary-label ref="2024.1"/>

The platform no longer increments root changes modification tracker on finish of [dumb mode](indexing_and_psi_stubs.md#dumb-mode).
If cached values use [`ProjectRootManager`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ProjectRootManager.java) as dependency
(without [`PsiModificationTracker`](%gh-ic%/platform/core-api/src/com/intellij/psi/util/PsiModificationTracker.java))
and at the same time depend on [indexes](indexing_and_psi_stubs.md), a dependency on
[`DumbService`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/DumbService.kt) must be added.
# PSI References

<!-- Copyright 2000-2022 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<link-summary>PSI Reference represents a link from a usage of a particular element in the code to the corresponding declaration.</link-summary>

A *reference* in a PSI tree is an object that represents a link from a *usage* of a particular element in the code to the corresponding *declaration*. *Resolving* a reference means locating the declaration to which a specific usage refers.

The most common type of reference is defined by language semantics.
For example, consider a simple Java method:

```java
public void hello(String message) {
  System.out.println(message);
}
```

This simple code fragment contains five references.
The references created by the identifiers `String`, `System`, `out`, and `println` can be resolved to the corresponding declarations in the JDK: the `String` and `System` classes, the `out` field, and the `println` method.
The reference created by the second occurrence of the `message` identifier in `println(message)` can be resolved to the `message` parameter, declared by `String message` in the method header.

Note that `String message` is not a reference and cannot be resolved.
Instead, it's a _declaration_.
It does not refer to any name defined elsewhere; instead, it defines a name by itself.

A reference is an instance of a class implementing the [`PsiReference`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReference.java) interface.
Note that references are distinct from PSI elements.
References created by a PSI element are returned from `PsiElement.getReferences()`, the underlying PSI element of a reference can be obtained from `PsiReference.getElement()`.

To *resolve* the reference - to locate the declaration being referenced - call `PsiReference.resolve()`.
It's very important to understand the difference between `PsiReference.getElement()` and `PsiReference.resolve()`.
The former method returns the _source_ of a reference, while the latter returns its _target_.
In the example above, for the `message` reference, `getElement()` will return the `message` identifier on the second line of the snippet, and `resolve()` will return the `message` identifier on the first line (inside the parameter list).

The process of resolving references is distinct from parsing and is not performed at the same time.
Moreover, it is not always successful.
If the code currently open in the IDE does not compile, or in other situations, it's normal for `PsiReference.resolve()` to return `null` - all code working with references must be prepared to handle that.

> Please see also [](psi_performance.md#cache-results-of-heavy-computations).
>

## Contributed References

In addition to references defined by the semantics of the programming language, the IDE recognizes many references determined by the semantics of the APIs and frameworks used in code.
Consider the following example:

```java
File file = new File("foo.txt");
```

Here, "foo.txt" has no special meaning from the point of view of the Java syntax - it's just a string literal.
However, opening this example in IntelliJ IDEA and having a file called "foo.txt" in the same directory, one can <shortcut>Ctrl/Cmd+Click</shortcut> on "foo.txt" and navigate to the file.
This works because the IDE recognizes the semantics of `new File(...)` and contributes a reference into the string literal passed as a parameter to the method.

Typically, references can be contributed to elements that don't have their own references, such as string literals and comments.
References are also often contributed to non-code files, such as XML or JSON.

Contributing references is one of the most common ways to extend an existing language.
For example, your plugin can contribute references to Java code, even though the Java PSI is part of the platform and not defined in your plugin.

Implement [`PsiReferenceContributor`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReferenceContributor.java) registered in `com.intellij.psi.referenceContributor` extension point.

Attribute `language` should be set to the Language ID where this contributor applies to.
The exact places to contribute references to are then specified using [](element_patterns.md) in calls to `PsiReferenceRegistrar.registerReferenceProvider()`.

See also [Reference Contributor tutorial](reference_contributor.md).

## References with Optional or Multiple Resolve Results

In the simplest case, a reference resolves to a single element, and if resolving fails, the code is incorrect, and the IDE needs to highlight it as an error.
However, there are cases when the situation is different.

The first case is *soft references*.
Consider the `new File("foo.txt")` example above.
If the IDE can't find the file "foo.txt", it doesn't mean that an error needs to be highlighted - maybe the file is only available at runtime.
Such references return `true` from the `PsiReference.isSoft()` method, which can then be used in inspection/annotator to skip highlighting them completely or use a lower severity.

The second case is *polyvariant references*.
Consider the case of a JavaScript program.
JavaScript is a dynamically typed language, so the IDE cannot always precisely determine which method is being called at a particular location.
To handle this, it provides a reference that can be resolved to multiple possible elements.
Such references implement the [`PsiPolyVariantReference`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiPolyVariantReference.java) interface.

For resolving a `PsiPolyVariantReference`, you call its `multiResolve()` method.
The call returns an array of [`ResolveResult`](%gh-ic%/platform/core-api/src/com/intellij/psi/ResolveResult.java) objects.
Each of the objects identifies a PSI element and also specifies whether the result is valid.
For example, suppose you have multiple Java method overloads and a call with arguments not matching any of the overloads.
In that case, you will get back `ResolveResult` objects for all the overloads, and `isValidResult()` returns `false` for all of them.

## Searching for References

Resolving a reference means going from usage to the corresponding declaration.
To perform the navigation in the opposite direction - from a declaration to its usages - perform a _references search_.

To perform a search using [`ReferencesSearch`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/searches/ReferencesSearch.java), specify the element to search for, and optionally other parameters such as the scope in which the reference needs to be searched.
The created [`Query`](%gh-ic%/platform/core-api/src/com/intellij/util/Query.java) allows obtaining all results at once or iterating over the results one by one.
The latter allows stopping processing as soon as the first (matching) result has been found.

## Implementing References

Please refer to the [guide](references_and_resolve.md) and corresponding [tutorial](reference_contributor.md) for more information.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Publishing a Plugin

<link-summary>Publishing a plugin to JetBrains Marketplace manually or with Gradle IntelliJ Plugin.</link-summary>

When a plugin is ready, it can be published to the [JetBrains Marketplace](https://plugins.jetbrains.com) plugin repository so that other users can install it in their IDE.

> When publishing a plugin to a repository _other than_ the [JetBrains Marketplace](https://plugins.jetbrains.com), refer to the [](custom_plugin_repository.md) documentation.

The first plugin publication must always be [uploaded manually](#uploading-a-plugin-to-jetbrains-marketplace).

<procedure title="Before Publishing Checklist">

Before publishing a plugin, make sure it:

- follows all recommendations from [](plugin_user_experience.md)
- follows all requirements from [Plugin Overview page](https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html)

The webinar _Busy Plugin Developers. Episode 2_ discusses [5 tips for optimizing JetBrains Marketplace plugin page](https://youtu.be/oB1GA9JeeiY?t=52) in more detail.

See also [](marketing.md) about widgets and badges.

</procedure>

<include from="plugin_content.md" element-id="doNotRepackageLibraries"/>

## Uploading a Plugin to JetBrains Marketplace

Before publishing a plugin, make sure it is signed.
For more details on generating a proper certificate and configuring the signing process, check the [Plugin Signing](plugin_signing.md) article.

<procedure title="Creating a JetBrains Account">

To upload a plugin to the [JetBrains Marketplace](https://plugins.jetbrains.com), log in with your personal JetBrains Account.

1. Open the [JetBrains Account Center](https://account.jetbrains.com) and click <control>Create Account</control>.
2. Fill in all fields in the <control>Create JetBrains Account</control> form that opens and click <control>Register</control>.

</procedure>

<procedure title="Uploading plugin">

To upload a plugin to [JetBrains Marketplace](https://plugins.jetbrains.com):

1. [Log in to JetBrains Marketplace](https://plugins.jetbrains.com/author/me) with your personal JetBrains account.
2. On the Profile page that opens, click <control>Add new plugin</control>.
3. Fill in the <control>Add new plugin</control> form that opens and click the <control>Add the plugin</control> button to upload the plugin.

See also [Marketplace Docs](https://plugins.jetbrains.com/docs/marketplace/uploading-a-new-plugin.html).

</procedure>

### Uploading a New Version

New versions can be uploaded manually on the plugin's detail page, see [Marketplace Docs](https://plugins.jetbrains.com/docs/marketplace/plugin-updates.html) for details.
See [](#deploying-a-plugin-with-gradle) on how to publish new versions using Gradle.

## Publishing Plugin With Gradle

Once [Gradle support](creating_plugin_project.md) has been configured, and the plugin has been [uploaded manually](#uploading-a-plugin-to-jetbrains-marketplace) to the plugin repository at least once,
it can be built and deployed to the [JetBrains Marketplace](https://plugins.jetbrains.com) automatically using dedicated Gradle tasks.

> **2.x** refers to [](tools_intellij_platform_gradle_plugin.md) and **1.x** to [](tools_gradle_intellij_plugin.md) in the following sections.
>

### Building Distribution

For the initial upload, manual distribution, or local installation, invoke the `buildPlugin` Gradle task
(Reference: [2.x](tools_intellij_platform_gradle_plugin_tasks.md#buildPlugin), [1.x](tools_gradle_intellij_plugin.md#tasks-buildplugin)) to create the plugin distribution.
If the project is configured to rely on [](plugin_signing.md), use the `signPlugin` task instead
(Reference: [2.x](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin), [1.x](tools_gradle_intellij_plugin.md#tasks-signplugin)).

The resulting ZIP file is located in <path>build/distributions</path> and can then be installed in the IDE via [<ui-path>Install Plugin from Disk...</ui-path>](https://www.jetbrains.com/help/idea/managing-plugins.html#install_plugin_from_disk) action
or uploaded to a [](custom_plugin_repository.md).

### Providing Your Personal Access Token to Gradle

To deploy a plugin to the JetBrains Marketplace, supply the Personal Access Token, which can be found on your profile page in the [My Tokens](https://plugins.jetbrains.com/author/me/tokens) section.

To create a new token, provide its name and click the <control>Generate Token</control> button.
A new token will be created and displayed right below.

> Copy it before closing this page and keep it in a secure location.
> This is the only time the token is visible.
>
{style="warning"}

This section describes two options to supply the _Personal Access Token_ via Gradle using:

* Environment variables,
* Parameters to the Gradle task.

#### Using Environment Variables

Start by defining an environment variable such as:

```bash
export ORG_GRADLE_PROJECT_intellijPlatformPublishingToken='YOUR_TOKEN'
```

> On macOS systems, environment variables set in <path>.bash_profile</path> are only visible to processes run from bash.
> Environment variables visible to all processes need to be defined in [Environment.plist](https://developer.apple.com/library/archive/qa/qa1067/_index.html).
>
{style="note" title="macOS Note"}

Now provide the environment variable in the run configuration for running the `publishPlugin` task locally
(Reference: [2.x](tools_intellij_platform_gradle_plugin_tasks.md#publishPlugin), [1.x](tools_gradle_intellij_plugin.md#tasks-publishplugin)).
To do so, create a Gradle run configuration (if not already done), select the Gradle project, specify the
`publishPlugin` task, and then add the environment variable.

<tabs group="gradlePluginVersion">

<tab title="IntelliJ Platform Gradle Plugin (2.x)" group-key="2.x">

```kotlin
intellijPlatform {
  publishing {
    token = providers.gradleProperty("intellijPlatformPublishingToken")
  }
}
```

</tab>

<tab title="Gradle IntelliJ Plugin (1.x)" group-key="1.x">

```kotlin
tasks {
  publishPlugin {
    token = providers.gradleProperty("intellijPlatformPublishingToken")
  }
}
```

</tab>
</tabs>

Note that it's still required to put some default values (can be empty) in the Gradle properties. Otherwise, there can be a compilation error.

#### Using Parameters for the Gradle Task

Like using environment variables, the token can also be passed as a parameter to the Gradle task.
For example, provide the parameter on the command line or by putting it in the arguments of the Gradle run configuration.

```bash
-PintellijPlatformPublishingToken=YOUR_TOKEN
```

Note that in this case also, it's still required to put some default values (can be empty) in the Gradle properties

### Deploying a Plugin with Gradle

The first step when deploying a plugin is to confirm that it works correctly.
Verify this by [installing the plugin from disk](https://www.jetbrains.com/help/idea/managing-plugins.html) in a fresh instance of the target IDE(s).

#### Signing a Plugin

The Marketplace signing is designed to ensure that plugins are not modified over the course of the publishing and delivery pipeline.
The `signPlugin` Gradle task
(Reference: [2.x](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin), [1.x](tools_gradle_intellij_plugin.md#tasks-signplugin)),
will be executed automatically right before the `publishPlugin` task
(Reference: [2.x](tools_intellij_platform_gradle_plugin_tasks.md#publishPlugin), [1.x](tools_gradle_intellij_plugin.md#tasks-publishplugin)).

For more details on generating a proper certificate and configuring the `signPlugin` task, see [](plugin_signing.md).

#### Publishing a Plugin

Once the plugin works as intended, make sure the plugin version is updated, as the JetBrains Marketplace won't accept multiple artifacts with the same version.

To deploy a new version of the plugin to the JetBrains Marketplace, invoke the `publishPlugin` Gradle task.

Now check the most recent version of the plugin on the [JetBrains Marketplace](https://plugins.jetbrains.com/).
If successfully deployed, any users who currently have this plugin installed on an available version of the IntelliJ Platform are notified of a new update available as soon as the update has been verified.

### Specifying a Release Channel

<tabs group="gradlePluginVersion">

<tab title="IntelliJ Platform Gradle Plugin (2.x)" group-key="2.x">

It's possible to deploy plugins to a chosen release channel by configuring the [`intellijPlatform.publishing.channels`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-publishing-channels) extension property.


<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellijPlatform {
  publishing {
    channels = listOf("beta")
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatform {
  publishing {
    channels = ['beta']
  }
}
```

</tab>
</tabs>

</tab>
<tab title="Gradle IntelliJ Plugin (1.x)" group-key="1.x">

It's possible to deploy plugins to a chosen release channel by configuring the [`publishPlugin.channels`](tools_gradle_intellij_plugin.md#tasks-publishplugin-channels) task property.

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
tasks {
  publishPlugin {
    channels = listOf("beta")
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
tasks {
  publishPlugin {
    channels = ['beta']
  }
}
```

</tab>
</tabs>

</tab>
</tabs>

When empty, this uses the default plugin repository, available to all [JetBrains Marketplace](https://plugins.jetbrains.com/) users.
However, it's possible to publish it to an arbitrarily named channel.
These non-default release channels are treated as separate repositories.

When using a non-default release channel, users need to configure a new [custom plugin repository](https://www.jetbrains.com/help/idea/managing-plugins.html#repos) in their IDE to install the plugin.

For example, when specifying `'canary'` as channel name, users will need to add the `https://plugins.jetbrains.com/plugins/canary/list` repository to install the plugin and receive updates.

Popular channel names include:

* `alpha`: https://plugins.jetbrains.com/plugins/alpha/list
* `beta`: https://plugins.jetbrains.com/plugins/beta/list
* `eap`: https://plugins.jetbrains.com/plugins/eap/list
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Punctuation

<link-summary>Punctuation rules for labels and description texts.</link-summary>

Use the following rules for labels and description texts in IntelliJ user interfaces. For punctuation in numbers and times, see [Data formats](data_formats.md).

## Ellipsis

End an action name with an ellipsis if it opens a dialog where input is required or possible. An ellipsis helps users understand if an action is immediate, or additional interaction is to follow.

<p>This rule applies to actions in the following controls: <a href="button.topic">button</a>, <a href="link.md">link</a>, menu item.</p>

<p>Examples:</p>
<table style="none">
<tr>
    <td>
        <p><i>Save All</i></p>
        <p><i>Build Project</i></p>
    </td>
    <td>
        Happens immediately, no ellipsis
    </td>
</tr>
<tr>
    <td>
        <p><i>Import Settings…</i></p>
        <p><i>Export to HTML…</i></p>
    </td>
    <td>
        Opens dialogs that require input
    </td>
</tr>
<tr>
    <td>
        <i>Project Structure…</i>
    </td>
    <td>
        Opens a complex dialog where input is not required but possible
    </td>
</tr>
<tr>
    <td>
        <p><i>Tip of the Day</i></p>
        <p><i>About IntelliJ IDEA</i></p>
    </td>
    <td>
        Opens dialogs that just show information, no input is either required or possible
    </td>
</tr>
</table>

Use an ellipsis at the end of a truncated text if there is no scrollbar and this is not a table column, see [truncation in table columns](table.md#sizes-and-placement). Provide a way to show the full text, for example, expand the control or show a tooltip on hover.

![](2_01_truncated_text.png){width=399 style=block}
*A notification can be expanded to show the full text.*

Use an ellipsis with verbs describing an ongoing process, for example, Searching… See more examples in [Progress text](progress_text.md).

Use the ellipsis character … (`U+2026` in Unicode). Do not use three separate "dot" characters.

## Period

Do **not** put a period at the end of a single sentence, even if it is a complete sentence.

![](1_01_no_period_1.png){width=385}

![](1_01_no_period_2.png){width=396}

If a text consists of several sentences, put a period after each sentence.
![](1_02_periods_several_sentences.png){width=488}

Do **not** put a period at the end of an IDE action.

![](1_03_periods_action.png){width=385 style=block}
*The empty text consists of two sentences, but the second one is an IDE action, so it should not have a period.*

<p>Note that links that are not IDE actions can have a period in the end.</p>

![](1_04_period_navigation_link.png){width=376}

## Comma

Use a comma:

Before a conjunction in a list of three or more items (the Oxford or serial comma).

*Border for a text field, combo box, or spinner*

Between symbols in series.

*Use the following characters: &, $, ., and \**

## Colon

Use a colon after labels for inputs and radio button / checkbox groups.

![](label_noun.png){width=153}

![](radio_example.png){width=213}

Do **not** use a colon if a label and text inside the input element make a phrase.

![](label_sentence.png){width=247}

## Contractions

Generally, do not use contractions.

*Path <format color="#C3481B">can’t</format> be found → Path cannot be found*

Use contractions only if the action name has 4 and more words, and the contracted word does not affect the meaning significantly.

*What’s New in IntelliJ IDEA*

*Don’t* or *Do not*:

* Always contract in the phrase *Don’t [some verb] again*. The phrase is common, and the meaning is easily recognized.
  ![](3_01_dont_ask_again.png){width=399}
* In other cases, do not contract. The full form reduces chances that the relevant meaning might be missed.

*<format color="#C3481B">Don’t</format> send → Do not send*

*Do not save, forget passwords after restart*

## Quotation marks

Use single quotation marks by default.

> Use a straight single quotation mark ' (`U+0027`). Do not use opening and closing quotation marks ‘ ’ (`U+2018`/`U+2019`).
>
{style="note"}


<i>Indexing library 'KotlinJavaRuntime'<br/>
Error parsing '.mvn/maven.config'<br/>
Add 'root=true' to the beginning of the file<br/>
Show 'Scratches and Consoles' in the Project view</i>

Do not use quotation marks for keyboard key names.

*Type an expression and press <format color="#cc4700" style="bold">'</format>Enter<format color="#cc4700" style="bold">'</format> → press Enter*

Do not use double quotation marks.

## Question marks

Use only in alerts when asking for confirmation.

*A file with this name already exists. Do you want to overwrite it?*

Avoid in other cases.

*Forgot password? → Remind password*

## Exclamation points

Do not use. Exclamation points can cause the sentence tone to be interpreted as aggressive, condescending, or overly informal.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# PyCharm Plugin Development

<link-summary>Introduction to developing plugins for PyCharm.</link-summary>

<var name="productID" value="pycharm"/>
<var name="marketplaceProductID" value="pycharm_ce"/>
<include from="snippets.md" element-id="jetbrainsIDE_TLDR"/>

[PyCharm](https://www.jetbrains.com/pycharm/) is an IntelliJ Platform-based product.
Plugin projects for PyCharm can be developed using [IntelliJ IDEA](idea.md).

## WebStorm Plugin Setup

### Gradle Build Script

<tabs>
<tab title="IntelliJ Platform Gradle Plugin (2.x)">

Define a dependency using [`pycharmCommunity()` or `pycharmProfessional()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md), see _Versions_ link on top of this page for all available versions.
See [](tools_intellij_platform_gradle_plugin.md#dependenciesLocalPlatform) for using a local installation.

A dependency on the matching bundled `PythonCore`/`Pythonid` plugin (see [](#python-plugins) below) must be added using the [`bundledPlugin()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins) helper.

Minimum <path>build.gradle.kts</path> setup:

```kotlin
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    pycharmCommunity("<versionNumber>")
    bundledPlugin("PythonCore")
  }
}
```

</tab>

<tab title="Gradle IntelliJ Plugin (1.x)">

The configuration of PyCharm plugin projects follows the methods described in [Configuring Plugin Projects using a Product-Specific Attribute](dev_alternate_products.md#using-a-product-specific-attribute), and [Configuring the plugin.xml File](dev_alternate_products.md#configuring-pluginxml).
The table below summarizes the [](tools_gradle_intellij_plugin.md) attributes to set in the Gradle build script.
Click on an entry in the table's *Attribute* column to go to the documentation about that attribute.

| `gradle-intellij-plugin` Attribute                                                               | Attribute Value                                                                |
|--------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|
| [`intellij.type`](tools_gradle_intellij_plugin.md#intellij-extension-type)                       | `PC` for PyCharm Community Edition<br/>`PY` for PyCharm Professional Edition   |
| [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version)                 | Set to the targeted `PC` or `PY` version.                                      |
| [`intellij.plugins`](tools_gradle_intellij_plugin.md#intellij-extension-plugins)                 | See [](#python-plugins).                                                       |
| [`intellij.downloadSources`](tools_gradle_intellij_plugin.md#intellij-extension-downloadsources) | `false` is required because no public source code is available.                |
| [`runIde.ideDir`](tools_gradle_intellij_plugin.md#tasks-runide-idedir)                           | Not needed; the Development Instance will automatically match `intellij.type`. |

</tab>
</tabs>

### plugin.xml

The dependency on the PyCharm APIs must be declared in the <path>[plugin.xml](plugin_configuration_file.md)</path> file.
As described in [Configuring the plugin.xml File](dev_alternate_products.md#configuring-pluginxml), the [`<depends>`](plugin_configuration_file.md#idea-plugin__depends) tag must declare `com.intellij.modules.python`.

### Python Plugins

| Plugin                                                                                         | Plugin ID    | API                                 |
|------------------------------------------------------------------------------------------------|--------------|-------------------------------------|
| [Python Community Edition](https://plugins.jetbrains.com/plugin/7322-python-community-edition) | `PythonCore` | PyCharm Community Edition (`PC`)    |
| [Python](https://plugins.jetbrains.com/plugin/631-python)                                      | `Pythonid`   | PyCharm Professional Edition (`PY`) |

#### Python Plugins 2024.2

{id="python242"}

<primary-label ref="2024.2"/>

When using functionality from `Pythonid`, a dependency on _both_ `PythonCore` and `Pythonid` is now required.

### Sample Plugin

See the SDK code sample [`pycharm_basics`](%gh-sdk-samples-master%/product_specific/pycharm_basics/) for an example configuration.
Note that this code sample must be imported into Gradle explicitly, as it is not included in the `_gradleCompositeBuild`.

## Available PyCharm APIs

See [](intellij_community_plugins_extension_point_list.md) for PyCharm Community.

## Additional Articles and Resources

* [Webinar Recording: "Live Development of a PyCharm Plugin" with Joachim Ansorg](https://blog.jetbrains.com/pycharm/2019/01/webinar-recording-live-development-of-a-pycharm-plugin-with-joachim-ansorg/)

## Open Source Plugins for PyCharm

When learning new development configurations, it is helpful to have some representative projects for reference:

* [Flake8 Support](https://github.com/jansorg/pycharm-flake8) Adds support for flake8's `# noqa` comments in PyCharm.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 19. Quick Fix

<link-summary>Sample implementation a quick fix adding a missing Simple language property referenced in a Java file.</link-summary>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

<tldr>

**Reference**: [](code_inspections_and_intentions.md)

**Code**: [`SimpleElementFactory`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleElementFactory.java),
[`SimpleCreatePropertyQuickFix`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCreatePropertyQuickFix.java),
[`SimpleAnnotator`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleAnnotator.java)

</tldr>

A quick fix for a custom language supports the IntelliJ Platform-based IDE feature [Intention Actions](https://www.jetbrains.com/help/idea/intention-actions.html#apply-intention-actions).
For the Simple language, this tutorial adds a quick fix that helps to define an unresolved property from its usage.

## Update the Element Factory
The [`SimpleElementFactory`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleElementFactory.java) is updated to include two new methods to support the user choice of creating a new property for the Simple Language quick fix.
The new `createCRLF()` method supports adding a newline to the end of the [`test.simple`](lexer_and_parser_definition.md#run-the-project) file before adding a new property.
A new overload of `createProperty()` creates a new `key`-`value` pair for Simple Language.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleElementFactory.java" include-symbol="SimpleElementFactory"}

## Define an Intention Action
The [`SimpleCreatePropertyQuickFix`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCreatePropertyQuickFix.java) creates a property in the file chosen by the user - in this case, a Java file containing a `prefix:key` - and navigate to this property after creation.
Under the hood, `SimpleCreatePropertyQuickFix` is an Intention Action.
For a more in-depth example of an Intention Action, see [`conditional_operator_intention`](%gh-sdk-samples-master%/conditional_operator_intention).

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleCreatePropertyQuickFix.java" include-symbol="SimpleCreatePropertyQuickFix"}

## Update the Annotator
When a `badProperty` annotation is created, the `badProperty.registerFix()` method in
[`SimpleAnnotator`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleAnnotator.java) is called.
This method call registers the `SimpleCreatePropertyQuickFix` as the Intention Action for the IntelliJ Platform to use to correct the problem.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleAnnotator.java" include-symbol="SimpleAnnotator"}

## Run the Project
Run the project by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.
Open the test [Java file](annotator.md#run-the-project).

To test `SimpleCreatePropertyQuickFix`, change `simple:website` to `simple:website.url`.
The key `website.url` is highlighted by `SimpleAnnotator` as an invalid key, as shown below.
Choose "Create Property".

![Quick Fix](quick_fix.png){width="800"}

The IDE opens the <path>test.simple</path> file and adds `website.url` as a new key.
Add the new value `jetbrains.com` for the new `website.url` key.

![New Property](new_property.png)

Now switch back to the Java file; the new key is highlighted as valid.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Radio Button

<link-summary>UI guidelines on using radio buttons.</link-summary>

<tldr>

**Implementation:** [`JBRadioButton`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/JBRadioButton.java)

</tldr>

![](01_Radio Button.png){width=706}

## When to use

Use a radio button group to choose one option from 2 to 4 mutually exclusive options.

## When not to use

### Several options in a group can be selected
Use a group of [checkboxes](checkbox.topic) instead.

### Binary Yes/No Options
For only two opposing yes/no options, use a checkbox instead.

<table style="none" border="false">
  <tr>
    <td width="50%">
      <format color="Green" style="bold">Correct</format><img src="02_When_to_use_correct.png" alt="A correct example of using a checkbox instead of a radiobutton"/>
    </td>
    <td width="50%">
      <format color="Red" style="bold">Incorrect</format><img src="02_When_to_use_incorrect.png" alt="An incorrect example of using a radiobutton instead of a checkbox"/>
    </td>
  </tr>
</table>

### 5 and more options
If the options have short labels, use a segmented button. Or, if the options can be represented on an axis, such as a time delay, use a slider instead.

![](03_When_to_use_Segmented_button.png){width=706}

For other cases with 5 or more options use a [drop-down list](drop_down.md):

  <table style="none" border="false">
  <tr>
    <td width="50%">
      <format color="Green" style="bold">Correct</format><img src="04_When_to_use_correct.png" alt="A correct example of using a checkbox instead of a radiobutton"/>
    </td>
    <td width="50%">
      <format color="Red" style="bold">Incorrect</format><img src="04_When_to_use_incorrect.png" alt="An incorrect example of using a radiobutton instead of a checkbox"/>
    </td>
  </tr>
</table>

### Use dropdown
Consider using a [drop-down list](drop_down.md) if:
* The screen space is limited.
* The option might be used less often than other options on the screen.
* There are other drop-down lists in the same group of UI components. A radio button group is more noticeable than a drop-down list, so it will look like a more important setting.
* There is a combination of several UI components for one setting:
  ![](05_When_to_use_Segmented_button.png){width=706}
  *The automatic updates setting consists of a checkbox, three lengthy-labeled options in a dropdown and a button.*

## How to use

### Label

<table style="none" border="false" column-width="fixed">
    <tr>
      <td><img src="06_How_to_use.png" alt="Using links instead of buttons" width="378"/></td>
      <td><p>A label accompanies each checkbox and is placed next to it.</p></td>
    </tr>
    <tr>
      <td><img src="07_How_to_use.png" alt="Using links instead of buttons" width="378"/></td>
      <td><p>If a label is long, split it into two lines. Avoid labels that take more than two lines. See recommendations on writing concise labels below.</p></td>
    </tr>
</table>

To implement this, use HTML formatting:
<tabs group="languages">
<tab title="Kotlin UI DSL" group-key="kotlin">

```kotlin
radioButton(
    "<html>Show options before adding<br>to version control</html>")
```

</tab>
<tab title="Java" group-key="java">

```java
new JRadioButton(
    "<html>Show options before adding<br>to version control</html>");
```

</tab>
</tabs>

### Writing guidelines

Use sentence-style capitalization.

Do not use ending punctuation.

Use the imperative form of verbs.

Do not use negation in labels as it complicates understanding.

<table style="none" border="false">
  <tr>
    <td width="50%">
      <format color="Green" style="bold">Correct</format><img src="08_How_to_use_correct.png" alt="A correct example of using a checkbox instead of a radiobutton"/>
    </td>
    <td width="50%">
      <format color="Red" style="bold">Incorrect</format><img src="08_How_to_use_incorrect.png" alt="An incorrect example of using a radiobutton instead of a checkbox"/>
    </td>
  </tr>
</table>

Make labels short and intelligible — see [Writing short and clear text](writing_short.md).

### Group label

![](09_How_to_use.png){width=706}

Always start a radio button group with a group label. It explains what the options are for.

Use a checkbox or another radio button as a group label if the radio button group needs to be turned on or off.

Use a colon at the end of a group label.

## Sizes and placement

If a radio button group depends on another control, e.g., a checkbox, follow the rules for [dependent colors](layout.md#dependent-controls).
Otherwise, follow the rules for [independent colors](layout.md).

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 10. Reference Contributor

<link-summary>Sample implementation of reference contributor adding Simple language references in Java strings.</link-summary>

<tldr>

**Reference**: [](references_and_resolve.md), [](psi_references.md)

**Code**: [`SimpleNamedElement`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleNamedElement.java),
[`SimpleNamedElementImpl`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/impl/SimpleNamedElementImpl.java),
[`SimpleReference.java`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleReference.java),
[`SimpleReferenceContributor`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleReferenceContributor.java),
[`SimpleRefactoringSupportProvider`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleRefactoringSupportProvider.java)

**Testing**: [](completion_test.md), [](rename_test.md), [](reference_test.md),

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

The references functionality is one of the most important parts in the implementation of custom language support.
Resolving references means the ability to go from the usage of an element to its declaration, completion, rename refactoring, find usages, etc.

> Every PSI element that can be renamed or referenced needs to implement [`PsiNamedElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiNamedElement.java) interface.
>
{style="note"}

## Define a Named Element Class

The classes below show how the Simple Language fulfills the need to implement `PsiNamedElement`.

The [`SimpleNamedElement`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleNamedElement.java) interface is subclassed from [`PsiNameIdentifierOwner`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiNameIdentifierOwner.java).

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleNamedElement.java" include-symbol="SimpleNamedElement"}

The [`SimpleNamedElementImpl`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/impl/SimpleNamedElementImpl.java) class implements the `SimpleNamedElement` interface and extends [`ASTWrapperPsiElement`](%gh-ic%/platform/core-impl/src/com/intellij/extapi/psi/ASTWrapperPsiElement.java).

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/impl/SimpleNamedElementImpl.java" include-symbol="SimpleNamedElementImpl"}

## Define Helper Methods for Generated PSI Elements

Modify `SimplePsiImplUtil` to support new methods that get added to the PSI class for Simple Language.
Note that `SimpleElementFactory` isn't defined until the [next step](#define-an-element-factory), so for now it shows as an error.

```java
public class SimplePsiImplUtil {

  // ...

  public static String getName(SimpleProperty element) {
    return getKey(element);
  }

  public static PsiElement setName(SimpleProperty element, String newName) {
    ASTNode keyNode = element.getNode().findChildByType(SimpleTypes.KEY);
    if (keyNode != null) {
      SimpleProperty property =
          SimpleElementFactory.createProperty(element.getProject(), newName);
      ASTNode newKeyNode = property.getFirstChild().getNode();
      element.getNode().replaceChild(keyNode, newKeyNode);
    }
    return element;
  }

  public static PsiElement getNameIdentifier(SimpleProperty element) {
    ASTNode keyNode = element.getNode().findChildByType(SimpleTypes.KEY);
    return keyNode != null ? keyNode.getPsi() : null;
  }

  // ...

}
```

## Define an Element Factory

The `SimpleElementFactory` provides methods for creating `SimpleFile`.

```java
package org.intellij.sdk.language.psi;

import com.intellij.openapi.project.Project;
import com.intellij.psi.*;
import org.intellij.sdk.language.SimpleFileType;

public class SimpleElementFactory {

  public static SimpleProperty createProperty(Project project, String name) {
    SimpleFile file = createFile(project, name);
    return (SimpleProperty) file.getFirstChild();
  }

  public static SimpleFile createFile(Project project, String text) {
    String name = "dummy.simple";
    return (SimpleFile) PsiFileFactory.getInstance(project).
        createFileFromText(name, SimpleFileType.INSTANCE, text);
  }
}
```

## Update Grammar and Regenerate the Parser

Now make corresponding changes to the <path>Simple.bnf</path> grammar file by replacing the `property` definition with the lines below.
Remember to regenerate the parser after updating the file!
Right-click on the <path>Simple.bnf</path> file and select **Generate Parser Code**.

```bnf
property ::= (KEY? SEPARATOR VALUE?) | KEY {
  mixin="org.intellij.sdk.language.psi.impl.SimpleNamedElementImpl"
  implements="org.intellij.sdk.language.psi.SimpleNamedElement"
  methods=[getKey getValue getName setName getNameIdentifier]
}
```

## Define a Reference

Now define a reference class [`SimpleReference.java`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleReference.java) to resolve a property from its usage.
As a single reference can [resolve to multiple](references_and_resolve.md#resolving-to-multiple-targets) Simple properties, it implements [`PsiPolyVariantReference`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiPolyVariantReference.java).
To simplify the implementation, [`PsiPolyVariantReferenceBase`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiPolyVariantReferenceBase.java) is used as a base class.


```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleReference.java" include-symbol="SimpleReference"}

## Define a Reference Contributor

A reference contributor allows the `simple_language_plugin` to provide references to Simple Language from elements in other languages such as Java.
Create [`SimpleReferenceContributor`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleReferenceContributor.java) by subclassing [`PsiReferenceContributor`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReferenceContributor.java).
Contribute a reference to each usage of a property:

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleReferenceContributor.java" include-symbol="SimpleReferenceContributor"}

## Register the Reference Contributor

The `SimpleReferenceContributor` implementation is registered using the `com.intellij.psi.referenceContributor` extension point and specifying `language="JAVA"`.

```xml
<extensions defaultExtensionNs="com.intellij">
  <psi.referenceContributor
      language="JAVA"
      implementation="org.intellij.sdk.language.SimpleReferenceContributor"/>
</extensions>
```

## Run the Project with the Reference Contributor

Run the project by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

The IDE now resolves the property and provides [completion](https://www.jetbrains.com/help/idea/auto-completing-code.html#basic_completion) suggestions:

![Reference Contributor](reference_contributor.png){width="800"}

The [Rename refactoring](https://www.jetbrains.com/help/idea/rename-refactorings.html#invoke-rename-refactoring) functionality is now available from definition and usages.

![Rename](rename.png){width="800"}

## Define a Refactoring Support Provider

Support for in-place refactoring is specified explicitly in a refactoring support provider.
Create [`SimpleRefactoringSupportProvider`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleRefactoringSupportProvider.java) by subclassing [`RefactoringSupportProvider`](%gh-ic%/platform/refactoring/src/com/intellij/lang/refactoring/RefactoringSupportProvider.java)
As long as an element is a `SimpleProperty` it is allowed to be refactored:

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleRefactoringSupportProvider.java" include-symbol="SimpleRefactoringSupportProvider"}

## Register the Refactoring Support Provider

The `SimpleRefactoringSupportProvider` implementation is registered with the IntelliJ Platform in the plugin configuration file using the `com.intellij.lang.refactoringSupport` extension point.

```xml
<extensions defaultExtensionNs="com.intellij">
  <lang.refactoringSupport
      language="Simple"
      implementationClass="org.intellij.sdk.language.SimpleRefactoringSupportProvider"/>
</extensions>
```

## Run the Project

Run the project by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

The IDE now supports [refactoring](https://www.jetbrains.com/help/idea/rename-refactorings.html) suggestions:

![In Place Rename](in_place_rename.png){width="800"}
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 10. Reference Test

<link-summary>Implementing and running tests for resolving elements implemented as a part of the Custom Language Support Tutorial.</link-summary>

<tldr>

**Tested Functionality**: [](reference_contributor.md)

</tldr>

<include from="tests_prerequisites.md" element-id="custom_language_testing_tutorial_header"></include>

## Define Test Data
This test reuses the Simple Language file <path>DefaultTestData.simple</path>.

Create the test file <path>ReferenceTestData.java</path> in the <path>testData</path> directory.
This file has one Simple Language prefix and key, with the caret placed after the key.

```java
```
{src="simple_language_plugin/src/test/testData/ReferenceTestData.java"}

## Define a Test Method
Add the `testReference()` method to the `SimpleCodeInsightTest` class [previously defined](completion_test.md#define-a-test).
This test is configured by the test files.
The fixture gets the `PsiReference` at the caret position, and then asserts the resolved `SimpleProperty.value()` with the known value of that key.

```java
```
{src="simple_language_plugin/src/test/java/org/intellij/sdk/language/SimpleCodeInsightTest.java" include-symbol="testReference"}

## Run the Test

<include from="custom_language_testing_snippets.md" element-id="runTests"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# References and Resolve

<link-summary>A PSI reference allows for resolving from a symbol usage to its declaration.</link-summary>

One of the most important and tricky parts in implementing a custom language PSI is resolving references.
Resolving references allows users to navigate from a PSI element usage (accessing a variable, calling a method, etc.) to the declaration of that element (the variable's definition, a method declaration, and so on).

This feature is required to support the <ui-path>Navigate | Declaration or Usages</ui-path> action invoked by <shortcut>Ctrl/Cmd+B</shortcut> or clicking the mouse button while holding <shortcut>Ctrl/Cmd</shortcut> key, and it is a prerequisite for implementing [finding usages](find_usages.md), [rename refactoring](rename_refactoring.md), and [code completion](code_completion.md).

The <ui-path>View | Quick Definition</ui-path> action is based on the same mechanism, so it becomes automatically available for all references that can be resolved by the language plugin.
To customize the exact document range to show in the popup (e.g., include "surrounding" code or comments), provide [`ImplementationTextSelectioner`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/hint/ImplementationTextSelectioner.java) registered in `com.intellij.lang.implementationTextSelectioner` extension point.

## PSI References

All PSI elements which work as references (for which the <ui-path>Navigate | Declaration or Usages</ui-path> action applies) need to implement the
[`PsiElement.getReference()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java) method and to return a [`PsiReference`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReference.java) implementation from that method.
The `PsiReference` can be implemented by the same class as `PsiElement`, or by a different class.
An element can also contain multiple references (for example, a string literal can contain multiple substrings which are valid fully qualified class names), in which case it can implement `PsiElement.getReferences()` and return the references as an array.
To optimize `PsiElement.getReferences()` performance, consider implementing [`HintedReferenceHost`](%gh-ic%/platform/core-api/src/com/intellij/psi/HintedReferenceHost.java) to provide additional hints.

The primary method of the [`PsiReference`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReference.java) interface is `resolve()`.
It returns the element to which the reference points, or `null` if it was not possible to resolve the reference to a valid element (for example, should it point to an undefined class).
The resolved element should implement the [`PsiNamedElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiNamedElement.java) interface.
To enable more advanced functionality, prefer implementing [`PsiNameIdentifierOwner`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiNameIdentifierOwner.java) over [`PsiNamedElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiNamedElement.java) where possible.

> While the referencing element and the referenced element both may have a name, only the element which **introduces** the name (e.g., the definition `int x = 42`) needs to implement `PsiNamedElement`.
> The referencing element at the point of usage (e.g., the `x` in the expression `x + 1`) should not implement `PsiNamedElement` since it does not _have_ a name.
>
{style="note"}

A counterpart to the `resolve()` method is `isReferenceTo()`, which checks if the reference resolves to the specified element.
The latter method can be implemented by calling `resolve()` and comparing the result with the passed PSI element.
Still, additional optimizations are possible (for example, performing the tree walk only if the element text is equal to the text of the reference).

**Examples:**

- [Reference](%gh-ic%/plugins/properties/src/com/intellij/lang/properties/ResourceBundleReference.java) to a ResourceBundle in the [Properties language plugin](%gh-ic%/plugins/properties)
- [Custom Language Support Tutorial: Reference Contributor](reference_contributor.md)

## Implementing Resolve Logic

There is a set of interfaces that can be used as a base for implementing resolve support, namely the [`PsiScopeProcessor`](%gh-ic%/platform/core-api/src/com/intellij/psi/scope/PsiScopeProcessor.java) interface and the [`PsiElement.processDeclarations()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java) method.
These interfaces have several extra complexities that are unnecessary for most custom languages (like support for substituting Java generics types).
Still, they are required if the custom language can have references to Java code.
If Java interoperability is not required, the plugin can forgo the standard interfaces and provide its own, different implementation of resolve.

See also [](psi_performance.md#cache-results-of-heavy-computations).

The implementation of resolve based on the standard helper classes contains the following components:

* A class implements the [`PsiScopeProcessor`](%gh-ic%/platform/core-api/src/com/intellij/psi/scope/PsiScopeProcessor.java) interface, which gathers the possible declarations for the reference and stops the resolve process when it has successfully completed.
  The primary method which needs to be implemented is `execute()`, which is called to process every declaration encountered during the resolve, and returns `true` if the resolve needs to be continued or `false` if the declaration has been found.
  The methods `getHint()` and `handleEvent()` are used for internal optimizations and can be left empty in the `PsiScopeProcessor` implementations for custom languages.
* A function which walks the PSI tree up from the reference location until the resolve has successfully completed or until the end of the resolve scope has been reached.
  If the target of the reference is located in a different file, the file can be located, for example, using [`FilenameIndex.getFilesByName()`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/FilenameIndex.java) (if the file name is known) or by iterating through all custom language files in the project (`iterateContent()` in the
  [`ProjectFileIndex`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ProjectFileIndex.java) interface obtained
  from
  [`ProjectRootManager.getFileIndex()`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ProjectRootManager.java)).
* The individual PSI elements, on which the `processDeclarations()` method is called during the PSI tree walk.
  If a PSI element is a declaration, it passes itself to the `execute()` method of the `PsiScopeProcessor` passed to it.
  Also, if necessary, according to the language scoping rules, a PSI element can pass the `PsiScopeProcessor` to its child elements.

## Resolving to Multiple Targets

[`PsiPolyVariantReference`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiPolyVariantReference.java) is an extension of [`PsiReference`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReference.java) and allows a reference to resolve to multiple targets.
The targets to which the reference resolves are returned from the `multiResolve()` method.
The <ui-path>Navigate | Declaration or Usages</ui-path> action for such references allows the user to choose a navigation target in a popup.
The implementation of `multiResolve()` can be also based on [`PsiScopeProcessor`](%gh-ic%/platform/core-api/src/com/intellij/psi/scope/PsiScopeProcessor.java), and can collect all valid targets for the reference instead of stopping when the first valid target is found.

> Consider using [`PsiPolyVariantReferenceBase`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiPolyVariantReferenceBase.java) as a base class for `PsiPolyVariantReference` implementations.

## Additional Highlighting
<primary-label ref="2022.2"/>

Implement [`HighlightedReference`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/highlighting/HighlightedReference.java) to add additional highlighting for non-obvious places (e.g., inside String literals).
Such references will automatically be highlighted using <control>String | Highlighted reference</control> text attributes from <ui-path>Settings | Editor | Color Scheme | Language Defaults</ui-path>.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Registering a File Type

<link-summary>Registering a language file type associating file extensions and patterns with a language.</link-summary>

<tldr>

**Product Help:** [File type associations](https://www.jetbrains.com/help/idea/creating-and-registering-file-types.html)

</tldr>

The first step in developing a custom language plugin is registering a file type associated with the language.

The IDE typically determines the type of a file by looking at its filename or extension.

A custom language file type is a class derived from [`LanguageFileType`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileTypes/LanguageFileType.java), which passes a [`Language`](%gh-ic%/platform/core-api/src/com/intellij/lang/Language.java) subclass to its base class constructor.

### Registration
<tabs>

<tab title="2019.2+">

Use `com.intellij.fileType` extension point to register `LanguageFileType` implementation and instance via `implementationClass` and `fieldName` attributes.
Also, `name` and `language` must be declared matching `FileType.getName()` and ID of language returned from `LanguageFileType.getLanguage()`, respectively.

To associate the file type in the IDE, specify one or more associations listed in the following table.

| Association type        | Attribute                                          | Attribute value                                                 |
|-------------------------|----------------------------------------------------|-----------------------------------------------------------------|
| Filename extension(s)   | `extensions`                                       | Semicolon-separated list of extensions, without `.` prefix      |
| Hard coded file name(s) | <p>`fileNames`/<br/>`fileNamesCaseInsensitive`</p> | Semicolon-separated list of exact (case-insensitive) file names |
| Filename pattern(s)     | `patterns`                                         | Semicolon-separated list of patterns (`*` and `?`)              |
| Hashbang _(2020.2+)_    | `hashBangs`                                        | Semicolon-separated list of hash bang patterns                  |

</tab>

<tab title="Earlier versions">

> The `FileTypeFactory` approach is deprecated. Use it only when the plugin supports platform versions older than 2019.2.
>
{style="warning"}

To register a file type, the plugin developer provides a subclass of [`FileTypeFactory`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/fileTypes/FileTypeFactory.java), which is registered via the `com.intellij.fileTypeFactory` extension point.

</tab>
</tabs>

**Examples**
- [Custom Language Support Tutorial: Language and File Type](language_and_filetype.md)
- [`LanguageFileType`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileTypes/LanguageFileType.java) subclass in [Properties language plugin](%gh-ic%/plugins/properties/properties-psi-api/src/com/intellij/lang/properties/PropertiesFileType.java)

To verify that the file type is registered correctly, you can implement the [`LanguageFileType.getIcon()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileTypes/LanguageFileType.java) method and verify that the correct icon (see [](icons.md)) is displayed for files associated with your file type.

### Additional Features

If you want IDEs to show a hint prompting users that your plugin supports a specific file type, see [Plugin Recommendations](https://plugins.jetbrains.com/docs/marketplace/intellij-plugin-recommendations.html).

To control file type association with the IDE in the operating system, implement [`OSFileIdeAssociation`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileTypes/OSFileIdeAssociation.java) (2020.3).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Rename Refactoring

<link-summary>Rename refactoring workflow, validation and customization.</link-summary>

<tldr>

**Product Help:** [Rename refactorings](https://www.jetbrains.com/help/idea/rename-refactorings.html)

</tldr>

The Rename refactoring operation is quite similar to that of [Find Usages](find_usages.md).
It uses the same rules for locating the element to be renamed and the same index of words for finding the files that may have references to the element being renamed.

When the rename refactoring is performed, the method [`PsiNamedElement.setName()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiNamedElement.java) is called for the renamed element, and [`PsiReference.handleElementRename()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReference.java) is called for all references to the renamed element.
These methods perform basically the same action: replace the underlying AST node of the PSI element with the node containing the new text entered by the user.
Creating an entirely correct AST node from scratch is quite tricky.
Thus, surprisingly, the easiest way to get the replacement node is to create a dummy file in the custom language so that it would contain the necessary node in its parse tree, build the parse tree and extract the required node from it.

**Examples:**
- [`setName()`](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/psi/impl/PropertyImpl.java) implementation for a [Properties language plugin](%gh-ic%/plugins/properties)
- [Custom Language Support Tutorial: Reference Contributor](reference_contributor.md)

If a renamed reference extends [`PsiReferenceBase`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReferenceBase.java), renaming is performed by invoking the [`ElementManipulator.handleContentChange()`](%gh-ic%/platform/core-api/src/com/intellij/psi/ElementManipulator.java), responsible for handling the content change and calculating the text range of reference inside the element.

To disable renaming for specific elements, implement `com.intellij.openapi.util.Condition<T>` for PsiElement of type `T` and register it in `com.intellij.vetoRenameCondition` extension point.

### Name Validation
[`NamesValidator`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/refactoring/NamesValidator.java) allows a plugin to check if the name entered by the user in the `Rename` dialog is a valid identifier (and not a keyword) according to the custom language rules.
If an implementation of this interface is not provided by the plugin, Java rules for validating identifiers are used.
Implementations of `NamesValidator` are registered in the `com.intellij.lang.namesValidator` extension point.

**Example:**
[`PropertiesNamesValidator`](%gh-ic%/plugins/properties/src/com/intellij/lang/properties/PropertiesNamesValidator.java) for [Properties language plugin](%gh-ic%/plugins/properties)

Another way to check is
[`RenameInputValidator`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/rename/RenameInputValidator.java),
unlike `NamesValidator` it allows you to more flexibly check the entered name for correctness based on the rule defined in the `isInputValid()` method.

To determine which elements this validator will apply to, override the `getPattern()` method returning the pattern of the element to validate.

**Example:**
[`YAMLAnchorRenameInputValidator`](%gh-ic%/plugins/yaml/src/org/jetbrains/yaml/resolve/YAMLAnchorRenameInputValidator.java) validating YAML language anchor names

`RenameInputValidator` can be extended to
[`RenameInputValidatorEx`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/rename/RenameInputValidatorEx.java)
to override the default error message.
The `getErrorMessage()` method should return a custom error message in case of an invalid name, or `null` otherwise.

Note that `getErrorMessage()` only works if all `RenameInputValidator` accept the new name in `isInputValid()` and the name is a valid identifier for the language of the element.

**Example:**
[`YamlKeyValueRenameInputValidator`](%gh-ic%/plugins/yaml/editing/src/org/jetbrains/yaml/refactoring/rename/YamlKeyValueRenameInputValidator.java) validating YAML language keys

Implementations of `RenameInputValidator` or `RenameInputValidatorEx` are registered in the `com.intellij.renameInputValidator` extension point.

### Custom Rename UI and Workflow
Further customization of the Rename refactoring processing is possible on multiple levels.
Providing a custom implementation of the [`RenameHandler`](%gh-ic%/platform/refactoring/src/com/intellij/refactoring/rename/RenameHandler.java) interface allows you to entirely replace the UI and workflow of the rename refactoring, and also to support renaming something which is not a [`PsiElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java) at all.

**Example:**
[`RenameHandler`](%gh-ic%/plugins/properties/properties-resource-bundle-editor/src/com/intellij/lang/properties/refactoring/rename/ResourceBundleFromEditorRenameHandler.java) for renaming a resource bundle in the [Properties language plugin](%gh-ic%/plugins/properties)

If you're okay with the standard UI but need to extend the default logic of renaming, you can provide an implementation of the [`RenamePsiElementProcessor`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/rename/RenamePsiElementProcessor.java) interface.
This allows you to:

* Rename an element different from the one on which the action was invoked (a super method, for example)
* Rename multiple elements at once (if their names are linked according to the logic of your language)
* Check for name conflicts (existing names, etc.)
* Customize how a search for code references or text references is performed
* etc.

**Example:**
[`RenamePsiElementProcessor`](%gh-ic%/plugins/properties/src/com/intellij/lang/properties/refactoring/rename/RenamePropertyProcessor.java) for renaming a property in [Properties plugin language](%gh-ic%/plugins/properties)
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 6. Rename Test

<link-summary>Implementing and running test for rename functionality implemented as a part of the Custom Language Support Tutorial.</link-summary>

<tldr>

**Tested Functionality**: [](reference_contributor.md)

</tldr>

<include from="tests_prerequisites.md" element-id="custom_language_testing_tutorial_header"></include>

## Define Input Test Data
Create the <path>RenameTestData.simple</path> properties file in the <path>testData</path> directory.

```properties
```
{src="simple_language_plugin/src/test/testData/RenameTestData.simple"}

Create the file <path>RenameTestData.java</path> in the <path>testData</path> directory.
This file contains one Simple Language reference embedded in Java, with the [caret position](test_project_and_testdata_directories.md#special-markup) placed just after a Simple Language key.

```java
```
{src="simple_language_plugin/src/test/testData/RenameTestData.java"}

## Create Output Test Data
Create the <path>RenameTestDataAfter.simple</path> file in the <path>testData</path> directory.
This file contains the expected outcome of the test.
Note the `website =` in <path>RenameTestData.simple</path> should be renamed to `websiteUrl =` by the test.

```properties
```
{src="simple_language_plugin/src/test/testData/RenameTestDataAfter.simple"}

## Define a Test Method
Add the `testRename()` method to the `SimpleCodeInsightTest` class [previously defined](completion_test.md#define-a-test).
* Again, this method configures the test fixture by using the test files.
* The fixture then renames the Simple Language element at the caret in <path>RenameTestData.java</path>.
* It then compares the input and output files, ignoring whitespace.

```java
```
{src="simple_language_plugin/src/test/java/org/intellij/sdk/language/SimpleCodeInsightTest.java" include-symbol="testRename"}


## Run the Test

<include from="custom_language_testing_snippets.md" element-id="runTests"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Rider Plugin Development

<link-summary>Introduction to developing plugins for Rider.</link-summary>

<var name="productID" value="rider"/>
<var name="marketplaceProductID" value="rider"/>
<include from="snippets.md" element-id="jetbrainsIDE_TLDR"/>

Rider plugins are generally used to expose the functionality of a [ReSharper](https://www.jetbrains.com/resharper/) plugin.
[Rider](https://www.jetbrains.com/rider/) uses the IntelliJ Platform somewhat [differently](intellij_platform.md#rider) than other Platform-based based IDEs.
Rider uses the IntelliJ Platform to provide the user interface for a C# and .NET IDE but uses ReSharper to provide the language-specific features.

> Rider is free for non-commercial use

## IntelliJ IDEA Configuration for Rider Plugin Development

Although there is no dedicated Rider SDK, the [ReSharper DevGuide](https://www.jetbrains.com/help/resharper/sdk/getting_started.html) addresses the subject of plugins for Rider.
The documentation describes the [configuration](https://www.jetbrains.com/help/resharper/sdk/creating_plugin.html) of the Gradle build script and <path>settings.gradle</path> file to build a Rider plugin using the [Gradle build system](creating_plugin_project.md) in IntelliJ IDEA.

> See [](rider_extension_point_list.md) for the complete list.
>
{style="note"}

## Developing Rider Plugins with the IDEA and ReSharper SDKs

Before starting a new Rider plugin project, review the article [Writing plugins for ReSharper and Rider](https://blog.jetbrains.com/dotnet/2019/02/14/writing-plugins-resharper-rider/).
In particular, this article discusses _One Template to Rule Them All_, a way to quickly get started writing plugins for both Rider and ReSharper.

More background information is available in the [Building a .NET IDE with JetBrains Rider](https://www.codemag.com/Article/1811091/Building-a-.NET-IDE-with-JetBrains-Rider) article, which includes a high-level description of the _Rider Protocol_ communication process between Rider and ReSharper.
The article is a good counterpoint to the ReSharper DevGuide content, which discusses the protocol at the code level.

## Including Custom Settings into a Plugin

Rider plugins may introduce their own <path>.DotSettings</path> files with customized [ReSharper settings](https://www.jetbrains.com/help/resharper/Sharing_Configuration_Options.html).
This is useful e.g. when a plugin brings its own file templates.

For the ReSharper part to pick these settings, the settings files should be available in the plugin JAR file under the path <path>dotnet/Extensions/\$backend-plugin-id\$/settings</path>, where `backend-plugin-id` is calculated according to the following rules:

- if the IntelliJ plugin id (the [`<id>`](plugin_configuration_file.md#idea-plugin__id) element of the <path>[plugin.xml](plugin_configuration_file.md)</path>) includes a dot, then `backend-plugin-id` is the same as the IntelliJ plugin id;
- otherwise, the `backend-plugin-id` is a concatenation of the IntelliJ plugin vendor name (the [`<vendor>`](plugin_configuration_file.md#idea-plugin__vendor) element of the <path>plugin.xml</path>) and the IntelliJ plugin id.

For example, for a plugin with the following <path>plugin.xml</path> contents, the file <path>dotnet/Extensions/com.example.awesomeplugin/settings/templates.DotSettings</path> would be picked up:

```xml
<idea-plugin>
  <id>com.example.awesomeplugin</id>
  <!-- ... -->
</idea-plugin>
```

And the following <path>plugin.xml</path> would require placing the file under <path>dotnet/Extensions/Jean-Luc Picard.Enterprise/settings/templates.DotSettings</path> path:

```xml
<idea-plugin>
  <id>Enterprise</id>
  <vendor>Jean-Luc Picard</vendor>
  <!-- ... -->
</idea-plugin>
```

## Open Source Rider Plugins

It can be useful to refer to existing projects to help understand how to build plugins for Rider.
The following list of plugins is all open source, and can demonstrate how to implement different functionality.
Please note that the list includes ReSharper plugins as well as Rider plugins.
Since a lot of Rider's language features are shared with the ReSharper engine, and since the Rider SDK includes the ReSharper SDK, then it can be useful to look at ReSharper plugins too.
Also note that these plugins might not be up-to-date with the current SDK.

* [Unity support for both ReSharper and Rider](https://github.com/JetBrains/resharper-unity)
* [F# support in JetBrains Rider](https://github.com/JetBrains/fsharp-support)
* [AgentMulder](https://github.com/ERNICommunity/AgentMulder/)
* [ConfigureAwaitChecker](https://github.com/aelij/ConfigureAwaitChecker/)
* [CognitiveComplexity](https://github.com/matkoch/resharper-cognitivecomplexity/)
* [CyclomaticComplexity](https://github.com/JetBrains/resharper-cyclomatic-complexity/)
* [Exceptional](https://github.com/CSharpAnalyzers/ExceptionalReSharper/)
* [HeapAllocationsViewer](https://github.com/citizenmatt/resharper-heapview/)
* [InternalsVisibleTo](https://github.com/hmemcpy/ReSharper.InternalsVisibleTo/)
* [PresentationAssistant](https://github.com/JetBrains/resharper-presentation-assistant/)
* [StyleCop](https://github.com/StyleCop/StyleCop.ReSharper/)
* [TestLinker](https://github.com/matkoch/TestLinker/)
* [Xao](https://github.com/hmemcpy/ReSharper.Xao/)
* [Azure Toolkit for Rider](https://github.com/JetBrains/azure-tools-for-intellij)
* [T4 language support for both ReSharper and Rider](https://github.com/JetBrains/ForTea)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<!-- EP List Directory: /rider/ -->

# Rider Extension Point and Listener List

<link-summary>Overview of Extension Points and Listeners for Rider.</link-summary>

<tldr>

**Product-Specific Plugin Development**: [Rider](rider.md)

</tldr>

140 Extension Points and 7 Listeners for Rider

See [](intellij_platform_extension_point_list.md) for IntelliJ Platform.

<include from="snippets.md" element-id="ep_list_legend"/>

## Rider

### Rider – Listeners

| Topic | Listener |
|-------|----------|
| [RiderStyleCopConfigurable#STYLE_COP_CONFIGURABLE_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.application.options.editor.EditorOptionsListener)  | [`EditorOptionsListener`](%gh-ic%/platform/platform-impl/src/com/intellij/application/options/editor/EditorOptionsListener.java) |
| [SSHCredentialsInClipboardNotifier.Companion#SSH_CREDENTIALS_IN_CLIPBOARD_TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.rider.debugger.attach.remoting.SSHCredentialsInClipboardNotifier)  | `SSHCredentialsInClipboardNotifier` |
| [DotnetDebuggerSymbolsLoadedListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.rider.debugger.modulesView.actions.DotnetDebuggerSymbolsLoadedListener)  | `DotnetDebuggerSymbolsLoadedListener` |
| [FrontendTypedHandlerManager#BEFORE_TYPING_SENT](https://jb.gg/ipe/listeners?topics=com.jetbrains.rider.editorActions.IFrontendTypingListener)  | `IFrontendTypingListener` |
| [RiderDockerDeploymentListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.rider.plugins.appender.docker.deployment.RiderDockerDeploymentListener)  | `RiderDockerDeploymentListener` |
| [MSBuildEvaluationListener.Companion#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.rider.run.environment.MSBuildEvaluationListener)  | `MSBuildEvaluationListener` |
| [RiderGlobalBackendProgressListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.jetbrains.rider.services.RiderGlobalProgressHost.RiderGlobalBackendProgressListener)  | `RiderGlobalBackendProgressListener` |


### com.jetbrains.dotTrace.dotMemory

| Extension Point | Implementation |
|-----------------|----------------|
| [com.jetbrains.dotTrace.dotMemory.runtime.detector](https://jb.gg/ipe?extensions=com.jetbrains.dotTrace.dotMemory.runtime.detector) | `DotTraceRuntimeDetector` |

### com.jetbrains.rider-cpp

| Extension Point | Implementation |
|-----------------|----------------|
| [com.jetbrains.rider-cpp.run.configurations.cpp](https://jb.gg/ipe?extensions=com.jetbrains.rider-cpp.run.configurations.cpp) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `CppConfigurationParametersExtension` |
| [com.jetbrains.rider-cpp.run.configurations.cpp.launch.profile](https://jb.gg/ipe?extensions=com.jetbrains.rider-cpp.run.configurations.cpp.launch.profile) ![Non-Dynamic][non-dynamic] | `CppProjectLaunchProfile` |
| [com.jetbrains.rider-cpp.run.configurations.cpp.platformInfoProvider](https://jb.gg/ipe?extensions=com.jetbrains.rider-cpp.run.configurations.cpp.platformInfoProvider) ![Non-Dynamic][non-dynamic] | `CppPlatformInfoProvider` |
| [com.jetbrains.rider-cpp.run.configurations.cpp.platformPluginPromotion](https://jb.gg/ipe?extensions=com.jetbrains.rider-cpp.run.configurations.cpp.platformPluginPromotion) ![Non-Dynamic][non-dynamic] ![Internal][internal] | `CppPlatformPluginPromotion` |
| [rider.cpp.debugProcessExtension](https://jb.gg/ipe?extensions=rider.cpp.debugProcessExtension) | `RiderCppDebugProcessExtension` |

### com.jetbrains.rider.razor

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.rider.blazorDialectSubstitutor](https://jb.gg/ipe?extensions=com.intellij.rider.blazorDialectSubstitutor) ![Non-Dynamic][non-dynamic] | `BlazorHtmlDialectSubstitutor` |

### DotNetPluginEP.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.backend.actions.support](https://jb.gg/ipe?extensions=com.intellij.backend.actions.support) | `RiderActionSupportPolicy` |
| [com.intellij.backend.auto.import.support](https://jb.gg/ipe?extensions=com.intellij.backend.auto.import.support) | `RiderAutoImportSupportPolicy` |
| [com.intellij.backend.autoPopup.support](https://jb.gg/ipe?extensions=com.intellij.backend.autoPopup.support) | `RiderAutoPopupSupportPolicy` |
| [com.intellij.backend.markup.adapterFactory](https://jb.gg/ipe?extensions=com.intellij.backend.markup.adapterFactory) ![Non-Dynamic][non-dynamic] | `FrontendMarkupAdapterFactory` |
| [com.intellij.backend.typedHandler](https://jb.gg/ipe?extensions=com.intellij.backend.typedHandler) | `FrontendTypedHandler` |
| [com.intellij.completion.completionSessionStrategy](https://jb.gg/ipe?extensions=com.intellij.completion.completionSessionStrategy) | `CompletionSessionStrategy` |
| [com.intellij.frontend.completion.helper](https://jb.gg/ipe?extensions=com.intellij.frontend.completion.helper) | `ICompletionHelper` |
| [com.intellij.lang.altEnter](https://jb.gg/ipe?extensions=com.intellij.lang.altEnter) | `BulbMenuModelFactory` |
| [com.intellij.lang.altEnter.popupModelDelegate](https://jb.gg/ipe?extensions=com.intellij.lang.altEnter.popupModelDelegate) | `PopupModelDelegate` |
| [com.intellij.navbar.members.support](https://jb.gg/ipe?extensions=com.intellij.navbar.members.support) | `RiderNavBarMembersSupport` |
| [com.intellij.projectModelViewUpdater](https://jb.gg/ipe?extensions=com.intellij.projectModelViewUpdater) ![Project-Level][project-level] | `ProjectModelViewUpdater` |
| [com.intellij.rdclient.actionsDataContextProvider](https://jb.gg/ipe?extensions=com.intellij.rdclient.actionsDataContextProvider) ![Internal][internal] | `FrontendActionsDataContextProvider` |
| [com.intellij.rdclient.preemptiveCompletionSuppressor](https://jb.gg/ipe?extensions=com.intellij.rdclient.preemptiveCompletionSuppressor) | `PreemptiveCompletionSuppressor` |
| [com.intellij.rdclient.typingPolicy](https://jb.gg/ipe?extensions=com.intellij.rdclient.typingPolicy) | `CustomTypingSessionPolicy` |
| [com.intellij.rider.action.fallback.strategy](https://jb.gg/ipe?extensions=com.intellij.rider.action.fallback.strategy) | `RiderAsyncBackendDelegatingActionFallbackStrategy` |
| [com.intellij.rider.altEnter.layouter](https://jb.gg/ipe?extensions=com.intellij.rider.altEnter.layouter) | `RiderAltEnterLayouter` |
| [com.intellij.rider.backendCrashAnalyser](https://jb.gg/ipe?extensions=com.intellij.rider.backendCrashAnalyser) | `BackendCrashAnalyzer` |
| [com.intellij.rider.backendLogXmlPathProvider](https://jb.gg/ipe?extensions=com.intellij.rider.backendLogXmlPathProvider) | `RiderCustomBackendLogXmlPathProvider` |
| [com.intellij.rider.codeStyleContentConverter](https://jb.gg/ipe?extensions=com.intellij.rider.codeStyleContentConverter) | `RiderCodeStyleContentPageConverter` |
| [com.intellij.rider.credentials.provider](https://jb.gg/ipe?extensions=com.intellij.rider.credentials.provider) | `ICredentialsProvider` |
| [com.intellij.rider.diagnostics.specialPathsProvider](https://jb.gg/ipe?extensions=com.intellij.rider.diagnostics.specialPathsProvider) | `SpecialPathsProvider` |
| [com.intellij.rider.documentBehaviour](https://jb.gg/ipe?extensions=com.intellij.rider.documentBehaviour) | `RiderDocumentBehaviour` |
| [com.intellij.rider.editors.customBackendLanguageSupport](https://jb.gg/ipe?extensions=com.intellij.rider.editors.customBackendLanguageSupport) | `RiderCustomBackendLanguageSupport` |
| [com.intellij.rider.extraSettingsSync](https://jb.gg/ipe?extensions=com.intellij.rider.extraSettingsSync) | `ExtraSettingsSync` |
| [com.intellij.rider.fileBreadcrumbExtensions](https://jb.gg/ipe?extensions=com.intellij.rider.fileBreadcrumbExtensions) | `CustomFileBreadcrumbExtensions` |
| [com.intellij.rider.grave.filter](https://jb.gg/ipe?extensions=com.intellij.rider.grave.filter) ![Experimental][experimental] | `RiderHighlightingGraveFilter` |
| [com.intellij.rider.ideaInspectionBackendSuppressionSupport](https://jb.gg/ipe?extensions=com.intellij.rider.ideaInspectionBackendSuppressionSupport) | `IdeaInspectionBackendSuppressionSupport` |
| [com.intellij.rider.namingPageProvider](https://jb.gg/ipe?extensions=com.intellij.rider.namingPageProvider) | `NamingPageProvider` |
| [com.intellij.rider.protocol.hostEnvProvider](https://jb.gg/ipe?extensions=com.intellij.rider.protocol.hostEnvProvider) | `RiderBackendEnvProvider` |
| [com.intellij.rider.riderApplicationPreloadListener](https://jb.gg/ipe?extensions=com.intellij.rider.riderApplicationPreloadListener) | `RiderApplicationPreloadListener` |
| [com.intellij.rider.smartTabsBackendSynchronizer](https://jb.gg/ipe?extensions=com.intellij.rider.smartTabsBackendSynchronizer) ![Non-Dynamic][non-dynamic] | `RiderSmartTabsBackendSynchronizer` |
| [com.intellij.rider.wrappedMergeableIconProvider](https://jb.gg/ipe?extensions=com.intellij.rider.wrappedMergeableIconProvider) | `RiderWrappedMergeableIconProvider` |
| [com.intellij.selfProfilingPaths.customizer](https://jb.gg/ipe?extensions=com.intellij.selfProfilingPaths.customizer) | `DotnetSelfProfilerPathsCustomizer` |
| [com.intellij.solutionLoadNotification](https://jb.gg/ipe?extensions=com.intellij.solutionLoadNotification) ![Project-Level][project-level] | `SolutionLoadNotification` |

### DotNetProjectView.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.rider.projectModelIconProvider](https://jb.gg/ipe?extensions=com.intellij.rider.projectModelIconProvider) | `ProjectModelIconProvider` |
| [com.intellij.rider.workspaceCountableProjectsPolicy](https://jb.gg/ipe?extensions=com.intellij.rider.workspaceCountableProjectsPolicy) | `CountableProjectsPolicy` |

### intellij.rider.cpp.debugger

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.rider.cpp.debuggerSettings](https://jb.gg/ipe?extensions=com.intellij.rider.cpp.debuggerSettings) ![Non-Dynamic][non-dynamic] | `CppDebuggerSettings` |

### intellij.rider.plugins.appender.database.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.rider.database.connectionStringRetriever](https://jb.gg/ipe?extensions=com.intellij.rider.database.connectionStringRetriever) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `DatabaseConnectionUrlRetriever` |
| [com.intellij.rider.database.connectionStringToJdbcUrlMapper](https://jb.gg/ipe?extensions=com.intellij.rider.database.connectionStringToJdbcUrlMapper) ![Project-Level][project-level] | `ConnectionStringToJdbcUrlConverter` |
| [com.intellij.rider.database.connectionStringsFactory](https://jb.gg/ipe?extensions=com.intellij.rider.database.connectionStringsFactory) ![Project-Level][project-level] | `ConnectionStringsFactory` |
| [com.intellij.rider.database.connectionStringsFinder](https://jb.gg/ipe?extensions=com.intellij.rider.database.connectionStringsFinder) ![Project-Level][project-level] | `ConnectionStringsFinder` |
| [com.intellij.rider.database.dotnetDataProvider](https://jb.gg/ipe?extensions=com.intellij.rider.database.dotnetDataProvider) ![Project-Level][project-level] | `DotnetDataProvider` |
| [com.intellij.rider.database.jdbcUrlToConnectionStringConverter](https://jb.gg/ipe?extensions=com.intellij.rider.database.jdbcUrlToConnectionStringConverter) ![Project-Level][project-level] | `JdbcUrlToConnectionStringConverter` |
| [com.intellij.rider.database.schemaCompareDataModelCreatedListener](https://jb.gg/ipe?extensions=com.intellij.rider.database.schemaCompareDataModelCreatedListener) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `SchemaCompareDataModelCreatedListener` |

### intellij.rider.plugins.appender.docker.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.rider.dockerDebugProvider](https://jb.gg/ipe?extensions=com.intellij.rider.dockerDebugProvider) ![Non-Dynamic][non-dynamic] ![Internal][internal] | `RiderDockerDebugProvider` |
| [com.intellij.rider.dockerDeploymentTransformer](https://jb.gg/ipe?extensions=com.intellij.rider.dockerDeploymentTransformer) ![Non-Dynamic][non-dynamic] ![Internal][internal] | `RiderDockerDeploymentTransformer` |

### intellij.rider.plugins.appender.javascript.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [JavaScript.packageJson.configuration.handler](https://jb.gg/ipe?extensions=JavaScript.packageJson.configuration.handler) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `RiderPackageJsonConfiguratorHandler` |

### intellij.rider.rdclient.languages.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.rider.rdclient.breakingWorkflowChangeInterceptor](https://jb.gg/ipe?extensions=com.intellij.rider.rdclient.breakingWorkflowChangeInterceptor) ![Non-Dynamic][non-dynamic] ![Experimental][experimental] ![Internal][internal] | `RiderBreakingWorkflowChangeInterceptor` |

### org.jetbrains.plugins.clion.radler

| Extension Point | Implementation |
|-----------------|----------------|
| [cidr.radler.externalSymbolsProvider](https://jb.gg/ipe?extensions=cidr.radler.externalSymbolsProvider) | `RadExternalSymbolsProvider` |
| [com.intellij.rider.refactoringPageProvider](https://jb.gg/ipe?extensions=com.intellij.rider.refactoringPageProvider) ![Non-Dynamic][non-dynamic] | `RefactoringPageProvider` |

### RiderCwmCoreEP.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.rider.client.typedHandler](https://jb.gg/ipe?extensions=com.intellij.rider.client.typedHandler) | `RiderClientLookupTypedHandler` |

### RiderDebugger.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.rider.debugger.evaluation.advice](https://jb.gg/ipe?extensions=com.intellij.rider.debugger.evaluation.advice) | `DebugEvalAdviceProvider` |

### RiderExtensionPoints.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.fileSystemExplorerCustomization](https://jb.gg/ipe?extensions=com.intellij.fileSystemExplorerCustomization) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `FileSystemExplorerCustomization` |
| [com.intellij.moveProviderExtension](https://jb.gg/ipe?extensions=com.intellij.moveProviderExtension) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `MoveProviderExtension` |
| [com.intellij.nestingRulesLanguageExtensions](https://jb.gg/ipe?extensions=com.intellij.nestingRulesLanguageExtensions) ![Non-Dynamic][non-dynamic] | `RiderNestingRulesLanguageExtensions` |
| [com.intellij.nugetCredentialProvider](https://jb.gg/ipe?extensions=com.intellij.nugetCredentialProvider) ![Non-Dynamic][non-dynamic] | `NuGetCredentialProvider` |
| [com.intellij.openDirectoryExtensions](https://jb.gg/ipe?extensions=com.intellij.openDirectoryExtensions) ![Non-Dynamic][non-dynamic] | `OpenDirectoryExtensions` |
| [com.intellij.projectModelViewExtensions](https://jb.gg/ipe?extensions=com.intellij.projectModelViewExtensions) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `ProjectModelViewExtensions` |
| [com.intellij.projectTemplateCustomizer](https://jb.gg/ipe?extensions=com.intellij.projectTemplateCustomizer) ![Non-Dynamic][non-dynamic] | `ProjectTemplateCustomizer` |
| [com.intellij.projectTemplateProviderNew](https://jb.gg/ipe?extensions=com.intellij.projectTemplateProviderNew) ![Non-Dynamic][non-dynamic] | `ProjectTemplateProvider` |
| [com.intellij.rider.ProjectTypesProvider](https://jb.gg/ipe?extensions=com.intellij.rider.ProjectTypesProvider) ![Non-Dynamic][non-dynamic] | `RiderProjectTypesProvider` |
| [com.intellij.rider.SolutionFileTypesProvider](https://jb.gg/ipe?extensions=com.intellij.rider.SolutionFileTypesProvider) ![Non-Dynamic][non-dynamic] | `SolutionFileTypesProvider` |
| [com.intellij.rider.action.technical.support.info.provider](https://jb.gg/ipe?extensions=com.intellij.rider.action.technical.support.info.provider) ![Non-Dynamic][non-dynamic] | `RiderTechnicalSupportInfoProvider` |
| [com.intellij.rider.breakpoint.customPanelProvider](https://jb.gg/ipe?extensions=com.intellij.rider.breakpoint.customPanelProvider) ![Non-Dynamic][non-dynamic] | `IDotNetLineBreakpointCustomPanelsProvider` |
| [com.intellij.rider.breakpoint.customPopupActionsProvider](https://jb.gg/ipe?extensions=com.intellij.rider.breakpoint.customPopupActionsProvider) ![Non-Dynamic][non-dynamic] | `IDotNetLineBreakpointPopupActionsProvider` |
| [com.intellij.rider.build.riderBuildConsoleDecorator](https://jb.gg/ipe?extensions=com.intellij.rider.build.riderBuildConsoleDecorator) ![Project-Level][project-level] | `RiderBuildConsoleDecorator` |
| [com.intellij.rider.buildButtonModeProvider](https://jb.gg/ipe?extensions=com.intellij.rider.buildButtonModeProvider) | `BuildButtonModeProvider` |
| [com.intellij.rider.codeLens.vcsDeclarationRangesProvider](https://jb.gg/ipe?extensions=com.intellij.rider.codeLens.vcsDeclarationRangesProvider) ![Non-Dynamic][non-dynamic] | `VcsDeclarationRangesProvider` |
| [com.intellij.rider.completion.csharpIdentifierPartHelper](https://jb.gg/ipe?extensions=com.intellij.rider.completion.csharpIdentifierPartHelper) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `CSharpIdentifierPartHelper` |
| [com.intellij.rider.completion.preselectionStrategy](https://jb.gg/ipe?extensions=com.intellij.rider.completion.preselectionStrategy) ![Non-Dynamic][non-dynamic] | `RiderFrontendLanguagesPreselectionStrategy` |
| [com.intellij.rider.configurationExecutorExtension](https://jb.gg/ipe?extensions=com.intellij.rider.configurationExecutorExtension) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `RiderConfigurationExecutorExtension` |
| [com.intellij.rider.configurationLaunchSettingsExtension](https://jb.gg/ipe?extensions=com.intellij.rider.configurationLaunchSettingsExtension) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `RiderConfigurationLaunchSettingsExtension` |
| [com.intellij.rider.consoleFilter](https://jb.gg/ipe?extensions=com.intellij.rider.consoleFilter) | `RiderConsoleFilterExtension` |
| [com.intellij.rider.contributedLanguageElementNameCrawler](https://jb.gg/ipe?extensions=com.intellij.rider.contributedLanguageElementNameCrawler) | `RiderContributedLanguageElementNameCrawler` |
| [com.intellij.rider.debug.breakpoint.handler.factory](https://jb.gg/ipe?extensions=com.intellij.rider.debug.breakpoint.handler.factory) ![Non-Dynamic][non-dynamic] | `IDotNetSupportedBreakpointHandlerFactory` |
| [com.intellij.rider.debugger.value.evaluator.factory](https://jb.gg/ipe?extensions=com.intellij.rider.debugger.value.evaluator.factory) ![Non-Dynamic][non-dynamic] | `RiderCustomComponentEvaluatorFactory` |
| [com.intellij.rider.debugger.value.presenter](https://jb.gg/ipe?extensions=com.intellij.rider.debugger.value.presenter) ![Non-Dynamic][non-dynamic] | `RiderDebuggerValuePresenter` |
| [com.intellij.rider.debuggerSupportPolicy](https://jb.gg/ipe?extensions=com.intellij.rider.debuggerSupportPolicy) ![Non-Dynamic][non-dynamic] | `RiderDebuggerSupportPolicy` |
| [com.intellij.rider.editSourceSuppressor](https://jb.gg/ipe?extensions=com.intellij.rider.editSourceSuppressor) ![Non-Dynamic][non-dynamic] | `RiderEditSourceSuppressor` |
| [com.intellij.rider.extendedCodeStructure](https://jb.gg/ipe?extensions=com.intellij.rider.extendedCodeStructure) ![Non-Dynamic][non-dynamic] | `RiderExtendedFileStructure` |
| [com.intellij.rider.externalDirectoryProvider](https://jb.gg/ipe?extensions=com.intellij.rider.externalDirectoryProvider) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `ExternalDirectoryProvider` |
| [com.intellij.rider.fileTemplating.postCreateAction](https://jb.gg/ipe?extensions=com.intellij.rider.fileTemplating.postCreateAction) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `RiderNewFileFromTemplateExtension` |
| [com.intellij.rider.filesIndexingRuleProvider](https://jb.gg/ipe?extensions=com.intellij.rider.filesIndexingRuleProvider) ![Non-Dynamic][non-dynamic] | `RiderFilesIndexingRuleProvider` |
| [com.intellij.rider.findPopupProjectScopeProvider](https://jb.gg/ipe?extensions=com.intellij.rider.findPopupProjectScopeProvider) | `FindPopupProjectScopeProvider` |
| [com.intellij.rider.godotDetector](https://jb.gg/ipe?extensions=com.intellij.rider.godotDetector) | `GodotDetector` |
| [com.intellij.rider.gotoCustomizer](https://jb.gg/ipe?extensions=com.intellij.rider.gotoCustomizer) | `GotoCustomizer` |
| [com.intellij.rider.guidPresenter](https://jb.gg/ipe?extensions=com.intellij.rider.guidPresenter) ![Project-Level][project-level] | `GuidGeneratorPresenter` |
| [com.intellij.rider.newFileListener](https://jb.gg/ipe?extensions=com.intellij.rider.newFileListener) ![Project-Level][project-level] | `RiderNewFileListener` |
| [com.intellij.rider.newRunConfigurationTreeGroupingProvider](https://jb.gg/ipe?extensions=com.intellij.rider.newRunConfigurationTreeGroupingProvider) ![Non-Dynamic][non-dynamic] | `RiderNewRunConfigurationTreeGroupingProvider` |
| [com.intellij.rider.patchCommandLine](https://jb.gg/ipe?extensions=com.intellij.rider.patchCommandLine) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `PatchCommandLineExtension` |
| [com.intellij.rider.pencils.filters.provider](https://jb.gg/ipe?extensions=com.intellij.rider.pencils.filters.provider) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `PencilsFiltersProvider` |
| [com.intellij.rider.pencils.inspectionToolGroup](https://jb.gg/ipe?extensions=com.intellij.rider.pencils.inspectionToolGroup) ![Non-Dynamic][non-dynamic] | `n/a` |
| [com.intellij.rider.pencils.pencilsFilterGroup](https://jb.gg/ipe?extensions=com.intellij.rider.pencils.pencilsFilterGroup) ![Non-Dynamic][non-dynamic] | `n/a` |
| [com.intellij.rider.problemsView.actionsHandler](https://jb.gg/ipe?extensions=com.intellij.rider.problemsView.actionsHandler) ![Non-Dynamic][non-dynamic] | `RiderProblemsViewActionsHandler` |
| [com.intellij.rider.problemsView.problems.notifier](https://jb.gg/ipe?extensions=com.intellij.rider.problemsView.problems.notifier) ![Non-Dynamic][non-dynamic] | `ProblemsViewNotifier` |
| [com.intellij.rider.problemsView.problems.processor](https://jb.gg/ipe?extensions=com.intellij.rider.problemsView.problems.processor) | `RiderProblemsDiffProcessor` |
| [com.intellij.rider.publish.publishSettingsProvider](https://jb.gg/ipe?extensions=com.intellij.rider.publish.publishSettingsProvider) ![Project-Level][project-level] | `IPublishRuntimeCoreSettingsProvider` |
| [com.intellij.rider.publishConfigurationProvider](https://jb.gg/ipe?extensions=com.intellij.rider.publishConfigurationProvider) ![Non-Dynamic][non-dynamic] | `RiderContextPublishProvider` |
| [com.intellij.rider.reader.mode.matcher](https://jb.gg/ipe?extensions=com.intellij.rider.reader.mode.matcher) | `RiderCustomReaderModeMatcher` |
| [com.intellij.rider.refactoringPageProvider](https://jb.gg/ipe?extensions=com.intellij.rider.refactoringPageProvider) ![Non-Dynamic][non-dynamic] | `RefactoringPageProvider` |
| [com.intellij.rider.resolveContextWidgetProvider](https://jb.gg/ipe?extensions=com.intellij.rider.resolveContextWidgetProvider) ![Non-Dynamic][non-dynamic] | `RiderResolveContextWidgetProvider` |
| [com.intellij.rider.run.configurations.dotNetExe](https://jb.gg/ipe?extensions=com.intellij.rider.run.configurations.dotNetExe) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `DotNetExeConfigurationExtension` |
| [com.intellij.rider.run.configurations.externalRunConfigurationGenerator](https://jb.gg/ipe?extensions=com.intellij.rider.run.configurations.externalRunConfigurationGenerator) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `ExternalRunConfigurationGeneratorExtension` |
| [com.intellij.rider.run.configurations.host](https://jb.gg/ipe?extensions=com.intellij.rider.run.configurations.host) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `RunConfigurationHostExtensions` |
| [com.intellij.rider.run.configurations.host.executor](https://jb.gg/ipe?extensions=com.intellij.rider.run.configurations.host.executor) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `RunConfigurationHostExecutorExtensions` |
| [com.intellij.rider.run.configurations.launchSettings](https://jb.gg/ipe?extensions=com.intellij.rider.run.configurations.launchSettings) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `LaunchSettingsConfigurationExtension` |
| [com.intellij.rider.run.configurations.launchSettings.command](https://jb.gg/ipe?extensions=com.intellij.rider.run.configurations.launchSettings.command) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `LaunchSettingsCommandExtension` |
| [com.intellij.rider.run.configurations.launchSettings.generator](https://jb.gg/ipe?extensions=com.intellij.rider.run.configurations.launchSettings.generator) | `LaunchSettingsConfigGeneratorExtension` |
| [com.intellij.rider.run.configurations.multiPlatform.mac.extension](https://jb.gg/ipe?extensions=com.intellij.rider.run.configurations.multiPlatform.mac.extension) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `MacRunConfigurationExtension` |
| [com.intellij.rider.run.configurations.project](https://jb.gg/ipe?extensions=com.intellij.rider.run.configurations.project) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `DotNetProjectConfigurationExtension` |
| [com.intellij.rider.run.configurations.riderCoreDumpConfigurationProvider](https://jb.gg/ipe?extensions=com.intellij.rider.run.configurations.riderCoreDumpConfigurationProvider) ![Non-Dynamic][non-dynamic] | `RiderCoreDumpConfigurationProvider` |
| [com.intellij.rider.run.configurations.uwp](https://jb.gg/ipe?extensions=com.intellij.rider.run.configurations.uwp) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `UwpConfigurationExtension` |
| [com.intellij.rider.run.dotNetProfileConsoleViewProvider](https://jb.gg/ipe?extensions=com.intellij.rider.run.dotNetProfileConsoleViewProvider) ![Non-Dynamic][non-dynamic] | `DotNetProfileConsoleViewProviderExtension` |
| [com.intellij.rider.runToPopupShowPolicy](https://jb.gg/ipe?extensions=com.intellij.rider.runToPopupShowPolicy) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `RiderRunToPopupShowPolicy` |
| [com.intellij.rider.runWidgetSuspenderExtension](https://jb.gg/ipe?extensions=com.intellij.rider.runWidgetSuspenderExtension) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `RunWidgetSuspenderExtension` |
| [com.intellij.rider.runtime.dotNetRuntimeAutodetect](https://jb.gg/ipe?extensions=com.intellij.rider.runtime.dotNetRuntimeAutodetect) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `DotNetRuntimeAutodetect` |
| [com.intellij.rider.solutionConfigurationPresenter](https://jb.gg/ipe?extensions=com.intellij.rider.solutionConfigurationPresenter) | `SolutionConfigurationPresenter` |
| [com.intellij.rider.solutionConfigurationToolbarCustomizer](https://jb.gg/ipe?extensions=com.intellij.rider.solutionConfigurationToolbarCustomizer) | `SolutionConfigurationToolbarCustomizer` |
| [com.intellij.rider.unitTesting.actionsProvider](https://jb.gg/ipe?extensions=com.intellij.rider.unitTesting.actionsProvider) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `RiderUnitTestActionsProvider` |
| [com.intellij.rider.unitTesting.sessionHandler](https://jb.gg/ipe?extensions=com.intellij.rider.unitTesting.sessionHandler) ![Non-Dynamic][non-dynamic] | `IRiderUnitTestDebuggerSessionsHandler` |
| [com.intellij.rider.unityDetector](https://jb.gg/ipe?extensions=com.intellij.rider.unityDetector) ![Project-Level][project-level] | `UnityDetector` |
| [com.intellij.rider.web.extensions.companionDebugStarter](https://jb.gg/ipe?extensions=com.intellij.rider.web.extensions.companionDebugStarter) ![Non-Dynamic][non-dynamic] | `DotNetCompanionDebugStarter` |
| [com.intellij.rider.web.extensions.webBrowserDebugSupport](https://jb.gg/ipe?extensions=com.intellij.rider.web.extensions.webBrowserDebugSupport) ![Non-Dynamic][non-dynamic] | `WebBrowserDebugSupport` |
| [com.intellij.rider.writingAccessProvider](https://jb.gg/ipe?extensions=com.intellij.rider.writingAccessProvider) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `RiderDebugWritingAccessProvider` |
| [com.intellij.rider.xaml.preview.editor](https://jb.gg/ipe?extensions=com.intellij.rider.xaml.preview.editor) ![Non-Dynamic][non-dynamic] | `XamlPreviewEditorExtension` |
| [com.intellij.solutionExplorerCustomization](https://jb.gg/ipe?extensions=com.intellij.solutionExplorerCustomization) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `SolutionExplorerCustomization` |
| [com.intellij.solutionExplorerRootProvider](https://jb.gg/ipe?extensions=com.intellij.solutionExplorerRootProvider) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `SolutionExplorerRootProvider` |
| [com.intellij.solutionManagerExtensions](https://jb.gg/ipe?extensions=com.intellij.solutionManagerExtensions) ![Non-Dynamic][non-dynamic] | `SolutionManagerExtensions` |
| [com.intellij.solutionViewPsiNodeNavigator](https://jb.gg/ipe?extensions=com.intellij.solutionViewPsiNodeNavigator) ![Non-Dynamic][non-dynamic] ![Project-Level][project-level] | `SolutionViewPsiNodeNavigator` |

### RiderReformatAndCleanup.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.code.cleanup.support](https://jb.gg/ipe?extensions=com.intellij.code.cleanup.support) | `RiderCodeCleanupSupportPolicy` |
| [com.intellij.rider.ProfileActionPrinter](https://jb.gg/ipe?extensions=com.intellij.rider.ProfileActionPrinter) ![Non-Dynamic][non-dynamic] | `ProfileActionPrinter` |
| [com.intellij.rider.cleanupAction](https://jb.gg/ipe?extensions=com.intellij.rider.cleanupAction) ![Non-Dynamic][non-dynamic] | `CleanupAction` |

### RiderSettingsSync.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.rider.settings.machineDependentBackendSetting](https://jb.gg/ipe?extensions=com.intellij.rider.settings.machineDependentBackendSetting) ![Non-Dynamic][non-dynamic] | `n/a` |

[deprecated]: https://img.shields.io/badge/-Deprecated-lightgrey?style=flat-square
[removal]: https://img.shields.io/badge/-Removal-red?style=flat-square
[obsolete]: https://img.shields.io/badge/-Obsolete-grey?style=flat-square
[experimental]: https://img.shields.io/badge/-Experimental-violet?style=flat-square
[internal]: https://img.shields.io/badge/-Internal-darkred?style=flat-square
[project-level]: https://img.shields.io/badge/-Project--Level-blue?style=flat-square
[non-dynamic]: https://img.shields.io/badge/-Non--Dynamic-orange?style=flat-square
[dumb-aware]: https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# RubyMine Plugin Development

<link-summary>Introduction to developing plugins for RubyMine.</link-summary>

<var name="productID" value="ruby"/>
<var name="marketplaceProductID" value="ruby"/>
<include from="snippets.md" element-id="jetbrainsIDE_TLDR"/>

[RubyMine](https://www.jetbrains.com/ruby/) is an IntelliJ Platform-based product.
Plugin projects for RubyMine can be developed using [IntelliJ IDEA](idea.md).

## RubyMine Plugin Setup

### Gradle Build Script

<tabs>
<tab title="IntelliJ Platform Gradle Plugin (2.x)">

Define a dependency using [`rubymine()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md), see _Versions_ link on top of this page for all available versions.
See [](tools_intellij_platform_gradle_plugin.md#dependenciesLocalPlatform) for using a local installation.

A dependency on the bundled `org.jetbrains.plugins.ruby` plugin must be added using the [`bundledPlugin()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins) helper.

Minimum <path>build.gradle.kts</path> setup:

```kotlin
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    rubymine("<versionNumber>")
    bundledPlugin("org.jetbrains.plugins.ruby")
  }
}
```

</tab>

<tab title="Gradle IntelliJ Plugin (1.x)">
The configuration of RubyMine plugin projects follows the methods described in [Configuring Plugin Projects using the IntelliJ IDEA Product Attribute](dev_alternate_products.md#configuring-plugin-projects-using-the-intellij-idea-product-attribute), and [Configuring the plugin.xml File](dev_alternate_products.md#configuring-pluginxml).

The table below summarizes the [](tools_gradle_intellij_plugin.md) attributes to set in the Gradle build script for a RubyMine plugin project.
Click on an entry in the table's *Attribute* column to go to the documentation about that attribute.
To see how these attributes appear in a similar Gradle build script for PhpStorm, see [](dev_alternate_products.md#configuring-gradle-build-script-using-the-intellij-idea-product-attribute).

| `gradle-intellij-plugin` Attribute                                               | Attribute Value                                                                                                                                                                                                                |
|----------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [`intellij.type`](tools_gradle_intellij_plugin.md#intellij-extension-type)       | `IU` for IntelliJ IDEA Ultimate.                                                                                                                                                                                               |
| [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version) | Set to the same `IU` BRANCH.BUILD as the RubyMine target version, e.g. `192.7142.36`.                                                                                                                                          |
| [`intellij.plugins`](tools_gradle_intellij_plugin.md#intellij-extension-plugins) | <p>`org.jetbrains.plugins.ruby:2019.2.20191029` for the Ruby plugin.</p><p>See below for Ruby plugin version information.</p>                                                                                                  |
| [`runIde.ideDir`](tools_gradle_intellij_plugin.md#tasks-runide-idedir)           | <p>Path to locally installed target version of RubyMine. For example, on macOS:</p><p><path>/Users/\$USERNAME\$/Library/Application Support/JetBrains/Toolbox/apps/RubyMine/ch-0/192.7142.37/RubyMine.app/Contents</path>.</p> |

The required `org.jetbrains.plugins.ruby` plugin isn't compatible with IntelliJ IDEA Community edition but is compatible with IntelliJ IDEA Ultimate (`IU`) edition.
Product compatibility is determined from the Ruby plugin [version page](https://plugins.jetbrains.com/plugin/1293-ruby/versions).
The Ruby plugin isn't bundled with `IU`, so the Ruby plugin version must be explicitly declared to support the target RubyMine (and `IU`) BRANCH.BUILD version.
The correct Ruby plugin version is also determined from the Ruby plugin version page.

</tab>
</tabs>

### plugin.xml

The dependency on the Ruby plugin APIs must be declared in the <path>[plugin.xml](plugin_configuration_file.md)</path> file.
As described in [Modules Specific to Functionality](plugin_compatibility.md#modules-specific-to-functionality) table, the [`<depends>`](plugin_configuration_file.md#idea-plugin__depends) tags must contain `com.intellij.modules.ruby`.

## Available RubyMine APIs

> See [](rubymine_extension_point_list.md) for the complete list.
>
{style="note"}

Use the [Exploring APIs as a Consumer](plugin_compatibility.md#exploring-apis-as-a-consumer) process to identify the library <path>ruby.jar</path>.
Test your plugin with any version of RubyMine you intend to support.

### RubyMine Test Framework

To use existing test base classes, add `TestFrameworkType.Plugin.Ruby` test-framework available from [](tools_intellij_platform_gradle_plugin_types.md#TestFrameworkType-Plugin).

Alternatively, specify `com.jetbrains.intellij.idea:ruby-test-framework:$VERSION$` as `testImplementation` dependency explicitly (see [IntelliJ Platform Artifacts Repositories](intellij_artifacts.md#gradle-example-for-an-individual-module-from-the-intellij-platform)).

## Open Source Plugins for RubyMine

When learning new APIs, it is helpful to have some representative projects for reference:

* [Ruby-Doc-Adder](https://github.com/aristotll/RubyDocAdder)
* [Ruby Dynamic Code Insight](https://github.com/JetBrains/ruby-type-inference)
* [Railways](https://github.com/basgren/railways)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<!-- EP List Directory: /ruby/ -->

# RubyMine Extension Point and Listener List

<link-summary>Overview of Extension Points and Listeners for RubyMine.</link-summary>

<tldr>

**Product-Specific Plugin Development**: [RubyMine](rubymine.md)

</tldr>

80 Extension Points and 13 Listeners for RubyMine

See [](intellij_platform_extension_point_list.md) for IntelliJ Platform.

<include from="snippets.md" element-id="ep_list_legend"/>

## RubyMine

### RubyMine – Listeners


| Topic | Listener |
|-------|----------|
| [RbsLanguageSettingsChangedListener#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.lang.ruby.rbs.settings.RbsLanguageSettingsChangedListener)  | `RbsLanguageSettingsChangedListener` |
| [ChefTopics#COOKBOOK](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.ruby.chef.sdk.CookbooksListener)  | `CookbooksListener` |
| [GemManager#GEMSET_CHANGED_TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.ruby.gem.GemManager.GemSetListener)  | `GemSetListener` |
| [GemManager#MODULE_GEMS_CHANGED_TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.ruby.gem.GemManager.ModuleGemsListener)  ![Project-Level][project-level] | `ModuleGemsListener` |
| [GemRequirementsHolder#GEM_REQUIREMENTS_CHANGED_TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.ruby.gem.module.GemRequirementsHolder.RequirementsChangedListener)  ![Project-Level][project-level] | `RequirementsChangedListener` |
| [InflectorService#INFLECTIONS_CHANGED](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.ruby.rails.InflectorService.InflectionChanged)  | `InflectionChanged` |
| [AssetsRegistrationWatcher#ASSETS_CHANGED_TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.ruby.rails.codeInsight.sprockets.assetsPaths.AssetsRegistrationWatcher.AssetsListener)  | `AssetsListener` |
| [MigrationParser#MIGRATIONS_CHANGED_TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.ruby.rails.database.MigrationParser.MigrationListener)  ![Project-Level][project-level] | `MigrationListener` |
| [RailsPathsChangedListener#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.ruby.rails.facet.configuration.RailsPathsChangedListener)  | `RailsPathsChangedListener` |
| [RubyRemoteInterpreterManager#RUBY_REMOTE_SDK_TRANSFER_LISTENER_TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.ruby.remote.RubyRemoteSdkTransferListener)  | `RubyRemoteSdkTransferListener` |
| [RequireSetChangedListener#TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.ruby.ruby.codeInsight.symbols.cache.RequiresIndexExtension.RequireSetChangedListener)  | `RequireSetChangedListener` |
| [RubySdkType#SDK_PATHS_INITIALIZED_TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.ruby.ruby.sdk.RubySdkType.SdkPathsInitializedListener)  | `SdkPathsInitializedListener` |
| [RVMSupportUtil#RVM_GEMSET_ADDED_TOPIC](https://jb.gg/ipe/listeners?topics=org.jetbrains.plugins.ruby.version.management.rvm.RVMSupportUtil.RVMGemsetListener)  | `RVMGemsetListener` |


### intellij.ruby.coverage.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.plugins.ruby.coverage.deserializer](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.coverage.deserializer) | `RubyCoverageDeserializationProvider` |

### ruby-core.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.plugins.ruby.associationFactory](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.associationFactory) | `AssociationFactory` |
| [org.jetbrains.plugins.ruby.attributeProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.attributeProvider) | `AttributeProvider` |
| [org.jetbrains.plugins.ruby.autoImportProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.autoImportProvider) | `RubyAutoImportProvider` |
| [org.jetbrains.plugins.ruby.callNavigationOffsetProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.callNavigationOffsetProvider) | `StructureCallNavigationOffsetProvider` |
| [org.jetbrains.plugins.ruby.callTypeProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.callTypeProvider) | `RubyCallTypeProvider` |
| [org.jetbrains.plugins.ruby.completionProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.completionProvider) | `RubyCompletionProvider` |
| [org.jetbrains.plugins.ruby.fileLocationProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.fileLocationProvider) | `FileLocationProvider` |
| [org.jetbrains.plugins.ruby.gem.module.gemInfrastructure](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.gem.module.gemInfrastructure) | `GemInfrastructure` |
| [org.jetbrains.plugins.ruby.gemScannerSuppressor](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.gemScannerSuppressor) | `GemScannerSuppressor` |
| [org.jetbrains.plugins.ruby.implicitGemProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.implicitGemProvider) | `ImplicitRequireGemProvider` |
| [org.jetbrains.plugins.ruby.implicitRequireProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.implicitRequireProvider) | `ImplicitRequireProvider` |
| [org.jetbrains.plugins.ruby.includeExtendReceiverFqnProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.includeExtendReceiverFqnProvider) | `RubyIncludeExtendReceiverFqnProvider` |
| [org.jetbrains.plugins.ruby.methodMissingProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.methodMissingProvider) | `MethodMissingProvider` |
| [org.jetbrains.plugins.ruby.model.psiSymbolDeclarationsSearch](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.model.psiSymbolDeclarationsSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [org.jetbrains.plugins.ruby.moduleGemDependencyProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.moduleGemDependencyProvider) | `ModuleGemDependencyProvider` |
| [org.jetbrains.plugins.ruby.moduleGemProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.moduleGemProvider) | `ModuleGemProvider` |
| [org.jetbrains.plugins.ruby.overriddenMethodGenerator](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.overriddenMethodGenerator) | `OverriddenMethodGenerator` |
| [org.jetbrains.plugins.ruby.paramDefProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.paramDefProvider) | `ParamDefProvider` |
| [org.jetbrains.plugins.ruby.rails.viewFileTemplateProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rails.viewFileTemplateProvider) | `RailsViewFileTemplateProvider` |
| [org.jetbrains.plugins.ruby.renameHelper](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.renameHelper) | `RubyRenameHelper` |
| [org.jetbrains.plugins.ruby.routesProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.routesProvider) | `RubyRoutesProvider` |
| [org.jetbrains.plugins.ruby.ruby.coercibleExpressionTypeProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.ruby.coercibleExpressionTypeProvider) | `RubyCoercibleExpressionTypeProvider` |
| [org.jetbrains.plugins.ruby.ruby.expectedArgumentTypeProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.ruby.expectedArgumentTypeProvider) | `RubyExpectedArgumentTypeProvider` |
| [org.jetbrains.plugins.ruby.ruby.expectedConstantTypeProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.ruby.expectedConstantTypeProvider) | `RubyExpectedConstantTypeProvider` |
| [org.jetbrains.plugins.ruby.ruby.expectedGlobalVariableTypeProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.ruby.expectedGlobalVariableTypeProvider) | `RubyExpectedGlobalVariableTypeProvider` |
| [org.jetbrains.plugins.ruby.ruby.expectedParameterTypeProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.ruby.expectedParameterTypeProvider) | `RubyExpectedParameterTypeProvider` |
| [org.jetbrains.plugins.ruby.ruby.expectedReturnTypeProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.ruby.expectedReturnTypeProvider) | `RubyExpectedReturnTypeProvider` |
| [org.jetbrains.plugins.ruby.ruby.expectedVariableTypeProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.ruby.expectedVariableTypeProvider) | `RubyExpectedVariableTypeProvider` |
| [org.jetbrains.plugins.ruby.ruby.findUsagesSecondaryElementsProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.ruby.findUsagesSecondaryElementsProvider) | `RubyFindUsagesSecondaryElementsProvider` |
| [org.jetbrains.plugins.ruby.ruby.run.runEnvironmentProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.ruby.run.runEnvironmentProvider) | `RunEnvironmentProvider` |
| [org.jetbrains.plugins.ruby.ruby.run.testFrameworkConfigurator](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.ruby.run.testFrameworkConfigurator) | `TestFrameworkConfigurator` |
| [org.jetbrains.plugins.ruby.rubyElementNameAndDescriptionProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rubyElementNameAndDescriptionProvider) | `RubyElementNameAndDescriptionProvider` |
| [org.jetbrains.plugins.ruby.rubyLocalVariablesProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rubyLocalVariablesProvider) | `RubyLocalVariablesProvider` |
| [org.jetbrains.plugins.ruby.rubyParamDefSearchTextProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rubyParamDefSearchTextProvider) | `RubyParamDefSearchTextProvider` |
| [org.jetbrains.plugins.ruby.rubyParameterInfoDelegateProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rubyParameterInfoDelegateProvider) | `RubyParameterInfoDelegateProvider` |
| [org.jetbrains.plugins.ruby.rubyRenameProcessor](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rubyRenameProcessor) | `RenameProcessor` |
| [org.jetbrains.plugins.ruby.rubySdkConfigurator](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rubySdkConfigurator) | `RubySdkConfigurator` |
| [org.jetbrains.plugins.ruby.rubySdkRefresher](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rubySdkRefresher) | `SdkRefresher` |
| [org.jetbrains.plugins.ruby.rubySuperMethodsSearch](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rubySuperMethodsSearch) | [`QueryExecutor`](%gh-ic%/platform/core-api/src/com/intellij/util/QueryExecutor.java) |
| [org.jetbrains.plugins.ruby.rubySupportProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rubySupportProvider) | `RubySupportProvider` |
| [org.jetbrains.plugins.ruby.rubyTypeProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rubyTypeProvider) | `RubyTypeProvider` |
| [org.jetbrains.plugins.ruby.run.console.filter](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.run.console.filter) | `RubyConsoleFilterProvider` |
| [org.jetbrains.plugins.ruby.runnableScriptFilter](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.runnableScriptFilter) | `RunnableScriptFilter` |
| [org.jetbrains.plugins.ruby.superMethodInfoProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.superMethodInfoProvider) | `RubySuperMethodInfoProvider` |
| [org.jetbrains.plugins.ruby.symbolMixinsProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.symbolMixinsProvider) | `RubySymbolMixinsProvider` |
| [org.jetbrains.plugins.ruby.symbolProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.symbolProvider) | `RubySymbolProvider` |
| [org.jetbrains.plugins.ruby.symbolicTypeInferenceProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.symbolicTypeInferenceProvider) | `SymbolicTypeInferenceProvider` |
| [org.jetbrains.plugins.ruby.templates.integration](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.templates.integration) | `TemplateIntegration` |
| [org.jetbrains.plugins.ruby.versionManagerHandler](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.versionManagerHandler) | `RubyVersionManagerHandler` |

### ruby-plugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.ruby.projectStructure.sourceRootEditHandler](https://jb.gg/ipe?extensions=com.intellij.ruby.projectStructure.sourceRootEditHandler) | `RubyModuleSourceRootEditProvider` |
| [org.jetbrains.plugins.ruby.breadcrumbsCustomizer](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.breadcrumbsCustomizer) | `RubyBreadcrumbsCustomizer` |
| [org.jetbrains.plugins.ruby.debug.infoProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.debug.infoProvider) | `ContextInfoProvider` |
| [org.jetbrains.plugins.ruby.gem.detector](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.gem.detector) | `GemDetector` |
| [org.jetbrains.plugins.ruby.gemFacetEditorTab](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.gemFacetEditorTab) | `GemFacetEditorTabFactory` |
| [org.jetbrains.plugins.ruby.generatorConfigurator](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.generatorConfigurator) | `GeneratorActionConfigurator` |
| [org.jetbrains.plugins.ruby.i18n.i18nProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.i18n.i18nProvider) | `I18nProvider` |
| [org.jetbrains.plugins.ruby.inflectionsProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.inflectionsProvider) | `RubyInflectionsProvider` |
| [org.jetbrains.plugins.ruby.rails.assetsPathsProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rails.assetsPathsProvider) | `SprocketAssetsPathProvider` |
| [org.jetbrains.plugins.ruby.rails.sprocketsDirectiveContextProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rails.sprocketsDirectiveContextProvider) | `SprocketsDirectiveContextProvider` |
| [org.jetbrains.plugins.ruby.rails.viewFileTypesProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rails.viewFileTypesProvider) | `RailsViewFileTypesProvider` |
| [org.jetbrains.plugins.ruby.railsFacetEditorTab](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.railsFacetEditorTab) | `FacetEditorTabFactory` |
| [org.jetbrains.plugins.ruby.railsModelFieldsProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.railsModelFieldsProvider) | `RailsModelFieldsProvider` |
| [org.jetbrains.plugins.ruby.railsNavigateFrom](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.railsNavigateFrom) | `RailsNavigateFromProvider` |
| [org.jetbrains.plugins.ruby.railsSchemaParser](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.railsSchemaParser) | `RailsSchemaParser` |
| [org.jetbrains.plugins.ruby.rake.rakeRunCommandLineModifierProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rake.rakeRunCommandLineModifierProvider) | `RakeRunCommandLineModifierProvider` |
| [org.jetbrains.plugins.ruby.rake.runConfigurationSettingsFactory](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rake.runConfigurationSettingsFactory) | `RakeRunConfigurationSettingsFactory` |
| [org.jetbrains.plugins.ruby.rerunFailedTestsActionProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rerunFailedTestsActionProvider) | `RubyRerunFailedTestsProvider` |
| [org.jetbrains.plugins.ruby.ruby.associatedDeclarationProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.ruby.associatedDeclarationProvider) ![DumbAware][dumb-aware] | `RubyAssociatedDeclarationProvider` |
| [org.jetbrains.plugins.ruby.ruby.run.configuration.debugger.rubyDebugHelperFactory](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.ruby.run.configuration.debugger.rubyDebugHelperFactory) | `RubyDebugHelperFactory` |
| [org.jetbrains.plugins.ruby.ruby.topLevelSymbolProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.ruby.topLevelSymbolProvider) | `RubyTopLevelSymbolProvider` |
| [org.jetbrains.plugins.ruby.ruby.typeSignatureProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.ruby.typeSignatureProvider) ![DumbAware][dumb-aware] | `RubyTypeSignatureProvider` |
| [org.jetbrains.plugins.ruby.rubyFileStructureProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rubyFileStructureProvider) | `RubyFileStructureViewProvider` |
| [org.jetbrains.plugins.ruby.rubyInsertHandlerProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rubyInsertHandlerProvider) | `RubyInsertHandlerProvider` |
| [org.jetbrains.plugins.ruby.rubyMethodTypeDocPresentationProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.rubyMethodTypeDocPresentationProvider) | `RubyMethodTypeDocPresentationProvider` |
| [org.jetbrains.plugins.ruby.runConfigurationExtension](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.runConfigurationExtension) | `RubyRunConfigurationExtension` |
| [org.jetbrains.plugins.ruby.structureViewCustomizer](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.structureViewCustomizer) | `RubyStructureViewCustomizer` |
| [org.jetbrains.plugins.ruby.testing.rspec.rspecContextNameProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.testing.rspec.rspecContextNameProvider) | `RSpecContextNameProvider` |
| [org.jetbrains.plugins.ruby.testing.rspec.rspecContextSymbolProvider](https://jb.gg/ipe?extensions=org.jetbrains.plugins.ruby.testing.rspec.rspecContextSymbolProvider) | `RSpecContextSymbolProvider` |

### ruby-rbs.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.lang.ruby.rbs.containerHierarchyMapper](https://jb.gg/ipe?extensions=com.intellij.lang.ruby.rbs.containerHierarchyMapper) | `RbsContainerHierarchyMapper` |

[deprecated]: https://img.shields.io/badge/-Deprecated-lightgrey?style=flat-square
[removal]: https://img.shields.io/badge/-Removal-red?style=flat-square
[obsolete]: https://img.shields.io/badge/-Obsolete-grey?style=flat-square
[experimental]: https://img.shields.io/badge/-Experimental-violet?style=flat-square
[internal]: https://img.shields.io/badge/-Internal-darkred?style=flat-square
[project-level]: https://img.shields.io/badge/-Project--Level-blue?style=flat-square
[non-dynamic]: https://img.shields.io/badge/-Non--Dynamic-orange?style=flat-square
[dumb-aware]: https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Run Configurations

<link-summary>Implementing run configurations management support.</link-summary>

<tldr>

**Product Help:** [Run/Debug Configuration](https://www.jetbrains.com/idea/help/run-debug-configuration.html)

</tldr>

A run configuration is a specific type of [run profile](execution.md#configuration-classes).
Run configurations can be managed from the UI and are persisted between IDE restarts.
They allow users to specify execution options like a working directory, environment variables, program arguments, and other parameters required to run a process.
Run configurations can be started from the <control>Run</control> toolbar, the editor, and executed programmatically from actions or other components.

## Architecture Overview

The following diagram shows the key run configurations classes:

Original:

```plantuml
@startuml

skinparam DefaultFontName JetBrains Sans
skinparam DefaultFontSize 14
hide empty members
hide circle

interface RunProfile
interface ConfigurationType
abstract class ConfigurationFactory
interface RunConfiguration
abstract class SettingsEditor


ConfigurationType *-- "*" ConfigurationFactory
ConfigurationFactory --> RunConfiguration: creates
RunConfiguration o-- "0..*" SettingsEditor
RunConfiguration -l|> RunProfile

@enduml
```

Run Configuration API (except `SettingsEditor` class, which is a class shared by many IntelliJ Platform APIs) is a part of the [Execution API](execution.md).

### `ConfigurationType`

The entry point of a run configuration implementation is [`ConfigurationType`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/ConfigurationType.java).
It is responsible for the run configuration type and instances presentation and contains [configuration factories](#configurationfactory).
A single configuration type can have multiple configuration factories, e.g., the Docker configuration type can create run configurations for:
* Dockerfile
* Docker Image
* Docker-compose

To see the list of configuration types available in the IDE, go to <ui-path>Run \| Edit Configurations</ui-path> and click the <control>Add</control> button (<control>+</control> icon).

`ConfigurationType` implementations are registered in the `com.intellij.configurationType` extension point (EP).

Standard base classes for configuration type implementations are:
* [`SimpleConfigurationType`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/runConfigurationType.kt) - used for configuration types that have a single configuration factory.
  Actually, this configuration type is also a configuration factory, and there is no need for setting up a factory.
* [`ConfigurationTypeBase`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/runConfigurationType.kt) - used for configuration types that have multiple configuration factories.
  Factories should be added in the constructor by calling the `addFactory()` method.

Marking a configuration type as [dumb aware](indexing_and_psi_stubs.md#DumbAwareAPI) makes all its configurations available during indexing.

Sometimes, it is required to provide run configurations programmatically from contexts external to run configuration UI.
Implementing [`VirtualConfigurationType`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/VirtualConfigurationType.java) blocks the possibility of adding and removing run configurations of this type in the <control>Run/Debug Configurations</control> panel.
Editing its template is also not available.

### `ConfigurationFactory`

[`ConfigurationFactory`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/ConfigurationFactory.java) classes are responsible for creating [run configuration](#runconfiguration) instances.
The only method required to be implemented is `createTemplateConfiguration()`, which is called once for each project to create the run configuration template.
The actual run configurations are created in the `createConfiguration()` method by cloning the template.

Configuration factory presentation is inherited from the containing configuration type.
If customization is needed, override the presentation methods in the factory class.

By default, configurations created by a given factory are not editable in [dumb mode](indexing_and_psi_stubs.md#dumb-mode).
To enable editing them in Dumb Mode, return `true` from `isEditableInDumbMode()`.

### `RunConfiguration`

[`RunConfiguration`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RunConfiguration.java) extends [`RunProfile`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RunProfile.java) and represents a named profile that can be run by the [Execution API](execution.md).

When implementing a run configuration class, consider using one of the standard base classes:
* [`RunConfigurationBase`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RunConfigurationBase.java) - a general-purpose base class that contains the most basic implementation of a run configuration.
* [`LocatableConfigurationBase`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/LocatableConfigurationBase.java) - a base class for [configurations that can be created from context](#creating-a-run-configuration-from-context).
* [`ModuleBasedConfiguration`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/ModuleBasedConfiguration.java) - a base class for a configuration that is associated with a specific [](module.md) (e.g., Java run configurations use the selected module to determine the run classpath).

### `SettingsEditor`

A run configuration may allow editing its general settings and settings specific to a [program runner](execution.md#execution-classes).
If it is required, a `RunConfiguration` implementation should return a [`SettingsEditor`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/SettingsEditor.java) instance from:
* `getConfigurationEditor()` for editing run configuration settings
* `getRunnerSettingsEditor()` for editing settings for a specific program runner

A `SettingsEditor` implementation must provide the following methods:
* `getComponent()` - creates a UI component for displaying settings controls
* `applyEditorTo()` - copies the current editor UI state into the target settings object
* `resetEditorFrom()` - resets the current editor UI state to the initial settings state

In the case of run configuration settings, the settings object is `RunConfiguration` itself.
Settings specific to a program runner must implement [`ConfigurationPerRunnerSettings`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/ConfigurationPerRunnerSettings.java).

If the settings editor requires validation, implement [`CheckableRunConfigurationEditor`](%gh-ic%/platform/lang-api/src/com/intellij/execution/impl/CheckableRunConfigurationEditor.java).

If the settings editor is complex, see [](#simplifying-settings-editors) for solutions.

**Example:** [DemoSettingsEditor](%gh-sdk-samples-master%/run_configuration/src/main/java/org/jetbrains/sdk/runConfiguration/DemoSettingsEditor.java) from the `run_configuration` code sample.

## Persistence

Run configuration settings are persistent.
They are stored in the file system and loaded back after the IDE restart.
Persisting and loading settings are performed by `writeExternal()` and `readExternal()` methods of `RunConfiguration` class correspondingly.

The actually stored configurations are represented by instances of the [`RunnerAndConfigurationSettings`](%gh-ic%/platform/execution/src/com/intellij/execution/RunnerAndConfigurationSettings.java) class, which combines a run configuration with runner-specific settings and stores general run configuration flags and properties.

## Creating a Run Configuration Programmatically

If a plugin requires creating run configurations programmatically, .e.g, from a custom action, perform the following steps:
1. [`RunManager.createConfiguration()`](%gh-ic%/platform/execution/src/com/intellij/execution/RunManager.kt) - creates an instance of `RunnerAndConfigurationSettings`.
2. [`RunManager.addConfiguration()`](%gh-ic%/platform/execution/src/com/intellij/execution/RunManager.kt) - makes the created configuration persistent by adding it to either the list of shared configurations stored in a project or to the list of local configurations stored in the workspace file.

## Creating a Run Configuration from Context

Run configurations can be created and run from context, e.g., by right-clicking an application main method, a test class/method, etc., directly in the editor or the project view.
This is achieved by implementing [`LazyRunConfigurationProducer`](%gh-ic%/platform/lang-api/src/com/intellij/execution/actions/LazyRunConfigurationProducer.kt) and registering it in `com.intellij.runConfigurationProducer` EP.

The extension requires implementing the following methods:
* `getConfigurationFactory()` - returns the factory creating run configurations of the type specified in the extension class implementation.
* `setupConfigurationFromContext()` - receives a blank configuration of the specified type and a [`ConfigurationContext`](%gh-ic%/platform/lang-api/src/com/intellij/execution/actions/ConfigurationContext.java) containing information about a source code location (accessible by calling `getLocation()` or `getPsiLocation()`).
  The implementation needs to check whether the location is applicable to the configuration type (e.g., if it is in a file of the supported language).
  If it is, put the correct context-specific settings into the run configuration and return `true`.
  Return `false` otherwise.
* `isConfigurationFromContext()` - checks if a configuration was created from the specified context.
  This method allows reusing an existing run configuration, which applies to the current context, instead of creating a new one and possibly ignoring the user's customizations in the existing one.

If access to indexes is not required, it can be marked [dumb aware](indexing_and_psi_stubs.md#DumbAwareAPI).
If the run configuration requires additional data before it is executed for the first time, override [`RunConfigurationProducer.onFirstRun()`](%gh-ic%/platform/lang-api/src/com/intellij/execution/actions/RunConfigurationProducer.java) to provide it or display UI to get the data from the user.

To support the automatic naming of configurations created from context, the configuration should extend [`LocatableConfigurationBase`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/LocatableConfigurationBase.java).
It supports generating a name for a configuration from its settings and tracking whether the user changed the name.

## Running Configurations from the Gutter

If a run configuration is closely related to a PSI element (e.g., runnable method, test, etc.), it is possible to allow running configurations by [clicking the editor gutter icon](https://www.jetbrains.com/help/idea/running-applications.html#run-from-editor).
It is achieved by implementing [`RunLineMarkerContributor`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/lineMarker/RunLineMarkerContributor.java), which provides information like the icon, tooltip content, and available actions for a given PSI element.

The standard method for providing the information is `getInfo()`.
If computing the information is slow, implement `getSlowInfo()`, which is used by the editor highlighting mechanism to gather information in batch, and apply all the information at once to avoid icons blinking.
If access to indexes is not required, it can be marked [dumb aware](indexing_and_psi_stubs.md#DumbAwareAPI).

To provide the standard executor actions like _Run_, _Debug_, etc., use [`ExecutorAction.getActions()`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/ExecutorRegistryImpl.java).

## Starting a Run Configuration Programmatically

The easiest way to run an existing run configuration is using [`ProgramRunnerUtil.executeConfiguration(RunnerAndConfigurationSettings, Executor)`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/ProgramRunnerUtil.java).
`RunnerAndConfigurationSettings` can be retrieved with, e.g., `RunManager.getConfigurationSettings(ConfigurationType)`.
The executor can be retrieved with a static method if a required executor exposes one or with [`ExecutorRegistry.getExecutorById()`](%gh-ic%/platform/execution/src/com/intellij/execution/ExecutorRegistry.java).

## Validating a Run Configuration

To check, whether a run configuration is configured correctly and can be executed, implement the `RunConfiguration.checkConfiguration()`.
In case the run configuration settings are incomplete, the method should throw one of the following exceptions:
- [`RuntimeConfigurationWarning`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RuntimeConfigurationWarning.java) - in case of a problem, which doesn't affect execution
- [`RuntimeConfigurationException`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RuntimeConfigurationException.java) - in case of non-fatal error, which allows executing the configuration
- [`RuntimeConfigurationError`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RuntimeConfigurationError.java) - in case of fatal error that makes it impossible to execute the run configuration

If the configuration contains any warnings or errors, its icon will be patched with the error indicator and the message will be displayed in the configuration settings page. In case of `RuntimeConfigurationError`, if a user tries to execute the configuration, the run configuration settings dialog will be presented, so that the user can fix the issues before the execution.

All the mentioned exceptions allow providing a quick fix for the reported issue.
If the quick fix implementation is provided, the quick fix button will be displayed next to the error message.

## Simplifying Settings Editors

If a run configuration settings editor is complex, consider implementing one of the following solutions to simplify the UI:
- [](#fragmented-settings-editor) - the recommended approach since version 2021.1
- [](#settings-editor-groups)

### Fragmented Settings Editor

Fragmented Settings allow for the creation of a cleaner run configuration settings editor.
The fragmented editor is built of reusable fragments, which can be shared between different run configuration editors.

When a user creates a new run configuration from a template, only essential fragments are displayed at first.
More advanced options are hidden and must be explicitly enabled by the user from the <control>Modify options</control> dropdown.
It makes the editor smaller, freeing it from the clutter of unused settings fields.

To implement a fragmented settings editor in a run configuration, extend [`RunConfigurationFragmentedEditor`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/ui/RunConfigurationFragmentedEditor.java) and implement `createRunFragments()`.
The method must return a list of [`SettingsEditorFragment`](%gh-ic%/platform/platform-api/src/com/intellij/execution/ui/SettingsEditorFragment.java) instances, which represent particular settings fragments that users can enable and configure.

**Examples:**
- [`JavaApplicationSettingsEditor`](%gh-ic%/java/execution/impl/src/com/intellij/execution/application/JavaApplicationSettingsEditor.java)
- [`MavenRunConfigurationSettingsEditor`](%gh-ic%/plugins/maven/src/main/java/org/jetbrains/idea/maven/execution/run/configuration/MavenRunConfigurationSettingsEditor.kt)

### Settings Editor Groups

A complex settings editor can be split into smaller editors focused on a specific area, e.g.:
- <control>Configuration</control> - containing the main configuration settings
- <control>Logs</control> - containing settings related to logging
- <control>Coverage</control> - containing settings related to code coverage
- etc.

These editors should be added to the [`SettingsEditorGroup`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/SettingsEditorGroup.java) object, which is a `SettingsEditor`'s implementation itself and must be returned from `getConfigurationEditor()` or `getRunnerSettingsEditor()`.
Each editor added to the group is displayed in a separate tab.

**Example:** [`ApplicationConfiguration.getConfigurationEditor()`](%gh-ic%/java/execution/impl/src/com/intellij/execution/application/ApplicationConfiguration.java)


## Refactoring Support

Some run configurations contain references to classes, files, or directories in their settings, and these settings usually need to be updated when the corresponding element is renamed or moved.
To support that, a run configuration needs to implement the [`RefactoringListenerProvider`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RefactoringListenerProvider.java) interface.

The `RefactoringListenerProvider.getRefactoringElementListener()`'s implementation should check whether the refactored element is referred from the run configuration.
If it is, return a [`RefactoringElementListener`](%gh-ic%/platform/analysis-api/src/com/intellij/refactoring/listeners/RefactoringElementListener.java) that updates the run configuration according to the new name and location of the element.

## Modifying Existing Run Configurations

Plugins can modify existing run configurations before they are run, e.g., by adding additional process parameters.
However, there is no single platform-wide extension point, and different IDEs provide different configuration base classes and extension points, allowing for their modifications.
To see what is possible in your case, check the [`RunConfigurationExtensionBase`](%gh-ic%/platform/execution/src/com/intellij/execution/configuration/RunConfigurationExtensionBase.java) inheritors.
Examples:
* [`RunConfigurationExtension`](%gh-ic%/java/execution/impl/src/com/intellij/execution/RunConfigurationExtension.java) implementations registered in `com.intellij.runConfigurationExtension` EP allow for modifying Java run configurations extending [`RunConfigurationBase`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RunConfigurationBase.java).
* [`PythonRunConfigurationExtension`](%gh-ic%/python/src/com/jetbrains/python/run/PythonRunConfigurationExtension.java) implementations registered in `Pythonid.runConfigurationExtension` EP allow for modifying configuration extending [`AbstractPythonRunConfiguration`](%gh-ic%/python/src/com/jetbrains/python/run/AbstractPythonRunConfiguration.java)
etc.

## Referencing Environment Variables in Run Configurations

Run configurations can define user environment variables specific to a given run configuration and include system environment variables.
Sometimes, it is convenient to reference existing variables in newly created variables, e.g., if a user creates an `EXTENDED_PATH` variable and builds it from a custom entry and the system `PATH` variable, they should reference it in the value by surrounding it with the `$` character: `/additional/entry:$PATH$`.

To substitute variable references with the actual references, it is required to call [`EnvironmentUtil.inlineParentOccurrences()`](%gh-ic%/platform/util/src/com/intellij/util/EnvironmentUtil.java) (available since 2023.2).

## Before Run Tasks

Sometimes, it is necessary to perform specific tasks before a configuration is actually run, e.g., build the project, run a build tool preparation task, launch a web browser, etc.
Plugins can provide custom tasks that can be added by users to a created run configuration.

To provide a custom task, implement [`BeforeRunTaskProvider`](%gh-ic%/platform/execution/src/com/intellij/execution/BeforeRunTaskProvider.java) and register it in `com.intellij.stepsBeforeRunProvider` EP.
The provider implementation is responsible for creating a task instance for a given run configuration and executing the task.

If access to indexes is not required, it can be marked [dumb aware](indexing_and_psi_stubs.md#DumbAwareAPI).

## Macros

Macros are dynamic variables, which can be referenced in run configurations, and expanded to actual values when a run configuration is executed.

For example, a macro with a name `ProjectFileDir` can be referenced as `$ProjectFileDir$` in a run configuration command line argument.
It is expanded to the absolute path of the current project directory when the run configuration is executed by a user.

A list of built-in macros is available in the [IntelliJ IDEA Web Help](https://www.jetbrains.com/help/idea/built-in-macros.html) and other products' documentation pages.

> Note that Macro API is not specific to execution or run configuration API and can be used in other places.

### Adding Macro Selector in Run Configuration Editor

Macro selecting support can be added to a text field on the run configuration editor by installing it with [`MacrosDialog.addMacroSupport()`](%gh-ic%/platform/execution-impl/src/com/intellij/ide/macro/MacrosDialog.java) or other similar methods from this class.
After installation, a text field will be extended by a button invoking the macro dialog, which lists available macros with descriptions and previews.
After selecting and accepting a macro from the list, the macro placeholder is inserted into the text field at the current caret position.

### Expanding Macros Before Execution

Macros used in run configuration must be expanded to actual values before the process execution.
It is usually done in the `RunProfile.getState()` method called during the [execution workflow](execution.md#execution-workflow).
To expand configured values, use one of [`ProgramParametersConfigurator`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/util/ProgramParametersConfigurator.java)'s method: `expandMacros()`, `expandPathAndMacros()`, or `expandMacrosAndParseParameters()`.
See their Javadocs for the details.

### Providing Custom Macros

If the predefined list of macros is insufficient, a plugin can provide custom macros by extending [`Macro`](%gh-ic%/platform/macro/src/com/intellij/ide/macro/Macro.java) and registering it in the `com.intellij.macro` EP.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Run Configurations Tutorial

<link-summary>Implementing a custom run configuration tutorial.</link-summary>

<tldr>

**Product Help:** [Run/Debug Configuration](https://www.jetbrains.com/idea/help/run-debug-configuration.html)

</tldr>

This step-by-step guide shows how to register and implement a simple [run configuration](run_configurations.md).
Run configurations are used to run internal and external processes from within IntelliJ Platform based products.

The full implementation is available in the [code samples](%gh-sdk-samples-master%/run_configuration).

## Pre-Requirements

Create an empty plugin project.
See the [](creating_plugin_project.md) section for details.

## Implement a `ConfigurationType`

Implement [`ConfigurationType`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/ConfigurationType.java):

```java
```
{src="run_configuration/src/main/java/org/jetbrains/sdk/runConfiguration/DemoRunConfigurationType.java" include-symbol="DemoRunConfigurationType"}

## Register the `ConfigurationType`

Register implemented configuration type in `com.intellij.configurationType` extension point in the [plugin.xml](%gh-sdk-samples-master%/run_configuration/src/main/resources/META-INF/plugin.xml):

```xml
<extensions defaultExtensionNs="com.intellij">
  <configurationType
      implementation="org.jetbrains.sdk.runConfiguration.DemoRunConfigurationType"/>
</extensions>
```

## Implement a `ConfigurationFactory`

Implement a new [`ConfigurationFactory`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/ConfigurationFactory.java) through which custom run configurations will be created.

```java
```
{src="run_configuration/src/main/java/org/jetbrains/sdk/runConfiguration/DemoConfigurationFactory.java" include-symbol="DemoConfigurationFactory"}

Implement corresponding configuration options class extending [`RunConfigurationOptions`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RunConfigurationOptions.kt) to store settings.

```java
```
{src="run_configuration/src/main/java/org/jetbrains/sdk/runConfiguration/DemoRunConfigurationOptions.java" include-symbol="DemoRunConfigurationOptions"}

## Implement a `RunConfiguration`

To make your changes visible from the UI, implement a new run configuration.

> In most of the cases it is sufficient derive a custom run configuration class from the [`RunConfigurationBase`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RunConfigurationBase.java).
> If implementing specific settings externalization rules and I/O behaviour is required, use [`RunConfiguration`](%gh-ic%/platform/execution/src/com/intellij/execution/configurations/RunConfiguration.java) interface.
>
{style="note"}

```java
```
{src="run_configuration/src/main/java/org/jetbrains/sdk/runConfiguration/DemoRunConfiguration.java" include-symbol="DemoRunConfiguration"}

## Implement the `SettingsEditor`

```java
```
{src="run_configuration/src/main/java/org/jetbrains/sdk/runConfiguration/DemoSettingsEditor.java" include-symbol="DemoSettingsEditor"}

## Compile and Run the Plugin

<procedure>

1. [Execute](creating_plugin_project.md#executing-the-plugin) the plugin.
2. Go to <ui-path>Run \| Edit Configurations...</ui-path>, click to <control>Add</control> button (<control>+</control> icon), and select <control>Demo</control>.
3. In the <control>Script file</control> field provide the path to an example script (e.g. displaying "Hello world" message).
4. Click the <control>Apply</control> button and close the dialog.
5. In the run toolbar select created configuration and click the run button.

The script should be executed and its result should be displayed in the console.

</procedure>
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Running and Debugging a Theme

<link-summary>Running and debugging a theme in the actual IDE instance.</link-summary>

In most cases, the results of theme plugin can be previewed by running the <control>Preview Theme</control> action in the [theme description file](themes_customize.md) editor.
Sometimes, when more advanced styling options are implemented, the previewing theme may not be enough to see all the changes.
This page explains how to run or debug the theme plugin in the IDE configured as a part of [project SDK](setting_up_theme_environment.md).

## Create Plugin Run Configuration

To run and debug a plugin directly from a theme plugin project, a _Plugin_ run configuration must be added.

> For more information about creating Run Configurations, refer to the [Run/Debug Configuration](https://www.jetbrains.com/help/idea/run-debug-configuration.html) section in IntelliJ IDEA Web Help.
>

<procedure title="Add Plugin Run Configuration">

1. Go to <ui-path>Run | Edit Configurations...</ui-path>.
2. Click the <control>Add New Configuration...</control> button (<control>+</control>) and select the <control>Plugin</control> type.
3. Provide the configuration <control>Name</control>, e.g., _Run Theme_.
4. Ensure that <control>Use classpath of module</control> specifies the current theme plugin module.
5. Click the <control>Apply</control> button.


</procedure>

See the [](ide_development_instance.md) section for information about advanced run configuration settings.
If additional settings, like system property, are needed, see [Run/Debug Configuration: Plugin](https://www.jetbrains.com/idea/help/run-debug-configuration-plugin.html) explaining how to configure them.

## Run/Debug Theme Plugin

To run the theme in the IDE development instance, choose <ui-path>Run | Run...</ui-path> and select the created run configuration.
Debugging a theme is similar, but instead of <control>Run...</control>, select the <control>Debug...</control> action.
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Safe Delete Refactoring

<link-summary>Implementing the Safe Delete feature allowing to adjust the code that uses a deleted element.</link-summary>

<tldr>

**Product Help:** [Safe delete](https://www.jetbrains.com/help/idea/safe-delete.html)

</tldr>

The _Safe Delete_ refactoring also builds on the same [](find_usages.md) framework as [](rename_refactoring.md).

In addition to that, to support _Safe Delete_, a plugin needs to implement two things:

* The
   [`RefactoringSupportProvider`](%gh-ic%/platform/refactoring/src/com/intellij/lang/refactoring/RefactoringSupportProvider.java)
   interface, registered in the `com.intellij.lang.refactoringSupport` extension point, and the `isSafeDeleteAvailable()` method, which checks if the _Safe Delete_ refactoring is available for a specific PSI element

* The
   [`PsiElement.delete()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java)
   method for the
   [`PsiElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java)
   subclasses for which _Safe Delete_ is available.
   Deleting PSI elements is implemented by deleting the underlying AST nodes from the AST tree (which, in turn, causes the text ranges corresponding to the AST nodes to be deleted from the document).

**Example:**
[`delete()`](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/psi/impl/PropertyImpl.java) implementation for a Property in  [Properties language plugin](%gh-ic%/plugins/properties)

If needed, it's possible to further customize how _Safe Delete_ is performed for a particular type of element (e.g., how references are searched) via [`SafeDeleteProcessorDelegate`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/safeDelete/SafeDeleteProcessorDelegate.java).

**Example:**
[`SafeDeleteProcessorDelegate`](%gh-ic%/plugins/properties/src/com/intellij/lang/properties/refactoring/PropertiesFilesSafeDeleteProcessor.java) implementation for [Properties language plugin](%gh-ic%/plugins/properties)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Scrollbar

<link-summary>UI guidelines on using scrollbars.</link-summary>

<tldr>

**Implementation:** [`JBScrollBar`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/JBScrollBar.java)

</tldr>

The scrollbar allows users to browse content that’s larger than the visible area, such as text or images, by scrolling it horizontally or vertically.

![](scrollbar-small.png){width=370}

## Parts of a scrollbar

A scroll bar consists of a track, a thumb, and a status icon if there is a known status for displayed content.

![](scrollbar-detailed.png){width=157}

### Track

A track represents the overall length or width of the document.

The track can contain optional markers for quicker navigation between the important parts of the document, for example:

* The occurrences of a search string.

* Breakpoints and the current execution lines.

* A place where an inspection failed.

* Files with errors laid out in a tree.

* Changed parts of a file.

A marker can fit the track width or be placed to the left of the track. Use the latter when you expect the marked region to be tall.

Hovering over the track can also show a lens with a preview of the content at the corresponding position in the document.
This can be useful in large documents when it is not desirable to change the viewpoint:

![](lens-temp.png){width=622}

### Thumb

A thumb represents the visible portion of the content. For example, a small thumb indicates that there’s lots of content available for scrolling.

### Status icon (optional)

A status icon shows the overall status of inspections performed on the content and allows you to avoid scrolling over the entire view.
If at least one inspection has failed, the overall status should be the status of that inspection.

![](commit.png){width=492}

## How to use

Respect the OS settings when showing the scrollbar.
For example, on macOS you can hide the scrollbar until you scroll the content.
Always show the scrollbar when it is important to understand which part of the content is currently shown.
For example, the scrollbar in the Editor helps users understand the location of the current code fragment and the overall size of the currently opened file.

Show the track on hover to make the clickable area clearer. Consider not showing the track on hover if it might have more than 5–10 stripes at a time.

Increase the thumb contrast against the background on hover and when scrolling to make it more prominent.

Clicking the track above/below the thumb scrolls one page up/down the viewpoint.
This allows you to hide the up/down icons on the scrollbar to lessen the visual noise and to scroll with mouse-clicks.
Track markers serve as a mini-map of the document.
If they are present, clicking them takes you to the position that this marker is pointing to without having to scroll down the page.
Change the cursor to "Hand" when hovering such scrollbars.

When showing a text, wrap it instead of showing the horizontal scrollbar when possible. With both scrollbars, it is harder to manipulate the content.

<format color="Red" style="bold">Incorrect</format>

![](soft-wrap-incorrect.png){width=500}

<format color="Green" style="bold">Correct</format>

![](soft-wrap-correct.png){width=500}

A horizontal scroll bar can be added for code snippets or for formatted input. Use the context menu to enable soft-wrapping.

<format color="Green" style="bold">Correct</format>

![](soft-wrap-context.png){width=370}

Show only 1 scrollbar per table which scrolls the entire table:

<format color="Red" style="bold">Incorrect</format>

![](table-scrollbar-incorrect.png){width=562}

<format color="Green" style="bold">Correct</format>

![](table-scrollbar-correct.png){width=562}

## Placement

Reserve the space for a vertical scrollbar if there is a column on the right side, otherwise the scrollbar always overlaps content.

<format color="Red" style="bold">Incorrect</format>

![](vertical-scrollbar-incorrect.png){width=350}

<format color="Green" style="bold">Correct</format>

![](vertical-scrollbar-correct.png){width=350}

## Style

<table>
    <tr>
        <td width="50%">Windows/Linux</td>
        <td width="50%">macOS</td></tr>
    <tr>
        <td><img src="win-light.png" alt="" width="96" /></td>
        <td><img src="mac-light.png" alt="" width="96" /></td>
    </tr>
</table>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<link-summary>Configuring and getting information about a project SDK.</link-summary>

# SDK

<tldr>

**Product Help:** [SDKs](https://www.jetbrains.com/help/idea/working-with-sdks.html)

</tldr>

Every project uses a Software Development Kit (SDK).
For Java projects, the SDK is referred to as the JDK (Java Development Kit).
The SDK determines which API library is used to build the project.
If a project is multi-module, the project SDK by default is common for all modules within the project.
Optionally, individual SDKs for each module can be configured.

## Working with SDKs

<include from="project.md" element-id="useWorkspaceModelAPI"/>

### Getting Project SDK Information

The information about the project SDK is accessed via [`ProjectRootManager`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ProjectRootManager.java) like the following example shows

```java
Sdk projectSdk = ProjectRootManager.getInstance(project).getProjectSdk();
```

### Getting and Setting Project SDK Attributes

* To get the project-level SDK:

  ```java
  Sdk projectSdk = ProjectRootManager.getInstance(project).getProjectSdkName();
  ```

* To get the project-level SDK name:

  ```java
  String projectSdkName = ProjectRootManager.getInstance(project).getProjectSdkName();
  ```

* To set the project-level SDK:

  ```java
  ProjectRootManager.getInstance(project).setProjectSdk(sdk);
  ```

* To set the project-level SDK name:

  ```java
  ProjectRootManager.getInstance(project).setProjectSdkName(name, sdk.getSdkType().getName());
  ```

See the [project_model](%gh-sdk-samples-master%/project_model/src/main/java/org/intellij/sdk/project/model/ProjectSdkAction.java) code sample to get more familiar with the SDK manipulation toolset.

### Available SDKs

[`ProjectJdkTable`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/projectRoots/ProjectJdkTable.java) can be used to query and modify configured SDKs.

### Working with a Custom SDK

To create a custom SDK, provide a class extending [`SdkType`](%gh-ic%/platform/lang-core/src/com/intellij/openapi/projectRoots/SdkType.java), leave `saveAdditionalData()` blank, and register it in the `com.intellij.sdkType` extension point.

To make SDK settings persistent, override `setupSdkPaths()` and save settings by `modificator.commitChanges()`:

```java

@Override
public boolean setupSdkPaths(@NotNull Sdk sdk, @NotNull SdkModel sdkModel) {
  SdkModificator modificator = sdk.getSdkModificator();
  modificator.setVersionString(getVersionString(sdk));
  modificator.commitChanges(); // save
  return true;
}
```

To let a user select an SDK, see [`ProjectJdksEditor`](%gh-ic%/java/idea-ui/src/com/intellij/openapi/projectRoots/ui/ProjectJdksEditor.java).

However, it is not recommended to use "SDK" in non-IntelliJ IDEA IDEs.
Although "SDK" is available in most JetBrains products, `ProjectJdksEditor` is specific to Java, making the operation around "SDK" difficult.
The recommended way of managing "SDK" settings is to create a [`CustomStepProjectGenerator`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/util/projectWizard/CustomStepProjectGenerator.java) implementation and save settings in a [`PersistentStateComponent`](persisting_state_of_components.md).

## Assisting in Setting Up an SDK

Prompting the user with a notification to set up an SDK can help them get up-and-running with a plugin faster.
Use `com.intellij.projectSdkSetupValidator` extension point to register an implementation of [`ProjectSdkSetupValidator`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/daemon/ProjectSdkSetupValidator.java) to notify the user if they are missing an SDK.

The following is a simplified example that checks whether an instance of "DemoSdk" has been configured in the project when the user opens a "DemoFileType":

```kotlin
internal class DemoProjectSdkSetupValidator : ProjectSdkSetupValidator {
  override fun isApplicableFor(project: Project, file: VirtualFile): Boolean {
    return file.fileType == DemoFileType
  }

  override fun getErrorMessage(project: Project, file: VirtualFile): String? {
    if (ProjectJdkTable.getInstance().getSdksOfType(DemoSdkType.getInstance()).isEmpty()) {
      return "No DemoSdks are configured for this project!"
    }
    return null
  }

  override fun getFixHandler(project: Project, file: VirtualFile):
        EditorNotificationPanel.ActionHandler {
    return SdkPopupFactory.newBuilder()
        .withProject(project)
        .withSdkTypeFilter { it is DemoSdkType }
        .updateSdkForFile(file)
        .buildEditorNotificationPanelHandler()
  }
}
```

Within `DemoProjectSdkSetupValidator`:

* `isApplicableFor()` checks what condition(s) should be met to run the validation.
* `getErrorMessage()` runs the validation and returns an appropriate error message if the validation fails.
* If the validation is successful, then it should return null.
* `getFixHandler()` returns an `EditorNotificationPanel.ActionHandler` that enables the user to execute a quick fix to resolve the validation issue.

> `ProjectSdkSetupValidator` will not work in IntelliJ Platform-based IDEs such as PyCharm.
> In such cases, you should register an implementation of [`EditorNotificationProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ui/EditorNotificationProvider.java) at the `com.intellij.editorNotificationProvider` extension point and override the `createNotificationPanel()` method with the conditionality and panel setup you want.
>
{style="warning"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# SDK Code Sample Guidelines

<link-summary>Coding guidelines for the code contributed to the IntelliJ SDK Code Samples.</link-summary>

This document describes the coding guidelines used for authoring open-source IntelliJ Platform SDK code samples.
Before you begin, please read this page thoroughly, as well as the [Code of Conduct](intellij-sdk-docs-original_CODE_OF_CONDUCT.md) and [License](https://github.com/JetBrains/intellij-sdk-docs/blob/main/LICENSE.txt) documents.

For information about contributing to the IntelliJ Platform itself, visit [Contributing to the IntelliJ Platform](platform_contributions.md).

> See also [](code_samples.md) for an overview.

## Objectives

Keep the following considerations in mind while authoring an SDK code sample:
* The purpose of an SDK sample is to demonstrate an implementation pattern of the IntelliJ Platform.
* SDK code samples are instructional code, intended to teach.
  * Instructional code differs from production code in some key aspects:
    * Sacrifice some robustness in the interest of simplicity and brevity.
      Use error checking where it is necessary to make a point about an implementation pitfall.
    * Keep implementations as simple as possible, but use the full features of the IntelliJ Platform, programming language, and libraries.
    * Use meaningful names for interfaces, classes, fields, methods, and extension points.
    * Write instructional Javadoc comments.
  * Code samples replace lots of documentation.
* Aim for two levels of SDK samples:
  * A _basic_ sample is focused on a particular subject by demonstrating a limited area of the IntelliJ Platform.
    It should show all the components and architecture but ultimately accomplish something elementary.
    For example, demonstrate persistence by storing only a `String`.
  * An _advanced_ sample demonstrates how different parts of the IntelliJ Platform integrate and work together, such as combining inspections or intentions with non-trivial PsiTree manipulation.

Ultimately, the goal is to provide developers with roadmaps for implementing functionality in an IntelliJ Platform-based plugin.
Each roadmap should contain:
* Pointers to SDK documentation about the IntelliJ Platform APIs needed to implement the functionality.
* Pointers to relevant _basic_ SDK sample plugins.
* Pointers to related _advanced_ SDK sample plugins.

## Plugin Copyright Statements

Use the standard intellij-community copyright notice in all sample plugins authored by JetBrains:

```text
Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license.
```

> The copyright statement must appear at the top of every source file.
> Use the [IntelliJ Platform SDK](https://github.com/JetBrains/intellij-sdk-docs/tree/main/.idea/copyright) copyright profile.
>
{style="note"}

## Directory Naming Conventions for SDK Plugins

For _basic_ samples, the plugin directory name is derived from the IntelliJ Platform extension points demonstrated.
For example, <path>foo_basics</path> where _foo_ corresponds to an IntelliJ Platform framework, extension point, or component.
Some naming examples include <path>facet_basics</path> and <path>editor_basics</path>.
There is only one _basic_ sample per IntelliJ Platform API area.

For _advanced_ code samples, the name should reflect the complex functionality delivered by the plugin rather than the IntelliJ Platform APIs.
Advanced samples will be cross-referenced to the IntelliJ Platform APIs demonstrated in the sample.

The only symbol characters allowed in the name of a plugin root directory are underscores, such as <path>foo_basics</path> or <path>max_opened_projects</path>.
However, underscores should _not_ be used in any other symbol names, such as `Artifact ID`, plugin ID, package names, etc.
Instead, concatenate a long name into camelCase such as <path>maxOpenedProjects</path>.

## Group and Artifact ID

When creating a Gradle-based IntelliJ Platform plugin, the plugin's Maven coordinates (`Group ID`, `Artifact ID`, `Version`) are defined.

The `Group ID` for SDK plugins is always `org.intellij.sdk`.

The `Artifact ID` is a brief derivative of the plugin directory name.
An `Artifact ID` should not contain symbols.

For _basic_ code samples, it is not necessary to include "basic" in the `Artifact ID`.
For example, the `foo_basics` directory name would have the `Artifact ID` `foo`.

A plugin with a longer directory name, such as <path>conditional_operator_intention</path>, could have the more succinct `Artifact ID` of `conditionalOperatorIntention`.
(For legacy reasons, the <path>conditional_operator_intention</path> plugin uses a more concise `Artifact ID`.)

## Plugin ID Conventions

The plugin ID appears between [`<id>`](plugin_configuration_file.md#idea-plugin__id) elements in the <path>[plugin.xml](plugin_configuration_file.md)</path> file.

In general, the plugin ID is the `Group ID` concatenated with the `Artifact ID`.
For example, a plugin like <path>facet_basics</path> has the plugin ID `org.intellij.sdk.facet`.

Plugin IDs do not contain underscores.

## Plugin Package Names

Packages in plugins should begin with the plugin ID.
If there is only one package in a plugin, then the package name is the same as the plugin ID.
Additional suffix words, separated by "." characters, can be added to form more specific package names.
Package names do not contain underscores.

## Plugin Directory Structure

SDK sample code should have a standard directory footprint.
The standardized structure not only makes the samples simpler to navigate and understand, but it builds on the default Gradle plugin project structure.

Note that directories below the plugin root folder should not have underscore characters, and should use camelCase if needed.
The following is an example directory structure for a `foo_basics` plugin.

```text
code_samples/
  foo_basics/
    gradle/
    src/
      main/
        java/
          org.intellij.sdk.foo/
          icons/
            SdkIcons.java     # The standard SDK icon class
        resources/
          icons/
            sdk_16.svg        # The standard SDK icon for menus, etc.
          META-INF/
            plugin.xml        # The plugin configuration file
            pluginIcon.svg    # The standard SDK plugin icon
      test/                   # Omit if there are no tests
        java/
          org.intellij.sdk.foo/
        resources/
    build.gradle.kts
    gradlew
    gradle.bat
    settings.gradle.kts
    README.md
```

## Gradle Build Script Conventions

SDK code samples must be developed [using Gradle](creating_plugin_project.md).
As of this writing, the use of Gradle in SDK code samples still relies heavily on the <path>plugin.xml</path> for specifying the plugin configuration.
At a later, second phase, the SDK code samples will transition to rely more on the Gradle configuration.

The default contents of a Gradle build script file are produced by the [New Project Wizard](creating_plugin_project.md#create-ide-plugin).
A consistent structure for an SDK code sample's Gradle build script file is essential for clarity and is based on the default produced by the project wizard.
Comments in SDK code sample Gradle build scripts should only draw attention to the parts of the Gradle configuration that are unique for a plugin.

For SDK code samples, a few alterations are needed to the default <path>build.gradle.kts</path> file produced by the plugin wizard:
* Maintain the Gradle properties `version` (`project.version`) and `group` (`project.group`).
  See the [Plugin Gradle Properties](creating_plugin_project.md#plugin-gradle-properties-and-plugin-configuration-file-elements) section for how these Gradle properties relate to the elements in <path>plugin.xml</path>.
* Add the following statement to the [Patching DSL](tools_gradle_intellij_plugin.md#tasks-patchpluginxml) (`patchPluginXml {...}`) section:
  ```kotlin
  // Patches <version> value in plugin.xml
  version.set(project.version)
  sinceBuild.set("221")
  untilBuild.set("223.*")
  ```

## plugin.xml Conventions

A consistent structure for the <path>plugin.xml</path> [configuration file](plugin_configuration_file.md) of an SDK code sample is important because we want to draw attention to the unique parts of the file for a plugin.
Comment profusely about unique elements and configurations, and comment sparingly for the rest.

The sequence of elements in an SDK code sample <path>plugin.xml</path> file is:
* [`<id>`](plugin_configuration_file.md#idea-plugin__id) Use the fully qualified [Plugin ID](#plugin-id-conventions).
* [`<name>`](plugin_configuration_file.md#idea-plugin__name) The name value does not have to match the [Plugin Directory Name](#directory-naming-conventions-for-sdk-plugins).
  The name is used for display purposes and should reflect the functionality of the plugin.
  The name must start with "SDK: ".
* [`<version>`](plugin_configuration_file.md#idea-plugin__version) The code sample's version in MAJOR.MINOR.FIX format.
  * MAJOR corresponds to a significant upgrade in functionality.
  * MINOR corresponds to minor refactoring and small improvements in functionality.
  * FIX corresponds to changes that fix problems without significant refactoring.
* [`<depends>`](plugin_configuration_file.md#idea-plugin__depends) Include at least one dependency with the module `com.intellij.modules.platform` to indicate basic plugin compatibility with IntelliJ Platform-based products.
  Add `<depends>` elements containing module FQNs as needed to describe more specialized [Compatibility with Multiple Products](plugin_compatibility.md), and any other [Plugin Dependencies](plugin_dependencies.md).
* [`<description>`](plugin_configuration_file.md#idea-plugin__description) is a concise explanation of what is being demonstrated and how a user would access the functionality.
  If the plugin by default overrides IDE behavior (such as <path>tree_structure_provider</path>) it must be noted in the description.
* [`<change-notes>`](plugin_configuration_file.md#idea-plugin__change-notes) is an ordered list by version numbers with a brief description of changes for each version.
* [`<vendor>`](plugin_configuration_file.md#idea-plugin__vendor) Set the value to `IntelliJ Platform SDK`.
  Set the attributes:
  * `email` omit this attribute.
  * `url` to the JetBrains Marketplace `"https://plugins.jetbrains.com"`
* The remainder of the [plugin configuration elements](plugin_configuration_file.md) should only appear if they are needed by a specific plugin.

## README File

Each code sample provided within the IntelliJ Platform SDK should contain a README file describing the sample purpose and its content.
The [`SAMPLE_README.md`](%gh-sdk-samples-master%/SAMPLE_README.md) file contains a template that should be used as an initial draft for further writing.

Each <path>README.md</path> file is supposed to have the same structure for better navigation and readability:
- A header with the link to the main IntelliJ SDK documentation and a page that the sample refers to.
- _Quickstart_ section briefly describes the sample's purpose and significant parts of the IntelliJ SDK it implements.
- _Extension Points_ section (if implements) with a listing of implemented extension points, links to the implementation classes, and names of extended classes.
- _Actions_ section (if implements) with a listing of implemented actions, action IDs, links to the implementation classes, and names of base action classes.
- _Listeners_ section (if implements) with a listing of implemented application- or project-level listeners, links to the implementation classes, and names of base listener classes.
- Each link that appears in the documentation has to be listed on the very bottom of the file with the clear link ID and proper prefix depending on the link context (`docs:`, `file:`, etc.).

## Testing

IntelliJ Platform SDK code samples should be built and tested against the `since-build` version.

Code samples should build cleanly, with no warnings or errors, and new code samples should pass all default IntelliJ IDEA code inspections.

Testers should complete the following checklist.
Here the term "IDE" means the IntelliJ Platform-based IDE in which the plugin is designed to run:
* The plugin should load in the IDE.
* The correct information about the plugin should display in the <ui-path>Settings | Plugins</ui-path> panel.
* If applicable, the plugin UI, such as tool windows, menu additions, etc. should display correctly.
* The functionality of the plugin should be tested with a sample file.
* If applicable, the plugin should pass unit tests.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# SDK Docs Style Guide

<link-summary>Writing and notation styleguide for SDK Docs.</link-summary>

This document describes the writing style used in authoring open-source IntelliJ Platform SDK documentation.
Before you begin, read this page thoroughly, as well as the [Code of Conduct](intellij-sdk-docs-original_CODE_OF_CONDUCT.md) and [License](https://github.com/JetBrains/intellij-sdk-docs/blob/main/LICENSE.txt) documents.
See also [](intellij-sdk-docs-original_CONTRIBUTING.md) for some general remarks.

For information about contributing to the IntelliJ Platform itself, visit [Contributing to the IntelliJ Platform](platform_contributions.md).

First and foremost, we should keep in mind our audience and their objectives:
_Someone reading technical content is usually looking to answer a specific question.
That question might be broad or narrowly-focused, but either way, our goal is to provide answers without distraction._

To verify grammar and correct spelling, it is highly recommended to use [Grazie Professional](https://plugins.jetbrains.com/plugin/16136-grazie-professional) plugin to highlight any issues on-the-fly in the IDE.

## Documentation Markup

The documentation project is using [Writerside](https://www.jetbrains.com/writerside), so the plugin should be installed to have full support in the IDE.
The topic files themselves are [Markdown](https://github.github.com/gfm/) files (<path>*.md</path>) using some Writerside-specific custom tags (see below).

### Page Format

Each Markdown file **must** start with a copyright notice, formatted using HTML comment notation:

```html
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->
```

It **must** be followed by a header defining its title using level 1 heading:

```
# Contributing to the IntelliJ Platform SDK
```

The page title should be as concise as possible, so it can be reused in the [](#table-of-contents) as is.

#### Excerpt

Every page **should** provide a short excerpt (usually one sentence) using dedicated `<link-summary>` tag before the main page contents:

```html

<link-summary>Defining groups of related settings.</link-summary>
```

#### Highlighted Links

A page can highlight related topics and other important links before the actual content using `<tldr>` tag.
Links must be grouped using "**Bold Category Name**: link1, link2, \[...]" ([Example](language_and_filetype.md)).

Use _Reference_ to link to other topics, _Code_ to link to code/files, _UI Guidelines_ for links to [UI Guidelines](ui_guidelines_welcome.topic), and _Product Help_ for links to [IntelliJ IDEA Help](https://www.jetbrains.com/help/idea).

#### Introductory Text

Do **not** use headings like _Introduction_, _Overview_, etc. for any introductory text.

## Content Style

### Terminology

Consistent terminology helps the reader grasp new concepts more quickly:

* The open-source code in the GitHub repository `intellij-community` is known as the IntelliJ Platform.
  Use the full phrase in the SDK documentation.
* IDEs based on the IntelliJ Platform are described as _IntelliJ Platform-based IDEs_.
  Once that term is used on a page, authors may use _IDEs_.
* When referring to JetBrains products always use the full name such as _IntelliJ IDEA Ultimate Edition_.
  However, only use product names when extensibility or functionality is particular to a product.

> TODO/todo comments are discouraged in the main branch of `intellij-sdk-docs`.
> There are always exceptions, but the best practice is to resolve all TODOs before the final review.
> If immediate resolution isn't possible, write a YouTrack [SDK Issue](https://youtrack.jetbrains.com/issues/IJSDK) that captures the TODO and remove the comment from the document.
>
{title="Do not use TODOs"}

### Text Format Conventions

Start every sentence on a new line.
For very long sentences, add additional line breaks after `,`, `:` or other sensible places.
Very long [links](#links) should also be on a separate line.

Consistent text styles are used to standardize references and keywords:

* Menu paths are wrapped using `<ui-path>` with pipe characters separating each level: `<ui-path>Settings | Editor</ui-path>`: <ui-path>Settings | Editor</ui-path>
  Inside tables, use `&#124;` instead of `|` to prevent escaping problems.
* User interface element names like labels, buttons, checkboxes, etc. are wrapped using `<control>`: `Press <control>Continue</continue>`: Press <control>Continue</control>
* Non-code keywords and quotations, or the names of non-code files are formatted as italic style: \_Theme\_ (_Theme_), \_README.md\_ (_README.md_.)
  Examples of this file type include _LICENSE.txt_ and _README.md_.
* Code keywords and class names are formatted as code style: \`interface\`: `interface`, \`AnAction\`: `AnAction`, \`name\` attribute: `name` attribute.
* Filenames are wrapped using `<path>`: `<path>build.gradle.kts</path>` <path>build.gradle.kts</path>.
* File formats are shown as all capital letters: PNG and XML.
* Filename extensions are not capitalized when part of a full filename, path, or URL: <path>plugin.xml</path>.
* When using \$PLACEHOLDER\$ in non-code parts, it must be escaped: `<path>\$PLACEHOLDER\$/somePath</path>`.
* Keyboard shortcuts are wrapped using `<shortcut>`: `press <shortcut>Alt+Insert</shortcut>` becomes "press <shortcut>Alt+Insert</shortcut>".
* See [Guidelines for Highlighting Syntax](#guidelines-for-highlighting-syntax) for best practices for representing code fragments.
* See [Links to IntelliJ Platform Source](#links-to-intellij-platform-source) for more details about representing names of source files in links.

### Links

Links are handled as standard Markdown links and can be anchored to external sites, pages within the site, or headings in the pages.

When a Markdown header is converted to an HTML header, it is assigned an ID so that it can be linked.
For example, `## Basics` gets the ID of `basics`, and can be linked either on the same page or cross-page as described below.

In some cases (e.g., the same heading text appears multiple times on the same page), it is necessary to specify a distinct ID manually:

```
## Task 1
### Properties
{#task1-properties}
[...]

## Task 2
### Properties
{#task2-properties}
[...]
```

#### General Links

General Markdown links have the default Markdown link style:

* `[Gradle](https://gradle.org)`{disable-links} ([Gradle](https://gradle.org)) links to an external site, such as companies, articles, etc.
  If URL contains `%` character, append `{ignore-vars="true"}`.
* Linking to pages and page sections within the SDK documentation:
    * `[Page Title](page.md)`{disable-links} or `[](page.md)` (use page title as link text) links to an SDK doc page (all located under <path>/topics</path>).
      Note that the extension is <path>.md</path>, _NOT_ <path>.html</path>.
    * Specific _sections_ on pages in the SDK documentation are linked by using section anchors.
      The anchor name will be all lower case, and spaces are replaced with `-`, e.g. `## Page setup` becomes `#page-setup`.
      Once the anchor (`#`) character of the link is entered, the IDE code completion feature shows the available sections.
        * `[Link to a section on the current page](#another-section)`{disable-links} links to a heading on the current page.
        * `[Link to the section on another page](other_page.md#another-section)`{disable-links} links to a heading on another page.

  If the desired link label is the same as an SDK doc page or section title, leave the label part empty, e.g., `[](test-page.md)`{disable-links} or `[](test-page.md#section-1)`{disable-links}.
  The empty link label will be automatically filled with the actual page or section title.

#### Links to IntelliJ Platform Source

Links to files in the IntelliJ Platform (`intellij-community`) repository use `%\gh-ic%` prefix instead of the full URL to the repository.
Links to files in source code packages in other GitHub repositories follow the same rules, except the links use a different custom `gh-...` prefix defined in <path>v.list</path>.

* `[README.md](%\gh-ic%/README.md)`{disable-links} links to any general, non-code information files. ([README.md](%gh-ic%/README.md))
  Examples of this file type include _LICENSE.txt_ and _README.md_.
* `[`IdeaPlugin.xml`](%\gh-ic%/community-resources/resources/META-INF/IdeaPlugin.xml)`{disable-links} links to declarative source code files, use `code` style. ([`IdeaPlugin.xml`](%gh-ic%/community-resources/resources/META-INF/IdeaPlugin.xml))
  Examples of this file type include: `settings.gradle`, `plugin.xml` or `theme_basics.theme.json`.
* `[`\`AnAction\``](%\gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnAction.java)`{disable-links} links to source files for code objects like interfaces and classes, use `code` style but without the file extension. ([`AnAction`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnAction.java))
  Examples of this file type include Java and Kotlin sources.
    * Note the use of \`\` characters surrounding the class name in the link.
    * When linking to an API in this manner, the FQN isn't necessary in the link.
    * No file extension (*.java, *.kt, *.py, etc.) is used by convention.
    * Be judicious when using such links.
      Generally, only one link is needed for a given file on a documentation page.

### Guidelines for Highlighting Syntax

In-paragraph code fragments and IntelliJ Platform APIs are formatted according to the following rules.

#### Code

* Avoid using qualifiers like "`Foo` interface" or "`Foo` abstract class".
  Instead, refer to `Foo`.
* The FQN is used for the first reference to an interface, class, or package on a page.
  Rather than `AnAction`, introduce it as `com.intellij.openapi.actionSystem.AnAction`.
  Later references on the page can be `AnAction`.
  Exception: the FQN is not used with a GitHub [link](#links).
* Method names always use empty parentheses: "call `bar()` to apply."
  Method names are prefixed with the class/interface name when needed for clarity: `Foo.bar()`.

#### Extension Points

* Extension point name must be followed by "extension point (EP)" for the first occurrence on a page.
  All following occurrences can use "EP" suffix.
* Use the FQN when first introducing an [extension point](plugin_extension_points.md) (EP) on a page.
  Rather than `stubIndex`, introduce `com.intellij.stubIndex`.
  Later mentions on the page can be `stubIndex`.

#### XML

* For XML elements, use the tag notation with syntax highlighting: `<idea-version>`.
  Attributes are shown with syntax highlighting, and attribute values are shown in quotes: `since-build="191"`

### Source Code

Source code is represented by using code fences, which are three backticks.

Syntax highlighting is applied by specifying the language after the first set of ticks:

```
    ```xml
    <tagName attribute="value">XML Text</tagName>
    ```
```

Supported languages include `xml`, `java`, `kotlin`, `groovy`, `bash`, `md`, `php`, and `text` for plaintext.

> Source code blocks must have one blank line before and after them, and must have a language specification for highlighting (use `text` as fallback).
>
{style="note"}

Whole files can be imported on a page using `src` attribute after code fences specifying the full path relative to <path>code_samples</path> root folder.

`{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleFoldingBuilder.java"}`

The advantage is the code can come from the `code_samples` directory, so it will be live code that isn't silently stale.

The disadvantage is the file may contain a large class, too large for the documentation page to be useful.
If possible, use `include-symbol="ClassName"` to show only the class body without any headers and imports.
To include only a specific method, specify `include-symbol="methodName"` additionally.

In any case, keep code samples concise and avoid any unnecessary "surrounding" code or import statements.

### Tables

The syntax is to use the pipe (`|`) and minus symbols:

```
    | Column 1 | Column 2 | Column 3 |
    |----------|----------|----------|
    | Blah     | Blah     | Blah     |
```

Use `& #124;` (remove space before `#`!) instead of `|` to prevent escaping problems for `<ui-path>` elements inside cells.

Use `<p>Line 1</p><p>Line 2</p>` for multi-line content in a cell.

### Notes and Callouts

Notes and callouts can be specified using the blockquote syntax.
The converter looks at the `type` attribute specified after the text block.
If so, it applies a callout style.
The example below will be displayed as a callout, styled as a "note":

```
> This is a simple note.
>
{style="note"}
```

> This is a simple note.
>
{style="note"}

The styles available for callouts are:

* `tip`—Information that makes the reader more productive (Default).
* `note`—Information that is important for the reader to understand.
  This callout is reserved for essential points and concepts.
* `warning`—Information that is critical for the user to understand to prevent failures or errors.

Complex callouts can also specify `title` attribute:

```
> This is a note.
> We have a lot of text.
> Don't make everyone read it fully by adding a good title.
>
{title="A useful title"}
```

> This is a note.
> We have a lot of text.
> Don't make everyone read it fully by
> adding a good title.
>
{title="A useful title"}

### Images

Every page typically has a dedicated subdirectory within root <path>/images</path>.

Images in this documentation are generally screenshots.
For consistency, images should be 296, 460 or 706 pixels wide.
The preferred image format is PNG at a resolution of 144 DPI.
A resolution of 72 DPI is acceptable but may look blurry on high-resolution monitors.

Use [Window Resizer](https://plugins.jetbrains.com/plugin/18045-window-resizer) plugin for exact resizing of the IDE application window.

It is crucial to reduce the size of image files to prevent bloating the repository and impacting the performance of the documentation site.
Optimize the image files using a tool such as the [PNG optimizer](https://plugins.jetbrains.com/plugin/7942-png-optimizer) plugin.

Images are embedded in a document by adding a Markdown link to the image like so:

```
    ![Alt text](image.png)
```

If the width of an image needs to be adjusted, it can be specified as follows:

```
    ![Alt text](image.png){width="42"}
```

#### Zoom Popup

Images too big to fit into the main content can have <control>+</control> overlay control to open a popup with the "zoomed" variant.

<tabs>
<tab title="PNG">

For **PNG** images, provide an additional zoomed variant <path>image.zoomed.png</path> with this notation:

```
    ![Alt text](image.png){thumbnail="true"}
```

</tab>

<tab title="SVG">

For **SVG** images, use this notation:

```
    ![Alt text](image.svg){thumbnail-same-file="true"}
```

</tab>

</tabs>

## Table of Contents

The table of contents for the site is displayed in the tree view on the left side of the site, and it is generated from the <path>ijs.tree</path> file.
The list can have nested items, which are displayed as child items in the table of contents.

If absolutely required, overriding the page title text to show in table of contents is possible via `toc-title` attribute.

### Placeholders

If a node does not have its `id` attribute specified, it will still appear in the table of contents but will be greyed out and not clickable.
It acts as a placeholder for a documentation item.
A placeholder is useful to keep track of what should be documented, but hasn't yet, and can be helpful to show readers that the topic exists, but isn't yet documented (Pull Requests always welcome!).

### Redirects

When renaming pages, redirects **must** be configured so existing bookmarks continue working.
All existing links in other topics must be updated.

Specify the previous path(s) including <path>.html</path> extension in `accepts-web-file-names` attribute:

```xml

<toc-element
        id="themes_getting_started.md"
        accepts-web-file-names="themes.html,themes-intro.html"/>
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Search Field

<link-summary>UI guidelines on using search fields.</link-summary>

<tldr>

**Implementation:** [`SearchTextField`](%gh-ic%/platform/platform-api/src/com/intellij/ui/SearchTextField.java)

</tldr>

A search field is an input field that helps users locate objects, actions or text in an application.

![](search_field_example.png){width=400}

This article focuses on the search field.

[//]: # (TODO: See another article for [search results]&#40;search_results.md&#41;.)

## When to use

Use the search field when specific objects are difficult to find at a glance, for example:

* There are many objects, for example, in the VCS Log table or in the Editor with a large file opened.
* Objects aren't in a single location, for example controls are located on different setting pages.

## How to use

### Label and Placeholder

Do **not** add a label to the search field. The magnifying glass icon is self-explanatory.

<format color="Red" style="bold">Incorrect</format>

![](ptree-incorrect.png){width=360}

<format color="Green" style="bold">Correct</format>

![](ptree-correct.png){width=360}

Mark the replace field with a label or a placeholder when shown together with the search field to distinguish between them:

![](structural-replace.png){width=865}

Provide hints and scope as placeholder text.
For example, the placeholder for plugins' search depends on the settings page tab to make it clear that search depends on the tab:

![](placeholder.png){width=581}

### Icons

#### Search Options

Use icon buttons inside the search field to save space and not to overload the UI and to be able to use them in already packed UI such as the Speed Search popup in trees or lists:

![](options.png){width=400}

Available option icons:

| ![](matchCase.png){width=16}   | Match case   |
|--------------------------------|--------------|
| ![](regex.png){width=16}       | Regex        |
| ![](words.png){width=16}       | Words        |
| ![](inSelection.png){width=16} | In selection |
{style=none}

Change the state of options icons on hover so that it is clear that they are clickable:

![](options-hovered.png){width=400}

Make icon buttons easily accessible with Tab navigation.
Option icons should be placed on the right of the search field in the tabbing order.
Show a border around the focused option.

![](options-focused.png){width=400}

Icon buttons should change color when enabled so that it is clear which options are currently enabled:

![](options-on.png){width=400}

#### Clear a Search String

Show the clear button <icon src="../../../images/ui/search_field/icons/clear-light.png" /> only when filtering on-screen content.
When the button is clicked, clear the search field and restore the content to its default state.
Do **not** show the clear button if the search field is empty.

![](clear-search-correct.png){width=581}

Do **not** show the clear button when the initial data state is empty or doesn't differ from the result.
For example, the close icon is not really useful in the editor search field since matches are highlighted and not filtered:

<format color="Red" style="bold">Incorrect</format>

![](clear-search-incorrect.png){width=419}

When search can be configured with options, show the clear button on the left of the option buttons.
This way, option buttons won't jump when the clear button appears.
The separator between the options and the clear button makes it harder to mis-click the potentially dangerous clear icon.

![](search_field_example.png){width=400}

#### Multiline Search Strings

Searching for multiline matches can be achieved with a separate New Line action button:

![](new-line.png){width=342}

Put the New line action button on the left of the option buttons:

![](newline-options.png){width=300}

Move the New Line action button below the option buttons when the search field becomes a multi-line one:

![](multiline.png){width=300}

Add a vertical separator when the scrollbar appears:

![](multiline-scrollbar.png){width=300}

The default shortcut for the New Line action:

<table style="header-column">
  <tr>
    <td>macOS</td>
    <td><shortcut>⇧⌘⏎</shortcut></td>
  </tr>
  <tr>
     <td>Windows/Linux</td>
     <td><shortcut>Ctrl + Shift + Enter</shortcut></td>
  </tr>
</table>

### Completion

Provide completion for complex searches with filtering by attributes:

![](search_field_completion.png){width=354}

Do **not** use filter attributes as separate controls on the toolbar.
Not all of them are needed every time while they take a lot of space and overload the interface.
Use completion instead:

<format color="Red" style="bold">Incorrect</format>

![](filters-incorrect.png){width=550}

<format color="Green" style="bold">Correct</format>

![](filters-correct.png){width=550}

The following syntax is used for attributes:

* Binary attributes are marked with a number sign (#), for example, _#by-jetbrains_ to show plugins which are developed by JetBrains.

* Values for open attributes are provided after a colon, for example, _status: disabled_ to show all disabled plugins.

Provide aliases to the main attributes where possible, this way it would be easier for users to find the required filter.
For example, the User attribute in the VCS Log search field can have the Author alias.

Show a popup with search attributes when the field gets focus, and after each space character except the space character following an attribute's name.
This will make it clear that filtering by attributes is available.

Filter out the completion suggestions as the user types:

![](completion-filtered.png){width=354}

Show a popup with values right after the user has entered an attribute.

![](completion-variants.png){width=354}

### Search History

Use the magnifying glass icon with an arrow when search history is available:

![](search-with-history.png){width=250}

And without an arrow when it's not:

![](search-no-history.png){width=250}

Show search history in a popup when clicking on the magnifying glass icon:

![](search-history-popup.png){width=256}

Show context help in the history popup when it is empty:

![](search-history-empty.png){width=256}

The keyboard shortcut for the History action is <shortcut>Alt + Down</shortcut> on all systems.

Add a search string to history:

* On <shortcut>Enter</shortcut> for searches that are executed.
* When the search field loses focus for searches that are executed on any keystroke.

## Sizes and placement

### Placement

Put the search field on top of the on-screen content that is being searched, and align them vertically.
For example, the search field in <control>Settings</control> dialog is aligned with the filtered settings tree:

<format color="Green" style="bold">Correct</format>

![](search_field_settings.png){width=256}

The search field is not aligned with the content on the Keymap settings page, which makes it harder to relate the content and the search string:

<format color="Red" style="bold">Incorrect</format>

![](keymap-search-incorrect.png){width=491}

<format color="Green" style="bold">Correct</format>

![](keymap-search-correct.png){width=491}

Fit the search field to the popup windows and to a toolbar if it has top borders. This way the overall form looks less complex.

<format color="Red" style="bold">Incorrect</format>

![](log-incorrect.png){width=475}

<format color="Green" style="bold">Correct</format>

![](log-correct.png){width=475}

| <format color="Red" style="bold">Incorrect</format> | <format color="Green" style="bold">Correct</format> |
|-----------------------------------------------------|-----------------------------------------------------|
| ![](popup-incorrect.png){width="235"}               | ![](popup-correct.png){width="235"}                 |

Show the search field on demand when search is supplementary to other functionality or if space is limited.
For example, space in the Project view is limited and too loaded to always show the _Speed Search_ bar:

![](ptree-correct.png){width=360}

When searching through content that is not displayed on the screen, put the search field on top of the active frame as a popup.
This makes it more prominent and gives space for search results.
For example, Search Everywhere is shown on top of the main IDE frame:

![](search-everywhere.png){width=686}

### Sizes

For a search field shown without a toolbar (i.e. _Speed Search_ in trees), the search width could be adjusted on typing to accommodate input:

![](search_field_width.png){width=160}

For a search field that is not fitted to a toolbar, set the minimum width to 200:

![](width-toolbar.png){width=425}

For a search which is fitted to the toolbar, expand the field to the toolbar width.

Center-align icons and the search string with the one-line search field vertically. Adjust the right and left paddings to the higher search fields:

![](search-icon-position-small.png){width=297}

![](search-icon-position-big.png){width=296}

Save the position of the search and option icons when the search field becomes a multi-line one:

![](multiline-mes.png){width=250}

### Spaces

Between the floating search field and on-screen content:

![](ptree-sizes.png){width=265}

Between history and the search field:

![](search-history-popup-mes.png){width=269}

Between search string and completion popup:

![](completion-mes-2.png){width=266}

Completion popup:

![](completion-mes.png){width=95}

## Style

### Colors and Fonts

For a general search field, use the same colors as for an input field.

For a search field that is fitted to the toolbar, use a narrower focus border on macOS. The border width is 2px in that case:
![](log-focused.png){width=475}

Use the same font for the search string as used for showing the results.

Use the Context help font color for the attributes' names as they are secondary to their values.

# Setting Up a Development Environment

<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<link-summary>Setting up a development environment required for developing a theme.</link-summary>

<procedure title="Preliminary Steps">

<include from="snippets.md" element-id="pluginDevKitAvailability"/>

Use the following checklist to ensure that you are ready to develop your custom theme:

1. **[IntelliJ IDEA Community Edition](https://www.jetbrains.com/idea/download/)** or **[IntelliJ IDEA Ultimate](https://www.jetbrains.com/idea/download/)** is installed.
2. **Plugin DevKit** plugin is installed and [enabled in IntelliJ IDEA](https://www.jetbrains.com/help/idea/managing-plugins.html).
3. **IntelliJ IDEA CE source code** is checked-out. _(Optional)_

   This step is needed only when you plan to debug the IntelliJ Platform code.
   See [](#get-intellij-idea-ce-source-code) for more details.
4. **IntelliJ Platform SDK** is [configured](#configuring-intellij-platform-plugin-sdk).

</procedure>

## Get IntelliJ IDEA CE Source Code

Getting the IntelliJ IDEA CE source code is not a requirement for theme development as debugging the platform code while developing a theme is a rare situation.
In case you are developing a plugin extending IDE behavior, or you need to understand how some components work internally, having sources makes debugging much more straightforward.

For detailed instructions on how to check out the code efficiently, refer to the _Getting IntelliJ IDEA Community Edition Source Code_ section of [IntelliJ IDEA Community Edition README file](%gh-ic%/README.md).
Note that building the checked-out sources is not required in this case.

## Configuring IntelliJ Platform Plugin SDK

> For more information about SDKs, see [SDKs section](https://www.jetbrains.com/help/idea/working-with-sdks.html) in the IntelliJ IDEA Web Help.

### Download IntelliJ-Based IDE

To see the effects of the developed plugin in real IDE, it is required to run the plugin in an [](ide_development_instance.md).
In most cases, it is enough to download and use _[IntelliJ IDEA](https://www.jetbrains.com/idea/download/) Community Edition_.
If it is required to style components used only in a specific IDE like _IntelliJ IDEA Ultimate_ or _WebStorm_, they can also be used as SDK, but debugging the core code will only work with the _IntelliJ IDEA Community Edition_.

### Add JDK and IntelliJ Platform Plugin SDK

The first step of configuring a theme plugin SDK is adding the JDK.

<include from="snippets.md" element-id="apiChangesJavaVersion"/>

<procedure title="Add JDK" id="add-jdk">

1. Go to <ui-path>File | Project Structure | Platform Settings | SDKs</ui-path>.
2. Click the <control>Add</control> button (<control>+</control>).
3. If you have the required JDK installation on your machine, and it is detected, select it from the <control>Detected SDKs</control> list.
   If your JDK is not detected, select the <control>Add JDK...</control> option and choose the installation folder.

   If the required JDK is not installed on your machine, the simplest option is using <control>Download JDK...</control> and choosing the distribution options.
4. Click the <control>Apply</control> button.

</procedure>

The second step is adding IntelliJ Platform Plugin SDK that will use the JDK configured in the first step.

<procedure title="Add IntelliJ Platform Plugin SDK" id="add-intellij-platform-plugin-sdk">

1. Go to <ui-path>File | Project Structure | Platform Settings | SDKs</ui-path>.
2. Click the <control>Add</control> button (<control>+</control>).
3. Select the <control>Add IntelliJ Platform Plugin SDK...</control> option.
4. Choose the installation folder of the IDE [downloaded previously](#download-intellij-based-ide) (on macOS, select application icon in <path>/Applications/</path>).
5. In the <control>Select Internal Java Platform</control> dialog, select the JDK configured in the [previous step](#add-jdk) and click <control>OK</control> button.
6. In the added SDK, specify the <control>Sandbox Home</control> directory.

   See [](ide_development_instance.md#the-development-instance-sandbox-directory) for details.
7. If debugging is required, select the <control>Sourcepath</control> tab, click the <control>Add</control> button (<control>+</control>) and select the root folder of [the checked-out sources](#get-intellij-idea-ce-source-code).
8. Click the <control>Apply</control> button.

</procedure>
# Settings

<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<link-summary>Settings mechanism allows users to configure and persist application- or project-level plugin preferences.</link-summary>

<tldr>

**Product Help:** [Settings](https://www.jetbrains.com/help/idea/settings-preferences-dialog.html), [Configuring the IDE](https://www.jetbrains.com/help/idea/configuring-project-and-ide-settings.html)

</tldr>

Settings are but one application of the IntelliJ Platform [Persistence Model](persistence.md).
For more information, see:
* [Settings Guide](settings_guide.md) for information about Settings Extension Points and implementations.
* [Custom Settings Groups](settings_groups.md) for information about creating custom Settings groups and parent-child relationships.
* [Settings Tutorial](settings_tutorial.md) for step-by-step instructions for creating a simple set of custom Settings.

<include from="snippets.md" element-id="missingContent"/>
# Custom Settings Groups

<!-- Copyright 2000-2023 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

<link-summary>Defining groups of related settings.</link-summary>

As described in [](settings_guide.md#extension-points-for-settings), custom Settings can be declared as children of existing parent groups such as <ui-path>Tools</ui-path>.
These parent groups are the existing categories of Settings in the IntelliJ Platform-based IDE.

However, suppose the custom Settings are rich enough to require multiple levels?
For example, a custom Setting implementation has multiple sub-Settings implementations.
Extension Point declarations can create this kind of multilayer Settings hierarchy.

<include from="settings_guide.md" element-id="settings_ui_inspector"/>

## Extension Points for Parent-Child Settings Relationships

There are multiple ways of creating parent-child relationships in groups of Settings: in implementations, or Extension Point declarations.
However, there are performance penalties for creating these relationships in implementations because the objects must be instantiated to determine the relationships.
This section describes the syntax for declaring more complex parent-child relationships in `com.intellij.projectConfigurable` or `com.intellij.applicationConfigurable` EPs.

> An application configurable can be a parent of a project configurable.
>
{style="note"}

There are two ways of declaring parent-child relationships using the `com.intellij.projectConfigurable` EP or `com.intellij.applicationConfigurable` EP.
The first is to use separate EP declarations that are tied together by the value of one attribute.
The second method is to use nested declarations.

### Parent-Child Settings Using Separate EPs

One way of declaring a parent-child relationship is by using two separate declarations.
This form can be used regardless of whether the parent Settings declaration is in the same plugin.
If the `id` attribute of the parent is known, a plugin can add Settings as a child of that parent.

For example, below are two declarations for project Settings.
The first gets added to the `tools` group, and the second gets added to the `id` of the parent.
The `id` of the second, child `<projectConfigurable>` adds a suffix (`servers`) to the `id` of the parent.

```xml
<extensions defaultExtensionNs="com.intellij">
  <projectConfigurable
      parentId="tools"
      id="com.intellij.sdk.tasks"
      displayName="Tasks"
      nonDefaultProject="true"
      instance="com.intellij.sdk.TaskConfigurable"/>

  <projectConfigurable
      parentId="com.intellij.sdk.tasks"
      id="com.intellij.sdk.tasks.servers"
      displayName="Servers"
      nonDefaultProject="true"
      instance="com.intellij.sdk.TaskRepositoriesConfigurable"/>
</extensions>
```

See the [Attributes for Parent-Child Settings EPs](#attributes-for-parent-child-settings-eps) section for details about the suffix `id`.

### Parent-Child Settings Using Nested EPs

A shorthand for the separate declaration approach is using the `configurable` property.
This approach nests the child's Settings declaration within the `com.intellij.projectConfigurable` or `com.intellij.applicationConfigurable` EP.

When using `configurable` there isn't a `parentId` for the child because the nesting implies it.
As with using separate EP declarations, formatting restrictions are placed on the child's `id` attribute - the suffix (`servers`) gets added.
See the [](#attributes-for-parent-child-settings-eps) section.

The example below demonstrates a nested `configurable` declaration:

```xml
<extensions defaultExtensionNs="com.intellij">
  <projectConfigurable
        parentId="tools"
        id="com.intellij.sdk.tasks"
        displayName="Tasks"
        nonDefaultProject="true"
        instance="com.intellij.sdk.TaskConfigurable"/>
    <configurable
        id="com.intellij.sdk.tasks.servers"
        displayName="Servers"
        nonDefaultProject="true"
        instance="com.intellij.sdk.TaskRepositoriesConfigurable"/>
  </projectConfigurable>
</extensions>
```

Within the parent `<projectConfigurable>` EP declaration above, more `<configurable>` declarations could be added as sibling Settings.

### Attributes for Parent-Child Settings EPs

There is only one unique attribute when declaring a child Settings EP.
The other attributes are the same as discussed in [](settings_guide.md#settings-declaration-attributes).

For the child of a parent, the `id` attribute becomes compound:

| Attribute | Required | Value                                                                                                                                                                                                                                             |
|:----------|:--------:|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `id`      |    Y     | <p>Compound FQN of implementation based on `com.intellij.openapi.options.Configurable` in the form: `XX.YY` where:</p><ul><li>`XX` - the parent Settings component FQN-based ID</li><li>`YY` - unique to the child among other siblings</li></ul> |

> All children share the parent's `id` as the basis of their own `id`.
> All children have an `id` suffix that is unique among their siblings.

## Implementations for Parent-Child Settings

Implementations can be based on [`Configurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/Configurable.java), [`ConfigurableProvider`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/ConfigurableProvider.java) or one of their subtypes.
For more information about creating Settings implementations, see [](settings_guide.md#implementations-for-settings-extension-points).

### Configurable Marker Interfaces

The `Configurable.Composite` interface indicates a configurable component has child components.
The preferred approach is to specify child components in the [EP declaration](#extension-points-for-parent-child-settings-relationships).
Using the `Composite` interface incurs the penalty of loading child classes while building the tree of Settings Swing components.
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Settings Guide

<link-summary>Adding entries in Settings.</link-summary>

_Settings_ persistently store states that control the behavior and appearance of IntelliJ Platform-based IDEs.
On this page, the term "Settings" means the same as "Preferences" on some platforms.

Plugins can create and store Settings to capture their configuration in a way that uses the IntelliJ Platform [Persistence Model](persisting_state_of_components.md).
The User Interface (UI) for these custom Settings can be added to the [IDE Settings dialog](https://www.jetbrains.com/help/idea/settings-preferences-dialog.html).

Settings can [affect different levels](https://www.jetbrains.com/help/idea/configuring-project-and-ide-settings.html) of scope.
This document describes adding custom Settings at the Project and Application (or Global, IDE) levels.

> See [Settings Tutorial](settings_tutorial.md) for step-by-step instructions for creating a simple set of custom Settings.
>
{style="note"}

<snippet id="settings_ui_inspector">

> See [](internal_ui_inspector.md#inspecting-settings) on how to gather information in the IDE instance for <control>Settings</control> dialog.
>
{style="tip"}

</snippet>

## Extension Points for Settings

Custom Settings implementations are declared in the <path>[plugin.xml](plugin_configuration_file.md)</path> file using one of two extension points (EP), depending on the level of the Settings.
Many [attributes](#settings-declaration-attributes) are shared between the EP declarations.

Application and Project Settings typically provide an implementation based on the [`Configurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/Configurable.java) interface because they do not have runtime dependencies.
See [Implementations for Settings Extension Points](#implementations-for-settings-extension-points) for more information.

> For performance reasons, it is recommended to declare as much information as possible about a 'Settings' implementation using attributes in the EP element in the <path>plugin.xml</path> descriptor.
> If it is not declared, the component must be loaded to retrieve it from the implementation, degrading UI responsiveness.
>
{style="note"}

### Declaring Application Settings

The application-level settings are declared using `com.intellij.applicationConfigurable` EP.

An example `<applicationConfigurable>` EP declaration is shown below.
The declaration indicates the settings are a child of the `tools` settings group, the implementation FQN is `com.example.ApplicationSettingsConfigurable`, the unique ID is the same as the implementation fully qualified name (FQN), and the (non-localized) title displayed to users is "My Application Settings".
See [](#settings-declaration-attributes) for more information.

```xml
<extensions defaultExtensionNs="com.intellij">
  <applicationConfigurable
      parentId="tools"
      instance="com.example.ApplicationSettingsConfigurable"
      id="com.example.ApplicationSettingsConfigurable"
      displayName="My Application Settings"/>
</extensions>
```

> To [localize](providing_translations.md) the display name, instead of the `displayName` attribute, use `key` and `bundle` attributes pointing to a key in a [message bundle](internationalization.md#message-bundles).
> The same applies for [`projectConfigurable`](#declaring-project-settings) extensions.

### Declaring Project Settings

The project-level settings are declared using `com.intellij.projectConfigurable` EP.

An example `<projectConfigurable>` EP declaration is shown below.
Similar to the application setting example above, but it includes the additional attribute `nonDefaultProject` indicating these settings do not apply to the [default project](https://www.jetbrains.com/help/idea/configure-project-settings.html#new-default-settings).
See [](#settings-declaration-attributes) for details.

```xml
<extensions defaultExtensionNs="com.intellij">
  <projectConfigurable
      parentId="tools"
      instance="com.example.ProjectSettingsConfigurable"
      id="com.example.ProjectSettingsConfigurable"
      displayName="My Project Settings"
      nonDefaultProject="true"/>
</extensions>
```

### Settings Declaration Attributes

Readers are encouraged to review the Javadoc comments for [`Configurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/Configurable.java) because the attribute information applies to `ConfigurableProvider` as well as `Configurable`, as noted.
This section provides some additional clarification of those comments.

#### Table of Attributes

The attributes supported by `com.intellij.applicationConfigurable` EP and `com.intellij.projectConfigurable` EP are in the table below:

| Attribute           | Required                        | <p>Attribute</p><p>Value</p>                                                                                                                                                                                                                                                                                                                                                                        | <p>Implementation</p><p>Basis</p>                  |
|---------------------|---------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
| `instance`          | **yes** [(1)](#attribute-notes) | FQN of implementation. See [](#the-configurable-interface) for more information.                                                                                                                                                                                                                                                                                                                    | `Configurable`                                     |
| `provider`          | **yes** [(1)](#attribute-notes) | FQN of implementation. See [](#the-configurableprovider-class) for more information.                                                                                                                                                                                                                                                                                                                | `ConfigurableProvider`                             |
| `nonDefaultProject` | **yes**                         | <p>Applicable _only_ to the `com.intellij.projectConfigurable` (project Settings) EP.</p><p>`true` = show Settings for all projects _except_ the [default project](https://www.jetbrains.com/help/idea/configure-project-settings.html#new-default-settings).</p><p>`false` = show Settings for all projects.</p>                                                                                   | `Configurable`                                     |
| `displayName`       | **yes** [(2)](#attribute-notes) | <p>The non-localized Settings name visible to users, which is needed for the Settings dialog left-side menu.</p><p>For a _localized_ visible name omit `displayName` and use the `key` and `bundle` attributes.</p>                                                                                                                                                                                 | <p>`Configurable`</p><p>`ConfigurableProvider`</p> |
| `key` and `bundle`  | **yes** [(2)](#attribute-notes) | <p>The [localization](internationalization.md#message-bundles) key and bundle for the Settings name visible to users.</p><p>For non-localized visible names omit `key` and `bundle` and use `displayName`.</p>                                                                                                                                                                                      | <p>`Configurable`</p><p>`ConfigurableProvider`</p> |
| `id`                | **yes**                         | <p>The unique, FQN identifier for this implementation.</p><p>The FQN should be based on the plugin `id` to ensure uniqueness.</p>                                                                                                                                                                                                                                                                   | <p>`Configurable`</p><p>`ConfigurableProvider`</p> |
| `parentId`          | **yes**                         | <p>This attribute is used to create a hierarchy of Settings. This component is declared one of the specified `parentId` component's children. Typically used for placing a Settings panel within the Settings Dialog menu. Acceptable values for `parentId` are given in [](#values-for-parent-id-attribute).</p><p>`groupId` is deprecated. [(3)](#attribute-notes)</p>                            | <p>`Configurable`</p><p>`ConfigurableProvider`</p> |
| `groupWeight`       | no                              | <p>Specifies the weight (stacking order) of this component within the group of a parent configurable component. The default weight is 0, meaning lowest in the order.</p><p>If one child in a group or a parent component has non-zero weight, all children will be sorted descending by their weight. If the weights are equal, the components will be sorted ascending by their display name.</p> | <p>`Configurable`</p><p>`ConfigurableProvider`</p> |
| `dynamic`           | no                              | <p>This component's children are dynamically calculated by calling the `getConfigurables()` method.</p><p>Not recommended because it requires loading additional classes while building a Settings tree. If possible, use XML attributes instead.</p>                                                                                                                                               | `Configurable.Composite`                           |
| `childrenEPName`    | no                              | Specifies the FQN name of the Extension Point that will be used to calculate the children of this component.                                                                                                                                                                                                                                                                                        | `Configurable`                                     |

##### Attribute Notes

(1) Either `instance` or `provider` must be specified depending on the implementation.

(2) Either `displayName` or `key` and `bundle` must be specified depending on whether the displayed Settings name is localized.

(3) If both `groupId` and `parentId` are specified, a warning is logged. Also, see _default_ entry in [](#values-for-parent-id-attribute).

#### Values for Parent ID Attribute

The table below shows all <control>Settings</control> groups and their corresponding value for the `parentId` attribute.
See the [previous section](#table-of-attributes) for all supported attributes.

| Group                                                | `parentId` Value | Details                                                                                                                                                                                                                                                                                                  |
|------------------------------------------------------|------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Appearance & Behavior                                | `appearance`     | This child group contains Settings to personalize IDE appearance, such as: changing themes and font size. Also, it covers Settings to customize behavior such as keymaps, configuring plugins, and system Settings such as password policies, HTTP proxy, updates, and more.                             |
| Build, Execution, Deployment                         | `build`          | Child group containing Settings to configure project integration with different build tools, modify the default compiler Settings, manage server access configurations, customize the debugger behavior, etc.                                                                                            |
| Build Integration                                    | `build.tools`    | A subgroup of `build`. This subgroup configures project integration with build tools such as Maven, Gradle, or Gant.                                                                                                                                                                                     |
| Editor                                               | `editor`         | Child group containing Settings to personalize source code appearance, such as fonts, highlighting styles, indents, etc. It also contains Settings to customize the editor's appearance, such as line numbers, caret placement, tabs, source code inspections, setting up templates, and file encodings. | |
| Languages and Frameworks                             | `language`       | Child group containing Settings related to specific language frameworks and technologies used in the project.                                                                                                                                                                                            |
| 3rd Party Settings                                   | `tools`          | Child group containing Settings to configure integration with third-party applications, specify the SSH Terminal connection Settings, manage server certificates and tasks, configure diagrams layout, etc.                                                                                              |
| Super Parent                                         | `root`           | The invisible parent of all existing groups. Not used except for IDEs built on top of the IntelliJ Platform, or extensive suites of Settings. You should not place settings in this group.                                                                                                               |
| <p>`other`</p><p>**Do not use**</p>                  | _default_        | If neither `parentId` nor `groupId` attribute is set, the component is added to the `other` Settings group. This is undesirable; see `other` group description.                                                                                                                                          |
| <p>Catch-all</p><p>**Deprecated**</p>                | `other`          | The IntelliJ Platform no longer uses this group. Do not use this group. Use the `tools` group instead.                                                                                                                                                                                                   |
| <p>Project-related Settings</p><p>**Deprecated**</p> | `project`        | The IntelliJ Platform no longer uses this group. It was intended to store some project-related settings. Do not use this group.                                                                                                                                                                          |

## Implementations for Settings Extension Points

Implementations for `com.intellij.projectConfigurable` EP and `com.intellij.applicationConfigurable` EP can have one of two bases:
* The [`Configurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/Configurable.java) interface, which provides a named configurable component with a Swing form.
  Most Settings providers are based on the `Configurable` interface or one of its sub- or supertypes.
* The [`ConfigurableProvider`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/ConfigurableProvider.java) class, which can hide a configurable component from the Settings dialog based on runtime conditions.

### The `Configurable` Interface

Many Settings in the `intellij-community` code base implement `Configurable` or one of its subtypes, such as [`SearchableConfigurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/SearchableConfigurable.java).
Readers are encouraged to review the Javadoc comments for `Configurable`.

#### Constructors

Implementations must meet several requirements for constructors.
* Application Settings implementations, declared using the [`applicationConfigurable` EP](#declaring-application-settings), must have a default constructor with no arguments.
* Project Settings implementations, declared using the [`projectConfigurable` EP](#declaring-project-settings), must declare a constructor with a single argument of type [`Project`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/Project.java).
* Beginning in 2020.2, constructor injection (other than for `Project`) is not allowed.

For a `Configurable` implementation correctly declared using an EP, the implementation's constructor is not invoked by the IntelliJ Platform until a user chooses the corresponding Settings `displayName` in the Settings Dialog menu.

> The IntelliJ Platform may instantiate a `Configurable` implementation on a background thread, so creating Swing components in a constructor can degrade UI responsiveness.
>
{style="warning"}

#### IntelliJ Platform Interactions with `Configurable`

The instantiation of a generic `Configurable` implementation is documented in the interface file.
A few high-level points are reviewed here:
* The `Configurable.reset()` method is invoked immediately after `Configurable.createComponent()`.
  Initialization of Setting values in the constructor or `createComponent()` is unnecessary.
* See the [](#constructors) section for information about when a Settings object is instantiated.
* Once instantiated, a `Configurable` instance's lifetime continues regardless of whether the implementation's Settings are changed, or the user chooses a different entry on the Settings Dialog menu.
* A `Configurable` instance's lifetime ends when <control>OK</control> or <control>Cancel</control> is selected in the Settings Dialog.
  An instance's `Configurable.disposeUIResources()` is called when the Settings Dialog is closing.

To open Settings dialog or show specific `Configurable`, see [`ShowSettingsUtil`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/options/ShowSettingsUtil.java).

#### `Configurable` Marker Interfaces

Implementations based on `Configurable` can implement marker interfaces, which provide additional flexibility in the implementation.

`Configurable.NoScroll`
: Do not to add scroll bars to the form. By default, a plugin's Settings component is put into a scrollable pane.
  However, a Settings panel can have a `JTree`, which requires its own `JScrollPane`.
  So `NoScroll` interface should be used to remove the outer `JScrollPane`.

`Configurable.NoMargin`
: Do not add an empty border to the form. By default, an empty border is added for a plugin's Settings component.

`Configurable.Beta`
: _(2022.3)_ Adds <control>Beta</control> label next to settings page title in <control>Settings</control> tree.

#### Additional Interfaces Based on `Configurable`

There are classes in the IntelliJ Platform specialized in particular types of Settings.
These subtypes are based on `com.intellij.openapi.options.ConfigurableEP`.
For example, <ui-path>Settings | Editor | General | Appearance</ui-path> allows adding Settings via [`EditorSmartKeysConfigurableEP`](%gh-ic%/platform/lang-impl/src/com/intellij/application/options/editor/EditorSmartKeysConfigurableEP.java) registered in `com.intellij.editorSmartKeysConfigurable` EP.

#### Examples

Existing implementations of `Configurable` in the IntelliJ Platform that can serve as a reference are:
* [`ConsoleConfigurable`](%gh-ic%/platform/lang-impl/src/com/intellij/execution/console/ConsoleConfigurable.java) (application configurable)
* [`AutoImportOptionsConfigurable`](%gh-ic%/platform/lang-impl/src/com/intellij/application/options/editor/AutoImportOptionsConfigurable.kt) (project configurable)

### The `ConfigurableProvider` Class

The [`ConfigurableProvider`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/ConfigurableProvider.java) class only provides a `Configurable` implementation if its runtime conditions are met.
The IntelliJ Platform first calls the `ConfigurableProvider.canCreateConfigurable()`, which evaluates runtime conditions to determine if Settings changes make sense in the current context.
If the Settings make sense to display, `canCreateConfigurable()` returns `true`.
In that case the IntelliJ Platform calls `ConfigurableProvider.createConfigurable()`, which returns the `Configurable` instance for its Settings implementation.

By choosing not to provide a `Configuration` implementation in some circumstances, the `ConfigurableProvider` opts out of the Settings display and modification process.
The use of `ConfigurableProvider` as a basis for a Settings implementation is declared using [attributes](#table-of-attributes) in the EP declaration.

**Examples:**
- [`RunToolbarSettingsConfigurableProvider`](%gh-ic%/platform/execution-impl/src/com/intellij/execution/runToolbar/RunToolbarSettingsConfigurableProvider.kt)
- [`VcsManagerConfigurableProvider`](%gh-ic%/platform/vcs-impl/src/com/intellij/openapi/vcs/configurable/VcsManagerConfigurableProvider.java)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Settings Tutorial

<link-summary>Implementing custom settings tutorial.</link-summary>

As discussed in the [](settings_guide.md), plugins can add Settings to IntelliJ Platform-based IDEs.
The IDE displays the Settings in response to a user choosing <ui-path>Settings</ui-path>.
Custom Settings are displayed and function like those native to the IDE.

## Overview of Custom Settings Implementation

Using the SDK code sample [`settings`](%gh-sdk-samples-master%/settings), this tutorial illustrates the steps to creating custom application-level settings.
Many IntelliJ Platform Settings implementations use fewer classes, but the `settings` code sample factors the functionality into three classes for clarity:
* The [`AppSettingsConfigurable`](%gh-sdk-samples-master%/settings/src/main/java/org/intellij/sdk/settings/AppSettingsConfigurable.java) is analogous to a Controller in the MVC model – it interacts with the other two Settings classes and the IntelliJ Platform,
* The [`AppSettings`](%gh-sdk-samples-master%/settings/src/main/java/org/intellij/sdk/settings/AppSettings.java) is like a Model because it stores the Settings persistently,
* The [`AppSettingsComponent`](%gh-sdk-samples-master%/settings/src/main/java/org/intellij/sdk/settings/AppSettingsComponent.java) is similar to a View because it displays and captures edits to the values of the Settings.

The structure of the implementation is the same for Project Settings, but there are minor differences in the [`Configurable` implementation](settings_guide.md#constructors) and [extension point (EP) declaration](settings_guide.md#declaring-project-settings).

> See
> [`MarkdownSettings`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/settings/MarkdownSettings.kt)
> and
> [`MarkdownSettingsConfigurable`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/settings/MarkdownSettingsConfigurable.kt)
> classes for the settings example implemented in Kotlin with usage of [Kotlin UI DSL](kotlin_ui_dsl_version_2.md).
>
{style="note"}

## The `AppSettings` Class

The `AppSettings` class persistently stores the custom Settings.
It is based on the [IntelliJ Platform Persistence Model](persisting_state_of_components.md#using-persistentstatecomponent).

### Declaring `AppSettings`

Given a [Light Service](plugin_services.md#light-services) is not used, the persistent data class must be declared as a [Service](plugin_services.md#declaring-a-service) EP in the <path>[plugin.xml](plugin_configuration_file.md)</path> file.
If these were Project Settings, the `com.intellij.projectService` EP would be used.
However, because these are Application Settings, the `com.intellij.applicationService` EP is used with the fully qualified name (FQN) of the implementation class:

```xml
<extensions defaultExtensionNs="com.intellij">
  <applicationService
      serviceImplementation="org.intellij.sdk.settings.AppSettings"/>
</extensions>
```

### Creating the `AppSettings` Implementation

As discussed in [Implementing the PersistentStateComponent Interface](persisting_state_of_components.md#implementing-the-persistentstatecomponent-interface), `AppSettings` uses the pattern of implementing [`PersistentStateComponent`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/components/PersistentStateComponent.java) parameterized by a separate state class:

```java
```
{src="settings/src/main/java/org/intellij/sdk/settings/AppSettings.java" include-symbol="AppSettings"}

#### `@Storage` Annotation

The [`@State`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/components/State.java) annotation, located above the class declaration, [defines the data storage location](persisting_state_of_components.md#defining-the-storage-location).
For `AppSettings`, the data `name` parameter is the FQN of the class.
Using FQN is the best practice to follow and is required if custom data gets stored in the standard project or workspace files.

The `storages` parameter uses the [`@Storage`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/components/Storage.java) annotation to define a custom filename for the `AppSettings` data.
In this case, the file is located in the `options` directory of the [configuration directory](https://www.jetbrains.com/help/idea/tuning-the-ide.html#config-directory) for the IDE.

#### Persistent State Class

The `AppSettings` implementation contains an inner state class with two public fields: a `String` and a `boolean`.
Conceptually, these fields hold the name of a user and whether that person is an IntelliJ IDEA user, respectively.
See [Implementing the State Class](persisting_state_of_components.md#implementing-the-state-class) for more information about how `PersistentStateComponent` serializes public fields.

#### `AppSettings` Methods

The fields are so limited and straightforward for this class that encapsulation is not used for simplicity.
All that is needed for functionality is to override the two methods called by the IntelliJ Platform when a new component state is loaded (`PersistentStateComponent.loadState()`), and when a state is saved (`PersistentStateComponent.getState()`).
See [`PersistentStateComponent`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/components/PersistentStateComponent.java) for more information about these methods.

One static convenience method has been added – `AppSettings.getInstance()` – which allows `AppSettingsConfigurable` to easily acquire a reference to `AppSetting`.

## The `AppSettingsComponent` Class

The role of the [`AppSettingsComponent`](%gh-sdk-samples-master%/settings/src/main/java/org/intellij/sdk/settings/AppSettingsComponent.java) is to provide a `JPanel` for the custom Settings to the IDE Settings Dialog.
The `AppSettingsComponent` has-a `JPanel`, and is responsible for its lifetime.
The `AppSettingsComponent` is instantiated by `AppSettingsConfigurable`.

### Creating the `AppSettingsComponent` Implementation

The `AppSettingsComponent` defines a `JPanel` containing a [`JBTextField`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/JBTextField.java) and a [`JBCheckBox`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/JBCheckBox.java) to hold and display the data that maps to the [data fields of `AppSettings.State`](#persistent-state-class):

```java
```
{src="settings/src/main/java/org/intellij/sdk/settings/AppSettingsComponent.java" include-symbol="AppSettingsComponent"}

#### `AppSettingsComponent` Methods

The constructor builds the `JPanel` using the convenient [`FormBuilder`](%gh-ic%/platform/platform-api/src/com/intellij/util/ui/FormBuilder.java) and saves a reference to the `JPanel`.
The rest of the class are simple accessors and mutators to encapsulate the UI components used on the `JPanel`.

## The `AppSettingsConfigurable` Class

The methods of [`AppSettingsConfigurable`](%gh-sdk-samples-master%/settings/src/main/java/org/intellij/sdk/settings/AppSettingsConfigurable.java) are called by the IntelliJ Platform, and `AppSettingsConfigurable` in turn interacts with `AppSettingsComponent` and `AppSettings`.

### Declaring the `AppSettingsConfigurable`

As described in [Declaring Application Settings](settings_guide.md#declaring-application-settings), the `com.intellij.applicationConfigurable` is used as the EP.
An explanation of this declaration can be found in [Declaring Application Settings](settings_guide.md#declaring-application-settings):

```xml
<extensions defaultExtensionNs="com.intellij">
  <applicationConfigurable
      parentId="tools"
      instance="org.intellij.sdk.settings.AppSettingsConfigurable"
      id="org.intellij.sdk.settings.AppSettingsConfigurable"
      displayName="SDK: Application Settings Example"/>
</extensions>
```

### Creating the `AppSettingsConfigurable` Implementation

The `AppSettingsConfigurable` class implements [`Configurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/Configurable.java).
The class has one field to hold a reference to the `AppSettingsComponent`.

```java
```
{src="settings/src/main/java/org/intellij/sdk/settings/AppSettingsConfigurable.java" include-symbol="AppSettingsConfigurable"}

#### `AppSettingsConfigurable` Methods

All the methods in this class are overrides of the methods in the `Configurable` interface.
Readers are encouraged to review the Javadoc comments for the `Configurable` methods.
Also, review notes about [IntelliJ Platform Interactions](settings_guide.md#intellij-platform-interactions-with-configurable) with `Configurable` methods.

## Testing the Custom Settings Plugin

After performing the steps described above, compile and run the plugin in a Development Instance to see the custom Settings available in the Settings Dialog.
Open the IDE Settings by selecting <ui-path>Settings | Tools | SDK: Application Settings Example</ui-path>.
The settings are preloaded with the default values:

!["Settings Defaults"](settings_defaults.png){width="700"}

Now edit the settings values to "John Doe" and click the checkbox.
Click the <control>OK</control> button to close the Settings dialog and save the changes.
Exit the Development Instance.

Open the file <path>code_samples/settings/build/idea-sandbox/config/options/SdkSettingsPlugin.xml</path> to see the Settings persistently stored.

> In this demonstration the file resides in <path>code_samples/settings/build/idea-sandbox/config/options/</path>.
> See [IDE Development Instances](ide_development_instance.md) for the general Development Instance case or [Default IDE directories](https://www.jetbrains.com/help/idea/tuning-the-ide.html#default-dirs) if the **settings** plugin is installed directly in the IDE.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Snippets
{is-library="true"}

<snippet id="missingContent">

> If a topic you are interested in is not covered in the above sections, let us know via the **Was this page helpful?** feedback form below or [other channels](getting_help.topic#problems-with-the-guide).
>
> Please be specific about the topics and reasons for adding them, and leave your email in case we need more details. Thanks for your feedback!
>
{title="Something missing?" style="note"}

</snippet>

<snippet id="subscribeNews">

> [Subscribe to Marketplace Developer News](https://jb.gg/mp-updates) to receive news and announcements.
> Also follow [JBPlatform](https://x.com/JBPlatform/) on X (formerly Twitter) and visit
> [JetBrains Platform Blog](https://blog.jetbrains.com/platform/) and
> [JetBrains Marketplace on LinkedIn](https://www.linkedin.com/showcase/jetbrains-marketplace/).
>
{title="Staying up to date"}

</snippet>

<snippet id="pluginDevKitAvailability">

_Plugin DevKit_ plugin is bundled with IntelliJ IDEA until 2023.2.

> When using IntelliJ IDEA 2023.3 or later, the _Plugin DevKit_ plugin must be installed from JetBrains Marketplace ([Plugin Homepage](https://plugins.jetbrains.com/plugin/22851-plugin-devkit))
> as it is no longer bundled with the IDE.
>
{title="Plugin DevKit Availability" style="warning"}

</snippet>

<snippet id="jetbrainsIDE_TLDR">

<tldr>

**IDE**: [Homepage](https://www.jetbrains.com/%productID%), [Versions](https://www.jetbrains.com/%productID%/download/other.html)

**Plugins**: [JetBrains Marketplace](https://plugins.jetbrains.com/%marketplaceProductID%)

</tldr>

</snippet>

<snippet id="apiChangesHeader">

Please see [](verifying_plugin_compatibility.md) on how to use Plugin Verifier and IDE inspections to check such problems.

_Early Access Program_ (EAP) releases of upcoming versions are available [here](https://eap.jetbrains.com).

> Changes from API marked with `@Deprecated(forRemoval=true)` or any of [`ApiStatus`](%gh-java-annotations%/common/src/main/java/org/jetbrains/annotations/ApiStatus.java) `@Experimental`, `@ScheduledForRemoval`, or `@Internal` are not listed here, as incompatible changes are to be expected.
>
> For API annotated with `@ApiStatus.Internal`/`@IntellijInternalApi`, see [](api_internal.md) for more details and replacements.
>
{title="Non-listed changes" style="note"}

</snippet>

<snippet id="apiChangesJavaVersion">


>
> Java version must be set depending on the target platform version.
>
> **2024.2+**: Java 21
>
> **2022.3+**: Java 17 ([blog post](https://blog.jetbrains.com/platform/2022/08/intellij-project-migrates-to-java-17/))
>
> **2020.3+**: Java 11 ([blog post](https://blog.jetbrains.com/platform/2020/09/intellij-project-migrates-to-java-11/))
>
{title="IDE and Java Versions" style="note"}

</snippet>

<snippet id="gradlePluginVersion">

> The Gradle plugin must be chosen depending on the target [platform version](build_number_ranges.md#platformVersions).
>
> 2024.2+
> : **Requires** [](tools_intellij_platform_gradle_plugin.md)
>
> 2022.3+
> :
> **Recommended** [](tools_intellij_platform_gradle_plugin.md),<br/>
> **Requires** [](tools_gradle_intellij_plugin.md) version 1.10.1+ (current: %gradle-intellij-plugin-version%)
>
{style="warning" title="Gradle Plugin"}

</snippet>

<snippet id="ep_list_legend">

## Legend

> See also [](explore_api.md) for more information and strategies.

### Listeners

**Topic** searches for usages inside existing implementations of open-source IntelliJ Platform plugins via [IntelliJ Platform Explorer](https://jb.gg/ipe).

**Listener** links corresponding listener to implement.

See [](plugin_listeners.md) on how to register listeners.

### Extension Points

**Extension Point** searches for usages inside existing implementations of open-source IntelliJ Platform plugins via [IntelliJ Platform Explorer](https://jb.gg/ipe).

**Implementation** is the related Extension Point class.

See [](plugin_extensions.md) on how to declare extensions in your plugin.

### Tags

See [](verifying_plugin_compatibility.md) for overview of API status.

| Icon                                                            | Description                               | Details                                                                                                                                                                                                                                                                                                        |
|-----------------------------------------------------------------|-------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ![Deprecated][deprecated]                                       | Deprecated API                            | See code documentation for replacement.                                                                                                                                                                                                                                                                        |
| ![Removal][removal]                                             | Scheduled for Removal API                 | See code documentation for replacement.                                                                                                                                                                                                                                                                        |
| ![Obsolete][obsolete]                                           | Obsolete API                              | Do not use in new code.<p>See code documentation for replacement ([](verifying_plugin_compatibility.md#obsolete-api)).</p>                                                                                                                                                                                     |
| ![Experimental API][experimental]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Experimental API                          | Annotated with [`@ApiStatus.Experimental`](%gh-java-annotations%/common/src/main/java/org/jetbrains/annotations/ApiStatus.java).<p>API might be altered or removed without prior notice.</p>                                                                                                                   |
| ![Internal API][internal]                                       | Internal API                              | Annotated with [`@ApiStatus.Internal`](%gh-java-annotations%/common/src/main/java/org/jetbrains/annotations/ApiStatus.java).<p>Must not be used by third party plugins, see [](api_internal.md).</p>                                                                                                           |
| ![Project-Level][project-level]                                 | Project-Level<p>Extension Point/Topic</p> | <p>Can have [`Project`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/Project.java) as constructor parameter.</p><p>- Extension Point: Declared with `area="IDEA_PROJECT"`</p><p>- Listener: registered in [`<projectListeners>`](plugin_configuration_file.md#idea-plugin__projectListeners)</p> |
| ![Non-Dynamic][non-dynamic]                                     | Non-Dynamic<p>Extension Point</p>         | Installation/update of plugin requires IDE restart ([](dynamic_plugins.md)).                                                                                                                                                                                                                                   |
| ![DumbAware][dumb-aware]                                        | `DumbAware`<p>Extension Point</p>         | Implementations marked with [`DumbAware`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/DumbAware.java) will be processed during [dumb mode](indexing_and_psi_stubs.md#dumb-mode).                                                                                                                |

[deprecated]: https://img.shields.io/badge/-Deprecated-lightgrey?style=flat-square
[removal]: https://img.shields.io/badge/-Removal-red?style=flat-square
[obsolete]: https://img.shields.io/badge/-Obsolete-grey?style=flat-square
[experimental]: https://img.shields.io/badge/-Experimental-violet?style=flat-square
[internal]: https://img.shields.io/badge/-Internal-darkred?style=flat-square
[project-level]: https://img.shields.io/badge/-Project--Level-blue?style=flat-square
[non-dynamic]: https://img.shields.io/badge/-Non--Dynamic-orange?style=flat-square
[dumb-aware]: https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square

</snippet>

<snippet id="descriptorDocumentationProviderNote">

> Elements described on this page are available in [quick documentation](https://www.jetbrains.com/help/idea/viewing-reference-information.html#inline-quick-documentation) since IntelliJ IDEA 2025.1.
>
> The [Plugin DevKit](https://plugins.jetbrains.com/plugin/22851-plugin-devkit) plugin must be installed and enabled.
>
{style="note"}

</snippet>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Spell Checking

<link-summary>Providing spellchecking for custom language.</link-summary>

<tldr>

**Product Help:** [Spell Checking](https://www.jetbrains.com/help/idea/spellchecking.html)

</tldr>

Spell Checking is used to check the correctness of natural languages within code.
Language plugins can implement customized spell checking by implementing
[`SpellcheckingStrategy`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/tokenizer/SpellcheckingStrategy.java)
and registering it in the `com.intellij.spellchecker.support` extension point.

**Examples:**

- [Custom Language Support Tutorial: Spell Checking](spell_checking_strategy.md)
- [`JavaSpellcheckingStrategy`](%gh-ic%/java/java-impl/src/com/intellij/spellchecker/JavaSpellcheckingStrategy.java)
- [`HtmlSpellcheckingStrategy`](%gh-ic%/xml/impl/src/com/intellij/spellchecker/xml/HtmlSpellcheckingStrategy.java)

## `SpellcheckingStrategy`

`SpellcheckingStrategy` adjusts the spell checking behavior for PSI elements of a custom language
by providing methods to define:

1. Which PSI elements should be checked by this strategy.
2. How to extract the text from PSI elements.
3. How the text is broken into single words.

The class already contains a default strategy for spell checking of basic parts such as comments,
identifiers and plain text.
If you don't need anything else, you can just inherit from this class and register it.

If you need to check spelling for some specific elements in your language, then override `getTokenizer()`
and use `isMyContext()` to determine if a PSI element should be checked by your strategy.
The `getTokenizer()` method returns an instance of
[Tokenizer](%gh-ic%/spellchecker/src/com/intellij/spellchecker/tokenizer/Tokenizer.java)
and is explained below.

### `Tokenizer`

The `tokenize()` method of `Tokenizer` defines which portions of a PSI element
need to be spell-checked by feeding them into the
[`TokenConsumer`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/tokenizer/TokenConsumer.java).
In the simplest case, the whole PSI element is consumed and its entire text is split into words and
checked for spelling.
For these simple cases, `SpellcheckingStrategy` already contains predefined tokenizers:

- `SpellcheckingStrategy.TEXT_TOKENIZER` for simple text elements.
- `SpellcheckingStrategy.EMPTY_TOKENIZER` for elements that don't require checking.
- `myCommentTokenizer` for comments.
- `myXmlAttributeTokenizer` for XML attributes.

However, there are situations where only fragments of the PSI element are textual content.
In these cases, `tokenize()` can take care of extracting the correct text-ranges and feed them
sequentially into the `TokenConsumer`.
If elements in your language require such special handling, then define a tokenizer by deriving from `Tokenizer`
and implement `tokenize()` with the logic you need.

**Example:**
[`MethodNameTokenizerJava`](%gh-ic%/java/java-impl/src/com/intellij/spellchecker/MethodNameTokenizerJava.java)

#### `Splitter`

In `Tokenizer.tokenize()` the `consumeToken()` method can take an instance of
[`Splitter`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/inspections/Splitter.java) as the second argument.
The `Splitter` defines how the text is broken into words which is not always as simple as splitting
at white space.
Consider, for instance, identifiers or variables that follow camel-case or snake-case naming and that
need to be separated differently to spell check single parts.
As an example, please see how
[`IdentifierSplitter`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/inspections/IdentifierSplitter.java),
splits identifiers into separate words.

A custom language can define special splitting rules for elements by deriving from `Splitter` and
implementing the logic for obtaining words from the passed text in the `split()` method.

## Suppressing Spellchecking

Custom languages that support the suppression of inspection annotations can derive from
[`SuppressibleSpellcheckingStrategy`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/tokenizer/SuppressibleSpellcheckingStrategy.java)
to make spell checking suppressible.
The implementation overrides `isSuppressedFor()` to check if a spell check warning is suppressed for the passed element and
overriding `getSuppressActions()` to add quick fix actions that suppress warnings.

**Example:**
[`XmlSpellcheckingStrategy`](%gh-ic%/xml/impl/src/com/intellij/spellchecker/xml/XmlSpellcheckingStrategy.java)

## Providing Dictionaries

### `BundledDictionaryProvider`

Some custom languages may have a distinct fixed set of words or key identifiers.
These words can be provided in additional dictionaries from
[BundledDictionaryProvider](%gh-ic%/spellchecker/src/com/intellij/spellchecker/BundledDictionaryProvider.java).
Implement `getBundledDictionaries()` to return paths to the word dictionaries (<path>*.dic</path> files) and
register it with the `com.intellij.spellchecker.bundledDictionaryProvider` extension point.

**Example:**
[`PythonBundledDictionaryProvider`](%gh-ic%/python/src/com/jetbrains/python/spellchecker/PythonBundledDictionaryProvider.java)

### `RuntimeDictionaryProvider`

[`RuntimeDictionaryProvider`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/dictionary/RuntimeDictionaryProvider.java)
allows providing (dynamic) dictionaries generated at runtime, e.g., downloaded from a server, created from project sources on-the-fly, etc.
Register in `com.intellij.spellchecker.dictionary.runtimeDictionaryProvider` extension point.

**Example:**
[`PyPackagesDictionary`](%gh-ic%/python/src/com/jetbrains/python/packaging/PyPackagesDictionary.kt)

## Grammar Checks (Grazie plugin)
{id="grammar-checks"}

[Grazie Lite](https://plugins.jetbrains.com/plugin/12175-grazie-lite) (bundled) and
[Grazie Pro](https://plugins.jetbrains.com/plugin/16136-grazie-pro/)
plugins provide intelligent spelling and grammar checks for all texts.

To use the API mentioned below, add a [dependency](plugin_dependencies.md) on plugin ID `tanvd.grazi`.

### `TextExtractor`

To define how to extract natural language text from PSI, implement
[`TextExtractor`](%gh-ic%/plugins/grazie/src/main/kotlin/com/intellij/grazie/text/TextExtractor.java)
and register in `com.intellij.grazie.textExtractor` extension point.

**Example:** [`JavaTextExtractor`](%gh-ic%/plugins/grazie/java/src/main/kotlin/com/intellij/grazie/ide/language/java/JavaTextExtractor.java)

### `ProblemFilter`

To ignore specific reported problems, implement [`ProblemFilter`](%gh-ic%/plugins/grazie/src/main/kotlin/com/intellij/grazie/text/ProblemFilter.java)
registered in `com.intellij.grazie.problemFilter` extension point.

**Example:** [`JavadocProblemFilter`](%gh-ic%/plugins/grazie/java/src/main/kotlin/com/intellij/grazie/ide/language/java/JavadocProblemFilter.java)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 21. Spell Checking

<link-summary>Sample implementation of spellchecking strategy allowing to analyze spell correctness in Simple language elements.</link-summary>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

<tldr>

**Reference**: [](spell_checking.md)

**Code**: [`SimpleSpellcheckingStrategy`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleSpellcheckingStrategy.java)

</tldr>

Spell checking allows users to see spelling errors while editing code.

## Define a SimpleSpellcheckingStrategy

The [`SimpleSpellcheckingStrategy`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleSpellcheckingStrategy.java) extends
[`SpellcheckingStrategy`](%gh-ic%/spellchecker/src/com/intellij/spellchecker/tokenizer/SpellcheckingStrategy.java)

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleSpellcheckingStrategy.java" include-symbol="SimpleSpellcheckingStrategy"}

## Register the SimpleSpellcheckingStrategy

The implementation is registered with the IntelliJ Platform in the plugin
configuration file using the `com.intellij.spellchecker.support` extension point.

```xml
<extensions defaultExtensionNs="com.intellij">
  <spellchecker.support language="Simple" implementationClass="org.intellij.sdk.language.SimpleSpellcheckingStrategy"/>
</extensions>
```

## Run the Project

Run the project by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

Open the <path>test.simple</path> file and make an intentional spelling mistake.
The IDE will highlight the error and suggest a quick fix.

![Spellchecking](spell_checking.png)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Split Button

<link-summary>UI guidelines on using split buttons.</link-summary>

<tldr>

**Implementation:** [`JBOptionButton`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/JBOptionButton.kt)

</tldr>

A split button is a combination of a regular [button](button.topic) and a drop-down button.

![](split_button.png){width=706}

## Anatomy
A split button consists of the main action on the left and a drop-down button that shows a dropdown
with less common actions on the right:

![Split button action anatomy](split_button_anatomy.png){width=706}

## When to use

### More than two related actions
When there are more than two actions related to the main action, and there is not enough space for separate buttons, put these actions into
the dropdown menu:

![Related actions in a split button](split_button_related_actions.png){width=706}
### The second action is dangerous and uncommon
Dangerous actions can destroy users’ data and cannot be easily undone.
To avoid accidental clicks on a dangerous action, you can hide it in the dropdown menu if this action is uncommon, for example <control>Force Push</control>:

![Dangerous action in a split button](split_button_dangerous_action.png){width=706}

An uncommon dangerous action can be the only action in the menu.
<note>Uncommon actions are the actions called in rare cases for specific purposes. For example, the <control>Force Push</control> action, unlike the <control>Commit and Push...</control> action, is available under certain circumstances
and covers rare user scenarios. Thus, it can be considered as uncommon and hidden in the dropdown menu.</note>

## When not to use

### Unrelated actions

If unrelated actions are hidden under the dropdown menu, they are hard to find:

<format color="E55765" style="bold">Incorrect</format>

<img src="split_button_unrelated_actions.png" alt="Unrelated actions" width="706"/>

<format color="369650" style="bold">Correct</format>

<img src="split_button_unrelated_actions_correct.png" alt="Unrelated actions in separate buttons" width="706"/>


### Only one related action

Putting the single action in the dropdown menu doesn't save a lot of space:

<format color="E55765" style="bold">Incorrect</format>

<img src="split_button_one_action.png" alt="One related action" width="706"/>

<format color="369650" style="bold">Correct</format>

<img src="split_button_one_two_buttons.png" alt="Unrelated actions in separate buttons" width="706"/>

<note><control>Exception</control>: If the action is <a anchor="the-second-action-is-dangerous-and-uncommon">dangerous and uncommon</a>, you can put it in the menu.</note>

## How to use

### Main action
Refer to the [regular button rules](button.topic#how-to-use).

### Dropdown button
#### Click

<list>
<li>Show the dropdown menu with secondary actions.</li>
<li>Hide the menu when clicking outside the menu or on the second dropdown button click.</li>
</list>

#### Hover
Show a tooltip:

<img src="split_button_tooltip_on_hover.png" width="706" alt="Tooltip on hover"/>

### Dropdown menu

Place related actions into the dropdown menu. Do not duplicate the main action in the dropdown menu, otherwise it is confusing how to trigger the main action — with the button or from the menu.

<format color="E55765" style="bold">Incorrect</format>

![Duplicated actions in dropdown menu](split_button_duplicated_action.png){width=706}

<format color="369650" style="bold">Correct</format>

![Unique actions in dropdown menu](split_button_related_actions.png){width=706}

If there is a dangerous action among other actions in the dropdown, add the line separators above and below it to lessen the chance of calling this action by mistake:

![Dangerous action in the dropdown menu](split_button_dangerous_action_separator.png){width=706}

[//]: # (### Reduce split button to simple action buttons)

[//]: # ()

[//]: # (The Split button can be reduced to simple action buttons which are laid out automatically next to each other. This is controlled by the following option in settings:)

[//]: # (<ui-path>Settings | Appearance & Behavior | Appearance | Merge buttons in dialogs</ui-path>)

[//]: # ()

[//]: # (<p>For example, the <control>Commit</control> button reduced to its components &#40;the option is disabled&#41; looks like the following:</p>)

[//]: # ()

[//]: # (![]&#40;reduced.png&#41;{width=500})

## Keyboard navigation & shortcuts

* Trigger the main action when the [default](button.topic#default) button shortcut is pressed if the split button is the default one.

* Open the dropdown menu with the first menu item selected on <shortcut>Alt+Shift+Enter</shortcut>.

* Do not show the dropdown menu when the button gains focus.

### Focus on the button

<table style="none">

[//]: # (  <tr>)

[//]: # (    <td width="15%">)

[//]: # (        <p><shortcut>Enter</shortcut></p>)

[//]: # (        <p><shortcut>Ctrl+Enter</shortcut></p>)

[//]: # (    </td>)

[//]: # (    <td width="85%">Invoke the default button action.</td>)

[//]: # (  </tr>)
  <tr>
    <td><shortcut>Space</shortcut></td>
    <td>Invoke the main action.</td>
  </tr>
  <tr>
    <td><shortcut>Arrow Down</shortcut></td>
    <td>Show the dropdown menu with secondary actions and move focus to the first item in the menu.</td>
  </tr>
  <tr>
    <td>
        <p><shortcut>Tab</shortcut></p>
        <p><shortcut>Shift + Tab</shortcut></p>
    </td>
    <td>Move focus to the control next to the split button and hide the dropdown menu.</td>
  </tr>
</table>

### Focus on the dropdown menu

<table style="none">
  <tr>
    <td width="15%">
        <p><shortcut>Enter</shortcut></p>
        <p><shortcut>Space</shortcut></p>
    </td>
    <td width="85%">Invoke the selected action.</td>
  </tr>
  <tr>
    <td>
        <p><shortcut>Arrow Down</shortcut></p>
        <p><shortcut>Arrow Up</shortcut></p>
    </td>
    <td>
        <ul>
            <li>Navigate through the elements.</li>
            <li>Pressing <shortcut>Arrow Down</shortcut> on the top element moves the focus to the bottom element.</li>
            <li>Pressing <shortcut>Arrow Up</shortcut> on the bottom element moves the focus to the top element.</li>
        </ul>
    </td>
  </tr>
  <tr>
    <td><shortcut>Esc</shortcut></td>
    <td>Close the dropdown menu and move the focus to the split button.</td>
  </tr>
</table>

[//]: # (## Sizes and placement)

[//]: # ()
[//]: # (Follow the rules for the [simple button]&#40;button.topic&#41;.)

[//]: # ()
[//]: # (### Button)

[//]: # ()
[//]: # (The width of the split button equals to the width of the main button &#40;follow the rules of the [simple button]&#40;button.topic&#41;&#41; plus the width of the dropdown button.)

[//]: # ()
[//]: # (| Windows                              | Mac                            | Darcula                            |)

[//]: # (|--------------------------------------|--------------------------------|------------------------------------|)

[//]: # (| ![]&#40;win-button-size.png&#41;{width="92"} | ![]&#40;mac-sizes.png&#41;{width="90"} | ![]&#40;darcula-sizes.png&#41;{width="94"} |)

[//]: # ()
[//]: # (A different width for the split button makes it easier to understand that this button is different from other buttons in the dialog.)

[//]: # ()
[//]: # (### Menu)

[//]: # ()
[//]: # (Follow the rules for menus with regard to sizes, colors, fonts and spacing.)

[//]: # ()
[//]: # (Menu item height and spacing between the menu and the button:)

[//]: # ()
[//]: # (![]&#40;button-and-dropdown-sizes.png&#41;{width=232})

[//]: # ()
[//]: # (## Style)

[//]: # ()
[//]: # (Increase line height in the dropdown menuto lessen the chance of choosing the wrong menu item by mistake.)

[//]: # ()
[//]: # (Leave 2px around the separator inactive to lessen the chance of choosing the wrong menu item by mistake:)

[//]: # ()
[//]: # (![]&#40;selected.png&#41;{width=218})

[//]: # ()
[//]: # (Align the dropdown with the button left border:)

[//]: # ()
[//]: # (![]&#40;split_button_alignment.png&#41;{width=219})

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Split Icon Button

<link-summary>UI guidelines on using split icon buttons.</link-summary>

<tldr>

**Implementation:** [`SplitButtonAction`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/actionSystem/SplitButtonAction.java)

</tldr>

A split icon button appears on a horizontal toolbar and consists of two parts: the main icon and a triangle icon for the action list.

![](split_icon_button_example.png){width=278}

## When to use

The split icon button helps reduce the number of icons on the toolbar and minimize visual noise.

Use the split icon button for a group of similar actions if there are already many icons on the toolbar and:

* The user invokes one action more often than others,

* Or if the user invokes one action several times, then switches to another action and invokes it several times but does not switch between actions too often.

![](group_actions.png){width=325}

*Profiler actions are grouped into a split button*

If the user invokes actions with the same frequency or often switches from one action to another, use separate icons for each action.

To decide whether to add the whole group of actions on the toolbar, follow the rules for the [toolbar](toolbar.md#what-items-to-add-on-toolbar).

Use the split icon button on horizontal toolbars only, as it’s too wide for vertical toolbars.

## How to use

Make sure that all actions in the popup menu have icons. When an action is launched, its icon will be used as the main icon.

![](behavior.png){width=325}

*The user clicks Profile Allocations, the action starts, and its icon is shown as the main icon.*

## Built-in behavior

On hover, the main icon and the triangle icon are highlighted separately, and the line between two parts is added.
The tooltip for the main icon action is shown on hovering over it.

![](split_icon_button_hover.png){width=192}

The main icon invokes its action on click. The triangle icon opens the action menu on click:

![](click.png){width=325}

If some actions are unavailable, the corresponding menu items are disabled. The action menu should always open, even if all the items in it are disabled.

![](split_icon_button_disabled.png){width=325}

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Spring API
<primary-label ref="IntelliJIDEA_Ultimate"/>

<link-summary rel="excerpt"/>
<p id="excerpt">
Spring API allows 3rd party plugins to re-use, integrate with, or extend existing Spring Framework support in IntelliJ IDEA Ultimate.
</p>

Please see [Spring Framework Support](https://www.jetbrains.com/lp/intellij-frameworks/) for general feature overview.

A popular plugin using Spring API is [hybris integration](https://plugins.jetbrains.com/plugin/7525-hybris-integration).

To develop plugins, you will need to use _IntelliJ IDEA Ultimate Edition_ version 13.1 or higher.

## Setting up Project

Setup [Gradle](creating_plugin_project.md) to target IntelliJ IDEA Ultimate, then [add dependency](plugin_dependencies.md) to bundled Spring plugin with ID `com.intellij.spring`.

Please use only Spring-related functionality exposed in <path>spring-api.jar</path> (sources are provided in <path>\$IDEA_HOME\$/lib/src/src_spring-boot-openapi.zip</path>) in your plugin.
Using any other "internal" (implementation) classes from Spring plugin itself (<path>spring.jar</path>) is _not_ supported.

### plugin.xml
Add `<depends>com.intellij.spring</depends>` to your <path>[plugin.xml](plugin_configuration_file.md)</path> to require "Spring Support" plugin to be activated.
All available extension points are provided under `com.intellij.spring` prefix.
Note that the "Spring Support" plugin itself has dependencies on a few other plugins which need to be enabled in your sandbox (see notifications on startup).

## Main Concepts
A Spring facet can be attached to a Module.
Nearly all Spring functionality requires an existing and correctly setup Spring facet.

Spring facets usually contain one more user-configured or automatically provided filesets, which group a set of Spring related configuration files (XML, Code, .properties, or other configuration files).

A fileset usually corresponds to an actual application context configuration at runtime.
Hierarchies can be modeled by depending on another fileset (possibly from another module).

As an API-user, you will usually prefer working with `SpringModel`, which is built on top of fileset(s).

## API Updates
> 2017.3: `LocalXmlModel#setActiveProfiles` & `LocalAnnotationModel#setActiveProfiles` have been deprecated and will be removed in 2018.1.
>
{style="note"}

> Starting with 2016.2, the internal representation of bean _type_ has been changed from `PsiClass` to `PsiType`, please note deprecations.
>
{style="note"}

> Some core classes have been changed in 14(.1); please see "_Version 14(.1)_" notes for info on how to replace existing API-calls.
>
{style="note"}

## How Do I...

> See [](spring_extension_point_list.md) for the complete list.
>
{style="note"}

### Spring Setup
To check availability of Spring/Spring Facet etc. see `com.intellij.spring.model.utils.SpringCommonUtils`.

_2016.2_ See `com.intellij.spring.SpringLibraryUtil` to obtain information about the exact version of Spring in use.

### Spring Model

#### Obtain Spring Model by a File, PSI Element, ...
See `SpringManager#getSpringModel(s)...` and `com.intellij.spring.model.utils.SpringModelUtils`.

#### Contribute Implicit Model
See `com.intellij.spring.SpringModelProvider` to provide implicit filesets (e.g. provided by another framework in a specific configuration file).

_Version 15_
See `com.intellij.spring.facet.SpringAutodetectedFileSet` for a convenient base class.
Please note that autodetected filesets cannot be edited/modified by users in Spring facet.

#### Customize Implicit Models Configuration
_2017.1_ See `com.intellij.spring.facet.SpringFileSetEditorCustomization` to customize presentation and/or add extra settings/actions for specific autodetected filesets.

#### Contribute Implicit Beans
See `com.intellij.spring.model.jam.CustomComponentsDiscoverer` or `com.intellij.spring.model.SpringImplicitBeansProviderBase` to provide implicit (framework-specific) beans (e.g. "servletContext" by Spring MVC).

_Version 15_
`CustomComponentsDiscoverer` has been split into `com.intellij.spring.model.custom.CustomLocalComponentsDiscoverer` and `com.intellij.spring.model.custom.CustomModuleComponentsDiscoverer` respectively.

#### Contribute Custom Bean Scope
_Version 14_
See `com.intellij.spring.model.scope.SpringCustomBeanScope` to provide custom (e.g. framework specific) bean scopes.

#### Obtain/Create Spring Profiles
_Version 14.1_
`com.intellij.spring.profiles.SpringProfilesFactory`

### Beans

#### Search for Bean by Name
`com.intellij.spring.CommonSpringModel#findBeanByName`

_Version 14_: `com.intellij.spring.model.utils.SpringModelSearchers#findBean`

#### Search for Beans by Type
Choose one of `com.intellij.spring.CommonSpringModel#findBeansByPsiClassXXX` variants (please note deprecated methods).

_Version 14_: `com.intellij.spring.model.utils.SpringModelSearchers#findBeans`

_Version 16_: note deprecation of `SpringModelSearchParameters.BeanClass#withInheritors(GlobalSearchScope)`

#### Check If a Bean with Given Name/Type Exists
_Version 14_: `com.intellij.spring.model.utils.SpringModelSearchers#doesBeanExist` (please note deprecated methods)

#### Mark Bean as Infrastructure Bean
_Version 14_: implement `SpringInfrastructureBean`, such beans obtain a special icon and can be filtered in various places in UI.

### XML Configuration
All support for XML-based Spring configuration files is provided via [DOM-API](xml_dom_api.md).

#### Add Support for Additional Spring Namespace
See `com.intellij.spring.customNamespaces` EP, registered namespace-key must match the one registered with your DOM elements via `@Namespace`.
Register available elements via standard `DomExtender<Beans>` EP or `com.intellij.spring.dom.SpringCustomNamespaces#registerExtensions` (Version 14).

Please pay attention to `getModelVersion` and `getStubVersion` (see Javadoc).

#### Add Reference to Spring Bean in DOM Element
Use the following template:

```java
@Convert(SpringBeanResolveConverter.class)
@RequiredBeanType("fqn.to.required.class") // optional
GenericAttributeValue<SpringBeanPointer> getMyAttributeName();
```

### Code Configuration

#### Add Reference to Spring Bean in JAM Element
_Version 14_

```java
JamStringAttributeMeta.Single<SpringBeanPointer> ATTRIBUTE_META =
    JamAttributeMeta.singleString("attributeName",
        new SpringBeanReferenceJamConverter("fqn.to.required.class"));
```

#### @AliasFor
_Version 16_
See `com.intellij.spring.model.aliasFor.SpringAliasForUtils` to obtain corresponding `@AliasFor` JAM.

### spring.factories
_Version 15_
See `com.intellij.spring.spi.SpringSpiManager`.

### IDE Features

#### Add Inspections to Spring Validator
Add additional inspections (e.g. for custom namespace) to Spring Validator (*Settings|Compiler|Validation*) via `com.intellij.spring.SpringInspectionsRegistry$Contributor` in `com.intellij.spring.inspectionsRegistryContributor` extension point.

#### Add Additional Files to Spring Validator
_Version 14.1_
Additional files to be processed by inspections registered with Spring Validator (e.g. specific <path>.properties</path> configuration files) can be registered via  `com.intellij.spring.SpringInspectionsRegistry$AdditionalFilesContributor`

#### Configure Spring Support for Other Frameworks
Use `com.intellij.spring.facet.SpringConfigurator` to provide "automatic" configuration when Spring facet is added via framework wizard.

#### UI/Presentation
Please do not reference bean icons from `SpringApiIcons` directly, but use `SpringPresentationProvider` to re-use unified icon/bean name.
See `SpringBeansPsiElementCellRenderer` for popup/list renderer.

## Spring Boot
_2018.1_

Spring Boot API allows extending/accessing Spring Boot specific support in the IDE.

> While we try to maintain compatibility, please be prepared for a less strict policy.
>
{style="warning"}

### Setting Up
[Add dependency](plugin_dependencies.md) to bundled Spring Boot plugin with ID `com.intellij.spring.boot`.
Sources for Spring Boot API are available in <path>\$IDEA_HOME\$/lib/src/src_spring-boot-openapi.zip</path>.

### Update plugin.xml
Add `<depends>com.intellij.spring.boot</depends>` to your <path>[plugin.xml](plugin_configuration_file.md)</path> to require "Spring Boot" plugin to be activated.
All available extension points are provided under `com.intellij.spring.boot` prefix.

### Spring Boot Library
Use `com.intellij.spring.boot.library.SpringBootLibraryUtil` to query version and availability of common additional libraries.

### Custom Configuration Files Format
`com.intellij.spring.boot.model.SpringBootModelConfigFileContributor` allows adding support for custom config file formats.

### Auto-Configuration Support
Existing `Condition` implementations can be simulated at design time in IDE via `com.intellij.spring.boot.model.autoconfigure.conditions.ConditionalContributor`.

Custom `@ConditionalOn...` annotations implementing `com.intellij.spring.boot.model.autoconfigure.conditions.jam.ConditionalOnJamElement` will be added into evaluation automatically.

### Spring Initializr
`com.intellij.spring.boot.initializr.SpringInitializrModuleBuilderPostTask` allows performing custom setup steps after creation of module (e.g. setup integration with build system).

### Endpoint Tab
Use `com.intellij.spring.boot.run.endpoint` extension point to add custom actuator endpoint tabs.
Any settings should be exposed in "Spring Boot" settings tab via `com.intellij.spring.boot.run.endpointTabConfigurable` EP.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<!-- EP List Directory: /plugins/spring/ -->

# Spring API Extension Point and Listener List
<primary-label ref="IntelliJIDEA_Ultimate"/>

<link-summary>Overview of Extension Points and Listeners for Spring API.</link-summary>

<tldr>

**Product-Specific Plugin Development**: [IntelliJ IDEA Ultimate](idea_ultimate.md)

</tldr>

> Spring API Extension Points and Listeners are available in the Spring-related plugins,
> which are available in IntelliJ IDEA Ultimate only.
>
{style="note"}

55 Extension Points and 5 Listeners for Spring API

<include from="snippets.md" element-id="ep_list_legend"/>

## Spring

### Spring – Listeners

| Topic | Listener |
|-------|----------|
| [SpringBootEndpointsTabSettings#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.spring.boot.run.lifecycle.tabs.SpringBootEndpointsTabSettings.Listener)  | `Listener` |
| [SpringRepositoriesViewSettings#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.spring.data.commons.view.SpringRepositoriesViewSettings.Listener)  | `Listener` |
| [SpringFileSetService#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.spring.facet.SpringFileSetService.SpringFileSetListener)  | `SpringFileSetListener` |
| [SpringMvcViewSettings#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.spring.mvc.toolwindow.SpringMvcViewSettings.Listener)  | `Listener` |
| [SpringBeansViewSettings#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.spring.toolWindow.SpringBeansViewSettings.Listener)  | `Listener` |


### com.intellij.spring

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.spring.autodetected.filesets](https://jb.gg/ipe?extensions=com.intellij.spring.autodetected.filesets) | `SpringAutodetectedFilesetsSearcher` |
| [com.intellij.spring.autodetected.models](https://jb.gg/ipe?extensions=com.intellij.spring.autodetected.models) | `SpringAutodetectedModelsSearcher` |
| [com.intellij.spring.beanClassLineMarker](https://jb.gg/ipe?extensions=com.intellij.spring.beanClassLineMarker) | `BeanClassLineMarker` |
| [com.intellij.spring.beans.stereotype](https://jb.gg/ipe?extensions=com.intellij.spring.beans.stereotype) | `SpringBeanStereotype` |
| [com.intellij.spring.componentScanExtender](https://jb.gg/ipe?extensions=com.intellij.spring.componentScanExtender) | `ComponentScanExtender` |
| [com.intellij.spring.conditionalEvaluatorProvider](https://jb.gg/ipe?extensions=com.intellij.spring.conditionalEvaluatorProvider) | `ConditionalEvaluatorProvider` |
| [com.intellij.spring.configSearcherScopeModifier](https://jb.gg/ipe?extensions=com.intellij.spring.configSearcherScopeModifier) | `ConfigSearcherScopeModifier` |
| [com.intellij.spring.configurator](https://jb.gg/ipe?extensions=com.intellij.spring.configurator) | `SpringConfigurator` |
| [com.intellij.spring.customBeanScope](https://jb.gg/ipe?extensions=com.intellij.spring.customBeanScope) | `SpringCustomBeanScope` |
| [com.intellij.spring.customConverterProvider](https://jb.gg/ipe?extensions=com.intellij.spring.customConverterProvider) | `Provider` |
| [com.intellij.spring.customLocalComponentsDiscoverer](https://jb.gg/ipe?extensions=com.intellij.spring.customLocalComponentsDiscoverer) | `CustomLocalComponentsDiscoverer` |
| [com.intellij.spring.customModuleComponentsDiscoverer](https://jb.gg/ipe?extensions=com.intellij.spring.customModuleComponentsDiscoverer) | `CustomModuleComponentsDiscoverer` |
| [com.intellij.spring.customNamespaces](https://jb.gg/ipe?extensions=com.intellij.spring.customNamespaces) | `SpringCustomNamespaces` |
| [com.intellij.spring.effective.types.provider](https://jb.gg/ipe?extensions=com.intellij.spring.effective.types.provider) | `SpringBeanEffectiveTypeProvider` |
| [com.intellij.spring.factoryMethodTypeHandler](https://jb.gg/ipe?extensions=com.intellij.spring.factoryMethodTypeHandler) | `CustomFactoryMethodTypeHandler` |
| [com.intellij.spring.fileSetEditorCustomization](https://jb.gg/ipe?extensions=com.intellij.spring.fileSetEditorCustomization) | `SpringFileSetEditorCustomization` |
| [com.intellij.spring.inspectionsRegistryAdditionalFilesContributor](https://jb.gg/ipe?extensions=com.intellij.spring.inspectionsRegistryAdditionalFilesContributor) | `AdditionalFilesContributor` |
| [com.intellij.spring.inspectionsRegistryContributor](https://jb.gg/ipe?extensions=com.intellij.spring.inspectionsRegistryContributor) | `Contributor` |
| [com.intellij.spring.jam.customMetaImplementation](https://jb.gg/ipe?extensions=com.intellij.spring.jam.customMetaImplementation) | `n/a` |
| [com.intellij.spring.localAnnotationModelDependentModelsProvider](https://jb.gg/ipe?extensions=com.intellij.spring.localAnnotationModelDependentModelsProvider) | `LocalAnnotationModelDependentModelsProvider` |
| [com.intellij.spring.localModelProducer](https://jb.gg/ipe?extensions=com.intellij.spring.localModelProducer) | `SpringLocalModelProducer` |
| [com.intellij.spring.placeholderReferenceResolver](https://jb.gg/ipe?extensions=com.intellij.spring.placeholderReferenceResolver) | `SpringPlaceholderReferenceResolver` |
| [com.intellij.spring.resourceTypeProvider](https://jb.gg/ipe?extensions=com.intellij.spring.resourceTypeProvider) | `SpringResourceTypeProvider` |
| [com.intellij.spring.scriptBeanPsiClassDiscoverer](https://jb.gg/ipe?extensions=com.intellij.spring.scriptBeanPsiClassDiscoverer) | `ScriptBeanPsiClassDiscoverer` |
| [com.intellij.spring.settingsProvider](https://jb.gg/ipe?extensions=com.intellij.spring.settingsProvider) | `SpringSettingsProvider` |
| [com.intellij.spring.testingAnnotationsProvider](https://jb.gg/ipe?extensions=com.intellij.spring.testingAnnotationsProvider) | `SpringTestingAnnotationsProvider` |
| [com.intellij.spring.testingImplicitContextsProvider](https://jb.gg/ipe?extensions=com.intellij.spring.testingImplicitContextsProvider) | `SpringTestingImplicitContextsProvider` |
| [com.intellij.spring.valueConverter](https://jb.gg/ipe?extensions=com.intellij.spring.valueConverter) | `SpringValueConvertersProvider` |

### com.intellij.spring.boot

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.spring.boot.configFileDetector](https://jb.gg/ipe?extensions=com.intellij.spring.boot.configFileDetector) | `SpringBootConfigFileDetector` |
| [com.intellij.spring.boot.customHintReferenceProvider](https://jb.gg/ipe?extensions=com.intellij.spring.boot.customHintReferenceProvider) | `SpringBootCustomHintReferenceProvider` |
| [com.intellij.spring.boot.languageSpecificBridge](https://jb.gg/ipe?extensions=com.intellij.spring.boot.languageSpecificBridge) | `SpringBootLanguageSpecificBridge` |
| [com.intellij.spring.boot.modelConditionalContributor](https://jb.gg/ipe?extensions=com.intellij.spring.boot.modelConditionalContributor) | `ConditionalContributor` |
| [com.intellij.spring.boot.modelConfigFileContributor](https://jb.gg/ipe?extensions=com.intellij.spring.boot.modelConfigFileContributor) | `SpringBootModelConfigFileContributor` |
| [com.intellij.spring.boot.modelConfigFileNameContributor](https://jb.gg/ipe?extensions=com.intellij.spring.boot.modelConfigFileNameContributor) | `SpringBootModelConfigFileNameContributor` |
| [com.intellij.spring.boot.modelExtender](https://jb.gg/ipe?extensions=com.intellij.spring.boot.modelExtender) | `SpringBootModelExtender` |
| [com.intellij.spring.boot.replacementTokenResolver](https://jb.gg/ipe?extensions=com.intellij.spring.boot.replacementTokenResolver) | `SpringBootReplacementTokenResolver` |

### com.intellij.spring.debugger

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.spring.debugger.runConfigurationExtender](https://jb.gg/ipe?extensions=com.intellij.spring.debugger.runConfigurationExtender) | `SpringDebuggerRunConfigurationExtender` |
| [com.intellij.spring.debugger.sessionListener](https://jb.gg/ipe?extensions=com.intellij.spring.debugger.sessionListener) | `SpringDebuggerSessionListener` |

### com.intellij.spring.graphql

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.spring.graphql.appPathProvider](https://jb.gg/ipe?extensions=com.intellij.spring.graphql.appPathProvider) | `GraphQLApplicationPathProvider` |

### com.intellij.spring.messaging

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.spring.messaging.urlProvider](https://jb.gg/ipe?extensions=com.intellij.spring.messaging.urlProvider) | `SpringMessagingUrlProvider` |

### com.intellij.spring.mvc

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.spring.mvc.applicationPathProvider](https://jb.gg/ipe?extensions=com.intellij.spring.mvc.applicationPathProvider) | `SpringApplicationPathProvider` |
| [com.intellij.spring.mvc.completion.controllerParamTypeProvider](https://jb.gg/ipe?extensions=com.intellij.spring.mvc.completion.controllerParamTypeProvider) | `ControllerParameterProvider` |
| [com.intellij.spring.mvc.mergingMvcRequestMappingLineMarkerProvider](https://jb.gg/ipe?extensions=com.intellij.spring.mvc.mergingMvcRequestMappingLineMarkerProvider) | `SpringMergingMvcRequestMappingLineMarkerProvider` |
| [com.intellij.spring.mvc.springEndpointsIconProvider](https://jb.gg/ipe?extensions=com.intellij.spring.mvc.springEndpointsIconProvider) | `SpringEndpointsIconProvider` |
| [com.intellij.spring.mvc.viewResolverFactory](https://jb.gg/ipe?extensions=com.intellij.spring.mvc.viewResolverFactory) | `ViewResolverFactory` |

### com.intellij.spring.security

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.spring.security.rolesProvider](https://jb.gg/ipe?extensions=com.intellij.spring.security.rolesProvider) | `SpringSecurityRolesProvider` |

### intellij.spring.boot.mvc.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.spring.boot.mvc.templateAvailabilityProvider](https://jb.gg/ipe?extensions=com.intellij.spring.boot.mvc.templateAvailabilityProvider) | `TemplateAvailabilityProvider` |

### intellij.spring.boot.run.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.spring.boot.run.applicationUpdatePolicy](https://jb.gg/ipe?extensions=com.intellij.spring.boot.run.applicationUpdatePolicy) | `SpringBootApplicationUpdatePolicy` |
| [com.intellij.spring.boot.run.applicationUrlPathProviderFactory](https://jb.gg/ipe?extensions=com.intellij.spring.boot.run.applicationUrlPathProviderFactory) | `SpringBootApplicationUrlPathProviderFactory` |
| [com.intellij.spring.boot.run.endpoint](https://jb.gg/ipe?extensions=com.intellij.spring.boot.run.endpoint) ![Experimental][experimental] | `Endpoint` |
| [com.intellij.spring.boot.run.endpointTabConfigurable](https://jb.gg/ipe?extensions=com.intellij.spring.boot.run.endpointTabConfigurable) ![Project-Level][project-level] | `EndpointTabConfigurable` |
| [com.intellij.spring.boot.run.liveBeansPanelContent](https://jb.gg/ipe?extensions=com.intellij.spring.boot.run.liveBeansPanelContent) | `LiveBeansPanelContent` |

### intellij.spring.el.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.spring.el.contexts](https://jb.gg/ipe?extensions=com.intellij.spring.el.contexts) | `SpringElContextsExtension` |
| [com.intellij.spring.el.injection.context](https://jb.gg/ipe?extensions=com.intellij.spring.el.injection.context) | `SpringElInjectionContext` |

### intellij.spring.graph.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.spring.gutterDiagramActionProvider](https://jb.gg/ipe?extensions=com.intellij.spring.gutterDiagramActionProvider) | `SpringGutterDiagramActionProvider` |

[deprecated]: https://img.shields.io/badge/-Deprecated-lightgrey?style=flat-square
[removal]: https://img.shields.io/badge/-Removal-red?style=flat-square
[obsolete]: https://img.shields.io/badge/-Obsolete-grey?style=flat-square
[experimental]: https://img.shields.io/badge/-Experimental-violet?style=flat-square
[internal]: https://img.shields.io/badge/-Internal-darkred?style=flat-square
[project-level]: https://img.shields.io/badge/-Project--Level-blue?style=flat-square
[non-dynamic]: https://img.shields.io/badge/-Non--Dynamic-orange?style=flat-square
[dumb-aware]: https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Status Bar Widgets

<link-summary>Extending the status bar with custom widgets providing information about the current file, project, IDE, and similar.</link-summary>

<tldr>

**Product Help:** [Status bar](https://www.jetbrains.com/help/idea/guided-tour-around-the-user-interface.html#status-bar)

</tldr>

The IntelliJ Platform allows plugins to extend the IDE status bar with additional custom widgets.

Status bar widgets are small UI elements that allow providing users with useful information and settings for the current file, project, IDE, and similar.
For example, the status bar contains the widget showing the encoding of the current file, or the current VCS branch of the project.

Due to the prominent presentation and limited space, they should be used only for information or settings that are relevant enough to be "always" shown.

The starting point for extending the status bar with new widgets is the
[`StatusBarWidgetFactory`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/StatusBarWidgetFactory.java)
interface, which is registered in the `com.intellij.statusBarWidgetFactory` extension point.
Note: `id` attribute must be provided in <path>plugin.xml</path> registration and match value from `StatusBarWidgetFactory.getId()`.

In case a widget provides information or functionality related to the editor files, consider extending the
[`StatusBarEditorBasedWidgetFactory`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/status/widget/StatusBarEditorBasedWidgetFactory.kt)
class.

Each widget factory returns a new widget from `createWidget()`.
To control the disposing of a widget, implement the `disposeWidget()`.
To dispose it, use `Disposer.dispose(widget)`.

Any widget must implement the
[`StatusBarWidget`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/wm/StatusBarWidget.kt)
interface.

To reuse the IntelliJ Platform implementation, you can extend one of two classes:

- [`EditorBasedWidget`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/status/EditorBasedWidget.kt)
- [`EditorBasedStatusBarPopup`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/status/EditorBasedStatusBarPopup.kt)

## `EditorBasedWidget`

`EditorBasedWidget` is the basic widget implementation.
To implement it, override `ID()` which returns the unique ID of the widget.
This identifier may be necessary to later get a widget instance.

Use one of the existing predefined widget appearance options:

- `com.intellij.openapi.wm.StatusBarWidget.IconPresentation`

  Widget with only an icon.

  Example:
  [`PowerSaveStatusWidgetFactory`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/status/PowerSaveStatusWidgetFactory.java)

- `com.intellij.openapi.wm.StatusBarWidget.TextPresentation`

  Widget with only a text.

  Example:
  [`PositionPanel`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/status/PositionPanel.kt)

- `com.intellij.openapi.wm.StatusBarWidget.MultipleTextValuesPresentation`

  Widget with a text and a popup.

  Example:
  [`DvcsStatusWidget`](%gh-ic%/platform/dvcs-impl/src/com/intellij/dvcs/ui/DvcsStatusWidget.java)

> Note that they can't be combined to get, for example, an icon and a text.
>
{style="note"}

To use the selected appearance, return a class that implements one of the above interfaces from `getPresentation()`.

To create a widget with custom content, it should implement the
[`CustomStatusBarWidget`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/CustomStatusBarWidget.java)
interface.
Override `getComponent()` to return the custom widget's component to display.

Example:
[`MemoryUsagePanel`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/impl/status/MemoryUsagePanel.java)

## `EditorBasedStatusBarPopup`

`EditorBasedStatusBarPopup` is the basis for all widgets that have a popup with a list of actions.
For example, the encoding widget of the current file.

The component to display is returned from `createComponent()`.
Each update of the widget IDE calls `updateComponent()` to update this component.
In `updateComponent()` implementation, you can describe how the widget should change depending on the current state.

Implement `getWidgetState()` to return the current state of the widget.
This state will be passed to the `updateComponent()` when the widget is updated.
The method accepts a file currently opened in the editor.
To create your own state class, inherit it from `EditorBasedStatusBarPopup.WidgetState.WidgetState`.

Implement `ID()` and return the unique ID of the widget.
This identifier may be necessary to later get a widget instance.

Implement `createInstance()` and return the new widget instance.

Finally, implement the `createPopup()` method, which returns the [popup](popups.md) that will be displayed when the widget is clicked.

Custom listeners to be notified of widget updates can be registered using `registerCustomListeners()`.

To update a widget, use `update()`.

## Showing Widget in LightEdit Mode

By default, widgets aren't shown in [LightEdit](https://www.jetbrains.com/help/idea/lightedit-mode.html) mode.
To show a widget, implement
[`LightEditCompatible`](%gh-ic%/platform/core-api/src/com/intellij/ide/lightEdit/LightEditCompatible.java)
in your factory.

## FAQ

### How to get a widget programmatically?

```kotlin
val widget = WindowManager.getInstance().getStatusBar(project)
    .getWidget(MyWidget.ID) as MyWidget

```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 15. Structure Aware Navigation Bar

<link-summary>Sample implementation of structure-aware navigation bar displaying the breadcrumbs including the current file location and Simple language element.</link-summary>

<tldr>

**Reference**: [](navbar.md)

**Code**: [`SimpleStructureAwareNavbar`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleStructureAwareNavbar.java)

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

Structure-aware navbar allows displaying specific file elements in the
[navigation bar](https://www.jetbrains.com/help/idea/guided-tour-around-the-user-interface.html#navigation-bar),
depending on the location of the caret in it.
For example, in Java this is used to display the class and method in which the caret is currently located.

## Define a Structure-Aware Navbar

The [`SimpleStructureAwareNavbar`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleStructureAwareNavbar.java) implements
[`StructureAwareNavBarModelExtension`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/navigationToolbar/StructureAwareNavBarModelExtension.kt).

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleStructureAwareNavbar.java" include-symbol="SimpleStructureAwareNavbar"}

## Register the Structure-Aware Navbar

The `SimpleStructureAwareNavbar` implementation is registered with the IntelliJ Platform in the plugin
configuration file using the `com.intellij.navbar` extension point.

```xml
<extensions defaultExtensionNs="com.intellij">
  <navbar implementation="org.intellij.sdk.language.SimpleStructureAwareNavbar"/>
</extensions>
```

## Run the Project

Run the project by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

Open the <path>test.simple</path> file and position the caret on any property.
The navigation bar displays the name and icon of this property.

![Structure Aware Navbar](structure_aware_navbar.png)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Structure View

<link-summary>Implementing a custom language file structure view showing the file elements tree.</link-summary>

<tldr>

**Product Help:** [Source file structure](https://www.jetbrains.com/help/idea/viewing-structure-of-a-source-file.html)

</tldr>

The Structure View implementation used for a specific file type can be customized on many levels.
If a custom language plugin provides an implementation of the [`StructureView`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/structureView/StructureView.java) interface, it can completely replace the standard structure view implementation with a custom user interface component.
However, for most languages, this is not necessary, and the standard `StructureView` implementation provided by IntelliJ Platform can be reused.

> To modify an existing Structure View (e.g., add/filter nodes of builtin language support), use [`StructureViewExtension`](%gh-ic%/platform/structure-view-impl/src/com/intellij/ide/structureView/StructureViewExtension.java) registered in `com.intellij.lang.structureViewExtension` extension point.
>

The starting point for the structure view is the [`PsiStructureViewFactory`](%gh-ic%/platform/editor-ui-api/src/com/intellij/lang/PsiStructureViewFactory.java) interface, which is registered in the `com.intellij.lang.psiStructureViewFactory` extension point.

**Examples:**
- [`PsiStructureViewFactory`](%gh-ic%/plugins/properties/src/com/intellij/lang/properties/structureView/PropertiesStructureViewBuilderFactory.java) for [Properties language plugin](%gh-ic%/plugins/properties)
- [Custom Language Support Tutorial: Structure View](structure_view_factory.md)

To reuse the IntelliJ Platform implementation of the `StructureView`, the plugin returns a [`TreeBasedStructureViewBuilder`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/structureView/TreeBasedStructureViewBuilder.java) from its [`PsiStructureViewFactory.getStructureViewBuilder()`](%gh-ic%/platform/editor-ui-api/src/com/intellij/lang/PsiStructureViewFactory.java) method.
As the builder model, the plugin can specify a subclass of [`TextEditorBasedStructureViewModel`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/structureView/TextEditorBasedStructureViewModel.java), and by overriding methods of this subclass, it customizes the structure view for a specific language.

**Example:**
[`StructureViewModel`](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/structureView/PropertiesFileStructureViewModel.java) for [Properties language plugin](%gh-ic%/plugins/properties)

The main method to override is `getRoot()`, which returns the instance of a class implementing the [`StructureViewTreeElement`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/structureView/StructureViewTreeElement.java) interface.
There exists no standard implementation of this interface, so a plugin will need to implement it completely.

The structure view tree is usually built as a partial mirror of the PSI tree.
In the implementation of `StructureViewTreeElement.getChildren()`, the plugin can specify which of the child elements of a specific PSI tree node need to be represented as elements in the structure view.
Another important method is `getPresentation()`, which can be used to customize the text, attributes, and icon used to represent an element in the structure view.

The implementation of `StructureViewTreeElement.getChildren()` needs to be matched by `TextEditorBasedStructureViewModel.getSuitableClasses()`.
The latter method returns an array of `PsiElement`\-derived classes, which can be shown as structure view elements.
It is used to select the Structure View item matching the cursor position when the structure view is first opened or when the <control>Autoscroll from source</control> option is enabled.

**Example:**
[`StructureViewTreeElement`](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/editor/PropertyStructureViewElement.java) for [Properties language plugin](%gh-ic%/plugins/properties)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 14. Structure View Factory

<link-summary>Sample implementation of a structure view factory adding a Simple language file structure in the Structure tool window.</link-summary>

<tldr>

**Reference**: [](structure_view.md)

**Code**: [`SimpleStructureViewFactory`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleStructureViewFactory.java),
[`SimpleStructureViewModel`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleStructureViewModel.java),
[`SimpleStructureViewElement`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleStructureViewElement.java)

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

The structure view can be customized for a specific file type.
Creating a structure view factory allows showing the structure of any file in the <control>Structure</control> tool window or by invoking <ui-path>Navigate | File Structure</ui-path> for easy navigation between items in the current editor.

## Define a Structure View Factory

The [`SimpleStructureViewFactory`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleStructureViewFactory.java)
implements [`PsiStructureViewFactory`](%gh-ic%/platform/editor-ui-api/src/com/intellij/lang/PsiStructureViewFactory.java).
The `getStructureViewBuilder()` implementation reuses the IntelliJ Platform class [`TreeBasedStructureViewBuilder`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/structureView/TreeBasedStructureViewBuilder.java).
At this point the project will not compile until `SimpleStructureViewModel` is [implemented below](#define-a-structure-view-model).

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleStructureViewFactory.java" include-symbol="SimpleStructureViewFactory"}

## Define a Structure View Model

The [`SimpleStructureViewModel`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleStructureViewModel.java) is created by implementing [`StructureViewModel`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/structureView/StructureViewModel.java), which defines the model for data displayed in the standard structure view.
It also extends [`StructureViewModelBase`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/structureView/StructureViewModelBase.java), an implementation that links the model to a text editor.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleStructureViewModel.java" include-symbol="SimpleStructureViewModel"}

## Define a Structure View Element

The [`SimpleStructureViewElement`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleStructureViewElement.java)
implements [`StructureViewTreeElement`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/structureView/StructureViewTreeElement.java) and [`SortableTreeElement`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/util/treeView/smartTree/SortableTreeElement.java).
The `StructureViewTreeElement` represents an element in the Structure View tree model.
The `SortableTreeElement` represents an item in a smart tree that allows using text other than the presentable text as a key for alphabetic sorting.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleStructureViewElement.java" include-symbol="SimpleStructureViewElement"}

## Register the Structure View Factory

The `SimpleStructureViewFactory` implementation is registered with the IntelliJ Platform in the plugin configuration file using the `com.intellij.lang.psiStructureViewFactory` extension point.

```xml
<extensions defaultExtensionNs="com.intellij">
  <lang.psiStructureViewFactory
      language="Simple"
      implementationClass="org.intellij.sdk.language.SimpleStructureViewFactory"/>
</extensions>
```

## Run the Project

Run the project by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

Open the <path>test.simple</path> file and open <ui-path>View | Tool Windows | Structure</ui-path>.
The IDE now supports a structure view of the Simple Language:

![Structure View](structure_view.png)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Stub Indexes

<link-summary>Creating stub indexes containing PSI tree fragments, which allow searching for PSI elements without parsing files.</link-summary>

## Stub Trees

A stub tree is a subset of the PSI tree for a file; it is stored in a compact serialized binary format.
The PSI tree for a file can be backed either by the AST (built by parsing the file) or by the stub tree deserialized from disk.
Switching between the two is transparent.

The stub tree contains only a subset of the nodes.
Typically, it contains only the nodes needed to resolve the declarations contained in this file from external files.
Trying to access any node that is not part of the stub tree or perform any operation that cannot be satisfied by the stub tree, e.g., accessing the text of a PSI element, causes file parsing to switch from the stub to AST backing.

Each stub in the stub tree is simply a bean class with no behavior.
A stub stores a subset of the corresponding PSI element's state, like the element's name, modifier flags like public or final, etc.
The stub also holds a pointer to its parent in the tree and a list of its children's stubs.

To support stubs for a custom language, first decide which of the PSI tree elements should be stored as stubs.
Typically, stubs are needed for things like methods or fields visible from other files.
Usually there is no need to have stubs for things like statements or local variables, which are not visible externally.

### Implementation

> When using [Grammar-Kit](https://github.com/JetBrains/Grammar-Kit) to generate the language PSI, see the [Stub indexes support](https://github.com/JetBrains/Grammar-Kit/blob/master/HOWTO.md#35-stub-indices-support) section for instructions on integrating the grammar with stubs.
>
{style="note"}

<procedure id="stubs-setup" title="Stubs Setup">

The following steps need to be performed only once for each language that supports stubs:

1. Change the file element type for the language (the element type returned from `ParserDefinition.getFileNodeType()`) to a class that extends [`IStubFileElementType`](%gh-ic%/platform/core-impl/src/com/intellij/psi/tree/IStubFileElementType.java) and override its `getExternalId()` method (see also following item).
2. In the <path>[plugin.xml](plugin_configuration_file.md)</path>, define the `com.intellij.stubElementTypeHolder` extension and specify the interface which contains the `IElementType` constants used by the language's parser.

   Define the common `externalIdPrefix` to be used for all stub element types (see [](#adding-stub-elements)).
   See [`StubElementTypeHolderEP`](%gh-ic%/platform/core-api/src/com/intellij/psi/stubs/StubElementTypeHolderEP.java) docs for important requirements.

**Examples:**
- [`JavaStubElementTypes`](%gh-ic%/java/java-psi-impl/src/com/intellij/psi/impl/java/stubs/JavaStubElementTypes.java) registered in [`JavaPsiPlugin.xml`](%gh-ic%/java/java-psi-impl/src/META-INF/JavaPsiPlugin.xml)
- see [`Angular2MetadataElementTypes`](%gh-ij-plugins%/Angular/src/org/angular2/entities/metadata/Angular2MetadataElementTypes.kt) for Kotlin sample

</procedure>

<procedure id="adding-stub-elements" title="Adding Stub Elements">

For each element type that needs to be stored in the stub tree, perform the following steps:

1. Define an interface for the stub, derived from the [`StubElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/stubs/StubElement.java) interface ([example](%gh-ic%/plugins/properties/properties-psi-api/src/com/intellij/lang/properties/psi/PropertyStub.java)).
2. Provide an implementation for the interface ([example](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/psi/impl/PropertyStubImpl.java)).
3. Make sure the interface for the PSI element extends [`StubBasedPsiElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/StubBasedPsiElement.java) parameterized by the type of the stub interface ([example](%gh-ic%/plugins/properties/properties-psi-api/src/com/intellij/lang/properties/psi/Property.java)).
4. Make sure the implementation class for the PSI element extends [`StubBasedPsiElementBase`](%gh-ic%/platform/core-impl/src/com/intellij/extapi/psi/StubBasedPsiElementBase.java) parameterized by the type of the stub interface ([example](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/psi/impl/PropertyImpl.java)).
   Provide both a constructor that accepts an `ASTNode` and a constructor that accepts a stub.
5. Create a class that implements [`IStubElementType`](%gh-ic%/platform/core-api/src/com/intellij/psi/stubs/IStubElementType.java) and is parameterized with the stub interface and the actual PSI element interface ([example](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/parsing/PropertyStubElementType.java)).
   Implement the `createPsi()` and `createStub()` methods for creating PSI from a stub and vice versa.
   Implement the `serialize()` and `deserialize()` methods for storing the data in a binary stream.

   Override `getExternalId()` according to common used `externalIdPrefix` for the language (see [](#stubs-setup)).

   For always-leaf stub nodes return `true` from `isAlwaysLeaf()` (2023.3).
   "Container" stubs that do not serialize any data of their own may implement [`EmptyStubSerializer`](%gh-ic%/platform/core-api/src/com/intellij/psi/stubs/EmptyStubSerializer.java) to optimize storage (2023.3).
6. Use the class implementing `IStubElementType` as the element type constant when parsing ([example](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/parsing/PropertiesElementTypes.java)).
7. Make sure all methods in the PSI element interface access the stub data rather than the PSI tree when appropriate ([example: `Property.getKey()` implementation](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/psi/impl/PropertyImpl.java)).

</procedure>

By default, if a PSI element extends `StubBasedPsiElement`, all elements of that type will be stored in the stub tree.
To have more precise control over which elements are stored, override `IStubElementType.shouldCreateStub()` and return `false` for elements that should not be included in the stub tree.
The exclusion is not recursive: if some elements of the element returning `false` are also stub-based PSI elements, they will be included in the stub tree.


### Serializing Data

For serializing string data in stubs, e.g. element names, use [`StubOutputStream`](%gh-ic%/platform/core-api/src/com/intellij/psi/stubs/StubOutputStream.java) `writeName()` and `readName()`.
These methods ensure that each unique identifier is stored only once in the data stream.
This reduces the size of the serialized stub tree data.
See also [`DataInputOutputUtil`](%gh-ic%/platform/util/src/com/intellij/util/io/DataInputOutputUtil.java).

To change the stored binary format for the stubs (for example, to store some additional data or some new elements), make sure to advance the stub version returned from `IStubFileElementType.getStubVersion()` for the language.
This will cause the stubs and [](#stub-indexes) to be rebuilt, and will avoid mismatches between the stored data format and the code trying to load it.

It is critical to ensure that all information stored in the stub tree depends only on the contents of the file for which stubs are being built, and does not depend on any external files or any other data.
Otherwise, the stub tree will not be rebuilt when external dependencies change, leading to stale and incorrect data in the stub tree.

> Please see also [](indexing_and_psi_stubs.md#improving-indexing-performance).
>

## Stub Indexes

When building the stub tree, the plugin can, at the same time, put some data about the stub elements into a number of indexes, which then can be used to find the PSI elements by the corresponding key.
Unlike file-based indexes, stub indexes do not support storing custom data as values; the value is always a PSI element.
Keys in stub indexes are typically strings (such as class names); other data types are also supported if desired.

A stub index is a class which extends [`AbstractStubIndex`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/stubs/AbstractStubIndex.java).
In the most common case, when the key type is `String`, use a more specific base class, namely [`StringStubIndexExtension`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/stubs/StringStubIndexExtension.java).
Stub index implementation classes are registered in the `com.intellij.stubIndex` extension point.

To put data into an index, implement `IStubElementType.indexStub()` ([example: `JavaClassElementType.indexStub()`](%gh-ic%/java/java-psi-impl/src/com/intellij/psi/impl/java/stubs/JavaClassElementType.java)).
This method accepts an [`IndexSink`](%gh-ic%/platform/core-api/src/com/intellij/psi/stubs/IndexSink.java) as a parameter and puts in the index ID and the key for each index in which the element should be stored.

### Accessing Stub Indexes

To access the data from an index, the following instance methods are used on the singleton instance managed by the implementation:

#### Keys

`AbstractStubIndex.getAllKeys()/processAllKeys()` returns the list of all keys (processes all keys) in the index for the specified project (for example, the list of all class names found in the project).

> The returned keys may return stale/out-of-date data.
> See [](#elements) to obtain/verify actual existing elements for the given key in a given scope
> (for example, when iterating all keys to collect relevant completion variants).
>
{style="warning" title="Stale Data"}

#### Elements

[`StubIndex.getElements()`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/stubs/StubIndex.java) returns the collection of PSI elements corresponding to a certain key (for example, classes with the specified short name) in the specified scope.

**Example:** [`JavaAnnotationIndex`](%gh-ic%/java/java-indexing-impl/src/com/intellij/psi/impl/java/stubs/index/JavaAnnotationIndex.java)

## Related Forum Discussions

* [Lifecycle of stub creation](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206121959-Lifecycle-of-stub-creation/comments/206143885)
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Surround With

<link-summary>Surrounding code fragments with various constructs.</link-summary>

<tldr>

**Product Help:** [Surround code fragments](https://www.jetbrains.com/help/idea/surrounding-blocks-of-code-with-language-constructs.html)

</tldr>

To support the _Surround With_ action, the plugin needs to register one or more implementations of the [`SurroundDescriptor`](%gh-ic%/platform/lang-api/src/com/intellij/lang/surroundWith/SurroundDescriptor.java) interface in the `com.intellij.lang.surroundDescriptor` extension point.
Each of the surround descriptors defines a possible type of code fragment that can be surrounded - for example, one surround descriptor can handle surrounding expressions, and another can handle statements.
Each surround descriptor, in turn, contains an array of [`Surrounder`](%gh-ic%/platform/lang-api/src/com/intellij/lang/surroundWith/Surrounder.java) objects, defining specific templates which can be used for surrounding the selected code fragment (for example, _Surround With if_, _Surround With for_, and so on).

When the <ui-path>Code | Surround With...</ui-path> action is invoked, the IDE queries all surround descriptors for the language until it finds one that returns a non-empty array from its `getElementsToSurround()` method.
Then it calls the [`Surrounder.isApplicable()`](%gh-ic%/platform/lang-api/src/com/intellij/lang/surroundWith/Surrounder.java) method for each surrounder in that descriptor to check if the specific template is applicable in the current context.
Once the user selects a specific surrounder from the popup menu, the [`Surrounder.surroundElements()`](%gh-ic%/platform/lang-api/src/com/intellij/lang/surroundWith/Surrounder.java) method is used to execute the surround action.

**Example:**
[`SurroundDescriptor`](%gh-ic%/plugins/groovy/src/org/jetbrains/plugins/groovy/lang/surroundWith/GroovySurroundDescriptor.java) for Groovy plugin

> See the [](live_templates.md) and [](advanced_postfix_templates.md#surround-postfix-templates) sections for information on how to support code surrounding with other IDE features.
>
{style="note"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Symbols
<primary-label ref="2020.3"/>

> This API is currently in development and thus in an experimental state.
>
{style="warning"}

<link-summary rel="excerpt"/>
<p id="excerpt">
A symbol is a semantic element in some model, e.g., language or framework model.
</p>

The IntelliJ Platform uses [`Symbol`](%gh-ic%/platform/core-api/src/com/intellij/model/Symbol.java) to represent symbols, and `Symbol` serves as a link between Platform APIs, such as navigation, finding usages, or renaming.
This API allows implementing the same functionalities as in the [References and Resolve](references_and_resolve.md) mechanism, but it is a more abstract concept not limited to connecting only PSI elements.
The platform obtains the target symbol from a [declaration](declarations_and_references.md#declarations) or by resolving a [reference](declarations_and_references.md#references) and then uses it to perform an action.
The [`PsiElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElement.java) is considered as an element in the source tree (enhanced `ASTNode`).
`Symbol` decouples semantic actions from [PSI](psi.md).

A `Symbol` is not required to be backed by a `PsiElement`, and it is incorrect to try to obtain the `PsiElement` from a `Symbol`.
`Symbol` is not required to be bound to a `Project` as well, meaning the same instance might be shared between [projects](project.md).

Examples:

- Java local variable is a symbol in Java language model, it's backed by a `PsiVariable` element.
- Compiled class is a symbol in JVM model, it's backed by JDK library stubs, and it's not bound to any project.
- Spring Bean is a symbol in [Spring framework model](spring_api.md), it's defined on-the-fly by framework support (not backed by a `PsiElement`) and bound to a `Project`.
- Database column is a symbol defined by data source (not backed by a `PsiElement`) and not bound to a `Project` since database elements might be shared between projects.

See also [](websymbols.md).

## Lifecycle

The `Symbol` instance is expected to stay valid within a single [read action](threading_model.md), which means it's safe to pass the instance to different APIs.
A `Symbol` instance should not be referenced between read actions.
One should create a pointer via `Symbol.createPointer()` in the current read action, and then call `Pointer.dereference()` to obtain a `Symbol` instance in the subsequent read action.

## Sample plugins

- Java: [`StringFormatSymbolReferenceProvider`](%gh-ic%/java/java-impl/src/com/siyeh/ig/format/StringFormatSymbolReferenceProvider.java)
- JVM languages: [`LoggingArgumentSymbolReferenceProvider`](%gh-ic%/jvm/jvm-analysis-impl/src/com/intellij/analysis/logging/resolve/LoggingArgumentSymbolReferenceProvider.kt)
- Markdown: [`link labels`](%gh-ic%/plugins/markdown/model/src/main/kotlin/org/intellij/plugins/markdown/model/psi/labels)
# Syntax Errors

<!-- Copyright 2000-2022 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

<link-summary>Suppressing syntax errors in the editor programmatically.</link-summary>

The IntelliJ Platform provides a mechanism for analyzing the PSI tree and highlighting syntax errors out of the box.

While the PSI tree for the code is being built, a [parser](implementing_parser_and_psi.md) tries to consume tokens according to language grammar.
When it encounters a syntax error, like an unexpected token, a [`PsiErrorElement`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiErrorElement.java) is created and added to the PSI tree with an appropriate error description.
In the code analysis daemon, the IDE visits every PSI element in the tree, and when a `PsiErrorElement` is encountered, information about it is collected and used while highlighting the code in the editor.

> Additional highlighting can also be added using [Annotators](syntax_highlighting_and_error_highlighting.md#syntax) or Inspections, see [Controlling Highlighting](controlling_highlighting.md) on how to suppress.

## Controlling Syntax Errors Highlighting

In some cases highlighting syntax errors is insufficient or even unnecessary:
- An error can be presented to the user in an easier-to-understand way.
- The actual error cause is in a different location in the code, which is not easily visible when looking at the syntax error.
- An error can be safely ignored in a given context, e.g., incomplete code fragment injected in a Markdown code block.
- A syntax error is not critical and can be considered a warning or even information.

The IntelliJ Platform allows plugins to disable highlighting particular syntax errors.
These errors can be optionally handled by additional Annotators or [Inspections](code_inspections.md) if needed.

To control which `PsiErrorElement`s should be reported and which can be ignored, a plugin has to provide an implementation of [`HighlightErrorFilter`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/highlighting/HighlightErrorFilter.java) and register it in the `com.intellij.highlightErrorFilter` extension point.
It contains a single abstract method `shouldHighlightErrorElement()` which should return `false` if a given `PsiErrorElement` should not be highlighted in the editor.

**Examples:**
- [`HtmlClosingTagErrorFilter`](%gh-ic%/xml/xml-analysis-impl/src/com/intellij/codeInsight/highlighting/HtmlClosingTagErrorFilter.java) ignoring unmatched closing tag in HTML files
- [`MarkdownCodeFenceErrorHighlightingIntention`](%gh-ic%/plugins/markdown/core/src/org/intellij/plugins/markdown/injection/MarkdownCodeFenceErrorHighlightingIntention.kt) ignoring all syntax errors in a code injected into a Markdown code blocks

**See also:**
- [Controlling Highlighting](controlling_highlighting.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# 5. Syntax Highlighter and Color Settings Page

<link-summary>Sample implementation of a syntax highlighter and color settings page allowing to edit Simple language syntax element colors.</link-summary>

<tldr>

**Reference**: [](syntax_highlighting_and_error_highlighting.md)

**Code**: [`SimpleSyntaxHighlighter`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleSyntaxHighlighter.java),
[`SimpleSyntaxHighlighterFactory`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleSyntaxHighlighterFactory.java),
[`SimpleColorSettingsPage`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleColorSettingsPage.java)

</tldr>

<include from="language_and_filetype.md" element-id="custom_language_tutorial_header"></include>

The first level of syntax highlighting is based on the lexer output, and is provided by `SyntaxHighlighter`.
A plugin can also define color settings based on `ColorSettingPage` so the user can configure highlight colors.

## Define a Syntax Highlighter

The [`SimpleSyntaxHighlighter`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleSyntaxHighlighter.java) class extends [`SyntaxHighlighterBase`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/fileTypes/SyntaxHighlighterBase.java).
As recommended in [Color Scheme Management](color_scheme_management.md#text-attribute-key-dependency), the Simple Language highlighting text attributes are specified as a dependency on one of standard IntelliJ Platform keys.
For the Simple Language, define only one scheme.

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleSyntaxHighlighter.java" include-symbol="SimpleSyntaxHighlighter"}

### Define a Syntax Highlighter Factory

The factory provides a standard way for the IntelliJ Platform to instantiate the syntax highlighter for Simple Language files.
Here, [`SimpleSyntaxHighlighterFactory`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleSyntaxHighlighterFactory.java)
subclasses [`SyntaxHighlighterFactory`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/fileTypes/SyntaxHighlighterFactory.java).

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleSyntaxHighlighterFactory.java" include-symbol="SimpleSyntaxHighlighterFactory"}

### Register the Syntax Highlighter Factory

Register the factory with the IntelliJ Platform in the plugin configuration file using the `com.intellij.lang.syntaxHighlighterFactory` extension point.

```xml
<extensions defaultExtensionNs="com.intellij">
  <lang.syntaxHighlighterFactory
      language="Simple"
      implementationClass="org.intellij.sdk.language.SimpleSyntaxHighlighterFactory"/>
</extensions>
```

### Run the Project with Default Colors

Open the example Simple Language [properties file ](lexer_and_parser_definition.md#run-the-project) (`test.simple`) in the IDE Development Instance.
The colors for Simple Language Key, Separator, and Value highlighting default to the IDE _Language Defaults_ for Keyword, Braces, Operators, and Strings, respectively.

![Syntax highlighter](syntax_highlighter.png)

## Define a Color Settings Page

The color settings page adds the ability for users to customize color settings for the highlighting in Simple Language files.
The [`SimpleColorSettingsPage`](%gh-sdk-samples-master%/simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleColorSettingsPage.java)
implements [`ColorSettingsPage`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/options/colors/ColorSettingsPage.java).

```java
```
{src="simple_language_plugin/src/main/java/org/intellij/sdk/language/SimpleColorSettingsPage.java" include-symbol="SimpleColorSettingsPage"}

It is supported to group related attributes like operators or braces by separating the nodes with `//`, e.g.:

```java
AttributesDescriptor[] DESCRIPTORS = new AttributesDescriptor[] {
    new AttributesDescriptor("Operators//Plus", MySyntaxHighlighter.PLUS),
    new AttributesDescriptor("Operators//Minus", MySyntaxHighlighter.MINUS),
    new AttributesDescriptor("Operators//Advanced//Sigma", MySyntaxHighlighter.SIGMA),
    new AttributesDescriptor("Operators//Advanced//Pi", MySyntaxHighlighter.PI),
    //...
};
```

### Register the Color Settings Page

Register the Simple Language color settings page with the IntelliJ Platform in the plugin configuration file using the `com.intellij.colorSettingsPage` extension point.

```xml
<extensions defaultExtensionNs="com.intellij">
  <colorSettingsPage
      implementation="org.intellij.sdk.language.SimpleColorSettingsPage"/>
</extensions>
```

### Run the Project

Run the project by using the Gradle [`runIde`](creating_plugin_project.md#running-a-plugin-with-the-runide-gradle-task) task.

In the IDE Development Instance, open the Simple Language highlight settings page: <ui-path>Settings | Editor | Color Scheme | Simple</ui-path>.
Each color initially inherits from a <control>Language Defaults</control> value.

![Color Settings Page](color_settings_page.png)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Syntax and Error Highlighting

<link-summary>Highlighting syntax and semantic code errors on multiple levels.</link-summary>

<tldr>

**Product Help:** [Colors and fonts](https://www.jetbrains.com/help/idea/configuring-colors-and-fonts.html)

**UI Guidelines:** [](inspections.md)

</tldr>

The syntax and error highlighting are performed on multiple levels: [](#lexer), [](#parser), and [](#annotator)/[](#external-annotator).

## Text Attributes Key

How a particular range of text should be highlighted is defined via [`TextAttributesKey`](%gh-ic%/platform/core-api/src/com/intellij/openapi/editor/colors/TextAttributesKey.java).
An instance of this class is created for every distinct type of item that should be highlighted (keyword, number, string literal, etc.).

The `TextAttributesKey` defines the default attributes applied to items of the corresponding type (for example, keywords are bold, numbers are blue, string literals are bold and green).
Highlighting from multiple `TextAttributesKey` items can be layered — for example, one key may define an item's boldness and another one its color.

> To inspect applied `TextAttributesKey`(s) in the editor for the element at the caret, use <ui-path>Jump to Colors and Fonts</ui-path> action.
>
> The underlying `TextAttributeKey`'s external name for items in <ui-path>Settings | Editor | Color Scheme</ui-path> can be inspected using [UI Inspector](internal_ui_inspector.md#inspecting-settings).
>
{title="Looking up existing TextAttributeKey"}

## Color Settings

The mapping of the `TextAttributesKey` to specific attributes used in an editor is defined by the [`EditorColorsScheme`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/colors/EditorColorsScheme.java) class.
It can be configured by the user via <ui-path>Settings | Editor | Color Scheme</ui-path> by providing an implementation of [`ColorSettingPage`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/options/colors/ColorSettingsPage.java) registered in `com.intellij.colorSettingsPage` extension point.
To look up the external name for a setting in the IDE, use [UI Inspector](internal_ui_inspector.md#inspecting-settings).

The <ui-path>File | Export | Files or Selection to HTML</ui-path> feature uses the same syntax highlighting mechanism as the editor.
Thus, it will work automatically for custom languages that provide a syntax highlighter.

**Examples:**

- [`ColorSettingsPage`](%gh-ic%/plugins/properties/src/com/intellij/lang/properties/PropertiesColorsPage.java) for [Properties language plugin](%gh-ic%/plugins/properties)
- [Custom Language Support Tutorial: Color Settings Page](syntax_highlighter_and_color_settings_page.md)

> See note about Language Defaults and support for additional color schemes in [](color_scheme_management.md).
>
{style="note"}

## Lexer

The first syntax highlighting level is based on the lexer output and is provided through the [`SyntaxHighlighter`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/fileTypes/SyntaxHighlighter.java) interface.
The syntax highlighter returns the `TextAttributesKey` instances for each token type, which needs special highlighting.
For highlighting lexer errors [`HighlighterColors.BAD_CHARACTER`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/HighlighterColors.java) should be used.

**Examples:**

- [`SyntaxHighlighter`](%gh-ic%/plugins/properties/properties-psi-api/src/com/intellij/lang/properties/PropertiesHighlighter.java) implementation for [Properties language plugin](%gh-ic%/plugins/properties)
- [Custom Language Support Tutorial: Syntax Highlighter](syntax_highlighter_and_color_settings_page.md)

> Use [`HtmlSyntaxInfoUtil`](%gh-ic%/platform/lang-impl/src/com/intellij/openapi/editor/richcopy/HtmlSyntaxInfoUtil.java) to create Lexer-based highlighted code samples, e.g., for usage in documentation.
>
{title="Creating highlighted code sample"}

### Semantic Highlighting

[Semantic highlighting](https://www.jetbrains.com/help/idea/configuring-colors-and-fonts.html#semantic-highlighting) provides an additional coloring layer to improve the visual distinction of several related items (e.g., method parameters, local variables).

Register [`RainbowVisitor`](%gh-ic%/platform/analysis-impl/src/com/intellij/codeInsight/daemon/RainbowVisitor.java) in `com.intellij.highlightVisitor` extension point.
[](#color-settings) must implement [`RainbowColorSettingsPage`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/options/colors/RainbowColorSettingsPage.java) in addition.

## Parser

The second level of error highlighting happens during parsing.
If according to the grammar of the language a particular sequence of tokens is invalid, the [`PsiBuilder.error()`](%gh-ic%/platform/core-api/src/com/intellij/lang/PsiBuilder.java) method can highlight the invalid tokens and display an error message showing why they are not valid.

See [](syntax_errors.md) on how to programmatically suppress these errors in certain contexts.

## Annotator

The third level of highlighting is performed through the [`Annotator`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/annotation/Annotator.java) interface.
A plugin can register one or more annotators in the `com.intellij.annotator` extension point, and these annotators are called during the background highlighting pass to process the elements in the custom language's PSI tree.
Attribute `language` should be set to the Language ID where this annotator applies to.
If highlighting data requires invoking external tools, use [](#external-annotator) instead.

Annotators can analyze not only the syntax, but also the semantics using PSI, and thus can provide much more complex syntax and error highlighting logic.
The annotator can also provide quick fixes to problems it detects.
When the file is changed, the annotator is called incrementally to process only changed elements in the PSI tree.

Annotators not requiring information from [indexes](indexing_and_psi_stubs.md) can be marked [dumb aware](indexing_and_psi_stubs.md#DumbAwareAPI) to work during indexing (e.g., for additional [syntax highlighting](#syntax)). (2023.1+)

> See also [Code Inspections](code_inspections_and_intentions.md) which offer more fine-grained control and some additional features.
>
{style="note"}

### Errors/Warning

See [Inspections](inspections.md) topic in UI Guidelines on how to write message texts for highlighting/quick fixes.

To highlight a region of text as a warning or error:

<tabs group="platform-version">

<tab title="2020.1 and later" group-key="2020.1">

```java
holder.newAnnotation(HighlightSeverity.WARNING, "Invalid code") // or HighlightSeverity.ERROR
    .withFix(new MyFix(psiElement))
    .create();
```

</tab>

<tab title="Pre-2020.1" group-key="pre-2020.1">

Call `createWarningAnnotation()`/`createErrorAnnotation()` on the [`AnnotationHolder`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/annotation/AnnotationHolder.java), and optionally call `registerFix()` on the returned [`Annotation`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/annotation/Annotation.java) object to add a quick fix for the error or warning.

</tab>

</tabs>

### Syntax

To apply additional syntax highlighting:

<tabs group="platform-version">

<tab title="2020.1 and later" group-key="2020.1">

```java
holder.newSilentAnnotation(HighlightSeverity.INFORMATION)
    .range(rangeToHighlight)
    .textAttributes(MyHighlighter.EXTRA_HIGHLIGHT_ATTRIBUTE)
    .create();
```

</tab>

<tab title="Pre-2020.1" group-key="pre-2020.1">

Call `AnnotationHolder.createInfoAnnotation()` with an empty message and then [`Annotation.setTextAttributes()`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/annotation/Annotation.java).

</tab>

</tabs>

**Examples:**

- [`Annotator`](%gh-ic%/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/PropertiesAnnotator.java) for [Properties language plugin](%gh-ic%/plugins/properties)
- [Custom Language Support Tutorial: Annotator](annotator.md)

## External Annotator

If the custom language employs external tools for validating files in the language (for example, using the Xerces library for XML schema validation),
it can provide an implementation of the [`ExternalAnnotator`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/annotation/ExternalAnnotator.java) interface and register it in `com.intellij.externalAnnotator` extension point (`language` attribute must be specified).

The `ExternalAnnotator` highlighting has the lowest priority and is invoked only after all other background processing has completed.
It uses the same [`AnnotationHolder`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/annotation/AnnotationHolder.java) interface for converting the output of the external tool into editor highlighting.

To skip running specific `ExternalAnnotator` for given file, register [`ExternalAnnotatorsFilter`](%gh-ic%/platform/analysis-api/src/com/intellij/lang/ExternalAnnotatorsFilter.java) extension in `com.intellij.daemon.externalAnnotatorsFilter` extension point.

To enable running `ExternalAnnotator` during indexing in [dumb mode](indexing_and_psi_stubs.md#dumb-mode), it can be marked [dumb aware](indexing_and_psi_stubs.md#DumbAwareAPI) (2023.3).

## Controlling Highlighting

Existing highlighting can be suppressed programmatically in certain contexts, see [](controlling_highlighting.md).

To force re-highlighting all open or specific file(s) (e.g., after changing plugin specific settings), use
[`DaemonCodeAnalyzer.restart()`](%gh-ic%/platform/analysis-api/src/com/intellij/codeInsight/daemon/DaemonCodeAnalyzer.java).

## Order of Running Highlighting
<primary-label ref="2024.1"/>

[Inspections](code_inspections_and_intentions.md) and [annotators](#annotator) do not run sequentially on each `PsiElement` anymore.
Instead, they're run in parallel on all relevant PSI independently with the following consequences.

**Independent Annotators**

[Annotators](#annotator) are run independent of each other: if an annotator found an error, it no longer stops annotating the `PsiElement`'s parents.
Effectively, there is "more" highlighting now.

**Highlight Range**

Producing highlights must be done as close as possible for the relevant `PsiElement`.
For example, instead of

```text
annotate(PsiFile) {
  <<highlight all relevant identifiers>>
}
```

this approach should be used:

```text
annotate(PsiIdentifier) {
  <<highlight this identifier if it's relevant>>
}
```

The latter version:
- performs faster highlighting – it doesn't have to wait until all other identifiers are visited
- removes outdated highlights faster – right after the identifier was visited and the annotator didn't produce a highlighting anymore

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Table

<link-summary>UI guidelines on using tables.</link-summary>

<tldr>

**Implementation:** [`JBTable`](%gh-ic%/platform/platform-api/src/com/intellij/ui/table/JBTable.java)

</tldr>

![](table_table.png){width=448}

## When to use

Use tables so that users can review, enter or edit uniform sets of data or options. For example:

* <ui-path>Git | Show Git Log</ui-path>
* <ui-path>Settings | Appearance & Behavior | Path Variables</ui-path>
* <ui-path>Settings | Appearance & Behavior | File Colors</ui-path>

Use tables:

* To compare data in a set, for example, in the <control>File Colors</control> table, it is convenient to compare file colors with one another and make sure that they are distinguishable:

* ![](fileColors.png){width=350}

* To search by all parameters in a data set, for example, in the <control>File History</control> table, it is possible to quickly filter the table by the date, author or commit message.

![](table_history.png){width=488}

Do **not** use tables:

* For hierarchical structures. Use Tree View instead.

* When there are more than 4 options per entry. Use the Master-Detail layout instead.

* When at least one of the options requires a multi-line control, for example, the Text Area in <ui-path>Settings | Editor | Copyright | Copyright Profiles</ui-path>. Use Master-Detail layout instead:

  ![](master-detail.png){width=709}

## How to use

### Label

A label is optional for tables.

Add a label if the table content is not obvious from the dialog title or the table header. For example, in the table that lets you configure filters for import and completion per-scope:

![](table_label.png){width=448}

Avoid a label if it duplicates the dialog title or the table header. For example, there is no need for a label in the <ui-path>JavaScript | Libraries</ui-path> table since the Settings page title and the table context make it clear what is in the table:

![](label-header.png){width=424}

Add a label if the control above can be mistaken for a table header:

![](bytecode-version.png){width=350}

Do **not** add a label to explain the table behavior. Use context help instead:

<format color="Red" style="bold">Incorrect</format>

![](label-help-header.png){width=448}

<format color="Green" style="bold">Correct</format>

![](label-help.png){width=448}

Follow the rules for the [Input field](input_field.md):

* The label should be short and descriptive.
* A label must be a noun phrase punctuated with a colon.
* Use sentence-style capitalization.
* If a table is disabled, disable the label.
* Make label text selectable.

Always put the label on top of the table.

Do **not** use a Group separator instead of a Table label. A horizontal line is redundant here:

<format color="Red" style="bold">Incorrect</format>

![](label-group-incorrect.png){width=448}

<format color="Green" style="bold">Correct</format>

![](table_label.png){width=448}

### Header

A table header is the row at the top of the table that helps identify the columns below each of the headers. Follow these rules:

Add a header to a table if table data is non-descriptive or ambiguous.
For example, in the Environment Variables table a header is required, since that content of each column is not clear:

<format color="Green" style="bold">Correct</format>

![](header-needed-correct.png){width=350}

<format color="Red" style="bold">Incorrect</format>

![](header-needed-incorrect.png){width=350}

Do **not** use a header if all columns in a table have self-descriptive content, for example, names, dates, color previews, etc. For example, a header in File History is redundant:

<format color="Green" style="bold">Correct</format>

![](table_history.png){width=488}

<format color="Red" style="bold">Incorrect</format>

![](history-header-redundant.png){width=488}

Labels in a header should be short and descriptive. Try to avoid headers which are too long for the content in the rows below. [How to write texts](writing_short.md).

Use nouns and noun phrases.

Use title-case capitalization.

Freeze a headers when scrolling the table. A header provides useful context and should not be hidden.

Align header with the content in the column below:

![](fileColorsAlignment.png){width=350}

### Placeholder

A table placeholder is shown when there is no data yet. Always put meaningful text here, do **not** write "Nothing to show".

![](empty-incorrect.png){width=226}

It is better to add a reason why a table is empty, and an action link to fill it:

![](empty-correct.png){width=226}

See more on empty tables [here](empty_state.md).

### Toolbar

Add a toolbar to provide actions which help manipulate data in the table (add, remove, import, etc.):

![](too-long-line.png){width=370}

Use the [`ToolbarDecorator`](%gh-ic%/platform/platform-api/src/com/intellij/ui/ToolbarDecorator.java) class to implement such a toolbar. See more on toolbars [here](toolbar.md).

### Zebra striping and inner borders

Zebra striping is alternate highlighting of lines or rows in data tables or forms.

Use stripes if you want to help users distinguish between different data sets. For example, the current branch is highlighted differently from other branches:

![](history-zebra.png){width=488}

Do **not** use stripes In a simple data set as guides to track content between columns. Alternating backgrounds create two distinct layers of focus while the type of data in different rows is the same.

<format color="Red" style="bold">Incorrect</format>

![](table-zebra-incorrect.png){width=448}

Default line height, [proper column width](table.md#sizes-and-placement) and highlighting rows on mouse hover should provide enough guidance to track content.
For example, look at the same table without stripes, with bigger line height and adjusted column width:

<format color="Green" style="bold">Correct</format>

![](table_table.png){width=448}

Bigger distance between groups of related information can also help in tracking content. Line height between groups should be increased by 4px for each group level.

For example, look at the File History table grouped by commit, author, and date:

![](history-grouped.png){width=488}

Do **not** add borders between rows or columns, they add unnecessary noise to the table:

<format color="Red" style="bold">Incorrect</format>

![](inner-borders-incorrect.png){width=493}

<format color="Green" style="bold">Correct</format>

![](inner-borders.png){width=493}

### Interaction

Highlight the hovered row to assist in tracking content across columns:

![](table_hover.png){width=448}

Change the background to active selection color for the selected row when the table is focused:

![](selection-active.png){width=448}

and to inactive selection when the focus is on another element:

![](selection-inactive.png){width=448}

Do **not** leave the active selection color in the table when the focus switches to some other element.
It is otherwise confusing which element is currently active.

Columns in tables should be resizable to allow users to set a comfortable column width.
Change the mouse cursor to "Horizontal Resize" when hovering the rectangular area between columns.
This area is defined by table height and by 2px padding around the columns’ divider.
This makes it clear that columns can be resized even in a table without a header:

![](resize.png){width=448}

Double click when the "Horizontal Resize" cursor is activated, should auto resize the column to fit the content.

If column sorting is available, display the sorting state in the column header.
If the user clicks on a column that is already sorted, reverse the sorting order and rotate the sorting icon:

![](sorting.png){width=350}

Add sorting to a table if the default sorting by one column may be insufficient to scan the data set.
For example, in the table above, it is useful to be able to sort both by path and encoding to quickly find all paths with a specific encoding,
or to find a specific path in the sorted list.

If columns can be reordered, change the cursor to "Hand" when hovering the table header, and allow changing their order by dragging the table header.

In tables without a header show the drag icon on top of the column when hovering it:

![](history-drag.png){width=488}

Change the cursor to "Hand" on the icon hover:

![](history-drag-cursor.png){width=488}

Allow dragging a column when the cursor is placed anyplace over this column.
This makes it clear that columns can be dragged even if there is no table header.

In disabled table greyed-out text, disable controls and any interaction:

![](table_disabled.png){width=448}

### Editing values

If data in a cell is editable or configurable:

Allow in-place editing of content for text data. It should be possible to activate editing on mouse click:

![](inline-edit.png){width=448}

The line with the edited cell should be selected.
The edited cell should have borders, and their color should be the same as the color for [Input field](input_field.md) borders.

Allow in-place editing for paths and add the Browse button to the cell:

![](inline-edit-path.png){width=448}

Show a separate dialog for non-text data, for example, a color chooser for colors.

Do **not** show a separate dialog for editing simple data rows without a compound preview (an example of a compound preview can be found in <ui-path>Settings | Editor | Language Injections</ui-path>).
For example, there is no need for a separate dialog in the <ui-path>Settings | Appearance & Behavior | Path Variables</ui-path> table, as all editing could be done in place.

If it’s possible to enumerate less than 15 most likely or valid variants, show a combobox-like configurable with a down-arrow icon and a popup on click:

![](combo.png){width=115}

Show the combo icon only on hover or when the corresponding line is selected. A lot of arrows in one column form their own information layers and attract too much attention.

If there are more than 15 variants, show a completion popup.

Do **not** use a full-size combobox inside tables. It looks inconsistent and has too many details for a table; a simple dropdown icon with the variants popup is enough.

<format color="Red" style="bold">Incorrect</format>

![](combo-incorrect.png){width=115}

## Sizes and placement

### Sizes

Choose a column width appropriate for the most common values, but no less than **65px**. Too wide columns make it hard to read data.

<format color="Green" style="bold">Correct</format>

![](fileColors.png){width=350}

<format color="Red" style="bold">Incorrect</format>

![](fileColorsTooWide.png){width=592}

The minimum table width is **350px**. If a table is too narrow after you have adjusted column widths, add space to the rightmost column.

Add space to the rightmost column if you need to align it with other tables in the same window.

If content doesn't fit a cell's width, cut the text by the right border:

![](too-long-line.png){width=370}

Do **not** put ellipsis at the end of a cropped line, as it can be confused with the content.
Also, ellipsis can form a separate redundant column when content in the majority of cells in one column doesn't fit its width.

Do **not** add a fade-away gradient for cropped text, as it adds too many shades to a table text, and they attract too much attention.

### Placement

Do **not** put vertical elements (for example, diagrams) in the middle of a table, as they prevent users from scanning data easily:

<format color="Red" style="bold">Incorrect</format>

![](history-graph-incorrect.png){width=488}

Place them closer to the sides instead:

<format color="Green" style="bold">Correct</format>

![](table_history.png){width=488}

Right-align numbers when it is useful to compare them by their length. Left-align all the other content.

![](rightAlignNumbers.png){width=350}

For aligning in a dialog with other controls, see [Layout](layout.md).

<!--
### Sizes

<table>
<col width="176.25 px">
  <tr>
    <td>
        <p style="color: #999999; margin-left: 20px;">Column width (not including scrollbar)</p>
    </td>
    <td>
        min 65
    </td>
  </tr>
  <tr>
    <td>
        <p style="color: #999999; margin-left: 20px;">Table width</p>
    </td>
    <td>
        min 350
    </td>
  </tr>
  <tr>
    <td>
        <p style="color: #999999; margin-left: 20px;">Row height</p>
    </td>
    <td>
        font size * 1,8
        (default: 22)
    </td>
  </tr>
  <tr>
    <td>
        <p style="color: #999999; margin-left: 20px;">Header height</p>
    </td>
    <td>
        font size * 2,1
        (default: 25)
    </td>
  </tr>
</table>

### Spacing

<table>
<col width="159 px">
  <tr>
    <td>
        <p style="margin-left: 20px; margin-top: 30px"><span style="color: #999999">Label</span></p>
    </td>
    <td>
        <p style="margin-left:20px">          <img src="bytecode-version-mes.png" style="margin-bottom: 9px; margin-left: 40px;" /></p>
    </td>
  </tr>
  <tr>
    <td>
        <p style="margin-left: 20px; margin-top: 30px"><span style="color: #999999">Column content</span></p>
    </td>
    <td>
        <p style="margin-left:20px">          <img src="columnMes.png" style="margin-bottom: 9px; margin-left: 40px;" /></p>
    </td>
  </tr>
  <tr>
    <td>
        <p style="margin-left: 20px; margin-top: 30px"><span style="color: #999999">Combo icon</span></p>
    </td>
    <td>
        <p style="margin-left:20px">          <img src="combo-mes.png" style="margin-bottom: 9px; margin-left: 40px;" /></p>
    </td>
  </tr>
  <tr>
    <td>
        <p style="margin-left: 20px; margin-top: 30px"><span style="color: #999999">Sorted column</span></p>
    </td>
    <td>
        <p style="margin-left:20px">          <img src="sorted-mes.png" style="margin-bottom: 9px; margin-left: 40px;" /></p>
    </td>
  </tr>
</table>
-->

## Style

| IntelliJ | ![](table_intellij.png){width=350} |
|----------|------------------------------------|
| Darcula  | ![](table_darcula.png){width=350}  |

{style=none}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Tabs

<link-summary>UI guidelines on using tabs.</link-summary>

<tldr>

**Implementation:** [`JBTabbedPane`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/JBTabbedPane.java)

</tldr>

Tabs organize content in dialogs by grouping similar UI controls.

![](01_tabs_example.png){width=322}

In code editors, tabs are created with another component — [`JBEditorTabs`](%gh-ic%/platform/platform-api/src/com/intellij/ui/tabs/impl/JBEditorTabs.kt). It supports extended functionality like icons, closeable, and draggable tabs. Do **not** use this component in dialogs.

In tool windows, tabs are generated automatically. See also [Tool window](tool_window.md).

## When to use

Follow the rules in [Groups of controls](groups_of_controls.md).

## How to use

Use title capitalization for tab labels.

Make the label short, preferably no more than 3 words.
Avoid generic words, such as "General" or "Advanced".
See [Writing short and clear](writing_short.md).

![](02_naming.png){width=284}

Place the most frequently used content in the first tab.
Tabs that do not fit allotted screen space automatically hide under the dropdown component.
(It is better to add no more than 8 tabs, but this number is not limited.)

![](03_hidden_tabs.png){width=533}

Always place tabs on top. It is possible to place them at other sides of the content — bottom, left, or right — but such a placement is extremely rare and might confuse users.

Do not remove or disable a tab when its function is unavailable. Explain why a tab’s content is unavailable in the body of the tab.

## Placement

Make sure the border of the tab reaches the edges of the area tabs occupy.

<format color="Red" style="bold">Incorrect</format>

![](04_layout_border_incorrect.png){width=595}

<format color="Green" style="bold">Correct</format>

![](04_layout_border_correct.png){width=595}

Do **not** surround the tab content area with a visible border.

<format color="Red" style="bold">Incorrect</format>

![](05_bordered.png){width=595}

Avoid placing independent content groups under the tabs' area.

<format color="Red" style="bold">Incorrect</format>

![](06_layout_content_under.png){width=595}

When there are other UI controls above tabs, separate them with a vertical indent.

![](07_inset.png){width=595}

<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Test Project and Testdata Directories

<link-summary>Adding test data to test projects used during tests execution.</link-summary>

<include from="tests_and_fixtures.md" element-id="testFrameworkDependencies"/>

The test fixture creates a *test project* environment.
Unless you customize the project creation, the test project will have one module with one source root called <path>src</path>.
The test project files exist either in a temporary directory or in an in-memory file system, depending on which implementation of [`TempDirTestFixture`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/fixtures/TempDirTestFixture.java) is used.

[`BasePlatformTestCase`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/fixtures/BasePlatformTestCase.java) (renamed from `LightPlatformCodeInsightFixtureTestCase` in 2019.2) uses an in-memory implementation; if you set up the test environment by calling `IdeaTestFixtureFactory.createCodeInsightFixture()`, you can specify the implementation to use.

> If your tests use the in-memory implementation, and you abort the execution of your tests, the persisted filesystem caches may get out of sync with the in-memory structures, and you may get spurious errors in your tests.
> If you get an unexpected error after a series of successful runs, **try rerunning the test**, and if that doesn't help, **delete the "system" subdirectory** in your [sandbox directory](ide_development_instance.md#the-development-instance-sandbox-directory).
>
{style="warning"}

## Testdata Files

In your plugin, you usually store the test data for your tests (such as files on which plugin features will be executed and expected output files) in the <path>testdata</path> directory.
This is just a directory under your plugin's content root, but not under a source root.
Files in <path>testdata</path> usually are not valid source code and must not be compiled.

To specify the location of <path>testdata</path>, you must override the `getTestDataPath()` method.
The default implementation assumes running as part of the IntelliJ Platform source tree and is not appropriate for third-party plugins.

> A widespread pattern in IntelliJ Platform tests is to use the test method's name being executed as the base for building the <path>testdata</path> file paths.
> This allows us to reuse most of the code between different test methods that test various aspects of the same feature, and this approach is also recommended for third-party plugin tests.
> The name of the test method can be retrieved using `UsefulTestCase.getTestName()`.
>
{style="note"}

> If your plugin builds on top of Java support, please see [](testing_faq.md#how-to-test-a-jvm-language) to set up your test environment to obtain the required _Mock JDK_ automatically.
>
{style="note"}

To copy files or directories from your <path>testdata</path> directory to the test project directory, you can use the `copyFileToProject()` and `copyDirectoryToProject()` methods from [`CodeInsightTestFixture`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/fixtures/CodeInsightTestFixture.java).

Most operations in plugin tests require a file open in the in-memory editor, in which highlighting, completion, and other operations will be performed.
The in-memory editor instance is returned by `CodeInsightTestFixture.getEditor()`.
To copy a file from the <path>testdata</path> directory to the test project directory and immediately open it in the editor, you can use the `CodeInsightTestFixture.configureByFile()` or `configureByFiles()` methods.
The latter copies multiple files to the test project directory and opens the *first* of them in the in-memory editor.

Alternatively, you can use one of the other methods, which take parameters annotated with [`@TestDataFile`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/TestDataFile.java).
These methods copy the specified files from the <path>testdata</path> directory to the test project directory, open the first of the specified files in the in-memory editor, and then perform the requested operation such as highlighting or code completion.

> The IDE supports smart navigation between test code and related test data file(s); see this [blog post](https://blog.jetbrains.com/platform/2017/10/improvements-in-testing-intellij-platform-plugins/) for more details.
>

### Special Markup

When a file is opened in the in-memory editor, special markup in the file content can specify the caret position or selection.

You can use one of the following markers:
* `<caret>` specifies the position where the caret should be placed.
* `<selection>` and `</selection>` specify the start and end of the selected text range.
* `<block>` and `</block>` specify the column selection's start and end points.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Testing FAQ

<link-summary>Common questions and issues for testing plugins.</link-summary>

This page lists a number of common questions/issues and techniques useful for testing plugins.

<include from="testing_plugins.md" element-id="testSamples"/>

## Useful Classes

- [`UsefulTestCase`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/UsefulTestCase.java)
- [`PlatformTestUtil`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/PlatformTestUtil.java)
- [`CodeInsightTestUtil`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/fixtures/CodeInsightTestUtil.java)
- [`EditorTestUtil`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/EditorTestUtil.java)
- [`PsiTestUtil`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/PsiTestUtil.java)
- [`VfsTestUtil`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/VfsTestUtil.java)
- [`IoTestUtil`](%gh-ic%/platform/testFramework/src/com/intellij/openapi/util/io/IoTestUtil.java)
- [`IndexingTestUtil`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/IndexingTestUtil.kt)
- [`LeakHunter`](%gh-ic%/platform/testFramework/common/src/LeakHunter.java)

### UI

See [](testing_plugins.md#ui-tests) for UI integration tests.

- [`ProjectViewTestUtil`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/ProjectViewTestUtil.java)
- [`TestLookupElementPresentation`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/fixtures/TestLookupElementPresentation.java)
- [`IconTestUtil`](%gh-ic%/platform/testFramework/src/com/intellij/ui/IconTestUtil.java)
- [`TreeTestUtil`](%gh-ic%/platform/testFramework/src/com/intellij/ui/tree/TreeTestUtil.java)
- [`EdtTestUtil`](%gh-ic%/platform/testFramework/common/src/EdtTestUtil.java)

## Issues

### Unresolved test-framework dependencies
<primary-label ref="2024.2"/>

<include from="tests_and_fixtures.md" element-id="testFrameworkDependencies"/>

### "No Tests Found" targeting 2021.3+
<primary-label ref="2021.3"/>

Please see [notes](api_changes_list_2021.md#20213).

### How to avoid flaky tests?

Always call `super.tearDown()` inside `finally {..}` block of your test class to avoid leaks and side effects from previously run (failed) tests:

<tabs>
<tab title="Java" group-key="java">

```java
protected void tearDown() throws Exception {
  try {
    // test specific tear down calls
  } catch (Exception e) {
    addSuppressedException(e);
  } finally {
    super.tearDown();
  }
}
```
</tab>

<tab title="Kotlin" group-key="kotlin">

```kotlin
override fun tearDown() {
  try {
    // test specific tear down calls
  } catch (e: Throwable) {
    addSuppressedException(e)
  } finally {
    super.tearDown()
  }
}
```
</tab>
</tabs>

Avoid OS-specific assumptions (e.g., filesystem case-sensitivity, hardcoded separator instead of `java.io.File.separator`, default encoding, line endings).

Use _ordered_ collections or [`UsefulTestCase.assertUnorderedCollection()`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/UsefulTestCase.java).

Code deferring execution (e.g., via `Application.invokeLater()`) might not run during test execution (and possibly fails in production, too).
Use `Application.invokeLater(runnable, myProject.getDisposed())`.

When targeting 2024.2 or later, see also [](#how-to-handle-projectactivity).

### How to avoid test failure when using resources?

In some situations, added or changed files (e.g. XML DTDs provided by a plugin) are not refreshed in [](virtual_file_system.md).
In such cases, simply delete <path>test-system/caches</path> in your [sandbox directory](ide_development_instance.md#the-development-instance-sandbox-directory) and try again.

### How to enable DEBUG/TRACE logging?

Provide JVM system properties `idea.log.debug.categories` or `idea.log.trace.categories` to specify logger category name, respectively.
Multiple categories can be set using a comma separated value list.

**Sample** Set DEBUG level for categories `com.my.plugin.ui` and `com.my.plugin.backend`:

<tabs group="gradle">
<tab title="Kotlin" group-key="kotlin">

```kotlin
tasks {
  test {
    systemProperty("idea.log.debug.categories", "com.my.plugin.ui,com.my.plugin.backend")
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
test {
  systemProperty("idea.log.debug.categories", "com.my.plugin.ui,com.my.plugin.backend")
}
```

</tab>
</tabs>

### How to get separate logs for failing tests?
<primary-label ref="2021.3"/>

Set system property `idea.split.test.logs` to `true` to generate separate test log files in <path>splitTestLogs</path> subdirectory for failing tests (WARN/ERROR level messages).

## Techniques

### How to mark test-only elements in production code?

Annotate with [`@TestOnly`](%gh-java-annotations%/common/src/main/java/org/jetbrains/annotations/TestOnly.java), usages will be highlighted via inspection <control>JVM languages | Test-only usage in production code</control>.

To mark members whose visibility is higher than necessary to be used from tests, use [`@VisibleForTesting`](%gh-java-annotations%/common/src/main/java/org/jetbrains/annotations/VisibleForTesting.java)

### How to run tests for all files in a directory?

Use [`FileBasedTestCaseHelper`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/FileBasedTestCaseHelper.java), please see its Javadoc for instructions.

### How to modify setup on a per-test basis?

Use `UsefulTestCase.getTestName()` or create your own annotation(s) which can be checked via `UsefulTestCase.annotatedWith()`.

### How to run a performance test?

Use [`PlatformTestUtil.startPerformanceTest()`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/PlatformTestUtil.java) to assert machine-adjusted metrics.

### How to dispatch pending UI events?

Use [`PlatformTestUtil.dispatchAllInvocationEventsInIdeEventQueue()`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/PlatformTestUtil.java).

### How to disable stderr logging?

Use [`DefaultLogger.disableStderrDumping()`](%gh-ic%/platform/util/src/com/intellij/openapi/diagnostic/DefaultLogger.java) passing `getTestRootDisposable()`.

### How to register a resource (DTD, XSD) temporarily?

Use [`ExternalResourceManagerExImpl.registerResourceTemporarily()`](%gh-ic%/xml/xml-psi-impl/src/com/intellij/javaee/ExternalResourceManagerExImpl.kt) passing `getTestRootDisposable()`.

### How to replace component/service in tests?

Provide dedicated test implementation via `testServiceImplementation` in [service declaration](plugin_services.md#declaring-a-service), or use [`ServiceContainerUtil`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/ServiceContainerUtil.kt).

### How to replace extension points in tests?

Use [`ExtensionTestUtil`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/ExtensionTestUtil.kt).

### How to wait for a specified amount of time?

If possible, use [](#how-to-wait-for-condition-with-timeout) approach. Otherwise, call `com.intellij.util.TimeoutUtil.sleep()`.

### How to wait for condition with timeout?

Use [`WaitFor`](%gh-ic%/platform/util/src/com/intellij/util/WaitFor.java).

### How to test a JVM language?
<primary-label ref="IntelliJIDEA"/>

Plugins supporting a JVM language may require JDK and language standard library to be set up in a test project, so that classes like `java.lang.String` can be correctly resolved during tests.
Tests extending [`LightJavaCodeInsightFixtureTestCase`](%gh-ic%/java/testFramework/src/com/intellij/testFramework/fixtures/LightJavaCodeInsightFixtureTestCase.java) use one of the mock JDKs distributed with the [IntelliJ Community project](https://github.com/JetBrains/intellij-community) sources (notice <path>java/mockJDK-\$JAVA_VERSION\$</path> directories).
These JAR files are not available in plugin project dependencies, so the IntelliJ Community sources must be checked out to the machine running the tests, and sources' location must be provided to the test framework.
It's done by setting the `idea.home.path` system property to the absolute path of the checked-out sources in the `test` task configuration:


<tabs group="gradle">
<tab title="Kotlin" group-key="kotlin">

```kotlin
test {
  systemProperty("idea.home.path", "/path/to/intellij-community-sources")
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
test {
  systemProperty "idea.home.path", "/path/to/intellij-community-sources"
}
```

</tab>
</tabs>


The default JDK version used by the test framework depends on the target platform version and is the latest supported version.
The easiest way to change the JDK version to a custom one is by overriding `LightJavaCodeInsightFixtureTestCase.getProjectDescriptor()` and using one of the predefined project descriptors in `LightJavaCodeInsightFixtureTestCase`.
If a project descriptor requires more customizations, its `getSdk()` method can use one of the [`IdeaTestUtil.getMockJdk*()`](%gh-ic%/java/testFramework/src/com/intellij/testFramework/IdeaTestUtil.java) methods.

Sometimes, testing a JVM language requires adding standard or other libraries to a test project.
If a required library is available in the Maven repository, use [`MavenDependencyUtil`](%gh-ic%/java/testFramework/src/com/intellij/testFramework/fixtures/MavenDependencyUtil.java), e.g.:

```java
MavenDependencyUtil.addFromMaven(model,
    "org.jetbrains.kotlin:kotlin-stdlib:1.6.10");
```

For [light tests](light_and_heavy_tests.md), use convenience method [`DefaultLightProjectDescriptor.withRepositoryLibrary()`](%gh-ic%/java/testFramework/src/com/intellij/testFramework/fixtures/DefaultLightProjectDescriptor.java)
and [`JavaModuleFixtureBuilder.addMavenLibrary()`](%gh-ic%/java/testFramework/src/com/intellij/testFramework/builders/JavaModuleFixtureBuilder.java) for [heavy tests](light_and_heavy_tests.md).

If a required library is an unpublished JAR file, use [`PsiTestUtil.addLibrary()`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/PsiTestUtil.java) or `addProjectLibrary()` method and the JAR file path, e.g.:

```java
PsiTestUtil.addLibrary(model,
    "internal-library", getTestDataPath(), "internal-library-2.0.jar");
```

### How to handle `ProjectActivity`?
<primary-label ref="2024.2"/>

[`ProjectActivity`](%gh-ic%/platform/core-api/src/com/intellij/openapi/startup/StartupActivity.kt) are no longer awaited on project open in tests.
If tests depend on some job done in `ProjectActivity` (e.g., automatic project re-import), implement a dedicated [event/listener](messaging_infrastructure.md) and wait for it explicitly.
As a workaround, use [`StartupActivityTestUtil.waitForProjectActivitiesToComplete()`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/StartupActivityTestUtil.kt).

### How to handle indexing?
<primary-label ref="2024.2"/>

Indexing is now run asynchronously in a background thread.
Use [`IndexingTestUtil.waitUntilIndexesAreReady()/suspendUntilIndexesAreReady()`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/IndexingTestUtil.kt)
to wait for fully populated indexes.

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Testing Highlighting

<link-summary>Testing highlighting the code highlighted with various APIs.</link-summary>

<include from="tests_and_fixtures.md" element-id="testFrameworkDependencies"/>

When writing plugin tests, a common task is testing various kinds of highlighting (inspections, annotators, parser error highlighting, etc.).
The IntelliJ Platform provides a dedicated utility and markup format for this task.

To test the highlighting for the file currently loaded into the in-memory editor, invoke [`CodeInsightTestFixture.checkHighlighting()`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/fixtures/CodeInsightTestFixture.java).
The parameters to the method specify which severities should be taken into account when comparing the results with the expected results: errors are always taken into account, whereas warnings, weak warnings, and infos are optional.
To ignore verifying additional highlighting, set parameter `ignoreExtraHighlighting` to `true`.

Alternatively, you can use `CodeInsightTestFixture.testHighlighting()`, which loads a [testdata file](test_project_and_testdata_directories.md) into the in-memory editor and highlights it as a single operation.

**Example:**
[Custom Language Support Tutorial: Testing Annotator](annotator_test.md)

### Inspections

If you need to test inspections, they must be enabled explicitly.
This is done by calling `CodeInsightTestFixture.enableInspections()` in the setup method of your test or directly in a test method, before the call to `CodeInsightTestFixture.checkHighlighting()`.

### Syntax Highlighting

To test syntax highlighting provided by [Lexer](implementing_lexer.md), use [`EditorTestUtil.testFileSyntaxHighlighting()`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/EditorTestUtil.java).

This method takes the tested file and the answer file describing expected highlighting information for each token.
The answer file format is as follows:
```
token_value
    EXPECTED_TEXT_ATTRIBUTE_KEY => FALLBACK_KEY
string␣value
    MY_TEXT_ATTRIBUTE_KEY => MY_FALLBACK_KEY => DEFAULT_STRING
```

It starts with token value, which is the actual token value from the tested file (space characters in token value are replaced with `␣`).
It is followed by indented list of text attribute keys, starting with the key defined for the given token, followed by fallback keys separated by ` => `.

Creating an answer file from scratch would be cumbersome process, so it is recommended to provide only the tested file and executing the test.
Test will fail and the expected answer file will be generated.
Review the generated file carefully, and provide fixes to the syntax highlighter and the answer file if needed.

## Expected Highlighting Results

The expected results of the highlighting are specified directly in the source file.
The platform supports an extensive XML-like markup language for this.
In its simplest form, the markup looks like this:

```xml
<warning descr="expected warning message">code to be highlighted</warning>
```

A more realistic example, embedded in Java test data to be highlighted:

```xml
public int <warning descr="The compareTo() method does not reference 'foo' which is referenced from equals(); inconsistency may result">compareTo</warning>(Simple other) {
  return 0;
}
```

### Severities
The tag name specifies the severity of the expected highlighting.
The following severities are supported:

* `<error>`
* `<warning>`
* `<weak_warning>`
* `<info>`
* `<inject>` for an [injected fragment](language_injection.md)
* `<symbolName>` for a marker that highlights an identifier according to its type
* any custom severity can be referenced by its name

### Optional Attributes

The tag can also have the following optional attributes.

**Message**
* `descr` expected message associated with the highlighter (if not specified, any text will match). If the message contains a quotation mark, it can be escaped by putting two backslash characters before it.
* `tooltip` expected tooltip message

**Visual**
* `textAttributesKey` expected [`TextAttributesKey`](%gh-ic%/platform/core-api/src/com/intellij/openapi/editor/colors/TextAttributesKey.java) referenced by its `externalName`
* `foregroundColor`, `backgroundColor`, `effectColor` expected colors for the highlighting
* `effectType` expected effect type for the highlighting (see [`EffectType`](%gh-ic%/platform/core-api/src/com/intellij/openapi/editor/markup/EffectType.java))
* `fontType` expected font style for the highlighting (`0` - normal, `1` - bold, `2` - italic, `3` - bold italic)

### Special Cases

*Nested* tags are supported:
```xml
<warning>warning_highlight<info>warning_and_info_highlight</info>warning_highlight</warning>
```

*Overlapping* tags (annotations) are currently **not supported** in the test framework (but displayed correctly in the editor, albeit this is not an officially supported scenario):
```xml
<warning>warning_highlight<info>warning-and_info_highlight</warning>info_highlight</info>
```

### Generating Test Data

To generate an expected highlighting result file for a test:

1. Make sure that Plugin DevKit plugin is installed and [internal mode is enabled](enabling_internal.md).
2. [Create a Scratch file](https://www.jetbrains.com/help/idea/scratches.html#create-scratch-file) for the tested language.
3. Write code causing tested highlighting.
4. Invoke the <ui-path>Tools | Internal Actions | DevKit | Toggle Expected Highlighting Markup</ui-path> action.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Testing Overview

<link-summary>Introduction to testing plugins.</link-summary>

Most of the tests in the IntelliJ Platform codebase are *model-level functional tests*.
What this means is the following:

* The tests run in a headless environment that uses real production implementations for most components, except for many UI components.
* The tests usually test a feature as a whole rather than individual functions that comprise its implementation.
* The tests do not test the Swing UI and work directly with the underlying model instead (see also [](#ui-tests)).
* Most tests take a source file or a set of source files as [input data](test_project_and_testdata_directories.md), execute a feature, and compare the output with expected results.
  Results can be specified as another set of source files, [special markup](testing_highlighting.md) in the input file, or directly in the test code.

The most significant benefit of this test approach is that tests are very stable and require very little maintenance once written, no matter how much the underlying implementation is refactored or rewritten.

In a product with 20+ years of a lifetime that has gone through many internal refactorings, we find that this benefit dramatically outweighs the downsides of slower test execution and more difficult debugging of failures compared to more isolated unit tests.

### Mocks

Another consequence of our testing approach is that we do not provide a recommended approach to mocking.
We have a few tests in our codebase that use JMock.
Still, in general, we find it difficult to mock all the interactions with IntelliJ Platform components that your plugin class will need to have.
We recommend working with real components instead.
See also [](testing_faq.md#how-to-replace-componentservice-in-tests) and [](testing_faq.md#how-to-replace-extension-points-in-tests).

### UI Tests

UI tests using the dedicated [intellij-ui-test-robot](https://github.com/JetBrains/intellij-ui-test-robot) library can be run via Gradle tasks:

<tabs>
<tab title="IntelliJ Platform Gradle Plugin (2.x)">

Use [`testIdeUi`](tools_intellij_platform_gradle_plugin_tasks.md#testIdeUi) task.

</tab>
<tab title="Gradle IntelliJ Plugin (1.x)">

Use [`runIdeForUiTests`](tools_gradle_intellij_plugin.md#tasks-runideforuitests) task.

</tab>
</tabs>

Do not use <path>platform/testGuiFramework</path>, as it is reserved for internal use.

<video src="https://www.youtube.com/watch?v=UJexzfG01Qo"/>

_The IntelliJ Platform integration testing framework, used internally for performance, functional, and UI tests, is now accessible to help streamline and enhance your plugin testing experience._

## Topics

<snippet id="testSamples">

> Check out [this step-by-step tutorial](writing_tests_for_plugins.md) teaching how to write and run automated tests for your custom language plugin.
> Also, code samples
> [comparing_string_references_inspection](%gh-sdk-samples-master%/comparing_string_references_inspection)
> and [conditional_operator_intention](%gh-sdk-samples-master%/conditional_operator_intention) demonstrate using tests.
>
{style="note"}

</snippet>

* [](tests_and_fixtures.md)
* [](light_and_heavy_tests.md)
* [](test_project_and_testdata_directories.md)
* [](writing_tests.md)
* [](testing_highlighting.md)
* [](testing_faq.md)

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Tests and Fixtures

<link-summary>Main approaches for implementing tests.</link-summary>

The IntelliJ Platform testing infrastructure is not tied to any specific test framework.
In fact, the IntelliJ IDEA Team uses [JUnit](https://junit.org), [TestNG](https://testng.org), and [Cucumber](https://cucumber.io/) for testing different parts of the project.
However, most of the tests are written using JUnit 3.

When writing your tests, you have the choice between using a standard base class to perform the test set up for you and using a fixture class, which lets you perform the setup manually and does not tie you to a specific test framework.

<snippet id="testFrameworkDependencies">

> All required [test-framework dependencies](tools_intellij_platform_gradle_plugin_dependencies_extension.md#testing) must be declared explicitly.
>
{title="Configuring Test Frameworks (2024.2+)"}

</snippet>

With the former approach, you can use classes such as [`BasePlatformTestCase`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/fixtures/BasePlatformTestCase.java) ([`LightPlatformCodeInsightFixtureTestCase`](%gh-ic-223%/platform/testFramework/src/com/intellij/testFramework/fixtures/LightPlatformCodeInsightFixtureTestCase.java) before 2019.2).

With the latter approach, you use the [`IdeaTestFixtureFactory`](%gh-ic%/platform/testFramework/src/com/intellij/testFramework/fixtures/IdeaTestFixtureFactory.java) class to create instances of fixtures for the test environment.
You need to call the fixture creation and setup methods from the test setup method used by your test framework.
# 1. Tests Prerequisites

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<link-summary>Setting up the test folders structure and mocking the project's SDK.</link-summary>

<snippet id="custom_language_testing_tutorial_header">

> This page is part of multistep [](writing_tests_for_plugins.md) tutorial.

</snippet>

This page discusses the steps to configure a plugin project for creating tests.

## Create a Folder for Tests

Open the plugin project and create a separate folder named <path>test</path> under the <path>src</path> directory.
Under <path>test</path>, create the <path>java</path> folder for test source code, and the folder <path>testData</path> for [test data files](test_project_and_testdata_directories.md) and reimport the Gradle project.

```plantuml
@startuml

skinparam TitleFontName JetBrains Sans
skinparam TitleFontStyle plain
skinparam TitleFontSize 16
skinparam DefaultTextAlignment left

title
  src
  |_ main
    |_ java
    |_ resources
  |_ test
    |_ java
    |_ testData
end title
@enduml
```

## Set the Run Configuration Parameters

Because some tests use Java files as test data, the tests need to mock up the project's SDK.
See the [](testing_faq.md#how-to-test-a-jvm-language) section for details.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Text Area

<link-summary>UI guidelines on using text areas.</link-summary>

<tldr>

**Implementation:** [`JBTextArea`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/JBTextArea.java)

</tldr>

A text area allows users to enter or edit multi-line text.

![](text_area_example.png){width=300}

## When to use

Use a text area if input is unconstrained and long, or if the newline character is a valid value. Example: commit message or code snippets.

Do **not** use a text area if:

* Input consists of several words. Use an [input field](input_field.md) instead.
* There is not enough space for a text area, or if input is normally short but can occasionally be long or multi-line. Use an [expandable input field](input_field.md#input-field-types) instead.
* Values are added one by one. Use a [table](table.md) instead.
* Text is read-only. Use a [description text](description_text.md) instead.

## How to use

### Label

Follow the rules for the [input field](input_field.md).

A label is required for all empty text areas.
If a text area is prefilled, and it’s clear from the context what data it contains, a label can be omitted.
For example, the following text area is used to preview file and code templates:

![](no_label.png){width=584}

*If a new file template is added and the text area is empty, the label is required.*

Do **not** put units on the right of the text area.

Do **not** use a [group header](group_header.md) instead of the text area label. The horizontal
line is redundant here. Use [context help](context_help.md) to explain the field behavior.

<format color="Red" style="bold">Incorrect</format>

![](label_incorrect.png){width=598}

<format color="Green" style="bold">Correct</format>

![](label_correct.png){width=598}

### Placeholder, prefilled values and field focus

Follow the rules for the input field: [placeholder](input_field.md#placeholder), [prefilled value](input_field.md#prefilled-value), [field focus](input_field.md#field-focus).

### History {id="history_1"}

If the previous user input should be saved, use <shortcut>⌥↑</shortcut> and <shortcut>⌥↓</shortcut> on macOS and <shortcut>Alt+Up/Down</shortcut>
on Windows and Linux to navigate through the history.
If history is available, add a note at the bottom of the input field:

![](text_area_history.png){width=400}

Save the current value, so that the user can return to it while navigating through the history.

### Validation

If the user types an invalid value, highlight the text area with red and show an error message in a tooltip. For more details, see [Validation errors](validation_errors.md).

![](text_area_error.png){width=306}

## Size and placement

Recommended sizes:

![](text_area_sizes.png){width=492}

This is the default size, it can be changed if the dialog is resized.
<br/>
**Height**. The minimum text area height is 3 lines ~55px, so the user understands that it’s multi-line. The maximum height is not limited and should be appropriate for the most common values.
<br/>
**Width**. The minimum text area width is 270px. It’s inconvenient to use a narrower field due to frequent line breaks. The maximum width is 80 symbols ~600px, otherwise, it’s hard to read the text.

Size the text area to display an integral number of lines of text:

| <format color="Red" style="bold">Incorrect</format> | <format color="Green" style="bold">Correct</format> |
|-----------------------------------------------------|-----------------------------------------------------|
| ![](text_area_size_2.png)                           | ![](text_area_size_3.png)                           |

Do **not** resize a text area on input. It will change the position of other controls and they can become hardly discoverable.

If the text is long and does not fit the text area, add [scrollbar](scrollbar.md).

For placement, follow the rules for the [input field](input_field.md).

## Style

Use the same colors as for the [input field](input_field.md).

Do **not** highlight a text area on selection, only if a validation error occurs.

### History

Background: dialog default theme color

Font: Windows, IntelliJ — default, macOS 2px smaller than default
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Text Selection

<link-summary>Providing additional text ranges used when a text selection is extended/shrank.</link-summary>

## Extending/Shrinking Text Selection

Implementing [`ExtendWordSelectionHandler`](%gh-ic%/platform/lang-api/src/com/intellij/codeInsight/editorActions/ExtendWordSelectionHandler.java) and registering it in `com.intellij.extendWordSelectionHandler` EP in your <path>[plugin.xml](plugin_configuration_file.md)</path> allows you to provide additional text ranges to be used when extending or shrinking a selection.
Return `true` from `canSelect(PsiElement)` for the PSI elements that you want to provide additional text-ranges for.
The IntelliJ Platform will call `select(PsiElement, CharSequence, int, Editor)` for these elements where you can compute additional text ranges and return them as `List<TextRange>`.

See also:

- [](surround_with.md)
- [](additional_minor_features.md)

### Overview

The two actions [Extend Selection and Shrink Selection](https://www.jetbrains.com/help/idea/working-with-source-code.html#editor_code_selection) in IntelliJ Platform IDEs let you adjust selected text based on the structure of the source code.
This makes it easy to select not only expressions, blocks, and function definitions, but also code like whole lines or tags in Javadoc comments.

When implementing a custom language, the IntelliJ Platform provides basic implementations of this EP, allowing you to select code based on your PSI structure and to select whole lines.
In many cases this is sufficient to provide a good user experience.
However, sometimes it's advantageous to provide additional regions that the user may wish to be able to select when extending or shrinking a selection.

This EP has two methods that need to be implemented:

1. `canSelect(PsiElement)` is called on each PSI element, starting from the element at the cursor and walking up each of its parents.
   Return `true` for a particular element to indicate that further text-ranges should be included for the PSI element.
2. `select(PsiElement, CharSequence, int, Editor)` returns the text-ranges within the PSI element of interest are calculated and returned.

### Example Use-Case

A possible use-case for custom language developers is a function call `f(a, b)` where the function call node has its two arguments as children.
If the cursor is located at argument `a`, extending the selection would first select argument `a` itself and in the next step grow to cover the whole function call.
However, you might want to select the list of all arguments as an intermediate step.
This can be achieved by implementing this EP in the following way:

1. Create a class that implements the `ExtendWordSelectionHandler` interface and register it in a `com.intellij.extendWordSelectionHandler` EP in your <path>plugin.xml</path>.
2. The `canSelect(PsiElement)` method should return `true` for the function call node.
   That indicates that `select(PsiElement, CharSequence, int, Editor)` will be called for the function-call node.
3. When the `select()` method is called, you can use the function call PSI element or the editor text to extract the text range that spans the arguments `a` and `b` and return it as `List<TextRange>` with one element.

### Further Insight and Debugging

Looking at other implementations can be an effective way to get a better understanding of how this EP works.
To get further insight into this EP, you may want to take a look at [`DocTagSelectioner`](%gh-ic%/java/java-frontback-impl/src/com/intellij/codeInsight/editorActions/wordSelection/DocTagSelectioner.java).
It provides the ability to select tag names like `@param` in Javadoc comments.
Additionally, the [IntelliJ Platform Explorer](https://jb.gg/ipe?extensions=com.intellij.extendWordSelectionHandler) provides a list of open-source plugins with implementations of the `com.intellij.extendWordSelectionHandler` EP.

There are also some important places in the IntelliJ Platform to add breakpoints during debugging.
When _Extend Selection_ is called by the user, it is handled by [`SelectWordHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/SelectWordHandler.java).
The majority of the work, however, is then done inside [`SelectWordUtil`](%gh-ic%/platform/lang-impl/src/com/intellij/codeInsight/editorActions/SelectWordUtil.java), where `processElement()` checks which implementations of this EP apply for the current PSI element.
If one of them returns `true` from its `canSelect()` method, the additional text ranges are extracted in the `askSelectioner()` function.
These places are good candidates to set breakpoints and investigate during debugging.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Theme Structure

<link-summary>Overview of a theme plugin project structure and the most important elements.</link-summary>

Themes are components within [IntelliJ Platform plugins](plugin_structure.topic).
The theme plugins should be stand-alone and not combined with other plugin functionality.

<include from="developing_themes.md" element-id="themeSamplePlugin"/>

Themes have several components:
* A required Theme description (JSON) file in the plugin project's <path>resources</path> folder.
* A required `themeProvider` declaration in the plugin's <path>[plugin.xml](plugin_configuration_file.md)</path> file, located in the plugin project's <path>META-INF</path> folder.
* An optional Editor Scheme description (XML) file derived from an exported IDE editor scheme.
  This file is located in the plugin project's <path>resources</path> folder.
* An optional background image file, located in the plugin project's <path>resources</path> folder.
* Optional icon image files, located in the plugin project's <path>resources</path> folder.

![Theme Components](theme_components.png)

## Theme Description File

The most important file in every theme project is the theme description file.
The content of the default file generated with the [Theme wizard](creating_theme_project.md) is a short set of key–value pairs:

```json
{
  "name": "theme_basics",
  "author": "",
  "dark": false,
  "editorScheme": "/theme_basics.xml",
  "ui": {
  }
}
```

* `name` key matches the first portion of the Theme description <path>\$THEME_NAME\$.theme.json</path> file name. The value of `name` is displayed in the [Theme](https://www.jetbrains.com/help/idea/settings-appearance.html) <control>Settings</control> dropdown when the theme's plugin is installed in the IDE.
* `author` - specifies the theme author (empty by default).
* `dark` - determines the base theme (_Light_ or _Darcula_) that is customized.
* `editorScheme` - specifies the editor scheme file that describes fonts and colors used in editors (see [](themes_extras.md#adding-a-custom-editor-scheme) for more details).
* `ui` - allows for overriding the base theme (_Light_ or _Darcula_) properties (see [](themes_customize.md#custom-ui-control-colors) for more details).

The wizard also creates a `themeProvider` declaration in the [`<extensions>`](plugin_configuration_file.md#idea-plugin__extensions) section of the plugin's <path>plugin.xml</path> file.
This declaration binds the theme description file to a theme provider extension using a generated unique `id`.

```xml
<extensions defaultExtensionNs="com.intellij">
  <themeProvider
      id="eb9b7461-397b-4b98-a422-224fc0a74564"
      path="/theme_basics.theme.json"/>
</extensions>
```

> Do not modify or re-use an existing value of the generated `id` attribute.
>
{style="warning"}

## Theme Customization

The following sections describe the theme customization possibilities in detail:
* [](themes_customize.md#customizing-icons)
* [](themes_customize.md#customizing-ui-controls)
* [](themes_extras.md#adding-a-custom-editor-scheme)
* [](themes_extras.md#adding-a-custom-background-image)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Customizing Themes - Icons and UI Controls

<link-summary>Customizing UI controls and icons in a theme plugin.</link-summary>

<tldr>

**UI Guidelines:** [](icons_style.md), [](platform_theme_colors.md#ui-components)

</tldr>

A theme is customized by adding information to the theme description file that overrides the base (_Light_ or _Darcula_) theme.

For plugin developers, [Exposing Theme Metadata](themes_metadata.md) discusses the format of customization keys and information about how to provide it to Theme authors.

> [Color Highlighter Plugin](https://plugins.jetbrains.com/plugin/13309-color-highlighter) adds additional color preview inside the editor.
>

<include from="developing_themes.md" element-id="themeSamplePlugin"/>

## Introduction to Theme Description File Syntax

The syntax of a Theme description file follows the JSON open-standard file format of key-value pairs.
The minimum valid default file is the output of the [DevKit Theme Wizard](creating_theme_project.md).
Adding key-value pairs customizes a Theme.

Theme key-value pairs often use color as the `value`.
Colors are defined by six-digit RGB or eight-digit RGBA hexadecimal notation.

### Theme Reference Implementations

When learning new syntax, it is often useful to have some existing implementations for reference.
For example, refer to the [Theme description file](%gh-ic%/platform/platform-resources/src/themes/HighContrast.theme.json) for the IntelliJ IDEA _High Contrast_ Theme.
It may also help to review [themes available](https://plugins.jetbrains.com/search?headline=164-theme&tags=Theme) at the JetBrains Marketplace.

## Defining Named Colors

Colors can always be defined individually as six-digit RGB or eight-digit RGBA hexadecimal notation.
However, Theme definitions often use the same color in multiple places.
Maintaining a Theme is more manageable if _Named Colors_ are globally defined in a `colors {}` block as part of the <path>*.theme.json</path> file.
After that, the Named Color can be used instead of a hexadecimal description of the color.
For example, defining the Named Color `basicBackground` and then using it to set the background color of panels.
(Don't be concerned with the `"ui"` syntax in the example below; it will be discussed in [Custom UI Control Colors](#custom-ui-control-colors).)

```json
{
  "name": "theme_basics",
  "dark": false,
  "author": "IntelliJ Platform SDK",
  "editorScheme": "/Lightning.xml",

  "colors": {
    "basicBackground": "#E1E1E1"
  },
  "ui": {
    "Panel.background": "basicBackground"
  }
}
```

## Customizing Icons

Themes can customize the color of default IntelliJ Platform UI icons or substitute custom icons for the default ones.
Customization is done by adding an `"icons": {}` section to the Theme description file.

### Overriding the Global Color of Icons

Default global icon colors are customized by adding key-value pairs to a `"ColorPalette": {}` section.
The `ColorPalette` must be inserted in the `icons` section.

In the following example, the `key` - the default red color (`#DB5860`) used for `Action` icons in the _Light_ Theme - is overridden to the `value` of a different color (`#D61A26`):

```json
{
  "icons": {
    "ColorPalette": {
      "#DB5860": "#D61A26"
    }
  }
}
```

This color substitution is applied throughout the IDE UI.

### Custom Icon Palette Colors

Icon Palettes are predefined theme color keys that describe a single color in an `Actions` or `Objects` context.

#### Icon Colors in "Actions" and "Objects" Contexts

IntelliJ Platform has default icon colors defined for `Actions` and `Objects` contexts.
* `Actions` are Theme keys for icons that appear in the context of toolbars, and represent actions such as _Compile_, _Run_, or _Debug_.
* `Objects` are Theme keys for icons that appear in the contexts of lists and trees, and represent entities like files, symbols, or run and debug configurations.

The [UI Guideline for Icons](icons_style.md) defines the default hexadecimal RGB values of colors for `Actions` and `Objects` keys.
Note that this document refers to `Objects` keys as "Noun icons."

#### Customizing "Actions" and "Objects" Icon Colors

An icon Palette color is customized by adding an `Actions` or `Objects` `key` and custom color `value` to the `"ColorPalette": {}` section in a Theme description file.
The list of available icon `Actions` and `Objects` keys are provided by the editor's completion popup:

![Color Palette Popup](theme_colorpalette_popup.png){width="600"}

For example, the following key-value pair changes the color for all blue-colored icons on toolbars to the color `#5BC0DE`:

```json
{
  "icons": {
    "ColorPalette": {
      "Actions.Blue": "#5BC0DE"
    }
  }
}
```

This more specific change to the `Actions.Blue` color overrides the default definition.
In the narrower context of blue `Actions` icons, it will also supersede any global color overrides of the default blue icon color.

### Custom Icons

The default IntelliJ Platform UI icons can be replaced by custom icons.
The file format for icons is SVG.
The [UI Guideline for Icons](icons_style.md) has detailed specifications for icons.

An icon replacement is described within the `icon {}` section of a Theme description file.
Note that icon replacement key-value pairs appear outside the `ColorPalette` section.

For icon substitutions, the `key` is the path to the default icon image.
This path is derived from the `AllIcons.[Group].[IconName]` path in icon section reported by the [UI Inspector](internal_ui_inspector.md).

For example, the _Build_ (hammer) icon in the toolbar has the path `Allcons.Actions.Compile` as reported by the UI Inspector.
Therefore, the `key` for the _Build_ icon is `/actions/compile.svg`.
The `value` is the replacement icon's file name, located in the `resources` folder of the theme plugin project:

```json
{
  "icons": {
    "/actions/compile.svg": "/factory.svg"
  }
}
```

The color of a replaced icon takes precedence over any `ColorPalette` overrides.

> For generating the SVG icons suited for the IntelliJ-based IDEs, you may also use the third-party web tool: [IntelliJ Icon Generator](https://bjansen.github.io/intellij-icon-generator/).
>

## Customizing UI Controls

Themes can change the appearance of more general controls in the IntelliJ Platform UI.
Examples of these controls are labels, buttons, checkboxes, trees, lists, and menus.

See also [Platform theme colors](platform_theme_colors.md#ui-components) in UI Guidelines.

### Custom UI Control Colors

A UI control's custom color is specified by adding a key-value pair to the `"ui": {}` section of a Theme description file.

A UI control `key` has the compound format `element.property`, where:
* `element` is the type (label, checkbox, etc.) of the UI control.
* `property` is how the color is applied.
  Examples include `foreground`, `background`, and `errorForeground`.

Note that some UI control keys have more than two parts, for example, `Popup.Advertiser.foreground` or `ScrollBar.Mac.Transparent.thumbColor`.
The full key must be used to customize that specific button control.
However, for other purposes, the first section can be considered the `element`, and the last section considered the `property`.

Methods for finding UI control keys are in the [Finding Attribute Keys for UI Controls](#finding-attribute-keys-for-ui-controls) section.

#### Customizing All UI Control Colors with the Same Property

All UI Controls with the same `property` portion of their key can be set to the same color.
This customization is done using the wildcard `"*": {}` section in the Theme description file.
A key-value pair is inserted in this section, but only the `property` portion of the key is specified.
The `value` is the custom color.

The following example would change the default background color to `#AED7E3` for all UI controls:

```json
{
  "ui": {
    "*": {
      "background": "#AED7E3"
     }
  }
}
```

Note that the wildcard `"*": {}` section must be within the `"ui": {}` section.

#### Customizing the Color of Specific UI Control Types

The color of a specific UI control type is changed by adding a key-value pair to the `"ui": {}` section of a Theme description file.
The `key` is the full `element.property` format, and the `value` is the custom color.

The following example sets the background color for all labels to the color `#F6E9C9`.

```json
{
  "ui": {
    "*": {
      "background": "#AED7E3"
     },
    "Label.background": "#F6E9C9"
  }
}
```

The `Label.background` entry supersedes, in the narrower context of label backgrounds, any default color, and any wildcard color assigned to backgrounds.

#### Customizing the Color of UI Tabs

UI Tab colors are changed by [key-value pairs](#custom-ui-control-colors) in a Theme description file.

There are two implementations of tabs in the IntelliJ Platform:
* Editor Tabs, which represent open files in the [Editor window](https://www.jetbrains.com/help/idea/using-code-editor.html), and in [Tool Window bars](https://www.jetbrains.com/help/idea/tool-windows.html#bars_and_buttons).
* Tabbed Panes, which are used for the [Run/Debug Configurations dialog](https://www.jetbrains.com/help/idea/run-debug-configurations-dialog.html).

The control keys for UI Tabs were expanded from release 2019.1 to 2019.2 of the IntelliJ Platform.
The 2019.1 release control keys are compatible with release 2019.2 and later versions of the IntelliJ Platform.

| Release 2019.1 Element | Release 2019.2 Element | Description of Release 2019.2 Element                                                                                  |
|------------------------|------------------------|------------------------------------------------------------------------------------------------------------------------|
| N/A                    | `DefaultTabs`          | Applied to all tabs except `TabbedPane`, _unless_ overridden by a more specific Tab control element.                   |
| `EditorTabs`           | `EditorTabs`           | Applied only to Editor tabs. Overrides any `DefaultTab` settings. 192 has many more `property` settings than 191.      |
| `ToolWindow.HeaderTab` | `ToolWindow.HeaderTab` | Applied only to Tool Window tabs. Overrides any `DefaultTab` settings. 192 has many more `property` settings than 191. |
| `DebuggerTabs`         | `DefaultTabs`          | `DefaultTab` settings are used instead of `DebuggerTabs`, except for key `DebuggerTabs.underlineHeight`.               |
| `TabbedPane`           | `TabbedPane`           | Applied only to Tabbed Panes.                                                                                          |
| `Plugins.Tab`          | `TabbedPane`           | Use `TabbedPane` instead.                                                                                              |
| `SearchEverywhere.Tab` | `SearchEverywhere.Tab` | No change.                                                                                                             |

Methods for identifying UI control keys are in the [Finding Attribute Keys for UI Controls](#finding-attribute-keys-for-ui-controls) section.

For example, here is an excerpt from the IntelliJ Platform [High Contrast Theme](%gh-ic%/platform/platform-resources/src/themes/HighContrast.theme.json):
Note that a Theme file can mix versions of `property` identifiers:
* The first three `property` entries are recognized by release 2019.1 and ignored by subsequent releases because they are defined by new `property` identifiers.
* The `underlineColor` `property` is recognized by release 2019.1 and subsequent releases.
* The `underlineHeight` `property` was introduced in release 2019.2, and is ignored by previous releases.
* The `underlinedTabBackground` `property` was introduced in release 2019.2, replaces the 2019.1 `selectedBackground`, and is ignored by previous releases.
* The `inactiveColoredFileBackground` `property` was introduced in release 2019.2, replaces the 2019.1 `inactiveMaskColor`, and is ignored by previous releases.

```json
{
  "ui": {
    "EditorTabs": {
      "selectedForeground": "#FFFFFF",
      "selectedBackground": "#0e5d73",
      "inactiveMaskColor": "#000000FF",

      "underlineColor": "#1AEBFF",
      "underlineHeight": 4,

      "underlinedTabBackground": "#000000",
      "inactiveColoredFileBackground": "#00000000"
    }
  }
}
```

### Customizing the Borders of UI Controls

The color and geometry of borders used in UI controls can be customized by key-value pairs in a Theme description file.
The format of keys for borders is `element.property`, where:
* `element` is the type of UI control containing a border, such as a window or a popup menu.
* `property` is the desired border appearance, for example:
  * `border` is the border width (in pixels) specified as a top, left, bottom, and right widths.
  Border color is also (optionally) specified as hexadecimal RGB, e.g. `E6E6E6` with no `#` character.
  * `borderInsets` is the inset distance (in pixels) from the edge of the `element` to the border.
  It is specified as top, left, bottom, and right insets.

Methods for identifying UI control keys are in the [Finding Attribute Keys for UI Controls](#finding-attribute-keys-for-ui-controls) section.

#### Customizing the Border Appearance of Specific UI Controls
Adding a key-value pair to the `"ui": {}` section of a Theme description file customizes the appearance of borders for specific UI control types.

The following example sets a new border width and color for all windows:

```json
{
  "ui": {
    "Window.border" : "4,4,4,4,E6E6E6"
  }
}
```

In this example, the customized border supersedes the default definition and any global color override.

## Finding Attribute Keys for UI Controls

There are hundreds of UI control `element.property` keys defined in the IntelliJ Platform UI.
Some keys and strategies for applying them can be gleaned from the [theme reference implementations](#theme-reference-implementations).
For a general search, here some suggested methods for locating UI control keys.

### Finding a UI Control Key Using Code Completion in the Editor

The preferred method of finding UI control keys is to use the [Code Completion](https://www.jetbrains.com/help/idea/auto-completing-code.html#Auto-Completing_Code.xml) feature in the editor.
Note that some keys presented by the code completion feature may be deprecated.
New entries in the `"ui": {}` section will invoke the code completion popup, as shown below:

![UI Control Key Code Completion](uit_control_complete.png)

Beginning with version 2019.2 of the IntelliJ Platform, the editor has added features for Code Completion and [Quick Documentation](https://www.jetbrains.com/help/idea/viewing-reference-information.html#inline-quick-documentation) to show the release in which a UI control key began to be supported.
It appears as the <control>Since</control> attribute in editor popups.
In the Quick Documentation popup, the format is e.g., <control>Since: 2019.2</control>.
The Code Completion popup is similar, but the format is e.g., <control>[Since 2019.2]</control>.

### Finding a UI Control Key Using Laf Defaults UI

Using the [Laf Defaults](internal_ui_laf_defaults.md) inspector, enter the `element` portion of the key.
The Laf Defaults inspector will prompt with a list of UI Control keys and their default color.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Themes - Editor Schemes and Background Images

<link-summary>Customizing editor schemes and editor or application background images in a theme plugin.</link-summary>

Themes can also provide custom color and font settings, as well as custom images for display in the IDE application window.

<include from="developing_themes.md" element-id="themeSamplePlugin"/>

## Adding a Custom Editor Scheme

Users of IntelliJ Platform-based IDEs, such as IntelliJ IDEA, can set preferences to configure the colors and fonts used in the Editor.
These custom color and font settings are called _Editor Color Schemes_.

### Creating a Custom Editor Scheme Using Settings

Custom editor color schemes can be specified and exported using the IDE <ui-path>Settings</ui-path> dialog.
Note that editor [Colors and Fonts](https://www.jetbrains.com/help/idea/configuring-colors-and-fonts.html), and [Colors for Version Control File Status](https://www.jetbrains.com/help/idea/file-status-highlights.html) are customized in different sections of <ui-path>Settings</ui-path>.

Use the following procedure to customize an editor color scheme for a theme:
* Create the desired custom editor color scheme using the IDE preferences.
* Export the custom editor color scheme to the desired file name.
  In this example, the file is exported to <path>Lightning.icls</path>.
* Once exported, change the file extension from <path>\*.icls</path> to <path>\*.xml</path>.
  In this example, the result is <path>Lightning.xml</path>.
* See [Customizing Editor Scroll Bar Colors](#customizing-editor-scroll-bar-colors) to change the colors of editor scroll bars.

### Incorporating the Editor Color Scheme in the Custom Theme

The next step is to add the color scheme to the theme plugin project:
* Replace the default generated custom editor color scheme XML file (in this example, <path>theme_basics.xml</path>) in the project's <path>resources</path> folder with the exported custom editor color scheme.
  In this case, the action is to _replace_ <path>theme_basics.xml</path> with <path>Lightning.xml</path>.
* In the theme file (in this example <path>theme_basics.theme.json</path>), replace the name of the generated editor scheme file (<path>theme_basics.xml</path>) with the new (<path>Lightning.xml</path>) file name.
  The `key` is always "editorScheme".
  The `value` is the name of the editor color scheme file.

The example below adds an editor scheme named "Lightning" to the _Theme Basics_ custom theme:

```json
{
  "name": "Theme Basics",
  "dark": false,
  "author": "IntelliJ Platform SDK",
  "editorScheme": "/Lightning.xml",
  "ui": {
  }
}
```

### Editor Color Scheme XML Files

When an editor color scheme is exported as a file, the color options appear as `name`-`value` attributes of `option` elements.
The `name` is the aspect of the editor to be changed, and the `value` is the new color in six-digit RGB or eight-digit RGBA hexadecimal notation.
For example, the snippet below sets the color of the line numbers displayed in the editor:

```xml
<colors>
  <option name="LINE_NUMBERS_COLOR" value="999999"/>
</colors>
```

For additional examples of `name` and `value` attributes, review the editor color scheme XML file for the [High Contrast editor scheme](%gh-ic%/platform/platform-resources/src/themes/highContrastScheme.xml).

### Customizing Version Control File Status Colors

As [described above](#creating-a-custom-editor-scheme-using-settings), colors corresponding to the VCS status of files can be customized and exported via the [Settings](https://www.jetbrains.com/help/idea/file-status-highlights.html).
No other procedure is necessary to customize these colors.
In the exported color scheme file the `name` is the VCS file status, and the `value` is the new color corresponding to that status.
For example, customized VCS colors for a subset of file statuses will appear in the editor scheme file as:

```xml
<colors>
  <option name="FILESTATUS_ADDED" value="62cc47"/>
  <option name="FILESTATUS_COPIED" value="62cc47"/>
  <option name="FILESTATUS_DELETED" value="ed864a"/>
</colors>

```

For additional examples of `FILESTATUS` color `name` attributes, see the editor color scheme XML file for the [High Contrast editor scheme](%gh-ic%/platform/platform-resources/src/themes/highContrastScheme.xml).

### Customizing Editor Scroll Bar Colors

Editor scroll bar colors should be coordinated with, and switch together with an editor color scheme.
Please note that custom theme (<path>*.theme.json</path>) files also contain `ScrollBar.*` name attributes, but these are for scroll bars outside the context of the editor.

> The Editor Scroll Bar colors are the only editor scheme settings that cannot be customized and exported through IDE preferences.
>
{style="note"}

Customizing the editor scroll bar colors requires manually changing an editor color scheme XML file.
At this time there isn't code completion functionality for changing custom color editor scheme XML files, so the `name` attributes are described below.

#### Editor Scroll Bar Attribute Name Format

The typical format of a scroll bar `name` attribute is `ScrollBar.usage`, where `usage` describes where the color is to be applied.
In some cases `usage` itself can be compound such as `ScrollBar.Mac.Transparent.thumbColor`.
In these compound cases, the last portion of the compound `usage` still describes where the color is to be applied.

Note that the following example snippet uses an eight-digit hexadecimal color `value` to give `ScrollBar.Mac.thumbColor` transparency:

```xml
<color>
  <option name="ScrollBar.Mac.trackColor" value="000000"/>
  <option name="ScrollBar.Mac.thumbColor" value="FFFFFFBE"/>
</color>
```

#### Editor Scroll Bar Attribute Names

A list of scroll bar `name` attributes is in the [High Contrast editor scheme](%gh-ic%/platform/platform-resources/src/themes/highContrastScheme.xml) file.
These name attributes cannot be accessed from anywhere in the IDE UI at this time, so they must be manually added to an editor color scheme XML file.

The following list explains the `usage` format of the `name` attribute, i.e. where a custom scroll bar color is applied:
* `*.trackColor` - The scroll bar thumb moves across this area.
  At this time the vertical scrollbar track color and transparency cannot be customized.
* `*.thumbColor` - The movable rectangle that corresponds to the visible content's size.
* `*.thumbBorderColor` - The thumb border.
* `*.hoverTrackColor` - Same `usage` as above but for hover.
  At this time the vertical scrollbar hover track color and transparency cannot be customized.
* `*.hoverThumbColor` - Same `usage` as above but for hover.
* `*.hoverThumbBorderColor` - Same `usage` as above but for hover.

The `name` attribute patterns are enumerated below.

**Platform Independent Name Attributes**

The horizontal scroll bar background color is set by `ScrollBar.background`.
This background color is visible only if the horizontal scroll bar's `*.trackColor` has transparency.

At this time, the vertical scrollbar background color cannot be customized.

**Windows/Linux Name Attributes**

The `name` attributes for Windows and Linux scroll bars have the pattern `ScrollBar.Transparent.*`, where the wildcard portion corresponds to the `usage` definitions above.

**macOS Name Attributes**

The `name` attribute pattern for the vertical scroll bar is `ScrollBar.Mac.*`.

The `name` attribute pattern for the horizontal scroll bar depends on the macOS preferences _Show scroll bars_ setting:
* `ScrollBar.Mac.*` when the _Always_ setting is selected.
* `ScrollBar.Mac.Transparent.*` when the _When scrolling_ setting is selected.

The wildcard portion of these patterns corresponds to the `usage` definitions above.

## Adding a Custom Background Image

The IDE supports setting an image as a background in the application window.
Users can do this manually in [Settings](https://www.jetbrains.com/help/idea/setting-background-image.html).

Themes support specifying a background image as a key-value pair in the `"background": {}` (for editor and tools) and `"emptyFrameBackground": {}` (for empty frame) sections of a Theme description file:
* The `image` key uses the file name of the image as the value.
The background image is placed in the theme plugin project's <path>resources</path> folder.
* The `transparency` key uses a `value` of 1-100.
A `value` of 100 is opaque.
* The `fill` key uses a value of `scale`, meaning to expand the image to fill the space as the window gets resized.
* The `anchor` key uses a value of `center`, meaning to locate the center of the image in the center of the window.

The following example adds an image of the Austrian countryside to the _Theme Basics_ Theme description file:

```json
{
  "name": "Theme Basics",
  "dark": false,
  "author": "IntelliJ Platform SDK",
  "ui": {
  },
  "background": {
    "image": "/austria.png",
    "transparency": 10,
    "fill": "scale",
    "anchor": "center"
  },
  "emptyFrameBackground": {
    "image": "/austria.png",
    "transparency": 20,
    "fill": "scale",
    "anchor": "center"
  }
}
```

> The `emptyFrameBackground` property is available starting with the 2020.2 release.
>
{style="note"}
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Getting Started

<link-summary>Customizing IDE UI by developing a custom theme.</link-summary>

Beginning with the 2019.1 release, custom themes are supported.
Custom themes give designers control of the appearance of built-in UI elements.
The customization options include:

- substitute icons,
- change the colors of icons and UI controls,
- alter the borders and insets of UI controls,
- provide custom editor schemes,
- add background images.

The [themes available for download](https://plugins.jetbrains.com/search?headline=164-theme&tags=Theme) illustrate the creative possibilities.

> See the [Themes in IntelliJ-based IDEs](https://blog.jetbrains.com/platform/2021/10/themes-in-intellij-based-ides/) blog post for an overview (available in multiple languages).
>

## Theme Plugin Development

Themes can be developed by using either [IntelliJ IDEA Community Edition](https://www.jetbrains.com/idea/download/) or [IntelliJ IDEA Ultimate](https://www.jetbrains.com/idea/download/) as your IDE (it is highly recommended to use the latest available version).
Both include the complete set of development tools required to develop theme plugins.
To become more familiar with IntelliJ IDEA, please refer to the [IntelliJ IDEA Web Help](https://www.jetbrains.com/idea/help/).

A theme is one of the [plugin types](plugin_types.md#themes).
Its structure doesn't significantly differ from plugins extending IDE behavior, and can be implemented by using one of the supported approaches: _DevKit_ or _Gradle_.
The choice of the development approach depends on the project requirements and developer's experience.

### DevKit-Based Theme Project

Developing theme plugins with DevKit is the simplest solution and does not require experience with Gradle or similar build tools.
The DevKit project structure is generated by default when an IDE Plugin theme project is created by using the New Project Wizard.

See the [](developing_themes.md) section for the development instructions.

### Gradle-Based Theme Project

Developing theme plugins with Gradle requires experience with the Gradle or a similar build tool.
It offers the possibility of automating some parts of the development process, like patching <path>[plugin.xml](plugin_configuration_file.md)</path> file with the theme plugin version and other data, as well as building the plugin distribution on CI servers and publishing it to [JetBrains Marketplace](https://plugins.jetbrains.com).

If your project requires any of the mentioned capabilities, see [Developing a Plugin using Gradle](developing_plugins.md) for more details.

> The recording of _Busy Plugin Developer. Episode 3_ shows how to [create a new theme](https://youtu.be/9J0j-90dC60?t=582) using the Gradle approach.
>
{style="note"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Exposing Theme Metadata

<link-summary>Exposing plugin's UI components' customization keys allowing theme developers to change your components look.</link-summary>

All available UI Customization Keys that can be used in [Custom Themes](themes_customize.md) must be defined in a dedicated <path>*.themeMetadata.json</path> file which is registered via `com.intellij.themeMetadataProvider` extension point.

The following minimal sample demonstrates all details required when exposing UI customization keys of your plugin's UI.

<path>/resources/META-INF/plugin.xml</path>:

```xml
<idea-plugin>
  <extensions defaultExtensionNs="com.intellij">
    <themeMetadataProvider path="/META-INF/MyPlugin.themeMetadata.json"/>
  </extensions>
</idea-plugin>
```

<path>/resources/META-INF/MyPlugin.themeMetadata.json</path>:

```json
{
  "name": "My Plugin",
  "fixed": false,
  "ui": [
    {
      "key": "MyComponent.border",
      "description": "The border for my component. Not used anymore.",
      "deprecated": true,
      "source": "com.example.MyComponent"
    },
    {
      [more keys...]
    }
  ]
}
```

### Attributes

* `name` - Human-readable name, e.g., plugin name
* `fixed` - Specifies whether metadata describes external elements, e.g., an UI library. Default:&nbsp;`false`.
* `ui` - Root element listing all customization keys:
  * `key` - Customization key name (see [Key Naming Scheme](#key-naming-scheme))
  * `description` - Description to be shown to Theme authors editing <path>*.theme.json</path> files
  * `deprecated` - `true` when the key is deprecated. It is highly recommended to provide explanation and/or replacement in `description` if available.
  * `source` - Fully qualified name of the underlying UI component implementation, e.g.,&nbsp;`javax.swing.JPasswordField`
  * `since` - The release number when this UI customization key was exposed, e.g.,&nbsp;`2021.1`

    Note: The `since` attribute is supported starting with the 2019.2 release and it is not displayed in versions prior to 2019.2.

> It is highly recommended to always provide a `description` entry, so Theme authors can understand usages.
>

> Do not remove existing keys, but deprecate them instead to help Theme authors upgrade their existing themes.
>

Color keys can be used via [`JBColor.namedColor()`](%gh-ic%/platform/util/ui/src/com/intellij/ui/JBColor.java) providing defaults for Light and Dark theme:

```java
private static final JBColor SECTION_HEADER_FOREGROUND =
    JBColor.namedColor(
      "Plugins.SectionHeader.foreground",
      new JBColor(0x787878,0x999999)
    );
```

Other keys can be obtained via `javax.swing.UIManager#getXXX()` methods.

## Key Naming Scheme

All keys must follow this Naming Pattern:

**`Object[.SubObject].[state][Part]Property`**

![Key Naming Pattern](keys-naming.png){width="735"}

#### Property

| Word              | Use for                                                                                                                                                                                                                                                                        | Example                                                 |
|-------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
| **`foreground`**  | Text color.                                                                                                                                                                                                                                                                    | `Label.foreground`                                      |
| **`background`**  | Background color for objects with text.                                                                                                                                                                                                                                        | `Label.background`                                      |
| **`<part>Color`** | <p>Objects with a single color (do not have foreground/background). Do not use the word "Color" separately, always use with the "part" word. </p><p>_The word "Color" shows that this is a color property. Otherwise, it can be confused with a property of another type._</p> | <p>`Popup.borderColor`</p><p>`Group.separatorColor`</p> |

#### State

| Word                                                       | Use for                                                                                                                                                                | Example                                                                                 |
|------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------|
| ~~**`Active`**~~                                           | Enabled components, default state. Omit this word. The default state does not need explicit naming.                                                                    | `Notification.background`                                                               |
| **`Inactive`**                                             | Enabled components that might be perceived as interactive but are actually not. Example: a tree with visible selection but not in focus. Goes after other state words. | <p>`Tree.inactiveBackground`</p><p>`ToolWindow.HeaderTab.hoverInactiveBackground`</p>   |
| **`Focused`**                                              | The current focused component.                                                                                                                                         | `Button.focusedBorderColor`                                                             |
| **`Selected`**                                             | A selected tab or any other control that has equally meaningful selected and inactive states.                                                                          | `ToolWindow.HeaderTab.selectedBackground`                                               |
| <p>**`Hover`**</p><p>**`Pressed`**</p>                     | An action as indicated in states.                                                                                                                                      | <p>`Link.hoverForeground`</p><p>`Link.pressedForeground`</p>                            |
| <p>**`Error`**</p><p>**`Warning`**</p><p>**`Success`**</p> | Validation states. [See example](validation_errors.md) in UI Guidelines.                                                                                               | <p>`ValidationTooltip.errorBackground`</p><p>`ValidationTooltip.warningBorderColor`</p> |
| **`Disabled`**                                             | Unavailable components.                                                                                                                                                | `Label.disabledForeground`                                                              |

#### Part

A part is an internal element of a component, e.g., an arrow button in a combo box.
Create a separate key for a part if its properties differ from the parent object.

If a part is common among several components, use the same name for it.
Notable examples of common parts:

| Common parts                                  | Use for                                                                                                                                                                | Example                                                                                                                            |
|-----------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------|
| <p>**`Accelerator`**</p><p>**`Shortcut`**</p> | Shortcut foreground.                                                                                                                                                   | <p>`Menu.acceleratorForeground`</p><p>`Editor.shortcutForeground`</p>                                                              |
| **`Border`**                                  | A line around a component.                                                                                                                                             | `NavBar.borderColor`                                                                                                               |
| **`Caret`**                                   | The vertical line that denotes typing place.                                                                                                                           | `TextField.caretForeground`                                                                                                        |
| **`ModifiedItem`**                            | <p>An object that has been modified but not yet saved.</p><p>_Example: change anything in the Settings dialog, the setting group name in the tree becomes blue._</p>   | `Tree.modifiedItemForeground`                                                                                                      |
| **`Focus`**                                   | Wide focus border around a component.                                                                                                                                  | <p>`Component.focusColor`</p><p>_"Component" is a special key that sets common properties for several basic input components._</p> |
| **`Info`**                                    | Secondary labels with additional useful information. Usually appear in gray color to the right or below a regular label.                                               | `CompletionPopup.infoForeground`                                                                                                   |
| **`Icon`**                                    | An icon that is created with a source code (not an image file).                                                                                                        | `Table.sortIconColor`                                                                                                              |
| **`Selection`**                               | <p>The focus place in a component with selectable text. Can be in a typed text or in a list or tree.</p><p>Goes before other state words (for historical reasons).</p> | <p>`TextField.selectionForeground`</p><p>`Tree.selectionInactiveBackground`</p>                                                    |
| **`Separator`**                               | A horizontal or vertical line inside a component. Can be with a label.                                                                                                 | `Menu.separatorColor`                                                                                                              |
| **`Shadow`**                                  | A shadow below a component.                                                                                                                                            | `Button.shadowColor`                                                                                                               |

#### SubObject

Use a subobject when creating keys for one of the following:
* An implementation variation. Usually has a similar set of UI property keys as the parent object. Examples:
  * Default button: `Button.Default.background`
  * Tool window notification: `Notification.ToolWindow.errorBackground`
* An internal smaller component of a complex component with its own UI and behavior. Examples:
  * Tool window tab: `ToolWindow.HeaderTab.inactiveBackground`
  * The hint text at the bottom of a popup: `Popup.Advertiser.background`

#### Gradient Color

If a component has a gradient color, add the words "start" and "end" for the beginning and ending of a gradient. Examples:
* `Button.startBorderColor` / `Button.endBorderColor`
* `SearchMatch.startBackground` / `SearchMatch.endBackground`

#### Capitalization

Capitalize Object and SubObject. Use lowerCamelCase for property.

#### Do Not Use

| Do not use                                | Use instead   |
|-------------------------------------------|---------------|
| `Color` _as a separate word_              | `<Part>Color` |
| `Outline`                                 | `borderColor` |
| `Text`                                    | `Foreground`  |
| `darcula` _and other look-and-feel names_ | _Omit_        |

#### Swing Legacy

Some color keys are not named according to the rules above.
Such keys are inherited from Java Swing and cannot be renamed for compatibility reasons.
Do not use naming patterns from the legacy keys.

Examples of Swing keys:
* `activeCaption`  Correct: `WindowsDialogHeader.background`
* `Button.disabledText` Correct: `Button.disabledForeground`
* `TableHeader.background` Correct: `Table.Header.background`

## IntelliJ Platform Metadata

> This section is relevant for IntelliJ Platform developers only.
>
{style="note"}

Metadata is split up as follows:
* [`IntelliJPlatform.themeMetadata.json`](%gh-ic%/platform/platform-resources/src/themes/metadata/IntelliJPlatform.themeMetadata.json) - all keys from IntelliJ Platform and custom UI components
* [`JDK.themeMetadata.json`](%gh-ic%/platform/platform-resources/src/themes/metadata/JDK.themeMetadata.json) - all keys from Swing components

New keys should be added to <path>IntelliJPlatform.themeMetadata.json</path> only (or corresponding "local" <path>*.themeMetadata.json</path> file of the plugin if applicable).

Please make sure to add a `description` and use `since` and `deprecated` attributes explained in [Attributes](#attributes).
Respect [Key Naming Scheme](#key-naming-scheme) and keep alphabetical ordering of keys.
<!-- Copyright 2000-2025 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Threading Model

<!-- short link: https://jb.gg/ij-platform-threading -->

<link-summary>Threading rules for reading and writing to IntelliJ Platform data models, running and canceling background processes, and avoiding UI freezes.</link-summary>

> It is highly recommended that readers unfamiliar with Java threads go through the official [Java Concurrency](https://docs.oracle.com/javase/tutorial/essential/concurrency/index.html) tutorial before reading this section.

The IntelliJ Platform is a highly concurrent environment.
Code is executed in many threads simultaneously.
In general, as in a regular [Swing](https://docs.oracle.com/javase%2Ftutorial%2Fuiswing%2F%2F/index.html) application, threads can be categorized into two main groups:
- [Event Dispatch Thread](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html) (EDT) – also known as the UI thread.
  Its main purpose is handling UI events (such as reacting to clicking a button or updating the UI), but the platform uses it also for writing data.
  EDT executes events taken from the Event Queue.
  Operations performed on EDT must be as fast as possible to not block other events in the queue and freeze the UI.
- background threads (BGT) – used for performing long-running and costly operations, or background tasks.

There is only one EDT and multiple BGT in the running application:

```mermaid
---
displayMode: compact
---
gantt
    dateFormat X
    %% do not remove trailing space in axisFormat:
    axisFormat ‎
    section EDT
        UI task : 0, 1
        UI task : 1, 2
        write   : 3, 4
        UI task : 4, 5
        write   : 5, 6
        UI task : 7, 8
        UI task : 8, 9
        write   : 9, 10
    section BGT 1
        task : done, 0, 3
        task : done, 4, 6
        task : done, 7, 10
    section BGT 2
        task : done, 1, 2
        task : done, 3, 7
        task : done, 8, 10
    section ...
        ‎ : 0, 0
    section BGT N
        task : done, 0, 2
        task : done, 3, 6
        task : done, 7, 8
        task : done, 9, 10
```

It is possible to switch between BGT and EDT in both directions.
Operations can be scheduled to execute on EDT from BGT (and EDT) with `invokeLater()` methods (see the rest of this page for details).
Executing on BGT from EDT can be achieved with [background processes](background_processes.md).

> Plugins targeting versions 2024.1+ should use [coroutine dispatchers](coroutine_dispatchers.md) for switching between threads.
>
{style="warning"}

## Read-Write Lock

The IntelliJ Platform data structures (such as [Program Structure Interface](psi.md), [Virtual File System](virtual_file_system.md), or [Project root model](project_model.md)) aren't thread-safe.
Accessing them requires a synchronization mechanism ensuring that all threads see the data in a consistent and up-to-date state.
This is implemented with a single application-wide [read-write (RW) lock](https://w.wiki/7dBy) that must be acquired by threads requiring reading or writing to data models.

If a thread requires accessing a data model, it must acquire one of the locks:

<table>
    <tr>
        <td width="33%">Read Lock</td>
        <td width="33%">Write Intent Lock</td>
        <td width="33%">Write Lock</td>
    </tr>
    <tr>
        <td>Allows a thread for reading data.</td>
        <td>Allows a thread for reading data and potentially upgrade to the write lock.</td>
        <td>Allows a thread for reading and writing data.</td>
    </tr>
    <tr>
        <td>Can be acquired from any thread concurrently with other read locks and write intent lock.</td>
        <td>Can be acquired from any thread concurrently with read locks.</td>
        <td>Can be acquired only from EDT concurrently with a write intent lock acquired on EDT.</td>
    </tr>
    <tr>
        <td>Can't be acquired if write lock is held on another thread.</td>
        <td>Can't be acquired if another write intent lock or write lock is held on another thread.</td>
        <td>Can't be acquired if any other lock is held on another thread.</td>
    </tr>
</table>

> See the [reasons](#why-can-write-intent-lock-be-acquired-from-any-thread-but-write-lock-only-from-edt) for allowing to acquire write intent lock from any thread and the write lock only from EDT.

The following table shows compatibility between locks in a simplified form:

<table style="both">
    <tr>
        <td width="25%"></td>
        <td width="25%">Read Lock</td>
        <td width="25%">Write Intent Lock</td>
        <td width="25%">Write Lock</td>
    </tr>
    <tr>
        <td>Read Lock</td>
        <td><img src="green_checkmark.svg" alt="+"/></td>
        <td><img src="green_checkmark.svg" alt="+"/></td>
        <td><img src="red_cross.svg" alt="-"/></td>
    </tr>
    <tr>
        <td>Write Intent Lock</td>
        <td><img src="green_checkmark.svg" alt="+"/></td>
        <td><img src="red_cross.svg" alt="-"/></td>
        <td><img src="red_cross.svg" alt="-"/></td>
    </tr>
    <tr>
        <td>Write Lock</td>
        <td><img src="red_cross.svg" alt="-"/></td>
        <td><img src="red_cross.svg" alt="-"/></td>
        <td><img src="red_cross.svg" alt="-"/></td>
    </tr>
</table>

The described lock characteristics conclude the following:
- multiple threads can read data at the same time
- once a thread acquires the write lock, no other threads can read or write data

Acquiring and releasing locks explicitly in code would be verbose and error-prone and must never be done by plugins.
The IntelliJ Platform enables write intent lock implicitly on EDT (see [](#locks-and-edt) for details) and provides an [API for accessing data under read or write locks](#accessing-data).

### Locks and EDT

Although acquiring all types of locks can be, in theory, done from any threads, the platform implicitly acquires write intent lock and allows acquiring the write lock only on EDT.
It means that **writing data can be done only on EDT**.

> It is known that writing data only on EDT has negative consequences of potentially freezing the UI.
> There is an in-progress effort to [allow writing data from any thread](https://youtrack.jetbrains.com/issue/IJPL-53).
> See the [historical reason](#why-write-actions-are-currently-allowed-only-on-edt) for this behavior in the current platform versions.

The scope of implicitly acquiring the write intent lock on EDT differs depending on the platform version:

<tabs group="threading">

<tab title="2023.3+" group-key="newThreading">

Write intent lock is acquired automatically when operation is invoked on EDT with [`Application.invokeLater()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/Application.java).

</tab>

<tab title="Earlier versions" group-key="oldThreading">

Write intent lock is acquired automatically when operation is invoked on EDT with methods such as:
- [`Application.invokeLater()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/Application.java),
- [`SwingUtilities.invokeLater()`](https://docs.oracle.com/javase/8/docs/api/javax/swing/SwingUtilities.html#invokeLater-java.lang.Runnable-),
- [`UIUtil.invokeAndWaitIfNeeded()`](%gh-ic%/platform/util/ui/src/com/intellij/util/ui/UIUtil.java),
- [`EdtInvocationManager.invokeLaterIfNeeded()`](%gh-ic%/platform/util/src/com/intellij/util/ui/EdtInvocationManager.java),
- and other similar methods

It is recommended to use `Application.invokeLater()` if the operation is supposed to write data.
Use other methods for pure UI operations.

</tab>

</tabs>

## Accessing Data

The IntelliJ Platform provides a simple API for accessing data under read or write locks in a form of read and write actions.

Read and write actions allow executing a piece of code under a lock, automatically acquiring it before an action starts, and releasing it after the action is finished.

> Always try to wrap only the required operations into read/write actions, minimizing the time of holding locks.
> If the read operation itself is long, consider using one of [read action cancellability techniques](#read-action-cancellability) to avoid blocking the write lock and EDT.
>
{style="warning" title="Minimize Locking Scopes"}

### Read Actions

#### API
{#read-actions-api}

- [`ReadAction`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/ReadAction.java) `run()` or `compute()`:
  <tabs group="languages">
  <tab title="Kotlin" group-key="kotlin">

  ```kotlin
  val psiFile = ReadAction.compute<PsiFile, Throwable> {
    // read and return PsiFile
  }
  ```
  </tab>
  <tab title="Java" group-key="java">

  ```java
  PsiFile psiFile = ReadAction.compute(() -> {
    // read and return PsiFile
  });
  ```
  </tab>
  </tabs>

##### Alternative APIs
{#read-action-alternative-apis collapsible=true default-state=collapsed}

- [`Application.runReadAction()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/Application.java):
  <tabs group="languages">
  <tab title="Kotlin" group-key="kotlin">

  ```kotlin
  val psiFile = ApplicationManager.application.runReadAction {
    // read and return PsiFile
  }
  ```
  </tab>
  <tab title="Java" group-key="java">

  ```java
  PsiFile psiFile = ApplicationManager.getApplication()
      .runReadAction((Computable<PsiFile>)() -> {
        // read and return PsiFile
      });
  ```
  </tab>
  </tabs>
  Note that this API is considered low-level and should be avoided.

- Kotlin [`runReadAction()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/actions.kt):
  ```kotlin
  val psiFile = runReadAction {
    // read and return PsiFile
  }
  ```
  Note that this API is obsolete since 2024.1.
  Plugins implemented in Kotlin and targeting versions 2024.1+ should use suspending [`readAction()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/coroutines.kt).
  See also [](coroutine_read_actions.topic).

#### Rules
{#read-actions-rules}

<tabs group="threading">

<tab title="2023.3+" group-key="newThreading">

Reading data is allowed from any thread.

Reading data on EDT invoked with `Application.invokeLater()` doesn't require an explicit read action, as the write intent lock allowing to read data is [acquired implicitly](#locks-and-edt).

</tab>

<tab title="Earlier versions" group-key="oldThreading">

Reading data is allowed from any thread.

Reading data on EDT doesn't require an explicit read action, as the write intent lock allowing to read data is [acquired implicitly](#locks-and-edt).

</tab>

</tabs>

In all other cases, it is required to wrap read operation in a read action with one of the [API](#read-actions-api) methods.

##### Objects Validity

The read objects aren't guaranteed to survive between several consecutive read actions.
Whenever starting a read action, check if the PSI/VFS/project/module is still valid.
Example:
```kotlin
val virtualFile = runReadAction { // read action 1
  // read a virtual file
}
// do other time-consuming work...
val psiFile = runReadAction { // read action 2
  if (virtualFile.isValid()) { // check if the virtual file is valid
    PsiManager.getInstance(project).findFile(virtualFile)
  } else null
}
```

Between executing first and second read actions, another thread could invalidate the virtual file:

```mermaid
---
displayMode: compact
---
gantt
    dateFormat X
    %% do not remove trailing space in axisFormat:
    axisFormat ‎
    section Thread 1
        read action 1       : 0, 1
        time-consuming work : done, 1, 4
        read action 2       : 4, 5
    section Thread 2
        delete virtual file : crit, 2, 3
```

### Write Actions

#### API
{#write-actions-api}

- [`WriteAction`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/WriteAction.java) `run()` or `compute()`:
  <tabs group="languages">
  <tab title="Kotlin" group-key="kotlin">

  ```kotlin
  WriteAction.run<Throwable> {
    // write data
  }
  ```
  </tab>
  <tab title="Java" group-key="java">

  ```java
  WriteAction.run(() -> {
    // write data
  });
  ```
  </tab>
  </tabs>

##### Alternative APIs
{#write-action-alternative-apis collapsible=true default-state=collapsed}

- [`Application.runWriteAction()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/Application.java):
  <tabs group="languages">
  <tab title="Kotlin" group-key="kotlin">

  ```kotlin
  ApplicationManager.application.runWriteAction {
    // write data
  }
  ```
  </tab>
  <tab title="Java" group-key="java">

  ```java
  ApplicationManager.getApplication().runWriteAction(() -> {
    // write data
  });
  ```
  </tab>
  </tabs>
  Note that this API is considered low-level and should be avoided.

- Kotlin [`runWriteAction()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/actions.kt):
  ```kotlin
  runWriteAction {
    // write data
  }
  ```
  Note that this API is obsolete since 2024.1.
  Plugins implemented in Kotlin and targeting versions 2024.1+ should use suspending [`writeAction()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/coroutines.kt).

#### Rules
{#write-actions-rules}

<tabs group="threading">

<tab title="2023.3+" group-key="newThreading">

Writing data is only allowed on EDT invoked with `Application.invokeLater()`.

Write operations must always be wrapped in a write action with one of the [API](#write-actions-api) methods.

Modifying the model is only allowed from write-safe contexts (see [](#invoking-operations-on-edt-and-modality)).

</tab>

<tab title="Earlier versions" group-key="oldThreading">

Writing data is only allowed on EDT.

Write operations must always be wrapped in a write action with one of the [API](#write-actions-api) methods.

Modifying the model is only allowed from write-safe contexts, including user actions and `SwingUtilities.invokeLater()` calls from them (see [](#invoking-operations-on-edt-and-modality)).

Modifying PSI, VFS, or project model from inside UI renderers or `SwingUtilities.invokeLater()` calls is forbidden.

</tab>

</tabs>

> [Thread Access Info](https://plugins.jetbrains.com/plugin/16815-thread-access-info) plugin visualizes Read/Write Access and Thread information in the debugger.

## Invoking Operations on EDT and Modality

Operations that write data on EDT should be invoked with `Application.invokeLater()` because it allows specifying the _modality state_ ([`ModalityState`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/ModalityState.java)) for the scheduled operation.
This is not supported by `SwingUtilities.invokeLater()` and similar APIs.

> Note that `Application.invokeLater()` must be used to write data in versions 2023.3+.
>
{style="warning"}

`ModalityState` represents the stack of active modal dialogs and is used in calls to `Application.invokeLater()` to ensure the scheduled runnable can execute within the given modality state, meaning when the same set of modal dialogs or a subset is present.

To better understand what problem `ModalityState` solves, consider the following scenario:
1. A user action is started.
2. In the meantime, another operation is scheduled on EDT with `SwingUtilities.invokeLater()` (without modality state support).
3. The action from 1. now shows a dialog asking a <control>Yes</control>/<control>No</control> question.
4. While the dialog is shown, the operation from 2. is now processed and does changes to the data model, which invalidates PSI.
5. The user clicks <control>Yes</control> or <control>No</control> in the dialog, and it executes some code based on the answer.
6. Now, the code to be executed as the result of the user's answer has to deal with the changed data model it was not prepared for. For example, it was supposed to execute changes in the PSI that might be already invalid.

```mermaid
---
displayMode: compact
---
gantt
    dateFormat X
    %% do not remove trailing space in axisFormat:
    axisFormat ‎
    section EDT
        1. Start action         : 0, 2
        3. Show dialog          : 2, 3
        4. Modify data          : crit, active, 3, 4
        5. Answer dialog        : 4, 5
        6. Work on invalid data : crit, 5, 7
    section BGT
        2. invokeLater()        : crit, active, 1, 2
```

Passing the modality state solves this problem:
1. A user action is started.
2. In the meantime, another operation is scheduled on EDT with `Application.invokeLater()` (supporting modality state).
   The operation is scheduled with `ModalityState.defaultModalityState()` (see the table below for other helper methods).
3. The action from 1. now shows a dialog asking a <control>Yes</control>/<control>No</control> question.
   This adds a modal dialog to the modality state stack.
4. While the dialog is shown, the scheduled operation waits as it was scheduled with a "lower" modality state than the current state with an additional dialog.
5. The user clicks <control>Yes</control> or <control>No</control> in the dialog, and it executes some code based on the answer.
6. The code is executed on data in the same state as before the dialog was shown.
7. The operation from 1. is executed now without interfering with the user's action.

```mermaid
---
displayMode: compact
---
gantt
    dateFormat X
    %% do not remove trailing space in axisFormat:
    axisFormat ‎
    section EDT
        1. Start action          : 0, 2
        3. Show dialog           : 2, 3
        5. Answer dialog         : 3, 4
        6. Work on correct data  : 4, 6
        7. Modify data           : active, 6, 7
    section BGT
        2. invokeLater()         : active, 1, 2
        4. Wait for dialog close : done, 2, 4
```

The following table presents methods providing useful modality states to be passed to `Application.invokeLater()`:

| [`ModalityState`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/ModalityState.java) | Description                                                                                                                                                                                                                                                                                   |
|------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <p>`defaultModalityState()`</p><p>_Used if none specified_</p>                                       | <p>If invoked from EDT, it uses the `ModalityState.current()`.</p><p>If invoked from a background process started with `ProgressManager`, the operation can be executed in the same dialog that the process started.</p><p>**This is the optimal choice in most cases.**</p>                  |
| `current()`                                                                                          | The operation can be executed when the modality state stack doesn't grow since the operation was scheduled.                                                                                                                                                                                   |
| `stateForComponent()`                                                                                | The operation can be executed when the topmost shown dialog is the one that contains the specified component or is one of its parent dialogs.                                                                                                                                                 |
| <p>`nonModal()` or</p><p>`NON_MODAL`</p>                                                             | The operation will be executed after all modal dialogs are closed. If any of the open (unrelated) projects displays a per-project modal dialog, the operation will be performed after the dialog is closed.                                                                                   |
| `any()`                                                                                              | The operation will be executed as soon as possible regardless of modal dialogs (the same as with `SwingUtilities.invokeLater()`). It can be used for scheduling only pure UI operations. Modifying PSI, VFS, or project model is prohibited.<p>**Don't use it unless absolutely needed.**</p> |

> If EDT activity needs to access a [file-based index](indexing_and_psi_stubs.md) (for example, it is doing any project-wide PSI analysis, resolves references, or performs other tasks depending on indexes), use [`DumbService.smartInvokeLater()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/DumbService.kt).
> This API also supports `ModalityState` and runs the operation after all possible indexing processes have been completed.
>
{style="note"}

## Read Action Cancellability

BGT shouldn't hold read locks for a long time.
The reason is that if EDT needs a write action (for example, the user types something in the editor), it must be acquired as soon as possible.
Otherwise, the UI will freeze until all BGTs have released their read actions.
The following diagram presents this problem:

```mermaid
---
displayMode: compact
---
gantt
    dateFormat X
    %% do not remove trailing space in axisFormat:
    axisFormat ‎
    section BGT
        very long read action               : 0, 4
    section EDT
        write action (waiting for the lock) : done, 1, 4
        write action (executing)            : 4, 5
        UI freeze                           : crit, 1, 5
```

Sometimes, it is required to run a long read action, and it isn't possible to speed it up.
In such a case, the recommended approach is to cancel the read action whenever there is a write action about to occur and restart that read action later from scratch:

```mermaid
---
displayMode: compact
---
gantt
    dateFormat X
    %% do not remove trailing space in axisFormat:
    axisFormat ‎
    section BGT
        very long read action               : 0, 1
        very long read action (2nd attempt) : 2, 5
        RA canceled                         : milestone, crit, 0, 2
        RA restarted from scratch           : milestone, 2, 2
    section EDT
        write action : 1, 2
```

In this case, the EDT won't be blocked and the UI freeze is avoided.
The total execution time of the read action will be longer due to multiple attempts, but not affecting the UI responsiveness is more important.

The canceling approach is widely used in various areas of the IntelliJ Platform: editor highlighting, code completion, "go to class/file/…" actions all work like this.
Read the [](background_processes.md) section for more details.

### Cancellable Read Actions API

> Plugins targeting versions 2024.1+ should use Write Allowing Read Actions available in the [Kotlin Coroutines Read Actions API](coroutine_read_actions.topic#coroutine-read-actions-api).
>
{style="warning"}

To run a cancellable read action, use one of the available APIs:

- [`ReadAction.nonBlocking()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/ReadAction.java) which returns [`NonBlockingReadAction`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/NonBlockingReadAction.java) (NBRA). NBRA handles restarting the action out-of-the-box.
- [`ReadAction.computeCancellable()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/ReadAction.java) which computes the result immediately in the current thread or throws an exception if there is a running or requested write action.

In both cases, when a read action is started and a write action occurs in the meantime, the read action is marked as canceled.
Read actions must [check for cancellation](background_processes.md#handling-cancellation) often enough to trigger actual cancellation.
Although the cancellation mechanism may differ under the hood ([Progress API](background_processes.md#progress-api) or [Kotlin Coroutines](kotlin_coroutines.md)), the cancellation handling rules are the same in both cases.

Always check at the start of each read action if the [objects are still valid](#objects-validity), and if the whole operation still makes sense.
With `ReadAction.nonBlocking()`, use `expireWith()` or `expireWhen()` for that.

> If NBRA needs to access a [file-based index](indexing_and_psi_stubs.md) (for example, it is doing any project-wide PSI analysis, resolves references, or performs other tasks depending on indexes), use `ReadAction.nonBlocking(…).inSmartMode()`.
>
{style="note"}

## Avoiding UI Freezes

### Don't Perform Long Operations on EDT

In particular, don't traverse [VFS](virtual_file_system.md), parse [PSI](psi.md), resolve [references,](psi_references.md) or query [indexes](indexing_and_psi_stubs.md).

There are still some cases when the platform itself invokes such expensive code (for example, resolve in `AnAction.update()`), but these are being worked on.
Meanwhile, try to speed up what you can in your plugin as it will be generally beneficial and will also improve background highlighting performance.

#### Action Update

For implementations of [`AnAction`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnAction.java), plugin authors should specifically
review the documentation of `AnAction.getActionUpdateThread()` in the [](basic_action_system.md) section as it describes how threading works for actions.

#### Minimize Write Actions Scope

Write actions currently [have to happen on EDT](#locks-and-edt).
To speed them up, as much as possible should be moved out of the write action into a preparation step which can be then invoked in the [background](background_processes.md) or inside an [NBRA](#cancellable-read-actions-api).

#### Slow Operations on EDT Assertion

Some of the long operations are reported by [`SlowOperations.assertSlowOperationsAreAllowed()`](%gh-ic%/platform/core-api/src/com/intellij/util/SlowOperations.java).
According to its Javadoc, they must be moved to BGT.
This can be achieved with the techniques mentioned in the Javadoc, [background processes](background_processes.md), [`Application.executeOnPooledThread()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/application/Application.java), or [coroutines](kotlin_coroutines.md) (recommended for plugins targeting 2024.1+).
Note that the assertion is enabled in IDE EAP versions, [internal mode](enabling_internal.md), or [development instance](ide_development_instance.md), and regular users don't see them in the IDE.
This will change in the future, so fixing these exceptions is required.

### Event Listeners

Listeners mustn't perform any heavy operations.
Ideally, they should only clear some caches.

It is also possible to schedule background processing of events.
In such cases, be prepared that some new events might be delivered before the background processing starts – and thus the world might have changed by that moment or even in the middle of background processing.
Consider using [`MergingUpdateQueue`](%gh-ic%/platform/ide-core/src/com/intellij/util/ui/update/MergingUpdateQueue.kt) and [NBRA](#cancellable-read-actions-api) to mitigate these issues.

### VFS Events

Massive batches of VFS events can be pre-processed in the background with [`AsyncFileListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/AsyncFileListener.java).

## FAQ

### How to check whether the current thread is the EDT/UI thread?

Use `Application.isDispatchThread()`.

If code must be invoked on EDT and the current thread can be EDT or BGT, use [`UIUtil.invokeLaterIfNeeded()`](%gh-ic%/platform/util/ui/src/com/intellij/util/ui/UIUtil.java).
If the current thread is EDT, this method will run code immediately, or will schedule a later invocation if the current thread is BGT.

### Why write actions are currently allowed only on EDT?

Reading data model was often performed on EDT to display results in the UI.
The IntelliJ Platform is more than 20 years old, and in its beginnings Java didn't offer features like generics and lambdas.
Code that acquired read locks was very verbose.
For convenience, it was decided that reading data can be done on EDT without read locks (even implicitly acquired).

The consequence of this was that writing had to be allowed only on EDT to avoid read/write conflicts.
The nature of EDT provided this possibility out-of-the-box due to being a single thread.
Event queue guaranteed that reads and writes were ordered and executed one by one and couldn't interweave.

### Why can write intent lock be acquired from any thread but write lock only from EDT?

In the current platform state, technically, write intent lock can be acquired on any thread (it is done only on EDT in practice), but write lock can be acquired only on EDT.

Write intent lock was introduced as a "replacement" for EDT in the context of acquiring write lock.
Instead of allowing to acquire write lock on EDT only, it was planned to make it possible to acquire it from under write intent lock on any thread.
Write intent lock provides read access that was also available on EDT.
This behavior wasn't enabled in production, and the planned locking mechanism has changed.
It is planned to allow for acquiring write lock from any thread, even without a write intent lock.
Write intent lock will be still available and will allow performing read sessions finished with data writing.

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Toggle Button

<link-summary>UI guidelines on using toggle buttons.</link-summary>

<tldr>

**Implementation:** see [](#control)

</tldr>

The toggle button is used to switch between On and Off states.

![](toggle_button_example.png){width=53}

## When to use

Use the toggle button to switch the state of an item in search results:

![](example_se.png){width=676}

Do not use the toggle button for items in dialogs and menus. Instead, use a checkbox in dialogs and a checkmark in menus:

![](when_to_use_dialog_or_menu.png){width=400}

## How to use

### Label

The toggle button in search results should duplicate the option from the settings or the menu.
Label and capitalization should be the same as on the option label:

![](label_checkbox.png){width=228 style=block}
*Setting in the preferences*

![](label_checkbox_se.png){width=676 style=block}
*The same setting in search results*

Do not make a setting available only from search results.

[//]: # (TODO: See [discoverability]&#40;discoverability.md&#41; for details.)

If the setting is in a tree or menu, use the toggle button label to specify where the setting is located:

![](label_tree.png){width=387 style=block}
*Setting in a tree*

![](label_tree_se.png){width=676 style=block}
*The same setting in search results; separate tree levels with a colon*

![](label_menu.png){width=497 style=block}
*Setting in the main menu*

![](label_menu_se.png){width=676 style=block}
*The same setting in search results; separate the first menu level with a vertical bar, and separate others with a colon*

Refer to [checkbox](checkbox.topic) for writing checkbox labels and menu labels.

[//]: # (TODO: and [menu]&#40;menu_list.md&#41;)

Do not add the word "On" or "Off" to the item name, since the state description is already in the toggle button.

### Control

A toggle button is implemented with the [`OnOffButton`](%gh-ic%/platform/platform-api/src/com/intellij/ui/components/OnOffButton.java) class.
But generally, you shouldn't use the class directly.
The IDE automatically places the buttons in the search feed if you follow one of the patterns described below:

1. If this is a system or editor or another kind of settings, register the corresponding [`BooleanOptionDescription`](%gh-ic%/platform/platform-api/src/com/intellij/ide/ui/search/BooleanOptionDescription.java) for the option. The options can be bound (but not limited) to:

    - A [`SearchTopHitProvider`](%gh-ic%/platform/platform-api/src/com/intellij/ide/SearchTopHitProvider.kt) instance which is registered in <path>plugin.xml</path> with the `<search.topHitProvider implementation="fq.class.name"/>` tag. For example, see the [`SystemOptionsTopHitProvider`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/ui/SystemOptionsTopHitProvider.java) class that represents matching of <control>Reopen last project on startup</control> checkbox
      to `BooleanOptionDescription`.

    - [`EditorOptionDescription`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/ui/EditorOptionDescription.java) bound to [`EditorSettingsExternalizable`](%gh-ic%/platform/ide-core-impl/src/com/intellij/openapi/editor/ex/EditorSettingsExternalizable.java), which under the hood works with the <path>editor.xml</path>.
2. Implement your own action that's inherited from [`ToggleAction`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/actionSystem/ToggleAction.java) and registered in <path>plugin.xml</path>.

The toggle button changes state when it is clicked with the mouse or when <shortcut>Enter</shortcut> is pressed on the item line.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Tomcat Integration
<primary-label ref="IntelliJIDEA_Ultimate"/>

<link-summary>Information about Tomcat plugin source code location.</link-summary>

The source code of the Tomcat plugin included in IntelliJ IDEA Ultimate is available as a sample for implementing application server integration plugins.
You can find the code under <path>lib/src/src_tomcat.zip</path> in the main IntelliJ IDEA Ultimate distribution.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Tool Window

<link-summary>UI guidelines on using tool windows.</link-summary>

A tool window is a pane inside the main IDE window. For information about tool windows, see [IntelliJ IDEA Web Help](https://www.jetbrains.com/help/idea/tool-windows.html). For information about implementing tool windows, see [](tool_windows.md).

![](tool_window_example.png){width=960}

## When to use

Use the tool window to show a large amount of information that the user needs while working side-by-side with the editor or other tool windows. For example, viewing the project structure, running and debugging an application, and viewing git log.

If the amount of information is small, show it in the editor, main toolbar, status bar or popup. For example, show version control changes on the editor gutter, breadcrumbs in the main toolbar, current branch and file details in the status bar, quick doc in a popup.

If the user does not need the information from the main window to complete an operation, show the content in the popup or dialog window. For example, Search Everywhere popup, Settings dialog.

## Tool window structure

![](tool_window_structure.png){width=483}

## How to use

Give the tool window a name:

* The name should be [short and descriptive](writing_short.md), preferably not longer than two words.
* Use title-case capitalization.

Show the tool window name in the tool window button and header. If there are tabs in the tool window header, add a colon after the tool window name. Otherwise, do not add it.

![](pull_requests.png){width=308}

Add an icon for the tool window. The icon is 13px x 13px, grey and monochromatic. See how to create icons in the [icons guidelines](icons_style.md).

**Exception:** <control>Problems</control> and <control>Event Log</control> icons change color and show the current status.

Select the tool window orientation depending on the content. Vertical tool windows work better for trees, for example, Project, Structure, or Maven tool windows. Horizontal tool windows work better for tables, wide content or master-detail panels, for example, Git Log, Terminal, or Problems.

Do **not** show the tool window button if the tool window is not relevant to the current project configuration. For example, do not show the Maven tool window for a project without Maven configuration files.

If a tool window has no content yet, show its button by default only if the window contains basic functionality that is likely to be used for all projects, for example, Version Control or Problems. Otherwise, do not show the tool window button by default.

Add a toolbar for [frequently used actions and filters](toolbar.md#what-items-to-add-on-toolbar). Use a horizontal toolbar for vertical tool windows and a vertical toolbar for horizontal tool windows. For more details, see the [toolbar guidelines](toolbar.md).

Put tool window viewing mode settings under the gear icon in the header. If there is no toolbar, put other options under the gear icon as well. For example, see the gear icon in the Project tool window.

Add tabs if all the information does not fit in one tab or refers to similar instances, like run sessions, history for files, find results. The tabs for entities should be closable.

![](git.png){width=308 style=block}
*Separate tabs are added for each file history.*

![](find.png){width=448 style=block}
*Separate tabs are added for different search queries.*

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Tool Windows

<link-summary>Displaying additional information and controls in child windows of the IDE.</link-summary>

<tldr>

**Product Help:** [Tool windows](https://www.jetbrains.com/help/idea/tool-windows.html)

**UI Guidelines:** [](tool_window.md)

</tldr>

_Tool windows_ are child windows of the IDE used to display information.
These windows generally have their own toolbars (referred to as _tool window bars_) along the outer edges of the main window containing one or more _tool window buttons_, which activate panels displayed on the left, bottom, and right sides of the main IDE window.

Each side contains two tool window groups, the primary and the secondary one, and only one tool window from each group can be active at a time.

Each tool window can show multiple tabs (or "contents", as they are called in the API).
For example, the <control>Run</control> tool window displays a tab for each active run configuration, and the Version Control related tool windows display a fixed set of tabs depending on the version control system used in the project.

There are two main scenarios for the use of tool windows in a plugin.
Using [declarative setup](#declarative-setup), a tool window button is always visible, and the user can activate it and interact with the plugin functionality at any time.
Alternatively, using [programmatic setup](#programmatic-setup), the tool window is created to show the results of a specific operation, and can then be closed after the operation is completed.

### Declarative Setup

The tool window is registered in <path>[plugin.xml](plugin_configuration_file.md)</path> using the `com.intellij.toolWindow` extension point.
The extension point attributes specify all the data which is necessary to display the tool window button:

* The `id` attribute (required) of the tool window which corresponds to the text displayed on the tool window button.
To provide a localized text, specify matching `toolwindow.stripe.[id]` message key (escape spaces with `_`) in the [resource bundle](plugin_configuration_file.md#idea-plugin__resource-bundle) (code insight supported in 2020.3 and later).

* The `icon` to display on the tool window button (13x13 pixels, grey and monochromatic; see [](tool_window.md) in UI Guidelines and [](icons.md))

* The `anchor`, meaning the side of the screen on which the tool window is displayed ("left" (default), "right" or "bottom")

* The `secondary` attribute, specifying whether the tool window is displayed in the primary or the secondary group

* The `factoryClass` attribute (required), a class implementing [`ToolWindowFactory`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/ToolWindowFactory.kt).

When the user clicks on the tool window button, the `createToolWindowContent()` method of the factory class is called, and initializes the UI of the tool window.
This procedure ensures that unused tool windows don't cause any overhead in startup time or memory usage: if a user does not interact with the tool window, no plugin code will be loaded or executed.

#### Conditional Display

If the tool window of a plugin should not be displayed for all projects:

<tabs>

<tab title="2023.3 and later">

Implement `ToolWindowFactory.isApplicableAsync(Project)`.

</tab>

<tab title="2021.1 and later">

Implement `ToolWindowFactory.isApplicable(Project)`.

</tab>

<tab title="2019.3 and earlier">

Specify the `conditionClass` attribute in <path>plugin.xml</path> with a class implementing [`Condition<Project>`](%gh-ic%/platform/util/src/com/intellij/openapi/util/Condition.java) (can be the same class as the `ToolWindowFactory` implementation).

</tab>

</tabs>

Note, the condition is evaluated only once when the project is loaded.
To show and hide a tool window dynamically while the user is working with the project, use [programmatic setup](#programmatic-setup) for tool window registration.

### Programmatic Setup

For tool windows shown only after invoking specific actions, use [`ToolWindowManager.registerToolWindow(String,RegisterToolWindowTaskBuilder)`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/ToolWindowManager.kt).

Always use [`ToolWindowManager.invokeLater()`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/ToolWindowManager.kt) instead of "plain" `Application.invokeLater()` when scheduling EDT tasks related to tool windows (see [](threading_model.md)).

## Contents (Tabs)

Displaying the contents of many tool windows requires access to [indexes](indexing_and_psi_stubs.md).
Because of that, tool windows are normally disabled while building indexes unless the `ToolWindowFactory` is marked [dumb aware](indexing_and_psi_stubs.md#DumbAwareAPI).

As mentioned previously, tool windows can contain multiple contents (tabs).
To manage the contents of a tool window, call [`ToolWindow.getContentManager()`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/wm/ToolWindow.java).
To add a content (tab), first create it by calling [`ContentManager.getFactory().createContent()`](%gh-ic%/platform/ide-core/src/com/intellij/ui/content/ContentManager.java), and then to add it to the tool window using [`ContentManager.addContent()`](%gh-ic%/platform/ide-core/src/com/intellij/ui/content/ContentManager.java).
Use `Content.setDisposer()` to register associated `Disposable` (see [](disposers.md)).

See [`SimpleToolWindowPanel`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/SimpleToolWindowPanel.java) as a convenient base class, supporting [Toolbars](basic_action_system.md#buildingToolbarPopupMenu) and both vertical/horizontal layout.

### Closing Tabs

A plugin can control whether the user is allowed to close tabs either globally or on a per-content basis.
The former is done by passing the `canCloseContents` parameter to the `registerToolWindow()` function, or by specifying `canCloseContents="true"` in <path>plugin.xml</path>.
The default value is `false`; calling `setClosable(true)` on `ContentManager` content will be ignored unless `canCloseContents` is explicitly set.

If closing tabs is enabled in general, a plugin can disable closing of specific tabs by calling [`Content.setCloseable(false)`](%gh-ic%/platform/ide-core/src/com/intellij/ui/content/Content.java).

## Tool Window FAQ

### Accessing Tool Window

Use [`ToolWindowManager.getToolWindow()`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/ToolWindowManager.kt) specifying the `id` used for [registration](#declarative-setup).

### Tool Window Notification

[`ToolWindowManager.notifyByBalloon()`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/wm/ToolWindowManager.kt) allows showing a notification for the given tool window.

### Events

Project-level topic [`ToolWindowManagerListener`](%gh-ic%/platform/platform-impl/src/com/intellij/openapi/wm/ex/ToolWindowManagerListener.java) allows listening to tool window registration/show events (see [](plugin_listeners.md)).

## Sample Plugin

To clarify how to develop plugins that create tool windows, consider the **toolWindow** sample plugin available in the [code samples](%gh-sdk-samples-master%/tool_window).

See [](code_samples.md) on how to set up and run the plugin.

This plugin creates the <control>Sample Calendar</control> tool window that displays the system date, time and time zone.
When opened, this tool window is similar to the following screen:

![Sample Calendar](sample_calendar.png){width="403"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Toolbar

<link-summary>UI guidelines on using toolbars.</link-summary>


<tldr>

**Related:** [](basic_action_system.md#buildingToolbarPopupMenu)

</tldr>

A toolbar provides quick access to frequently used actions and filters. It appears in dialogs, pop-ups, tool windows, lists, trees, and tables.

![](toolbar_example.png){width=428}

## Toolbar items

The following controls can appear on a toolbar:

* [Icon button](icon_button.md): action, toggle, or drop-down

* [Split icon button](split_icon_button.md)

* [Toolbar drop-down list](toolbar_drop_down.md)

* [Search field](search_field.md)

* [Button](button.topic)

* Separator

* Label

* Chevron

![](items.png){width=704}

## What items to add on toolbar

Put only the most frequently used commands on the toolbar. Rely on usage statistics if it’s available.

If an action is new, and it seems useful, add it to the corresponding toolbar.
Remove it after several releases if it’s not popular, which means it’s used by less than ~5% of users who use this toolbar.

Do **not** put unpopular or well-known commands, like Copy and Paste on the toolbar. Use the main menu or the context menu for such commands.

It’s **not** recommended to add more items than the default toolbar length. Otherwise, the items will be hidden and it will be hard to discover them.

![](width_correct.png){width=283}

Left align items on a horizontal toolbar and top align on a vertical toolbar.

Group related toolbar icon buttons and separate groups with lines. If there are several unrelated icons, do **not** add separators after each icon.

![](toolbar_group.png){width=242}

Label a group of icons if it helps to make the icons clearer and if it’s needed to promote the icons. The icons group becomes more visible with the label.

Arrange items inside groups by the frequency of use, from left to right from top to bottom. Rely on statistics.

It is recommended to arrange groups in the following order unless it contradicts the usage statistics. If it does, arrange groups by the frequency of use.

![](toolbar_tool_window.png){width=260}

The less frequently used commands can be right aligned.

![](right_aligned.png){width=491}

Do **not** put two toolbars next to each other. One toolbar should be enough for the most popular actions.

<table>
    <tr>
        <td width="50%"><format color="Red" style="bold">Incorrect</format></td>
        <td width="50%"><format color="Green" style="bold">Correct</format></td>
    </tr>
    <tr>
        <td><img src="toolbars_2.png" alt="" width="58" /></td>
        <td><img src="toolbars_1.png" alt="" width="30" /></td>
    </tr>
</table>

Make every toolbar action available from the main menu or the context menu.
Toolbars are customizable and can be hidden, so commands should be available from other places as well.

If the default component size changes and there is not enough space for items on a toolbar, hide them under the chevron.

![](chevron.png){width=30}

## Visibility and customization

Provide the ability to hide the toolbar in the main window via the toolbar context menu.

![](hide.png){width=428}

Provide commands for invoking the toolbar. Use the main menu for the main window toolbars. Use the pane view settings for toolbars in tool windows.

![](reveal.png){width=597}

Provide the ability to customize toolbars in the main window.
To do this, add the toolbar to the list on the <ui-path>Settings | Appearance & Behavior | Menus and Toolbars</ui-path> page and open
it using the <control>Customize Toolbar...</control> action from the toolbar context menu.

![](toolbar_customize.png){width=404}

## Sizes and placement

The toolbar can be vertical or horizontal.

![](placement.png){width=498}

By default, place the toolbar at the top of the area.

![](placement_top.png){width=220}

### Exceptions

Place the toolbar on the left in horizontal tool windows if horizontal space is not limited.
A horizontal toolbar will be too wide and will occupy lots of space:

![](placement_left.png){width=220}

Place the toolbar on the right if it’s not the first toolbar in the pane, and it’s rarely used.

![](placement_right.png){width=386}

Place the toolbar at the bottom on macOS, and on the right on Windows and Linux in [tables](table.md).

![](table_mac.png){width=432 style=block}
*macOS*

![](table_win.png){width=431 style=block}
*Windows*

The toolbar width is limited by the width of the element it belongs to. For example, by the width of the tool window or the list part in a master-detail layout.

| <format color="Red" style="bold">Incorrect</format> | <format color="Green" style="bold">Correct</format> |
|-----------------------------------------------------|-----------------------------------------------------|
| ![](width_incorrect.png){width="283"}               | ![](width_correct.png){width=283}                   |

Toolbar sizes are the same for all themes:

![](toolbar_sizes.png){width=539}

![](sizes_under_list.png){width=418}

The toolbar items sizes change together with the application font size proportionally.

![](toolbar_font_size.png){width=604}

## Style

![](style.png){width=477}

Separate the toolbar from the content with a line from all four sides if it appears in a tool window or a table:

| <format color="Red" style="bold">Incorrect</format> | <format color="Green" style="bold">Correct</format> |
|-----------------------------------------------------|-----------------------------------------------------|
| ![](style_incorrect.png){width="220"}               | ![](style_correct.png){width="220"}                 |

Do **not** separate a toolbar with lines if it appears above the list:

![](toolbar_customize.png){width=404}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Toolbar Drop-Down List

<link-summary>UI guidelines on using toolbar drop-down lists.</link-summary>

<tldr>

**Implementation:** [`ComboBoxButton`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/actionSystem/ex/ComboBoxAction.java)

</tldr>

A toolbar drop-down list is a type of button that appears on a horizontal toolbar and shows a list of choices on clicking it.

![](toolbar_dropdown_example.png){width=205}

## When to use

Use toolbar drop-down if a single option should be selected.

If the choices are objects or states.

To select values that are controlled by the toolbar button on the right.

![](toolbar_main.png){width=209}

To filter values or change the appearance in the control below:

![](toolbar_filter.png){width=244}

Use a [toolbar drop-down button](icon_button.md) instead of a drop-down list in the following cases:

* If there is a list of actions:

![](toolbar_dropdown_menu_button.png){width=136}

* The options are secondary and the user won’t change them in most cases.

* Multi-selection is required, for example, to group by several attributes.

Do **not** use toolbar drop-down in dialogs, use the [drop-down list](drop_down.md) instead.

| <format color="Red" style="bold">Incorrect</format> | <format color="Green" style="bold">Correct</format> |
|-----------------------------------------------------|-----------------------------------------------------|
| ![](settings_incorrect.png){width="302"}            | ![](settings_correct.png){width="302"}              |

## How to use

Do **not** add a label to the toolbar drop-down.

For the default value, follow the rules for the [drop-down list](drop_down.md#default-value).

Add separators between the toolbar drop-down and icons:

![](diff.png){width=313}

If a drop-down is controlled by buttons, add a border, as separators will break the connection between the controlling icons and the drop-down:

![](toolbar_main.png){width=209}

The toolbar drop-down does not get the focus. Highlight it on hover the same way as toolbar icons.

![](toolbar_dropdown_hover.png){width=209}

### Menu

#### Control

Open the drop-down menu when clicking anywhere on a drop-down list.
Open the menu down by default. If there is not enough space, open the menu up.

Select the first option when the menu opens.

Move the selection in the menu on pressing the Up and Down arrows or on hovering the cursor over the item.

Filter items in the list on typing:

![](search.png){width=209}

Close the menu if the user selects an item, clicks outside the menu, presses the Esc key or switches to another app.

Allow single-click activation using mouse: click on a drop-down, the drop-down opens, select an item by hovering,
close the drop-down with the new item selected by releasing the mouse button.

#### Menu items

Follow the rules for the [drop-down list](drop_down.md#menu-items).

If it’s necessary to configure options in a toolbar drop-down list, add customization actions at the top or at the bottom of the list
and separate them with a line.
Use title case capitalization for actions.

![](toolbar_dropdown_customize.png){width=201}

A toolbar drop-down list can have submenus.

### Submenu

A submenu is a menu item that shows a list of nested items. A submenu includes a triangular indicator that distinguishes it from other menu items.

Use item submenus to group related options and to show hierarchy:

![](submenu_example.png){width=272}

Show the submenu list on hovering over an item.

If the selection moves with the Up and Down arrow keys, show the submenu list on pressing the Right arrow or the Enter key.

Avoid submenus inside submenus. Submenus hide choices too deep and are difficult to navigate.

## Sizes and placement

Toolbar drop-down sizes are the same for all themes.

![](toolbar_dropdown_sizes.png){width=181}

The width changes depending on the selected value to save space if the value is short.

![](toolbar_dropdown_width.png){width=169}

For menu sizes see [Drop-down menu](drop_down.md#menu_1).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Gradle Grammar-Kit Plugin

<link-summary>Gradle Grammar-Kit Plugin automates generating custom language lexers and parsers when using Grammar-Kit.</link-summary>

<tldr>

**Current Release**: %gradle-grammar-kit-plugin-version%

**GitHub**: [Releases & Changelog](https://github.com/JetBrains/gradle-grammar-kit-plugin/releases), [Issue Tracker](https://github.com/JetBrains/gradle-grammar-kit-plugin/issues)

</tldr>

The [Gradle Grammar-Kit Plugin](https://github.com/JetBrains/gradle-grammar-kit-plugin) automates generating lexers and parsers to support building [custom language](custom_language_support.md) plugins for IntelliJ-based IDEs when using [Grammar-Kit](https://github.com/JetBrains/Grammar-Kit).

> The plugin does not support two-pass generation. Therefore, it does not support method mixins.
>
{style="note" title="Known Limitations"}

> Please see [CONTRIBUTING](https://github.com/JetBrains/gradle-grammar-kit-plugin/blob/master/CONTRIBUTING.md) on how to submit feedback and contribute to this project.
>
> Before visiting the [Issue Tracker](https://github.com/JetBrains/gradle-grammar-kit-plugin/issues), update both plugin and Gradle to the latest versions.

## Usage
To enable this plugin in your Gradle-based project, register the plugin in the Gradle build script's `plugins` section:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
plugins {
  id("org.jetbrains.grammarkit") version "%gradle-grammar-kit-plugin-version%"
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
plugins {
  id "org.jetbrains.grammarkit" version "%gradle-grammar-kit-plugin-version%"
}
```

</tab>
</tabs>

> This project requires Gradle 7.4 or newer, however, it is recommended to use the latest Gradle available.
> See [Gradle Installation](https://gradle.org/install/) guide.
>
{title="Minimum Gradle Version"}

## Configuration

See also [](#usage-examples) below.

### Grammar-Kit Extension
After the Gradle Grammar-Kit Plugin is applied, the `grammarKit` extension can be used to configure the plugin and common settings of the provided tasks.

> In most cases, explicit configuration can be omitted.
>
{style="tip"}

**Example:**

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
grammarKit {
  jflexRelease.set("1.7.0-1")
  grammarKitRelease.set("2021.1.2")
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
grammarKit {
  jflexRelease = "1.7.0-1"
  grammarKitRelease = "2021.1.2"
}
```

</tab>
</tabs>


#### grammarKitRelease
{#grammar-kit-extension-grammarkitrelease}

The release version of the [Grammar-Kit](https://github.com/JetBrains/Grammar-Kit) to use.

{type="narrow"}
Type
: `String`

Default value
: `2022.3.2`


#### jflexRelease
{#grammar-kit-extension-jflexrelease}

The version of the IntelliJ-patched JFlex, a [fork of JFlex](https://github.com/JetBrains/intellij-deps-jflex) lexer generator for IntelliJ Platform API.

{type="narrow"}
Type
: `String`

Default value
: `1.9.2`


#### intellijRelease
{#grammar-kit-extension-intellijrelease}

An optional IntelliJ IDEA version to build the classpath for [`GenerateParser`](#generateparser-task) and [`GenerateLexer`](#generatelexer-task) tasks.

If provided, [`grammarKitRelease`](#grammar-kit-extension-grammarkitrelease) and [`jflexRelease`](#grammar-kit-extension-jflexrelease) properties are ignored as both dependencies will be provided from the given IntelliJ IDEA release.

{type="narrow"}
Type
: `String`

Default value
: `null`


## Tasks

### generateLexer
{#generatelexer-task}

The `generateLexer` task generates a lexer for the given grammar.

The following sections describe task configuration options.
See also [](#grammar-kit-extension) for common configuration.

#### sourceFile
{#tasks-generatelexer-source}

The source <path>.*flex</path> file to generate the lexer from.

{type="narrow"}
Required
: yes

Type
: `String`


#### targetOutputDir
{#tasks-generatelexer-targetOutputDir}

The path to the target directory for the generated lexer.

{type="narrow"}
Required
: yes

Type
: `String`



#### skeleton
{#tasks-generatelexer-skeleton}

An optional path to the skeleton file to use for the generated lexer.
The path will be provided as `--skel` option.
By default, it uses the <path>[idea-flex.skeleton](https://raw.github.com/JetBrains/intellij-community/master/tools/lexer/idea-flex.skeleton)</path> skeleton file.

{type="narrow"}
Type
: `String`

Default
: `null`


#### purgeOldFiles
{#tasks-generatelexer-purgeoldfiles}

Purge old files from the target directory before generating the lexer.

{type="narrow"}
Type
: `Boolean`

Default
: `false`


### generateParser
{#generateparser-task}

The `generateParser` task generates a parser for the given grammar.

The following sections describe task configuration options.
See also [](#grammar-kit-extension) for common configuration.

#### sourceFile
{#tasks-generateparser-source}

The source <path>.bnf</path> file to generate the parser from.

{type="narrow"}
Required
: yes

Type
: `String`


#### targetRootOutputDir
{#tasks-generateparser-targetrootOutputDir}

The path to the target directory for the generated parser.

{type="narrow"}
Type
: `String`

Default
: `null`


#### pathToParser
{#tasks-generateparser-pathtoparser}

The location of the generated parser class, relative to the [`targetRootOutputDir`](#tasks-generateparser-targetrootOutputDir).

{type="narrow"}
Required
: yes

Type
: `String`


#### pathToPsiRoot
{#tasks-generateparser-pathtopsiroot}

The location of the generated PSI files, relative to the [`targetRootOutputDir`](#tasks-generateparser-targetrootOutputDir).

{type="narrow"}
Required
: yes

Type
: `String`


#### purgeOldFiles
{#tasks-generateparser-purgeoldfiles}

Purge old files from the target directory before generating the parser.

{type="narrow"}
Type
: `Boolean`

Default
: `false`


## Usage Examples

* [CSV Editor](https://github.com/SeeSharpSoft/intellij-csv-validator/blob/main/build.gradle.kts)
* [Perl5 plugin](https://github.com/Camelcade/Perl5-IDEA/blob/master/plugin/core/build.gradle.kts)
* [Bamboo Soy plugin](https://github.com/google/bamboo-soy/blob/master/build.gradle)

## Links

* [Grammar-Kit](https://github.com/JetBrains/Grammar-Kit)
* [IntelliJ-patched JFlex Sources](https://github.com/JetBrains/intellij-deps-jflex)
* [IntelliJ-patched JFlex](https://cache-redirector.jetbrains.com/intellij-dependencies/org/jetbrains/intellij/deps/jflex/jflex/)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Gradle IntelliJ Plugin (1.x)
<primary-label ref="Obsolete"/>

<tldr>

**Current Release**: %gradle-intellij-plugin-version%

**GitHub**: [Releases & Changelog](https://github.com/JetBrains/gradle-intellij-plugin/releases), [Issue Tracker](https://github.com/JetBrains/gradle-intellij-plugin/issues)

</tldr>

<link-summary>Gradle IntelliJ Plugin configures Gradle-based plugin projects for building, testing, verifying, and publishing the plugin.</link-summary>

<snippet id="gradlePluginObsolete">

> Gradle IntelliJ Plugin (1.x) is no longer under active development.
>
> Whenever possible, use [](tools_intellij_platform_gradle_plugin.md) instead.
>
{title="Obsolescence Notice" style="warning"}

</snippet>

The Gradle IntelliJ Plugin is a plugin for the Gradle build system to help configure your environment for building, testing, verifying, and publishing plugins for IntelliJ-based IDEs.

This plugin allows you to build plugins for IntelliJ Platform using specified IntelliJ SDK and bundled or third-party plugins.

The plugin provides functionalities like:
- adding extra IntelliJ-specific dependencies
- patching `processResources` tasks to fill some tags (name, version) in <path>[plugin.xml](plugin_configuration_file.md)</path> with appropriate values
- patching compile tasks to instrument code with nullability assertions and form classes made with IntelliJ GUI Designer
- additional build steps that are helpful for developing plugins for the IntelliJ Platform

> Please see also [](tools_gradle_intellij_plugin_faq.md) and [](tools_gradle_intellij_plugin_examples.md).
>
> Before visiting the [Issue Tracker](https://github.com/JetBrains/gradle-intellij-plugin/issues), update both plugin and Gradle to the latest versions.
> Please see [CONTRIBUTING](https://github.com/JetBrains/gradle-intellij-plugin/blob/master/CONTRIBUTING.md) on how to submit feedback and contribute to this project.
>

## Usage

<include from="snippets.md" element-id="gradlePluginVersion"/>

To enable this plugin in your Gradle-based project, register the plugin in the Gradle build script's `plugins` section:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
plugins {
  id("org.jetbrains.intellij") version "%gradle-intellij-plugin-version%"
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
plugins {
  id "org.jetbrains.intellij" version "%gradle-intellij-plugin-version%"
}
```

</tab>
</tabs>

When upgrading to `1.x` version, please make sure to follow the [migration guide](https://lp.jetbrains.com/gradle-intellij-plugin) to adjust your existing build script.

> This project requires Gradle 7.3 or newer.
> However, it is recommended to use the latest Gradle available.
> See [Gradle Installation](https://gradle.org/install/) guide.
>
{title="Minimum Gradle Version"}

### IDE Configuration

Some additional settings are required in the IDE after setting up the plugin.

<control>Gradle JVM</control> must be set to Java 11 in <ui-path>Settings | Build, Execution, Deployment | Build Tools | Gradle</ui-path>.
When targeting 2022.3+, Java 17 is required instead (see [details](build_number_ranges.md#platformVersions)).

#### Attaching Sources

> This step is not required when using Gradle IntelliJ Plugin version **1.17.2** or later.
>
{style="tip"}

To attach IntelliJ Platform sources in the IDE when enabled via [](#intellij-extension-downloadsources) some additional settings are required in IDE versions 2023.2 and later.

<tabs>

<tab title="2023.3+">

In <ui-path>Settings | Advanced Settings</ui-path> enable option <control>Download sources</control> in section <ui-path>Build Tools. Gradle</ui-path>.
Then invoke <control>Reload All Gradle Projects</control> action from the <control>Gradle</control> tool window.

</tab>

<tab title="2023.2">

In <ui-path>Settings | Build, Execution, Deployment | Build Tools | Gradle</ui-path> enable <control>Download sources for dependencies</control>.
Then invoke <control>Reload All Gradle Projects</control> action from the <control>Gradle</control> tool window.

</tab>

<tab title="Earlier versions">

No additional IDE settings are required.

</tab>

</tabs>

### Snapshot Release
The Snapshot release is a pre-release version built nightly from the latest main branch – as it is built every day using the same version number, it's not recommended to use it for production builds.

To switch to the snapshot release, point Gradle to the dedicated snapshot repository by adding an entry to the Gradle settings file.

> The current Gradle IntelliJ Plugin Snapshot version is ![GitHub Snapshot Release](https://img.shields.io/nexus/s/org.jetbrains.intellij/org.jetbrains.intellij.gradle.plugin?server=https://oss.sonatype.org&label=)
>
> To make sure you obtain the latest snapshot version, invoke Gradle using `--refresh-dependencies` option.
>
{style="note"}

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

<path>build.gradle.kts</path>

```kotlin
plugins {
  id("org.jetbrains.intellij") version "..."
}
```

<path>settings.gradle.kts</path>

```kotlin
pluginManagement {
  repositories {
    maven("https://oss.sonatype.org/content/repositories/snapshots/")
    gradlePluginPortal()
  }
}
```
</tab>
<tab title="Groovy" group-key="groovy">

<path>build.gradle</path>

```groovy
plugins {
  id "org.jetbrains.intellij" version "..."
}
```

<path>settings.gradle</path>

```groovy
pluginManagement {
  repositories {
    maven {
      url 'https://oss.sonatype.org/content/repositories/snapshots/'
    }
    gradlePluginPortal()
  }
}
```

</tab>
</tabs>


### Configuration Cache
The Gradle build system brings the [Configuration Cache](https://docs.gradle.org/current/userguide/configuration_cache.html) feature that helps improve the build performance by caching the configuration phase.

The Gradle IntelliJ Plugin is fully compatible with this mechanism and can be utilized by manual enabling of the Configuration Cache feature with the `--configuration-cache` flag, like:

```shell
gradle buildPlugin --configuration-cache
```

or by enabling it in the <path>gradle.properties</path> file:

```
org.gradle.unsafe.configuration-cache = true
```

See [Using the configuration cache](https://docs.gradle.org/current/userguide/configuration_cache.html#config_cache:usage) in the Gradle documentation for more details.


### Multi-Module Project
Sometimes, you may want to split your plugin into multiple modules — i.e., to separate the core plugin code from the code related to other third-party plugin dependencies.
The most common way to do this is to use the [Gradle Multi-Project Build](https://docs.gradle.org/current/userguide/multi_project_builds.html) feature.

This approach allows you to declare dependencies between subprojects, like:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
dependencies {
  implementation(project(":shared"))
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
dependencies {
  implementation project(':shared')
}
```

</tab>
</tabs>

Because the Gradle IntelliJ Plugin introduces the code instrumentation, and the default `implementation` configuration is not compatible with it, you need to specify the `instrumentedJar` configuration explicitly to refer to the instrumented JAR file produced by the plugin instead of the default JAR file:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
dependencies {
  implementation(project(":shared", "instrumentedJar"))
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
dependencies {
  implementation project(path: ':shared', configuration: 'instrumentedJar')
}
```

</tab>
</tabs>

## Configuration

### IntelliJ Extension
{#configuration-intellij-extension}

After the Gradle IntelliJ Plugin is applied, the `intellij` extension can be used to configure the plugin and common settings of the provided tasks.

It is mandatory to specify at least the [`intellij.version`](#intellij-extension-version) property.

**Example:**


<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellij {
  version.set("2022.1.1")
  type.set("IU")
  plugins.set(listOf("com.jetbrains.php:221.5787.21"))
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellij {
  version = "2022.1.1"
  type = "IU"
  plugins = ["com.jetbrains.php:221.5787.21"]
}
```

</tab>
</tabs>


#### `version`
{#intellij-extension-version}

All available JetBrains IDEs versions can be found in the repositories described on the [](intellij_artifacts.md) page.

The version of the IntelliJ Platform IDE that will be used to build the plugin.
Please see [](plugin_compatibility.md) and [](build_number_ranges.md) for more details.

{type="narrow"}
Required
: `true`

Type
: `String`

Acceptable values
:
- version number: `2022.1.1` or `IC-2022.1.1`
- build number: `221.5080.210` or `IC-221.5080.210`
- snapshot: `221-EAP-SNAPSHOT` or `LATEST-EAP-SNAPSHOT`

> The _version number_ format is the most common option for specifying the version of the IntelliJ Platform.
> Other formats should be used only when your plugin relies on specific parts of the targeted IDE or early-adopting EAP releases.


#### `type`
{#intellij-extension-type}

The type of the IntelliJ-based IDE distribution.
The type may also be specified as a prefix of the value for the [`intellij.version`](#intellij-extension-version) property instead.

{type="narrow"}
Type
: `String`

Default value
: `IC`

Acceptable values
:
- `IC` - [IntelliJ IDEA Community Edition](idea.md)
- `IU` - [IntelliJ IDEA Ultimate Edition](idea.md)
- `CL` - [CLion](clion.md)
- `PY` - [PyCharm Professional Edition](pycharm.md)
- `PC` - [PyCharm Community Edition](pycharm.md)
- `PS` - [PhpStorm](phpstorm.md)
- `RD` - [Rider](rider.md)
- `GO` - [GoLand](goland.md)
- `AI` - [Android Studio](android_studio.md)
- `RR` - [Rust Rover](https://www.jetbrains.com/rust/)
- `JPS` - JPS-only
- `GW` - Gateway

To build against IDEs not supported directly by `type`, please see their corresponding page in _Product Specific_.

#### `pluginName`
{#intellij-extension-pluginname}

The plugin name part used in the generated ZIP distribution: <path>build/distributions/PluginName-1.0.0.zip</path>, and the name of the plugin directory in the sandbox directory.

{type="narrow"}
Type
: `String`

Default value
: `${project.name}`


#### `localPath`
{#intellij-extension-localpath}

The path to the locally installed IDE distribution that should be used to build the plugin.
Using `intellij.localPath` allows building the plugin using an IDE that is not available in [](intellij_artifacts.md).

{type="narrow"}
Type
: `String`

Default value
: `null`

Samples
:
- Windows: <path>C:\Users\user\AppData\Local\JetBrains\Toolbox\apps\IDEA-U\ch-0\211.7142.45</path>
- macOS: <path>/Applications/Android Studio 4.2 Preview.app/Contents</path> (note <path>/Contents</path> suffix)
- Linux: <path>/home/user/idea-IC-181.4445.78</path>

> `intellij.version` and `intellij.localPath` must not be specified at the same time.
>
{style="warning"}


#### `localSourcesPath`
{#intellij-extension-localsourcespath}

The path to local archive with IDE sources.
Used for resolving source files of the locally installed IDE distribution when [`intellij.localPath`](#intellij-extension-localpath) is specified.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `plugins`
{#intellij-extension-plugins}

The list of bundled IDE plugins and plugins from [JetBrains Marketplace](https://plugins.jetbrains.com) or configured [`intellij.pluginsRepositories`](#intellij-extension-pluginsrepositories).

Please see [](plugin_dependencies.md) for more details.

Notes:
- For plugins from [JetBrains Marketplace](https://plugins.jetbrains.com), use the `pluginId:version` format, like `org.intellij.plugins.markdown:231.8109.126`.
  The version of your choice must be compatible with the version of the IDE you're building against.
- For bundled plugins, use the plugin ID with the version part omitted, like: `org.intellij.groovy`.
- For subprojects, use project reference `project(':subproject', 'instrumentedJar')`.
- For plugin built locally, pass the path to the <path>lib/</path> directory of the extracted plugin archive, like: `file("/path/to/plugin/lib/")` or `file("/projects/plugin-name/build/idea-sandbox/plugins/plugin-name/lib/")`.
  See [](tools_gradle_intellij_plugin_faq.md#how-to-add-a-dependency-on-a-plugin-available-in-the-file-system).
- If you need to refer plugin's classes from your project, you also have to define a dependency in your <path>[plugin.xml](plugin_configuration_file.md)</path> file, see [](plugin_dependencies.md).

{type="narrow"}
Type
: `List<Any>`

Default value
: `[]`

Acceptable values
:
  - `org.plugin.id:version[@channel]` format, `String` type:
    - `org.intellij.plugins.markdown:8.5.0`
    - `org.intellij.scala:2017.2.638@nightly`
  - `bundledPluginId` format, `String` type:
    - `org.intellij.groovy`
  - `project(...)` format, `Project` type:
    - `project(":projectName", "instrumentedJar")`
    - `project(":plugin-subproject", "instrumentedJar")`
  - `file(...)` format, `File` type:
    - `file("/path/to/plugin/lib/")`
    - `file("/projects/plugin-name/build/idea-sandbox/plugins/plugin-name/lib/")`


#### `updateSinceUntilBuild`
{#intellij-extension-updatesinceuntilbuild}

Enables patching <path>[plugin.xml](plugin_configuration_file.md)</path> with the values of [`patchPluginXml.sinceBuild`](#tasks-patchpluginxml-sincebuild) and [`patchPluginXml.untilBuild`](#tasks-patchpluginxml-untilbuild) properties.

{type="narrow"}
Type
: `Boolean`

Default value
: `true`


#### `sameSinceUntilBuild`
{#intellij-extension-samesinceuntilbuild}

Enables patching <path>[plugin.xml](plugin_configuration_file.md)</path> with the [`patchPluginXml.untilBuild`](#tasks-patchpluginxml-untilbuild) using value of [`patchPluginXml.sinceBuild`](#tasks-patchpluginxml-sincebuild) with `*` wildcard, like `sinceBuild.*`, e.g., `221.*`.

Notes:
- Useful for building plugins against EAP builds.
- If [`patchPluginXml.untilBuild`](#tasks-patchpluginxml-untilbuild) has a value set, then [`intellij.sameSinceUntilBuild`](#intellij-extension-samesinceuntilbuild) is ignored.

{type="narrow"}
Type
: `Boolean`

Default value
: `false`


#### `instrumentCode`
{#intellij-extension-instrumentcode}

Enables the instrumentation of Java classes with [nullability](https://www.jetbrains.com/help/idea/nullable-and-notnull-annotations.html) assertions and compilation of forms created by [IntelliJ GUI Designer](https://www.jetbrains.com/help/idea/gui-designer-basics.html).

{type="narrow"}
Type
: `Boolean`

Default value
: `true`


#### `sandboxDir`
{#intellij-extension-sandboxdir}

The path of [sandbox directory](ide_development_instance.md#the-development-instance-sandbox-directory) that is used for running IDE with developed plugin.

{type="narrow"}
Type
: `String`

Default value
: `${project.buildDir}/idea-sandbox`


#### `intellijRepository`
{#intellij-extension-intellijrepository}

The IntelliJ-based IDE distributions repository URL.

{type="narrow"}
Type
: `String`

Default value
: `https://cache-redirector.jetbrains.com/www.jetbrains.com/intellij-repository`


#### `pluginsRepositories`
{#intellij-extension-pluginsrepositories}

Configures repositories for downloading plugin dependencies.
See [Maven Interface](https://plugins.jetbrains.com/docs/marketplace/maven-interface.html) for details on Maven repository format.

{type="narrow"}
Type
: `PluginsRepositoryConfiguration`

Default value
: `pluginsRepositories { marketplace() }`

Acceptable values
:
- `marketplace()` - use Maven repository with plugins listed in [JetBrains Marketplace](https://plugins.jetbrains.com)
- `maven(repositoryUrl)` - use custom Maven repository with plugins
- `maven { repositoryUrl }` - use custom Maven repository with plugins where you can configure additional parameters (credentials, authentication, etc.)
- `custom(pluginsXmlUrl)` - use [](custom_plugin_repository.md)


#### `jreRepository`
{#intellij-extension-jrerepository}

URL of repository for downloading [JetBrains Runtime](ide_development_instance.md#using-a-jetbrains-runtime-for-the-development-instance).

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `ideaDependencyCachePath`
{#intellij-extension-ideadependencycachepath}

Path to the directory where the IDE dependency cache is stored.
If not set, the dependency will be extracted next to the downloaded ZIP archive in [Gradle cache](https://docs.gradle.org/current/userguide/directory_layout.html#dir:gradle_user_home) directory.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `downloadSources`
{#intellij-extension-downloadsources}

Enables downloading the IntelliJ Platform sources.
It is enabled by default if the `CI` environment variable is not set – which is present in Continuous Integration environments, like GitHub Actions, TeamCity, and others.

{type="narrow"}
Type
: `Boolean`

Default value
: `!System.getenv().containsKey("CI")`


#### `configureDefaultDependencies`
{#intellij-extension-configuredefaultdependencies}

Enables configuration of the default IntelliJ Platform dependencies in the current project.
Otherwise, the `DependenciesUtils.intellij()`, `DependenciesUtils.intellijPlugin()`, and `DependenciesUtils.intellijPlugins()` functions could be used for an explicit configuration.

{type="narrow"}
Type
: `Boolean`

Default value
: `true`


#### `extraDependencies`
{#intellij-extension-extradependencies}

Configure extra dependency artifacts from the IntelliJ repository.
The dependencies on them could be configured only explicitly using the `DependenciesUtils.intellijExtra()` function in the `dependencies` block.

{type="narrow"}
Type
: `List<String>`

Default value
: `[]`


#### `pluginDependencies`
{#intellij-extension-plugindependencies}

List of dependencies on external plugins.

{type="narrow"}
Type
: `List<PluginDependency>`

Default value
: `[]`


## Tasks


### `buildPlugin`
{#tasks-buildplugin}

Assembles a plugin and prepares ZIP archive for [deployment](publishing_plugin.md).

`buildPlugin` task extends the [`Zip`](https://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Zip.html) Gradle task.

<include from="plugin_content.md" element-id="doNotRepackageLibraries"/>

#### `archiveBaseName`
{#tasks-buildplugin-archivebasename}

The base name of the ZIP archive.

This task is preconfigured automatically and takes the output artifacts of [`prepareSandbox`](#tasks-preparesandbox) and [`jarSearchableOptions`](#tasks-jarsearchableoptions) tasks as an input.

{type="narrow"}
Type
: `String`

Default value
: `${prepareSandboxTask.pluginName}`


### `buildSearchableOptions`
{#tasks-buildsearchableoptions}

Builds an index of UI components (searchable options) for the plugin.
This task runs a headless IDE instance to collect all the available options provided by the plugin's [](settings.md).

Note, this is a [`runIde`](#tasks-runide)-based task with predefined arguments and all properties of the [`runIde`](#tasks-runide) task are also applied to [`buildSearchableOptions`](#tasks-buildsearchableoptions) tasks.

> If your plugin doesn't implement custom settings, it is recommended to [disable it](tools_gradle_intellij_plugin_faq.md#how-to-disable-building-searchable-options).
> See also [`noSearchableOptionsWarning`](tools_gradle_intellij_plugin_build_features.md#nosearchableoptionswarning) build feature.
>


#### `outputDir`
{#tasks-buildsearchableoptions-outputdir}

{type="narrow"}
Type
: `File`

Default value
: `build/searchableOptions`


### `classpathIndexCleanup`
{#tasks-classpathindexcleanup}

Remove `classpath.index` files that are created by the `PathClassLoader`.
This loader, due to the implementation bug, ignores the `idea.classpath.index.enabled=false` flag and as a workaround, files have to be removed manually.

Task is enabled if [`intellij.version`](#intellij-extension-version) is set to `2022.1` or higher.

#### `classpathIndexFiles`
{#tasks-classpathindexcleanup-classpathindexfiles}

The list of `classpath.index` files to be removed.

{type="narrow"}
Type
: `ConfigurableFileCollection`

Default value:
: List of `classpath.index` files resolved with `sourceSets` configuration


### `downloadRobotServerPlugin`
{#tasks-downloadrobotserverplugin}

Download the `robot-server` plugin.
The `robot-server` plugin is required for running the UI tests using the [`runIdeForUiTests`](#tasks-runideforuitests) task.


#### `version`
{#tasks-downloadrobotserverplugin-version}

The version of the Robot Server Plugin to download.

{type="narrow"}
Type
: `String`

Default value
: `LATEST`


#### `pluginArchive`
{#tasks-downloadrobotserverplugin-pluginarchive}

The Robot Server Plugin archive, downloaded by default to the [Gradle cache](https://docs.gradle.org/current/userguide/directory_layout.html#dir:gradle_user_home).

{type="narrow"}
Type
: `File`

Default value
: [Gradle cache](https://docs.gradle.org/current/userguide/directory_layout.html#dir:gradle_user_home)


#### `outputDir`
{#tasks-downloadrobotserverplugin-outputdir}

Location of the extracted archive.

{type="narrow"}
Type
: `File`

Default value
: `build/robotServerPlugin`


### `downloadZipSignerTask`
{#tasks-downloadzipsignertask}

Resolves and downloads Marketplace ZIP Signer CLI tool used by the [`signPlugin`](#tasks-signplugin) task.


#### `version`
{#tasks-downloadzipsignertask-version}

Version of the ZIP Signer CLI tool to download.

{type="narrow"}
Type
: `String`

Default value
: `LATEST`


#### `cliPath`
{#tasks-downloadzipsignertask-clipath}

Path to the ZIP Signer CLI tool.

{type="narrow"}
Type
: `File`

Default value
: [Gradle cache](https://docs.gradle.org/current/userguide/directory_layout.html#dir:gradle_user_home)


#### `cli`
{#tasks-downloadzipsignertask-cli}

The output of the ZIP Signer CLI tool.

{type="narrow"}
Type
: `File`

Default value
: [`cliPath`](#tasks-downloadzipsignertask-clipath)


### `initializeIntelliJPlugin`
{#tasks-initializeintellijplugin}

Initializes the Gradle IntelliJ Plugin and performs various checks, like if the plugin is up-to-date.


### `instrumentCode`
{#tasks-instrumentcode}

The following attributes help you to tune instrumenting behavior in the `instrumentCode { ... }` block.


#### `ideaDependency`
{#tasks-instrumentcode-ideadependency}

The dependency on IntelliJ IDEA.

{type="narrow"}
Type
: `IdeaDependency`

Default value
: [`intellij.ideaDependency`](#tasks-setupdependencies-idea)


#### `javac2`
{#tasks-instrumentcode-javac2}

Path to the <path>javac2.jar</path> file of IntelliJ IDEA.

{type="narrow"}
Type
: `File`

Default value
: <path>lib/javac2.jar</path> resolved in [`instrumentCode.ideaDependency`](#tasks-instrumentcode-ideadependency)


#### `compilerVersion`
{#tasks-instrumentcode-compilerversion}

A version of instrumenting compiler.
It's used in cases when targeting non-IntelliJ IDEA IDEs (e.g., [CLion](clion.md) or [Rider](rider.md)).

{type="narrow"}
Type
: `String`

Default value
: Build number of the IDE dependency


#### `classesDirs`
{#tasks-instrumentcode-classesdirs}

The list of directories with compiled classes.

{type="narrow"}
Type
: `FileCollection`

Default value
: `sourceSets.[].output.classesDirs`


#### `formDirs`
{#tasks-instrumentcode-formdirs}

The list of directories with GUI Designer form files.

{type="narrow"}
Type
: `FileCollection`

Default value
: `.form` files of the project's source sets.


#### `outputDir`
{#tasks-instrumentcode-outputdir}

The output directory for instrumented classes.

{type="narrow"}
Type
: `File`

Default value
: [`setupInstrumentCode.instrumentedDir`](#tasks-setupinstrumentcode-instrumenteddir)


#### `compilerClassPathFromMaven`
{#tasks-instrumentcode-compilerclasspathfrommaven}

The classpath for Java instrumentation compiler.

{type="narrow"}
Type
: `FileCollection`


### `instrumentedJar`
{#tasks-instrumentedjar}

Create a JAR file with instrumented classes.


### `jarSearchableOptions`
{#tasks-jarsearchableoptions}

Create a JAR file with searchable options to be distributed with the plugin.


#### `outputDir`
{#tasks-jarsearchableoptions-outputdir}

The output directory where the JAR file will be created.

{type="narrow"}
Type
: `String`

Default value
: `build/searchableOptions`


#### `pluginName`
{#tasks-jarsearchableoptions-pluginname}

The name of the plugin.

{type="narrow"}
Type
: `String`

Default value
: [`intellij.pluginName`](#intellij-extension-pluginname)


#### `sandboxDir`
{#tasks-jarsearchableoptions-sandboxdir}

The sandbox output directory.

{type="narrow"}
Type
: `String`

Default value
: [`prepareSandbox.outputDir`](#tasks-preparesandbox)


### `listBundledPlugins`
{#tasks-listbundledplugins}

Lists all IDs of plugins bundled within the currently targeted IDE.
This can be used to determine Plugin ID for setting up [](plugin_dependencies.md).

See also [](#tasks-printBundledPlugins).


#### `ideDir`
{#tasks-listbundledplugins-idedir}

The IDE dependency sources path.
Configured automatically with the [`setupDependencies.idea`](#tasks-setupdependencies-idea) dependency.

{type="narrow"}
Type
: `File`

Default value
: [`setupDependencies.idea`](#tasks-setupdependencies-idea)


#### `outputFile`
{#tasks-listbundledplugins-outputfile}

Path to the file, where the output list will be stored.

{type="narrow"}
Type
: `File`

Default value
: `File("${project.buildDir}/listBundledPlugins.txt")`


### `listProductsReleases`
{#tasks-listproductsreleases}

List all available IntelliJ-based IDE releases with their updates.
The result list is used for testing the plugin with Plugin Verifier using the [`runPluginVerifier`](#tasks-runpluginverifier) task.

Plugin Verifier requires a list of the IDEs that will be used for verifying your plugin build against.
The availability of the releases may change in time, i.e., due to security issues in one version – which will be later removed and replaced with an updated IDE release.

With the [`listProductsReleases`](#tasks-listproductsreleases) task, it is possible to list the currently available IDEs matching given conditions, like platform types, since/until release versions.
Such a list is fetched from the remote updates file: `https://www.jetbrains.com/updates/updates.xml`, parsed and filtered considering the specified [`listProductsReleases.types`](#tasks-listproductsreleases-types), [`listProductsReleases.sinceVersion`](#tasks-listproductsreleases-sinceversion), [`listProductsReleases.untilVersion`](#tasks-listproductsreleases-untilversion) (or [`listProductsReleases.sinceBuild`](#tasks-listproductsreleases-sincebuild), [`listProductsReleases.untilBuild`](#tasks-listproductsreleases-untilbuild)) properties.

The result list is stored within the [`listProductsReleases.outputFile`](#tasks-listproductsreleases-outputfile), which is used as a source for the Plugin Verifier if the [`runPluginVerifier`](#tasks-runpluginverifier) task has no [`runPluginVerifier.ideVersions`](#tasks-runpluginverifier-ideversions) property specified, the output of the [`listProductsReleases`](#tasks-listproductsreleases) task is used.

See also [](#tasks-printproductsreleases).


#### `productsReleasesUpdateFiles`
{#tasks-listproductsreleases-productsreleasesupdatefiles}

Path to the products releases update files. By default, one is downloaded from `IntelliJPluginConstants.IDEA_PRODUCTS_RELEASES_URL`.

{type="narrow"}
Type
: `FileCollection`

Default value
: [Gradle cache](https://docs.gradle.org/current/userguide/directory_layout.html#dir:gradle_user_home)


#### `types`
{#tasks-listproductsreleases-types}

List of types of IDEs that will be listed in results.

{type="narrow"}
Type
: `List<String>`

Default value
: [`intellij.type`](#intellij-extension-type)


#### `sinceVersion`
{#tasks-listproductsreleases-sinceversion}

Lower boundary of the listed results in product marketing version format, e.g., `2020.2.1`.
It takes precedence over the [`listProductsReleases.sinceBuild`](#tasks-listproductsreleases-sincebuild) property.

{type="narrow"}
Type
: `String`

Default value
: [`intellij.version`](#intellij-extension-version)


#### `untilVersion`
{#tasks-listproductsreleases-untilversion}

Upper boundary of the listed results in product marketing version format, e.g., `2020.2.1`.
It takes precedence over the [`listProductsReleases.untilBuild`](#tasks-listproductsreleases-untilbuild) property.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `sinceBuild`
{#tasks-listproductsreleases-sincebuild}

Lower boundary of the listed results in build number format, like `192`.

{type="narrow"}
Type
: `String`

Default value
: [`intellij.version`](#intellij-extension-version)


#### `untilBuild`
{#tasks-listproductsreleases-untilbuild}

Upper boundary of the listed results in build number format, like `192`.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `releaseChannels`
{#tasks-listproductsreleases-releasechannels}

Release channels that product updates will be filtered with.

{type="narrow"}
Type
: `Channel`

Default value
: `EnumSet.allOf(ListProductsReleasesTask.Channel)`


#### `outputFile`
{#tasks-listproductsreleases-outputfile}

Path to the file, where the output list will be stored.

{type="narrow"}
Type
: `File`

Default value
: `File("${project.buildDir}/listProductsReleases.txt")`


#### `androidStudioUpdatePath`
{#tasks-listproductsreleases-androidstudioupdatepath}

For [Android Studio releases](android_studio_releases_list.md), a separated storage for the updates is used.

{type="narrow"}
Type
: `String`

Default value
: `https://raw.githubusercontent.com/JetBrains/intellij-sdk-docs/main/topics/_generated/android_studio_releases.xml`


### `patchPluginXml`
{#tasks-patchpluginxml}

Patches <path>[plugin.xml](plugin_configuration_file.md)</path> files with values provided to the task.

> To maintain and generate an up-to-date changelog, try using the [Gradle Changelog Plugin](https://github.com/JetBrains/gradle-changelog-plugin).
>
{style="note"}

#### `destinationDir`
{#tasks-patchpluginxml-destinationdir}

The directory where the patched <path>[plugin.xml](plugin_configuration_file.md)</path> will be written.

{type="narrow"}
Type
: `String`

Default value
: `${project.buildDir}/patchedPluginXmlFiles`


#### `pluginXmlFiles`
{#tasks-patchpluginxml-pluginxmlfiles}

The list of <path>[plugin.xml](plugin_configuration_file.md)</path> files to patch.

{type="narrow"}
Type
: `List<File>`

Default value
: auto-discovered from the project


#### `pluginDescription`
{#tasks-patchpluginxml-plugindescription}

The description of the plugin used in the [`<description>`](plugin_configuration_file.md#idea-plugin__description) tag.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `sinceBuild`
{#tasks-patchpluginxml-sincebuild}

The lower bound of the [version range](build_number_ranges.md) to be patched used in the `since-build` attribute of the [`<idea-version>`](plugin_configuration_file.md#idea-plugin__idea-version) tag.

{type="narrow"}
Type
: `String`

Default value
: [`intellij.version`](#intellij-extension-version) in `Branch.Build.Fix` format


#### `untilBuild`
{#tasks-patchpluginxml-untilbuild}

The upper bound of the [version range](build_number_ranges.md) to be patched used in the `until-build` attribute of the [`<idea-version>`](plugin_configuration_file.md#idea-plugin__idea-version) tag.

{type="narrow"}
Type
: `String`

Default value
: [`intellij.version`](#intellij-extension-version) in `Branch.Build.*` format


#### `version`
{#tasks-patchpluginxml-version}

The version of the plugin used in the [`<version>`](plugin_configuration_file.md#idea-plugin__version) tag.

{type="narrow"}
Type
: `String`

Default value
: `${project.version}`


#### `changeNotes`
{#tasks-patchpluginxml-changenotes}

The change notes of the plugin used in the [`<change-notes>`](plugin_configuration_file.md#idea-plugin__change-notes) tag.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `pluginId`
{#tasks-patchpluginxml-pluginid}

The ID of the plugin used in the [`<id>`](plugin_configuration_file.md#idea-plugin__id) tag.

{type="narrow"}
Type
: `String`

Default value
: `null`


### `prepareSandbox`
{#tasks-preparesandbox}

Prepares the sandbox directory with the installed plugin and its dependencies.


#### `pluginName`
{#tasks-preparesandbox-pluginname}

The name of the plugin.

{type="narrow"}
Type
: `String`

Default value
: [`intellij.pluginName`](#intellij-extension-pluginname)


#### `configDir`
{#tasks-preparesandbox-configdir}

The directory with the plugin configuration.

{type="narrow"}
Type
: `String`

Default value
: `${intellij.pluginName}/config`


#### `pluginJar`
{#tasks-preparesandbox-pluginjar}

The input plugin JAR file used to prepare the sandbox.

{type="narrow"}
Type
: `File`

Default value
: output of the `jar` task


#### `librariesToIgnore`
{#tasks-preparesandbox-librariestoignore}

Libraries that will be ignored when preparing the sandbox.
By default, it excludes all libraries that are a part of the [`setupDependenciesTask.idea`](#tasks-setupdependencies-idea) dependency.

{type="narrow"}
Type
: `List<File>`

Default value
: `org.jetbrains.intellij.tasks.SetupDependenciesTask.idea.get().jarFiles`


#### `pluginDependencies`
{#tasks-preparesandbox-plugindependencies}

List of dependencies on external plugins.

{type="narrow"}
Type
: `List<PluginDependency>`

Default value
: `org.jetbrains.intellij.IntelliJPluginExtension.getPluginDependenciesList`


### `prepareTestingSandbox`
{#tasks-preparetestingsandbox}

Prepares the sandbox directory with the installed plugin and its dependencies for testing purposes.

See [`prepareSandbox` Task](#tasks-preparesandbox).


### `prepareUiTestingSandbox`
{#tasks-prepareuitestingsandbox}

Prepares the sandbox directory with the installed plugin and its dependencies for UI testing purposes.

See [`prepareSandbox` Task](#tasks-preparesandbox).


### `printProductsReleases`
{#tasks-printproductsreleases}

Print the output produced by the [`listProductsReleases`](#tasks-listproductsreleases) task.


#### `inputFile`
{#tasks-printproductsreleases-inputfile}

Output file provided by the [`listProductsReleases`](#tasks-listproductsreleases) task.


### `printBundledPlugins`
{#tasks-printBundledPlugins}

Print the output produced by the [`listBundledPlugins`](#tasks-listbundledplugins) task.


#### `inputFile`
{#tasks-printBundledPlugins-inputfile}

Output file provided by the [`listBundledPlugins`](#tasks-listbundledplugins) task.


### `publishPlugin`
{#tasks-publishplugin}

Publishes plugin to the remote [JetBrains Marketplace](https://plugins.jetbrains.com) repository.

The following attributes are a part of the Publishing DSL `publishPlugin { ... }` in which allows Gradle to upload plugin to [JetBrains Marketplace](https://plugins.jetbrains.com).
Note that you need to [upload the plugin](publishing_plugin.md#uploading-a-plugin-to-jetbrains-marketplace) to the repository at least once manually (to specify options like the license, repository URL, etc.) before uploads through Gradle can be used.

See the instruction on [how to generate authentication token](https://plugins.jetbrains.com/docs/marketplace/plugin-upload.html).

See the [](publishing_plugin.md#publishing-plugin-with-gradle) tutorial for step-by-step instructions.


#### `token`
{#tasks-publishplugin-token}

Authentication token.

**Required**

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `channels`
{#tasks-publishplugin-channels}

List of channel names to upload plugin to.

{type="narrow"}
Type
: `List<String>`

Default value
: `["default"]`

#### `hidden`
{#tasks-publishplugin-hidden}

Mark the release as hidden to prevent public release after approval.
See [Hidden release](https://plugins.jetbrains.com/docs/marketplace/hidden-plugin.html) in JetBrains Marketplace docs.

{type="narrow"}
Type
: `Boolean`

Default value
: `false`


#### `host`
{#tasks-publishplugin-host}

URL host of a plugin repository.

{type="narrow"}
Type
: `String`

Default value
: [JetBrains Marketplace](https://plugins.jetbrains.com)


#### `distributionFile`
{#tasks-publishplugin-distributionfile}

ZIP file of plugin to upload.

{type="narrow"}
Type
: `File`

Default value
: output of the [`buildPlugin`](#tasks-buildplugin) task


#### `toolboxEnterprise`
{#tasks-publishplugin-toolboxenterprise}

Specify if the Toolbox Enterprise plugin repository service should be used.
This feature is still in the incubating phase and is not yet available for public use.

{type="narrow"}
Type
: `Boolean`

Default value
: `false`


### `runIde`
{#tasks-runide}

Run the IDE instance with the developed plugin installed.

`runIde` task extends the [`JavaExec`](https://docs.gradle.org/current/dsl/org.gradle.api.tasks.JavaExec.html) Gradle task – all properties available in the `JavaExec` as well as the following ones can be used to configure the `runIde` task.

#### `ideDir`
{#tasks-runide-idedir}

The IDE dependency sources path.
Configured automatically with the [`setupDependencies.idea`](#tasks-setupdependencies-idea) dependency.

{type="narrow"}
Type
: `File`

Default value
: [`setupDependencies.idea`](#tasks-setupdependencies-idea)


#### `jbrVersion`
{#tasks-runide-jbrversion}

Custom JetBrains Runtime (JBR) version to use for running the IDE.

{type="narrow"}
Type
: `String`

Default value
: `null`

Accepted values
:
- `8u112b752.4`
- `8u202b1483.24`
- `11_0_2b159`

> For more information about JBR versions and variants, see [](ide_development_instance.md#using-a-jetbrains-runtime-for-the-development-instance).
>
{style="note"}


#### `jbrVariant`
{#tasks-runide-jbrvariant}

JetBrains Runtime (JBR) variant to use when running the IDE with the plugin.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `jbrArch`
{#tasks-runide-jbrarch}

JetBrains Runtime architecture.
By default, it's resolved based on the current OS and JRE architecture.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `pluginsDir`
{#tasks-runide-pluginsdir}

Path to the `plugins` directory within the sandbox prepared with the [`prepareSandbox`](#tasks-preparesandbox) task.
Provided to the `idea.plugins.path` system property.

{type="narrow"}
Type
: `Directory`

Default value
: [`prepareSandbox.destinationDir`](#tasks-preparesandbox)


#### `autoReloadPlugins`
{#tasks-runide-autoreloadplugins}

Enables auto-reload of dynamic plugins.
Dynamic plugins will be reloaded automatically when their JARs are modified.
This allows a much faster development cycle by avoiding a full restart of the development instance after code changes.
Enabled by default in 2020.2 and higher.

See [Enabling Auto-Reload](ide_development_instance.md#enabling-auto-reload) for more details.

{type="narrow"}
Type
: `Boolean`

Default value
: `true`


### `runIdeForUiTests`
{#tasks-runideforuitests}

Run the IDE instance with the developed plugin and robot-server installed and ready for UI testing.

See [intellij-ui-test-robot](https://github.com/JetBrains/intellij-ui-test-robot) project.

See [`runIde`](#tasks-runide) task for more details.


### `runIdePerformanceTest`
{#tasks-runideperformancetest}

Run performance tests on the IDE with the developed plugin installed.

The `runIdePerformanceTest` task extends the `RunIdeBase` task, so all configuration attributes of `JavaExec` and [`runIde`](#tasks-runide) tasks can be used in the `runIdePerformanceTest` as well.
See [`runIde`](#tasks-runide) task for more details.

Currently, the task is under adaptation; more documentation will be added in the future.

#### `testDataDir`
{#tasks-runideperformancetest-testdatadir}

Path to directory with test projects and <path>.ijperf</path> files.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `artifactsDir`
{#tasks-runideperformancetest-artifactsdir}

Path to the directory where performance test artifacts (IDE logs, snapshots, screenshots, etc.) will be stored.
If the directory doesn't exist, it will be created.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `profilerName`
{#tasks-runideperformancetest-profilername}

Name of the profiler which will be used during execution.

{type="narrow"}
Type
: `ProfilerName`

Default value
: `ProfilerName.ASYNC`

Acceptable values
:
- `ProfilerName.ASYNC`
- `ProfilerName.YOURKIT`


### `runPluginVerifier`
{#tasks-runpluginverifier}

Run the [IntelliJ Plugin Verifier](https://github.com/JetBrains/intellij-plugin-verifier) tool to check the binary compatibility with specified IDE builds (see also [](verifying_plugin_compatibility.md)).

Plugin Verifier DSL `runPluginVerifier { ... }` allows to define the list of IDEs used for the verification, as well as explicit tool version and any of the available [options](https://github.com/JetBrains/intellij-plugin-verifier#common-options) by proxifying them to the Verifier CLI.

> For more details, examples or issues reporting, go to the [IntelliJ Plugin Verifier](https://github.com/JetBrains/intellij-plugin-verifier) repository.
>

> To run Plugin Verifier in [`-offline`](https://github.com/JetBrains/intellij-plugin-verifier/pull/58) mode, set the Gradle [`offline` start parameter](https://docs.gradle.org/current/javadoc/org/gradle/StartParameter.html#setOffline-boolean-).
>


#### `ideVersions`
{#tasks-runpluginverifier-ideversions}

The IDEs to be checked in [`intellij.version`](#intellij-extension-version) format, i.e.: `["IC-2019.3.5", "PS-2019.3.2"]`.
Check the available build versions on [IntelliJ Platform Builds list](https://jb.gg/intellij-platform-builds-list).

{type="narrow"}
Type
: `List<String>`

Default value
: output of the [`listProductsReleases`](#tasks-listproductsreleases) task


#### `verifierVersion`
{#tasks-runpluginverifier-verifierversion}

IntelliJ Plugin Verifier version.
Do not change unless absolutely required.

{type="narrow"}
Type
: `String`

Default value
: `LATEST`


#### `verifierPath`
{#tasks-runpluginverifier-verifierpath}

Local path to the pre-downloaded IntelliJ Plugin Verifier JAR file.
If set, [`runPluginVerifier.verifierVersion`](#tasks-runpluginverifier-verifierversion) is ignored.

{type="narrow"}
Type
: `String`

Default value
: path to the JAR file resolved using the [`runPluginVerifier.verifierVersion`](#tasks-runpluginverifier-verifierversion) property


#### `localPaths`
{#tasks-runpluginverifier-localpaths}

A list of the paths to locally installed IDE distributions that should be used for verification in addition to those specified in [`runPluginVerifier.ideVersions`](#tasks-runpluginverifier-ideversions).

{type="narrow"}
Type
: `List<File>`

Default value
: `[]`


#### `distributionFile`
{#tasks-runpluginverifier-distributionfile}

ZIP file of the plugin to verify.
If empty, the task will be skipped.

{type="narrow"}
Type
: `File`

Default value
: output of the `buildPlugin` task


#### `failureLevel`
{#tasks-runpluginverifier-failurelevel}

Defines the verification level at which the task should fail if any reported issue matches.
Can be set as `FailureLevel` enum or `EnumSet<FailureLevel>`.

{type="narrow"}
Type
: `org.jetbrains.intellij.tasks.RunPluginVerifierTask.FailureLevel`

Default value
: `FailureLevel.COMPATIBILITY_PROBLEMS`

Accepted values
:
- `FailureLevel.COMPATIBILITY_WARNINGS` - Compatibility warnings detected against the specified IDE version.
- `FailureLevel.COMPATIBILITY_PROBLEMS` - Compatibility problems detected against the specified IDE version.
- `FailureLevel.DEPRECATED_API_USAGES` - Plugin uses API marked as deprecated (`@Deprecated`).
- `FailureLevel.SCHEDULED_FOR_REMOVAL_API_USAGES` - Plugin uses API marked as scheduled for removal (`@ApiStatus.ScheduledForRemoval`).
- `FailureLevel.EXPERIMENTAL_API_USAGES` - Plugin uses API marked as experimental (`@ApiStatus.Experimental`).
- `FailureLevel.INTERNAL_API_USAGES` - Plugin uses API marked as internal (`@ApiStatus.Internal`).
- `FailureLevel.OVERRIDE_ONLY_API_USAGES` - Override-only API is used incorrectly (`@ApiStatus.OverrideOnly`).
- `FailureLevel.NON_EXTENDABLE_API_USAGES` - Non-extendable API is used incorrectly (`@ApiStatus.NonExtendable`).
- `FailureLevel.PLUGIN_STRUCTURE_WARNINGS` - The structure of the plugin is not valid.
- `FailureLevel.MISSING_DEPENDENCIES` - Plugin has some dependencies missing.
- `FailureLevel.INVALID_PLUGIN` - "Provided plugin artifact is not valid."
- `FailureLevel.NOT_DYNAMIC` - "Plugin cannot be loaded/unloaded without IDE restart."
- `FailureLevel.ALL` - All of the above
- `FailureLevel.NONE` - None of the above


#### `verificationReportsDir`
{#tasks-runpluginverifier-verificationreportsdir}

The path to the directory where verification reports will be saved.

{type="narrow"}
Type
: `String`

Default value
: `${project.buildDir}/reports/pluginVerifier`

#### `verificationReportsFormats`
{#tasks-runpluginverifier-verificationreportsformats}

The output formats of the verification reports that will be emitted.

{type="narrow"}
Type
: `List<String>`

Default value
: `["plain", "html"]`

Acceptable values
:
- `plain` (console output)
- `html` (HTML format)
- `markdown` (Markdown format)

#### `downloadDir`
{#tasks-runpluginverifier-downloaddir}

The path to the directory where IDEs used for the verification will be downloaded.
By default, it relies on the `plugin.verifier.home.dir` system property and falls back to the `XDG_CACHE_HOME` environment variable – see [XDG Base Directory](https://wiki.archlinux.org/title/XDG_Base_Directory) for more details.

{type="narrow"}
Type
: `String`

Default value
: `System.getProperty("plugin.verifier.home.dir")/ides`, `System.getenv("XDG_CACHE_HOME")/pluginVerifier/ides`, `System.getProperty("user.home")/.cache/pluginVerifier/ides` or system temporary directory.


#### `jbrVersion`
{#tasks-runpluginverifier-jbrversion}

Custom JetBrains Runtime (JBR) version to use for running the verification.

{type="narrow"}
Type
: `String`

Default value
: `null`

Acceptable values
:
- `8u112b752.4`
- `8u202b1483.24`
- `11_0_2b159`

> For more information about JBR versions and variants, see [](ide_development_instance.md#using-a-jetbrains-runtime-for-the-development-instance).
>
{style="note"}


#### `jbrVariant`
{#tasks-runpluginverifier-jbrvariant}

JetBrains Runtime (JBR) variant to use when running the verification.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `jbrArch`
{#tasks-runpluginverifier-jbrarch}

JetBrains Runtime architecture.
By default, it's resolved based on the current OS and JRE architecture.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `runtimeDir`
{#tasks-runpluginverifier-runtimedir}

The path to the directory containing the JVM runtime. Overrides [`runPluginVerifier.jbrVersion`](#tasks-runpluginverifier-jbrversion).

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `externalPrefixes`
{#tasks-runpluginverifier-externalprefixes}

The list of class prefixes from the external libraries.
The Plugin Verifier will not report `No such class` for classes of these packages.

{type="narrow"}
Type
: `List<String>`

Default value
: `[]`

#### `ignoredProblems`
{#tasks-runpluginverifier-ignoredproblems}

A file that contains a list of problems that will be ignored in the verification report.
It must contain lines in form `<plugin_xml_id>:<plugin_version>:<problem_description_regexp_pattern>`.

{type="narrow"}
Type
: `File`

Default value
: `null`

#### `teamCityOutputFormat`
{#tasks-runpluginverifier-teamcityoutputformat}

A flag that controls the output format - if set to `true`, the [TeamCity Tests Format](https://www.jetbrains.com/help/teamcity/service-messages.html) – the TeamCity compatible output will be returned to stdout.

{type="narrow"}
Type
: `Boolean`

Default value
: `false`


#### `subsystemsToCheck`
{#tasks-runpluginverifier-subsystemstocheck}

Specify which subsystems of the IDE should be checked.

{type="narrow"}
Type
: `String`

Default value
: `all`

Acceptable values
:
- `all`
- `android-only`
- `without-android`

#### `freeArgs`
{#tasks-runpluginverifier-freeArgs}

Arbitrary command line arguments that are passed to the IntelliJ Plugin Verifier as is in addition to the arguments provided by the Plugin Verifier DSL.

Arguments that require a value must be provided in the separate elements of the list.

{type="narrow"}
Type
: `List<String>`

Default value
: `[]`

Acceptable values
:
- `["-team-city"]` as a switch
- `["-suppress-internal-api-usages", "jetbrains-plugins"]` as an argument with a value

### `setupDependencies`
{#tasks-setupdependencies}

Setup required dependencies for building and running the project.
This task is automatically added to the ["After Sync" Gradle trigger](https://www.jetbrains.com/help/idea/work-with-gradle-tasks.html#config_triggers_gradle) to make the IntelliJ SDK dependency available for IntelliJ IDEA right after the Gradle synchronization.

> After removing the Gradle IntelliJ Plugin from your project, the `Task 'setupDependencies' not found in root project` exception may occur.
> See [Frequently Asked Questions](tools_gradle_intellij_plugin_faq.md#task-setupdependencies-not-found-in-root-project) for more details.
>
{style="warning"}


#### `idea`
{#tasks-setupdependencies-idea}

This task exposes the `setupDependencies.idea` property which contains a reference to the resolved IDE dependency used for building the plugin.

This property can be referred in Gradle configuration to access IDE dependency classpath.


### `setupInstrumentCode`

Prepares code instrumentation tasks.


#### `instrumentationEnabled`
{#tasks-setupinstrumentcode-instrumentationenabled}

A flag that controls whether code instrumentation is enabled.

{type="narrow"}
Type
: `Boolean`

Default value
: [`intellij.instrumentCode`](#intellij-extension-instrumentcode)


#### `instrumentedDir`
{#tasks-setupinstrumentcode-instrumenteddir}

The path to the directory where instrumented classes will be saved.

{type="narrow"}
Type
: `Directory`

Default value
: `${project.buildDir}/instrumented`



### `signPlugin`
{#tasks-signplugin}

Sign the ZIP archive with the provided key using the [marketplace-zip-signer](https://github.com/JetBrains/marketplace-zip-signer) library.

To sign the plugin before publishing to [JetBrains Marketplace](https://plugins.jetbrains.com) with the [`signPlugin`](#tasks-signplugin) task, it is required to provide a certificate chain and a private key with its password using `signPlugin { ... }` Plugin Signing DSL.

As soon as [`signPlugin.privateKey`](#tasks-signplugin-privatekey) (or [`signPlugin.privateKeyFile`](#tasks-signplugin-privatekeyfile)) and [`signPlugin.certificateChain`](#tasks-signplugin-certificatechain) (or [`signPlugin.certificateChainFile`](#tasks-signplugin-certificatechainfile)) properties are specified, the task will be executed automatically right before the [`publishPlugin`](#tasks-publishplugin) task.

For more details, see [Plugin Signing](plugin_signing.md) article.

#### `certificateChain`
{#tasks-signplugin-certificatechain}

A string containing X509 certificates.
The first certificate from the chain will be used as a certificate authority (CA).
Refers to `cert` CLI option.

> This property accepts value provided as a plain text or base64-encoded string.
>
{style="note"}

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `certificateChainFile`
{#tasks-signplugin-certificatechainfile}

A file containing X509 certificates.
The first certificate from the chain will be used as a certificate authority (CA).
Refers to `cert-file` CLI option.

{type="narrow"}
Type
: `File`

Default value
: `null`


#### `privateKey`
{#tasks-signplugin-privatekey}

Encoded private key in PEM format.
Refers to `key` CLI option.

> This property accepts value provided as a plain text or base64-encoded string.
>
{style="note"}

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `privateKeyFile`
{#tasks-signplugin-privatekeyfile}

A file with the encoded private key in PEM format.
Refers to `key-file` CLI option.

{type="narrow"}
Type
: `File`

Default value
: `null`


#### `password`
{#tasks-signplugin-password}

Password required to decrypt the private key.
Refers to `key-pass` CLI option.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `cliVersion`
{#tasks-signplugin-cliversion}

Returns the version of [JetBrains Marketplace ZIP Signer CLI](https://github.com/JetBrains/marketplace-zip-signer) that will be used.

{type="narrow"}
Type
: `String`

Default value
: `LATEST`


#### `cliPath`
{#tasks-signplugin-clipath}

Path to [JetBrains Marketplace ZIP Signer CLI](https://github.com/JetBrains/marketplace-zip-signer) file.
Takes precedence over [`signPlugin.cliVersion`](#tasks-signplugin-cliversion).

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `keyStore`
{#tasks-signplugin-keystore}

KeyStore file path.
Refers to `ks` CLI option.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `keyStorePassword`
{#tasks-signplugin-keystorepassword}

KeyStore password.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `keyStoreKeyAlias`
{#tasks-signplugin-keystorekeyalias}

KeyStore key alias.
Refers to `ks-key-alias` CLI option.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `keyStoreType`
{#tasks-signplugin-keystoretype}

KeyStore type.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `keyStoreProviderName`
{#tasks-signplugin-keystoreprovidername}

JCA KeyStore Provider name.
Refers to `ks-provider-name` CLI option.

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `inputArchiveFile`
{#tasks-signplugin-inputarchivefile}

Input, unsigned ZIP archive file.
Refers to `in` CLI option.

Provided by the [`buildPlugin`](#tasks-buildplugin) task.

#### `outputArchiveFile`
{#tasks-signplugin-outputarchivefile}

Output, signed ZIP archive file.
Refers to `out` CLI option.

Predefined with the name of the ZIP archive file with `-signed` name suffix attached.

{type="narrow"}
Type
: `File`


### `verifyPlugin`
{#tasks-verifyplugin}

Validates completeness and contents of <path>[plugin.xml](plugin_configuration_file.md)</path> descriptors as well as plugin archive structure.


#### `ignoreFailures`
{#tasks-verifyplugin-ignorefailures}

Specify whether the build should fail when the verifications performed by this task fail.

{type="narrow"}
Type
: `Boolean`

Default value
: `false`


#### `ignoreWarnings`
{#tasks-verifyplugin-ignorewarnings}

Specify whether the build should fail when the verifications performed by this task emit warnings.

{type="narrow"}
Type
: `Boolean`

Default value
: `true`


#### `ignoreUnacceptableWarnings`
{#tasks-verifyplugin-ignoreunacceptablewarnings}

Specify whether the build should fail when the verifications performed by this task emit unacceptable warnings.

{type="narrow"}
Type
: `Boolean`

Default value
: `false`


#### `pluginDir`
{#tasks-verifyplugin-plugindir}

The location of the built plugin file which will be used for verification.

{type="narrow"}
Type
: `File`

Default value
: `${prepareSandboxTask.destinationDir}/${prepareSandboxTask.pluginName}`


### `verifyPluginConfiguration`
{#tasks-verifypluginconfiguration}

Validates the plugin project configuration:

- The [`patchPluginXml.sinceBuild`](#tasks-patchpluginxml-sincebuild) property can't be lower than the major version of the currently used IntelliJ SDK set with the [`intellij.version`](#intellij-extension-version).
- The `sourceCompatibility` property of the Java configuration can't be lower than the Java version used for assembling the IntelliJ SDK specified by the [`intellij.version`](#intellij-extension-version).
- The `targetCompatibility` property of the Java configuration can't be higher than the Java version required for running IDE in the version specified by the [`intellij.version`](#intellij-extension-version) or [`patchPluginXml.sinceBuild`](#tasks-patchpluginxml-sincebuild) properties.
- The `kotlinJvmTarget` property of the Kotlin configuration (if used) can't be higher than the Java version required for running IDE in the version specified by the [`intellij.version`](#intellij-extension-version) or [`patchPluginXml.sinceBuild`](#tasks-patchpluginxml-sincebuild) properties.
- The `kotlinLanguageVersion` property of the Kotlin configuration (if used) can't be lower than the Kotlin bundled with IDE in the version specified by the [`intellij.version`](#intellij-extension-version) or [`patchPluginXml.sinceBuild`](#tasks-patchpluginxml-sincebuild) properties.
- The `kotlinApiVersion` property of the Kotlin configuration (if used) can't be higher than the Kotlin bundled with IDE in the version specified by the [`intellij.version`](#intellij-extension-version) or [`patchPluginXml.sinceBuild`](#tasks-patchpluginxml-sincebuild) properties.

> For more details regarding the Java version used in the specific IntelliJ SDK, see [](build_number_ranges.md).

- The dependency on the Kotlin Standard Library (stdlib) is automatically added when using the Gradle Kotlin plugin and may conflict with the version provided with the IntelliJ Platform.

> Read more about controlling this behavior on [](using_kotlin.md#kotlin-standard-library).

- An old default [`runPluginVerifier.downloadDir`][#tasks-runpluginverifier-downloaddir] path contains downloaded IDEs, but another default is in use. Links to the [FAQ section](tools_gradle_intellij_plugin_faq.md#the-plugin-verifier-download-directory-is-set-to-but-downloaded-ides-were-also-found-in)


### `verifyPluginSignature`
{#tasks-verifypluginsignature}

Validates the signature of the plugin archive file using the [marketplace-zip-signer](https://github.com/JetBrains/marketplace-zip-signer) library.

For more details, see [Plugin Signing](plugin_signing.md) article.

#### `certificateChain`
{#tasks-verifypluginsignature-certificatechain}

> Currently unavailable — please use [`verifyPluginSignature.certificateChainFile`](#tasks-verifypluginsignature-certificatechainfile) instead.
>
{style="note"}

{type="narrow"}
Type
: `String`

Default value
: `null`


#### `certificateChainFile`
{#tasks-verifypluginsignature-certificatechainfile}

A file containing X509 certificates.
The first certificate from the chain will be used as a certificate authority (CA).
Refers to `cert` CLI option.

By default, the certificate chain file is set to the value of the [`signPlugin.certificateChainFile`](#tasks-signplugin-certificatechainfile) property.
If absent, the [`signPlugin.certificateChain`](#tasks-signplugin-certificatechain) property is used instead, but due to the CLI tool limitations, a temporary file is created and the certificate chain is written to it.

{type="narrow"}
Type
: `File`

Default value
: [`signPlugin.certificateChainFile`](#tasks-signplugin-certificatechainfile)


#### `inputArchiveFile`
{#tasks-verifypluginsignature-inputarchivefile}

Input, signed ZIP archive file.
Refers to `in` CLI option.

Provided by the [`signPlugin`](#tasks-signplugin) task.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Gradle IntelliJ Plugin (1.x) – Build Features
<primary-label ref="Obsolete"/>

<link-summary>Overview of Gradle IntelliJ Plugin (1.x) feature flags.</link-summary>

<include from="tools_gradle_intellij_plugin.md" element-id="gradlePluginObsolete"/>

With ongoing Gradle IntelliJ Plugin releases, new features are introduced that require additional research, collecting more feedback from developers, or should be enabled or disabled under particular conditions.
Build Features are an implementation of the feature flags concept and let you control some behaviors of the Gradle IntelliJ Plugin.

To enable or disable a particular feature, add a Project property to the <path>gradle.properties</path> file with the following pattern:

```
org.jetbrains.intellij.buildFeature.<buildFeatureName>=<true|false>
```

E.g., to disable the [`selfUpdateCheck`](#selfupdatecheck) feature, add this line:

```
org.jetbrains.intellij.buildFeature.selfUpdateCheck=false
```


## `noSearchableOptionsWarning`

When the [`buildSearchableOptions`](tools_gradle_intellij_plugin.md#tasks-buildsearchableoptions) doesn't produce any results, e.g., when the plugin doesn't implement any [Settings](settings.md), a warning is shown to suggest [disabling the task](tools_gradle_intellij_plugin_faq.md#how-to-disable-building-searchable-options) for better performance.

{type="narrow"}
Default value
: `true`

Example
:
```
org.jetbrains.intellij.buildFeature.buildSearchableOptions=false
```


## `paidPluginSearchableOptionsWarning`

Due to IDE limitations, it is impossible to run the IDE in headless mode to collect searchable options for a paid plugin.
As paid plugins require providing a valid license and presenting a UI dialog, it is impossible to handle such a case, and the task will fail.
This feature flag displays the given warning when the task is run by a paid plugin.

{type="narrow"}
Default value
: `true`

Example
:
```
org.jetbrains.intellij.buildFeature.paidPluginSearchableOptionsWarning=false
```


## `selfUpdateCheck`

Checks whether the currently used Gradle IntelliJ Plugin is outdated and if a new release is available.
The plugin performs an update check on every run asking the GitHub Releases page for the redirection URL
to the latest version with `HEAD` HTTP request: `https://github.com/jetbrains/gradle-intellij-plugin/releases/latest`.

If the current version is outdated, the plugin will emit a warning with its current and the latest version.

Feature respects the Gradle [`--offline`](https://docs.gradle.org/current/userguide/command_line_interface.html#sec:command_line_execution_options) mode.

> It is strongly suggested to always use the latest available version. Older plugin versions may also not fully support the latest IDE releases.

{type="narrow"}
Default value
: `true`

Example
:
```
org.jetbrains.intellij.buildFeature.selfUpdateCheck=false
```
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Gradle IntelliJ Plugin (1.x) – Usage Examples
<primary-label ref="Obsolete"/>

<link-summary>Usage Examples of plugins using Gradle IntelliJ Plugin (1.x).</link-summary>

<include from="tools_gradle_intellij_plugin.md" element-id="gradlePluginObsolete"/>

The JetBrains Marketplace platform provides the [IntelliJ Platform Explorer](https://jb.gg/ipe) – a search tool for browsing Extension Points inside existing implementations of open-source IntelliJ Platform plugins.

One of its features is the possibility of filtering the plugins by those that utilize [Gradle](https://jb.gg/ipe?buildSystem=gradle) or [Gradle KTS](https://jb.gg/ipe?buildSystem=gradle_kts) build scripts.

As examples of using this plugin, you can also check out the following projects:

- [Erlang plugin](https://github.com/ignatov/intellij-erlang) and its [TeamCity build configuration](https://teamcity.jetbrains.com/project.html?projectId=IntellijIdeaPlugins_Erlang&tab=projectOverview)
- [Perl5 plugin](https://github.com/hurricup/Perl5-IDEA)
- [Bamboo Soy plugin](https://github.com/google/bamboo-soy) and its [Travis configuration file](https://github.com/google/bamboo-soy/blob/master/.travis.yml)
- [AceJump plugin](https://github.com/johnlindquist/AceJump)
- [EmberJS plugin](https://github.com/Turbo87/intellij-emberjs)
- [Robot plugin](https://github.com/AmailP/robot-plugin)
- [SQLDelight Android Studio Plugin](https://github.com/square/sqldelight/tree/master/sqldelight-idea-plugin)
- [idear plugin](https://github.com/breandan/idear)
- [SonarLint plugin](https://github.com/SonarSource/sonar-intellij)
- [IdeaVim plugin](https://github.com/JetBrains/ideavim) and its [TeamCity build configuration](https://teamcity.jetbrains.com/project.html?projectId=IdeaVim&guest=1)
- [Adb Idea](https://github.com/pbreault/adb-idea) is configured to build and run against stable, beta or preview (canary) releases of Android Studio
- [Gerrit](https://github.com/uwolfer/gerrit-intellij-plugin) uses Travis CI inclusive automated publishing of releases to GitHub and JetBrains plugin repository (triggered by version tag creation)
- [.ignore](https://github.com/JetBrains/idea-gitignore)
- [Minecraft Development](https://github.com/minecraft-dev/MinecraftDev)
    - Mixes Java, Kotlin, and Groovy code
    - Uses [Grammar-Kit]
    - Uses a Kotlin version not bundled with IntelliJ IDEA
- [Unity 3D plugin](https://github.com/JetBrains/resharper-unity) for JetBrains Rider
- [AEM Tools plugin](https://github.com/aemtools/aemtools) for Adobe Experience Manager integration
    - Fully written in Kotlin
    - Uses template language
- [F# plugin](https://github.com/JetBrains/resharper-fsharp/tree/net222/rider-fsharp) for JetBrains Rider
- [Rainbow Brackets](https://github.com/izhangzhihao/intellij-rainbow-brackets)
    - Fully written in Kotlin
    - Uses other IntelliJ IDEA plugins as test dependencies
    - Circle CI configuration file & Travis CI configuration file
    - Auto submit anonymous feedback as GitHub issues
- [Requirements](https://github.com/meanmail-dev/requirements)
    - Fully written in Kotlin
    - Uses other IntelliJ IDEA plugins as test dependencies
    - Uses [Grammar-Kit]
    - Uses a Kotlin version not bundled with IntelliJ IDEA
- [EduTools](https://github.com/JetBrains/educational-plugin)
    - Mixes Java and Kotlin code

[Grammar-Kit]: https://github.com/JetBrains/Grammar-Kit
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Gradle IntelliJ Plugin (1.x) – FAQ
<primary-label ref="Obsolete"/>

<link-summary>FAQ for using Gradle IntelliJ Plugin (1.x)</link-summary>

<include from="tools_gradle_intellij_plugin.md" element-id="gradlePluginObsolete"/>

### How to target 2022.3 platform?

<include from="snippets.md" element-id="gradlePluginVersion"/>

### How to modify JVM arguments of runIde task?

[`runIde`](tools_gradle_intellij_plugin.md#tasks-runide) task is a [Java Exec](https://docs.gradle.org/current/dsl/org.gradle.api.tasks.JavaExec.html) task and can be modified according to the documentation.

To add some JVM arguments while launching the IDE, configure [`runIde`](tools_gradle_intellij_plugin.md#tasks-runide) task as follows:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
tasks {
  runIde {
    jvmArgs("-DmyProperty=value")
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
runIde {
  jvmArgs "-DmyProperty=value"
}
```

</tab>
</tabs>

### How to modify system properties of runIde task?

Using the [very same task documentation](https://docs.gradle.org/current/dsl/org.gradle.api.tasks.JavaExec.html), configure [`runIde`](tools_gradle_intellij_plugin.md#tasks-runide) task:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
tasks {
  runIde {
    systemProperty("name", "value")
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
runIde {
  systemProperty("name", "value")
}
```

</tab>
</tabs>

### How to disable automatic reload of dynamic plugins?

See [](ide_development_instance.md#enabling-auto-reload) for important caveats.

Configure [`runIde`](tools_gradle_intellij_plugin.md#tasks-runide) task as follows:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
tasks {
  runIde {
    autoReloadPlugins.set(false)
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
runIde {
  autoReloadPlugins = false
}
```

</tab>
</tabs>

### How to disable building searchable options?

Building searchable options can be disabled as a task:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
tasks {
  buildSearchableOptions {
    enabled = false
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
buildSearchableOptions.enabled = false
```

</tab>
</tabs>

As a result of disabling building searchable options, the [Settings](settings.md) that your plugin provides won't be searchable in the <ui-path>Settings</ui-path> dialog.
Disabling of the task is suggested for plugins that are not intended to provide custom settings.

### How to show log file of sandbox instance?

The most convenient way to see the logs of running IDE is to add a tab to the <control>Run</control> tool window displaying the contents of <path>idea.log</path> file.
In the Gradle `runIde` run configuration, add the log file path according to [sandbox location](ide_development_instance.md#the-development-instance-sandbox-directory) as described in [View logs](https://www.jetbrains.com/help/idea/setting-log-options.html).

### How to add a custom file inside plugin distribution?

[`prepareSandbox`](tools_gradle_intellij_plugin.md#tasks-preparesandbox) task is a [`Sync`](https://docs.gradle.org/current/dsl/org.gradle.api.tasks.Sync.html) task and can be modified accordingly.
Something like following should work:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
tasks {
  prepareSandbox {
    from("yourFile") {
      into("${intellij.pluginName.get()}/lib/")
    }
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
prepareSandbox {
  from("yourFile") {
    into "${intellij.pluginName.get()}/lib/"
  }
}
```

</tab>
</tabs>

### Task `setupDependencies` not found in root project

The [`setupDependencies`](tools_gradle_intellij_plugin.md#tasks-setupdependencies) task is designed to fetch the target IDE dependency from the IntelliJ Repository in the after-sync Gradle phase, but only when working inside IntelliJ IDEA – to make the IntelliJ SDK classes resolved and code completion available.
To achieve that, the [`gradle-idea-ext-plugin`](https://github.com/JetBrains/gradle-idea-ext-plugin) is used, which alters the IDEA project's <path>.idea/workspace.xml</path> file making the [`setupDependencies`](tools_gradle_intellij_plugin.md#tasks-setupdependencies) task activated on `after_sync` event.

Unfortunately, this entry remains even after disabling the `org.jetbrains.intellij` plugin in a project – the [`setupDependencies`](tools_gradle_intellij_plugin.md#tasks-setupdependencies) task won't be resolved appropriately, which produces the following exception:

```
Task 'setupDependencies' not found in root project 'projectName'.
```

To fix that, manually edit the <path>.idea/workspace.xml</path> file removing mentioned entry, go to the <control>Gradle</control> tool window, select the <ui-path>Tasks Activation</ui-path> action from the context menu of the root project item, and remove it.

### How to expose my plugin API sources to dependent plugins?

See the [](bundling_plugin_openapi_sources.md) section for details.

### The Plugin Verifier download directory is set to [...], but downloaded IDEs were also found in [...]

With the `1.10.0` release, the [`runPluginVerifier`](tools_gradle_intellij_plugin.md#tasks-runpluginverifier) task uses the `XDG_CACHE_HOME` environment variable (see [XDG Base Directory](https://wiki.archlinux.org/title/XDG_Base_Directory) for more details) to resolve the default directory for downloaded IDEs – instead of the user's home directory.
We recommend moving your existing IDEs stored i.e., in <path>~/.pluginVerifier/ides/</path> directory into <path>\$XDG_CACHE_HOME\$/pluginVerifier/ides</path> to avoid downloading them once again.

In case you want to keep the downloaded archives in the previous location, specify the given path explicitly to the [`runPluginVerifier.downloadDir`](tools_gradle_intellij_plugin.md#tasks-runpluginverifier-downloaddir) property:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
tasks {
  runPluginVerifier {
    downloadDir.set(System.getProperty("user.home") + "/.pluginVerifier/ides")
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
runPluginVerifier {
  downloadDir = System.getProperty("user.home") + "/.pluginVerifier/ides"
}
```

</tab>
</tabs>


### JaCoCo Reports 0% Coverage

The Gradle IntelliJ Plugin, when targeting the IntelliJ SDK `2022.1+`, uses the `PathClassLoader` class loader by the following system property:

```
-Djava.system.class.loader=com.intellij.util.lang.PathClassLoader
```

Because of that, JaCoCo – and other external tools that rely on classes available in the bootstrap class loader – fail to discover plugin classes.

In addition, if the code instrumentation is enabled (see [`intellij.instrumentCode`](tools_gradle_intellij_plugin.md#intellij-extension-instrumentcode)), it's required to switch to the compiled and instrumented output instead of a default compiled classes.

The following changes to your Gradle configuration file:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
tasks {
  withType<Test> {
    configure<JacocoTaskExtension> {
      isIncludeNoLocationClasses = true
      excludes = listOf("jdk.internal.*")
    }
  }

  jacocoTestReport {
    classDirectories.setFrom(instrumentCode)
  }

  jacocoTestCoverageVerification {
    classDirectories.setFrom(instrumentCode)
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
test {
  jacoco {
    includeNoLocationClasses = true
    excludes = ["jdk.internal.*"]
  }
}

jacocoTestReport {
  classDirectories.setFrom(instrumentCode)
}

jacocoTestCoverageVerification {
  classDirectories.setFrom(instrumentCode)
}
```

</tab>
</tabs>


### Exception `SSLPeerUnverifiedException: peer not authenticated`

When using Java `11.0.2` for building plugins, resolving dependencies (or making any other network requests) in Gradle IntelliJ Plugin fails due to the [JDK-8220723](https://bugs.openjdk.org/browse/JDK-8220723) issue with the following exception:

```
Exception in thread "main" javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
```

To fix that issue, upgrade the Java version to the latest patch available of the major version of your choice.


### How to add a dependency on a plugin available in the file system?

It is possible to add a dependency on a plugin available in the file system — like a plugin update downloaded manually from JetBrains Marketplace or built separately in another project.

To configure the dependency, add the `File` instance to the [`intellij.plugins`](tools_gradle_intellij_plugin.md#intellij-extension-plugins) property and point it to the extracted plugin's directory which contains the <path>lib</path> directory.

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellij {
    plugins.set(listOf(file("/path/to/plugin/")))
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellij {
    plugins = [file("/path/to/plugin/")]
}
```

</tab>
</tabs>

It is also possible to refer to the sandbox directory of another Gradle project — to do that, point to the <path>/projects/plugin-name/build/idea-sandbox/plugins/plugin-name/</path> directory.


### Kotlin compiler throws `Out of memory. Java heap space` error

Please upgrade to Kotlin 1.9.0. See the [](using_kotlin.md#incremental-compilation) section if using Kotlin 1.8.20.

<include from="snippets.md" element-id="missingContent"/>

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# IntelliJ Platform Gradle Plugin (2.x)

<link-summary>IntelliJ Platform Gradle Plugin user and migration guide.</link-summary>

<tldr id="tldr">

**Current Release**: %intellij-platform-gradle-plugin-version%

**GitHub**: [Releases & Changelog](https://github.com/JetBrains/gradle-intellij-plugin/releases), [Issue Tracker](https://github.com/JetBrains/gradle-intellij-plugin/issues)

**Slack**: [#intellij-platform-gradle-plugin](https://jetbrains-platform.slack.com/archives/C05C80200LS) on the [JetBrains Platform Slack](https://plugins.jetbrains.com/slack/)

</tldr>

The _IntelliJ Platform Gradle Plugin 2.x_ is a [Gradle](https://docs.gradle.org/current/userguide/userguide.html)
plugin for building, testing, verifying, configuring environments, and publishing plugins for IntelliJ-based IDEs.
It is the successor of _[](tools_gradle_intellij_plugin.md)_ which is no longer under active development.

Learn more about it in the [Release Announcement](https://blog.jetbrains.com/platform/2024/07/intellij-platform-gradle-plugin-2-0/).

<snippet id="faq">

> See [](tools_intellij_platform_gradle_plugin_faq.md) and [](tools_intellij_platform_gradle_plugin_migration.md).
>
{title="FAQ"}

</snippet>

## Requirements

IntelliJ Platform Gradle Plugin 2.x requires the following *minimal* versions:

- IntelliJ Platform: **2022.3**
- Gradle: **8.2**

  See [the Gradle Installation guide](https://gradle.org/install/) on how to upgrade.
- Java Runtime: **17**

  See <control>Gradle JVM</control> in <ui-path>Settings | Build, Execution, Deployment | Build Tools | Gradle</ui-path>.

## Usage

> Note that the plugin has a new ID `org.jetbrains.intellij.platform`.
>
{style="note"}

To apply the IntelliJ Platform Gradle Plugin to a project, add the following entry to the `plugins`
block in the Gradle build file:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
plugins {
  id("org.jetbrains.intellij.platform") version "%intellij-platform-gradle-plugin-version%"
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
plugins {
  id 'org.jetbrains.intellij.platform' version '%intellij-platform-gradle-plugin-version%'
}
```

</tab>
</tabs>

If migrating from the [](tools_gradle_intellij_plugin.md), replace the old `org.jetbrains.intellij` identifier to `org.jetbrains.intellij.platform` and apply its latest `%intellij-platform-gradle-plugin-version%` version.

### Snapshot Release

To use the latest snapshot version of this plugin, add the following to the Gradle Settings file:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

<path>settings.gradle.kts</path>
```kotlin
pluginManagement {
  repositories {
    maven("https://oss.sonatype.org/content/repositories/snapshots/")
    gradlePluginPortal()
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

<path>settings.gradle</path>
```groovy
pluginManagement {
  repositories {
    maven {
      url 'https://oss.sonatype.org/content/repositories/snapshots/'
    }
    gradlePluginPortal()
  }
}
```

</tab>
</tabs>


> The current IntelliJ Platform Gradle Plugin Snapshot version is ![GitHub Snapshot Release](https://img.shields.io/nexus/s/org.jetbrains.intellij.platform/intellij-platform-gradle-plugin?server=https://oss.sonatype.org&label=)
>
> The snapshot release is published with a fixed version, so Gradle can resort to the cached version of the plugin.
>
> To update all dependencies in the dependency cache, use the `--refresh-dependencies` command line option.

### Plugins

The IntelliJ Platform Gradle Plugin consists of [plugins](tools_intellij_platform_gradle_plugin_plugins.md) which can be applied depending on the purpose.
By default, the [](tools_intellij_platform_gradle_plugin_plugins.md#platform) plugin (`org.jetbrains.intellij.platform`) should be applied to the main plugin project module.

When working in a [](#multi-module-project-structure) it is required to use [](tools_intellij_platform_gradle_plugin_plugins.md#module) plugin (`org.jetbrains.intellij.platform.module`) instead of creating tasks and configurations specific to the main module only.

The [](tools_intellij_platform_gradle_plugin_plugins.md#settings) plugin (`org.jetbrains.intellij.platform.settings`) allows for adding plugin development related repositories right in the <path>settings.gradle.kts</path> file if project configuration involves [](#configuration.dependencyResolutionManagement).

### Attaching Sources

To attach IntelliJ Platform sources in the IDE, the <control>Download sources</control> setting has to be enabled in IDE versions 2023.2 and later.
This option respects the plugin's [](tools_intellij_platform_gradle_plugin_gradle_properties.md#downloadSources) property, which is enabled by default.

<tabs>

<tab title="2023.3+">

In <ui-path>Settings | Advanced Settings</ui-path> enable option <control>Download sources</control> in section <ui-path>Build Tools. Gradle</ui-path>.
Then invoke <control>Reload All Gradle Projects</control> action from the <control>Gradle</control> tool window.

</tab>

<tab title="2023.2">

In <ui-path>Settings | Build, Execution, Deployment | Build Tools | Gradle</ui-path> enable <control>Download sources for dependencies</control>.
Then invoke the <control>Reload All Gradle Projects</control> action from the <control>Gradle</control> tool window.

</tab>

<tab title="Earlier versions">

No additional IDE settings are required.

</tab>

</tabs>

The attaching sources operation in the IDE is handled by the _Plugin DevKit_ plugin, thus it is recommended to always use the latest available IDE version.

If the opened compiled class has no sources available locally, the _Plugin DevKit_ plugin will detect the relevant source coordinates and provide an action to <control>Download IntelliJ Platform sources</control> or <control>Attach \$API_NAME\$ sources</control>.

## Configuration

> Auto-completion, Quick Documentation, and other code insight features are available for many extension functions and properties.
>
{title="Exploring Configuration Options"}

### Setting Up Repositories

{#configuration.repositories}

All IntelliJ Platform SDK artifacts are available via IntelliJ Maven repositories (see [](intellij_artifacts.md)), which exist in three variants:

- releases
- snapshots
- nightly (only selected artifacts)

<include from="tools_intellij_platform_gradle_plugin_repositories_extension.md" element-id="recommendedCallout"/>

**Example #2:**

Build a plugin against a release version of the IntelliJ Platform with dependency on a plugin from the JetBrains Marketplace:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
repositories {
  mavenCentral()

  intellijPlatform {
    releases()
    marketplace()
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
repositories {
  mavenCentral()

  intellijPlatform {
    releases()
    marketplace()
  }
}
```

</tab>
</tabs>


See [](tools_intellij_platform_gradle_plugin_repositories_extension.md) on how to configure additional repositories.

#### Dependency Resolution Management

{#configuration.dependencyResolutionManagement}

To access the IntelliJ Platform Gradle Plugin within the Gradle Settings file to use with `dependencyResolutionManagement`, add:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

<path>settings.gradle.kts</path>

```kotlin
import org.jetbrains.intellij.platform.gradle.extensions.intellijPlatform

plugins {
  id("org.jetbrains.intellij.platform.settings") version "%intellij-platform-gradle-plugin-version%"
}

dependencyResolutionManagement {
  repositoriesMode = RepositoriesMode.FAIL_ON_PROJECT_REPOS

  repositories {
    mavenCentral()

    intellijPlatform {
      defaultRepositories()
    }
  }
}
```

</tab>

<tab title="Groovy" group-key="groovy">

<path>settings.gradle</path>

```groovy
import org.jetbrains.intellij.platform.gradle.extensions.intellijPlatform

plugins {
  id 'org.jetbrains.intellij.platform.settings' version '%intellij-platform-gradle-plugin-version%'
}

dependencyResolutionManagement {
  repositoriesMode = RepositoriesMode.FAIL_ON_PROJECT_REPOS

  repositories {
    mavenCentral()

    intellijPlatform {
      defaultRepositories()
    }
  }
}
```

</tab>
</tabs>

#### Cache Redirector
{#configuration.cacheRedirector}

Some repositories, by default, point to JetBrains Cache Redirector to provide better resource resolution.
However, it is possible to use the direct repository URL, if available.

To switch off the default usage of JetBrains Cache Redirector, see the [](tools_intellij_platform_gradle_plugin_gradle_properties.md#useCacheRedirector) Gradle property.

### Setting Up IntelliJ Platform

Dependencies and [repositories](#configuration.repositories) are handled using explicit entries within `dependencies {}` and `repositories {}` blocks in the Gradle build file.

A minimum configuration for targeting IntelliJ IDEA Community 2023.3:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
repositories {
  mavenCentral()

  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity("2023.3")
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
repositories {
  mavenCentral()

  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity('2023.3')
  }
}
```

</tab>
</tabs>


The `intellijIdeaCommunity` in the previous sample is one of the extension functions available for adding IntelliJ Platform dependencies to the project.
See [](tools_intellij_platform_gradle_plugin_dependencies_extension.md) on how to target other IDEs.

> When declaring a dependency on IntelliJ Platform, the IDE installer is resolved by default.
> IDE installers are OS-specific and contain [](tools_intellij_platform_gradle_plugin_jetbrains_runtime.md) bundled, but have no EAP releases available.
>
> To resolve EAP releases instead, opt-out from installer releases with `useInstaller = false` passed to the dependency helper.
>
> **Important:** non-installer archives have no JetBrains Runtime (JBR) provided.
>
> Read more about [](tools_intellij_platform_gradle_plugin_dependencies_extension.md#target-versions).
>
{style="note"}

#### Parametrize IntelliJ Platform Dependency

{#dependenciesParametrizePlatform}

As a fallback, `intellijPlatform` extension can be used to allow dynamic configuration of the target platform, for example, via <path>gradle.properties</path>:

```
platformType = IC
platformVersion = 2023.3
```

The above Gradle properties can be referenced in the Gradle build file with:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
dependencies {
  intellijPlatform {
    val type = providers.gradleProperty("platformType")
    val version = providers.gradleProperty("platformVersion")

    create(type, version)
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
dependencies {
  intellijPlatform {
    def type = providers.gradleProperty('platformType')
    def version = providers.gradleProperty('platformVersion')

    create(type, version)
  }
}
```

</tab>
</tabs>


The `intellijPlatform` helper accepts also the [`IntelliJPlatformType`](tools_intellij_platform_gradle_plugin_types.md#IntelliJPlatformType) type:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
import org.jetbrains.intellij.platform.gradle.IntelliJPlatformType

dependencies {
  intellijPlatform {
    val version = providers.gradleProperty("platformVersion")

    create(IntelliJPlatformType.IntellijIdeaUltimate, version)
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
import org.jetbrains.intellij.platform.gradle.IntelliJPlatformType

dependencies {
  intellijPlatform {
    def version = providers.gradleProperty('platformVersion')

    create(IntelliJPlatformType.IntellijIdeaUltimate, version)
  }
}
```

</tab>
</tabs>

#### Local IntelliJ Platform IDE Instance

{#dependenciesLocalPlatform}

It is possible to refer to the locally available IntelliJ-based IDE using the `local` helper function:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
repositories {
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    local("/Users/user/Applications/IntelliJ IDEA Ultimate.app")
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
repositories {
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    local '/Users/user/Applications/IntelliJ IDEA Ultimate.app'
  }
}
```

</tab>
</tabs>


<include from="tools_intellij_platform_gradle_plugin_repositories_extension.md" element-id="localPlatformArtifacts_required"/>

### Setting Up Plugin Dependencies

To specify a dependency on a plugin, it is important to distinguish bundled plugins from plugins available in JetBrains Marketplace.

The [](tools_intellij_platform_gradle_plugin_dependencies_extension.md) provides a set of helpers to manage [plugin dependencies](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins):

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
repositories {
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity("%ijPlatform%")

    bundledPlugin("com.intellij.java")
    plugin("org.intellij.scala", "2024.1.4")
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
repositories {
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity '%ijPlatform%'

    bundledPlugin 'com.intellij.java'
    plugin 'org.intellij.scala', '2024.1.4'
  }
}
```

</tab>
</tabs>


<include from="tools_intellij_platform_gradle_plugin_repositories_extension.md" element-id="localPlatformArtifacts_required"/>

### Multi-Module Project Structure

When working on a complex plugin, it is often convenient to split the code base into multiple submodules.
To avoid polluting submodules with tasks or configurations specific to the root module only (for example, tasks for signing, publishing, or running the plugin),
a dedicated sub-plugin was introduced.

The root module of the IntelliJ-based plugin project must apply the main [](tools_intellij_platform_gradle_plugin_plugins.md#platform) plugin as follows:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
plugins {
  id("org.jetbrains.intellij.platform") version "%intellij-platform-gradle-plugin-version%"
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
plugins {
  id 'org.jetbrains.intellij.platform' version '%intellij-platform-gradle-plugin-version%'
}
```

</tab>
</tabs>


Any other included submodule must use the [](tools_intellij_platform_gradle_plugin_plugins.md#module) plugin instead:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
plugins {
  id("org.jetbrains.intellij.platform.module")
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
plugins {
  id 'org.jetbrains.intellij.platform.module'
}
```

</tab>
</tabs>


<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Dependencies Extension

<link-summary>IntelliJ Platform Gradle Plugin dependencies extension.</link-summary>

<include from="tools_intellij_platform_gradle_plugin.md" element-id="faq"/>

IntelliJ Platform Gradle Plugin enhances the `dependencies {}` configuration block by applying a nested `dependencies.intellijPlatform {}` extension.

This class provides methods for adding dependencies to different IntelliJ Platform [products](#default-target-platforms) and managing [local](#custom-target-platforms) dependencies.

It also includes methods for adding [plugins](#plugins) (including bundled), [JetBrains Runtime](#java-runtime), as well as [tools](#tools) like IntelliJ Plugin Verifier and Marketplace ZIP Signer.

> Corresponding required repositories must be defined in the `repositories {}` section, see [](tools_intellij_platform_gradle_plugin_repositories_extension.md).
>
{style="note"}

**Example:**

- setup Maven Central and [`defaultRepositories()`](tools_intellij_platform_gradle_plugin_repositories_extension.md#default-repositories)
- target IntelliJ IDEA Community %ijPlatform%
- add dependency on the bundled Java plugin
- add IntelliJ Plugin Verifier, Marketplace ZIP Signer CLI, and code instrumentation tools
- add JUnit4 test dependency
- add Test Framework for testing plugin with JUnit4

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
import org.jetbrains.intellij.platform.gradle.TestFrameworkType

repositories {
  mavenCentral()

  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity("%ijPlatform%")

    bundledPlugin("com.intellij.java")

    pluginVerifier()
    zipSigner()
    instrumentationTools()

    testFramework(TestFrameworkType.Platform)
  }

  testImplementation("junit:junit:4.13.2")
  // other dependencies, e.g., 3rd-party libraries
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
import org.jetbrains.intellij.platform.gradle.TestFrameworkType

repositories {
  mavenCentral()

  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity '%ijPlatform%'

    bundledPlugin 'com.intellij.java'

    pluginVerifier()
    zipSigner()
    instrumentationTools()

    testFramework TestFrameworkType.Platform.INSTANCE
  }

  testImplementation 'junit:junit:4.13.2'
  // other dependencies, e.g., 3rd-party libraries
}
```

</tab>
</tabs>


## Target Platforms

> Only one IntelliJ Platform dependency can be added to the project at a time.
>
{style="warning"}

### Default Target Platforms

See [](#custom-target-platforms) for non-default targets.

| Function                                              | Description                                                      |
|-------------------------------------------------------|------------------------------------------------------------------|
| `androidStudio(version, useInstaller = true)`         | [Android Studio](android_studio.md)                              |
| `aqua(version, useInstaller = true)`                  | [Aqua](https://www.jetbrains.com/aqua/)                          |
| `clion(version, useInstaller = true)`                 | [CLion](clion.md)                                                |
| `datagrip(version, useInstaller = true)`              | [DataGrip](data_grip.md)                                         |
| `dataspell(version, useInstaller = true)`             | [DataSpell](https://www.jetbrains.com/dataspell/)                |
| `fleetBackend(version, useInstaller = true)`          | [Fleet](https://www.jetbrains.com/fleet/) Backend                |
| `gateway(version, useInstaller = true)`               | [Gateway](https://www.jetbrains.com/remote-development/gateway/) |
| `goland(version, useInstaller = true)`                | [GoLand](goland.md)                                              |
| `intellijIdeaCommunity(version, useInstaller = true)` | [IntelliJ IDEA Community](idea.md)                               |
| `intellijIdeaUltimate(version, useInstaller = true)`  | [IntelliJ IDEA Ultimate](idea_ultimate.md)                       |
| `mps(version, useInstaller = true)`                   | [MPS](https://www.jetbrains.com/mps/)                            |
| `phpstorm(version, useInstaller = true)`              | [PhpStorm](phpstorm.md)                                          |
| `pycharmCommunity(version, useInstaller = true)`      | [PyCharm Community](pycharm.md)                                  |
| `pycharmProfessional(version, useInstaller = true)`   | [PyCharm Professional](pycharm.md)                               |
| `rider(version, useInstaller = true)`                 | [Rider](rider.md)                                                |
| `rubymine(version, useInstaller = true)`              | [RubyMine](rubymine.md)                                          |
| `rustrover(version, useInstaller = true)`             | [RustRover](https://www.jetbrains.com/rust/)                     |
| `webstorm(version, useInstaller = true)`              | [WebStorm](webstorm.md)                                          |
| `writerside(version, useInstaller = true)`            | [Writerside](https://www.jetbrains.com/writerside/)              |

### Custom Target Platforms

| Function                                     | Description                                                                                                                                |
|----------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| `create(type, version, useInstaller = true)` | Adds a configurable dependency on the IntelliJ Platform. See [](tools_intellij_platform_gradle_plugin.md#dependenciesParametrizePlatform). |
| `create(notation, useInstaller = true)`      | Adds a configurable dependency on the IntelliJ Platform. See [](tools_intellij_platform_gradle_plugin.md#dependenciesParametrizePlatform). |
| `local(localPath)`                           | Adds a dependency on a local IntelliJ Platform instance. See [](tools_intellij_platform_gradle_plugin.md#dependenciesLocalPlatform).       |

See also:

- [Types: `IntelliJPlatformType`](tools_intellij_platform_gradle_plugin_types.md#IntelliJPlatformType)

## Target Versions

{#target-versions}

The IntelliJ Platform Gradle Plugin allows for using two types of IntelliJ Platform artifacts for development: installers and multi-OS ZIP archives.
Both have advantages and drawbacks, but in the 2.x releases, installers are now the default choice when setting up the project.

### Installers

{#target-versions-installers}

When declaring a dependency on IntelliJ Platform, the IDE installer is resolved by default.
The IntelliJ Platform installer is the IDE final distribution used by end-users for installing and running IDE in their machines.
Those artifacts are resolved from JetBrains Download CDN (download.jetbrains.com) or Android Studio CDN.

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
repositories {
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity("%ijPlatform%")
  }

```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
repositories {
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity '%ijPlatform%'
  }
}
```

</tab>
</tabs>


The listing of all present installers can be resolved with updates XML files for [JetBrains IDEs](https://www.jetbrains.com/updates/updates.xml) and [Android Studio](https://jb.gg/android-studio-releases-list.xml) as well as by executing the [`printProductsReleases`](tools_intellij_platform_gradle_plugin_tasks.md#printProductsReleases) task.

IntelliJ Platform installers are OS-specific and contain bundled [](tools_intellij_platform_gradle_plugin_jetbrains_runtime.md), but are limited to public releases only.

To apply required repositories, use [](tools_intellij_platform_gradle_plugin_repositories_extension.md#default-repositories) or explicit [](tools_intellij_platform_gradle_plugin_repositories_extension.md#intellij-platform-installers) helpers.

### Multi-OS Archives

{#target-versions-multi-os-archives}

It is still possible to use Multi-OS ZIP archives resolved from [](tools_intellij_platform_gradle_plugin_repositories_extension.md#intellij-maven-repositories).

To enable resolving this kind of artifacts, opt-out from the installer dependencies by adding `useInstaller = false` argument to helpers described in [](#target-platforms), like:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
repositories {
  intellijPlatform {
    defaultRepositories()
    jetbrainsRuntime()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity("%ijPlatform%", useInstaller = false)
    jetbrainsRuntime()
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
repositories {
  intellijPlatform {
    defaultRepositories()
    jetbrainsRuntime()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity "%ijPlatform%", false
    jetbrainsRuntime()
  }
}
```

</tab>
</tabs>


The Multi-OS Archives don't bundle [](tools_intellij_platform_gradle_plugin_jetbrains_runtime.md) needed to run the IDE locally, perform testing, and other crucial operations.
Therefore, it is required to explicitly add a dependency on JetBrains Runtime (JBR) by adding extra `jetbrainsRuntime()` repository and dependency entries.

It is advised to rely on installer releases, but targeting EAP multi-OS archives helps when making sure your plugin will work in the upcoming IDE releases.

To apply required repositories, use [](tools_intellij_platform_gradle_plugin_repositories_extension.md#default-repositories) or explicit [](tools_intellij_platform_gradle_plugin_repositories_extension.md#intellij-maven-repositories) helpers.

## Plugins

Make sure that required [plugin repositories](tools_intellij_platform_gradle_plugin_repositories_extension.md#plugin-repositories) are defined to access non-bundled plugins.

See also:

- [](plugin_dependencies.md)

> Use the correct function depending on whether the
> targeted plugin is _bundled_ with the Target Platform or not.
>
{title="Bundled vs. Non-Bundled Plugins"}

### Bundled Plugin

Use `bundledPlugin(id)` or `bundledPlugins(ids)` to add a dependency on bundled plugin.
The list of bundled plugin IDs is available via [`printBundledPlugins`](tools_intellij_platform_gradle_plugin_tasks.md#printBundledPlugins) task.

### Non-Bundled Plugin

Use `plugin(notation)` or `plugin(notations)` to add a dependency on a non-bundled plugin (for example, hosted on [JetBrains Marketplace](https://plugins.jetbrains.com)).

Parameter `notation` uses the following format:

- `pluginId:version` or
- `pluginId:version@channel`.

Alternatively, use `plugin(id, version, group)` where the `group` parameter can define a plugin release channel, like `@eap` or a full Maven coordinates group.
It is set by default to the common [JetBrains Marketplace](https://plugins.jetbrains.com) plugin artifacts group `com.jetbrains.plugins`.

The `group` parameter can also describe the release channel by prefixing the value with `@` character, like `@eap` or `@nightly`.
The channel value is used to prepend the JetBrains Marketplace group and build `nightly.com.jetbrains.plugins`.

If defined explicitly, can be used along with any custom plugin repository, like `org.acme.plugins`.

### Multi-Module Setup

When working on a multi-module project, use `pluginModule(dependency)` to add a dependency on a plugin module to be bundled within the main plugin JAR.
Requires passing an existing dependency, like `pluginModule(implementation(project(":submodule")))`.

### Local Plugin

Use `localPlugin(localPath)` to add a dependency on a local IntelliJ Platform plugin. Accepts path or a dependency on another module.

## Testing

To implement [tests](testing_plugins.md) for IntelliJ Platform plugin, it is necessary to explicitly add a dependency on the `test-framework` library containing the necessary test base classes.
In most cases, the `TestFrameworkType.Platform` variant will be used:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
import org.jetbrains.intellij.platform.gradle.TestFrameworkType

dependencies {
  intellijPlatform {
    testFramework(TestFrameworkType.Platform)
  }

  testImplementation("junit:junit:4.13.2")
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
import org.jetbrains.intellij.platform.gradle.TestFrameworkType

dependencies {
  intellijPlatform {
    testFramework TestFrameworkType.Platform.INSTANCE
  }

  testImplementation 'junit:junit:4.13.2'
}
```

</tab>
</tabs>

See [`TestFrameworkType`](tools_intellij_platform_gradle_plugin_types.md#TestFrameworkType) reference for other test-frameworks,
for example, `Plugin.Java` when testing Java-based functionality.

The provided `testFramework(type, version)` helper method makes it possible to add the base artifact to the test classpath or its variants, such as Java, Go, ReSharper, etc.

| Function                       | Description                                                                                                                                            |
|--------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
| `testFramework(type, version)` | Adds a dependency on Test Framework or its variant using [`TestFrameworkType`](tools_intellij_platform_gradle_plugin_types.md#TestFrameworkType) type. |

> In rare cases, when the presence of a bundled <path>\$PLATFORM_PATH\$/lib/testFramework.jar</path> library is necessary (like in the case of [Rider](rider.md), as its `test-framework` is not published as an artifact),
> it is possible to attach it by using the [`TestFrameworkType.Platform.Bundled`](tools_intellij_platform_gradle_plugin_types.md#TestFrameworkType) type.
> {style="warning"}

There are two known issues related to `Platform` and `JUnit5` Test Frameworks:

- [](tools_intellij_platform_gradle_plugin_faq.md#missing-opentest4j-dependency-in-test-framework)
- [](tools_intellij_platform_gradle_plugin_faq.md#junit5-test-framework-refers-to-junit4)

See also:

- [Types: `TestFrameworkType`](tools_intellij_platform_gradle_plugin_types.md#TestFrameworkType)

## Tools

| Function                                       | Description                                                                                                                                                                       |
|------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `pluginVerifier(version)`                      | Adds a dependency on [IntelliJ Plugin Verifier](verifying_plugin_compatibility.md).                                                                                               |
| `zipSigner(version)`                           | Adds a dependency on [Marketplace ZIP Signer](plugin_signing.md).                                                                                                                 |
| `bundledLibrary(path)`                         | **SEE NOTE BELOW**<p>Adds a dependency on a bundled library JAR file of the current IntelliJ Platform, like <path>lib/annotations.jar</path>.</p>                                 |
| `platformDependency(coordinates, version)`     | Adds a dependency on a custom IntelliJ Platform dependency available in the [](tools_intellij_platform_gradle_plugin_repositories_extension.md#intellij-maven-repositories).      |
| `testPlatformDependency(coordinates, version)` | Adds a test dependency on a custom IntelliJ Platform dependency available in the [](tools_intellij_platform_gradle_plugin_repositories_extension.md#intellij-maven-repositories). |

> Do not use **`bundledLibrary()`** in production, as direct access to the IntelliJ Platform libraries is not recommended.
>
> It should only be used as a workaround in case the IntelliJ Platform Gradle Plugin is not aligned with the latest IntelliJ Platform classpath changes.
>
{style="warning"}

See also:

- [](verifying_plugin_compatibility.md), [Tasks: `verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin)
- [](plugin_signing.md), [Tasks: `signPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin)

## Java Runtime

Using the `jetbrainsRuntime()` or `jetbrainsRuntimeExplicit()` dependency helpers, it is possible to load a custom version of JetBrains Runtime.
However, it is recommended to rely on the runtime bundled within the IntelliJ Platform dependency, if present.

| Function                                                  | Description                                                                                                                                                                                                                     |
|-----------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <p>`jetbrainsRuntime()`</p>                               | Adds a dependency on [JetBrains Runtime](ide_development_instance.md#using-a-jetbrains-runtime-for-the-development-instance) in version obtained with the current IntelliJ Platform if resolved from IntelliJ Maven Repository. |
| <p>`jetbrainsRuntime(version, variant, architecture)`</p> | Adds a dependency on [JetBrains Runtime](ide_development_instance.md#using-a-jetbrains-runtime-for-the-development-instance).                                                                                                   |
| <p>`jetbrainsRuntimeLocal(path)`</p>                      | Adds a dependency on a local [JetBrains Runtime](ide_development_instance.md#using-a-jetbrains-runtime-for-the-development-instance) instance.                                                                                  |
| <p>`jetbrainsRuntimeExplicit(explicitVersion)`</p>        | Adds a dependency on [JetBrains Runtime](ide_development_instance.md#using-a-jetbrains-runtime-for-the-development-instance) in explicit version.                                                                               |

See [](tools_intellij_platform_gradle_plugin_jetbrains_runtime.md) for more details.

## Code Instrumentation

The code instrumentation process handled with the [`instrumentCode`](tools_intellij_platform_gradle_plugin_tasks.md#instrumentCode) task, requires extra dependencies to work and properly adjust the Java bytecode.
There's the `instrumentationTools()` dependencies helper introduced to apply all required dependencies using default configuration, however, it is possible to add and configure them separately.

Adds a Java Compiler dependency for code instrumentation.
The version is determined by the IntelliJ Platform build number.
If the exact version is unavailable, the closest one is used, found by scanning all releases.

| Function                                              | Description                                                            |
|-------------------------------------------------------|------------------------------------------------------------------------|
| <p>`instrumentationTools()`</p>                       | A helper function to apply all required dependencies: `javaCompiler()` |
| <p>`javaCompiler()`</p><p>`javaCompiler(version)`</p> | Adds a dependency on Java Compiler.                                    |

- [](tools_intellij_platform_gradle_plugin_tasks.md#instrumentCode)

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# IntelliJ Platform Extension

<link-summary>IntelliJ Platform Gradle Plugin extension.</link-summary>

<include from="tools_intellij_platform_gradle_plugin.md" element-id="faq"/>

The _IntelliJ Platform Gradle Plugin_ introduces a top-level `intellijPlatform` extension.
It consists of sections dedicated to the general Gradle plugin configuration, <path>plugin.xml</path> definition, publishing, signing, and verifying of the output plugin for IntelliJ-based IDEs.


## IntelliJ Platform
{#intellijPlatform}

After the IntelliJ Platform Gradle Plugin is [applied](tools_intellij_platform_gradle_plugin.md#usage), the `intellijPlatform` extension can be used to configure the plugin and common settings of the provided tasks.

**Example:**

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellijPlatform {
  buildSearchableOptions = true
  instrumentCode = true
  projectName = project.name
  sandboxContainer = "..."

  pluginConfiguration {
    // ...
  }
  publishing {
    // ...
  }
  signing {
    // ...
  }
  pluginVerification {
    // ...
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatform {
  buildSearchableOptions = true
  instrumentCode = true
  projectName = project.name
  sandboxContainer = '...'

  pluginConfiguration {
    // ...
  }
  publishing {
    // ...
  }
  signing {
    // ...
  }
  pluginVerification {
    // ...
  }
}
```

</tab>
</tabs>



### `cachePath`
{#intellijPlatform-cachePath}

Provides read-only access to the IntelliJ Platform project cache location.

The IntelliJ Platform cache is used for storing IntelliJ Platform Gradle Plugin-specific files, such as:
- XML files generated for the [`localPlatformArtifacts()`](tools_intellij_platform_gradle_plugin_repositories_extension.md#additional-repositories) local Ivy repository
- coroutines Java agent file created by the [`initializeIntelliJPlatformPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#initializeIntelliJPlatformPlugin) task

This path can be changed with the [`org.jetbrains.intellij.platform.intellijPlatformCache`](tools_intellij_platform_gradle_plugin_gradle_properties.md#intellijPlatformCache) Gradle property

{type="narrow"}
Access
: Read-only

Type
: `Path`

Default value
: <path>[rootProject]/.intellijPlatform/</path>


### `platformPath`
{#intellijPlatform-platformPath}

Provides read-only access to the IntelliJ Platform dependency artifact path.

{type="narrow"}
Access
: Read-only

Type
: `Path`

Default value
: Path of the current IntelliJ Platform


### `productInfo`
{#intellijPlatform-productInfo}

Provides read-only access to the [`ProductInfo`](tools_intellij_platform_gradle_plugin_types.md#ProductInfo) object associated with the IntelliJ Platform dependency configured for the current project.

{type="narrow"}
Access
: Read-only

Type
: [`ProductInfo`](tools_intellij_platform_gradle_plugin_types.md#ProductInfo)

Default value
: [`ProductInfo`](tools_intellij_platform_gradle_plugin_types.md#ProductInfo) of the current IntelliJ Platform


### `autoReload`
{#intellijPlatform-autoReload}

Enables auto-reload of dynamic plugins.
Dynamic plugin will be reloaded automatically when its content is modified.

This allows a much faster development cycle by avoiding a full restart of the development instance after code changes.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `true`

See also:
- [](ide_development_instance.md#enabling-auto-reload)
- [Task Awares: `AutoReloadAware`](tools_intellij_platform_gradle_plugin_task_awares.md#AutoReloadAware)


### `buildSearchableOptions`
{#intellijPlatform-buildSearchableOptions}

Builds an index of UI components (searchable options) for the plugin.
Controls the execution of the [`buildSearchableOptions`](tools_intellij_platform_gradle_plugin_tasks.md#buildSearchableOptions) task.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `true`

See also:
- [Gradle Property: `noSearchableOptionsWarning`](tools_intellij_platform_gradle_plugin_gradle_properties.md#noSearchableOptionsWarning)


### `instrumentCode`
{#intellijPlatform-instrumentCode}

Enables the [](tools_intellij_platform_gradle_plugin_tasks.md#instrumentCode) of the compiled classes.

Controls the execution of the [`instrumentCode`](tools_intellij_platform_gradle_plugin_tasks.md#instrumentCode) task.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `true`


### `projectName`
{#intellijPlatform-projectName}

Defines the project name, which is used for creating file structure and the build archive.

{type="narrow"}
Type
: `Property<String>`

Default value
: `project.name`


### `sandboxContainer`
{#intellijPlatform-sandboxContainer}

The path to the sandbox container where tests and IDE instances read and write data.

{type="narrow"}
Type
: `DirectoryProperty`

Default value
: <path>[buildDirectory]/idea-sandbox</path>

See also:
- [Tasks: `prepareSandbox`](tools_intellij_platform_gradle_plugin_tasks.md#prepareSandbox)
- [Task Awares: `SandboxAware`](tools_intellij_platform_gradle_plugin_task_awares.md#SandboxAware)


### `splitMode`
{#intellijPlatform-splitMode}

> Split Mode requires the IntelliJ Platform in version `241.14473` or later.
>
{style="warning"}

Allows for checking how a plugin works in remote development mode, when one machine is running the backend part and another is running a frontend part (JetBrains Client) which connects to the backend.

This property allows running the IDE with backend and frontend parts running in separate processes.
The developed plugin is installed in the backend part.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `true`

See also:
- [Task Awares: `SplitModeAware`](tools_intellij_platform_gradle_plugin_task_awares.md#SplitModeAware)


### `splitModeTarget`
{#intellijPlatform-splitModeTarget}

> Split Mode requires the IntelliJ Platform in version `241.14473` or later.
>
{style="warning"}

Specifies in which part of the product the developed plugin should be installed.

{type="narrow"}
Type
: [`Property<SplitModeTarget>`](tools_intellij_platform_gradle_plugin_types.md#SplitModeAware-SplitModeTarget)

Default value
: [`SplitModeTarget.BACKEND`](tools_intellij_platform_gradle_plugin_types.md#SplitModeAware-SplitModeTarget)

See also:
- [Task Awares: `SplitModeAware`](tools_intellij_platform_gradle_plugin_task_awares.md#SplitModeAware)


## Plugin Configuration
{#intellijPlatform-pluginConfiguration}

Configures the plugin definition and stores values in the `plugin.xml` file.
Data provided to the `intellijPlatform.pluginConfiguration {}` extension is passed to the [`patchPluginXml`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml) task, which augments the <path>plugin.xml</path> file with new values.

Requires the [](tools_intellij_platform_gradle_plugin_plugins.md#platform) plugin to be applied.

**Example:**

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellijPlatform {
  // ...

  pluginConfiguration {
    id = "my-plugin-id"
    name = "My Awesome Plugin"
    version = "1.0.0"
    description = "It's an awesome plugin!"
    changeNotes =
      """
      A descriptive release note...
      """.trimIndent()

    productDescriptor {
      // ...
    }
    ideaVersion {
      // ...
    }
    vendor {
      // ...
    }
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatform {
  // ...

  pluginConfiguration {
    id = 'my-plugin-id'
    name = 'My Awesome Plugin'
    version = '1.0.0'
    description = 'It\'s an awesome plugin!'
    changeNotes =
      """
      A descriptive release note...
      """.stripIndent()

    productDescriptor {
      // ...
    }
    ideaVersion {
      // ...
    }
    vendor {
      // ...
    }
  }
}
```

</tab>
</tabs>


See also:
- [](#intellijPlatform-pluginConfiguration-productDescriptor)
- [](#intellijPlatform-pluginConfiguration-ideaVersion)
- [](#intellijPlatform-pluginConfiguration-vendor)


### `id`
{#intellijPlatform-pluginConfiguration-id}

The plugin's unique identifier.
This should mirror the structure of fully qualified Java packages and must remain distinct from the IDs of existing plugins.
This ID is a technical descriptor used not only within the IDE, but also on [JetBrains Marketplace](https://plugins.jetbrains.com/).

Please restrict input to characters, numbers, and `.`/`-`/`_` symbols, and aim for a concise length.

The provided value will populate the [`<id>`](plugin_configuration_file.md#idea-plugin__id) element.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `patchPluginXml.pluginId`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-pluginId)


### `name`
{#intellijPlatform-pluginConfiguration-name}

The plugin's display name, visible to users.
It should use Title Case.

The provided value is used to populate the [`<name>`](plugin_configuration_file.md#idea-plugin__name) element.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `patchPluginXml.pluginName`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-pluginName)


### `version`
{#intellijPlatform-pluginConfiguration-version}

The plugin version, presented in the Plugins settings dialog and on its JetBrains Marketplace page.

For plugins uploaded to the JetBrains Marketplace, [semantic versioning](https://plugins.jetbrains.com/docs/marketplace/semver.html) must be adhered to.

The provided value is used as a [`<version>`](plugin_configuration_file.md#idea-plugin__version) element.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `patchPluginXml.pluginVersion`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-pluginVersion)


### `description`
{#intellijPlatform-pluginConfiguration-description}

The plugin description, which is presented on the JetBrains Marketplace plugin page and in the Plugins settings dialog.
Basic HTML elements such as text formatting, paragraphs, and lists are permitted.

The description content is automatically enclosed in `<![CDATA[... ]]>`.

The provided value is used to populate the [`<description>`](plugin_configuration_file.md#idea-plugin__description) element.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `patchPluginXml.pluginDescription`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-pluginDescription)


### `changeNotes`
{#intellijPlatform-pluginConfiguration-changeNotes}

A concise summary of new features, bug fixes, and alterations provided in the latest plugin version.
These change notes will be displayed on the JetBrains Marketplace plugin page and in the Plugins settings dialog.
Basic HTML elements such as text formatting, paragraphs, and lists are permitted.

The change notes content is automatically enclosed in `<![CDATA[... ]]>`.

The provided value is used to populate the [`<change-notes>`](plugin_configuration_file.md#idea-plugin__change-notes) element.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `patchPluginXml.changeNotes`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-changeNotes)


## Product Descriptor
{#intellijPlatform-pluginConfiguration-productDescriptor}

A part of the [](#intellijPlatform-pluginConfiguration) which describes the `product-descriptor` element.

**Example:**

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellijPlatform {
  // ...

  pluginConfiguration {
    // ...

    productDescriptor {
      code = "MY_CODE"
      releaseDate = "20240217"
      releaseVersion = "20241"
      optional = false
      eap = false
    }
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatform {
  // ...

  pluginConfiguration {
    // ...

    productDescriptor {
      code = 'MY_CODE'
      releaseDate = '20240217'
      releaseVersion = '20241'
      optional = false
      eap = false
    }
  }
}
```

</tab>
</tabs>


See also:
- [How to add required parameters for paid plugins](https://plugins.jetbrains.com/docs/marketplace/add-required-parameters.html)


### `code`
{#intellijPlatform-pluginConfiguration-productDescriptor-code}

The product code for the plugin, used in the JetBrains Sales System.
The value must be pre-approved by JetBrains and must adhere to [specified requirements](https://plugins.jetbrains.com/docs/marketplace/obtain-a-product-code-from-jetbrains.html).

The provided value is used for a `<product-descriptor code="">` element attribute.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `patchPluginXml.productDescriptorCode`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-productDescriptorCode)
- [Plugin Configuration File: `product-descriptor`](plugin_configuration_file.md#idea-plugin__product-descriptor)


### `releaseDate`
{#intellijPlatform-pluginConfiguration-productDescriptor-releaseDate}

The release date of the major version, formatted as `YYYYMMDD`.

The provided value is used for the `<product-descriptor release-date="">` element attribute.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `patchPluginXml.productDescriptorReleaseDate`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-productDescriptorReleaseDate)
- [Plugin Configuration File: `product-descriptor`](plugin_configuration_file.md#idea-plugin__product-descriptor)


### `releaseVersion`
{#intellijPlatform-pluginConfiguration-productDescriptor-releaseVersion}

The major version, represented in a specific numerical format.

The provided value is used for the `<product-descriptor release-version="">` element attribute.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `patchPluginXml.productDescriptorReleaseVersion`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-productDescriptorReleaseVersion)
- [Plugin Configuration File: `product-descriptor`](plugin_configuration_file.md#idea-plugin__product-descriptor)


### `optional`
{#intellijPlatform-pluginConfiguration-productDescriptor-optional}

The boolean value that indicates if the plugin is a [Freemium](https://plugins.jetbrains.com/docs/marketplace/freemium.html) plugin.

The provided value is used for the `<product-descriptor optional="">` element attribute.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `false`

See also:
- [Tasks: `patchPluginXml.productDescriptorOptional`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-productDescriptorOptional)
- [Plugin Configuration File: `product-descriptor`](plugin_configuration_file.md#idea-plugin__product-descriptor)


### `eap`
{#intellijPlatform-pluginConfiguration-productDescriptor-eap}

Specifies the boolean value determining whether the plugin is an EAP release.

The provided value is used for the `<product-descriptor eap="">` element attribute.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `false`

See also:
- [Tasks: `patchPluginXml.productDescriptorOptional`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-productDescriptorOptional)
- [Plugin Configuration File: `product-descriptor`](plugin_configuration_file.md#idea-plugin__product-descriptor)


## Idea Version
{#intellijPlatform-pluginConfiguration-ideaVersion}

A part of the [](#intellijPlatform-pluginConfiguration) which describes the [`<idea-version>`](plugin_configuration_file.md#idea-plugin__idea-version) element.

**Example:**

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellijPlatform {
  // ...

  pluginConfiguration {
    // ...

    ideaVersion {
      sinceBuild = "241"
      untilBuild = "241.*"
    }
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatform {
  // ...

  pluginConfiguration {
    // ...

    ideaVersion {
      sinceBuild = '241'
      untilBuild = '241.*'
    }
  }
}
```

</tab>
</tabs>


See also:

- [](build_number_ranges.md)

### `sinceBuild`
{#intellijPlatform-pluginConfiguration-ideaVersion-sinceBuild}

The earliest IDE version that is compatible with the plugin.

The provided value is used for the `<idea-version since-build=""/>` element attribute.

The default value is set to the `MAJOR.MINOR` version based on the currently selected IntelliJ Platform, like `233.12345`.

{type="narrow"}
Type
: `Property<String>`

Default value
: `MAJOR.MINOR`

See also:
- [Tasks: `patchPluginXml.sinceBuild`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-sinceBuild)


### `untilBuild`
{#intellijPlatform-pluginConfiguration-ideaVersion-untilBuild}

The latest IDE version that is compatible with the plugin.
An undefined value signifies compatibility with all IDEs starting from the version mentioned in `since-build`,
including potential future builds that may cause compatibility issues.

The provided value is used for the `<idea-version until-build=""/>` element attribute.

The default value is set to the `MAJOR.*` version based on the currently selected IntelliJ Platform, such as `233.*`.

The `until-build` attribute can be unset by providing `provider { null }` as a value:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellijPlatform {
  pluginConfiguration {
    ideaVersion {
      untilBuild = provider { null }
    }
  }
}
```

</tab>

<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatform {
  pluginConfiguration {
    ideaVersion {
      untilBuild = provider { null }
    }
  }
}
```

</tab>
</tabs>

{type="narrow"}
Type
: `Property<String>`

Default value
: `MAJOR.*`

See also:
- [Tasks: `patchPluginXml.untilBuild`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-untilBuild)


## Vendor
{#intellijPlatform-pluginConfiguration-vendor}

A part of the [](#intellijPlatform-pluginConfiguration) which describes the [`<vendor>`](plugin_configuration_file.md#idea-plugin__vendor) element.

**Example:**

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellijPlatform {
  // ...

  pluginConfiguration {
    // ...

    vendor {
      name = "JetBrains"
      email = "hello@jetbrains.com"
      url = "https://www.jetbrains.com"
    }
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatform {
  // ...

  pluginConfiguration {
    // ...

    vendor {
      name = 'JetBrains'
      email = 'hello@jetbrains.com'
      url = 'https://www.jetbrains.com'
    }
  }
}
```

</tab>
</tabs>


### `name`
{#intellijPlatform-pluginConfiguration-vendor-name}

The name of the vendor or the organization ID (if created), as displayed in the <control>Plugins</control> settings dialog and on the JetBrains Marketplace plugin page.

The provided value is used as the value of the [`<vendor>`](plugin_configuration_file.md#idea-plugin__vendor) element.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `patchPluginXml.vendorName`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-vendorName)


### `email`
{#intellijPlatform-pluginConfiguration-vendor-email}

The email address of the vendor.

The provided value is used for the `<vendor email="">` element attribute.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `patchPluginXml.vendorEmail`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-vendorEmail)


### `url`
{#intellijPlatform-pluginConfiguration-vendor-url}

The URL to the vendor's homepage.

The provided value is used for the `<vendor url="">` element attribute.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `patchPluginXml.vendorUrl`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-vendorUrl)


## Publishing
{#intellijPlatform-publishing}

Configures the publishing process of the plugin.
All values are passed to the [](tools_intellij_platform_gradle_plugin_tasks.md#publishPlugin) task.

Requires the [](tools_intellij_platform_gradle_plugin_plugins.md#platform) plugin to be applied.

**Example:**

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellijPlatform {
  // ...

  publishing {
    host = ""
    token = "7hR4nD0mT0k3n_8f2eG"
    channels = listOf("default")
    ideServices = false
    hidden = false
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatform {
  // ...

  publishing {
    host = ''
    token = '7hR4nD0mT0k3n_8f2eG'
    channels = ['default']
    ideServices = false
    hidden = false
  }
}
```

</tab>
</tabs>



### `host`
{#intellijPlatform-publishing-host}

The hostname used for publishing the plugin.

{type="narrow"}
Type
: `Property<String>`

Default value
: `https://plugins.jetbrains.com`

See also:
- [Tasks: `publishPlugin.host`](tools_intellij_platform_gradle_plugin_tasks.md#publishPlugin-host)


### `token`
{#intellijPlatform-publishing-token}

Authorization token.

{type="narrow"}
Type
: `Property<String>`

Required
: yes

See also:
- [Tasks: `publishPlugin.token`](tools_intellij_platform_gradle_plugin_tasks.md#publishPlugin-token)


### `channels`
{#intellijPlatform-publishing-channels}

A list of channel names to upload plugin to.

{type="narrow"}
Type
: `ListProperty<String>`

Default value:
: `listOf("default")`

See also:
- [Tasks: `publishPlugin.channels`](tools_intellij_platform_gradle_plugin_tasks.md#publishPlugin-channels)


### `ideServices`
{#intellijPlatform-publishing-ideServices}

Specify if the [IDE Services](https://www.jetbrains.com/ide-services/) plugin repository service should be used.

{type="narrow"}
Type
: `Property<String>`

Default value
: `false`

See also:
- [Tasks: `publishPlugin.ideServices`](tools_intellij_platform_gradle_plugin_tasks.md#publishPlugin-ideServices)


### `hidden`
{#intellijPlatform-publishing-hidden}

Publish the plugin update and mark it as hidden to prevent public visibility after approval.

{type="narrow"}
Type
: `Property<String>`

Default value
: `false`

See also:
- [Tasks: `publishPlugin.hidden`](tools_intellij_platform_gradle_plugin_tasks.md#publishPlugin-hidden)
- [Hidden release](https://plugins.jetbrains.com/docs/marketplace/hidden-plugin.html)


## Signing
{#intellijPlatform-signing}

Plugin signing configuration.

Requires the [](tools_intellij_platform_gradle_plugin_plugins.md#platform) plugin to be applied.

**Example:**

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellijPlatform {
  // ...

  signing {
    cliPath = file("/path/to/marketplace-zip-signer-cli.jar")
    keyStore = file("/path/to/keyStore.ks")
    keyStorePassword = "..."
    keyStoreKeyAlias = "..."
    keyStoreType = "..."
    keyStoreProviderName = "..."
    privateKey = "..."
    privateKeyFile = file("/path/to/private.pem")
    password = "..."
    certificateChain = "..."
    certificateChainFile = file("/path/to/chain.crt")
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatform {
  // ...

  signing {
    cliPath = file('/path/to/marketplace-zip-signer-cli.jar')
    keyStore = file('/path/to/keyStore.ks')
    keyStorePassword = '...'
    keyStoreKeyAlias = '...'
    keyStoreType = '...'
    keyStoreProviderName = '...'
    privateKey = '...'
    privateKeyFile = file('/path/to/private.pem')
    password = '...'
    certificateChain = '...'
    certificateChainFile = file('/path/to/chain.crt')
  }
}
```

</tab>
</tabs>


See also:
- [](plugin_signing.md)
- [Tasks: `signPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin)
- [Task Awares: `SigningAware`](tools_intellij_platform_gradle_plugin_task_awares.md#SigningAware)
- [Marketplace ZIP Signer](https://github.com/JetBrains/marketplace-zip-signer)


### `cliPath`
{#intellijPlatform-signing-cliPath}

A path to the local Marketplace ZIP Signer CLI tool to be used.

{type="narrow"}
Type
: `RegularFileProperty`

See also:
- [Task Awares: `SigningAware`](tools_intellij_platform_gradle_plugin_task_awares.md#SigningAware)


### `keyStore`
{#intellijPlatform-signing-keyStore}

KeyStore file path.
Refers to `ks` CLI option.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `signPlugin.keyStore`](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin-keyStore)


### `keyStorePassword`
{#intellijPlatform-signing-keyStorePassword}

KeyStore password.
Refers to `ks-pass` CLI option.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `signPlugin.keyStorePassword`](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin-keyStorePassword)


### `keyStoreKeyAlias`
{#intellijPlatform-signing-keyStoreKeyAlias}

KeyStore key alias.
Refers to `ks-key-alias` CLI option.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `signPlugin.keyStoreKeyAlias`](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin-keyStoreKeyAlias)


### `keyStoreType`
{#intellijPlatform-signing-keyStoreType}

KeyStore type.
Refers to `ks-type` CLI option.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `signPlugin.keyStoreType`](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin-keyStoreType)


### `keyStoreProviderName`
{#intellijPlatform-signing-keyStoreProviderName}

JCA KeyStore Provider name.
Refers to `ks-provider-name` CLI option.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `signPlugin.keyStoreProviderName`](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin-keyStoreProviderName)


### `privateKey`
{#intellijPlatform-signing-privateKey}

Encoded private key in the PEM format.
Refers to `key` CLI option.

Takes precedence over the [](#intellijPlatform-signing-privateKeyFile) property.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `signPlugin.privateKey`](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin-privateKey)


### `privateKeyFile`
{#intellijPlatform-signing-privateKeyFile}

A file with an encoded private key in the PEM format.
Refers to `key-file` CLI option.

{type="narrow"}
Type
: `RegularFileProperty`

See also:
- [Tasks: `signPlugin.privateKeyFile`](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin-privateKeyFile)


### `password`
{#intellijPlatform-signing-password}

Password required to decrypt the private key.
Refers to `key-pass` CLI option.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `signPlugin.password`](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin-password)


### `certificateChain`
{#intellijPlatform-signing-certificateChain}

A string containing X509 certificates.
The first certificate from the chain will be used as a certificate authority (CA).
Refers to `cert` CLI option.

Takes precedence over the [](#intellijPlatform-signing-certificateChainFile) property.

{type="narrow"}
Type
: `Property<String>`

See also:
- [Tasks: `signPlugin.certificateChain`](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin-certificateChain)


### `certificateChainFile`
{#intellijPlatform-signing-certificateChainFile}

Path to the file containing X509 certificates.
The first certificate from the chain will be used as a certificate authority (CA).
Refers to `cert-file` CLI option.

{type="narrow"}
Type
: `RegularFileProperty`

See also:
- [Tasks: `signPlugin.certificateChainFile`](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin-certificateChainFile)


## Verify Plugin
{#intellijPlatform-pluginVerification}

IntelliJ Plugin Verifier CLI tool configuration.

Requires the [](tools_intellij_platform_gradle_plugin_plugins.md#platform) plugin to be applied.

**Example:**

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
import org.jetbrains.intellij.platform.gradle.tasks.VerifyPluginTask

intellijPlatform {
  // ...

  pluginVerification {
    cliPath = file("/path/to/plugin-verifier-cli.jar")
    freeArgs = listOf("foo", "bar")
    homeDirectory = file("/path/to/pluginVerifierHomeDirectory/")
    downloadDirectory = file("/path/to/pluginVerifierHomeDirectory/ides/")
    failureLevel = VerifyPluginTask.FailureLevel.ALL
    verificationReportsDirectory = "build/reports/pluginVerifier"
    verificationReportsFormats = VerifyPluginTask.VerificationReportsFormats.ALL
    externalPrefixes = "com.example"
    teamCityOutputFormat = false
    subsystemsToCheck = VerifyPluginTask.Subsystems.ALL
    ignoredProblemsFile = file("/path/to/ignoredProblems.txt")

    ides {
      // ...
    }
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
import org.jetbrains.intellij.platform.gradle.tasks.VerifyPluginTask

intellijPlatform {
  // ...

  pluginVerification {
    cliPath = file('/path/to/plugin-verifier-cli.jar')
    freeArgs = ['foo', 'bar']
    homeDirectory = file('/path/to/pluginVerifierHomeDirectory/')
    downloadDirectory = file('/path/to/pluginVerifierHomeDirectory/ides/')
    failureLevel = VerifyPluginTask.FailureLevel.ALL
    verificationReportsDirectory = 'build/reports/pluginVerifier'
    verificationReportsFormats = VerifyPluginTask.VerificationReportsFormats.ALL
    externalPrefixes = 'com.example'
    teamCityOutputFormat = false
    subsystemsToCheck = VerifyPluginTask.Subsystems.ALL
    ignoredProblemsFile = file('/path/to/ignoredProblems.txt')

    ides {
      // ...
    }
  }
}
```

</tab>
</tabs>


See also:
- [](verifying_plugin_compatibility.md)
- [Tasks: `verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin)
- [Task Awares: `PluginVerifierAware`](tools_intellij_platform_gradle_plugin_task_awares.md#PluginVerifierAware)
- [](#intellijPlatform-pluginVerification-ides)
- [IntelliJ Plugin Verifier CLI](https://github.com/JetBrains/intellij-plugin-verifier)


### `cliPath`
{#intellijPlatform-pluginVerification-cliPath}

A path to the local IntelliJ Plugin Verifier CLI tool to be used.

{type="narrow"}
Type
: `RegularFileProperty`

See also:
- [Task Awares: `PluginVerifierAware`](tools_intellij_platform_gradle_plugin_task_awares.md#PluginVerifierAware)


### `downloadDirectory`
{#intellijPlatform-pluginVerification-downloadDirectory}

The path to the directory where IDEs used for the verification will be downloaded.

{type="narrow"}
Type
: `DirectoryProperty`

Default value
: <path>[`homeDirectory`](#intellijPlatform-pluginVerification-homeDirectory)/ides</path>


### `failureLevel`
{#intellijPlatform-pluginVerification-failureLevel}

Defines the verification level at which the task should fail if any reported issue matches.

{type="narrow"}
Type
: [`ListProperty<FailureLevel>`](tools_intellij_platform_gradle_plugin_types.md#FailureLevel)

Default value
: [`FailureLevel.COMPATIBILITY_PROBLEMS`](tools_intellij_platform_gradle_plugin_types.md#FailureLevel)

See also:
- [Tasks: `verifyPlugin.failureLevel`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin-failureLevel)


### `externalPrefixes`
{#intellijPlatform-pluginVerification-externalPrefixes}

The list of class prefixes from the external libraries.
The Plugin Verifier will not report `No such class` for classes of these packages.

{type="narrow"}
Type
: `ListProperty<String>`

See also:
- [Tasks: `verifyPlugin.externalPrefixes`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin-externalPrefixes)


### `freeArgs`
{#intellijPlatform-pluginVerification-freeArgs}

The list of free arguments is passed directly to the IntelliJ Plugin Verifier CLI tool.

They can be used in addition to the arguments that are provided by dedicated options.

{type="narrow"}
Type
: `ListProperty<String>`

See also:
- [Tasks: `verifyPlugin.freeArgs`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin-freeArgs)


### `homeDirectory`
{#intellijPlatform-pluginVerification-homeDirectory}

Retrieve the Plugin Verifier home directory used for storing downloaded IDEs.
Following home directory resolving method is taken directly from the Plugin Verifier to keep the compatibility.

{type="narrow"}
Type
: `DirectoryProperty`

Default value
: - Directory specified with `plugin.verifier.home.dir` system property
  - Directory specified with `XDG_CACHE_HOME` environment variable
  - <path>~/.cache/pluginVerifier</path>
  - <path>[buildDirectory]/tmp/pluginVerifier</path>


### `ignoredProblemsFile`
{#intellijPlatform-pluginVerification-ignoredProblemsFile}

A file that contains a list of problems that will be ignored in a report.

{type="narrow"}
Type
: `RegularFileProperty`

See also:
- [Tasks: `verifyPlugin.ignoredProblemsFile`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin-ignoredProblemsFile)


### `subsystemsToCheck`
{#intellijPlatform-pluginVerification-subsystemsToCheck}

Which subsystems of the IDE should be checked.

{type="narrow"}
Type
: `Subsystems`

Default value
: [`Subsystems.ALL`](tools_intellij_platform_gradle_plugin_types.md#Subsystems)

See also:
- [Tasks: `verifyPlugin.subsystemsToCheck`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin-subsystemsToCheck)


### `teamCityOutputFormat`
{#intellijPlatform-pluginVerification-teamCityOutputFormat}

A flag that controls the output format.
If set to `true`, the [TeamCity](https://www.jetbrains.com/teamcity/) compatible output will be returned to stdout.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `false`

See also:
- [Tasks: `verifyPlugin.teamCityOutputFormat`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin-teamCityOutputFormat)


### `verificationReportsDirectory`
{#intellijPlatform-pluginVerification-verificationReportsDirectory}

The path to the directory where verification reports will be saved.

{type="narrow"}
Type
: `DirectoryProperty`

Default value
: <path>[buildDirectory]/reports/pluginVerifier</path>

See also:
- [Tasks: `verifyPlugin.verificationReportsDirectory`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin-verificationReportsDirectory)


### `verificationReportsFormats`
{#intellijPlatform-pluginVerification-verificationReportsFormats}

The output formats of the verification reports.

{type="narrow"}
Type
: `ListProperty<VerificationReportsFormats>`

Default value
: [`VerificationReportsFormats.PLAIN`](tools_intellij_platform_gradle_plugin_types.md#VerificationReportsFormats), [`FailureVerificationReportsFormats`](tools_intellij_platform_gradle_plugin_types.md#VerificationReportsFormats)

See also:
- [Tasks: `verifyPlugin.verificationReportsFormats`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin-verificationReportsFormats)


## Verify Plugin IDEs
{#intellijPlatform-pluginVerification-ides}

The extension to define the IDEs to be used along with the IntelliJ Plugin Verifier CLI tool for the binary plugin verification.

It provides a set of helpers which add relevant entries to the configuration, which later is used to resolve IntelliJ-based IDE binary releases.

**Example:**

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
import org.jetbrains.intellij.platform.gradle.IntelliJPlatformType
import org.jetbrains.intellij.platform.gradle.models.ProductRelease

intellijPlatform {
  // ...

  pluginVerification {
    // ...

    ides {
      ide(IntelliJPlatformType.RustRover, "2023.3")
      local(file("/path/to/ide/"))
      recommended()
      select {
        types = listOf(IntelliJPlatformType.PhpStorm)
        channels = listOf(ProductRelease.Channel.RELEASE)
        sinceBuild = "232"
        untilBuild = "241.*"
      }
    }
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
import org.jetbrains.intellij.platform.gradle.IntelliJPlatformType
import org.jetbrains.intellij.platform.gradle.models.ProductRelease

intellijPlatform {
  // ...

  pluginVerification {
    // ...

    ides {
      ide IntelliJPlatformType.RustRover, "2023.3"
      local file('/path/to/ide/')
      recommended()
      select {
        it.types = [IntelliJPlatformType.PhpStorm]
        it.channels = [ProductRelease.Channel.RELEASE]
        it.sinceBuild = '232'
        it.untilBuild = '241.*'
      }
    }
  }
}
```

</tab>
</tabs>


See also:
- [](verifying_plugin_compatibility.md)
- [Tasks: `verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin)
- [Types: `IntelliJPlatformType`](tools_intellij_platform_gradle_plugin_types.md#IntelliJPlatformType)
- [Types: `ProductRelease.Channel`](tools_intellij_platform_gradle_plugin_types.md#ProductRelease-Channel)
- [Types: `ProductReleasesValueSource.FilterParameters`](tools_intellij_platform_gradle_plugin_types.md#ProductReleasesValueSource-FilterParameters)

| Function                                            | Description                                                                                                                                                                                         |
|-----------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <p>`ide(type, version)`</p><p>`ide(definition)`</p> | Adds a dependency to a binary IDE release to be used for testing with the IntelliJ Plugin Verifier.                                                                                                 |
| `local(localPath)`                                  | Adds the local IDE to be used for testing with the IntelliJ Plugin Verifier.                                                                                                                        |
| `recommended()`                                     | Retrieves matching IDEs using the default configuration based on the currently used IntelliJ Platform and applies them for IntelliJ Platform Verifier using the `ide` helper method.                |
| `select(configure)`                                 | Retrieves matching IDEs using custom [`ProductReleasesValueSource.FilterParameters`](tools_intellij_platform_gradle_plugin_types.md#ProductReleasesValueSource-FilterParameters) filter parameters. |


<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# IntelliJ Platform Gradle Plugin – FAQ

<link-summary>FAQ for using IntelliJ Platform Gradle Plugin</link-summary>

### How to modify system properties of the `runIde` task?

Using the [very same task documentation](https://docs.gradle.org/current/dsl/org.gradle.api.tasks.JavaExec.html), configure [`runIde`](tools_intellij_platform_gradle_plugin_tasks.md#runIde) task:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
tasks {
  runIde {
    jvmArgumentProviders += CommandLineArgumentProvider {
      listOf("-Dname=value")
    }
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
tasks {
  runIde {
    jvmArgumentProviders.add({
      ["-Dname=value"]
    } as CommandLineArgumentProvider)
  }
}

```

</tab>
</tabs>


### Task `runIdeForUiTests` not found

The [`runIdeForUiTests`](tools_intellij_platform_gradle_plugin_tasks.md#runIdeForUiTests) is no longer registered by default.
Follow the task documentation for more details.

### Missing `opentest4j` dependency in Test Framework

Due to the [IJPL-157292](https://youtrack.jetbrains.com/issue/IJPL-157292/lib-testFramework.jar-is-missing-library-opentest4j) issue, the `opentest4j` dependency is not resolved when using `TestFrameworkType.Platform` or `TestFrameworkType.JUnit5`.

This results in the `NoClassDefFoundError` exception:

```
java.lang.NoClassDefFoundError: org/opentest4j/AssertionFailedError
```

To apply the workaround, add the missing `org.opentest4j:opentest4j` test dependency to your Gradle build configuration:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
dependencies {
  // ...
  testImplementation("org.opentest4j:opentest4j:1.3.0")
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
dependencies {
  // ...
  testImplementation 'org.opentest4j:opentest4j:1.3.0'
}
```

</tab>
</tabs>


### JUnit5 Test Framework refers to JUnit4

Due to the [IJPL-159134](https://youtrack.jetbrains.com/issue/IJPL-159134/JUnit5-Test-Framework-refers-to-JUnit4-java.lang.NoClassDefFoundError-junit-framework-TestCase) issue, the JUnit5 Test Framework refers to JUnit4 classes when running test.

This results in the `NoClassDefFoundError` exceptions:

```
Caused by: java.lang.NoClassDefFoundError: junit/framework/TestCase

Caused by: java.lang.NoClassDefFoundError: org/junit/rules/TestRule
```

To apply the workaround, add the JUnit4 test runtime dependency to your Gradle build configuration:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
dependencies {
  // ...
  testRuntimeOnly("junit:junit:4.13.2")
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
dependencies {
  // ...
  testRuntimeOnly 'junit:junit:4.13.2'
}
```

</tab>
</tabs>


### Dependency on bundled plugin is not resolved after migrating from 1.x

{id="migrateToPluginId"}

Using [](tools_gradle_intellij_plugin.md), specifying the _directory name_ of the plugin was possible when adding a dependency on a bundled plugin
for compatibility reasons.
Now, using the actual plugin ID is required.
For example, provide plugin ID `com.intellij.java` instead of its directory name `java`.
A migration hint is provided for this and some other commonly used cases.

See [](plugin_dependencies.md#bundled-and-other-plugins) on how to get all bundled plugin IDs as well as a list of some commonly used ones.

### How to disable the automatic reload of dynamic plugins?

See [](ide_development_instance.md#enabling-auto-reload) for important caveats.

Disable auto-reload globally with [`intellijPlatform.autoReload`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-autoReload):

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellijPlatform {
  autoReload = false
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatform {
  autoReload = false
}
```

</tab>
</tabs>


It is also possible to disable it for a specific [`runIde`](tools_intellij_platform_gradle_plugin_tasks.md#runIde)-based task as follows:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
tasks {
  runIde {
    autoReload = false
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
tasks {
  runIde {
    autoReload = false
  }
}
```

</tab>
</tabs>


### How to disable building the searchable options?

Building the searchable options can be disabled using [`intellijPlatform.buildSearchableOptions`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-instrumentCode):

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellijPlatform {
  buildSearchableOptions = false
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatform {
  buildSearchableOptions = false
}
```

</tab>
</tabs>


As a result of disabling building searchable options, the [Settings](settings.md) that your plugin provides won't be searchable in the <ui-path>Settings</ui-path> dialog.
Disabling of the task is suggested for plugins that are not intended to provide custom settings.

### Gradle fails with `The request for this plugin could not be satisfied`

Gradle may fail with the following exception if the IntelliJ Platform Gradle Plugin is applied to the project multiple times with version specified more than once:

`The request for this plugin could not be satisfied because the plugin is already on the classpath with an unknown version, so compatibility cannot be checked.`

When applying the plugin in the <path>settings.gradle.kts</path> file, the version needs to be omitted when applying it in other <path>build.gradle.kts</path> files.

### How to show the log file of a sandbox instance?

The most convenient way to see the logs of a running IDE is to add a tab to the <control>Run</control> tool window displaying the contents of <path>idea.log</path> file.
In the Gradle `runIde` run configuration, add the log file path according to [sandbox location](ide_development_instance.md#the-development-instance-sandbox-directory) as described in [View logs](https://www.jetbrains.com/help/idea/setting-log-options.html).

### Task `setupDependencies` not found in root project 'projectName'

This exception is thrown when there's no `setupDependencies` task present in the project scope.

See [Migrating from Gradle IntelliJ Plugin](tools_intellij_platform_gradle_plugin_migration.md#setupdependencies) for more details.

### How to expose my plugin API sources to dependent plugins?

See the [](bundling_plugin_openapi_sources.md) section for details.

### How to mute specific problems in `pluginVerification`?

{id="mutePluginVerifierProblems"}

To mute specific problems (for example, use of specific forbidden words in the plugin name), use the [`freeArgs`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-freeArgs) parameter to pass a comma-separated list of problem IDs to be muted.

See the list of [available options](https://github.com/JetBrains/intellij-plugin-verifier/?tab=readme-ov-file#specific-options).

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellijPlatform {
  pluginVerification {
    // ...
    freeArgs = listOf(
      "-mute",
      "TemplateWordInPluginId,ForbiddenPluginIdPrefix"
    )
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatform {
  pluginVerification {
    // ...
    freeArgs = [
      "-mute",
      "TemplateWordInPluginId,ForbiddenPluginIdPrefix",
    ]
  }
}
```

</tab>
</tabs>


### JaCoCo Reports 0% Coverage

The Gradle IntelliJ Plugin, when targeting the IntelliJ SDK `2022.1+`, uses the `PathClassLoader` class loader by the following system property:

```
-Djava.system.class.loader=com.intellij.util.lang.PathClassLoader
```

Because of that, JaCoCo – and other external tools that rely on classes available in the bootstrap class loader – fail to discover plugin classes.

In addition, if the code instrumentation is enabled (see [`intellij.instrumentCode`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-instrumentCode)), it's required to switch to the compiled and instrumented output instead of default compiled classes.

The following changes to your Gradle configuration file:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
tasks {
  withType<Test> {
    configure<JacocoTaskExtension> {
      isIncludeNoLocationClasses = true
      excludes = listOf("jdk.internal.*")
    }
  }

  jacocoTestReport {
    classDirectories.setFrom(instrumentCode)
  }

  jacocoTestCoverageVerification {
    classDirectories.setFrom(instrumentCode)
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
test {
  jacoco {
    includeNoLocationClasses = true
    excludes = ["jdk.internal.*"]
  }
}

jacocoTestReport {
  classDirectories.setFrom(instrumentCode)
}

jacocoTestCoverageVerification {
  classDirectories.setFrom(instrumentCode)
}
```

</tab>
</tabs>

### Kotlin compiler throws `Out of memory. Java heap space` error

Please upgrade to Kotlin 1.9.0. See the [](using_kotlin.md#incremental-compilation) section if using Kotlin 1.8.20.

### How to check the latest available EAP release?

To list the IntelliJ Platform releases matching your criteria (IntelliJ Platform type, release channels, or build range),
use the [](tools_intellij_platform_gradle_plugin_tasks.md#printProductsReleases) task as follows:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
import org.jetbrains.intellij.platform.gradle.IntelliJPlatformType
import org.jetbrains.intellij.platform.gradle.models.ProductRelease

tasks {
  printProductsReleases {
    channels = listOf(ProductRelease.Channel.EAP)
    types = listOf(IntelliJPlatformType.IntellijIdeaCommunity)
    untilBuild = provider { null }

    doLast {
      val latestEap = productsReleases.get().max()
    }
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
import org.jetbrains.intellij.platform.gradle.IntelliJPlatformType
import org.jetbrains.intellij.platform.gradle.models.ProductRelease

tasks {
  printProductsReleases {
    channels = [ProductRelease.Channel.EAP]
    types = [IntelliJPlatformType.IntellijIdeaCommunity]
    untilBuild = null

    doLast {
      def latestEap = productsReleases.get().max()
    }
  }
}
```

</tab>
</tabs>


### The currently selected Java Runtime is not JetBrains Runtime (JBR)

When running tests or IDE with your plugin loaded, it is necessary to use JetBrains Runtime (JBR).
In the case, no JBR is found in the plugin configuration, there's the following warning logged by the [`verifyPluginProjectConfiguration`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPluginProjectConfiguration) task:

```
The currently selected Java Runtime is not JetBrains Runtime (JBR).
This may lead to unexpected IDE behaviors.
Please use IntelliJ Platform binary release with bundled JBR
or define it explicitly with project dependencies or JVM Toolchain.
```

To correctly run your tests or a specific IDE:

- use a binary IDE distribution with bundled JetBrains Runtime, i.e., by referring to a local IDE [`local(localPath)`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#custom-target-platforms)
  <tabs group="languages">
  <tab title="Kotlin" group-key="kotlin">

  ```kotlin
  repositories {
    mavenCentral()

    intellijPlatform {
      defaultRepositories()
    }
  }

  dependencies {
    intellijPlatform {
      local("/Users/hsz/Applications/IntelliJ IDEA Ultimate.app")
    }
  }
  ```

  </tab>
  <tab title="Groovy" group-key="groovy">

  ```groovy
    repositories {
      mavenCentral()

      intellijPlatform {
        defaultRepositories()
      }
    }

    dependencies {
      intellijPlatform {
        local '/Users/hsz/Applications/IntelliJ IDEA Ultimate.app'
      }
    }
    ```

  </tab>
  </tabs>

- add an explicit dependency on a JetBrains Runtime with [`jetbrainsRuntime()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#java-runtime)
  <tabs group="languages">
  <tab title="Kotlin" group-key="kotlin">

  ```kotlin
  repositories {
    mavenCentral()

    intellijPlatform {
      defaultRepositories()
      jetbrainsRuntime()
    }
  }

  dependencies {
    intellijPlatform {
      intellijIdeaCommunity("%ijPlatform%")
      jetbrainsRuntime("...")
    }
  }
  ```

  </tab>
  <tab title="Groovy" group-key="groovy">

  ```groovy
    repositories {
      mavenCentral()

      intellijPlatform {
        defaultRepositories()
        jetbrainsRuntime()
      }
    }

    dependencies {
      intellijPlatform {
        intellijIdeaCommunity '%ijPlatform%'
        jetbrainsRuntime '...'
      }
    }
    ```

  </tab>
  </tabs>

- specify the vendor when configuring the JVM Toolchain along with [Foojay Toolchains Plugin](https://github.com/gradle/foojay-toolchains):
  <tabs group="languages">
  <tab title="Kotlin" group-key="kotlin">

  ```kotlin
  kotlin {
    jvmToolchain {
      languageVersion = JavaLanguageVersion.of(17)
      vendor = JvmVendorSpec.JETBRAINS
    }
  }
  ```

  </tab>
  <tab title="Groovy" group-key="groovy">

  ```groovy
    java {
      toolchain {
        languageVersion = JavaLanguageVersion.of(17)
        vendor = JvmVendorSpec.JETBRAINS
      }
    }
    ```

  </tab>
  </tabs>

### plugin.xml: `Cannot resolve plugin com.intellij.modules.vcs`

Add an explicit [dependency](tools_intellij_platform_gradle_plugin_dependencies_extension.md) on the bundled module:

```kotlin
dependencies {
  intellijPlatform {
    bundledModule("intellij.platform.vcs.impl")
  }
}
```

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Gradle Properties

<link-summary>IntelliJ Platform Gradle Plugin provides a set of Gradle properties to control its behaviors.</link-summary>

<include from="tools_intellij_platform_gradle_plugin.md" element-id="faq"/>

The IntelliJ Platform Gradle Plugin exposes a number of Gradle properties to control some of the low-level Gradle plugin behaviors.
To enable or disable a particular feature, add a Project property to the <path>gradle.properties</path> file with the following pattern:

```
org.jetbrains.intellij.platform.<name>=<value>
```


## `downloadSources`
{#downloadSources}

Instruct the IDE that sources are needed to be downloaded when working with IntelliJ Platform Gradle Plugin.

Value is passed directly to the [IDEA Gradle Plugin](https://docs.gradle.org/current/userguide/idea_plugin.html) to the `idea.module.downloadSources` property.

See also:
- [`IdeaModule.downloadSources`](https://docs.gradle.org/current/dsl/org.gradle.plugins.ide.idea.model.IdeaModule.html#org.gradle.plugins.ide.idea.model.IdeaModule:downloadSources)

{type="narrow"}
Default value
: `true`

Example
:
```
org.jetbrains.intellij.platform.downloadSources=true
```


## `intellijPlatformCache`
{#intellijPlatformCache}

Specifies the location of the local IntelliJ Platform cache directory for storing files related to the current project, like:
- XML files generated for the [`localPlatformArtifacts`](tools_intellij_platform_gradle_plugin_repositories_extension.md#additional-repositories) local Ivy repository
- self-update lock file used by the [`initializeIntelliJPlatformPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#initializeIntelliJPlatformPlugin) task

> This directory should be excluded from versioning.
>
{style="warning"}

{type="narrow"}
Default value
: <path>[rootProject]/.intellijPlatform/</path>

Example
:
```
org.jetbrains.intellij.platform.intellijPlatformCache=/path/to/intellijPlatformCache/
```


## `localPlatformArtifacts`
{#localPlatformArtifacts}

The [`localPlatformArtifacts()`](tools_intellij_platform_gradle_plugin_repositories_extension.md#additional-repositories) entry applied to the `repositories {}` block is required to apply to the project dependencies that need extra pre-processing before they can be correctly used by the IntelliJ Platform Gradle Plugin and loaded by Gradle.

{type="narrow"}
Default value
: <path>[intellijPlatformCache](#intellijPlatformCache)/localPlatformArtifacts/</path>

Example
:
```
org.jetbrains.intellij.platform.localPlatformArtifacts=/path/to/localPlatformArtifacts/
```


## `noSearchableOptionsWarning`
{#noSearchableOptionsWarning}

When the [](tools_intellij_platform_gradle_plugin_tasks.md#buildSearchableOptions) doesn't produce any results, for example, when the plugin doesn't implement any [Settings](settings.md), a warning is shown to suggest disabling it for better performance with [](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-buildSearchableOptions).

{type="narrow"}
Default value
: `true`

Example
:
```
org.jetbrains.intellij.platform.buildSearchableOptions=false
```


## `paidPluginSearchableOptionsWarning`
{#paidPluginSearchableOptionsWarning}

Due to IDE limitations, it is impossible to run the IDE in headless mode to collect searchable options for a paid plugin.
As paid plugins require providing a valid license and presenting a UI dialog, it is impossible to handle such a case, and the task will fail.
This feature flag displays the given warning when the task is run by a paid plugin.

{type="narrow"}
Default value
: `true`

Example
:
```
org.jetbrains.intellij.platform.paidPluginSearchableOptionsWarning=false
```


## `productsReleasesAndroidStudioUrl`
{#productsReleasesAndroidStudioUrl}

Specifies the URL from which the list of all Android Studio releases is fetched.
This listing is later parsed by `ProductReleasesValueSource` to provide a list of IDEs matching the filtering criteria for running the IntelliJ Plugin Verifier tool with the [`verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin) task.

{type="narrow"}
Default value
: `https://jb.gg/android-studio-releases-list.xml`

Example
:
```
org.jetbrains.intellij.platform.productsReleasesAndroidStudioUrl=https://...
```


## `productsReleasesJetBrainsIdesUrl`
{#productsReleasesJetBrainsIdesUrl}

Specifies the URL from which the list of all Android Studio releases is fetched.
This listing is later parsed by `ProductReleasesValueSource` to provide a list of IDEs matching the filtering criteria for running the IntelliJ Plugin Verifier tool with the [`verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin) task.

{type="narrow"}
Default value
: `https://www.jetbrains.com/updates/updates.xml`

Example
:
```
org.jetbrains.intellij.platform.productsReleasesJetBrainsIdesUrl=https://...
```


## `selfUpdateCheck`
{#selfUpdateCheck}

Checks whether the currently used IntelliJ Platform Gradle Plugin is outdated and if a new release is available.
The plugin performs an update check on every run asking the GitHub Releases page for the redirection URL
to the latest version with `HEAD` HTTP request: [](https://github.com/jetbrains/gradle-intellij-plugin/releases/latest).

If the current version is outdated, the plugin will emit a warning with its current and the latest version.

Feature respects the Gradle [`--offline`](https://docs.gradle.org/current/userguide/command_line_interface.html#sec:command_line_execution_options) mode.

> It is strongly suggested to always use the latest available version. Older plugin versions may also not fully support the latest IDE releases.

{type="narrow"}
Default value
: `true`

Example
:
```
org.jetbrains.intellij.platform.selfUpdateCheck=false
```


## `shimServerPort`
{#shimServerPort}

Specifies the default Shim server port at which the local webserver is run.
The Shim server is used to proxy requests to the authorized custom plugin repositories registered with [`customPluginRepository()`](tools_intellij_platform_gradle_plugin_repositories_extension.md#additional-repositories).

{type="narrow"}
Default value
: `7348`

Example
:
```
org.jetbrains.intellij.platform.shimServerPort=7348
```


## `useCacheRedirector`
{#useCacheRedirector}

By default, JetBrains Cache Redirector is used when resolving Maven repositories or any resources used by the IntelliJ Platform Gradle Plugin.
Due to limitations, sometimes it is desired to limit the list of remote endpoints accessed by Gradle.

It is possible to refer to the direct location (whenever it is possible) by switching off JetBrains Cache Redirector globally.

{type="narrow"}
Default value
: `true`

Example
:
```
org.jetbrains.intellij.platform.useCacheRedirector=false
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# JetBrains Runtime (JBR)

<link-summary>The IntelliJ Platform Gradle Plugin requires JetBrains Runtime (JBR), which can be provided in multiple ways.</link-summary>

<include from="tools_intellij_platform_gradle_plugin.md" element-id="faq"/>

JetBrains Runtime (JBR) is a custom version of OpenJDK, specifically optimized for IntelliJ-based IDEs. It supports enhanced class redefinition (DCEVM), includes the Java Chromium Embedded Framework (JCEF), and improves aspects such as font rendering and keyboard support, thereby enhancing overall performance.
IDEs built on the IntelliJ Platform rely on JBR for running.
Hence, when developing plugins using the IntelliJ Platform Gradle Plugin, it's essential to have JBR provided.

For the best experience, it is recommended to rely on JBR bundled with the IntelliJ Platform used for development.
If one is not available, i.e., when targeting IntelliJ Platform snapshot or nightly releases, there are other ways available for providing JetBrains Runtime in a required version or variant.

## Bundled (Default)

IDE releases provided with JetBrains CDN (download.jetbrains.com) are OS-specific and contain JetBrains Runtime (JBR) already bundled within the archive.
This is the recommended way for developing a plugin, as it comes in exactly the same version as JetBrains IDEs delivered to users.

To use this approach, no extra steps are required but declare the IntelliJ Platform, see: [](tools_intellij_platform_gradle_plugin_dependencies_extension.md#target-platforms).

## Obtained with IntelliJ Platform from Maven

If the IntelliJ Platform is resolved with the IntelliJ Maven Repository, it has no JetBrains Runtime (JBR) bundled.
In such a case, it is necessary to provide it in the suitable version with the version read from the <path>[intellijPlatform]/dependencies.txt</path> file.

This can be easily achieved by using the `jetbrainsRuntime()` repository helper pointing to [JetBrains Runtime GitHub Releases](https://github.com/JetBrains/JetBrainsRuntime/releases/) and dependency helper with no arguments provided:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
    jetbrainsRuntime()
    // ...
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity("%ijPlatform%")

    jetbrainsRuntime()

    // ...
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
    jetbrainsRuntime()
    // ...
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity '%ijPlatform%'

    jetbrainsRuntime()

    // ...
  }
}
```

</tab>
</tabs>


## Declared Explicitly

It is possible to explicitly specify JetBrains Runtime version, variant, or exact build with:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
    jetbrainsRuntime()
    // ...
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity("%ijPlatform%")

    jetbrainsRuntime(version, variant, architecture)
    // or
    jetbrainsRuntimeExplicit(explicitVersion)

    // ...
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
    jetbrainsRuntime()
    // ...
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity '%ijPlatform%'

    jetbrainsRuntime(version, variant, architecture)
    // or
    jetbrainsRuntimeExplicit(explicitVersion)

    // ...
  }
}
```

</tab>
</tabs>


Provided `version`, `variant`, and `architecture` parameters along with the `explicitVersion` are used to resolve the JetBrains Runtime archives published on [GitHub Releases](https://github.com/JetBrains/JetBrainsRuntime/releases/) page.

To correctly understand the pattern, refer to the archive names in format:
```
jbr_[prefix]-[jdk]-[os]-[arch]-b[build].tar.gz
```
e.g.:
```
jbr_jcef-21.0.3-osx-aarch64-b446.1.tar.gz
```
which can be split into the following parts:

- `prefix` = `jcef`
- `jdk` = `21.0.3`
- `os` = `osx`
- `arch` = `aarch64`
- `build` = `446.1`

Note that the `version` parameter is actually a combination of JDK and build numbers in format `[jdk]b[build]`.

To resolve the `jbr_jcef-21.0.3-osx-aarch64-b446.1.tar.gz` archive, you can use:
- `jetbrainsRuntime("21.0.3b446.1", "osx", "aarch64")`
- `jetbrainsRuntime("21.0.3b446.1")` (`os` and `architecture` are by default resolved with the current environment)
- `jetbrainsRuntimeExplicit("jbr_jcef-21.0.3-osx-aarch64-b446.1")`

See the [JetBrains Runtime releases page](https://github.com/JetBrains/JetBrainsRuntime/releases) for the list of available releases.

## Foojay Toolchains Plugin

Since Gradle `8.4`, it is possible to specify JetBrains as a known JVM vendor and instruct Gradle to search for JetBrains Runtime within available toolchains (see [Toolchains for JVM projects](https://docs.gradle.org/current/userguide/toolchains.html)).

Along with the [Foojay Toolchains Plugin](https://github.com/gradle/foojay-toolchains), Gradle can resolve JetBrains Runtime from the remote repository if the suitable JVM is not present:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

<path>build.gradle.kts</path>
```kotlin
kotlin {
  jvmToolchain {
    languageVersion = JavaLanguageVersion.of(17)
    vendor = JvmVendorSpec.JETBRAINS
  }
}
```

<path>settings.gradle.kts</path>
```kotlin
plugins {
  id("org.gradle.toolchains.foojay-resolver-convention") version "..."
}
```

</tab>
<tab title="Groovy" group-key="groovy">

<path>build.gradle</path>
```groovy
java {
  toolchain {
    languageVersion = JavaLanguageVersion.of(17)
    vendor = JvmVendorSpec.JETBRAINS
  }
}
```

<path>settings.gradle</path>
```groovy
plugins {
  id 'org.gradle.toolchains.foojay-resolver-convention' version '...'
}
```

</tab>
</tabs>


Please note that the latest available JetBrains Runtime release is always resolved, which may lead to unexpected behaviors.

## Project SDK

When building or running a project directly from the IDE, it is possible to specify JetBrains Runtime in Project Settings as a Project SDK.

Provided JBR will be eventually resolved and passed to Gradle tasks for running.
However, this setting is ignored when running a project directly from the command line or CI.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Migrating from Gradle IntelliJ Plugin (1.x)

<link-summary>IntelliJ Platform Gradle Plugin (2.x) migration guide from Gradle IntelliJ Plugin (1.x)</link-summary>

## Plugin Name Change

As the **2.x** branch brings significant breaking changes to the plugin, the name was changed from _Gradle IntelliJ Plugin_ to
_IntelliJ Platform Gradle Plugin_ as the old one was confused with the bundled Gradle support plugin in the IDE.

The plugin is published to the Gradle Plugin Portal with a new name as a new entry, and the old one is marked as deprecated.

## Minimum Gradle and Java Versions

The minimum required Gradle version is now **8.2** running on Java **17** or later.
See [](tools_intellij_platform_gradle_plugin.md#requirements).

## Plugin ID Change

Plugin ID has changed from `org.jetbrains.intellij` to `org.jetbrains.intellij.platform`.
To apply it, use:

```kotlin
plugins {
  id("org.jetbrains.intellij.platform") version "%intellij-platform-gradle-plugin-version%"
}
```

## Migration Plugin

The 2.x release introduces multiple [](tools_intellij_platform_gradle_plugin_plugins.md), featuring a dedicated one to help with migration from Gradle IntelliJ Plugin 1.x: [](tools_intellij_platform_gradle_plugin_plugins.md#migration).

When you apply the [](#plugin-id-change), Gradle will fail to process the <path>build.gradle.kts</path> file as the old [](#intellij-extension) doesn't exist anymore.
To fill all gaps and help users figure out required changes - right in the IDE - the `org.jetbrains.intellij.platform.migration` plugin was introduced:

```kotlin
plugins {
  id("org.jetbrains.intellij.platform") version "%intellij-platform-gradle-plugin-version%"
  id("org.jetbrains.intellij.platform.migration") version "%intellij-platform-gradle-plugin-version%"
}
```

## `intellij {}` Extension

The `intellij {}` extension is no longer available and was replaced with `intellijPlatform {}`.
Note that the available properties differ, see [](tools_intellij_platform_gradle_plugin_extension.md) for details.

### `intellij.pluginName`

Use: [`intellijPlatform.pluginConfiguration.name`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-name):

```kotlin
intellijPlatform {
  pluginConfiguration {
    name = ...
  }
}
```

### `intellij.type`, `intellij.version`

Define the IntelliJ Platform dependency in `dependencies{}` block:

```kotlin
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    create(type, version)
  }
}
```

See: [](tools_intellij_platform_gradle_plugin_dependencies_extension.md)

### `intellij.plugins`

The `intellij.plugins` property is no longer available.

> Bundled plugins are now defined separately from plugins of other sources (like JetBrains Marketplace).
>
{style="note"}

Define dependencies on plugins or bundled plugins in `dependencies {}` block instead:

**Example:**

Setting up dependencies on comma-separated plugins listed in `platformPlugins` and `platformBundledPlugins` properties from <path>gradle.properties</path>.

```kotlin
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    plugins(providers.gradleProperty("platformPlugins").map { it.split(',') })
    bundledPlugins(providers.gradleProperty("platformBundledPlugins").map { it.split(',') })
  }
}
```

See:
- [](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins)
- [](tools_intellij_platform_gradle_plugin_faq.md#migrateToPluginId)

<include from="tools_intellij_platform_gradle_plugin_repositories_extension.md" element-id="localPlatformArtifacts_required"/>

### `intellij.localPath`

Define dependencies on local IDE instance in `dependencies {}` block:

```kotlin
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    local(localPath)
  }
}
```

See: [](tools_intellij_platform_gradle_plugin_dependencies_extension.md#custom-target-platforms)

<include from="tools_intellij_platform_gradle_plugin_repositories_extension.md" element-id="localPlatformArtifacts_required"/>

### `intellij.updateSinceUntilBuild`, `intellij.sameSinceUntilBuild`

The since/until properties in the <path>plugin.xml</path> file are now managed by the [`intellijPlatform`](tools_intellij_platform_gradle_plugin_extension.md) extension.

### `intellij.intellijRepository`,` intellij.pluginsRepositories`, `intellij.jreRepository`

### `intellij.sandboxDir`

Use the [`intellijPlatform.sandboxContainer`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-sandboxContainer).

Use the `repositories {}` block to manage repositories instead.

See: [](tools_intellij_platform_gradle_plugin_repositories_extension.md)

### `intellij.downloadSources`

Downloading sources is managed by the _Plugin DevKit_ plugin in version 2024.1+.

### `intellij.ideaDependency`

Access the [`ProductInfo`](tools_intellij_platform_gradle_plugin_types.md#ProductInfo) object using the [`intellijPlatform.productInfo`](tools_intellij_platform_gradle_plugin_types.md#ProductInfo) property.

## Tasks

### Running Tests

An [explicit dependency](tools_intellij_platform_gradle_plugin_dependencies_extension.md#testing) on a test framework is now required.

### `downloadRobotServerPlugin`

The Robot Server Plugin can now be downloaded using `plugins { robotServerPlugin() }` dependency helper when declaring a custom task.


### `runIdeForUiTests`

The `runIdeForUiTests` task is obsolete and should be replaced with an explicit declaration.

The task running IDE with the Robot Server Plugin should be declared now as a custom `runIde` task with plugin loaded:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
val runIdeForUiTests by intellijPlatformTesting.runIde.registering {
  task {
    jvmArgumentProviders += CommandLineArgumentProvider {
      listOf(
        "-Drobot-server.port=8082",
        "-Dide.mac.message.dialogs.as.sheets=false",
        "-Djb.privacy.policy.text=<!--999.999-->",
        "-Djb.consents.confirmation.enabled=false",
      )
    }
  }

  plugins {
    robotServerPlugin()
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
val runIdeForUiTests by intellijPlatformTesting.runIde.registering {
  task {
    jvmArgumentProviders.add({
      [
        '-Drobot-server.port=8082',
        '-Dide.mac.message.dialogs.as.sheets=false',
        '-Djb.privacy.policy.text=<!--999.999-->',
        '-Djb.consents.confirmation.enabled=false',
      ]
    } as CommandLineArgumentProvider)
  }

  plugins {
    robotServerPlugin()
  }
}
```

</tab>
</tabs>


### `runPluginVerifier`

The task for running the IntelliJ Plugin Verifier is now called [`verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin).

Use [`intellijPlatform.pluginVerification`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification) extension to configure it.

### `setupDependencies`

To make the IntelliJ SDK dependency available in the IDE, the `setupDependencies` task was provided by Gradle IntelliJ Plugin 1.x.
This task is no longer required, but when switching from 1.x, Gradle may still want to execute it in the _afterSync_ phase.

> Due to the presence of the `setupDependencies` task in the <control>Tasks Activation</control>, the IDE may fail with the following exception if the task is not present:
> ```
> Task 'setupDependencies' not found in root project 'projectName'.
> ```
>
> To fix this problem, remove any references to `setupDependencies` task from your project.
>
{title="Task 'setupDependencies' not found" style="warning"}

To completely drop this approach, it is mandatory to remove its reference manually in the IDE.

<procedure title="Removing 'setupDependencies' Task">

1. Open <control>Gradle</control> Tool Window
2. Right-click on the main module and select <control>Tasks Activation</control>
3. In the <control>Tasks Activation</control> modal window, find and remove the `setupDependencies` entry.

</procedure>

Alternatively, edit the <path>.idea/workspace.xml</path> file and remove the `setupDependencies` entry.

## Other

### Unresolved 'idea-ext' Plugin

Add an explicit dependency on [the plugin](https://github.com/JetBrains/gradle-idea-ext-plugin) in <path>build.gradle.kts</path>:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
plugins {
  id("org.jetbrains.gradle.plugin.idea-ext") version "1.1.9"
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
plugins {
  id 'org.jetbrains.gradle.plugin.idea-ext' version '1.1.9'
}
```

</tab>
</tabs>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Plugins

<link-summary>IntelliJ Platform Gradle Plugin plugins.</link-summary>

<include from="tools_intellij_platform_gradle_plugin.md" element-id="faq"/>

The IntelliJ Platform Gradle Plugin consists of sub-plugins which should be applied depending on the project structure.

Subplugins architecture allows applying a subset of features, for example, to provide the IntelliJ Platform dependency to a project submodule without creating unnecessary tasks.

The following diagram describes dependencies between plugins provided with the IntelliJ Platform Gradle Plugin.


```mermaid
flowchart TB

    subgraph SETTINGS_LEVEL ["<div style='margin: 5px auto; font-size: 0.8rem'>settings.gradle.kts</div>"]
        Settings("<b>Settings</b>")
    end

    subgraph PROJECT_LEVEL ["<div style='margin: 5px auto; font-size: 0.8rem'>build.gradle.kts</div>"]
        Platform("<b>Platform</b>")
        Module("<b>Module</b>")
        Migration
        Base
    end

    Module --> Base
    Platform --> Module & Base
    Migration --> Platform

    click Platform "#platform"
    click Module "#module"
    click Settings "#settings"
    click Migration "#migration"
    click Base "#base"

    style Platform stroke-width: 3px
    style Module stroke-width: 3px
    style Settings stroke-width: 3px
    style SETTINGS_LEVEL fill:transparent,stroke:#666,stroke-dasharray: 10 10
    style PROJECT_LEVEL fill:transparent,stroke:#666,stroke-dasharray: 10 10
```


## Platform
{#platform}

<link-summary>Top-level plugin that applies all the tooling for plugin development for IntelliJ-based IDEs.</link-summary>

**Plugin ID: `org.jetbrains.intellij.platform`**

This is a top-level plugin that applies all the tooling for plugin development for IntelliJ-based IDEs.
It should be used only with the root module (for submodules, see [](#module)).

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

<path>build.gradle.kts</path>
```kotlin
plugins {
  id("org.jetbrains.intellij.platform") version "%intellij-platform-gradle-plugin-version%"
}
```

</tab>
<tab title="Groovy" group-key="groovy">

<path>build.gradle.kts</path>
```kotlin
plugins {
  id("org.jetbrains.intellij.platform") version "%intellij-platform-gradle-plugin-version%"
}
```

</tab>
</tabs>

### Available tasks
{#platform-available-tasks}

[`buildPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#buildPlugin),
[`buildSearchableOptions`](tools_intellij_platform_gradle_plugin_tasks.md#buildSearchableOptions),
[`composedJar`](tools_intellij_platform_gradle_plugin_tasks.md#composedJar),
[`generateManifest`](tools_intellij_platform_gradle_plugin_tasks.md#generateManifest),
[`initializeIntelliJPlatformPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#initializeIntelliJPlatformPlugin),
[`instrumentCode`](tools_intellij_platform_gradle_plugin_tasks.md#instrumentCode),
[`instrumentedJar`](tools_intellij_platform_gradle_plugin_tasks.md#instrumentedJar),
[`jarSearchableOptions`](tools_intellij_platform_gradle_plugin_tasks.md#jarSearchableOptions),
[`patchPluginXml`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml),
[`prepareSandbox`](tools_intellij_platform_gradle_plugin_tasks.md#prepareSandbox),
[`prepareTest`](tools_intellij_platform_gradle_plugin_tasks.md#prepareTest),
[`printBundledPlugins`](tools_intellij_platform_gradle_plugin_tasks.md#printBundledPlugins),
[`printProductsReleases`](tools_intellij_platform_gradle_plugin_tasks.md#printProductsReleases),
[`publishPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#publishPlugin),
[`runIde`](tools_intellij_platform_gradle_plugin_tasks.md#runIde),
[`setupDependencies`](tools_intellij_platform_gradle_plugin_tasks.md#setupDependencies),
[`signPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin),
[`testIdePerformance`](tools_intellij_platform_gradle_plugin_tasks.md#testIdePerformance),
[`testIde`](tools_intellij_platform_gradle_plugin_tasks.md#testIde),
[`testIdeUi`](tools_intellij_platform_gradle_plugin_tasks.md#testIdeUi),
[`verifyPluginProjectConfiguration`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPluginProjectConfiguration),
[`verifyPluginSignature`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPluginSignature),
[`verifyPluginStructure`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPluginStructure),
[`verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin)


## Module
{#module}

<link-summary>Applies a smaller set of functionalities for compiling and testing submodules when working in a multi-module architecture.</link-summary>

**Plugin ID: `org.jetbrains.intellij.platform.module`**

This plugin applies a smaller set of functionalities for compiling and testing submodules when working in a multi-module architecture.

Compared to the main plugin, it doesn't contain tasks related to publishing or running the IDE for testing purposes.


<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

<path>settings.gradle.kts</path>

```kotlin
rootProject.name = "..."

include(":submodule")
```

<path>submodule/build.gradle.kts</path>

```kotlin
plugins {
  id("org.jetbrains.intellij.platform.module")
}

repositories {
  mavenCentral()

  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity("%ijPlatform%")
  }
}
```

<path>build.gradle.kts</path>

```kotlin
plugins {
  id("org.jetbrains.intellij.platform") version "%intellij-platform-gradle-plugin-version%"
}

repositories {
  mavenCentral()

  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity("%ijPlatform%")
    pluginModule(implementation(project(":submodule")))
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

<path>settings.gradle</path>

```groovy
rootProject.name = '...'

include ':submodule'
```

<path>submodule/build.gradle</path>

```groovy
plugins {
  id 'org.jetbrains.intellij.platform.module'
}

repositories {
  mavenCentral()

  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity '%ijPlatform%'
  }
}
```

<path>build.gradle</path>

```groovy
plugins {
  id 'org.jetbrains.intellij.platform' version '%intellij-platform-gradle-plugin-version%'
}

repositories {
  mavenCentral()

  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity '%ijPlatform%'
    pluginModule(implementation(project(':submodule')))
  }
}
```

</tab>
</tabs>


Note that the `:submodule` is added both to the `implementation` configuration and `intellijPlatformPluginModule` using the [](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins) helper method.
This guarantees that the submodule content will be merged into the main plugin JAR file.

### Available tasks
{#module-available-tasks}

[`composedJar`](tools_intellij_platform_gradle_plugin_tasks.md#composedJar),
[`generateManifest`](tools_intellij_platform_gradle_plugin_tasks.md#generateManifest),
[`initializeIntelliJPlatformPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#initializeIntelliJPlatformPlugin),
[`instrumentCode`](tools_intellij_platform_gradle_plugin_tasks.md#instrumentCode),
[`instrumentedJar`](tools_intellij_platform_gradle_plugin_tasks.md#instrumentedJar),
[`prepareSandbox`](tools_intellij_platform_gradle_plugin_tasks.md#prepareSandbox),
[`prepareTest`](tools_intellij_platform_gradle_plugin_tasks.md#prepareTest),
[`printBundledPlugins`](tools_intellij_platform_gradle_plugin_tasks.md#printBundledPlugins),
[`printProductsReleases`](tools_intellij_platform_gradle_plugin_tasks.md#printProductsReleases),
[`setupDependencies`](tools_intellij_platform_gradle_plugin_tasks.md#setupDependencies),
[`testIde`](tools_intellij_platform_gradle_plugin_tasks.md#testIde),
[`verifyPluginProjectConfiguration`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPluginProjectConfiguration)


## Settings
{#settings}

<link-summary>Plugin available for use in Gradle settings file.</link-summary>

**Plugin ID: `org.jetbrains.intellij.platform.settings`**

If you define project repositories within the <path>settings.gradle.kts</path> using the `dependencyResolutionManagement`, make sure to include the Settings plugin in <path>settings.gradle.kts</path>.

This approach allows for omitting the `repositories {}` definition in the <path>build.gradle.kts</path> files. See [](tools_intellij_platform_gradle_plugin.md#configuration.dependencyResolutionManagement) for more details.

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

<path>settings.gradle.kts</path>

```kotlin
import org.jetbrains.intellij.platform.gradle.extensions.intellijPlatform

plugins {
  id("org.jetbrains.intellij.platform.settings") version "%intellij-platform-gradle-plugin-version%"
}

rootProject.name = "..."

dependencyResolutionManagement {
  repositoriesMode = RepositoriesMode.FAIL_ON_PROJECT_REPOS

  repositories {
    mavenCentral()

    intellijPlatform {
      defaultRepositories()
    }
  }
}

include(":submodule")
```

<path>build.gradle.kts</path>

```kotlin
plugins {
  id("org.jetbrains.intellij.platform")
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity("%ijPlatform%")
    pluginModule(implementation(project(":submodule")))
  }
}
```

> Note that <path>build.gradle.kts</path> doesn't define the IntelliJ Platform Gradle Plugin version anymore as it was earlier declared in the <path>settings.gradle.kts</path> file.
> Specifying the version in two places may result in the following Gradle exception:
>
> `The request for this plugin could not be satisfied because the plugin is already on the classpath with an unknown version, so compatibility cannot be checked.`


<path>submodule/build.gradle.kts</path>

```kotlin
plugins {
  id("org.jetbrains.intellij.platform.module")
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity("%ijPlatform%")
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

<path>settings.gradle</path>

```groovy
import org.jetbrains.intellij.platform.gradle.extensions.intellijPlatform

plugins {
  id 'org.jetbrains.intellij.platform.settings' version '%intellij-platform-gradle-plugin-version%'
}

rootProject.name = '...'

dependencyResolutionManagement {
  repositoriesMode = RepositoriesMode.FAIL_ON_PROJECT_REPOS

  repositories {
    mavenCentral()

    intellijPlatform {
      defaultRepositories()
    }
  }
}

include ':submodule'
```

<path>build.gradle</path>

```groovy
plugins {
  id 'org.jetbrains.intellij.platform'
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity '%ijPlatform%'
    pluginModule(implementation(project(':submodule')))
  }
}
```

> Note that <path>build.gradle</path> doesn't define the IntelliJ Platform Gradle Plugin version anymore as it was earlier declared in the <path>settings.gradle</path> file.
> Specifying the version in two places may result in the following Gradle exception:
>
> `The request for this plugin could not be satisfied because the plugin is already on the classpath with an unknown version, so compatibility cannot be checked.`


<path>submodule/build.gradle</path>

```groovy
plugins {
  id 'org.jetbrains.intellij.platform.module'
}

dependencies {
  intellijPlatform {
    intellijIdeaCommunity '%ijPlatform%'
  }
}
```

</tab>
</tabs>


## Migration
{#migration}

<link-summary>Plugin is designed to assist in upgrading projects that use Gradle IntelliJ Plugin **1.x** to the **2.x** version.</link-summary>

**Plugin ID: `org.jetbrains.intellij.platform.migration`**

The Migration plugin is designed to assist in upgrading projects that use Gradle IntelliJ Plugin **1.x** to the **2.x** version.
To prevent Gradle failing due to breaking changes, the `org.jetbrains.intellij.platform.migration` plugin was introduced to fill missing gaps and provide migration hints.

It loads the [](#platform) plugin with additional mocks and checks applied — after the successful migration, the `org.jetbrains.intellij.platform.migration` identifier shoud be replaced with `org.jetbrains.intellij.platform`.

See [](tools_intellij_platform_gradle_plugin_migration.md) for more details.


## Base
{#base}

<link-summary>Prepares all the custom configurations, transformers, and base tasks needed to manage the IntelliJ Platform dependency, JetBrains Runtime, CLI tools, and others.</link-summary>

**Plugin ID: `org.jetbrains.intellij.platform.base`**

Prepares all the custom configurations, transformers, and base tasks needed to manage the IntelliJ Platform dependency, JetBrains Runtime, CLI tools, and others.

It also introduces the [](tools_intellij_platform_gradle_plugin_extension.md) to the <path>build.gradle.kts</path> file along with [](tools_intellij_platform_gradle_plugin_dependencies_extension.md) and [](tools_intellij_platform_gradle_plugin_repositories_extension.md) to help preconfigure project dependencies:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
repositories {
  ...

  // Repositories Extension
  intellijPlatform { ... }
}

dependencies {
  ...

  // Dependencies Extension
  intellijPlatform { ... }
}

// IntelliJ Platform Extension
intellijPlatform { ... }
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
repositories {
  ...

  // Repositories Extension
  intellijPlatform { ... }
}

dependencies {
  ...

  // Dependencies Extension
  intellijPlatform { ... }
}

// IntelliJ Platform Extension
intellijPlatform { ... }
```

</tab>
</tabs>


The plugin also introduces a task listener which allows for creating custom tasks decorated with [](tools_intellij_platform_gradle_plugin_task_awares.md).
See [](tools_intellij_platform_gradle_plugin_recipes.md) for more details.

### Available tasks
{#base-available-tasks}

[`initializeIntelliJPlatformPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#initializeIntelliJPlatformPlugin),
[`printBundledPlugins`](tools_intellij_platform_gradle_plugin_tasks.md#printBundledPlugins),
[`printProductsReleases`](tools_intellij_platform_gradle_plugin_tasks.md#printProductsReleases),
[`setupDependencies`](tools_intellij_platform_gradle_plugin_tasks.md#setupDependencies),
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Recipes

<link-summary>Recipes for solving particular tasks with IntelliJ Platform Gradle Plugin</link-summary>

## Run a custom task with a customized sandbox location

To create a custom task with the sandbox directory specified outside the default <path>build/idea-sandbox/[TYPE]-[VERSION]/</path> location, pass the new location to its `prepareSandboxTask` sandbox producer configuration:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
val runWithCustomSandbox by intellijPlatformTesting.runIde.registering {
  // ...

  prepareSandboxTask {
    sandboxDirectory = project.layout.buildDirectory.dir("custom-sandbox")
    sandboxSuffix = ""
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatformTesting.runIde {
  runWithCustomSandbox {
    // ...

    prepareSandboxTask {
      sandboxDirectory = project.layout.buildDirectory.dir('custom-sandbox')
      sandboxSuffix = ''
    }
  }
}
```

</tab>
</tabs>


This will result in the following sandbox structure:

```
build/
├── custom-sandbox
│   ├── config
│   ├── log
│   ├── plugins
│   └── system
...
```

## Access IntelliJ Platform from any Gradle task

With [](tools_intellij_platform_gradle_plugin_task_awares.md) it is possible to enhance any Gradle task with features provided with the IntelliJ Platform Gradle Plugin.

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
import org.jetbrains.intellij.platform.gradle.tasks.aware.IntelliJPlatformVersionAware

abstract class MyTask : DefaultTask(), IntelliJPlatformVersionAware

val myTask by tasks.registering(MyTask::class) {
  doLast {
    println("platformPath = \n${platformPath}")
    println("productInfo.buildNumber = ${productInfo.buildNumber}")
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
import org.jetbrains.intellij.platform.gradle.tasks.aware.IntelliJPlatformVersionAware

abstract class MyTask extends DefaultTask implements IntelliJPlatformVersionAware {}

tasks.register('myTask', MyTask) {
  doLast {
    println("platformPath = \n${platformPath}")
    println("productInfo.buildNumber = ${productInfo.buildNumber}")
  }
}
```

</tab>
</tabs>


As soon as the registered task inherits from the `*Aware` interface, such as [`IntelliJPlatformVersionAware`](tools_intellij_platform_gradle_plugin_task_awares.md#IntelliJPlatformVersionAware), all the related information will be injected during the configuration phase.


## Bundle additional files with the plugin

Additional files can be bundled by adding them to the plugin directory when preparing the sandbox:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
tasks {
  prepareSandbox {
    from(layout.projectDirectory.dir("extraFiles")) {
      into(pluginName.map { "$it/extra" })
    }
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
tasks.named('prepareSandbox', PrepareSandboxTask) {
  from layout.projectDirectory.dir('extraFiles')
  into it.pluginName.map { "$it/extra" }
}
```

</tab>
</tabs>


To apply that to the custom task, use the [`prepareSandboxTask`](tools_intellij_platform_gradle_plugin_testing_extension.md#preparesandboxtask) reference:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
val runWithCustomSandbox by intellijPlatformTesting.runIde.registering {
  // ...

  prepareSandboxTask {
    from(...) {
      into(...)
    }
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatformTesting.runIde {
  runWithCustomSandbox {
    // ...

    prepareSandboxTask {
      from(...)
      into(...)
    }
  }
}
```

</tab>
</tabs>


It is possible to apply that to all [`PrepareSandboxTask`](tools_intellij_platform_gradle_plugin_tasks.md#prepareSandbox) with:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
tasks {
  withType<PrepareSandboxTask> {
    from(...) {
      into(...)
    }
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
tasks {
  withType(PrepareSandboxTask) {
    from(...)
    into(...)
  }
}
```

</tab>
</tabs>


## ProGuard configuration

To configure [ProGuard](https://github.com/Guardsquare/proguard), intercept the [`prepareSandbox`](tools_intellij_platform_gradle_plugin_tasks.md#prepareSandbox) task and replace the plugin Jar archive produced by the [`composedJar`](tools_intellij_platform_gradle_plugin_tasks.md#composedJar) task with the obfuscated/minified file.

First, define the ProGuard Jar archive location and store it inside the <path>build/libs/</path> directory.
Pass the output ProGuard location to the `outjars()` helper and use it as a new sandbox input for [`prepareSandbox.pluginJar`](tools_intellij_platform_gradle_plugin_tasks.md#prepareSandbox-pluginJar).

Finally, pass the [`composedJar.archiveFile`](tools_intellij_platform_gradle_plugin_tasks.md#composedJar-archiveFile) to the `injars()` helper.

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
import proguard.gradle.ProGuardTask

buildscript {
  repositories {
    mavenCentral()
  }
  dependencies {
    classpath("com.guardsquare:proguard-gradle:7.5.0")
  }
}

tasks {
  val proguardJar = layout.buildDirectory.file("libs/$name-$version-proguard.jar")

  val proguard by registering(ProGuardTask::class) {
    injars(composedJar.map { it.archiveFile })
    outjars(proguardJar)

    // ...
  }

  prepareSandbox {
    pluginJar = proguardJar
    dependsOn(proguard)
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
import proguard.gradle.ProGuardTask

buildscript {
  repositories {
    mavenCentral()
  }
  dependencies {
    classpath("com.guardsquare:proguard-gradle:7.5.0")
  }
}

def proguardJar = layout.buildDirectory.file("libs/$name-$version-proguard.jar")

tasks.register('proguard', ProGuardTask) {
  it.injars(composedJar.archiveFile)
  outjars(proguardJar)

  // ...
}

prepareSandbox {
  pluginJar = proguardJar
  dependsOn(proguard)
}
```

</tab>
</tabs>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Repositories Extension

<link-summary>IntelliJ Platform Gradle Plugin repositories extension.</link-summary>

<include from="tools_intellij_platform_gradle_plugin.md" element-id="faq"/>

This is an extension class for managing IntelliJ Platform repositories in a Gradle build script.
It's applied to the `RepositoryHandler`.

Available in both `Project` scope and Gradle Settings for `DependencyResolutionManagement`.

It provides methods to add:

- IntelliJ Platform repositories (for releases, snapshots, and nightly builds)
- JetBrains Marketplace repository (for dependencies on non-bundled plugins)
- JetBrains Runtime repository
- Android Studio and IntelliJ Platform binary release repositories (for IntelliJ Plugin Verifier)
- Ivy local repository (for access to local dependencies)

<snippet id="recommendedCallout">

> In most cases, the [`defaultRepositories()`](tools_intellij_platform_gradle_plugin_repositories_extension.md#default-repositories) repository should be enough.
>
{style="tip"}

**Example:**

Setup Maven Central and [`defaultRepositories()`](tools_intellij_platform_gradle_plugin_repositories_extension.md#default-repositories) repositories:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
repositories {
  mavenCentral()

  intellijPlatform {
    defaultRepositories()
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
repositories {
  mavenCentral()

  intellijPlatform {
    defaultRepositories()
  }
}
```

</tab>
</tabs>


</snippet>

## Default Repositories

The default repository definition is suitable for most plugins.

| Function                | Description                                                                                                |
|-------------------------|------------------------------------------------------------------------------------------------------------|
| `defaultRepositories()` | Applies a set of recommended repositories required for building plugins and running the most common tasks. |

It includes:
- `jetbrainsIdeInstallers()` and `androidStudioInstallers()` – IntelliJ Platform and Android Studio installer releases channels required for development and running the IntelliJ Plugin Verifier
- `releases()` and `snapshots()` – IntelliJ Platform releases channels
- `localPlatformArtifacts()` – required to use plugins bundled with IntelliJ Platform or refer to a local IDE
- `marketplace()` – JetBrains Marketplace plugins repository
- `intellijDependencies()` – required for resolving extra IntelliJ Platform dependencies used for running specific tasks

## IntelliJ Platform Installers

IntelliJ Platform installers are the final IDE distributions delivered to end-users for installing and running products on their machines.
Those installers can also be used for development and running the IntelliJ Plugin Verifier tool integrated with the [`verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin) task.

| Function                    | Description                                                |
|-----------------------------|------------------------------------------------------------|
| `jetbrainsIdeInstallers()`  | Adds a repository for accessing JetBrains IDEs installers. |
| `androidStudioInstallers()` | Adds a repository for accessing Android Studio installers. |

See also:
- [](tools_intellij_platform_gradle_plugin_dependencies_extension.md#target-versions-installers)
- [](intellij_artifacts.md)
- [](verifying_plugin_compatibility.md)


## IntelliJ Maven Repositories

IntelliJ Platform artifacts can be also delivered as multi-OS archives, however they do not contain [](tools_intellij_platform_gradle_plugin_jetbrains_runtime.md) bundled and require adding it explicitly to the project dependencies.

The following IntelliJ Platform repositories contain not only the IntelliJ Platform releases in stable, snapshot, and nightly versions, but also various dependencies, such as:
- Java Compiler required for [](tools_intellij_platform_gradle_plugin_dependencies_extension.md#code-instrumentation)
- Test Framework required for [](tools_intellij_platform_gradle_plugin_dependencies_extension.md#testing)

| Function      | Description                                                                                 |
|---------------|---------------------------------------------------------------------------------------------|
| `releases()`  | Adds a repository for accessing IntelliJ Platform stable releases.                          |
| `snapshots()` | Adds a repository for accessing IntelliJ Platform snapshot releases.                        |
| `nightly()`   | Adds a repository for accessing IntelliJ Platform nightly releases, not available publicly. |

See also:
- [](tools_intellij_platform_gradle_plugin_dependencies_extension.md#target-versions-multi-os-archives)
- [](intellij_artifacts.md)


## Plugin Repositories

It is possible to define a dependency on another plugin using [](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins) helpers.
Such plugins are resolved as any other dependencies in Gradle using repositories added to the project configuration.

The common repository hosting plugins is [JetBrains Marketplace](https://plugins.jetbrains.com), which can be added with the `marketplace()` helper.
To refer to its plugins, use the [`plugin(id, version)`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins) dependency helper.

It is also possible to resolve plugins from regular Maven repositories other than JetBrains Marketplace.
In such a case, refer to them using [`plugin(id, version, group)`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins), which will build `group:id:version` plugin coordinates.

The third possibility is to use the [](custom_plugin_repository.md) with optional authorization credentials provided by defining the URL to the XML listing file, like:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
import com.jetbrains.plugin.structure.intellij.repository.CustomPluginRepositoryListingType

repositories {
  intellijPlatform {
    customPluginRepository("https://example.com/plugins.xml", CustomPluginRepositoryType.SIMPLE) {
      credentials<HttpHeaderCredentials> {
        name = "Authorization"
        value = "Automation amFrdWJfdGVzdDotX...MkV2UkFwekFWTnNwZjA="
      }
    }
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
import com.jetbrains.plugin.structure.intellij.repository.CustomPluginRepositoryListingType

repositories {
  intellijPlatform {
    customPluginRepository('https://example.com/plugins.xml', CustomPluginRepositoryListingType.SIMPLE) { repository ->
      repository.credentials(HttpHeaderCredentials) {
        name = 'Authorization'
        value = 'Automation amFrdWJfdGVzdDotX...MkV2UkFwekFWTnNwZjA='
      }
    }
  }
}
```

</tab>
</tabs>


The final plugin archive is eventually resolved using the same credentials used for resolving the listing.


| Function                            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|-------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `localPlatformArtifacts()`          | Certain dependencies, such as the [local IntelliJ Platform instance](tools_intellij_platform_gradle_plugin.md#dependenciesLocalPlatform) and bundled IDE plugins, need extra pre-processing before they can be correctly used by the IntelliJ Platform Gradle Plugin and loaded by Gradle. <p>This pre-processing involves generating XML files that detail these specific artifacts. Once created, these are stored in a unique custom [Ivy](https://ant.apache.org/ivy/) repository directory.</p> |
| `intellijDependencies()`            | Adds a repository for accessing IntelliJ Platform dependencies.                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `jetbrainsRuntime()`                | Adds a repository for accessing [JetBrains Runtime](ide_development_instance.md#using-a-jetbrains-runtime-for-the-development-instance) releases.                                                                                                                                                                                                                                                                                                                                                    |
| `marketplace()`                     | Adds a repository for accessing plugins hosted on [JetBrains Marketplace](https://plugins.jetbrains.com).                                                                                                                                                                                                                                                                                                                                                                                            |
| `customPluginRepository(url, type)` | Creates a custom plugin repository from which plugins                                                                                                                                                                                                                                                                                                                                                                                                                                                |


## Additional Repositories

| Function                            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|-------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `localPlatformArtifacts()`          | Certain dependencies, such as the [local IntelliJ Platform instance](tools_intellij_platform_gradle_plugin.md#dependenciesLocalPlatform) and bundled IDE plugins, need extra pre-processing before they can be correctly used by the IntelliJ Platform Gradle Plugin and loaded by Gradle. <p>This pre-processing involves generating XML files that detail these specific artifacts. Once created, these are stored in a unique custom [Ivy](https://ant.apache.org/ivy/) repository directory.</p> |
| `intellijDependencies()`            | Adds a repository for accessing IntelliJ Platform dependencies.                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `jetbrainsRuntime()`                | Adds a repository for accessing [JetBrains Runtime](ide_development_instance.md#using-a-jetbrains-runtime-for-the-development-instance) releases.                                                                                                                                                                                                                                                                                                                                                    |

See also:

- [](plugin_dependencies.md)

<snippet id="localPlatformArtifacts_required">

> Note that unless using recommended default [`defaultRepositories()`](tools_intellij_platform_gradle_plugin_repositories_extension.md#default-repositories),
> the [`localPlatformArtifacts()`](tools_intellij_platform_gradle_plugin_repositories_extension.md#additional-repositories) entry needs to be added to the `repositories {}` block
> explicitly to use local dependencies (bundled plugins, local IDE, custom plugin repositories, etc.).
>
{style="tip" title="localPlatformArtifacts() and defaultRepositories()"}

</snippet>

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Task Awares

<link-summary>IntelliJ Platform Gradle Plugin task `*Aware` interfaces.</link-summary>

<include from="tools_intellij_platform_gradle_plugin.md" element-id="faq"/>

The Task Awares is a set of interfaces that can be applied to custom Gradle tasks and, when registered using the dedicated register method, inject new features or properties with predefined values.

IntelliJ Platform Gradle Plugin supports creating custom tasks which can use `*Aware` interfaces.
Example:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
import org.jetbrains.intellij.platform.gradle.tasks.aware.PluginAware

abstract class RetrievePluginNameTask : DefaultTask(), PluginAware

val retrievePluginName by tasks.registering(RetrievePluginNameTask::class) {
    val outputFile = layout.buildDirectory.file("pluginName.txt")

    doLast {
        outputFile.get().asFile.writeText(pluginXml.parse { name }.get())
    }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
import org.jetbrains.intellij.platform.gradle.tasks.aware.PluginAware

abstract class RetrievePluginNameTask extends DefaultTask implements PluginAware {}

tasks.register('retrievePluginName', RetrievePluginNameTask) {
  def outputFile = layout.buildDirectory.file("pluginName.txt")

  doLast {
    outputFile.get().asFile.writeText(pluginXml.parse { name }.get())
  }
}
```

</tab>
</tabs>


## `AutoReloadAware`
{#AutoReloadAware}

<tldr>

**Inherited by**: [`RunnableIdeAware`](#RunnableIdeAware)

**Sources**: [`AutoReloadAware`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/aware/AutoReloadAware.kt)

</tldr>

Provides the possibility to auto-reload plugin when run in the IDE.


### `autoReload`
{#AutoReloadAware-autoReload}

Enables auto-reload of dynamic plugins.
Dynamic plugin will be reloaded automatically when its content is modified.

This allows a much faster development cycle by avoiding a full restart of the development instance after code changes.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: [`intellijPlatform.autoReload`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-autoReload)



## `CoroutinesJavaAgentAware`
{#CoroutinesJavaAgentAware}

<tldr>

**Depends on**: [`initializeIntelliJPlatformPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#initializeIntelliJPlatformPlugin)

**Inherited by**: [`RunnableIdeAware`](#RunnableIdeAware), [`TestableAware`](#TestableAware)

**Sources**: [`CoroutinesJavaAgentAware`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/aware/CoroutinesJavaAgentAware.kt)

</tldr>

Provides the path to the Java Agent file for the Coroutines library required to enable coroutines debugging.


### `coroutinesJavaAgentFile`
{#CoroutinesJavaAgentAware-coroutinesJavaAgentFile}

The path to the coroutines Java Agent file.

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: [`initializeIntellijPlatformPlugin.coroutinesJavaAgent`](tools_intellij_platform_gradle_plugin_tasks.md#initializeIntelliJPlatformPlugin-coroutinesJavaAgent)



## `IntelliJPlatformVersionAware`
{#IntelliJPlatformVersionAware}

<tldr>

**Inherited by**: [`RuntimeAware`](#RuntimeAware), [`SandboxAware`](#SandboxAware), [`SplitModeAware`](#SplitModeAware), [`initializeIntelliJPlatformPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#initializeIntelliJPlatformPlugin), [`patchPluginXml`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml), [`printBundledPlugins`](tools_intellij_platform_gradle_plugin_tasks.md#printBundledPlugins), [`runIde`](tools_intellij_platform_gradle_plugin_tasks.md#runIde), [`testIdePerformance`](tools_intellij_platform_gradle_plugin_tasks.md#testIdePerformance), [`testIdeUi`](tools_intellij_platform_gradle_plugin_tasks.md#testIdeUi), [`verifyPluginProjectConfiguration`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPluginProjectConfiguration)

**Sources**: [`IntelliJPlatformVersionAware`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/aware/IntelliJPlatformVersionAware.kt)

</tldr>

Provides a task with the possibility of accessing information about the IntelliJ Platform currently used in the project.

The [`intelliJPlatformConfiguration`](#IntelliJPlatformVersionAware-intelliJPlatformConfiguration) input property receives a dependency added to the `intellijPlatform` configuration, which eventually is resolved and lets to access the IntelliJ Platform details such as [`ProductInfo`](tools_intellij_platform_gradle_plugin_types.md#ProductInfo) or the path to the IntelliJ Platform directory.

It is required to have a dependency on the IntelliJ Platform added to the project with helpers available in [](tools_intellij_platform_gradle_plugin_dependencies_extension.md).



### `intelliJPlatformConfiguration`
{#IntelliJPlatformVersionAware-intelliJPlatformConfiguration}

Holds the `intellijPlatform` configuration with the IntelliJ Platform dependency added.

It should not be directly accessed.

{type="narrow"}
Type
: `ConfigurableFileCollection`


### `platformPath`
{#IntelliJPlatformVersionAware-platformPath}

Provides a direct path to the IntelliJ Platform dependency artifact.

{type="narrow"}
Access
: Read-only

Type
: `Path`


### `productInfo`
{#IntelliJPlatformVersionAware-productInfo}

Provides information about the IntelliJ Platform product.

The information is retrieved from the <path>product-info.json</path> file in the IntelliJ Platform directory.

{type="narrow"}
Access
: Read-only

Type
: [`ProductInfo`](tools_intellij_platform_gradle_plugin_types.md#ProductInfo)


### `validateIntelliJPlatformVersion()`
{#IntelliJPlatformVersionAware-validateIntelliJPlatformVersion}

Validates that the resolved IntelliJ Platform is supported by checking against the minimal supported IntelliJ Platform version.

Invokes [`ProductInfo.validateSupportedVersion()`](tools_intellij_platform_gradle_plugin_types.md#ProductInfo-validateSupportedVersion).

{type="narrow"}
Throws
: `IllegalArgumentException`



## `JavaCompilerAware`
{#JavaCompilerAware}

<tldr>

**Inherited by**: [`instrumentCode`](tools_intellij_platform_gradle_plugin_tasks.md#instrumentCode)

**Sources**: [`JavaCompilerAware`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/aware/JavaCompilerAware.kt)

</tldr>

Provides the dependency on Java Compiler required for the [code instrumentation](tools_intellij_platform_gradle_plugin_tasks.md#instrumentCode) to properly configure Ant tasks provided by the IntelliJ Platform.


### `javaCompilerConfiguration`
{#JavaCompilerAware-javaCompilerConfiguration}

Holds the `intellijPlatformJavaCompiler` configuration with the Java Compiler dependency added.

{type="narrow"}
Type
: `ConfigurableFileCollection`



## `KotlinMetadataAware`
{#KotlinMetadataAware}

<tldr>

**Inherited by**: [`generateManifest`](tools_intellij_platform_gradle_plugin_tasks.md#generateManifest), [`verifyPluginProjectConfiguration`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPluginProjectConfiguration)

**Sources**: [`KotlinMetadataAware`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/aware/KotlinMetadataAware.kt)

</tldr>

An interface that provides access to Kotlin-specific metadata for a Gradle project.
The task that inherits from this interface is automatically marked as dependent on the `compileKotlin` task.


### `kotlinPluginAvailable`
{#KotlinMetadataAware-kotlinPluginAvailable}

Indicates that the Kotlin Gradle Plugin is loaded and available.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `false`


### `kotlinxCoroutinesLibraryPresent`
{#KotlinMetadataAware-kotlinxCoroutinesLibraryPresent}

This variable represents whether the Kotlin Coroutines library is added explicitly to the project dependencies.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `false`


### `kotlinApiVersion`
{#KotlinMetadataAware-kotlinApiVersion}

The `apiVersion` property value of `compileKotlin.kotlinOptions` defined in the build script.

{type="narrow"}
Type
: `Property<String?>`

Default value
: `null`


### `kotlinLanguageVersion`
{#KotlinMetadataAware-kotlinLanguageVersion}

The `languageVersion` property value of `compileKotlin.kotlinOptions` defined in the build script.

{type="narrow"}
Type
: `Property<String?>`

Default value
: `null`


### `kotlinVersion`
{#KotlinMetadataAware-kotlinVersion}

The version of Kotlin used in the project.

{type="narrow"}
Type
: `Property<String?>`

Default value
: `null`


### `kotlinJvmTarget`
{#KotlinMetadataAware-kotlinJvmTarget}

The `jvmTarget` property value of `compileKotlin.kotlinOptions` defined in the build script.

{type="narrow"}
Type
: `Property<String?>`

Default value
: `null`


### `kotlinStdlibDefaultDependency`
{#KotlinMetadataAware-kotlinStdlibDefaultDependency}

`kotlin.stdlib.default.dependency` property value defined in the `gradle.properties` file.

{type="narrow"}
Type
: `Property<Boolean?>`

Default value
: `null`



## `PluginAware`
{#PluginAware}

<tldr>

**Depends on**: [`patchPluginXml`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml)

**Inherited by**: [`TestableAware`](#TestableAware), [`RunnableIdeAware`](#RunnableIdeAware), [`jarSearchableOptions`](tools_intellij_platform_gradle_plugin_tasks.md#jarSearchableOptions), [`verifyPluginProjectConfiguration`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPluginProjectConfiguration)

**Sources**: [`PluginAware`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/aware/PluginAware.kt)

</tldr>

Provides information about the currently built plugin.

It resolves and parses the final <path>plugin.xml</path> descriptor file, making its details easily accessible.


### `pluginXml`
{#PluginAware-pluginXml}

Holds the path to the patched <path>plugin.xml</path> file.

{type="narrow"}
Type
: `RegularPropertyFile`

Default value
: [`patchPluginXml.outputFile`](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml-outputFile)


### `parse {}`
{#PluginAware-parse}

The `parse` method provides a possibility for parsing the <path>pluginXml</path> file and direct access to the [`PluginBean`](tools_intellij_platform_gradle_plugin_types.md#PluginBean) object.

Should be used along with the [`pluginXml`](#PluginAware-pluginXml) property like:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
abstract class RetrievePluginNameTask : DefaultTask(), PluginAware

val retrievePluginName by tasks.registering(RetrievePluginNameTask::class) {
    doLast {
        val name = pluginXml.parse { name }.get()
        println("Plugin Name: $name")
    }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
abstract class RetrievePluginNameTask extends DefaultTask implements PluginAware {}

tasks.register('retrievePluginName', RetrievePluginNameTask) {
    doLast {
        def name = pluginXml.parse { name }.get()
        println("Plugin Name: $name")
    }
}
```

</tab>
</tabs>


## `PluginVerifierAware`
{#PluginVerifierAware}

<tldr>

**Inherited by**: [`verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin)

**Sources**: [`PluginVerifierAware`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/aware/PluginVerifierAware.kt)

</tldr>

Provides the path to the IntelliJ Plugin Verifier executable.

It is required to have a dependency on the IntelliJ Plugin Verifier added to the project with [`intellijPlatform.pluginVerifier()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md) dependencies extension.


### `pluginVerifierExecutable`
{#PluginVerifierAware-pluginVerifierExecutable}

Path to the IntelliJ Plugin Verifier executable.

{type="narrow"}
Type
: `RegularFileProperty`



## `RunnableIdeAware`
{#RunnableIdeAware}

<tldr>

**Depends on**: [`AutoReloadAware`](#AutoReloadAware), [`CoroutinesJavaAgentAware`](#CoroutinesJavaAgentAware), [`PluginAware`](#PluginAware), [`RuntimeAware`](#RuntimeAware), [`SandboxAware`](#SandboxAware)

**Inherited by**: [`buildSearchableOptions`](tools_intellij_platform_gradle_plugin_tasks.md#buildSearchableOptions), [`runIde`](tools_intellij_platform_gradle_plugin_tasks.md#runIde), [`testIdePerformance`](tools_intellij_platform_gradle_plugin_tasks.md#testIdePerformance), [`testIdeUi`](tools_intellij_platform_gradle_plugin_tasks.md#testIdeUi)

**Sources**: [`RunnableIdeAware`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/aware/RunnableIdeAware.kt)

</tldr>

The interface which uses a set of various interfaces required for running a guest IDE.
Inherits from:
- [`CoroutinesJavaAgentAware`](#CoroutinesJavaAgentAware)
- [`PluginAware`](#PluginAware)
- [`RuntimeAware`](#RuntimeAware)
- [`SandboxAware`](#SandboxAware)
- `JavaForkOptions`



## `RuntimeAware`
{#RuntimeAware}

<tldr>

**Inherited by**: [`RunnableIdeAware`](#RunnableIdeAware), [`TestableAware`](#TestableAware), [`verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin), [`verifyPluginProjectConfiguration`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPluginProjectConfiguration)

**Sources**: [`RuntimeAware`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/aware/RuntimeAware.kt)

</tldr>

Provides access to the Java Runtime (i.e., JetBrains Runtime) resolved with `RuntimeResolver`.


### `runtimeDirectory`
{#RuntimeAware-runtimeDirectory}

Java Runtime parent directory.

{type="narrow"}
Type
: `DirectoryProperty`


### `runtimeArchitecture`
{#RuntimeAware-runtimeArchitecture}

An architecture of the Java Runtime currently used for running Gradle.

{type="narrow"}
Type
: `Property<String>`


### `runtimeMetadata`
{#RuntimeAware-runtimeMetadata}

Metadata object of the Java Runtime currently used for running Gradle.

{type="narrow"}
Type
: `Property<String>`


### `runtimeLauncher`
{#RuntimeAware-runtimeLauncher}

A custom `JavaLauncher` instance configured with the resolved [`runtimeDirectory`](#RuntimeAware-runtimeDirectory).

{type="narrow"}
Type
: `Property<String>`



## `SandboxAware`
{#SandboxAware}

<tldr>

**Depends on**: [`prepareSandbox`](tools_intellij_platform_gradle_plugin_tasks.md#prepareSandbox)

**Inherited by**: [`RunnableIdeAware`](#RunnableIdeAware), [`TestableAware`](tools_intellij_platform_gradle_plugin_task_awares.md#TestableAware)

**Sources**: [`SandboxAware`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/aware/SandboxAware.kt)

</tldr>

Provides quick access to the sandbox container and specific directories located within it.

The path to the sandbox container is obtained using the [`intellijPlatform.sandboxContainer`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-sandboxContainer) extension property and the type and version of the IntelliJ Platform applied to the project.


### `sandboxSuffix`
{#SandboxAware-sandboxSuffix}

Represents the suffix used i.e., for test-related tasks.

{type="narrow"}
Type
: `Property<String>`


### `sandboxDirectory`
{#SandboxAware-sandboxDirectory}

The directory containing content read and produced by the running IDE.

The directory name depends on the platform type and version currently used for running a task.

{type="narrow"}
Type
: `DirectoryProperty`


### `sandboxConfigDirectory`
{#SandboxAware-sandboxConfigDirectory}

A configuration directory located within the [`sandboxDirectory`](#SandboxAware-sandboxDirectory).

{type="narrow"}
Type
: `DirectoryProperty`


### `sandboxPluginsDirectory`
{#SandboxAware-sandboxPluginsDirectory}

A plugins directory located within the [`sandboxDirectory`](#SandboxAware-sandboxDirectory).

{type="narrow"}
Type
: `DirectoryProperty`


### `sandboxSystemDirectory`
{#SandboxAware-sandboxSystemDirectory}

A system directory located within the [`sandboxDirectory`](#SandboxAware-sandboxDirectory).

{type="narrow"}
Type
: `DirectoryProperty`


### `sandboxLogDirectory`
{#SandboxAware-sandboxLogDirectory}

A log directory located within the [`sandboxDirectory`](#SandboxAware-sandboxDirectory).

{type="narrow"}
Type
: `DirectoryProperty`


### `applySandboxFrom(TaskProvider)`
{#SandboxAware-applySandboxFrom}

The helper method used for applying sandbox configuration from the sandbox producer (such as [`prepareSandbox`](tools_intellij_platform_gradle_plugin_tasks.md#prepareSandbox) or [`prepareTestSandbox`](tools_intellij_platform_gradle_plugin_tasks.md#prepareTestSandbox) tasks) to sandbox consumers.



## `SigningAware`
{#SigningAware}

<tldr>

**Inherited by**: [`signPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#signPlugin), [`verifyPluginSignature`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPluginSignature)

**Sources**: [`SigningAware`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/aware/SigningAware.kt)

</tldr>

Provides the path to the Marketplace ZIP Signer executable.

It is required to have a dependency on the Marketplace ZIP Signer added to the project with [`intellijPlatform.zipSigner()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md) dependencies extension.


### `zipSignerExecutable`
{#SigningAware-zipSignerExecutable}

Path to the Marketplace ZIP Signer executable.

{type="narrow"}
Type
: `RegularFileProperty`


## `SplitModeAware`
{#SplitModeAware}

<tldr>

**Inherited by**: [`prepareSandbox`](tools_intellij_platform_gradle_plugin_tasks.md#prepareSandbox), [`runIde`](tools_intellij_platform_gradle_plugin_tasks.md#runIde)

**Sources**: [`SplitModeAware`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/aware/SplitModeAware.kt)

</tldr>

When you develop a plugin, you may want to check how it works in remote development mode, when one machine is running the backend part and another is running a frontend part (JetBrains Client) which connects to the backend.

This property allows running the IDE with backend and frontend parts running in separate processes.
The developed plugin is installed in the backend part.

Split Mode requires the IntelliJ Platform in the version `241.14473` or later.


### `splitMode`
{#SplitModeAware-splitMode}

Enables Split Mode when running the IDE.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: [`intellijPlatform.splitMode`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-splitMode)


### `splitModeTarget`
{#SplitModeAware-splitModeTarget}

Specifies in which part of the product the developed plugin should be installed.

{type="narrow"}
Type
: [`Property<SplitModeTarget>`](tools_intellij_platform_gradle_plugin_types.md#SplitModeAware-SplitModeTarget)

Default value
: [`intellijPlatform.splitModeTarget`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-splitModeTarget)



## `TestableAware`
{#TestableAware}

<tldr>

**Inherited by**: [`prepareTest`](tools_intellij_platform_gradle_plugin_tasks.md#prepareTest)

**Sources**: [`TestableAware`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/aware/TestableAware.kt)

</tldr>

Interface used to describe tasks used for running tests, such as [`testIdeUi`](tools_intellij_platform_gradle_plugin_tasks.md#testIdeUi), [`testIdePerformance`](tools_intellij_platform_gradle_plugin_tasks.md#testIdePerformance), or [`prepareTest`](tools_intellij_platform_gradle_plugin_tasks.md#prepareTest) used for configuring `test` and keeping it immutable.


<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Tasks

<link-summary>IntelliJ Platform Gradle Plugin tasks.</link-summary>

<include from="tools_intellij_platform_gradle_plugin.md" element-id="faq"/>

The IntelliJ Platform Gradle Plugin introduces a set of tasks to handle activities of the plugin development for IntelliJ-based IDEs, such as building, verifying, testing, and publishing the plugin archive.

Tasks related to the IntelliJ Platform Gradle Plugin are selectively applied to your project based on specific conditions or criteria defined within the plugin's context.
This means that the plugin intelligently determines which tasks are relevant and necessary based on the current state or configuration of your project.
This contextual application of tasks ensures that the plugin operates efficiently, performing only those actions that are appropriate for the given project environment at any time.

Tasks have dependencies on each other, they inherit from [](tools_intellij_platform_gradle_plugin_task_awares.md) interfaces, respect configuration and build cache,
and can be configured independently.
However, most cases will be covered by the [](tools_intellij_platform_gradle_plugin_extension.md).



## `buildPlugin`
{#buildPlugin}

<link-summary>Builds the plugin and prepares the ZIP archive for testing and deployment.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform), [](tools_intellij_platform_gradle_plugin_plugins.md#module), [](tools_intellij_platform_gradle_plugin_plugins.md#base)

**Depends on**: [`jarSearchableOptions`](#jarSearchableOptions), [`prepareSandbox`](#prepareSandbox)

**Extends**: [`Zip`][gradle-zip-task]

**Sources**: [`BuildPluginTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/BuildPluginTask.kt)

</tldr>

Builds the plugin and prepares the ZIP archive for testing and deployment.

It takes the output of the [`prepareSandbox`](#prepareSandbox) task containing the built project with all its modules and dependencies, and the output of [`jarSearchableOptions`](#jarSearchableOptions) task.

The produced archive is stored in <path>[buildDirectory]/distributions/[`archiveFile`](#buildPlugin-archiveFile)</path>,
where the name and location of [`archiveFile`](#buildPlugin-archiveFile) can be controlled with properties provided with the
[`Zip`](https://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Zip.html) base task.
By default, the `archiveBaseName` is set to the plugin name specified in the <path>plugin.xml</path> file, after it gets patched with the [`patchPluginXml`](#patchPluginXml) task.

<include from="plugin_content.md" element-id="doNotRepackageLibraries"/>


### `archiveFile`
{#buildPlugin-archiveFile}

Specifies the archive file representing the output file produced by the task.

{type="narrow"}
Type
: `RegularFileProperty`



## `buildSearchableOptions`
{#buildSearchableOptions}

<link-summary>Builds the index of UI components (searchable options) for the plugin.</link-summary>

<tldr>

**Depends on**: [`prepareSandbox`](#prepareSandbox)

**Extends**: [`JavaExec`][gradle-javaexec-task], [`RunnableIdeAware`](tools_intellij_platform_gradle_plugin_task_awares.md#RunnableIdeAware)

**Sources**: [`BuildSearchableOptionsTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/BuildSearchableOptionsTask.kt)

</tldr>

Builds the index of UI components (searchable options) for the plugin.
This task runs a headless IDE instance to collect all the available options provided by the plugin's [](settings.md).

If the plugin doesn't implement custom settings, it is recommended to disable this task via [`intellijPlatform.buildSearchableOptions`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-buildSearchableOptions) flag.

In the case of running the task for the plugin that has [`intellijPlatform.pluginConfiguration.productDescriptor`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-productDescriptor) defined, a warning will be logged regarding potential issues with running headless IDE for paid plugins.
It is possible to mute this warning with the [`paidPluginSearchableOptionsWarning`](tools_intellij_platform_gradle_plugin_gradle_properties.md#paidPluginSearchableOptionsWarning) Gradle property.


### `outputDirectory`
{#buildSearchableOptions-outputDirectory}

Specifies the directory where searchable options will be generated.

{type="narrow"}
Type
: `DirectoryProperty`

Default value
: <path>[buildDirectory]/searchableOptions</path>


### `showPaidPluginWarning`
{#buildSearchableOptions-showPaidPluginWarning}

Emits a warning when the task is executed by a paid plugin.
Can be disabled with the [`paidPluginSearchableOptionsWarning`](tools_intellij_platform_gradle_plugin_gradle_properties.md#paidPluginSearchableOptionsWarning) Gradle property.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: [`paidPluginSearchableOptionsWarning`](tools_intellij_platform_gradle_plugin_gradle_properties.md#paidPluginSearchableOptionsWarning) && `productDescriptor` is defined



## `composedJar`
{#composedJar}

<link-summary>Composes a final JAR by combining the base JAR, and instrumented classes, and declared submodules.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform), [](tools_intellij_platform_gradle_plugin_plugins.md#module)

**Depends on**: [`jar`][gradle-jar-task], [`instrumentedJar`](#instrumentedJar)

**Extends**: [`Jar`][gradle-jar-task]

**Sources**: [`ComposedJarTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/ComposedJarTask.kt)

</tldr>

Composes a final JAR by combining the output of base `jar` or [`instrumentedJar`](#instrumentedJar) tasks,
depending on if code instrumentation is enabled with [`intellijPlatform.instrumentCode`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-instrumentCode).

The final JAR is also combined with plugin modules marked using the [`pluginModule`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins) dependencies helper.


### `archiveFile`
{#composedJar-archiveFile}

Specifies the archive file representing the output file produced by the task.

{type="narrow"}
Type
: `RegularFileProperty`



## `generateManifest`
{#generateManifest}

<link-summary>Generates the <path>MANIFEST.MF</path> file with all relevant information about the project configuration.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform), [](tools_intellij_platform_gradle_plugin_plugins.md#module)

**Extends**: [`DefaultTask`][gradle-default-task], [`IntelliJPlatformVersionAware`](tools_intellij_platform_gradle_plugin_task_awares.md#IntelliJPlatformVersionAware)

**Sources**: [`InitializeIntelliJPlatformPluginTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/InitializeIntelliJPlatformPluginTask.kt)

</tldr>

Generates the <path>MANIFEST.MF</path> file with all relevant information about the project configuration.

To apply the produced manifest file, `JarCompanion.applyPluginManifest` method should be called on a task extending [`Jar`][gradle-jar-task].

This file is bundled into the output JAR files produced by [`composedJar`](#composedJar), [`instrumentedJar`](#instrumentedJar), and [`Jar`][gradle-jar-task] tasks.


### `pluginVersion`
{#generateManifest-pluginVersion}

The IntelliJ Platform Gradle Plugin version.

{type="narrow"}
Type
: `Property<String>`


### `gradleVersion`
{#generateManifest-gradleVersion}

The version of currently used Gradle.

{type="narrow"}
Type
: `Property<String>`


### `productInfo`
{#generateManifest-productInfo}

The [ProductInfo] instance of the current IntelliJ Platform.

{type="narrow"}
Type
: `Property<ProductInfo>`


### `version`
{#generateManifest-version}

Plugin version.

{type="narrow"}
Type
: `Property<String>`


### `generatedManifest`
{#generateManifest-generatedManifest}

Location of the generated <path>MANIFEST.MF</path> file.

{type="narrow"}
Type
: `RegularFileProperty`



## `initializeIntelliJPlatformPlugin`
{#initializeIntelliJPlatformPlugin}

<link-summary>Initializes the IntelliJ Platform Gradle Plugin</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform), [](tools_intellij_platform_gradle_plugin_plugins.md#module), [](tools_intellij_platform_gradle_plugin_plugins.md#base)

**Extends**: [`DefaultTask`][gradle-default-task], [`IntelliJPlatformVersionAware`](tools_intellij_platform_gradle_plugin_task_awares.md#IntelliJPlatformVersionAware)

**Sources**: [`InitializeIntelliJPlatformPluginTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/InitializeIntelliJPlatformPluginTask.kt)

</tldr>

Executes before every other task introduced by IntelliJ Platform Gradle Plugin to prepare it to run.
It is responsible for:

- checking if the project uses IntelliJ Platform Gradle Plugin in the latest available version
- preparing the KotlinX Coroutines Java Agent file to enable coroutines debugging when developing the plugin

The self-update check can be disabled via [`selfUpdateCheck`](tools_intellij_platform_gradle_plugin_gradle_properties.md#selfUpdateCheck) Gradle property.
To make the Coroutines Java Agent available for the task, inherit from [`CoroutinesJavaAgentAware`](tools_intellij_platform_gradle_plugin_task_awares.md#CoroutinesJavaAgentAware).


### `offline`
{#initializeIntelliJPlatformPlugin-offline}

Determines if the operation is running in offline mode and depends on Gradle start parameters.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `StartParameter.isOffline`

See also:
- [StartParameter](https://docs.gradle.org/current/javadoc/org/gradle/StartParameter.html)
- [Command Line Execution Options](https://docs.gradle.org/current/userguide/command_line_interface.html#sec:command_line_execution_options)


### `selfUpdateCheck`
{#initializeIntelliJPlatformPlugin-selfUpdateCheck}

Represents the property for checking if self-update checks are enabled.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: [`selfUpdateCheck`](tools_intellij_platform_gradle_plugin_gradle_properties.md#selfUpdateCheck)


### `selfUpdateLock`
{#initializeIntelliJPlatformPlugin-selfUpdateLock}

Represents a lock file used to limit the plugin version checks in time.
If the file is missing and other conditions are met, the version check is performed.

{type="narrow"}
Type
: `RegularFileProperty`


### `coroutinesJavaAgent`
{#initializeIntelliJPlatformPlugin-coroutinesJavaAgent}

Specifies the Java Agent file for the Coroutines library required to enable coroutines debugging.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: <path>[buildDirectory]/tmp/initializeIntelliJPlatformPlugin/coroutines-javaagent.jar</path>


### `pluginVersion`
{#initializeIntelliJPlatformPlugin-pluginVersion}

Represents the current version of the plugin.

{type="narrow"}
Type
: `Property<String>`


### `latestPluginVersion`
{#initializeIntelliJPlatformPlugin-latestPluginVersion}

Represents the latest version of the plugin.

{type="narrow"}
Type
: `Property<String>`


### `module`
{#initializeIntelliJPlatformPlugin-module}

Defines that the current project has only the [](tools_intellij_platform_gradle_plugin_plugins.md#module) applied but no [](tools_intellij_platform_gradle_plugin_plugins.md#platform).

{type="narrow"}
Type
: `Property<String>`



## `instrumentCode`
{#instrumentCode}

<link-summary>Executes the code instrumentation.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform), [](tools_intellij_platform_gradle_plugin_plugins.md#module)

**Depends on**: [`jar`][gradle-jar-task]

**Extends**: [`DefaultTask`][gradle-default-task], [`JavaCompilerAware`](tools_intellij_platform_gradle_plugin_task_awares.md#JavaCompilerAware)

**Sources**: [`InstrumentCodeTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/InstrumentCodeTask.kt)

</tldr>

Executes the code instrumentation using the Ant tasks provided by the used IntelliJ Platform dependency.
The code instrumentation scans the compiled Java and Kotlin classes for JetBrains Annotations usages to replace them with their relevant functionalities.

The task is controlled with the [`intellijPlatform.instrumentCode`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-instrumentCode) extension property, enabled by default.
To properly run the instrumentation, it is required to add [`instrumentationTools()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#code-instrumentation) dependencies to the project.
This dependency is available via the [`intellijDependencies()`](tools_intellij_platform_gradle_plugin_repositories_extension.md#additional-repositories) repository, which can be added separately or using the [`defaultRepositories()`](tools_intellij_platform_gradle_plugin_repositories_extension.md#default-repositories) helper.

See also:
- [](#instrumentedJar)


### `sourceSetCompileClasspath`
{#instrumentCode-sourceSetCompileClasspath}

Specifies the compile classpath of the project's source set.

{type="narrow"}
Type
: `ConfigurableFileCollection`


### `classesDirs`
{#instrumentCode-classesDirs}

Specifies the list of directories with compiled classes.

{type="narrow"}
Type
: `ConfigurableFileCollection`

Default value
: `classesDirs` of the project's source sets.


### `formsDirs`
{#instrumentCode-formsDirs}

Specifies the list of directories with GUI Designer form files.

{type="narrow"}
Type
: `ConfigurableFileCollection`

Default value:
: `.form` files of the project's source sets.


### `sourceDirs`
{#instrumentCode-sourceDirs}

Specifies the location of the source code.

{type="narrow"}
Type
: `ConfigurableFileCollection`


### `instrumentationLogs`
{#instrumentCode-instrumentationLogs}

Enables `INFO` logging when running Ant tasks.

{type="narrow"}
Type
: `Property<Boolean>`

Default value:
: `false`


### `outputDirectory`
{#instrumentCode-outputDirectory}

Specifies the output directory for instrumented classes.

{type="narrow"}
Type
: `DirectoryProperty`



## `instrumentedJar`
{#instrumentedJar}

<link-summary>Creates a JAR file with instrumented classes.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform), [](tools_intellij_platform_gradle_plugin_plugins.md#module)

**Depends on**: `jar`, [`instrumentCode`](#instrumentCode)

**Extends**: [`Jar`][gradle-jar-task]

</tldr>

Creates a copy of the current module's `jar` task output with instrumented classes added.



## `jarSearchableOptions`
{#jarSearchableOptions}

<link-summary>Creates a JAR file with searchable options to be distributed with the plugin.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform)

**Depends on**: [`buildSearchableOptions`](#buildSearchableOptions), [`prepareSandbox`](#prepareSandbox)

**Extends**: [`Jar`][gradle-jar-task]

**Sources**: [`JarSearchableOptionsTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/JarSearchableOptionsTask.kt)

</tldr>

Creates a JAR file with searchable options to be distributed with the plugin.


### `destinationDirectory`
{#jarSearchableOptions-destinationDirectory}

Specifies the directory where the JAR file will be created.

{type="narrow"}
Type
: `DirectoryProperty`

Default value
: <path>[buildDirectory]/libs</path>


### `noSearchableOptionsWarning`
{#jarSearchableOptions-noSearchableOptionsWarning}

Specifies if a warning is emitted when no searchable options are found.
Can be disabled with [`noSearchableOptionsWarning`](tools_intellij_platform_gradle_plugin_gradle_properties.md#noSearchableOptionsWarning) Gradle property.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: [`noSearchableOptionsWarning`](tools_intellij_platform_gradle_plugin_gradle_properties.md#noSearchableOptionsWarning)



## `patchPluginXml`
{#patchPluginXml}

<link-summary>Patches <path>plugin.xml</path> file with provided values.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform)

**Extends**: [`DefaultTask`][gradle-default-task], [`IntelliJPlatformVersionAware`](tools_intellij_platform_gradle_plugin_task_awares.md#IntelliJPlatformVersionAware)

**Sources**: [`PatchPluginXmlTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/PatchPluginXmlTask.kt)

</tldr>

Patches <path>plugin.xml</path> file with values provided with the [`intelliJPlatform.pluginConfiguration`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration) extension.


### `inputFile`
{#patchPluginXml-inputFile}

Specifies the input <path>plugin.xml</path> file, which by default is picked from the main resource location.

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: <path>src/main/resources/META-INF/plugin.xml</path>


### `outputFile`
{#patchPluginXml-outputFile}

Specifies the patched output <path>plugin.xml</path> file, which by default is written to a temporary task-specific directory within the <path>build</path> directory.

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: <path>[buildDirectory]/tmp/patchPluginXml/plugin.xml</path>


### `pluginId`
{#patchPluginXml-pluginId}

Specifies a unique plugin identifier, which should be a fully qualified name similar to Java packages and must not collide with the ID of existing plugins.
The ID is a technical value used to identify the plugin in the IDE and [JetBrains Marketplace](https://plugins.jetbrains.com/).
The provided value will be assigned to the [`<id>`](plugin_configuration_file.md#idea-plugin__id) element.

Please use characters, numbers, and `.`/`-`/`_` symbols only and keep it reasonably short.


{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.pluginConfiguration.id`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-id)


### `pluginName`
{#patchPluginXml-pluginName}

Specifies the user-visible plugin name.
It should use Title Case.
The provided value will be assigned to the [`<name>`](plugin_configuration_file.md#idea-plugin__name) element.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.pluginConfiguration.name`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-name)


### `pluginVersion`
{#patchPluginXml-pluginVersion}

Specifies the plugin version displayed in the <control>Plugins</control> settings dialog and on the [JetBrains Marketplace](https://plugins.jetbrains.com) plugin page.
Plugins uploaded to [JetBrains Marketplace](https://plugins.jetbrains.com) must follow [semantic versioning](https://plugins.jetbrains.com/docs/marketplace/semver.htm).
The provided value will be assigned to the [`<version>`](plugin_configuration_file.md#idea-plugin__version) element.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.pluginConfiguration.version`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-version)


### `pluginDescription`
{#patchPluginXml-pluginDescription}

Specifies the plugin description displayed in the <control>Plugins</control> settings dialog and on the [JetBrains Marketplace](https://plugins.jetbrains.com) plugin page.
Simple HTML elements, like text formatting, paragraphs, lists, etc., are allowed.
The description content is automatically wrapped in `<![CDATA[... ]]>`.
The provided value will be assigned to the [`<description>`](plugin_configuration_file.md#idea-plugin__description) element.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.pluginConfiguration.description`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-description)


### `changeNotes`
{#patchPluginXml-changeNotes}

A short summary of new features, bugfixes, and changes provided in this plugin version.
Change notes are displayed on the [JetBrains Marketplace](https://plugins.jetbrains.com) plugin page and in the <control>Plugins</control> settings dialog.
Simple HTML elements, like text formatting, paragraphs, lists, etc., are allowed.

The change notes content is automatically wrapped in `<![CDATA[... ]]>`.
The provided value will be assigned to the [`<change-notes>`](plugin_configuration_file.md#idea-plugin__change-notes) element.

To maintain and generate an up-to-date changelog, try using [Gradle Changelog Plugin](https://github.com/JetBrains/gradle-changelog-plugin).

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.pluginConfiguration.changeNotes`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-changeNotes)


### `productDescriptorCode`
{#patchPluginXml-productDescriptorCode}

The plugin product code used in the JetBrains Sales System.
The code must be agreed with JetBrains in advance and follow [the requirements](https://plugins.jetbrains.com/docs/marketplace/obtain-a-product-code-from-jetbrains.html).
The provided value will be assigned to the [`<product-descriptor code="">`](plugin_configuration_file.md#idea-plugin__product-descriptor) element attribute.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.pluginConfiguration.productDescriptor.code`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-productDescriptor-code)


### `productDescriptorReleaseDate`
{#patchPluginXml-productDescriptorReleaseDate}

Date of the major version release in the `YYYYMMDD` format.
The provided value will be assigned to the [`<product-descriptor release-date="">`](plugin_configuration_file.md#idea-plugin__product-descriptor) element attribute.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.pluginConfiguration.productDescriptor.releaseDate`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-productDescriptor-releaseDate)


### `productDescriptorReleaseVersion`
{#patchPluginXml-productDescriptorReleaseVersion}

Specifies the major version of the plugin in a special number format used for paid plugins on [JetBrains Marketplace](https://plugins.jetbrains.com/docs/marketplace/add-required-parameters.html).
The provided value will be assigned to the [`<product-descriptor release-version="">`](plugin_configuration_file.md#idea-plugin__product-descriptor) element attribute.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.pluginConfiguration.productDescriptor.releaseVersion`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-productDescriptor-releaseVersion)


### `productDescriptorOptional`
{#patchPluginXml-productDescriptorOptional}

Specifies the boolean value determining whether the plugin is a [Freemium](https://plugins.jetbrains.com/docs/marketplace/freemium.html) plugin.
The provided value will be assigned to the [`<product-descriptor optional="">`](plugin_configuration_file.md#idea-plugin__product-descriptor) element attribute.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: [`intellijPlatform.pluginConfiguration.productDescriptor.optional`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-productDescriptor-optional)


### `productDescriptorEap`
{#patchPluginXml-productDescriptorEap}

Specifies the boolean value determining whether the plugin is an EAP release.
The provided value will be assigned to the [`<product-descriptor eap="">`](plugin_configuration_file.md#idea-plugin__product-descriptor) element attribute.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: [`intellijPlatform.pluginConfiguration.productDescriptor.eap`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-productDescriptor-eap)


### `sinceBuild`
{#patchPluginXml-sinceBuild}

Specifies the lowest IDE version compatible with the plugin.
The provided value will be assigned to the [`<idea-version since-build="..."/>`](plugin_configuration_file.md#idea-plugin__idea-version) element attribute.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.pluginConfiguration.ideaVersion.sinceBuild`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-ideaVersion-sinceBuild)


### `untilBuild`
{#patchPluginXml-untilBuild}

The highest IDE version compatible with the plugin.
The `until-build` attribute can be unset by setting `provider { null }` as a value.
However, if `until-build` is undefined, compatibility with all the IDEs since the version specified by the `since-build` is assumed, which can cause incompatibility errors in future builds.

The provided value will be assigned to the [`<idea-version until-build="..."/>`](plugin_configuration_file.md#idea-plugin__idea-version) element attribute.

The `until-build` attribute can be unset by setting `provider { null }` as a value.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.pluginConfiguration.ideaVersion.untilBuild`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-ideaVersion-untilBuild)


### `vendorName`
{#patchPluginXml-vendorName}

Specifies the vendor name or organization ID (if created) in the <control>Plugins</control> settings dialog and on the [JetBrains Marketplace](https://plugins.jetbrains.com) plugin page.
The provided value will be assigned to the [`<vendor>`](plugin_configuration_file.md#idea-plugin__vendor) element.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.pluginConfiguration.vendor.name`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-vendor-name)


### `vendorEmail`
{#patchPluginXml-vendorEmail}

Specifies the vendor's email address.
The provided value will be assigned to the [`<vendor email="">`](plugin_configuration_file.md#idea-plugin__vendor) element attribute.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.pluginConfiguration.vendor.email`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-vendor-email)


### `vendorUrl`
{#patchPluginXml-vendorUrl}

Specifies the link to the vendor's homepage.
The provided value will be assigned to the [`<vendor url="">`](plugin_configuration_file.md#idea-plugin__vendor) element attribute.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.pluginConfiguration.vendor.url`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-vendor-url)



## `prepareJarSearchableOptions`
{#prepareJarSearchableOptions}

<link-summary>Collects the content produced with `buildSearchableOptions` for the `jarSearchableOptions`.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform)

**Depends on**: [`buildSearchableOptions`](#buildSearchableOptions), [`composedJar`](#composedJar), [`prepareSandbox`](#prepareSandbox)

**Extends**: [`DefaultTask`][gradle-default-task]

**Sources**: [`PrepareJarSearchableOptionsTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/PrepareJarSearchableOptionsTask.kt)

</tldr>

Collects the content produced with `buildSearchableOptions` for the `jarSearchableOptions`.


### `inputDirectory`
{#prepareJarSearchableOptions-inputDirectory}

Specifies the directory where the prepared searchable options are read from.

{type="narrow"}
Type
: `DirectoryProperty`

Default value
: [`buildSearchableOptions.outputDirectory`](#buildSearchableOptions-outputDirectory)


### `outputDirectory`
{#prepareJarSearchableOptions-outputDirectory}

Specifies the directory where the filtered content is placed.

{type="narrow"}
Type
: `DirectoryProperty`

Default value
: <path>[buildDirectory]/tmp/prepareJarSearchableOptions</path>


### `libContainer`
{#prepareJarSearchableOptions-libContainer}

Specifies the <path>lib</path> directory within the current sandbox.

{type="narrow"}
Type
: `DirectoryProperty`

Default value
: <path>[prepareSandbox.pluginDirectory]/lib</path>


### `composedJarFile`
{#prepareJarSearchableOptions-composedJarFile}

Specifies the final composed Jar archive with the plugin content.

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: [`composedJar.archiveFile`](#composedJar-archiveFile)



## `prepareSandbox`
{#prepareSandbox}

<link-summary>Prepares a sandbox environment with the plugin and its dependencies installed.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform), [](tools_intellij_platform_gradle_plugin_plugins.md#module)

**Depends on**: `jar`, [`instrumentedJar`](#instrumentedJar)

**Extends**: [`Sync`][gradle-jar-task], [`IntelliJPlatformVersionAware`](tools_intellij_platform_gradle_plugin_task_awares.md#IntelliJPlatformVersionAware), [`SplitModeAware`](tools_intellij_platform_gradle_plugin_task_awares.md#SplitModeAware)

**Sources**: [`PrepareSandboxTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/PrepareSandboxTask.kt)

</tldr>

Prepares a sandbox environment with the plugin and its dependencies installed.
The sandbox directory is required by tasks that run IDE and tests in isolation from other instances, like when multiple IntelliJ Platforms are used for testing with [`runIde`](#runIde), [`prepareTest`](#prepareTest), [`testIdeUi`](#testIdeUi), or [`testIdePerformance`](#testIdePerformance) tasks.
The sandbox directory is created within the container configurable with [`intellijPlatform.sandboxContainer`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-sandboxContainer).

Tasks based on the [`PrepareSandboxTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/PrepareSandboxTask.kt) are _sandbox producers_ and can be associated with _sandbox consumers_.
To define the consumer task, make it extend from [`SandboxAware`](tools_intellij_platform_gradle_plugin_task_awares.md#SandboxAware) and apply the `consumer.applySandboxFrom(producer)` function.


### `sandboxSuffix`
{#prepareSandbox-sandboxSuffix}

Represents the suffix used i.e., for test-related or custom tasks.

The default suffix is composed of the task name (`prepare[X]Sandbox[_Y]`) to the `-[X][Y]` format.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`SandboxAware.sandboxPluginsDirectory`](tools_intellij_platform_gradle_plugin_task_awares.md#SandboxAware-sandboxPluginsDirectory)


### `defaultDestinationDirectory`
{#prepareSandbox-defaultDestinationDirectory}

Specifies the default sandbox destination directory where plugin files will be copied.

{type="narrow"}
Type
: `DirectoryProperty`

Default value
: [`SandboxAware.sandboxPluginsDirectory`](tools_intellij_platform_gradle_plugin_task_awares.md#SandboxAware-sandboxPluginsDirectory)


### `pluginName`
{#prepareSandbox-pluginName}

Specifies the name of the plugin directory in the sandbox.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.projectName`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-projectName)


### `pluginDirectory`
{#prepareSandbox-pluginDirectory}

Specifies the directory where the plugin artifacts are to be placed.

{type="narrow"}
Type
: `DirectoryProperty`

Default value
: [`defaultDestinationDirectory`](#prepareSandbox-defaultDestinationDirectory)/[`projectName`](#prepareSandbox-pluginName)


### `disabledPlugins`
{#prepareSandbox-disabledPlugins}

An internal field to hold a list of plugins to be disabled within the current sandbox.
This property is controlled with [`disablePlugin()`](tools_intellij_platform_gradle_plugin_testing_extension.md#plugins) method of [](tools_intellij_platform_gradle_plugin_testing_extension.md).

{type="narrow"}
Type
: `SetProperty<String>`


### `pluginJar`
{#prepareSandbox-pluginJar}

Specifies the output of the [`Jar`][gradle-jar-task] task.
The proper `Jar.archiveFile` picked depends on whether code instrumentation is enabled.

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: `Jar.archiveFile`


### `pluginsClasspath`
{#prepareSandbox-pluginsClasspath}

Specifies a list of dependencies on external plugins resolved from the `intellijPlatformPluginsExtracted` configuration added with [Dependencies Extension](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins)

{type="narrow"}
Type
: `ConfigurableFileCollection`


### `runtimeClasspath`
{#prepareSandbox-runtimeClasspath}

Dependencies defined with the `runtimeClasspath` configuration.

{type="narrow"}
Type
: `ConfigurableFileCollection`



## `prepareTest`
{#prepareTest}

<link-summary>Prepares the test task.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform), [](tools_intellij_platform_gradle_plugin_plugins.md#module)

**Depends on**: [`prepareTestSandbox`](#prepareTestSandbox)

**Extends**: [`DefaultTask`][gradle-default-task], [`TestableAware`](tools_intellij_platform_gradle_plugin_task_awares.md#TestableAware)

**Sources**: [`PrepareTestTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/PrepareTestTask.kt)

</tldr>

Prepares an immutable [`test`](#test) task and provides all necessary dependencies and configurations for a proper testing configuration.



## `prepareTestSandbox`
{#prepareTestSandbox}

<link-summary>Prepares the test task sandbox.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform)

**Depends on**: `jar`, [`instrumentedJar`](#instrumentedJar)

**Extends**: [`Sync`][gradle-jar-task], [`IntelliJPlatformVersionAware`](tools_intellij_platform_gradle_plugin_task_awares.md#IntelliJPlatformVersionAware), [`SplitModeAware`](tools_intellij_platform_gradle_plugin_task_awares.md#SplitModeAware)

**Sources**: [`PrepareSandboxTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/PrepareSandboxTask.kt)

</tldr>

The [`prepareSandbox`](#prepareSandbox) task instance configured to work with the [`test`](#test) task.



## `printBundledPlugins`
{#printBundledPlugins}

<link-summary>Prints the list of bundled plugins available within the currently targeted IntelliJ Platform.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform), [](tools_intellij_platform_gradle_plugin_plugins.md#module), [](tools_intellij_platform_gradle_plugin_plugins.md#base)

**Extends**: [`DefaultTask`][gradle-default-task], [`IntelliJPlatformVersionAware`](tools_intellij_platform_gradle_plugin_task_awares.md#IntelliJPlatformVersionAware)

**Sources**: [`PrintBundledPluginsTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/PrintBundledPluginsTask.kt)

</tldr>

Prints the list of bundled plugins available within the currently targeted IntelliJ Platform.



## `printProductsReleases`
{#printProductsReleases}

<link-summary>Prints the list of binary product releases that match criteria.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform), [](tools_intellij_platform_gradle_plugin_plugins.md#module), [](tools_intellij_platform_gradle_plugin_plugins.md#base)

**Extends**: [`DefaultTask`][gradle-default-task], [`ProductReleasesValueSource.FilterParameters`](tools_intellij_platform_gradle_plugin_types.md#ProductReleasesValueSource-FilterParameters)

**Sources**: [`PrintProductsReleasesTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/PrintProductsReleasesTask.kt)

</tldr>

Prints the list of binary product releases that, by default, match the currently selected IntelliJ Platform along with
[`intellijPlatform.pluginConfiguration.ideaVersion.sinceBuild`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-ideaVersion-sinceBuild)
and [`intellijPlatform.pluginConfiguration.ideaVersion.untilBuild`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-ideaVersion-untilBuild) properties.

The filter used for retrieving the release list can be customized by using properties provided with
[`ProductReleasesValueSource.FilterParameters`](tools_intellij_platform_gradle_plugin_types.md#ProductReleasesValueSource-FilterParameters).


### `productsReleases`
{#printProductsReleases-productsReleases}

Property that holds the list of product releases to print and which can be used to retrieve the result list.

{type="narrow"}
Type
: `ListProperty<String>`

Default value
: The output of `ProductReleasesValueSource` using default configuration

See also:
- [Types: `ProductReleasesValueSource.FilterParameters`](tools_intellij_platform_gradle_plugin_types.md#ProductReleasesValueSource-FilterParameters)



## `publishPlugin`
{#publishPlugin}

<link-summary>Publishes the plugin to the remote plugins repository.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform)

**Depends on**: [`buildPlugin`](#buildPlugin), [`signPlugin`](#signPlugin)

**Extends**: [`DefaultTask`][gradle-default-task]

**Sources**: [`PublishPluginTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/PublishPluginTask.kt)

</tldr>

Publishes the plugin to the remote plugins repository, such as [JetBrains Marketplace](https://plugins.jetbrains.com).

See also:
- [Uploading a Plugin to JetBrains Marketplace](publishing_plugin.md#uploading-a-plugin-to-jetbrains-marketplace)
- [Publishing Plugin With Gradle](publishing_plugin.md#publishing-plugin-with-gradle)
- [Plugin upload API](https://plugins.jetbrains.com/docs/marketplace/plugin-upload.html)


### `archiveFile`
{#publishPlugin-archiveFile}

Specifies the ZIP archive file to be published to the remote repository.
By default, it uses the output [`signPlugin.archiveFile`](#signPlugin-archiveFile) if plugin signing is configured, otherwise the [`buildPlugin.archiveFile`](#buildPlugin-archiveFile).

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: [`signPlugin.archiveFile`](#signPlugin-archiveFile) or [`buildPlugin.archiveFile`](#buildPlugin-archiveFile)

See also:
- [Extension: `intellijPlatform.signing`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-signing)


### `host`
{#publishPlugin-host}

Specifies the URL host of a plugin repository.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.publishing.host`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-publishing-host)


### `token`
{#publishPlugin-token}

Specifies the authorization token.

{type="narrow"}
Type
: `Property<String>`

Required
: yes

Default value
: [`intellijPlatform.publishing.token`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-publishing-token)


### `channels`
{#publishPlugin-channels}

Specifies a list of [JetBrains Marketplace](https://plugins.jetbrains.com) channel names used as destination for the plugin upload.

{type="narrow"}
Type
: `ListProperty<String>`

Default value
: [`intellijPlatform.publishing.channels`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-publishing-channels)


### `hidden`
{#publishPlugin-hidden}

Publishes the plugin update and marks it as [hidden](https://plugins.jetbrains.com/docs/marketplace/hidden-plugin.html) to prevent public visibility after approval.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.publishing.hidden`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-publishing-hidden)


### `ideServices`
{#publishPlugin-ideServices}

Specifies if the IDE Services plugin repository service should be used.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.publishing.ideServices`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-publishing-ideServices)



## `runIde`
{#runIde}

<link-summary>Runs the IDE instance using the currently selected IntelliJ Platform with the built plugin loaded.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform)

**Depends on**: [`patchPluginXml`](#patchPluginXml), [`prepareSandbox`](#prepareSandbox)

**Extends**: [`JavaExec`][gradle-javaexec-task], [`RunnableIdeAware`](tools_intellij_platform_gradle_plugin_task_awares.md#RunnableIdeAware), [`SplitModeAware`](tools_intellij_platform_gradle_plugin_task_awares.md#SplitModeAware), [`IntelliJPlatformVersionAware`](tools_intellij_platform_gradle_plugin_task_awares.md#IntelliJPlatformVersionAware)

**Sources**: [`RunIdeTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/RunIdeTask.kt)

</tldr>

Runs the IDE instance using the currently selected IntelliJ Platform with the built plugin loaded.
It directly extends the [`JavaExec`][gradle-javaexec-task] Gradle task, which allows for an extensive configuration (system properties, memory management, etc.).

This task runs against the IntelliJ Platform and plugins specified in project dependencies.
To register a customized task, use [`intelliJPlatformTestingExtension.runIde`](tools_intellij_platform_gradle_plugin_testing_extension.md).



## `runIdeForUiTests`
{#runIdeForUiTests}

<secondary-label ref="unavailable"/>

<link-summary>Runs the IDE instance using the currently selected IntelliJ Platform with the built plugin and Robot Server plugin loaded.</link-summary>

Runs the IDE instance using the currently selected IntelliJ Platform with the built plugin and Robot Server plugin loaded.

This task is not available by default and needs to be registered manually by applying the following code:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
val runIdeForUiTests by intellijPlatformTesting.runIde.registering {
  task {
    jvmArgumentProviders += CommandLineArgumentProvider {
      listOf(
        "-Drobot-server.port=8082",
        "-Dide.mac.message.dialogs.as.sheets=false",
        "-Djb.privacy.policy.text=<!--999.999-->",
        "-Djb.consents.confirmation.enabled=false",
      )
    }
  }
  plugins {
    robotServerPlugin()
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatformTesting.runIde {
  runIdeForUiTests {
    task {
      jvmArgumentProviders.add({
        [
          "-Drobot-server.port=8082",
          "-Dide.mac.message.dialogs.as.sheets=false",
          "-Djb.privacy.policy.text=<!--999.999-->",
          "-Djb.consents.confirmation.enabled=false",
        ]
      } as CommandLineArgumentProvider)
    }
    plugins {
      robotServerPlugin()
    }
  }
}
```

</tab>
</tabs>


## `setupDependencies`
{#setupDependencies}

<link-summary>Deprecated. A deprecated method for setting up IntelliJ Platform dependencies.</link-summary>

<secondary-label ref="deprecated"/>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform), [](tools_intellij_platform_gradle_plugin_plugins.md#module), [](tools_intellij_platform_gradle_plugin_plugins.md#base)

**Extends**: [`DefaultTask`][gradle-default-task]

**Sources**: [`SetupDependenciesTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/SetupDependenciesTask.kt)

</tldr>

A deprecated method for setting up IntelliJ Platform dependencies.

The `setupDependencies` task was automatically added to the ["After Sync" Gradle trigger](https://www.jetbrains.com/help/idea/work-with-gradle-tasks.html#config_triggers_gradle) to make the IntelliJ Platform dependency available for IntelliJ IDEA right after the Gradle synchronization.
This method is no longer needed as the dependency on IntelliJ Platform is declared directly in Gradle dependencies.

> It's recommended to remove any references to `setupDependencies` task. See the [Migration](tools_intellij_platform_gradle_plugin_migration.md#setupdependencies) page for more details.
>
{style="warning"}



## `signPlugin`
{#signPlugin}

<link-summary>Signs the ZIP archive with the provided key using Marketplace ZIP Signer library.2</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform)

**Depends on**: [`buildPlugin`](#buildPlugin)

**Extends**: [`JavaExec`][gradle-javaexec-task], [`SigningAware`](tools_intellij_platform_gradle_plugin_task_awares.md#SigningAware)

**Sources**: [`SignPluginTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/SignPluginTask.kt)

</tldr>

Signs the ZIP archive with the provided key using the [Marketplace ZIP Signer](https://github.com/JetBrains/marketplace-zip-signer) library.
To sign the plugin before publishing to [JetBrains Marketplace](https://plugins.jetbrains.com) with the [`signPlugin`](#signPlugin) task,
it is required to provide a certificate chain and a private key with its password using
[`intellijPlatform.signing`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-signing) extension.
As soon as [`privateKey`](#signPlugin-privateKey) (or [`privateKeyFile`](#signPlugin-privateKeyFile)) and [`certificateChain`](#signPlugin-certificateChain)
(or [`certificateChainFile`](#signPlugin-certificateChainFile) properties are specified,
the task will be executed automatically right before the [`publishPlugin`](#publishPlugin) task.

> To start using the plugin signing feature, it is necessary to add a dependency on the Marketplace ZIP Signer CLI tool by adding the [`zipSigner()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#tools) entry to the dependencies section.

For more details, see [](plugin_signing.md).


### `archiveFile`
{#signPlugin-archiveFile}

Specifies the unsigned ZIP archive input file.
Corresponds to the `in` CLI option.

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: [`buildPlugin.archiveFile`](#buildPlugin-archiveFile)


### `signedArchiveFile`
{#signPlugin-signedArchiveFile}

Specifies the signed ZIP archive output file.
Corresponds to the `out` CLI option.

Predefined with the name of the ZIP archive file with `-signed` name suffix attached.
The output file is placed next to the input [`archiveFile`](#signPlugin-archiveFile).

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: [`signPlugin.archiveFile`](#signPlugin-archiveFile) with `-signed` suffix applied to the name


### `keyStore`
{#signPlugin-keyStore}

Specifies the KeyStore file path.
Corresponds to the `ks` CLI option.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.signing.keyStore`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-signing-keyStore)


### `keyStorePassword`
{#signPlugin-keyStorePassword}

Specifies the KeyStore password.
Corresponds to the `ks-pass` CLI option.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.signing.keyStorePassword`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-signing-keyStorePassword)


### `keyStoreKeyAlias`
{#signPlugin-keyStoreKeyAlias}

Specifies the KeyStore key alias.
Corresponds to the `ks-key-alias` CLI option.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.signing.keyStoreKeyAlias`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-signing-keyStoreKeyAlias)


### `keyStoreType`
{#signPlugin-keyStoreType}

Specifies the KeyStore type.
Corresponds to the `ks-type` CLI option.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.signing.keyStoreType`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-signing-keyStoreType)


### `keyStoreProviderName`
{#signPlugin-keyStoreProviderName}

Specifies the JCA KeyStore Provider name.
Corresponds to the `ks-provider-name` CLI option.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.signing.keyStoreProviderName`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-signing-keyStoreProviderName)


### `privateKey`
{#signPlugin-privateKey}

Specifies the encoded private key in the PEM format.
Corresponds to the `key` CLI option.

Takes precedence over the [`privateKeyFile`](#signPlugin-privateKeyFile) property.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.signing.privateKey`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-signing-privateKey)


### `privateKeyFile`
{#signPlugin-privateKeyFile}

Specifies a file with an encoded private key in the PEM format.
Corresponds to the `key-file` CLI option.

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: [`intellijPlatform.signing.privateKeyFile`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-signing-privateKeyFile)


### `password`
{#signPlugin-password}

Specifies the password required to decrypt the private key.
Corresponds to the `key-pass` CLI option.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.signing.password`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-signing-password)


### `certificateChain`
{#signPlugin-certificateChain}

Specifies a string containing X509 certificates.
The first certificate in the chain will be used as a certificate authority (CA).
This parameter corresponds to the `cert` CLI option.

Takes precedence over the [`certificateChainFile`](#signPlugin-certificateChainFile) property.

{type="narrow"}
Type
: `Property<String>`

Default value
: [`intellijPlatform.signing.certificateChain`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-signing-certificateChain)


### `certificateChainFile`
{#signPlugin-certificateChainFile}

Specifies the path to the file containing X509 certificates.
The first certificate in the chain will be used as a certificate authority (CA).
Corresponds to the `cert-file` CLI option.

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: [`intellijPlatform.signing.certificateChainFile`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-signing-certificateChainFile)



## `test`
{#test}

<link-summary>The base Gradle test task preconfigured to run IntelliJ Platform tests.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform), [](tools_intellij_platform_gradle_plugin_plugins.md#module)

**Depends on**: [`prepareTest`](#prepareTest)

**Extends**: [`DefaultTask`][gradle-default-task], [`IntelliJPlatformVersionAware`](tools_intellij_platform_gradle_plugin_task_awares.md#IntelliJPlatformVersionAware), [`PluginAware`](tools_intellij_platform_gradle_plugin_task_awares.md#PluginAware)

**Sources**: [`TestCompanion`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/companion/TestCompanion.kt)

</tldr>

The base Gradle `test` task is preconfigured using the [`TestCompanion`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/companion/TestCompanion.kt) class to run tests with IntelliJ Platform, sandbox, and all system properties set.

The task itself isn't mutated and a dedicated [`prepareTest`](#prepareTest) task is involved to request for required IntelliJ Platform and sandbox configuration.



## `testIde`
{#testIde}

<secondary-label ref="unavailable"/>

<link-summary>Runs tests using a custom IntelliJ Platform with the developed plugin installed.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform), [](tools_intellij_platform_gradle_plugin_plugins.md#module)

**Depends on**: [`prepareTest`](#prepareTest)

**Extends**: [`DefaultTask`][gradle-default-task], [`IntelliJPlatformVersionAware`](tools_intellij_platform_gradle_plugin_task_awares.md#IntelliJPlatformVersionAware), [`PluginAware`](tools_intellij_platform_gradle_plugin_task_awares.md#PluginAware)

**Sources**: [`TestIdeTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/TestIdeTask.kt)

</tldr>

> The `testIde` task is not registered by default.
>
{style="warning"}

Runs tests using a custom IntelliJ Platform with the developed plugin installed.
It directly extends the [Test][gradle-test-task] Gradle task, which allows for an extensive configuration (system properties, memory management, etc.).

The [`TestIdeTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/TestIdeTask.kt) is a class used only for handling custom `testIde` tasks.

To register a customized test task, use [`intelliJPlatformTestingExtension.testIde`](tools_intellij_platform_gradle_plugin_testing_extension.md).



## `testIdePerformance`
{#testIdePerformance}

<secondary-label ref="incubating"/>

<link-summary>Runs performance tests on the IntelliJ Platform with the developed plugin installed.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform)

**Depends on**: [`prepareSandbox`](#prepareSandbox)

**Extends**: [`JavaExec`][gradle-javaexec-task], [`RunnableIdeAware`](tools_intellij_platform_gradle_plugin_task_awares.md#RunnableIdeAware), [`TestableAware`](tools_intellij_platform_gradle_plugin_task_awares.md#TestableAware), [`IntelliJPlatformVersionAware`](tools_intellij_platform_gradle_plugin_task_awares.md#IntelliJPlatformVersionAware)

**Sources**: [`TestIdePerformanceTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/TestIdePerformanceTask.kt)

</tldr>

> Not implemented.
>
{style="warning"}



## `testIdeUi`
{#testIdeUi}

<secondary-label ref="incubating"/>

<link-summary>Runs the IDE instance with the developed plugin and Starter framework for UI testing.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform)

**Extends**: [`Test`][gradle-test-task], [`TestableAware`](tools_intellij_platform_gradle_plugin_task_awares.md#TestableAware)

**Sources**: [`TestIdeUiTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/TestIdeUiTask.kt)

</tldr>

Runs the IDE instance with the developed plugin and Starter framework for UI testing.


### `archiveFile`
{#testIdeUi-archiveFile}

Specifies the archive file representing the input file to be tested.

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: [`buildPlugin.archiveFile`](#buildPlugin-archiveFile)




## `verifyPlugin`
{#verifyPlugin}

<link-summary>Runs the IntelliJ Plugin Verifier CLI tool to check the binary compatibility with specified IDE builds.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform)

**Depends on**: [`buildPlugin`](#buildPlugin)

**Extends**: [`JavaExec`][gradle-javaexec-task], [`RuntimeAware`](tools_intellij_platform_gradle_plugin_task_awares.md#RuntimeAware), [`PluginVerifierAware`](tools_intellij_platform_gradle_plugin_task_awares.md#PluginVerifierAware)

**Sources**: [`VerifyPluginTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/VerifyPluginTask.kt)

</tldr>

Runs the [IntelliJ Plugin Verifier](verifying_plugin_compatibility.md) CLI tool to check the binary compatibility with specified IDE builds.

Due to caching, the latest Plugin Verifier release version might not be picked up by Gradle immediately.
In such cases, [refresh dependencies](https://docs.gradle.org/current/userguide/dependency_caching.html#sec:refreshing-dependencies)
manually.

See also:
- [Extension: `intellijPlatform.pluginVerification`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification)
- [Types: `FailureLevel`](tools_intellij_platform_gradle_plugin_types.md#FailureLevel)
- [Types: `Subsystems`](tools_intellij_platform_gradle_plugin_types.md#Subsystems)
- [Types: `VerificationReportsFormats`](tools_intellij_platform_gradle_plugin_types.md#VerificationReportsFormats)
- [Verifying Plugin Compatibility](verifying_plugin_compatibility.md)
- [IntelliJ Plugin Verifier](https://github.com/JetBrains/intellij-plugin-verifier)


### `ides`
{#verifyPlugin-ides}

Specifies IntelliJ Platform IDEs used by the IntelliJ Plugin Verifier CLI tool for binary plugin verification.
The list of IDEs is managed through the [`intellijPlatform.pluginVerification.ides`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-ides) extension.

{type="narrow"}
Type
: `ConfigurableFileCollection`


### `archiveFile`
{#verifyPlugin-archiveFile}

Specifies the input ZIP archive file of the plugin to verify.
If this parameter is empty, the task will be skipped.

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: [`buildPlugin.archiveFile`](#buildPlugin-archiveFile)


### `externalPrefixes`
{#verifyPlugin-externalPrefixes}

Specifies a list of class prefixes from external libraries.
The Plugin Verifier will not report `No such class` errors for classes in these packages.

{type="narrow"}
Type
: `ListProperty<String>`

Default value
: [`intellijPlatform.pluginVerification.externalPrefixes`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-externalPrefixes)


### `failureLevel`
{#verifyPlugin-failureLevel}

Specifies the verification level at which the task fails if any reported issue matches.

{type="narrow"}
Type
: [`ListProperty<FailureLevel>`](tools_intellij_platform_gradle_plugin_types.md#FailureLevel)

Default value
: [`intellijPlatform.pluginVerification.failureLevel`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-failureLevel)


### `freeArgs`
{#verifyPlugin-freeArgs}

Represents a list of free arguments that are passed directly to the IntelliJ Plugin Verifier CLI tool.
These arguments are used in conjunction with those provided by dedicated options.

See [](tools_intellij_platform_gradle_plugin_faq.md#mutePluginVerifierProblems) for sample usage.

{type="narrow"}
Type
: `ListProperty<String>`

Default value
: [`intellijPlatform.pluginVerification.freeArgs`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-freeArgs)


### `ignoredProblemsFile`
{#verifyPlugin-ignoredProblemsFile}

Specifies a file that contains a list of problems that will be ignored in a report.

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: [`intellijPlatform.pluginVerification.ignoredProblemsFile`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-ignoredProblemsFile)


### `offline`
{#verifyPlugin-offline}

Indicates whether the operation is executed in offline mode.
This depends on the start parameters specified in Gradle.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `StartParameter.isOffline`

See also:
- [StartParameter](https://docs.gradle.org/current/javadoc/org/gradle/StartParameter.html)
- [Command Line Execution Options](https://docs.gradle.org/current/userguide/command_line_interface.html#sec:command_line_execution_options)


### `subsystemsToCheck`
{#verifyPlugin-subsystemsToCheck}

Specifies which subsystems of the IDE should be checked.

{type="narrow"}
Type
: [`Subsystems`](tools_intellij_platform_gradle_plugin_types.md#Subsystems)

Default value
: [`intellijPlatform.pluginVerification.subsystemsToCheck`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-subsystemsToCheck)


### `teamCityOutputFormat`
{#verifyPlugin-teamCityOutputFormat}

Specifies whether to use the TeamCity-compatible output format.
If set to `true`, outputs in a format compatible with [TeamCity](https://www.jetbrains.com/teamcity/), directing the output to stdout.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: [`intellijPlatform.pluginVerification.teamCityOutputFormat`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-teamCityOutputFormat)


### `verificationReportsDirectory`
{#verifyPlugin-verificationReportsDirectory}

Specifies the path to the directory where verification reports will be saved.

{type="narrow"}
Type
: `DirectoryProperty`

Default value
: [`intellijPlatform.pluginVerification.verificationReportsDirectory`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-verificationReportsDirectory)


### `verificationReportsFormats`
{#verifyPlugin-verificationReportsFormats}

Specifies the output formats of the verification reports.

{type="narrow"}
Type
: [`ListProperty<VerificationReportsFormats>`](tools_intellij_platform_gradle_plugin_types.md#VerificationReportsFormats)

Default value
: [`intellijPlatform.pluginVerification.verificationReportsFormats`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-verificationReportsFormats)


## `verifyPluginProjectConfiguration`
{#verifyPluginProjectConfiguration}

<link-summary>Validates the plugin project configuration.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform), [](tools_intellij_platform_gradle_plugin_plugins.md#module)

**Depends on**: [`patchPluginXml`](#patchPluginXml)

**Extends**: [`DefaultTask`][gradle-default-task], [`IntelliJPlatformVersionAware`](tools_intellij_platform_gradle_plugin_task_awares.md#IntelliJPlatformVersionAware), [`PluginAware`](tools_intellij_platform_gradle_plugin_task_awares.md#PluginAware)

**Sources**: [`VerifyPluginProjectConfigurationTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/VerifyPluginProjectConfigurationTask.kt)

</tldr>

Validates the plugin project configuration:
- The [`patchPluginXml.sinceBuild`](#patchPluginXml-sinceBuild) property can't be lower than the target IntelliJ Platform major version.
- The Java/Kotlin `sourceCompatibility` and `targetCompatibility` properties should be aligned with the Java versions required by [`patchPluginXml.sinceBuild`](#patchPluginXml-sinceBuild) and the currently used IntelliJ Platform.
- The Kotlin API version should be aligned with the version required by [`patchPluginXml.sinceBuild`](#patchPluginXml-sinceBuild) and the currently used IntelliJ Platform.
- The used IntelliJ Platform version should be higher than `2022.3` (`223.0`).
- The dependency on the [](using_kotlin.md#kotlin-standard-library) should be excluded.
- The Kotlin plugin in version `1.8.20` is not used with IntelliJ Platform Gradle Plugin due to the 'java.lang.OutOfMemoryError: Java heap space' exception.
- The Kotlin Coroutines library should not be added explicitly to the project as it is already provided with the IntelliJ Platform.
- The IntelliJ Platform cache directory should be excluded from the version control system. Add the `.intellijPlatform` entry to the <path>.gitignore</path> file.
- The currently selected Java Runtime is not JetBrains Runtime (JBR).

For more details regarding the Java version used in the specific IntelliJ SDK, see [](build_number_ranges.md).

See also:
- [](build_number_ranges.md)
- [](using_kotlin.md#kotlin-standard-library)
- [](using_kotlin.md#incremental-compilation)


### `reportDirectory`
{#verifyPluginProjectConfiguration-reportDirectory}

Specifies the report directory where the verification result will be stored.

{type="narrow"}
Type
: `DirectoryProperty`

Default value
: <path>[buildDirectory]/reports/verifyPluginConfiguration</path>


### `rootProject`
{#verifyPluginProjectConfiguration-rootProject}

Specifies the root project path.

{type="narrow"}
Type
: `Property<File>`

Default value
: <path>[rootProject]</path>


### `intellijPlatformCache`
{#verifyPluginProjectConfiguration-intellijPlatformCache}

Specifies the IntelliJ Platform cache directory.

{type="narrow"}
Type
: `Property<File>`

Default value
: [`intellijPlatform.cachePath`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-cachePath)


### `gitignoreFile`
{#verifyPluginProjectConfiguration-gitignoreFile}

Specifies the `.gitignore` file located in the <path>[rootDirectory]</path>, tracked for content changes.

{type="narrow"}
Type
: `Property<File>`

Default value
: <path>[rootProject]/.gitignore</path>


### `sourceCompatibility`
{#verifyPluginProjectConfiguration-sourceCompatibility}

Specifies the `JavaCompile.sourceCompatibility` property value defined in the build script.

{type="narrow"}
Type
: `Property<String>`

Default value
: `JavaCompile.sourceCompatibility`


### `targetCompatibility`
{#verifyPluginProjectConfiguration-targetCompatibility}

Specifies the `JavaCompile.targetCompatibility` property value defined in the build script.

{type="narrow"}
Type
: `Property<String>`

Default value
: `JavaCompile.targetCompatibility`


### `kotlinPluginAvailable`
{#verifyPluginProjectConfiguration-kotlinPluginAvailable}

Indicates that the Kotlin Gradle Plugin is loaded and available.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: Kotlin Gradle Plugin presence


### `kotlinApiVersion`
{#verifyPluginProjectConfiguration-kotlinApiVersion}

Specifies the `apiVersion` property value of `compileKotlin.kotlinOptions` defined in the build script.

{type="narrow"}
Type
: `Property<String?>`

Default value
: `compileKotlin.kotlinOptions.apiVersion`


### `kotlinLanguageVersion`
{#verifyPluginProjectConfiguration-kotlinLanguageVersion}

Specifies the `languageVersion` property value of `compileKotlin.kotlinOptions` defined in the build script.

{type="narrow"}
Type
: `Property<String?>`

Default value
: `compileKotlin.kotlinOptions.languageVersion`


### `kotlinVersion`
{#verifyPluginProjectConfiguration-kotlinVersion}

Specifies the version of Kotlin used in the project.

{type="narrow"}
Type
: `Property<String?>`

Default value
: `kotlin.coreLibrariesVersion`


### `kotlinJvmTarget`
{#verifyPluginProjectConfiguration-kotlinJvmTarget}

Specifies the `jvmTarget` property value of `compileKotlin.kotlinOptions` defined in the build script.

{type="narrow"}
Type
: `Property<String?>`

Default value
: `compileKotlin.kotlinOptions.jvmTarget`


### `kotlinStdlibDefaultDependency`
{#verifyPluginProjectConfiguration-kotlinStdlibDefaultDependency}

Specifies the value of the `kotlin.stdlib.default.dependency` property as defined in the <path>gradle.properties</path> file.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `kotlin.stdlib.default.dependency` Gradle property


### `kotlinxCoroutinesLibraryPresent`
{#verifyPluginProjectConfiguration-kotlinxCoroutinesLibraryPresent}

Indicates whether the Kotlin Coroutines library is explicitly added to the project dependencies.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: The `org.jetbrains.kotlinx:kotlinx-coroutines` dependency presence


### `hasModulePlugin`
{#verifyPluginProjectConfiguration-hasModulePlugin}

Defines if the current module is a main project or imported module, which uses [](tools_intellij_platform_gradle_plugin_plugins.md#module) plugin.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: The [](tools_intellij_platform_gradle_plugin_plugins.md#module) plugin presence



## `verifyPluginSignature`
{#verifyPluginSignature}

<link-summary>Validates the signature of the plugin archive file using the Marketplace ZIP Signer library.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform)

**Extends**: [`JavaExec`][gradle-javaexec-task], [`SigningAware`](tools_intellij_platform_gradle_plugin_task_awares.md#SigningAware)

**Sources**: [`PrepareSandboxTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/VerifyPluginSignatureTask.kt)

</tldr>

Validates the signature of the plugin archive file using the [Marketplace ZIP Signer](https://github.com/JetBrains/marketplace-zip-signer) library.

See also:
- [](plugin_signing.md)
- [Marketplace ZIP Signer](https://github.com/JetBrains/marketplace-zip-signer)


### `inputArchiveFile`
{#verifyPluginSignature-inputArchiveFile}

Specifies the input, unsigned ZIP archive file.
This parameter corresponds to the `in` CLI option.

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: [`signPlugin.signedArchiveFile`](#signPlugin-signedArchiveFile)


### `certificateChain`
{#verifyPluginSignature-certificateChain}

Specifies a string containing X509 certificates.
The first certificate in the chain will be used as a certificate authority (CA).
This parameter corresponds to the `cert` CLI option.

Takes precedence over the [`certificateChainFile`](#verifyPluginSignature-certificateChainFile) property.

{type="narrow"}
Type
: `Property<String>`


### `certificateChainFile`
{#verifyPluginSignature-certificateChainFile}

Specifies the path to the file containing X509 certificates.
The first certificate in the chain will be used as a certificate authority (CA).
This parameter corresponds to the `cert-file` CLI option.

{type="narrow"}
Type
: `RegularFileProperty`

Default value
: [`signPlugin.certificateChainFile`](#signPlugin-certificateChainFile) or [`signPlugin.certificateChain`](#signPlugin-certificateChain) written to a temporary file



## `verifyPluginStructure`
{#verifyPluginStructure}

<link-summary>Validates completeness and contents of <path>plugin.xml</path> descriptors as well as plugin archive structure.</link-summary>

<tldr>

**Available in:** [](tools_intellij_platform_gradle_plugin_plugins.md#platform)

**Depends on**: [`prepareSandbox`](#prepareSandbox)

**Extends**: [`DefaultTask`][gradle-default-task], [`SandboxAware`](tools_intellij_platform_gradle_plugin_task_awares.md#SandboxAware)

**Sources**: [`VerifyPluginStructureTask`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/VerifyPluginStructureTask.kt)

</tldr>

Validates completeness and contents of <path>plugin.xml</path> descriptors as well as plugin archive structure.

See also:
- [](plugin_configuration_file.md)


### `ignoreFailures`
{#verifyPluginStructure-ignoreFailures}

Specifies whether the build should fail when the verifications performed by this task fail.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `false`


### `ignoreUnacceptableWarnings`
{#verifyPluginStructure-ignoreUnacceptableWarnings}

Specifies whether the build should fail when the verifications performed by this task emit unacceptable warnings.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `false`


### `ignoreWarnings`
{#verifyPluginStructure-ignoreWarnings}

Specifies whether the build should fail when the verifications performed by this task emit warnings.

{type="narrow"}
Type
: `Property<Boolean>`

Default value
: `true`


### `pluginDirectory`
{#verifyPluginStructure-pluginDirectory}

Specifies the location of the built plugin file used for verification.

{type="narrow"}
Type
: `DirectoryProperty`

Default value
: <path>[`prepareSandbox.defaultDestinationDirectory`](#prepareSandbox-defaultDestinationDirectory)/[`intellijPlatform.pluginConfiguration.name`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginConfiguration-name)</path>



<include from="snippets.md" element-id="missingContent"/>

[gradle-default-task]: https://docs.gradle.org/current/dsl/org.gradle.api.DefaultTask.html
[gradle-jar-task]: https://docs.gradle.org/current/dsl/org.gradle.jvm.tasks.Jar.html
[gradle-javaexec-task]: https://docs.gradle.org/current/dsl/org.gradle.api.tasks.JavaExec.html
[gradle-sync-task]: https://docs.gradle.org/current/dsl/org.gradle.api.tasks.Sync.html
[gradle-test-task]: https://docs.gradle.org/current/dsl/org.gradle.api.tasks.testing.Test.html
[gradle-zip-task]: https://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Zip.html
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# IntelliJ Platform Testing Extension

<link-summary>IntelliJ Platform Gradle Plugin testing extension.</link-summary>

<include from="tools_intellij_platform_gradle_plugin.md" element-id="faq"/>

The _IntelliJ Platform Gradle Plugin_ introduces a top-level `intellijPlatformExtension` extension.
It provides a possibility for registering custom tasks for running the IDE, unit tests, UI tests, or performance tests.

For each of the custom tasks, a dedicated sandbox is created to isolate them form other tasks or the build flow as they may rely on a different IntelliJ Platform version, plugins, or other configuration.

## IntelliJ Platform Testing

{#intellijPlatformTesting}

After the IntelliJ Platform Gradle Plugin is [applied](tools_intellij_platform_gradle_plugin.md#usage), the `intellijPlatformTesting` extension can be used for registering new tasks to fulfil specific requirements of the project.

The extension exposes four `NamedDomainObjectContainers` which allow for creating new objects of given types.
Registering of a custom task which allows for adjusting the IntelliJ Platform type and version can be done by using one of the below containers, depending on the task purpose.

**Example:**

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
intellijPlatformTesting {
  runIde
  testIde
  testIdeUi
  testIdePerformance
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatformTesting {
  runIde
  testIde
  testIdeUi
  testIdePerformance
}
```

</tab>
</tabs>


By default, created tasks depend on the IntelliJ Platform defined with [](tools_intellij_platform_gradle_plugin_dependencies_extension.md).
However, it is possible to adjust it to any requirements with passing custom values directly to the created object, `task`, or `sandboxTask` task instances.

**Example:**

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
val runPhpStorm by intellijPlatformTesting.runIde.registering {
  type = IntelliJPlatformType.PhpStorm
  version = ...
  useInstaller = ...
  localPath = ...

  sandboxDirectory = ...

  splitMode = ...
  splitModeTarget = ...

  task {
    ...
  }

  prepareSandboxTask {
    ...
  }

  plugins {
    ...
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatformTesting.runIde {
  runPhpStorm {
    type = IntelliJPlatformType.PhpStorm
    version = ...
    useInstaller = ...
    localPath = ...

    sandboxDirectory = ...

    splitMode = ...
    splitModeTarget = ...

    task {
      ...
    }

    prepareSandboxTask {
      ...
    }

    plugins {
      ...
    }
  }
}
```

</tab>
</tabs>

### `task {}`

Depending on the type of registered object, a different `task` class is available for configuration:

| Type                 | Task class                                                                                    |
|----------------------|-----------------------------------------------------------------------------------------------|
| `runIde`             | [`RunIdeTask`](tools_intellij_platform_gradle_plugin_tasks.md#runIde)                         |
| `testIde`            | [`TestIdeTask`](tools_intellij_platform_gradle_plugin_tasks.md#testIde)                       |
| `testIdeUi`          | [`TestIdeUiTask`](tools_intellij_platform_gradle_plugin_tasks.md#testIdeUi)                   |
| `testIdePerformance` | [`TestIdePerformanceTask`](tools_intellij_platform_gradle_plugin_tasks.md#testIdePerformance) |

### `prepareSandboxTask {}`

The `prepareSandboxTask` refers to a dedicated [`PrepareSandboxTask`](tools_intellij_platform_gradle_plugin_tasks.md#prepareSandbox) task instance, connected only with a newly created task.
The name of this task is based on the name of created task, like `prepareSandbox_[TASK_NAME]`.

### `plugins {}`

An extension to provide custom plugins to be added when running the task runtime, or disabling bundled ones.

It provides several methods for adding remote and local plugins, or for disabling already loaded or bundled plugin.

**Example:**

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
  val runIdeWithPlugins by intellijPlatformTesting.runIde.registering {
  // ...
  plugins {
    plugin("pluginId", "1.0.0")
    disablePlugin("pluginId")
  }
}
```

</tab>
<tab title="Groovy" group-key="groovy">

```groovy
intellijPlatformTesting.runIde {
  runIdeWithPlugins {
    // ...
    plugins {
      plugin("pluginId", "1.0.0")
      disablePlugin("pluginId")
    }
  }
}
```

</tab>
</tabs>

| Function                       | Description                                                                                                                                  |
|--------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| `plugin(id, version, channel)` | Adds a dependency on a plugin for a custom IntelliJ Platform.                                                                                |
| `plugin(notation)`             | Adds a dependency on a plugin for a custom IntelliJ Platform using a string notation:<p>`pluginId:version` or `pluginId:version@channel`</p> |
| `plugins(notations)`           | Adds dependencies on plugins for a custom IntelliJ Platform using a string notation:<p>`pluginId:version` or `pluginId:version@channel`</p>  |
| `disablePlugin(id)`            | Disables the specific plugin with its ID.                                                                                                    |
| `disablePlugins(ids)`          | Disables specific plugins with the list of their IDs.                                                                                        |
| `localPlugin(path)`            | Adds a dependency on a local IntelliJ Platform plugin. Accepts path or a dependency on another module.                                       |
| `robotServerPlugin(version)`   | Adds a dependency on a Robot Server Plugin.                                                                                                  |

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Types

<link-summary>IntelliJ Platform Gradle Plugin data types, enums, and constants.</link-summary>

<include from="tools_intellij_platform_gradle_plugin.md" element-id="faq"/>

This page lists various types used to configure [](tools_intellij_platform_gradle_plugin_tasks.md).

## `FailureLevel`
{#FailureLevel}

[`VerifyPluginTask.FailureLevel`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/VerifyPluginTask.kt)

Enum class describing the failure level of the IntelliJ Plugin Verifier CLI tool run with the [`verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin) task.

| Name                               | Description                                                                         |
|------------------------------------|-------------------------------------------------------------------------------------|
| `COMPATIBILITY_WARNINGS`           | Compatibility warnings detected against the specified IDE version.                  |
| `COMPATIBILITY_PROBLEMS`           | Compatibility problems detected against the specified IDE version.                  |
| `DEPRECATED_API_USAGES`            | Plugin uses API marked as deprecated (`@Deprecated`).                               |
| `SCHEDULED_FOR_REMOVAL_API_USAGES` | Plugin uses API marked as scheduled for removal (`@ApiStatus.ScheduledForRemoval`). |
| `EXPERIMENTAL_API_USAGES`          | Plugin uses API marked as experimental (`@ApiStatus.Experimental`).                 |
| `INTERNAL_API_USAGES`              | Plugin uses API marked as internal (`@ApiStatus.Internal`).                         |
| `OVERRIDE_ONLY_API_USAGES`         | Override-only API is used incorrectly (`@ApiStatus.OverrideOnly`).                  |
| `NON_EXTENDABLE_API_USAGES`        | Non-extendable API is used incorrectly (`@ApiStatus.NonExtendable`).                |
| `PLUGIN_STRUCTURE_WARNINGS`        | The structure of the plugin is not valid.                                           |
| `MISSING_DEPENDENCIES`             | Plugin has some dependencies missing.                                               |
| `INVALID_PLUGIN`                   | Provided plugin artifact is not valid.                                              |
| `NOT_DYNAMIC`                      | Plugin probably cannot be enabled or disabled without IDE restart                   |
| `ALL`                              | Contains all possible options.                                                      |
| `NONE`                             | Contains no option.                                                                 |

See also:
- [Extension: `intellijPlatform.pluginVerification.failureLevel`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-failureLevel)
- [Tasks: `verifyPlugin.failureLevel`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin-failureLevel)
- [Overview of API Status](verifying_plugin_compatibility.md#ide-support)


## `IntelliJPlatformType`
{#IntelliJPlatformType}

[`IntelliJPlatformType`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/IntelliJPlatformType.kt)

Describes all IntelliJ Platform types available to be used for plugin development, dependency resolution, and plugin verification.

Each entry is composed of a product code and coordinates used for dependency and binary release resolution.

| Name                    | Code   | Artifact Coordinates                               | Binary release |
|-------------------------|--------|----------------------------------------------------|:--------------:|
| `AndroidStudio`         | `AI`   | -                                                  |    &check;     |
| `Aqua`                  | `QA`   | -                                                  |    &check;     |
| `CLion`                 | `CL`   | `com.jetbrains.intellij.clion:clion`               |    &check;     |
| `DataGrip`              | `DB`   | -                                                  |    &check;     |
| `DataSpell`             | `DS`   | -                                                  |    &check;     |
| `FleetBackend`          | `FLIJ` | `com.jetbrains.intellij.fleetBackend:fleetBackend` |                |
| `Gateway`               | `GW`   | `com.jetbrains.intellij.gateway:gateway`           |    &check;     |
| `GoLand`                | `GO`   | `com.jetbrains.intellij.goland:goland`             |    &check;     |
| `IntellijIdeaCommunity` | `IC`   | `com.jetbrains.intellij.idea:ideaIC`               |    &check;     |
| `IntellijIdeaUltimate`  | `IU`   | `com.jetbrains.intellij.idea:ideaIU`               |    &check;     |
| `MPS`                   | `MPS`  | -                                                  |    &check;     |
| `PhpStorm`              | `PS`   | `com.jetbrains.intellij.phpstorm:phpstorm`         |    &check;     |
| `PyCharmProfessional`   | `PY`   | `com.jetbrains.intellij.pycharm:pycharmPY`         |    &check;     |
| `PyCharmCommunity`      | `PC`   | `com.jetbrains.intellij.pycharm:pycharmPC`         |    &check;     |
| `Rider`                 | `RD`   | `com.jetbrains.intellij.rider:riderRD`             |    &check;     |
| `RubyMine`              | `RM`   | -                                                  |    &check;     |
| `RustRover`             | `RR`   | `com.jetbrains.intellij.rustrover:RustRover`       |    &check;     |
| `WebStorm`              | `WS`   | `com.jetbrains.intellij.webstorm:webstorm`         |    &check;     |
| `Writerside`            | `WRS`  | `com.jetbrains.intellij.idea:writerside`           |    &check;     |


## `PluginBean`
{#PluginBean}

[`PluginBean`](%gh-pv-master%/intellij-plugin-structure/structure-intellij/src/main/java/com/jetbrains/plugin/structure/intellij/beans/PluginBean.java)

Describes the content of the <path>plugin.xml</path> file.

See also:
- [](plugin_configuration_file.md)

## `ProductInfo`
{#ProductInfo}

[`ProductInfo`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/models/ProductInfo.kt)

Represents information about the IntelliJ Platform product.

The information is retrieved from the <path>product-info.json</path> file in the IntelliJ Platform directory.

| Name                | Description                                                              |
|---------------------|--------------------------------------------------------------------------|
| `name`              | The product's name, like "IntelliJ IDEA".                                |
| `version`           | The marketing version of the product, like "2023.2".                     |
| `versionSuffix`     | The suffix of the version, like "EAP".                                   |
| `buildNumber`       | The build number of the product, like "232.8660.185".                    |
| `productCode`       | The product code, like "IU".                                             |
| `dataDirectoryName` | The directory name of the product data.                                  |
| `svgIconPath`       | The path to the SVG icon of the product.                                 |
| `productVendor`     | The vendor of the product.                                               |
| `launch`            | The list of OS- and arch-specific launch configurations for the product. |
| `customProperties`  | The list of custom properties of the product.                            |
| `bundledPlugins`    | The list of bundled plugins provided with the current release.           |
| `fileExtensions`    | The list of file extensions associated with the product.                 |
| `modules`           | The list of modules of the product.                                      |
| `layout`            | The modules and plugins dependencies mapping.                            |

### `validateSupportedVersion()`
{#ProductInfo-validateSupportedVersion}

Validates that the resolved IntelliJ Platform is supported by checking against the minimal supported IntelliJ Platform version.

If the provided version is lower, an `IllegalArgumentException` is thrown with an appropriate message.

{type="narrow"}
Throws
: `IllegalArgumentException`


## `ProductRelease.Channel`
{#ProductRelease-Channel}

[`ProductRelease.Channel`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/models/ProductRelease.kt)

List of available channels used by [JetBrains IDEs](intellij_platform.md#ides-based-on-the-intellij-platform)
and [Android Studio](android_studio.md) for describing binary releases.

| Name        | JetBrains IDEs | Android Studio  |
|-------------|:--------------:|:---------------:|
| `RELEASE`   |    &check;     |     &check;     |
| `EAP`       |    &check;     |                 |
| `MILESTONE` |                |     &check;     |
| `BETA`      |                |     &check;     |
| `CANARY`    |                |     &check;     |
| `PATCH`     |                |     &check;     |
| `RC`        |                |     &check;     |
| `PREVIEW`   |                |     &check;     |

See also:
- [Extension: `intellijPlatform.pluginVerification.ides`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-ides)
- [Tasks: `printProductsReleases`](tools_intellij_platform_gradle_plugin_tasks.md#printProductsReleases)


## `ProductReleasesValueSource.FilterParameters`
{#ProductReleasesValueSource-FilterParameters}

[`ProductReleasesValueSource.FilterParameters`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/providers/ProductReleasesValueSource.kt)

Interface that provides a clear way to filter binary product releases for IntelliJ Plugin Verifier.

| Name         | Description                                                                                          |
|--------------|------------------------------------------------------------------------------------------------------|
| `sinceBuild` | Build number from which the binary IDE releases will be matched.                                     |
| `untilBuild` | Build number until which the binary IDE releases will be matched.                                    |
| `types`      | A list of [`IntelliJPlatformType`](#IntelliJPlatformType) types to match.                            |
| `channels`   | A list of [`ProductRelease.Channel`](#ProductRelease-Channel) types of binary releases to search in. |

See also:
- [Extension: `intellijPlatform.pluginVerification.ides`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-ides)
- [Tasks: `printProductsReleases`](tools_intellij_platform_gradle_plugin_tasks.md#printProductsReleases)
- [Gradle Properties: `productsReleasesAndroidStudioUrl`](tools_intellij_platform_gradle_plugin_gradle_properties.md#productsReleasesAndroidStudioUrl)
- [Gradle Properties: `productsReleasesJetBrainsIdesUrl`](tools_intellij_platform_gradle_plugin_gradle_properties.md#productsReleasesJetBrainsIdesUrl)


## `SplitModeAware.SplitModeTarget`
{#SplitModeAware-SplitModeTarget}

[`SplitModeAware.SplitModeTarget`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/aware/SplitModeAware.kt)

Describes a part of the product where the developed plugin can be installed when running in _splitMode_ handled by [`SplitModeAware`](tools_intellij_platform_gradle_plugin_task_awares.md#SplitModeAware).

| Name       | Description                                       |
|------------|---------------------------------------------------|
| `BACKEND`  | Install plugin in the backed IDE.                 |
| `FRONTEND` | Install plugin in the frontend IDE.               |
| `BOTH`     | Install plugin in both backend and frontend IDEs. |


## `Subsystems`
{#Subsystems}

[`VerifyPluginTask.Subsystems`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/VerifyPluginTask.kt)

Specify which subsystems of the IDE should be checked by the IntelliJ Plugin Verifier CLI tool run with the [`verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin) task.

| Name              | Description                                  |
|-------------------|----------------------------------------------|
| `ALL`             | Verify all code.                             |
| `ANDROID_ONLY`    | Verify only code related to Android support. |
| `WITHOUT_ANDROID` | Exclude problems related to Android support. |

See also:
- [Extension: `intellijPlatform.pluginVerification.subsystemsToCheck`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-subsystemsToCheck)
- [Tasks: `verifyPlugin.subsystemsToCheck`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin-subsystemsToCheck)


## `TestFrameworkType`
{#TestFrameworkType}

[`TestFrameworkType`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/TestFrameworkType.kt)

Allows for adding `test-framework` testing library variants.
See [Dependencies Extension: Testing](tools_intellij_platform_gradle_plugin_dependencies_extension.md#testing).

### Platform Test Frameworks
{#TestFrameworkType-Platform}

Generic test frameworks for the IntelliJ Platform.

| Name       | Coordinates                                                                                                                                                                                                                                                                                                                 |
|------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Platform` | <p>`com.jetbrains.intellij.platform:test-framework`</p><p>**See "Known Issues" below**</p>                                                                                                                                                                                                                                  |
| `JUnit5`   | <p>`com.jetbrains.intellij.platform:test-framework-junit5`</p><p>**See "Known Issues" below**</p>                                                                                                                                                                                                                           |
| `Bundled`  | <p>Adds <path>[platformPath]/lib/testFramework.jar</path> file</p><p>**See "Using Bundled" below**</p>                                                                                                                                                                                                                      |
| `Metrics`  | `com.jetbrains.intellij.tools:ide-metrics-benchmark`<br/> `com.jetbrains.intellij.tools:ide-metrics-collector` <br/> `com.jetbrains.intellij.tools:ide-util-common`                                                                                                                                                         |
| `Starter`  | `com.jetbrains.intellij.tools:ide-starter-squashed` <br/> `com.jetbrains.intellij.tools:ide-starter-junit5` <br/> `com.jetbrains.intellij.tools:ide-starter-driver` <br/> `com.jetbrains.intellij.driver:driver-client` <br/> `com.jetbrains.intellij.driver:driver-sdk` <br/> `com.jetbrains.intellij.driver:driver-model` |

> Known issues related to `Platform` and `JUnit5` Test Frameworks:
> - [](tools_intellij_platform_gradle_plugin_faq.md#missing-opentest4j-dependency-in-test-framework)
> - [](tools_intellij_platform_gradle_plugin_faq.md#junit5-test-framework-refers-to-junit4)
>
{title="Known Issues"}

> The `Bundled` type should not be used unless it is necessary, like in the case of [Rider](rider.md), as its `test-framework` is not published as an artifact.
>
{style="warning" title="Using Bundled"}

### Plugin Test Frameworks
{#TestFrameworkType-Plugin}

Some plugins offer dedicated test frameworks, for example, `Plugin.Java` when using Java/JVM-related functionality.

| Name                | Coordinates                                                   | Reference       |
|---------------------|---------------------------------------------------------------|-----------------|
| `Plugin.Go`         | `com.jetbrains.intellij.go:go-test-framework`                 | [](goland.md)   |
| `Plugin.JavaScript` | `com.jetbrains.intellij.javascript:javascript-test-framework` | [](webstorm.md) |
| `Plugin.Java`       | `com.jetbrains.intellij.java:java-test-framework`             | [](idea.md)     |
| `Plugin.Maven`      | `com.jetbrains.intellij.maven:maven-test-framework`           |                 |
| `Plugin.ReSharper`  | `com.jetbrains.intellij.resharper:resharper-test-framework`   | [](rider.md)    |
| `Plugin.Ruby`       | `com.jetbrains.intellij.idea:ruby-test-framework`             | [](rubymine.md) |

## `VerificationReportsFormats`
{#VerificationReportsFormats}

[`VerifyPluginTask.VerificationReportsFormats`](%gh-ijpgp-master%/src/main/kotlin/org/jetbrains/intellij/platform/gradle/tasks/VerifyPluginTask.kt)

Enum class describing the type of the results produced by the IntelliJ Plugin Verifier CLI tool run with the [`verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin) task.

| Name       | Description                    |
|------------|--------------------------------|
| `PLAIN`    | Plain text file.               |
| `HTML`     | HTML formatted output file.    |
| `MARKDOWN` | Markdown file.                 |
| `ALL`      | Contains all possible options. |
| `NONE`     | Contains no options.           |

See also:
- [Extension: `intellijPlatform.pluginVerification.verificationReportsFormats`](tools_intellij_platform_gradle_plugin_extension.md#intellijPlatform-pluginVerification-verificationReportsFormats)
- [Tasks: `verifyPlugin.verificationReportsFormats`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin-verificationReportsFormats)


<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Tooltip

<link-summary>UI guidelines on using tooltips.</link-summary>

<tldr>

**Implementation:** [`HelpTooltip`](%gh-ic%/platform/platform-api/src/com/intellij/ide/HelpTooltip.java)

</tldr>

A tooltip shows an action name or provides useful information about an action or a setting.

![](01_top_pic.png){width=174}

## When to use

There are three types of tooltips:

<table style="none">
  <tr>
    <td width="50%">
        <strong>Action </strong>
        <p>Shows an action name or label for icons and unlabeled controls, and a shortcut if available.</p>
    </td>
    <td width="50%">
        <img src="02_regular_tooltip.png" width="218" />
    </td>
  </tr>
  <tr>
    <td>
        <strong>Action help </strong>
        <p>Shows help text for icons and unlabeled controls in addition to an action name or label.</p>
    </td>
    <td>
        <img src="03_action_help_tooltip.png" width="305" />
    </td>
  </tr>
  <tr>
    <td>
        <strong>Help</strong>
        <p>Shows help text for all other controls.</p>
    </td>
    <td>
        <img src="03_help_tooltip.png" width="275" />
    </td>
  </tr>
</table>


All icons and unlabeled controls should have an **Action** or an **Action help** tooltip.

Use **Action help** and **Help** tooltips according to the [Context help](context_help.md) rules.

## How to use

### Required and optional information

Always show the required information in a tooltip:

<table>
  <tr>
  <td width="40%"> Tooltip </td>
  <td width="30%"> Required info </td>
  <td width="30%"> Optional </td></tr>
  <tr>
    <td>
        <p>Action</p>
        <p><img src="08_regular_tooltip.png" width="126"/></p>
    </td>
    <td>
        Action name
    </td>
    <td>
        Shortcut
    </td>
  </tr>
  <tr>
    <td>
        <p>Action help</p>
        <p><img src="08_toolbar_help_tooltip.png" width="300"/></p>
    </td>
    <td>
        <p>Action name</p>
        <p>Help text</p>
    </td>
    <td>
        <p>Shortcut</p>
        <p>Link</p>
    </td>
  </tr>
  <tr>
    <td>
        <p>Help</p>
        <p><img src="08_help_tooltip.png" width="300"/></p>
    </td>
    <td>
        <p>Help text</p>
        <p><format color="#999999">No action name or label because it is already shown in the UI.</format></p>
    </td>
    <td>
        <p>Shortcut</p>
        <p>Link</p>
    </td>
  </tr>
</table>

<!--
<p><strong>Implementation</strong></p>

<p>Action</p>

<code-block lang="java">
new HelpTooltip().setTitle("Commit").setShortcut("⌘K").installOn(component);
</code-block>

<p>Action help</p>

<code-block lang="java">
new HelpTooltip().setTitle("Switch Task").setDescription("Tasks are stored locally only. Connect your issue tracker to link your commits with the corresponding issues.").setShortcut("⌥⇧T").setLink("Managing tasks", ()->{}).installOn(component);
</code-block>

<p>Help</p>

<code-block lang="java">
new HelpTooltip().setDescription("Useful when moving constants (static final fields) to an enum type in cases when the enum type has a constructor with one parameter of the suitable type.").setShortcut("⌘M").setLink("Example", ()->{}).installOn(component);
</code-block>

<p><br/></p>
-->

Show a shortcut if an action or a setting has one. Do not show a single shortcut in a tooltip.

![](09_tooltip_only_incorrect.png){width=230}

Provide a link to a source that can further explain the action or the setting. A link can navigate to a place in the IDE or to an external help article.

| Local link                                  | External link                             |
|---------------------------------------------|-------------------------------------------|
| ![](10_tooltip_local_link.png){width="300"} | ![](10_tooltip_ext_link.png){width="300"} |

Do not show just an action name and a link to a help article. Provide help text so that the user does not need to switch to a web browser.

![](11_link_only_incorrect.png){width=516}

### Text length and formatting

The text width in an action tooltip is not limited. The text width in a help tooltip is limited by 250px.

Show no more than 10 lines of help text. If the text does not fit, leave only the essential information and add a link to a help article.

<format color="Red" style="bold">Incorrect</format>

![](tooltip_long_text_incorrect.png){width=601}

<format color="Green" style="bold">Correct</format>

![](tooltip_long_text_correct.png){width=601}

Text style formatting:

* Avoid using style formatting in the help text. Usually, the text is short and no bold or italics are needed.

  <format color="Red" style="bold">Incorrect</format>

  ![](tooltip_no_styling_incorrect.png){width=461}

  <format color="Green" style="bold">Correct</format>

  ![](tooltip_no_styling_correct.png){width=461}

* Use formatting for code, console commands or parameters. Use HTML tags. Enclosing the text in `<html></html>` tags is not needed.

  ![](tooltip_code_styling.png){width=407 style=block}
  *Editor breadcrumbs*

* Action name, shortcut and link do not allow HTML tagging.

If the help text is longer than 5 lines, separate the text into paragraphs with the `<p>` tag. The `<p>` tag adds vertical space between paragraphs to visually separate them. Do not use the `<br/>` tag as it does not add space.

![](12_tooltip_paragraph.png){width=300}

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
val LONG_TEXT = """A new overloading method will be created with
    the new parameter added to this method definition.<p>
    The method with the old signature will be kept and the call
    to the new method will be added to it. The necessary value
    or expression will be passed to the new method call."""
HelpTooltip().setDescription(LONG_TEXT).installOn(component)
```

</tab>
<tab title="Java" group-key="java">

```java
String LONG_TEXT = "A new overloading method will be created with " +
    "the new parameter added to this method definition.<p>" +
    "The method with the old signature will be kept and the call " +
    "to the new method will be added to it. The necessary value " +
    "or expression will be passed to the new method call.";
new HelpTooltip().setDescription(LONG_TEXT).installOn(component);
```

</tab>
</tabs>

### Writing guidelines

Make the help text [short and descriptive](writing_short.md).

In a help tooltip, do not repeat an action or a setting name in the text.

![](13_tooltip_dont_repeat_setting.png){width=394}

### Question mark icon for help tooltips

Always use the help tooltip with the question mark icon. Without the icon, it is unclear which component has help information.

Always place the question mark icon to the right of the corresponding UI component.

Examples with different controls:

#### Checkbox

![](04_question_icon_tooltip.png){width=543}

#### Tree item

![](05_question_icon_tree.png){width=390}

#### Combo box

![](14_placement_labeled_input.png){width=467}

#### Group header

![](15_placement_group_header.png){width=409}

#### Settings breadcrumbs

![](16_placement_settings_header.png){width=458}

#### Stand-alone button not at the bottom of a dialog

![](07_help_tooltip_button.png){width=476}

**Exception:** do not use the help tooltip with buttons at a dialog’s bottom.
Put the information into the help article that is opened with the question mark button in the bottom left corner.

<format color="Red" style="bold">Incorrect</format>

![](06_help_tooltip_button_incorrect.png){width=372}

## Style

![](tooltip_style.png){width=723}

## Built-in behavior

All tooltips appear on hover (not on click), including the help tooltip with the question mark icon.

All tooltips are hidden when the mouse cursor leaves the area that triggers the tooltip.

If the mouse cursor stays in the tooltip trigger area, tooltips are also hidden after a timeout specified in the table below.

<table>
  <tr>
    <td width="20%">
        <strong>Tooltip</strong>
    </td>
    <td width="40%">
        <strong>Appears after</strong>
    </td>
    <td width="40%">
        <p><strong>Hides after</strong></p>
        <p><format color="#999999">If cursor is in the tooltip trigger area</format></p>
    </td>
  </tr>
  <tr>
    <td>
        Action
    </td>
    <td>
        <p>300 milliseconds</p>
        <p><format color="#999999">ide.tooltip.initialReshowDelay registry key</format></p>
    </td>
    <td>
        <p>10 seconds</p>
        <p><format color="#999999">ide.helptooltip.regular.dismissDelay</format></p>
    </td>
  </tr>
  <tr>
    <td>
        Action help
    </td>
    <td>
    </td>
    <td>
        <p>30 seconds</p>
        <p><format color="#999999">ide.helptooltip.full.dismissDelay</format></p>
    </td>
  </tr>
  <tr>
    <td>
        Help
    </td>
    <td>
    </td>
    <td>
        Never hides
    </td>
  </tr>
</table>


If a tooltip has a link, it is possible to move the mouse cursor over the tooltip. The tooltip does not close automatically when the cursor is over it.

Tooltips are positioned automatically depending on the mouse cursor location.

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Modifying Project View Structure

<link-summary>Modifying Project View Tutorial.</link-summary>

This tutorial is meant to illustrate how the project tree structure view appearance can be modified programmatically.

This topic describes the [treeStructureProvider](%gh-sdk-samples-master%/tree_structure_provider) sample plugin.

The steps below show how to filter out and keep visible only text files and directories in the Project View Panel.

Other use cases include:
- grouping/nesting related entries, e.g., [GUI Designer](https://www.jetbrains.com/help/idea/gui-designer-basics.html) <path>.form</path> file and related bound class ([`FormMergerTreeStructureProvider`](%gh-ic%/plugins/ui-designer/src/com/intellij/uiDesigner/projectView/FormMergerTreeStructureProvider.java)).
- provide additional "nested" nodes, e.g., contents of custom archive file

## Register Custom `TreeStructureProvider`

Add new `com.intellij.treeStructureProvider` extension to the [plugin.xml](%gh-sdk-samples-master%/tree_structure_provider/src/main/resources/META-INF/plugin.xml)

```xml
<extensions defaultExtensionNs="com.intellij">
  <treeStructureProvider implementation="org.intellij.sdk.treeStructureProvider.TextOnlyTreeStructureProvider"/>
</extensions>
```

## Implement Custom `TreeStructureProvider`

To provide custom Structure View behaviour, implement [`TreeStructureProvider`](%gh-ic%/platform/editor-ui-api/src/com/intellij/ide/projectView/TreeStructureProvider.java) with the nodes filtering logic in `modify()` method.
If access to indexes is not required, it can be marked [dumb aware](indexing_and_psi_stubs.md#DumbAwareAPI).

The example below shows how to filter out all the Project View nodes except those which correspond to text files and directories.

```java
```
{src="tree_structure_provider/src/main/java/org/intellij/sdk/treeStructureProvider/TextOnlyTreeStructureProvider.java" include-symbol="TextOnlyTreeStructureProvider"}

## Compile and Run the Plugin

See [Code Samples](code_samples.md) on how to set up and run the plugin.

After going through the steps described above, you can see only text files and directories belonging to a project in the Project View.

![Text Files](text_only.png)
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Trusted Project

<link-summary>Preventing executing malicious code in untrusted projects.</link-summary>

<tldr>

**Product Help:** [Project Security](https://www.jetbrains.com/help/idea/project-security.html)

</tldr>

> This API is available in platform releases 2021.2.4/2021.3.1 and later.
>

When a project is opened in the IDE for the first time, the user will be asked whether they trust the project or not.
If the user chooses to preview the project in the safe mode, no potentially dangerous feature can be executed automatically or unexpectedly.

A plugin can check whether the project is trusted via the Kotlin extension method `Project.isTrusted()` or from Java via static method [`TrustedProjects.isTrusted(Project)`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/impl/TrustedProjects.kt).

A project opened in the safe mode can become trusted afterward: either the user can click on the <control>Trust Project</control> link in the notification panel shown on top of the editor,
or the state can be changed programmatically, for instance, if the user invokes a dangerous action, and that action proposes to switch to the Trusted mode.

Therefore, a plugin can subscribe to changes of the trusted state via [application-level listener](plugin_listeners.md#defining-application-level-listeners) [`TrustStateListener`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/impl/TrustedProjects.kt) to switch on a feature that was disabled in the safe mode.
To do it the plugin should implement `TrustStateListener.onProjectTrusted()`.
Or better, use one of [`TrustedProjects.whenProjectTrusted()`](%gh-ic%/platform/platform-impl/src/com/intellij/ide/impl/TrustedProjects.kt) helper methods accepting a lambda, one for Kotlin and another for Java.

## Is the feature dangerous?

Suppose the feature can potentially execute malicious code, and it is not obvious that this code is going to be executed.
In that case, this feature has to be disabled in the safe mode, and enabling it has to be protected via a [confirmation](misc_swing_components.md#messages).

Samples:
* It is not obvious that opening a folder in the IDE can execute Gradle build script, which in turn can call a malicious code located inside the project => the Gradle import is disabled in the safe mode.
* It is obvious that running or debugging the source code can execute malicious code => it is not necessary to wrap this action with a confirmation.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Typography

<link-summary>UI guidelines on using proper fonts in different contexts.</link-summary>

<tldr>

**Implementation:** [`JBFont`](%gh-ic%/platform/util/ui/src/com/intellij/util/ui/JBFont.java)

</tldr>

## IDE font

The system fonts are used for the IDE user interface by default. The default font sizes are below:

<table style="header-column">
  <tr>
    <td>  macOS  </td>
    <td> SF Pro Text  </td>
    <td> 13 </td>
  </tr>
  <tr>
    <td> Window </td>
    <td> Segoe UI </td>
    <td> 12 </td>
  </tr>
  <tr>
    <td> Linux </td>
    <td> Ubuntu </td>
    <td> 15 </td>
  </tr>
</table>


Users can change the default font size in Settings. If the default font size is changed, other font sizes used in the UI are scaled respectively.

Use the built-in text styles from the table below whenever possible.

> Implementation example for font styles: [`LabelSizeDemoAction`](%gh-ic%/platform/platform-impl/internal/src/com/intellij/internal/LabelSizeDemoAction.kt)
>
{style="note"}

<table>

  <tr>
  <td width="20%"> Font </td>
  <td width="27%"> Font size </td>
  <td width="53%"> Usage Examples </td></tr>

  <tr>
    <td> H0 bold <p><code>JBFont.h0().asBold()</code></p></td>
    <td> Default + 12 </td>
    <td>
        Rich text headers. See the "What’s New" page example below.
    </td>
  </tr>

  <tr>
    <td> H1 bold <p><code>JBFont.h1().asBold()</code></p></td>
    <td> Default + 9 </td>
    <td> </td>
  </tr>

  <tr>
    <td>H2 <p><code>JBFont.h2()</code></p></td>
    <td> Default + 5 </td>
    <td> </td>
  </tr>

  <tr>
    <td> H2 bold <p><code>JBFont.h2().asBold()</code></p></td>
    <td> </td>
    <td>
        Small page header. Examples: Plugin name, GitHub timeline header
    </td>
  </tr>

  <tr>
    <td> H3 <p><code>JBFont.h3()</code></p></td>
    <td> Default + 3 </td>
    <td>
        Accent body text
    </td>
  </tr>

  <tr>
    <td>H3 bold <p><code>JBFont.h3().asBold()</code></p></td>
    <td> </td>
    <td>
        Headers in dialogs with a small number of elements (Customize page on Welcome screen, Login page in Get from VCS dialog)
    </td>
  </tr>

  <tr>
    <td> H4 bold (Default bold) <p> <code>JBFont.h4().asBold()</code></p> <p> <code>JBFont.regular().asBold()</code></p> </td>
    <td> Default </td>
    <td>
        <p>Header in dialogs with a large number of elements (Run configurations dialog), notification header, breadcrumbs in settings, header in navigation popup, accent elements in lists and trees.</p>
        <p>Use <a href="group_header.md">Group header</a> to divide the page on groups, but not to draw too much attention to the headings.</p>
    </td>
  </tr>

  <tr>
    <td> Default <p><code>JBFont.regular()</code></p></td>
    <td> Default </td>
    <td>
        Labels, inputs, links, trees, tables and other controls; text outputs, notifications, shortcuts
    </td>
  </tr>

  <tr>
    <td> Paragraph </td>
    <td>
         <p>Default</p>
         <p>Line height default + 3</p>
    </td>
    <td>
        Multiline description text
    </td>
  </tr>

  <tr>
    <td>Medium <p><code>JBFont.medium()</code></p></td>
    <td>
        <p>macOS: Default - 1</p>
        <p>Win: Default</p>
        <p>Linux: Default - 1</p>
    </td>
    <td>
        Tool window header, navigation bar, editor breadcrumbs, editor tabs (small on macOS)
    </td>
  </tr>

  <tr>
    <td> Medium bold <p><code>JBFont.medium().asBold()</code></p> </td>
    <td> </td>
    <td>
        Module in the navigation bar
    </td>
  </tr>

  <tr>
    <td> Small <p><code>JBFont.small()</code></p> </td>
    <td>
        <p>macOS: Default - 2</p>
        <p>Win: Default</p>
        <p>Linux: Default - 2</p>
    </td>
    <td>
        Status bar, tool window buttons, inline help, help text in tooltips, separators in lists
    </td>
  </tr>
</table>

If none of the built-in sizes work and a custom one is needed, define it as the default size +/- constant value. Do **not** hardcode font sizes.

Use the underlined text style for hovered links.

## Editor font

JetBrains Mono font is used by default for the Editor.

<table>
<tr><td> Name </td>
<td> Font size </td>
<td> Usage </td>  </tr>
  <tr>
    <td> Default </td>
    <td> Default </td>
    <td> Editor </td>
  </tr>
  <tr>
    <td> Small </td>
    <td> Default - 1 </td>
    <td> Line number </td>
  </tr>
</table>

## Colors

The IDE text colors are in the table below. The editor text colors are managed by the editor color theme.

<table>
<tr><td> Name </td>
<td> Light </td>
<td> Dark </td>
<td> Usage </td>
<td> Color key </td>
</tr>
  <tr>
    <td> Default </td>
    <td> 000 </td>
    <td> <format color="#BBBBBB">BBB</format> </td>
    <td>
        Labels, inputs, trees, etc.
    </td>
    <td>
        <code>.foreground</code> keys for various UI controls.
        <p>Examples:</p>
        <ul>
        <li><code>Label.foreground</code></li>
        <li><code>Button.foreground</code></li>
        <li><code>ComboBox.foreground</code></li>
        <li><code>MenuItem.foreground</code></li>
        </ul>
    </td>
  </tr>

  <tr>
    <td> Info panel </td>
    <td> <format color="#808080">808080</format> </td>
    <td> <format color="#8C8C8C">8C8C8C</format> </td>
    <td>
        Inline help, shortcuts
    </td>
    <td>
        <code>Label.infoForeground</code>
    </td>
  </tr>

  <tr>
    <td> Info input </td>
    <td> <format color="#999999">999999</format> </td>
    <td> <format color="#787878">787878</format> </td>
    <td>
        Additional info in lists (paths, counters), placeholder
    </td>
    <td>
        <code>Component.infoForeground</code>
    </td>
  </tr>

  <tr>
    <td> Disabled </td>
    <td> <format color="#8C8C8C">8C8C8C</format> </td>
    <td> <format color="#777777">777777</format> </td>
    <td>
        Disabled labels, disabled links
    </td>
    <td>
        <code>.disabledForeground</code> and <code>.disabledText</code> keys for various UI controls.
        <p>Examples:</p>
        <ul>
            <li><code>Label.disabledForeground</code></li>
            <li><code>ComboBox.disabledForeground</code></li>
            <li><code>MenuItem.disabledForeground</code></li>
            <li><code>CheckBox.disabledText</code></li>
            <li><code>Button.disabledText</code></li>
        </ul>
</td>
  </tr>

  <tr>
    <td> Selected </td>
    <td> FFF on <format color="#62A7DB">BACKGROUND</format> </td>
    <td> FFF on <format color="#62A7DB">BACKGROUND</format> </td>
    <td>
        Selected text
    </td>
    <td>
        <code>.selectionForeground</code> keys for various UI controls.
        <p>Examples:</p>
        <ul>
            <li><code>MenuItem.selectionForeground</code></li>
            <li><code>Table.selectionForeground</code></li>
        </ul>
    </td>
  </tr>

  <tr>
    <td> Link </td>
    <td> <format color="#2470B3">2470B3</format> </td>
    <td> <format color="#589DF6">589DF6</format> </td>
    <td>
        Links
    </td>
    <td>
        Use the component <code>LinkLabel</code>
        <p>Color keys:</p>
        <ul>
            <li><code>Link.activeForeground</code></li>
            <li><code>Link.hoverForeground</code></li>
            <li><code>Link.pressedForeground</code></li>
            <li><code>Link.visitedForeground</code></li>
        </ul>
    </td>
  </tr>

  <tr>
    <td> Error </td>
    <td> <format color="#C7222D">C7222D</format> </td>
    <td> <format color="#FF5261">FF5261</format> </td>
    <td>
        Inline errors text
    </td>
    <td>
        <code>Label.errorForeground</code>
    </td>
  </tr>
</table>

## Examples

What’s New page that appears in the Editor tab:

![](whats_new.png){width=802}

Plugin page in the Settings dialog:

![](plugins.png){width=439}

Log in to GitHub page in the dialog:

![](github.png){width=587}

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# UAST – Unified Abstract Syntax Tree

<link-summary>Handle different JVM languages syntax trees with a single implementation.</link-summary>

UAST (Unified Abstract Syntax Tree) is an abstraction layer on the [PSI](psi_elements.md) of different programming languages targeting the JVM (Java Virtual Machine).
It provides a unified API for working with common language elements like classes and method declarations, literal values, and control flow operators.

Different JVM languages have their own [PSI](psi_elements.md), but many IDE features like inspections, gutter markers, reference injection, and many others
work the same way for all these languages.
Using UAST allows providing features that will work across all [supported JVM languages](#which-languages-are-supported) using a single implementation.

Presentation [Writing IntelliJ Plugins for Kotlin](https://www.youtube.com/watch?v=j2tvi4GbOr4) offers a thorough overview of using UAST in real-world scenarios.
See also the [AST/UAST](https://googlesamples.github.io/android-custom-lint-rules/api-guide.md.html#astanalysis) section from the _Android Lint API Guide_.

### When should I use UAST?

For plugins, that should work for all JVM languages in the same way.

Some known examples are:
* [Spring Framework](spring_api.md)
* [Android Studio](android_studio.md)
* [Plugin DevKit](%gh-ic%/plugins/devkit/devkit-core)

### Which languages are supported?

* Java: full support
* Kotlin: full support
* Scala: beta, but full support
* Groovy: declarations only, method bodies not supported

### What about modifying PSI?

UAST is a read-only API.
There are experimental [`UastCodeGenerationPlugin`](%gh-ic%/uast/uast-common-ide/src/org/jetbrains/uast/generate/UastCodeGenerationPlugin.kt) and [`JvmElementActionsFactory`](%gh-ic%/java/java-analysis-api/src/com/intellij/lang/jvm/actions/JvmElementActionsFactory.kt) classes, but they are currently not recommended for external usage.

## Working with UAST

The base element of UAST is [`UElement`](%gh-ic%/uast/uast-common/src/org/jetbrains/uast/baseElements/UElement.kt).
All common base sub-interfaces are located in the [declarations](%gh-ic%/uast/uast-common/src/org/jetbrains/uast/declarations) and [expressions](%gh-ic%/uast/uast-common/src/org/jetbrains/uast/expressions) directories of the **uast** module.

All these sub-interfaces provide methods to get the information about common syntax elements:
[`UClass`](%gh-ic%/uast/uast-common/src/org/jetbrains/uast/declarations/UClass.kt) about class declarations, [`UIfExpression`](%gh-ic%/uast/uast-common/src/org/jetbrains/uast/controlStructures/UIfExpression.kt) about conditional expressions, and so on.

### PSI to UAST Conversion

To obtain UAST for given `PsiElement` of one of supported languages, use [`UastFacade`](%gh-ic%/uast/uast-common/src/org/jetbrains/uast/UastContext.kt) class or [`UastContextKt.toUElement()`](%gh-ic%/uast/uast-common/src/org/jetbrains/uast/UastContext.kt):

<tabs group="languages">
<tab title="Java" group-key="java">

```java
UastContextKt.toUElement(element);
```

</tab>
<tab title="Kotlin" group-key="kotlin">

```kotlin
element.toUElement()
```

</tab>
</tabs>

To convert `PsiElement` to the specific `UElement`, use one of the following approaches:

- for simple conversion:

  <tabs group="languages">
  <tab title="Java" group-key="java">

  ```java
  UastContextKt.toUElement(element, UCallExpression.class);
  ```

  </tab>
  <tab title="Kotlin" group-key="kotlin">

  ```kotlin
  element.toUElement(UCallExpression::class.java)
  ```

  </tab>
  </tabs>

- for conversion to one of different given options:

  <tabs group="languages">
  <tab title="Java" group-key="java">

  ```java
  UastFacade.INSTANCE.convertElementWithParent(element,
      new Class[]{UInjectionHost.class, UReferenceExpression.class});
  ```

  </tab>
  <tab title="Kotlin" group-key="kotlin">

  ```kotlin
  UastFacade.convertElementWithParent(element,
      UInjectionHost::class.java, UReferenceExpression::class.java)
  ```

  </tab>
  </tabs>

- in some cases, `PsiElement` could represent several `UElement`s.
  For instance, the parameter of a primary constructor in Kotlin is `UField` and `UParameter` at the same time.
  When needing all options, use:

  <tabs group="languages">
  <tab title="Java" group-key="java">

  ```java
  UastFacade.INSTANCE.convertToAlternatives(element,
      new Class[]{UField.class, UParameter.class});
  ```

  </tab>
  <tab title="Kotlin" group-key="kotlin">

  ```kotlin
  UastFacade.convertToAlternatives(element,
      UField::class.java, UParameter::class.java)
  ```

  </tab>
  </tabs>

> It is always better to convert to the specific type of `UElement`, rather than to convert without type and then cast to the specific type:
> * Because of performance: `toUElement()` with type is fail-fast
> * Because of possibly getting different results in some cases: conversion with type is more predictable
>
{style="note"}

### UAST to PSI Conversion

Sometimes it's required to get from the `UElement` back to sources of the underlying language.
For that purpose, `UElement#sourcePsi` property returns the corresponding `PsiElement` of the original language.

The `sourcePsi` is a "physical" `PsiElement`, and it is mostly used for getting text ranges in the original file (e.g., for highlighting).
Avoid casting the `sourcePsi` to specific classes because it means falling back from the UAST abstraction to the language-specific PSI.
Some `UElement` are "virtual" and thus do not have `sourcePsi`.
For some `UElement`, the `sourcePsi` could be different from the element from which the `UElement` was obtained.

Also, there is a `UElement#javaPsi` property that returns a "Java-like" `PsiElement`.
It is a "fake" `PsiElement` to make different JVM languages emulate Java language to keep compatibility with Java-API.
For instance, when calling `MethodReferencesSearch.search(PsiMethod)`, only Java natively provides `PsiMethod`;
other JVM languages thus provide a "fake" `PsiMethod` via `UMethod#javaPsi`.

Note that `UElement#javaPsi` is physical for Java only.
Thus `UElement#sourcePsi` should be used to obtain text-range or an anchor element for inspection warnings/gutter marker placement.

In short:

`sourcePsi`:

 * is physical: represents a real existing `PsiElement` in the sources of the original language
 * can be used for highlighting, PSI modifications, creating smart-pointers, etc.
 * should not be cast unless absolutely required (for instance, handling a language-specific case)

`javaPsi`:

 * should be used only as a representation of JVM-visible declarations: `PsiClass`, `PsiMethod`, `PsiField`
   for getting their names, types, parameters, etc., or to pass them to methods that accept Java-PSI declarations
 * not guaranteed to be physical: could not exist in sources
 * is not modifiable: calling modification methods could throw exceptions for non-Java languages

Note: both `sourcePsi` and `javaPsi` can be [converted](#psi-to-uast-conversion) back to the `UElement`.

## UAST Visitors

In UAST there is no unified way to get _children_ of the `UElement` (though it is possible to get its parent via `UElement#uastParent`).
Thus, the only way to walk the UAST as a tree is passing the
[`UastVisitor`](%gh-ic%/uast/uast-common/src/org/jetbrains/uast/visitor/UastVisitor.kt) to `UElement.accept()` method.

Note: there is a convention in UAST-visitors that a visitor will not be passed to children if `visit*()` returns `true`.
Otherwise, `UastVisitor` will continue the walk into depth.

`UastVisitor` can be converted to [`PsiElementVisitor`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiElementVisitor.java) using [`UastVisitorAdapter`](%gh-ic%/java/java-analysis-api/src/com/intellij/uast/UastVisitorAdapter.java)
or [`UastHintedVisitorAdapter`](%gh-ic%/java/java-analysis-api/src/com/intellij/uast/UastHintedVisitorAdapter.kt).
The latter is preferable as it offers better performance and more predictable results.

As a general rule, it's recommended to abstain from using `UastVisitor`: if you don't need to process many `UElement`s of different types and if the structure of elements is not very important, then it is better to walk the PSI-tree using `PsiElementVisitor` and [convert](#psi-to-uast-conversion) each `PsiElement` to its corresponding UAST explicitly via `UastContext.toUElement()`.

See also inspection <control>Plugin DevKit | Code | 'UastHintedVisitorAdapter' hints problems</control> (2024.2+).

## UAST Performance Hints

UAST is not a zero-cost abstraction: [some methods](https://youtrack.jetbrains.com/issue/KT-29856) could be unexpectedly expensive for some languages,
so be careful with optimizations because it could yield the opposite effect.

[Converting](#psi-to-uast-conversion) to `UElement` also could require resolve for some languages in some cases, again, possibly unexpectedly expensive.
Converting to UAST should be performed only when necessary.
For instance, converting the whole `PsiFile` to `UFile` and then walk it solely to collect `UMethod` declarations is inefficient.
Instead, walk the `PsiFile` and convert each encountered matching element to `UMethod` explicitly.

UAST is lazy when you pass visitors to `UElement.accept()` or getting `UElement#uastParent`.

For really hard performance optimisation consider using `UastLanguagePlugin.getPossiblePsiSourceTypes()` to pre-filter `PsiElement`s before converting them to UAST.

## UAST Caveats

### `ULiteralExpression` should not be used for strings

[`ULiteralExpression`](%gh-ic%/uast/uast-common/src/org/jetbrains/uast/expressions/ULiteralExpression.kt) represents
literal values like numbers, booleans, and string.
Although string values are also literals, `ULiteralExpression` is not very handy to work with them.
For instance, it doesn't handle Kotlin's string interpolations.
To process string literals when evaluating their value or to perform language injection, use [`UInjectionHost`](%gh-ic%/uast/uast-common/src/org/jetbrains/uast/expressions/UInjectionHost.kt) instead.

### `sourcePsi` and `javaPsi`, `psi` and `UElement` as PSI

For historical reasons, the relations between `UElement` and `PsiElement` are complicated.
Some `UElement`s implement `PsiElement`; for instance, `UMethod` implements `PsiMethod`.
It is strongly discouraged to use `UElement` as `PsiElement`, and Plugin DevKit provides a corresponding inspection (<control>Plugin DevKit | Code | UElement as PsiElement usage</control>).
This _"implements"_ is considered deprecated and might be removed in the future.

Also, there is `UElement#psi` property; it returns the same element as `javaPsi` or the `sourcePsi`.
As it is hard to guess what will be returned, it is also deprecated.

Thus `sourcePsi` and `javaPsi` should be the only ways to obtain `PsiElement` from `UElement`. See the [corresponding section](#uast-to-psi-conversion).

### Using UAST or PSI

UAST provides a unified way to represent JVM compatible declarations via `UMethod`, `UField`, `UClass`, and so on.
But at the same time, all JVM language plugins implement `PsiMethod`, `PsiClass`, and so on to be compatible with Java.
These implementations could be [obtained](#uast-to-psi-conversion) via `UElement#javaPsi` property.

So the question is: "What should I use to represent the Java-declaration in my code?".
The answer is: We encourage using `PsiMethod`, `PsiClass` as common interfaces for Java-declarations regardless of the JVM language
and discourage exposing the UAST interfaces in the API.

Note: for method bodies, there are no such alternatives, so exposing, for instance, the `UExpression` is not discouraged.
Still, consider exposing the raw `PsiElement` instead.

### UAST/PSI Tree Structure Mismatch

UAST is an abstraction level on top of PSI of different languages and tries to build a unified tree (see [Inspecting UAST Tree](#inspecting-uast-tree)).
It leads to the fact that the tree structure could seriously diverge between UAST and original language,
so no ancestor-descendant relation preserving is guaranteed.

For instance, the results of:

```kotlin
generateSequence(uElement, UElement::uastParent).mapNotNull { it.sourcePsi }
generateSequence(uElement.sourcePsi) { it.parent }
```

could be different, not only in the number of elements, but also in their order.

## Using UAST in Plugins

To use UAST in your plugin, add a [dependency](plugin_dependencies.md) on bundled Java plugin (`com.intellij.java`).

### Language Extensions

To register [extensions](plugin_extensions.md) applicable to UAST, specify `language="UAST"` in their registration in <path>[plugin.xml](plugin_configuration_file.md)</path>.

### Inspecting UAST Tree

To inspect UAST Tree, invoke [internal action](enabling_internal.md) <ui-path>Tools | Internal Actions | UAST | Dump UAST Tree (By Each PsiElement)</ui-path>.

### Inspections

Use [`AbstractBaseUastLocalInspectionTool`](%gh-ic%/java/java-analysis-api/src/com/intellij/codeInspection/AbstractBaseUastLocalInspectionTool.java) as base class and specify `language="UAST"` in registration.
If inspection targets only a subset of default types (`UFile`, `UClass`, `UField`, and `UMethod`), specify `UElement`s as hints in overloaded constructor to improve performance.

Use [`ProblemsHolder.registerUProblem()`](%gh-ic%/java/java-analysis-api/src/com/intellij/codeInspection/problemHolderUtil.kt) extension functions for registering problems (2023.2).

### Line Marker

Use `UastUtils.getUParentForIdentifier()` or `UAnnotationUtils.getIdentifierAnnotationOwner()` for annotations to obtain suitable "identifier" element (see [Line Marker Provider](line_marker_provider.md) for details).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# User Interface FAQ

<link-summary>UI-related FAQs and utilities.</link-summary>

<include from="user_interface_components.md" element-id="inspectingExistingUI"/>

## Useful Classes

- Package [`com.intellij.ui`](%gh-ic%/platform/util/ui/src/com/intellij/ui/)
- Package [`com.intellij.util.ui`](%gh-ic%/platform/util/ui/src/com/intellij/util/ui/)

## Colors

Always use [`JBColor`](%gh-ic%/platform/util/ui/src/com/intellij/ui/JBColor.java) instead of plain `java.awt.Color`
(highlighted via inspection <control>Plugin DevKit | Code | Use Darcula aware JBColor</control>).
Custom colors must be retrieved via `JBColor.namedColor()` set by the current [Theme](themes_getting_started.md).
See [](themes_metadata.md) on how to expose corresponding metadata.

If it's needed to retrieve a color from one place and use it in another, do not just retrieve once and use the retrieved value.
Instead, use `JBColor.lazy()` and pass in a lambda expression to retrieve the color.
This lambda expression needs to be fast and safe enough, as it will be called every time the color is retrieved, for example, for painting.
Following this approach ensures that the color will be properly updated if it's changed at the source, for example, due to a theme or scheme change.

Generic UI colors (e.g., for drawing borders) can be accessed via [`UIUtil`](%gh-ic%/platform/util/ui/src/com/intellij/util/ui/UIUtil.java)
and [`JBUI`](%gh-ic%/platform/util/ui/src/com/intellij/util/ui/JBUI.java).
A number of hardcoded colors is defined in `JBColor`, [`Gray`](%gh-ic%/platform/util/ui/src/com/intellij/ui/Gray.java), and [`LightColors`](%gh-ic%/platform/util/ui/src/com/intellij/ui/LightColors.java)

[`ColorUtil`](%gh-ic%/platform/util/ui/src/com/intellij/ui/ColorUtil.java) allows tuning existing colors.

## Text

<tldr>

**UI Guidelines:** [](data_formats.md)

</tldr>

Use [`NaturalComparator`](%gh-ic%/platform/util/base/src/com/intellij/openapi/util/text/NaturalComparator.java) for "natural" sorting of items.

[`StringUtil`](%gh-ic%/platform/util/src/com/intellij/openapi/util/text/StringUtil.java) contains a number of useful methods for manipulating text for UI usage:

- `unpluralize()/pluralize()` using English rules
- `formatDuration()` to format duration: _2 m 3 s 456 ms_
- `formatFileSize()` to format filesize: _1.23 KB_
- `escapeLineBreak()` and related methods to escape special characters
- `shortenTextWithEllipsis()` and `shortenPathWithEllipsis()` to produce abbreviated UI texts ending with '&#8230;'
- `quote()` and `unquoteString()` to wrap values: _Usages of "\$value\$": 218 found_

See [](internationalization.md) for information about internationalizing plugins.

See [`NlsMessages`](%gh-ic%/platform/ide-core-impl/src/com/intellij/ide/nls/NlsMessages.java) to produce localized messages.

## "Recently Used" Entries

To store and retrieve values for *Recently Used* entries (e.g., filter values), use
[`RecentsManager`](%gh-ic%/platform/platform-impl/src/com/intellij/ui/RecentsManager.java).

## Current Theme: Dark or Bright?

To determine the current [Theme](themes_getting_started.md)'s style, use [`JBColor.isBright()`](%gh-ic%/platform/util/ui/src/com/intellij/ui/JBColor.java).

## Borders and Insets

<tldr>

**UI Guidelines:** [](layout.md)

</tldr>

Always create borders and insets via factory methods from [`JBUI.Borders`](%gh-ic%/platform/util/ui/src/com/intellij/util/ui/JBUI.java) and [`JBUI.Insets`](%gh-ic%/platform/util/ui/src/com/intellij/util/ui/JBUI.java), which create DPI-aware instances.
Using standard DPI-agnostic instances (reported by inspection <ui-path>Plugin DevKit | Code | Use DPI-aware borders</ui-path> and <ui-path>Plugin DevKit | Code | Use DPI-aware insets</ui-path>)
can result in UI layout problems.

If you use DPI-aware insets in an empty border (`JBUI.Borders.empty()`), then the insets will be updated automatically, for example, if scaling is changed because the <ui-path>IDE Zoom</ui-path> action was performed or for any other reason.
If you use the insets elsewhere, you need to manually call `JBInsets.update()` in your component's `updateUI()` method to update the insets accordingly.

## Manipulating Icons

Use [`IconUtil`](%gh-ic%/platform/core-ui/src/util/IconUtil.kt) to scale/colorize/darken/desaturate existing [icons](icons.md) as needed.

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

# Useful Links

<link-summary>Useful tooling, plugins, and repositories.</link-summary>

The following links represent useful resources for working with the IntelliJ Platform and creating plugins.

### Tooling

> Use [Writerside](https://www.jetbrains.com/writerside/) to create and publish documentation for your plugin.
>
{style="note"}

* [IDE Settings, Caches, Logs, and Plugins](https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-caches-plugins-and-logs)
* [](internal_actions_intro.md)
* [IntelliJ Plugin Verifier](https://github.com/JetBrains/intellij-plugin-verifier) (see also [](verifying_plugin_compatibility.md))
* [IntelliJ Platform Explorer](https://jb.gg/ipe) ([Blog post](https://blog.jetbrains.com/platform/2020/12/intellij-platform-explorer-get-to-the-extension-point/))
* [Figma UI Kit](UI_kit.md) ([Blog post](https://blog.jetbrains.com/idea/2021/05/intellij-platform-ui-kit/))

### Plugins

* [Plugin DevKit](https://plugins.jetbrains.com/plugin/22851-plugin-devkit)
* [PsiViewer](https://plugins.jetbrains.com/plugin/227-psiviewer)
* [Grammar-Kit](https://plugins.jetbrains.com/plugin/6606-grammar-kit) & [Grammar-Kit Folder](https://plugins.jetbrains.com/plugin/12983-grammar-kit-folder)
* [Index Viewer](https://plugins.jetbrains.com/plugin/13029-index-viewer/)
* [IDE Perf](https://plugins.jetbrains.com/plugin/15104-ide-perf)
* [Thread Access Info](https://plugins.jetbrains.com/plugin/16815-thread-access-info)

### Repositories

* [IntelliJ Platform SDK Documentation](https://github.com/JetBrains/intellij-sdk-docs) & [IntelliJ Platform SDK Code Samples](https://github.com/JetBrains/intellij-sdk-code-samples)
* [IntelliJ Platform Plugin Template](https://github.com/JetBrains/intellij-platform-plugin-template)
* [IntelliJ Community Edition](https://github.com/JetBrains/intellij-community)
* [IntelliJ Plugins](https://github.com/JetBrains/intellij-plugins)
* [Open Source Plugins on JetBrains Marketplace](https://plugins.jetbrains.com/search?orderBy=name&shouldHaveSource=true)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# User Interface Components

<link-summary>Introduction to UI Components provided by IntelliJ Platform.</link-summary>

<tldr>

**UI Guidelines:** [Overview](ui_guidelines_welcome.topic)

</tldr>

The IntelliJ Platform includes a large number of custom [Swing](https://en.wikipedia.org/wiki/Swing_(Java)) components.
Using those components in your plugins will ensure that your plugin looks and works consistently with the UI of the rest of the IDE, and can often reduce the code size compared to using the default Swing components.
Use inspection <ui-path>Plugin DevKit | Code | Undesirable class usage</ui-path> to highlight replacement components provided by the platform.

<snippet id="inspectingExistingUI">

> Use [UI Inspector](internal_ui_inspector.md) to locate the underlying Swing component implementation or to inspect an existing UI at runtime.
>
{title="Inspecting existing UI"}

</snippet>

> UI forms like [](dialog_wrapper.md) or [](settings.md) should use [Kotlin UI DSL](kotlin_ui_dsl_version_2.md) (IntelliJ Platform 2021.3+).
>
> Using _UI Designer_ plugin with Kotlin is [not supported](https://youtrack.jetbrains.com/issue/KTIJ-791).
>
{style="note"}

Please refer to [](writing_short.md) in UI Guidelines on writing UI-related texts.

See [](UI_kit.md) when using [Figma](https://www.figma.com) to design UI.

The following components are particularly noteworthy:

* Menus and toolbars are built using [](basic_action_system.md)
* [](tool_windows.md)
* [](dialog_wrapper.md)
* [](popups.md)
* [](notifications.md)
* [](file_and_class_choosers.md)
* [](editor_components.md)
* [](lists_and_trees.md)
* [](status_bar_widgets.md)
* Tables (TableView) (TBD)
* Drag & Drop Helpers (TBD)
* [](misc_swing_components.md)

See also [](ui_faq.md).

<include from="snippets.md" element-id="missingContent"/>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Using File Templates Programmatically

<link-summary>Using file templates programmatically from actions and other IDE features.</link-summary>

File templates provided by a plugin can be used during new file creation, in code intention actions, or other plugin features.
They can be accessed with the
[`FileTemplateManager`](%gh-ic%/platform/ide-core-impl/src/com/intellij/ide/fileTemplates/FileTemplateManager.java)
service providing methods returning all or single file templates from a given category.
For example, to obtain a template from the <control>[Code](providing_file_templates.md#code)</control> category, pass its name to the `getCodeTemplate()` method (notice the lack of the <path>.ft</path> extension):

```java
FileTemplate template = FileTemplateManager.getInstance(project)
    .getCodeTemplate("Test Class.java");
```

To render a template content, prepare and pass `Properties` object to the `getText()` method:

```java
Properties properties = new Properties();
properties.setProperty("PROP1", value1);
properties.setProperty("PROP2", value2);
String renderedText = template.getText(properties);
```

## Creating New Files from Template

The common use case for file templates is creating new files with the initial content specific to a language or framework supported by the plugin.
File templates assigned to the <control>[Files](providing_file_templates.md#files)</control> category are automatically available in the <ui-path>File | New</ui-path> action group.
Sometimes, creating a file from a given template in a specific project place doesn't make sense, or a template requires some additional properties for its content.
It is possible to control a file template's visibility and its available properties using
[`CreateFromTemplateHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/fileTemplates/CreateFromTemplateHandler.java)
implementation registered in the `com.intellij.createFromTemplateHandler` EP.

**Example:**
[`JavaCreateFromTemplateHandler`](%gh-ic%/java/java-impl/src/com/intellij/ide/fileTemplates/JavaCreateFromTemplateHandler.java)

### Exposing File Templates from the Other Category

File templates from the <control>[Other](providing_file_templates.md#other)</control> category are not exposed by default.
To make them available in the UI, a plugin has to implement and register an action.
The easiest way to do it is by extending
[`CreateFileFromTemplateAction`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/CreateFileFromTemplateAction.java)
base class which contains standard implementations of necessary methods.
It allows customizing the action by providing an action name, icon, overriding methods creating dialog, and others.
Example action:

```java
public class CreateMyClassAction extends CreateFileFromTemplateAction {

  @Override
  protected void buildDialog(Project project, PsiDirectory directory,
      CreateFileFromTemplateDialog.Builder builder) {
    builder
    .setTitle("New My File")
    .addKind("Class", MyIcons.CLASS_ICON, "My Class");
  }

  @Override
  protected String getActionName(PsiDirectory directory,
      @NotNull String newName, String templateName) {
    return "Create My Class: " + newName;
  }
}
```

The new action should be registered under the `NewGroup` group, e.g:

```xml
<actions>
  <action id="Create.MyClass" class="com.example.CreateMyClassAction" icon="MyIcons.CLASS_ICON">
    <add-to-group group-id="NewGroup"/>
  </action>
</actions>
```

Action presentation texts should be added to the [resource bundle defined in plugin.xml](plugin_configuration_file.md#idea-plugin__resource-bundle) according to the rules described in [](basic_action_system.md#localizing-actions-and-groups):

```
action.Create.MyClass.text=My Class
action.Create.MyClass.description=Creates new class
```

### Custom "Create File From Template" Actions

In some cases, the default mechanism for creating files from templates is insufficient.
Consider a language that defines multiple types of core entities, e.g., in the Java language, the following entities can be created: Class, Interface, Record, Enum, and Annotation.

Having all of those items in the <ui-path>File | New</ui-path> action group may overwhelm users with the number of options to choose.
It is more user-friendly to provide a single <ui-path>File | New | Java Class</ui-path> action and let users choose a specific entity type in the creation dialog:

![Create Java class](new_java_class_popup.png){width="296" border-effect="line"}

This can be achieved by placing templates in the <control>[Internal](providing_file_templates.md#internal)</control> category, so they are not picked up by the default mechanism, and then registering a custom
[`CreateFileFromTemplateAction`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/CreateFileFromTemplateAction.java)
implementation as described in the [](#exposing-file-templates-from-the-other-category) section.
To provide a list of selectable entity types, the action should provide a custom dialog with multiple file kinds for every template type, e.g.:

```java
@Override
protected void buildDialog(Project project, PsiDirectory directory,
    CreateFileFromTemplateDialog.Builder builder) {
  builder
    .setTitle("My File")
    .addKind("Class", MyIcons.CLASS_ICON, "My Class")
    .addKind("Record", MyIcons.RECORD_ICON, "My Record")
    .addKind("Enum", MyIcons.ENUM_ICON, "My Enum");
}
```

As file templates are placed in the <path>fileTemplates/internal</path> directory, they are not listed in the <ui-path>Settings | Editor | File and Code Templates</ui-path> settings page, and users can't adjust them to their needs.
Internal templates can be exposed in the <control>Files</control> category by additionally registering them via the `com.intellij.internalFileTemplate` EP, e.g.:

```xml
<internalFileTemplate name="My Record"/>
```

**Example:**
[`NewKotlinFileAction`](%gh-ic%/plugins/kotlin/kotlin.ide/src/org/jetbrains/kotlin/idea/actions/NewKotlinFileAction.kt) for Kotlin files creation action.

## Improving "Save File as Template…" Action

Some languages or frameworks may require creating many custom file templates directly in the IDE with <ui-path>File | Save File as Template…</ui-path> action, including plugin developers creating templates, e.g., for Java language to support a specific framework.
Adjusting created templates manually by replacing dynamic parts with properties can be tedious.
It is possible to speed up this process by replacing known elements like package or class names with template properties placeholder.
It can be achieved by implementing the
[`SaveFileAsTemplateHandler`](%gh-ic%/platform/lang-impl/src/com/intellij/ide/actions/SaveFileAsTemplateHandler.java)
and registering it via the `com.intellij.saveFileAsTemplateHandler` EP.

**Example:**
[`SaveJavaAsTemplateHandler`](%gh-ic%/java/java-impl/src/com/intellij/ide/fileTemplates/SaveJavaAsTemplateHandler.java) replacing existing class and package names with `${NAME}` and `${PACKAGE_NAME}` properties placeholders respectively.
<!-- Copyright 2000-2025 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Configuring Kotlin Support

<link-summary>Advantages and configuration required for developing a plugin in Kotlin.</link-summary>

<tldr>

**Homepage**: [Kotlin](https://kotlinlang.org)

**Project Template**: [](plugin_github_template.md)

</tldr>

<link-summary>Developing plugins using or targeting the Kotlin programming language.</link-summary>

This page describes developing plugins using the [Kotlin](https://kotlinlang.org) programming language.

> To implement a plugin _operating_ on Kotlin code ([PSI](psi.md)) in the IDE, see [](idea.md#kotlin).
>
{title="Operating on Kotlin code"}

## Advantages of Developing a Plugin in Kotlin

Using Kotlin to write plugins for the IntelliJ Platform is very similar to writing plugins in Java.
Existing Java classes can be converted to their Kotlin equivalents by using the [J2K converter](https://kotlinlang.org/docs/mixing-java-kotlin-intellij.html#converting-an-existing-java-file-to-kotlin-with-j2k) (part of the Kotlin plugin).

In addition to [null safety](https://kotlinlang.org/docs/null-safety.html), [type-safe builders](https://kotlinlang.org/docs/type-safe-builders.html), and [](kotlin_coroutines.md), the Kotlin language offers many convenient features for plugin development,
which make plugins easier to read and simpler to maintain.
Much like [Kotlin for Android](https://kotlinlang.org/docs/android-overview.html), the IntelliJ Platform makes extensive use of callbacks, which are straightforward to express as [lambdas](https://kotlinlang.org/docs/lambdas.html) in Kotlin.

Kotlin classes can be mixed in a project with existing Java code.
This might come in handy when certain APIs require the use of mentioned Kotlin Coroutines.

### Adding Extensions

Likewise, it is possible to customize the behavior of internal classes in the IntelliJ Platform using [extensions](https://kotlinlang.org/docs/extensions.html).
For example, it is common practice to [guard logging statements](https://www.slf4j.org/faq.html#logging_performance) to avoid the cost of parameter construction, leading to the following ceremony when using the log:

```java
if (logger.isDebugEnabled()) {
  logger.debug("..."+expensiveComputation());
}
```

We can achieve the same result more succinctly in Kotlin by declaring the following extension method:

```kotlin
inline fun Logger.debug(lazyMessage: () -> String) {
  if (isDebugEnabled) {
    debug(lazyMessage())
  }
}
```

Now we can directly write:

```kotlin
logger.debug { "..." + expensiveComputation() }
```

to receive all the benefits of lightweight logging while reducing the code verbosity.

With practice, you will be able to recognize many idioms in the IntelliJ Platform that can be simplified with Kotlin.

### UI Forms in Kotlin

The IntelliJ Platform provides a [type-safe DSL](kotlin_ui_dsl_version_2.md) to build UI forms declaratively.

> Using _UI Designer_ plugin with Kotlin is [not supported](https://youtrack.jetbrains.com/issue/KTIJ-791).
>

### Kotlin Coroutines

[](kotlin_coroutines.md) are a lightweight and convenient alternative to threads with many [advantages](kotlin_coroutines.md#coroutines-advantages).

## Adding Kotlin Support

> The [](plugin_github_template.md) provides a preconfigured project using Kotlin.

IntelliJ IDEA bundles the necessary Kotlin IDE plugin, requiring no further configuration.
For detailed instructions, refer to the [Kotlin documentation](https://kotlinlang.org/docs/getting-started.html).

Using Kotlin 2.x is recommended for plugin targeting 2024.3 or later.

### Kotlin Gradle Plugin

Adding Kotlin source files compilation support to a Gradle-based project requires adding and configuring the [Kotlin JVM Gradle plugin](https://kotlinlang.org/docs/gradle.html#targeting-the-jvm).

### Kotlin Standard Library (stdlib)

{id="kotlin-standard-library"}

Starting with Kotlin 1.4, a dependency on the standard library _stdlib_ is added automatically ([API Docs](https://kotlinlang.org/api/latest/jvm/stdlib/)).
In nearly all cases, it is _not necessary_ to include it in the plugin distribution as the platform already bundles it.

To opt out, add this line in <path>gradle.properties</path>:

```
kotlin.stdlib.default.dependency = false
```

#### Gradle check

The presence of this Gradle property is checked with the corresponding Gradle task:

<tabs>
<tab title="IntelliJ Platform Gradle Plugin (2.x)">

[`verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPluginProjectConfiguration) task

</tab>
<tab title="Gradle IntelliJ Plugin (1.x)">

[`verifyPluginConfiguration`](tools_gradle_intellij_plugin.md#tasks-verifypluginconfiguration) task

</tab>
</tabs>

If the property is not present, a warning will be reported during the plugin configuration verification.
To bundle _stdlib_ in the plugin distribution, specify explicitly `kotlin.stdlib.default.dependency = true`.

#### stdlib – Miscellaneous

If a plugin supports [multiple platform versions](build_number_ranges.md), it must either target the lowest bundled _stdlib_ version (see table below)
or the specific version must be [provided in plugin distribution](plugin_content.md#plugin-with-dependencies).

See [Dependency on the standard library](https://kotlinlang.org/docs/gradle.html#dependency-on-the-standard-library) for more details.

> If you need to add the Kotlin Standard Library to your **test project** dependencies, see the [](testing_faq.md#how-to-test-a-jvm-language) section.
>
{title="Adding stdlib in tests"}

| IntelliJ Platform version (latest update) | Bundled _stdlib_ version |
|-------------------------------------------|--------------------------|
| 2025.1 (EAP)                              | 2.1.10                   |
| 2024.3                                    | 2.0.21                   |
| 2024.2                                    | 1.9.24                   |
| 2024.1                                    | 1.9.22                   |
| 2023.3                                    | 1.9.21                   |
| 2023.2                                    | 1.8.20                   |
| 2023.1                                    | 1.8.0                    |

#### Earlier Versions

{collapsible="true"}

| IntelliJ Platform version (latest update) | Bundled _stdlib_ version |
|-------------------------------------------|--------------------------|
| 2022.3                                    | 1.7.22                   |
| 2022.2                                    | 1.6.21                   |
| 2022.1                                    | 1.6.10                   |

See [here](https://www.jetbrains.com/legal/third-party-software/) for earlier versions.

### Kotlin Coroutines Libraries (kotlinx.coroutines)

{id="coroutinesLibraries"}

Plugins _must_ always use the bundled library from the target IDE and not bundle their own version.
Make sure it is not added via transitive dependencies either
(see [View and Debug Dependencies](https://docs.gradle.org/current/userguide/viewing_debugging_dependencies.html) in the Gradle user guide).

Since 2024.2, a custom [fork](https://github.com/JetBrains/intellij-deps-kotlinx.coroutines) with additional patches is bundled.

See [](kotlin_coroutines.md) on how to use them in plugins.

| IntelliJ Platform version | Bundled _kotlinx-coroutines_ version |
|---------------------------|--------------------------------------|
| 2025.1 (EAP)              | 1.8.0-intellij-11                    |
| 2024.3                    | 1.8.0-intellij-11                    |
| 2024.2                    | 1.8.0-intellij-9                     |
| 2024.1                    | 1.7.3                                |

### Other Bundled Kotlin Libraries

In general, it is strongly advised to always use the bundled library version.

See [Third-Party Software and Licenses](https://www.jetbrains.com/legal/third-party-software/) for an overview of all bundled libraries.

### Incremental compilation

The Kotlin Gradle plugin supports [incremental compilation](https://kotlinlang.org/docs/gradle-compilation-and-caches.html#incremental-compilation), which allows tracking changes in the source files, so the compiler handles only updated code.

<tabs>

<tab title="Kotlin 1.9.0 and later">

No action is required.

Remove the additional `kotlin.incremental.useClasspathSnapshot=false` property in <path>gradle.properties</path> if present.

</tab>

<tab title="Kotlin 1.8.20">

> Consider using Kotlin 1.9.0 or later where this issue has been resolved.

Kotlin `1.8.20` has a [new incremental compilation approach](https://kotlinlang.org/docs/gradle-compilation-and-caches.html#a-new-approach-to-incremental-compilation) which is enabled by default.
Unfortunately, it is not compatible with the IntelliJ Platform when reading large JAR files (like <path>app.jar</path> or <path>3rd-party-rt.jar</path>),
leading to an `Out of Memory` exception:

```
Execution failed for task ':compileKotlin'.
> Failed to transform app.jar to match attributes {artifactType=classpath-entry-snapshot, org.gradle.libraryelements=jar, org.gradle.usage=java-runtime}.
   > Execution failed for ClasspathEntrySnapshotTransform: .../lib/app.jar.
      > Java heap space
```

To avoid this exception, add the following line to <path>gradle.properties</path>:

```
kotlin.incremental.useClasspathSnapshot=false
```

</tab>
</tabs>

## Plugin Implementation Notes

### Do not use `object` but `class`

{id="object-vs-class"}

Plugins *may* use [Kotlin classes](https://kotlinlang.org/docs/classes.html) (`class` keyword) to implement declarations in the [plugin configuration file](plugin_configuration_file.md).
When registering an [extension](plugin_extensions.md), the platform uses a dependency injection framework to instantiate these classes at runtime.
For this reason, plugins *must not* use [Kotlin objects](https://kotlinlang.org/docs/object-declarations.html#object-declarations-overview) (`object` keyword)
to implement any <path>[plugin.xml](plugin_configuration_file.md)</path> declarations.
Managing the lifecycle of extensions is the platform's responsibility, and instantiating these classes as Kotlin singletons may cause issues.

A notable exception is [`FileType`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileTypes/FileType.java)
(`com.intellij.fileType` extension point), see also the inspection descriptions below.

Problems are highlighted via these inspections (2023.2):

- <control>Plugin DevKit | Code | Kotlin object registered as extension</control> for Kotlin code
- <control>Plugin DevKit | Plugin descriptor | Extension class is a Kotlin object</control> for <path>plugin.xml</path>

### Do not use `companion object` in extensions

{id="companion-object-extensions"}

A Kotlin `companion object` is always created once you try to load its containing class, and [extension point implementations](plugin_extensions.md) are supposed to be cheap to create.
To avoid unnecessary classloading (and thus slowdown in IDE startup), `companion object` in extensions must only contain simple constants or [logger](ide_infrastructure.md#logging).
Anything else must be a top-level declaration or stored in an `object`.

Use inspection <control>Plugin DevKit | Code | Companion object in extensions</control> to highlight such problems (2023.3).

## Kotlin Code FAQ

### Testing K2 Mode

See [Testing in K2 Locally](https://kotlin.github.io/analysis-api/testing-in-k2-locally.html).

### Analysis API
<primary-label ref="2024.2"/>

The Analysis API is a powerful library for analyzing code in Kotlin.
Built on top of the Kotlin PSI syntax tree, it provides access to various semantic information, including reference targets, expression types, declaration scopes, diagnostics, and more.

See [Kotlin Analysis API Documentation](https://kotlin.github.io/analysis-api/index_md.html) for details.

### Miscellaneous

[How to shorten references](https://intellij-support.jetbrains.com/hc/en-us/community/posts/360010025120-Add-new-parameter-into-kotlin-data-class-from-IDEA-plugin?page=1#community_comment_360002950760)

## Example Plugins Implemented in Kotlin

Browse all [open-source Kotlin plugins](https://jb.gg/ipe?language=kotlin) built on the IntelliJ Platform.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Validation Errors

<link-summary>UI guidelines on displaying and writing texts of validation errors.</link-summary>

Validation is the process of checking the values specified by the user, and displaying the errors that are found.

An error can appear in a **tooltip**:

![](example_tooltip.png){width=235}

Or **inline**, above the confirmation buttons:

![](example_inline.png){width=358}

## Principles

<p>
Always try not to let the user enter invalid data. To achieve this:
</p>

Use controls that are constrained to valid values. For example, use a combo box or a slider instead of the input field.

Limit the characters users can enter. For example, if only numbers are supported in a field, and this is obvious to the user, ignore input of letters instead of showing an error:

![](port_correct.png){width=188}

If it’s not obvious that only numbers can be entered, allow entering any sign and perform validation.

![](font_error.png){width=301}

Provide a default value if possible. Even if the user decides to change the default value, it gives a clue on the expected input format.

Write instructions and examples on how to fill a form using [context help](context_help.md).

If it’s not possible to limit input, try to show an error as soon as possible so that the user can quickly return and fix it.

## Validation types and usage

<table style="both">

<tr>
  <td> </td>
  <td> What to validate </td>
  <td> Validation type </td>
  <td> Format </td>
</tr>
<tr>
    <td><p>1</p></td>
    <td> <a href="#1-non-allowed-characters-or-too-big-values">Non-allowed characters or too big/long values</a>
    </td>
    <td> Immediately on input </td>
    <td> Tooltip </td>
</tr>
<tr>
    <td><p>2</p></td>
    <td> <a href="#2-non-allowed-values-in-dialogs">Non-allowed values in dialogs.</a>
         <p>For example, an existing file name, a value that does not match the pattern, or a value that’s too small</p>
    </td>
    <td> On sending the form or on focus loss </td>
    <td> Tooltip </td>
</tr>
<tr>
    <td><p>3</p></td>
    <td> <a href="#3-empty-required-fields-in-dialogs">Empty required fields in dialogs</a> </td>
    <td> Disable the confirmation button or check on sending the form </td>
    <td> Tooltip </td>
</tr>
<tr>
    <td><p>4</p></td>
    <td> <a href="#4-non-allowed-or-empty-values-in-the-main-window">Non-allowed or empty values in the main window</a> </td>
    <td> On Enter or focus loss </td>
    <td> Tooltip </td>
</tr>
<tr>
    <td><p>5</p></td>
    <td> <a href="#5-remote-connection">Remote connection</a> </td>
    <td> On sending the form </td>
    <td> Tooltip or inline </td>
</tr>
<tr>
    <td><p>6</p></td>
    <td> <a href="#6-complex-values-in-multi-page-dialogs">Complex values in multi-page dialogs</a> </td>
    <td> On reopening the form or when the values are used </td>
    <td> Tooltip, inline or notification </td>
</tr>
</table>

### 1. Non-allowed characters or too big values

If a non-allowed character is entered, or the maximum input size or value is exceeded, validate it immediately on input.

#### How it works {id="how-it-works_1"}

The field is highlighted with red, and the error appears in the tooltip.

![](create_class.png){width=373}

If the maximum value is exceeded, specify what values are allowed (e.g. a range for numeric values, or the number of symbols):

![](port_error.png){width=461}

Hide the error when the incorrect symbol is deleted.

#### Implementation {id="implementation_1"}

<tabs group="languages">
<tab title="Kotlin UI DSL" group-key="kotlin">

```kotlin
val MESSAGE =
    "The port number must be between 0 and 65535";
textField()
  .validationOnInput {
    val portString = it.text
    if (portString.isNotEmpty()) {
      try {
        val portValue = portString.toInt()
        if (portValue < 0 || portValue > 65535) {
          error(MESSAGE)
        } else {
          null
        }
      } catch (_: NumberFormatException) {
        error(MESSAGE)
      }
    } else {
      null
    }
  }
```

</tab>
<tab title="Java" group-key="java">

```java
// Fields initializers
private JTextField myPort = new JTextField();
private static final String MESSAGE =
    "The port number must be between 0 and 65535";

// Components initialization
new ComponentValidator(parentDisposable).withValidator(() -> {
  String pt = myPort.getText();
  if (StringUtil.isNotEmpty(pt)) {
    try {
      int portValue = Integer.parseInt(pt);
      if (portValue >= 0 && portValue <= 65535) {
        return null;
      } else {
        return new ValidationInfo(MESSAGE, myPort);
      }
    } catch (NumberFormatException nfe) {
      return new ValidationInfo(MESSAGE, myPort);
    }
  } else {
    return null;
  }
}).installOn(myPort);
myPort.getDocument().addDocumentListener(new DocumentAdapter() {
  @Override
  protected void textChanged(@NotNull DocumentEvent e) {
    ComponentValidator.getInstance(myPort)
        .ifPresent(v -> v.revalidate());
  }
});
```

See also: [](disposers.md#choosing-a-disposable-parent).

</tab>
</tabs>

### 2. Non-allowed values in dialogs

A non-allowed value is a value that can be checked only when fully entered. For example, an existing file name, value that does not match the pattern or a value that’s too small/short.

If a non-allowed value is entered, validate it on focus loss or on sending the form, depending on what happens faster.

Do **not** validate non-allowed values on input, it will interrupt the user.

Do **not** validate empty fields on focus loss. Users should be able to fill the form in a random order, so do not interrupt them.

#### How it works {id="how-it-works_2"}

On sending the form, the field is highlighted in red and the error tooltip appears.

![](exesting_name.png){width=257}

If validated on focus loss, highlight the field in light-red. Do not return focus to the field with the error automatically.

![](focus_loss.png){width=169}

The error tooltip appears when the invalid field gets the focus or on hovering over the field.

When the user changes the value, the tooltip disappears and error highlighting is replaced with the regular focus:

![](fix_error.png){width=480}

When the focus is returned to the field with an error, use validation on input. Otherwise, it can be unclear for the user how to initiate validation.

#### Implementation {id="implementation_2"}

In [`Configurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/Configurable.java) panels, throw [`ConfigurationException`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/ConfigurationException.java) from `apply()` in case of errors.

Non-configurable panels:

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
textField()
  .validationOnApply { ... }
```

</tab>
<tab title="Java" group-key="java">

Add `andStartOnFocusLost()` call on [`ComponentValidator`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/ComponentValidator.java) before installing it on a component:

```java
new ComponentValidator(parentDisposable)
    .withValidator(...)
    .andStartOnFocusLost()
    .installOn(textField);
```

</tab>
</tabs>

### 3. Empty required fields in dialogs

#### Simple form

If a form is simple, move the focus to the first required field and disable the confirmation button until all required fields have been filled. It is clear from the form behavior that input is required, showing validation messages is redundant.

![](simple_dialog.png){width=373}

#### Complex form

If a form is complex, always enable the confirmation button. Otherwise, it can be hard to understand what should be done to complete the form.

Complex forms are:

* Forms with more than 3 input fields or combo boxes.
* Forms with at least one control (checkbox, table, and so on) apart from an input field and a combo box.

**Never** validate empty required fields on input or focus loss. Users should be able to fill the form in a random order, so do not interrupt them.

#### How to use

Validation is performed when the user clicks the confirmation button (for example, the "Add" button).

Highlight all invalid fields, move the focus to the first invalid field and show the tooltip.

![](complex_dialog.png){width=912}

Hide the tooltip and the red highlighting when the user starts editing the invalid value or entering symbols into the empty required field.

Show the error tooltip for the next field when it gets the focus, hover, or the user clicks the "Add" button one more time.

#### Implementation {id="implementation_3"}

By default, [`DialogWrapper`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/ui/DialogWrapper.java) disables <control>OK</control> button until
all fields that participate in validation become valid.

Explicitly enable <control>OK</control> button for each input field:
<tabs group="languages">
<tab title="Kotlin UI DSL" group-key="kotlin">

```kotlin
error("The host cannot be reached")
    .withOkEnabled()
```

</tab>
<tab title="Java" group-key="java">

```java
new ValidationInfo("The host cannot be reached", myHostField)
    .withOkEnabled();
```

</tab>
</tabs>

### 4. Non-allowed or empty values in the main window

If a non-allowed or an empty value is entered into a field that’s within the Properties view, for example, in UI Designers like the Android Studio Layout Editor, validate it on pressing Enter or focus loss.

#### How it works

On Enter, the field is highlighted with red and the error tooltip appears.

![](main_window.png){width=379}

If validated on focus loss, the field is highlighted with light-red. The focus is not returned to the field automatically.

Hide the field highlighting and the tooltip when the user fixes the invalid value.

### 5. Remote connection

If validation is slow or attempts are limited, for example, due to connection to a remote server, validate values on sending the form.

If it’s not possible to detect the fields with errors, show the error message inline under the fields:

![](example_inline.png){width=358}

An inline error only appears on clicking the confirmation button. The dialog is resized to fit the error message. Do **not** leave an empty space for the error in advance.

Hide the error messages once any field related to the error is edited. Set the dialog to its original size when the error disappears.

#### Implementation {id="implementation_4"}

[`ValidationInfo`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/ui/ValidationInfo.java) for messages in inline area is created with `null` component:

```java
new ValidationInfo(
    "The host cannot be reached. Check the address and credentials.");
```

### 6. Complex values in multi-page dialogs

If a value is complex, for example, a list of values, a regexp, or a value copied from another place, and it appears in a multi-page dialog, such as Settings, Project Structure or Run Configurations, show a dialog informing the user about an error on clicking the confirmation button.

For example, in a complex Resource patterns field

![](comlex_field.png){width=694}

show the following dialog on pressing the confirmation button:

![](confirmation_dialog.png){width=409}

It should be possible to close the Settings dialog and save the entered data if the user wants to fix the values later or needs additional data outside of the modal Settings dialog.

If an invalid field is not empty, highlight it on reopening the Settings dialog or report the error when the entered data is used.

## Tooltip

<p>
An error tooltip appears in two cases:
</p>

If the field with an error gets focus:

![](example_tooltip.png){width=235}

If the field loses focus, hide the tooltip and highlight the field with light-red:

![](incorrect_symbol_non_focused.png){width=206}

On hover over the field or the element with an error:

![](incorrect_symbol_hover.png){width=235}

![](validation_table_hover.png){width=429}

Show the tooltip above the field and move it 40px right, so that the controls above it are not overlapped.
If there is important info above the field, the tooltip can be shown on the right.

## Error message text

An error message describes the problem and provides the way to solve it if it’s not clear from the problem description.

![](message_short.png){width=319 style=block}
*It’s clear how to fix the error from the error description.*

![](message_long.png){width=456 style=block}
*The way to solve the problem is provided.*

Describe the problem in terms of target users’ actions or goals, not in terms of the program’s architecture.

<table style="header-column">
    <tr>
        <td width="15%"> <format color="Red" style="bold">Incorrect</format> </td>
        <td width="85%"> Invalid Git Executable. Error running "git.exe". File not found: "git.exe".</td>
    </tr>
    <tr>
        <td> <format color="Green" style="bold">Correct</format> </td>
        <td> Cannot run "git.exe". The file is not found.</td>
    </tr>
</table>

Provide specific names, locations, and values of the objects involved:

<table style="header-column">
    <tr>
        <td width="15%"> <format color="Red" style="bold">Incorrect</format> </td>
        <td width="85%"> <img src="message_unclear.png" width="343"/> </td>
    </tr>
    <tr>
        <td> <format color="Green" style="bold">Correct</format> </td>
        <td> <img src="message_clear.png" width="277"/> </td>
    </tr>
</table>



For a period at the end of an error message, see [Punctuation](punctuation.md#period).

Make the error message short and descriptive. See [Writing short and clear](writing_short.md).

Examples of common errors and corresponding error messages:

<table>
<tr>
    <td width="25%"> Error type </td>
    <td width="75%"> Error message </td>
</tr>
<tr>
    <td> Empty required field </td>
    <td> Specify the port number </td>
</tr>
<tr>
    <td> Incorrect symbol </td>
    <td> "/" is not an allowed symbol </td>
</tr>
<tr>
    <td> Incorrect value </td>
    <td> <p>The port number should be between XXX and XXXX</p>
         <p>The file name should be at least 4 symbols</p>
         <p>The name is already in use</p>
         <p>The username or password is incorrect</p>
    </td>
</tr>
<tr>
    <td> Incorrect format </td>
    <td> The email format should be xxx@xxx.com </td>
</tr>
<tr>
    <td> Missing file </td>
    <td> The file is not found </td>
</tr>
</table>

Use encouraging tone:

<table>
<tr>
  <td width="50%"> <format color="Red" style="bold">Do not use</format> </td>
  <td width="50%"> <format color="Green" style="bold">Use</format> </td>
</tr>
<tr>
    <td> Error, failure </td>
    <td> Problem </td>
</tr>
<tr>
    <td> Failed to </td>
    <td> Unable </td>
</tr>
<tr>
    <td> Illegal, invalid, bad </td>
    <td> Incorrect </td>
</tr>
<tr>
    <td> Must </td>
    <td> Should be </td>
</tr>
</table>

## Warning

![](validation_warning.png){width=336}

A warning informs the user that something is configured incorrectly, but does not prevent them from applying the changes.

A warning can appear on input, focus loss, or on reopening a filled form. For example, make the empty field <control>Target name</control> show a warning on reopening:

![](warning_dialog.png){width=580}

The warning can be shown:

In a tooltip for a specific field. Follow the rules for [the error tooltip](tooltip.md).
<tabs group="languages">
<tab title="Kotlin UI DSL" group-key="kotlin">

```kotlin
warning("Target name is not specified")
```

</tab>
<tab title="Java" group-key="java">

```java
new ValidationInfo("Target name is not specified", myNameField)
    .asWarning();
```

</tab>
</tabs>


On the form under the controls. Show the message with the yellow warning icon.

![](warning_inline.png){width=303}

On the "Problems" page in complex multipage dialogs. Show warnings and fix options:

![](problems.png){width=418 style=block}
*Problems page in the Project Structure dialog.*

Mark all navigation elements for areas that contain warnings with yellow icons.

Update the problem counter when a problem is detected. When all problems have been fixed, do not show the "Problems" tab.

On a particular page, highlight the element that contains a warning in yellow or add a warning icon next to it.

## UI elements with validation errors

### Input field

![](example_tooltip.png){width=235}

Add a red light bulb on the right side of the input field if an action to fix the error is available:

![](input_field_bulb.png){width=729}

### Combo box

![](combo_box.png){width=235}

### Tables and lists

![](table_error.png){width=429}

When the field in a table loses focus, show an error icon. An error tooltip appears on mouse hover or when the line gets focus:

![](validation_table_hover.png){width=429}

Use a warning icon for warnings:

![](table_warning.png){width=429}

#### Implementation

<tabs group="languages">
<tab title="Kotlin" group-key="kotlin">

```kotlin
val cellEditor = JTextField()
cellEditor.putClientProperty(DarculaUIUtil.COMPACT_PROPERTY, true)
cellEditor.document.addDocumentListener(object : DocumentAdapter() {
  override fun textChanged(e: DocumentEvent) {
    val outline =
      if (cellEditor.text.contains(".")) "error" else null
    cellEditor.putClientProperty("JComponent.outline", outline)
  }
})
val firstColumn = table.columnModel.getColumn(0)
firstColumn.cellEditor = DefaultCellEditor(cellEditor)
firstColumn.cellRenderer = object : DefaultTableCellRenderer() {
  override fun getPreferredSize(): Dimension {
    val size = super.preferredSize
    val editorSize = cellEditor.preferredSize
    size.height = max(size.height, editorSize.height)
    return size
  }
}
```

</tab>
<tab title="Java" group-key="java">

```java
JTextField cellEditor = new JTextField();
cellEditor.putClientProperty(
    DarculaUIUtil.COMPACT_PROPERTY, Boolean.TRUE);
cellEditor.getDocument().addDocumentListener(new DocumentAdapter() {
    @Override
    protected void textChanged(@NotNull DocumentEvent e) {
      Object outline = cellEditor.getText().contains(".") ?
          "error" : null;
      cellEditor.putClientProperty("JComponent.outline", outline);
    }
});
TableColumn firstColumn = table.getColumnModel().getColumn(0);
firstColumn.setCellEditor(new DefaultCellEditor(cellEditor));
firstColumn.setCellRenderer(new DefaultTableCellRenderer() {
    @Override
    public Dimension getPreferredSize() {
      Dimension size = super.getPreferredSize();
      Dimension editorSize = cellEditor.getPreferredSize();
      size.height = Math.max(size.height, editorSize.height);
      return size;
    }
});
```

</tab>
</tabs>

### Trees and lists

Add an error or warning icon on the right side of the invalid line.

![](list.png){width=647}

### Multi-page dialog

If validation in a multipage form can be performed only by clicking the confirmation button, then:

* Use red highlighting for navigation elements such as tabs, menu and list items for areas that contain errors so that the user can quickly locate the error.
* Open the first page with an error or stay on the opened page if it has errors on clicking the confirmation button.

![](multipage1.png){width=1014}

## Avoid mistakes

Do not show an error in a message box. Users are pulled out of the context, they need to close the dialog and locate the invalid field.

![](message_box.png){width=472}

Do not allow to click "OK" button if a form contains empty required fields. For this, the Cancel button should be used, and the OK button should be disabled. Otherwise, if users accidentally leave the field empty, they can expect that the value was entered correctly.

![](wildcard.png){width=521}

Do not show an error message inside the empty required field. It looks like a prefilled field, not like an error message.

![](goto_line.png){width=438}

Do not underline the field label. It looks like a spell error and poorly visible.

![](underline.png){width=278}

Do not shake a form and show an error with a delay. A shaking form is distracting and time-consuming.

![](new_class.png){width=445}

Do not show an error immediately after opening a form. It distracts the user from filling the form.

![](add_tfs.png){width=350}

Do not allow submitting the form with the error.
When the form is opened again, the value is reset, so users don’t know if they entered incorrect data.

![](save.png){width=471}

## Insets and colors

![](tooltip_insets.png){width=534}

![](dialog_insets.png){width=354}

<!--
### Error colors
<table>
<col width="20%">
<col width="20%">
<col width="20%">
<col width="20%">
<td> </td>
<td> macOS </td>
<td> Windows </td>
<td> IntelliJ </td>
<td> Darcula </td>
<tr>
    <td> Tooltip background </td>
    <td> #F5E6E7 </td>
    <td> #F5E6E7 </td>
    <td> #F5E6E7 </td>
    <td> #593D41 </td>
</tr>
<tr>
    <td> Tooltip border </td>
    <td> #E0A8A9 </td>
    <td> #E0A8A9 </td>
    <td> #E0A8A9 </td>
    <td> #73454B </td>
</tr>
<tr>
    <td> Focused field highlighting </td>
    <td> #F53B3B, op. 50% </td>
    <td> #F57D7D </td>
    <td> #E53E4D </td>
    <td> #8B3C3C </td>
</tr>
<tr>
    <td> Not focused field highlighting </td>
    <td> #F7BCBC, op. 50% </td>
    <td> #EECACA </td>
    <td> #EBBCBC </td>
    <td> #725252 </td>
</tr>
<tr>
    <td> Error text color </td>
    <td> #FF0000 </td>
    <td> #FF0000 </td>
    <td> #FF0000 </td>
    <td> #FF5261 </td>
</tr>
</table>



### Warning colors

<table>
<col width="20%">
<col width="20%">
<col width="20%">
<col width="20%">
<td> </td>
<td> macOS </td>
<td> Windows, IntelliJ </td>
<td> Darcula </td>
<tr>
    <td> Tooltip background </td>
    <td> #F5F0E6 </td>
    <td> #F5F0E6 </td>
    <td> #594E32 </td>
</tr>
<tr>
    <td> Tooltip border </td>
    <td> #E0CEA8 </td>
    <td> #E0CEA8 </td>
    <td> #78550B </td>
</tr>
<tr>
    <td> Focused field highlighting </td>
    <td> #EEB23E, op. 50% </td>
    <td> #E1A336 </td>
    <td> #AD7A0F </td>
</tr>
<tr>
    <td> Not focused field highlighting </td>
    <td> #FFDC92, op. 50% </td>
    <td> #EAD2A1 </td>
    <td> #6F531F </td>
</tr>
<tr>
    <td> Warning text color </td>
    <td> #E77D00 </td>
    <td> #E77D00 </td>
    <td> #DC9B2F </td>
</tr>
</table>
-->
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Version Control Systems

<link-summary>Overview of the Version Control Integration API allowing to implement a custom Version Control System support.</link-summary>

This page gives an overview of the Version Control Integration API.

Reference: [OSS plugins providing VCS](https://jb.gg/ipe?extensions=com.intellij.vcs)

## Key Concepts

### `FilePath`

A [`FilePath`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/vcs/FilePath.java) represents a path to a file or directory on disk or in the VCS repository.
Unlike a [virtual file](virtual_file.md), a `FilePath` can represent a path to a file which doesn't exist on disk.
The main difference between a `FilePath` and a [`java.io.File`](https://docs.oracle.com/javase/8/docs/api/java/io/File.html) is that a `FilePath` caches the `VirtualFile` corresponding to the path, so it can be retrieved without doing a VFS search.

To create instances of `FilePath`, the [`VcsContextFactory`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/actions/VcsContextFactory.java) API is used.

`FilePath` representing paths in a VCS repository, rather than local paths, are created using `VcsContextFactory.createFilePathOnNonLocal()`.
The `FilePath.isNonLocal()` method returns `true` for such files.

### `VcsRevisionNumber`

A [`VcsRevisionNumber`](%gh-ic%/platform/vcs-api/vcs-api-core/src/com/intellij/openapi/vcs/history/VcsRevisionNumber.java) represents a revision number of the file.
If the VCS stores revision numbers as simple integers, the standard [`VcsRevisionNumber`](%gh-ic%/platform/vcs-api/vcs-api-core/src/com/intellij/openapi/vcs/history/VcsRevisionNumber.java) `Int` implementation can be used.
If the VCS has a more complex format of revision numbers (like CVS, which uses a series of numbers delimited with dots), the plugin can provide a custom implementation.

### `ContentRevision`

A [`ContentRevision`](%gh-ic%/platform/vcs-api/vcs-api-core/src/com/intellij/openapi/vcs/changes/ContentRevision.java) represents a particular revision of a file, which exists either locally or in a VCS repository.
It has three main attributes:

* `FilePath` specifying the file of which this is a revision.
  If some version of the file exists locally, this should be a local path.
* [`VcsRevisionNumber`](%gh-ic%/platform/vcs-api/vcs-api-core/src/com/intellij/openapi/vcs/history/VcsRevisionNumber.java) specifying the revision number of the revision, or `VcsRevisionNumber.NULL` if the revision exists only locally.
* Content of the revision.

The content is returned as string, and the VCS plugin is responsible for converting the binary file content to correct encoding.
To detect the encoding automatically based on the IDE settings and the byte order mark, the method `CharsetToolkit.bytesToString()` can be used (this API is new in IDEA 7.0.2).
Revisions of binary files can also be represented as [`BinaryContentRevision`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/BinaryContentRevision.java).
For binary revisions, the result of `getContent()` is undefined, and `getBinaryContent()` can be used to retrieve the contents as a byte array.

A useful class which can be used to represent the current on-disk version of a particular file is [`CurrentContentRevision`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/CurrentContentRevision.java).

### `FileStatus`

A [`FileStatus`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/vcs/FileStatus.java) represents a status of a file in regard to VCS (unversioned, not changed, added, modified and so on).
It determines the color used to render the name of the file in the UI.

### `Change`

A [`Change`](%gh-ic%/platform/vcs-api/vcs-api-core/src/com/intellij/openapi/vcs/changes/Change.java) represents a single file operation (creation, modification, move/rename or deletion) from a VCS point of view.
A Change can represent either a modification which the user has performed locally and not yet committed, a committed modification, or some other type of modification (for example, a shelved change or a difference between two arbitrary revisions).

A `Change` essentially consists of two content revisions:

* before revision (`null` if the `Change` represents file creation)
* after revision (`null` if the `Change` represents file deletion)

A move or rename is represented by a `Change` where the before revision and the after revision have different file paths.
A custom file status can be specified for a `Change` if it represents a non-standard modification of the file (for example, a file which has been merged with conflicts).
If a custom file status has not been specified, the status is calculated automatically from the change type.

### `ChangeList`

A [`ChangeList`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/ChangeList.java) represents a named group of related changes.
There are two main kinds of changelists:

* [`LocalChangeList`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/LocalChangeList.java) represents a group of modifications done by a user locally.
  If the VCS also supports the concept of changelists (like Perforce does), the VCS plugin can synchronize the IDE's local changelist structure with that of the VCS.
  Otherwise, a local changelist is simply a subset of the files checked out or modified by the user.
* [`CommittedChangeList`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/versionBrowser/CommittedChangeList.java) represents a set of modifications checked in to the VCS repository.
  For VCSes which support atomic commit, every committed revision is represented by a `CommittedChangeList`.
  For VCSes which use per-file commit (like CVS), the plugin can use heuristics to group a sequence of individual file commits into a `CommittedChangeList`.

> The <control>Unversioned Files</control>, <control>Locally Deleted Files</control>, etc., nodes in the <control>Changes</control> view are not actually change lists, and files under those nodes are not represented by `ChangeList` objects.
>
{style="note"}

## Plugin Components

This section describes the different components which comprise a VCS integration plugin, roughly in the same order as they should be implemented.

### `AbstractVcs`

This is the main entry point for a VCS plugin, which is used by the IntelliJ Platform to retrieve all other services provided by the plugin.
Register `AbstractVcs` implementation in `com.intellij.vcs` extension point in <path>[plugin.xml](plugin_configuration_file.md)</path>, as shown in the following example:

```xml
<idea-plugin>
  ...
  <extensions defaultExtensionNs="com.intellij">
    <vcs name="svn" vcsClass="org.jetbrains.idea.svn.SvnVcs"/>
  </extensions>
</idea-plugin>
```

Here `name` is the unique name of the VCS (this must match the string returned by your implementation of `AbstractVcs.getName()`), and `vcsClass` is your implementation class.

### `ChangeProvider`

[`ChangeProvider`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/ChangeProvider.java) is responsible for tracking user changes to the working copy, and reporting these changes to the IntelliJ Platform core.
An implementation of this class is returned from [`AbstractVcs.getChangeProvider()`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/AbstractVcs.java).

The ChangeProvider works in tandem with
[`VcsDirtyScopeManager`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/VcsDirtyScopeManager.java)
.
It keeps track of the 'dirty scope': the set of files for which the VCS file status may be out of date.
Files are added to the dirty scope either when they are modified on disk, or when their VCS status is invalidated by an explicit call to
[`VcsDirtyScopeManager.fileDirty()`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/VcsDirtyScopeManager.java)
or
[`VcsDirtyScopeManager.dirDirtyRecursively()`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/VcsDirtyScopeManager.java).

After some files have been added to the dirty scope, the dirty scope is passed to `ChangeProvider.getChanges()`, along with a
[`ChangelistBuilder`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/ChangelistBuilder.java)
instance, which serves as a sink to which the `ChangeProvider` feeds the data about the changed files.
This processing happens asynchronously in a background thread.

The `ChangeProvider` can either iterate all files under the dirty scope using
[`VcsDirtyScope.iterate()`](%gh-ic%/platform/vcs-api/src/com/intellij/openapi/vcs/changes/VcsDirtyScope.java)
, or retrieve information about its contents using the `getDirtyFiles()` and `getDirtyDirectoriesRecursively()` methods.
If it is possible to retrieve the information about the local changes from the VCS in batch, it's strongly preferable to use the second method, as it scales much better for large working copies.

The `ChangeProvider` reports data to `ChangelistBuilder` using the following methods:

* `processChange()` is called for files which have been checked out (or modified if the VCS doesn't use an explicit checkout model), scheduled for addition or deletion, moved or renamed.
* `processUnversionedFile()` is called for files which exist on disk, but are not managed by the VCS, not scheduled for addition, and not ignored through <path>.cvsignore</path> or a similar mechanism.
* `processLocallyDeletedFile()` is called for files which exist in the VCS repository, but do not exist on disk and are not scheduled for deletion.
* `processIgnoredFile()` is called for files which are not managed by the VCS but are ignored through <path>.cvsignore</path> or a similar mechanism.
* `processSwitchedFile()` is called for files or directories for which the working copy corresponds to a different branch compared to the working copy of their parent directory.
  This can be called for the same files for which `processSwitchedFile()` has already been called.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Verifying Plugin Compatibility

<link-summary>Tooling for ensuring compatibility.</link-summary>

See [](api_changes_list.md) for known breaking changes.

For API annotated with [`@ApiStatus.Internal`](%gh-java-annotations%/common/src/main/java/org/jetbrains/annotations/ApiStatus.java), see [](api_internal.md) for more details and replacements.

See also [](build_number_ranges.md#multipleIDEVersions).

## Plugin Verifier

### Using with Gradle

Integration in [Gradle build](creating_plugin_project.md) is available out-of-the box via dedicated Gradle tasks.

<tabs>
<tab title="IntelliJ Platform Gradle Plugin (2.x)">

Use [`verifyPlugin`](tools_intellij_platform_gradle_plugin_tasks.md#verifyPlugin) task.

</tab>
<tab title="Gradle IntelliJ Plugin (1.x)">

Use [`runPluginVerifier`](tools_gradle_intellij_plugin.md#tasks-runpluginverifier) task.

</tab>
</tabs>

Integration with Continuous Integration (CI) environments is as simple as running the corresponding Gradle task as another quality check step.
See the IntelliJ Platform Plugin Template [GitHub workflow configuration file](https://github.com/JetBrains/intellij-platform-plugin-template/blob/main/.github/workflows/build.yml) as reference.

#### Navigation in the IDE

Reported places are highlighted and linked to the plugin's source code in the <control>Gradle</control> tool window output (2023.3+).

### JetBrains Marketplace

Compatibility with newer IDEs can easily be verified for plugins hosted on the [JetBrains Marketplace](https://plugins.jetbrains.com) using the built-in [Plugin Verifier](https://blog.jetbrains.com/platform/2018/07/plugins-repository-now-integrates-with-the-plugin-verification-tool/).

### Other Usages

If a plugin is hosted on GitHub and the project is _not_ using Gradle, consider using third-party GitHub Actions [IntelliJ Platform Plugin Verifier](https://github.com/marketplace/actions/intellij-platform-plugin-verifier) or [IntelliJ Plugin Verifier](https://github.com/marketplace/actions/intellij-plugin-verifier).

In all other cases, [intellij-plugin-verifier](https://github.com/JetBrains/intellij-plugin-verifier) can be used standalone as well.

## IDE Support

The status of an API is marked using various annotations defined in [`ApiStatus`](%gh-java-annotations%/common/src/main/java/org/jetbrains/annotations/ApiStatus.java), please see their doc for more details.
Use highlighting available via dedicated [IDE inspections](https://www.jetbrains.com/help/idea/code-inspection.html) as noted below to prevent problems as early as possible.

### Unstable API

- `@ApiStatus.Experimental` is considered unstable and may break or be removed.
- `@ApiStatus.Internal` must not be used by plugins, see [](api_internal.md) for more details and replacements.
- `@ApiStatus.ScheduledForRemoval` denotes API that will be removed in a future version.

Inspection: <control>JVM languages | Unstable API Usage</control> and <control>JVM languages | Unstable type is used in signature</control>

### Obsolete API

API annotated with `@ApiStatus.Obsolete` has been replaced with a better alternative and must not be used for new code.

Inspection: <control>Plugin DevKit | Code | Usages of ApiStatus.@Obsolete</control> (2023.1)

### Non-Extendable API

API annotated with `@ApiStatus.NonExtendable` must not be extended, implemented or overridden.

Inspection: <control>JVM languages | Class, interface, or method should not be extended</control>

### Override-Only API

API annotated with `@ApiStatus.OverrideOnly` must not be called directly by the client.

Inspection: <control>JVM languages | Method can only be overridden</control>

### plugin.xml

Usage of [Extension Points](plugin_extensions.md) which are deprecated or annotated with `@ApiStatus.Experimental` or `@ApiStatus.Internal` is also highlighted in <path>[plugin.xml](plugin_configuration_file.md)</path> files.

Inspection: <control>Plugin DevKit | Plugin descriptor | Plugin.xml validity</control>

### API Compatibility

A plugin might specify a [compatibility range](build_number_ranges.md) including releases where some API is not available.
Under the hood, it uses an artifact containing generated data via `@ApiStatus.AvailableSince`, which is automatically attached to the project.

> If values are not specified directly in [<path>plugin.xml</path>](plugin_configuration_file.md) (e.g., when providing values via `patchPluginXml` Gradle task (Reference: [2.x](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml), [1.x](tools_gradle_intellij_plugin.md#tasks-patchpluginxml))), they must be set explicitly in the inspection's settings.

Inspection: <control>Plugin DevKit | Code | Usage of IntelliJ API not available in older IDEs</control>
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Virtual Files

<link-summary>Virtual Files represent local or remote files provided by the Virtual File System.</link-summary>

A [`VirtualFile`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFile.java) (VF) is the IntelliJ Platform's representation of a file in a [Virtual File System (VFS)](virtual_file_system.md).

Most commonly, a virtual file is a file in a local file system.
However, the IntelliJ Platform supports multiple pluggable file system implementations, so virtual files can also represent classes in a JAR file, old revisions of files loaded from a version control repository, and so on.

The VFS level deals only with binary content.
Contents of a `VirtualFile` are treated as a stream of bytes, but concepts like encodings and line separators are handled at higher system levels.

## How do I get a virtual file?

| Context                          | API                                                                                                                                                                                                                                                                                                                                           |
|----------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [Action](basic_action_system.md) | <p>[`AnActionEvent.getData(PlatformDataKeys.VIRTUAL_FILE)`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnActionEvent.java)</p><p>[`AnActionEvent.getData(PlatformDataKeys.VIRTUAL_FILE_ARRAY)`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnActionEvent.java) for multiple selection</p> |
| [Document](documents.md)         | [`FileDocumentManager.getFile()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/fileEditor/FileDocumentManager.java)                                                                                                                                                                                                                     |
| [PSI File](psi_files.md)         | [`PsiFile.getVirtualFile()`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiFile.java) (may return `null` if the PSI file exists only in memory)                                                                                                                                                                                           |
| File Name                        | [`FilenameIndex.getVirtualFilesByName()`](%gh-ic%/platform/indexing-api/src/com/intellij/psi/search/FilenameIndex.java)                                                                                                                                                                                                                       |
| Local File System Path           | <p>[`LocalFileSystem.findFileByIoFile()`](%gh-ic%/platform/analysis-api/src/com/intellij/openapi/vfs/LocalFileSystem.java)</p><p>[`VirtualFileManager.findFileByNioPath()`/`refreshAndFindFileByNioPath()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFileManager.java) (2020.2+)</p>                                     |

## What can I do with it?

Typical file operations are available, such as traverse the file system, get file contents, rename, move, or delete.
Recursive iteration should be performed using `VfsUtilCore.iterateChildrenRecursively()` to prevent endless loops caused by recursive symlinks.

## Where does it come from?

The VFS is built incrementally by scanning the file system up and down, starting from the project root.
VFS _refresh_ operations detect new files appearing in the file system.
A refresh operation can be initiated programmatically using `VirtualFileManager.syncRefresh()`/`asyncRefresh()` or `VirtualFile.refresh()`.
VFS refreshes are also triggered whenever file system watchers receive file system change notifications.

Invoking a VFS refresh might be necessary for accessing a file that has just been created by an external tool through the IntelliJ Platform APIs.

## How long does a virtual file persist?

A particular file on disk is represented by equal `VirtualFile` instances for the IDE process's entire lifetime.
There may be several instances corresponding to the same file, and they can be garbage-collected.
The file is a `UserDataHolder`, and the user data is shared between those equal instances.
If a file is deleted, its corresponding `VirtualFile` instance becomes invalid (`isValid()` returns `false`), and operations cause exceptions.

## How do I create a virtual file?

Usually, you don't.
As a general rule, files are created either through the PSI API or through the regular `java.io.File` API.

If one needs to create a file through VFS, use `VirtualFile.createChildData()` to create a `VirtualFile` instance and `VirtualFile.setBinaryContent()` to write some data to the file.

## How do I get notified when VFS changes?

> See [](virtual_file_system.md#virtual-file-system-events) for important details.
>
{style="note"}

Implement [`BulkFileListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/newvfs/BulkFileListener.java) and subscribe to the [message bus](messaging_infrastructure.md) topic `VirtualFileManager.VFS_CHANGES`.
For example:

```java
project.getMessageBus().connect().subscribe(
    VirtualFileManager.VFS_CHANGES,
    new BulkFileListener() {
      @Override
      public void after(@NotNull List<? extends VFileEvent> events) {
        // handle the events
      }
    });
```

See [Message Infrastructure](messaging_infrastructure.md) and [Plugin Listeners](plugin_listeners.md) for more details.

For a non-blocking alternative, starting with version 2019.2 of the platform, see [`AsyncFileListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/AsyncFileListener.java).

## Are there any utilities for analyzing and manipulating virtual files?

[`VfsUtil`](%gh-ic%/platform/analysis-api/src/com/intellij/openapi/vfs/VfsUtil.java) and [`VfsUtilCore`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VfsUtilCore.java) provide utility methods for analyzing files in the Virtual File System.

For storing a large set of Virtual Files, use dedicated `VfsUtilCore.createCompactVirtualFileSet()`.

Use [`ProjectLocator`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/ProjectLocator.kt) to find the projects that contain a given virtual file.

## How do I extend VFS?

To provide an alternative file system implementation (for example, an FTP file system), implement the [`VirtualFileSystem`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFileSystem.java) class (most likely you'll also need to implement `VirtualFile`), and register your implementation via `com.intellij.virtualFileSystem` extension point (2019.2 and later) or [application component](plugin_components.md) for earlier versions.

To hook into operations performed in the local file system (for example, when developing a version control system integration that needs custom rename/move handling), implement [`LocalFileOperationsHandler`](%gh-ic%/platform/analysis-api/src/com/intellij/openapi/vfs/LocalFileOperationsHandler.java) and register it via `LocalFileSystem.registerAuxiliaryFileOperationsHandler()`.

## What are the rules for working with VFS?

See [](virtual_file_system.md) for a detailed description of the VFS architecture and usage guidelines.

## How can I store additional metadata in files?

See:
- [`FilePropertyPusher`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/impl/FilePropertyPusher.java)
- [`FileAttribute`](%gh-ic%/platform/analysis-api/src/com/intellij/openapi/vfs/newvfs/FileAttribute.java)
# Virtual File System

<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<link-summary>Virtual File System is an abstraction that allows to work with local or remote file storages and implement custom.</link-summary>

The Virtual File System (VFS) is a component of the IntelliJ Platform that encapsulates most of its activity for working with files represented as [Virtual File](virtual_file.md).

It serves the following main purposes:

* Providing a universal API for working with files regardless of their actual location (on disk, in an archive, on an HTTP server, etc.)
* Tracking file modifications and providing both old and new versions of the file content when a change is detected.
* Providing a possibility to [associate additional persistent data](virtual_file.md#how-can-i-store-additional-metadata-in-files) with a file in the VFS.

To provide the last two features, the VFS manages a _persistent snapshot_ of some of the user's hard disk contents.
The snapshot stores only those files which have been requested at least once through the VFS API, and is asynchronously updated to match the changes happening on the disk.

The snapshot is application level, not project level - so, if some file (for example, a class in the JDK) is referenced by multiple projects, only one copy of its contents will be stored in the VFS.

All VFS access operations go through the snapshot.

If some information is requested through the VFS APIs and is not available in the snapshot, it is loaded from disk and stored into the snapshot.
If the information is available in the snapshot, the snapshot data is returned.
The contents of files and the lists of files in directories are stored in the snapshot only if that specific information was accessed.
Otherwise, only file metadata like name, length, timestamp, attributes are stored.

> This means that the state of the file system and the file contents displayed in the IntelliJ Platform UI comes from the snapshot, which may not always match the disk's actual contents.
> For example, in some cases, deleted files can still be visible in the UI for some time before the deletion is picked up by the IntelliJ Platform.
>
{style="note"}

The snapshot is updated from disk during _refresh operations_, which generally happen asynchronously.
All write operations made through the VFS are synchronous - i.e., the contents are saved to disk immediately.

A refresh operation synchronizes the state of a part of the VFS with the actual disk contents.
Refresh operations are explicitly invoked by the IntelliJ Platform or plugin code - i.e., when a file is changed on disk while the IDE is running, the change will not be immediately picked up by the VFS.
The VFS will be updated during the next refresh operation, which includes the file in its scope.

IntelliJ Platform refreshes the entire project contents asynchronously on startup.
By default, it performs a refresh operation when the user switches to it from another app.
Still, users can turn this off via <ui-path>Settings | Appearance & Behavior | System Settings | Synchronize external changes\[...]</ui-path>.

On Windows, Mac, and Linux, a native file watcher process is started that receives file change notifications from the file system and reports them to the IntelliJ Platform.
If a file watcher is available, a refresh operation looks only at the files that have been reported as changed by the file watcher.
If no file watcher is present, a refresh operation walks through all directories and files in the refresh scope.

> Invoke [internal action](internal_actions_intro.md) <ui-path>Tools | Internal Actions | VFS | Show Watched VFS Roots</ui-path> to see all registered roots for current project.
>

Refresh operations are based on file timestamps.
If a file's contents were changed, but its timestamp remained the same, the IntelliJ Platform will not pick up the updated contents.

There is currently no facility for removing files from the snapshot.
If a file was loaded there once, it remains there forever unless it was deleted from the disk, and a refresh operation was called on one of its parent directories.

The VFS itself does not honor ignored files listed in <ui-path>Settings | Editor | File Types</ui-path> and folders to ignore and excluded folders listed in <ui-path>Project Structure | Modules | Sources | Excluded</ui-path>.
If the application code accesses them, the VFS will load and return their contents.
In most cases, the ignored files and excluded folders must be skipped from processing by higher-level code.

During the lifetime of a running instance of an IntelliJ Platform IDE, multiple `VirtualFile` instances may correspond to the same disk file.
They are equal, have the same `hashCode`, and share the user data.

## Synchronous and Asynchronous Refreshes

From the point of view of the caller, refresh operations can be either synchronous or asynchronous.
In fact, the refresh operations are executed according to their own threading policy.
The synchronous flag simply means that the calling thread will be blocked until the refresh operation (which will most likely run on a different thread) is completed.

Both synchronous and asynchronous refreshes can be initiated from any thread.
If a refresh is initiated from a background thread, the calling thread must not hold a read action, because otherwise, a deadlock would occur.
See [IntelliJ Platform Architectural Overview](threading_model.md) for more details on the threading model and read/write actions.

The same threading requirements also apply to functions like [`LocalFileSystem.refreshAndFindFileByPath()`](%gh-ic%/platform/analysis-api/src/com/intellij/openapi/vfs/LocalFileSystem.java), which perform a partial refresh if the file with the specified path is not found in the snapshot.

In nearly all cases, using asynchronous refreshes is strongly preferred.
If there is some code that needs to be executed after the refresh is complete, the code should be passed as a `postRunnable` parameter to one of the refresh methods:

* [`RefreshQueue.createSession()`](%gh-ic%/platform/analysis-api/src/com/intellij/openapi/vfs/newvfs/RefreshQueue.java)
* [`VirtualFile.refresh()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFile.java)

In some cases, synchronous refreshes can cause deadlocks, depending on which [locks](threading_model.md#read-write-lock) are held by the thread invoking the refresh operation.

## Virtual File System Events

All changes happening in the virtual file system, either due to refresh operations or caused by user actions, are reported as _virtual file system events_.
VFS events are always fired in the event dispatch thread and in a write action.

The most efficient way to listen to VFS events is to implement [`BulkFileListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/newvfs/BulkFileListener.java) and to subscribe with it to the [`VirtualFileManager.VFS_CHANGES`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFileManager.java) topic.
A non-blocking variant [`AsyncFileListener`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/AsyncFileListener.java) is also available in 2019.2 or later.
See [How do I get notified when VFS changes?](virtual_file.md#how-do-i-get-notified-when-vfs-changes) for implementation details.

> VFS listeners are application level and will receive events for changes happening in *all* the projects opened by the user.
> You may need to filter out events that aren't relevant to your task (e.g., via [`ProjectFileIndex.isInContent()`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ProjectFileIndex.java)).
>
{style="warning"}

VFS events are sent both before and after each change, and you can access the old contents of the file in the before event.
Note that events caused by a refresh are sent after the changes have already occurred on disk.
So when you process the `beforeFileDeletion` event, for example, the file has already been deleted from disk.
However, it is still present in the VFS snapshot, and you can access its last contents using the VFS API.

Note that a refresh operation fires events only for changes in files that have been loaded in the snapshot.
For example, if you accessed a `VirtualFile` for a directory but never loaded its contents using [`VirtualFile.getChildren()`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFile.java), you may not get `fileCreated` notifications when files are created in that directory.

If you loaded only a single file in a directory using `VirtualFile.findChild()`, you will get notifications for changes to that file, but you may not get created/deleted notifications for other files in the same directory.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# WebStorm Plugin Development

<link-summary>Introduction to developing plugins for WebStorm.</link-summary>

<var name="productID" value="webstorm"/>
<var name="marketplaceProductID" value="webstorm"/>
<include from="snippets.md" element-id="jetbrainsIDE_TLDR"/>

[WebStorm](https://www.jetbrains.com/webstorm/) is an IntelliJ Platform-based product.
Plugin projects for WebStorm can be developed using [IntelliJ IDEA](idea.md).

> WebStorm is free for non-commercial use

> Follow [Building a Plugin for WebStorm – Tutorial for JavaScript Developers](learning_resources.md#articles) blog post series to get started
> and [How To Build a Plugin for JetBrains IDEs (Analog.js Example)](learning_resources.md#webinars) webinar.
>
{style="note"}

## WebStorm Plugin Setup

### Gradle Build Script

<tabs>
<tab title="IntelliJ Platform Gradle Plugin (2.x)">

Define a dependency using [`webstorm()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md), see _Versions_ link on top of this page for all available versions.
See [](tools_intellij_platform_gradle_plugin.md#dependenciesLocalPlatform) for using a local installation.

A dependency on the bundled `JavaScript` plugin must be added using the [`bundledPlugin()`](tools_intellij_platform_gradle_plugin_dependencies_extension.md#plugins) helper.

Minimum <path>build.gradle.kts</path> setup:

```kotlin
repositories {
  mavenCentral()
  intellijPlatform {
    defaultRepositories()
  }
}

dependencies {
  intellijPlatform {
    webstorm("<versionNumber>")
    bundledPlugin("JavaScript")
  }
}
```

</tab>

<tab title="Gradle IntelliJ Plugin (1.x)">

The configuration of WebStorm plugin projects follows the methods described in [Configuring Plugin Projects using the IntelliJ IDEA Product Attribute](dev_alternate_products.md#using-the-intellij-idea-product-attribute) and [Configuring the plugin.xml File](dev_alternate_products.md#configuring-pluginxml) for PhpStorm.

The table below summarizes the [](tools_gradle_intellij_plugin.md) attributes to set in the plugin project's Gradle build script.
Click on an entry in the table's *Attribute* column to go to the documentation about that attribute.
To see how these attributes appear in a similar Gradle build script for PhpStorm, see [](dev_alternate_products.md#configuring-gradle-build-script-using-the-intellij-idea-product-attribute).

| `gradle-intellij-plugin` Attribute                                               | Attribute Value                                                                                                                                                                                                                 |
|----------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [`intellij.type`](tools_gradle_intellij_plugin.md#intellij-extension-type)       | `IU` for [](idea_ultimate.md).                                                                                                                                                                                                  |
| [`intellij.version`](tools_gradle_intellij_plugin.md#intellij-extension-version) | `192.7142.36` Set to the same BRANCH.BUILD as the WebStorm target version.                                                                                                                                                      |
| [`intellij.plugins`](tools_gradle_intellij_plugin.md#intellij-extension-plugins) | Dependency on the `JavaScript` plugin.                                                                                                                                                                                          |
| [`runIde.ideDir`](tools_gradle_intellij_plugin.md#tasks-runide-idedir)           | <p>Path to locally installed target version of WebStorm. For example, for macOS:</p><p><path>/Users/\$USERNAME\$/Library/Application Support/JetBrains/Toolbox/apps/WebStorm/ch-0/192.7142.35/WebStorm.app/Contents</path>.</p> |

</tab>
</tabs>

### plugin.xml

The dependency on the WebStorm APIs must be declared in the <path>[plugin.xml](plugin_configuration_file.md)</path> file.
As described in [Modules Specific to Functionality](plugin_compatibility.md#modules-specific-to-functionality) table, the [`<depends>`](plugin_configuration_file.md#idea-plugin__depends) tags must declare `JavaScript`.

Note that for WebStorm, the <path>plugin.xml</path> file must also declare a dependency on `com.intellij.modules.platform` because `JavaScript` is not recognized as a module.
Otherwise, the plugin is assumed to be a [legacy plugin](plugin_compatibility.md#declaring-plugin-dependencies) and will not load in WebStorm.

## Available WebStorm APIs

> See [](webstorm_extension_point_list.md) for the complete list.
>
{style="note"}

See [Exploring APIs as a Consumer](plugin_compatibility.md#exploring-apis-as-a-consumer).
Test your plugin with any version of WebStorm you wish to support.

### Javascript Test Framework

<primary-label ref="2020.3"/>

To use existing test base classes, add `TestFrameworkType.Plugin.JavaScript` test-framework available from [](tools_intellij_platform_gradle_plugin_types.md#TestFrameworkType-Plugin).

Alternatively, specify `com.jetbrains.intellij.javascript:javascript-test-framework:$VERSION$` as `testImplementation` dependency explicitly (see [IntelliJ Platform Artifacts Repositories](intellij_artifacts.md#gradle-example-for-an-individual-module-from-the-intellij-platform)).

## Open Source Plugins for WebStorm

When learning new plugin development, it is helpful to have some representative projects for reference:

* [Vue.js](https://github.com/JetBrains/intellij-plugins/tree/master/vuejs)
* [JS Toolbox](https://github.com/andresdominguez/jsToolbox)
* [Require.js](https://github.com/Fedott/WebStormRequireJsPlugin)
* [deep-js-completion](https://github.com/klesun/deep-js-completion)
* [Run Configuration for TypeScript](https://plugins.jetbrains.com/plugin/10841-run-configuration-for-typescript)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

<!-- EP List Directory:
     /CSS/
     /plugins/JavaScriptLanguage/
     /plugins/NodeJS/
     /plugins/sass/
-->

# WebStorm Extension Point and Listener List

<link-summary>Overview of Extension Points and Listeners for WebStorm.</link-summary>

<tldr>

**Product-Specific Plugin Development**: [WebStorm](webstorm.md)

</tldr>

78 Extension Points and 5 Listeners for WebStorm

See [](intellij_platform_extension_point_list.md) for IntelliJ Platform and [](oss_plugins_extension_point_list.md) for additional plugins.

<include from="snippets.md" element-id="ep_list_legend"/>

## WebStorm

### WebStorm – Listeners

| Topic | Listener |
|-------|----------|
| [JestConsoleProperties#COVERAGE_CONFIG_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.javascript.jest.JestCoverageConfigListener)  ![Project-Level][project-level] | `JestCoverageConfigListener` |
| [PackageJsonFileManager#CHANGES_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.javascript.nodejs.packageJson.PackageJsonFileManager.PackageJsonChangesListener)  ![Project-Level][project-level] | `PackageJsonChangesListener` |
| [VitestConsoleProperties#COVERAGE_CONFIG_TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.javascript.testing.vitest.coverage.VitestCoverageConfigListener)  ![Project-Level][project-level] | `VitestCoverageConfigListener` |
| [JSLibraryManager#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.lang.javascript.library.JSLibraryManager.JSLibraryManagerChangeListener)  ![Project-Level][project-level] | `JSLibraryManagerChangeListener` |
| [JSRemoteModulesRegistry#TOPIC](https://jb.gg/ipe/listeners?topics=com.intellij.lang.javascript.modules.remote.JSRemoteModulesChangeListener)  | `JSRemoteModulesChangeListener` |


### com.intellij.css

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.css.classOrIdUsagesProvider](https://jb.gg/ipe?extensions=com.intellij.css.classOrIdUsagesProvider) | `CssClassOrIdUsagesProvider` |
| [com.intellij.css.cssFileReferenceProvider](https://jb.gg/ipe?extensions=com.intellij.css.cssFileReferenceProvider) | `CssFileReferenceProvider` |
| [com.intellij.css.cssInspectionFilter](https://jb.gg/ipe?extensions=com.intellij.css.cssInspectionFilter) | `CssInspectionFilter` |
| [com.intellij.css.cssIntentionFilter](https://jb.gg/ipe?extensions=com.intellij.css.cssIntentionFilter) | `CssIntentionFilter` |
| [com.intellij.css.cssRelatedStylesheetsProvider](https://jb.gg/ipe?extensions=com.intellij.css.cssRelatedStylesheetsProvider) | `CssRelatedStylesheetsProvider` |
| [com.intellij.css.dialect](https://jb.gg/ipe?extensions=com.intellij.css.dialect) | `CssDialect` |
| [com.intellij.css.elementDescriptorProvider](https://jb.gg/ipe?extensions=com.intellij.css.elementDescriptorProvider) | `CssElementDescriptorProvider` |
| [com.intellij.css.embeddedCssProvider](https://jb.gg/ipe?extensions=com.intellij.css.embeddedCssProvider) | `EmbeddedCssProvider` |
| [com.intellij.css.inclusionContext](https://jb.gg/ipe?extensions=com.intellij.css.inclusionContext) | `CssInclusionContext` |
| [com.intellij.css.structureViewChildrenProvider](https://jb.gg/ipe?extensions=com.intellij.css.structureViewChildrenProvider) | `CssStructureViewElementsProvider` |
| [com.intellij.css.supportedFileTypesProvider](https://jb.gg/ipe?extensions=com.intellij.css.supportedFileTypesProvider) | `CssSupportedFileTypesProvider` |

### intellij.javascript.impl.diagrams.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.javascript.module.provider](https://jb.gg/ipe?extensions=com.intellij.javascript.module.provider) | `JSModuleConnectionProvider` |

### intellij.javascript.web.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.javascript.webTypes](https://jb.gg/ipe?extensions=com.intellij.javascript.webTypes) ![Removal][removal] | `n/a` |

### js-plugin.xml

| Extension Point | Implementation |
|-----------------|----------------|
| [JavaScript.FlowJSAnnotatorCheckerProvider](https://jb.gg/ipe?extensions=JavaScript.FlowJSAnnotatorCheckerProvider) | `FlowJSAnnotatorCheckerProvider` |
| [JavaScript.JSImplicitElementsIndexFileTypeProvider](https://jb.gg/ipe?extensions=JavaScript.JSImplicitElementsIndexFileTypeProvider) | `JSImplicitElementsIndexFileTypeProvider` |
| [JavaScript.TypeScriptAnnotatorCheckerProvider](https://jb.gg/ipe?extensions=JavaScript.TypeScriptAnnotatorCheckerProvider) ![Project-Level][project-level] | `TypeScriptAnnotatorCheckerProvider` |
| [JavaScript.analysisHandlersFactory](https://jb.gg/ipe?extensions=JavaScript.analysisHandlersFactory) | `JSAnalysisHandlersFactory` |
| [JavaScript.classInheritorsProvider](https://jb.gg/ipe?extensions=JavaScript.classInheritorsProvider) | `JSClassInheritorsProvider` |
| [JavaScript.completionHelper](https://jb.gg/ipe?extensions=JavaScript.completionHelper) | `JSCompletionHelper` |
| [JavaScript.completionPlaceFilter](https://jb.gg/ipe?extensions=JavaScript.completionPlaceFilter) ![Project-Level][project-level] | `JSCompletionPlaceFilterProvider` |
| [JavaScript.componentUsageProvider](https://jb.gg/ipe?extensions=JavaScript.componentUsageProvider) | `JSComponentUsageProvider` |
| [JavaScript.conditionalCompilationDefinitionsProvider](https://jb.gg/ipe?extensions=JavaScript.conditionalCompilationDefinitionsProvider) | `JSConditionalCompilationDefinitionsProvider` |
| [JavaScript.dialectSpecificHandlersFactory](https://jb.gg/ipe?extensions=JavaScript.dialectSpecificHandlersFactory) | `JSDialectSpecificHandlersFactory` |
| [JavaScript.directFileReferenceResolverProvider](https://jb.gg/ipe?extensions=JavaScript.directFileReferenceResolverProvider) | `JSDirectFileReferenceResolverProvider` |
| [JavaScript.elementScopeProvider](https://jb.gg/ipe?extensions=JavaScript.elementScopeProvider) | `JSElementResolveScopeProvider` |
| [JavaScript.frameworkIndexingHandler](https://jb.gg/ipe?extensions=JavaScript.frameworkIndexingHandler) | `FrameworkIndexingHandler` |
| [JavaScript.frameworkSpecificHandler](https://jb.gg/ipe?extensions=JavaScript.frameworkSpecificHandler) | `JSFrameworkSpecificHandler` |
| [JavaScript.frameworkSpecificStructureViewExtension](https://jb.gg/ipe?extensions=JavaScript.frameworkSpecificStructureViewExtension) | `JSFrameworkSpecificStructureExtension` |
| [JavaScript.handlersFactory](https://jb.gg/ipe?extensions=JavaScript.handlersFactory) | `JSHandlersFactory` |
| [JavaScript.iconProvider](https://jb.gg/ipe?extensions=JavaScript.iconProvider) | `JSIconProvider` |
| [JavaScript.importCandidatesFactory](https://jb.gg/ipe?extensions=JavaScript.importCandidatesFactory) | `CandidatesFactory` |
| [JavaScript.importCandidatesFilterFactory](https://jb.gg/ipe?extensions=JavaScript.importCandidatesFilterFactory) | `FilterFactory` |
| [JavaScript.importModulePathStrategy](https://jb.gg/ipe?extensions=JavaScript.importModulePathStrategy) ![Experimental][experimental] | `JSImportModulePathStrategy` |
| [JavaScript.indexedFileTypeProvider](https://jb.gg/ipe?extensions=JavaScript.indexedFileTypeProvider) | `IndexedFileTypeProvider` |
| [JavaScript.inheritedLanguagesConfigurableProvider](https://jb.gg/ipe?extensions=JavaScript.inheritedLanguagesConfigurableProvider) | `JSInheritedLanguagesConfigurableProvider` |
| [JavaScript.intentionAndInspectionFilter](https://jb.gg/ipe?extensions=JavaScript.intentionAndInspectionFilter) | `IntentionAndInspectionFilter` |
| [JavaScript.itemPresentation](https://jb.gg/ipe?extensions=JavaScript.itemPresentation) ![Experimental][experimental] | `JSItemPresentationProvider` |
| [JavaScript.jestPackageProvider](https://jb.gg/ipe?extensions=JavaScript.jestPackageProvider) | `JestPackageProvider` |
| [JavaScript.jsDocCustomTagsHandler](https://jb.gg/ipe?extensions=JavaScript.jsDocCustomTagsHandler) ![Experimental][experimental] | `JSDocCustomTagsHandler` |
| [JavaScript.jsxImplementation](https://jb.gg/ipe?extensions=JavaScript.jsxImplementation) | `JSXImplementation` |
| [JavaScript.lang.templates](https://jb.gg/ipe?extensions=JavaScript.lang.templates) ![Project-Level][project-level] | [`Configurable`](%gh-ic%/platform/ide-core/src/com/intellij/openapi/options/Configurable.java) |
| [JavaScript.languageServiceProvider](https://jb.gg/ipe?extensions=JavaScript.languageServiceProvider) ![Project-Level][project-level] | `JSLanguageServiceProvider` |
| [JavaScript.languageServiceRemoteHelperFactory](https://jb.gg/ipe?extensions=JavaScript.languageServiceRemoteHelperFactory) | `Factory` |
| [JavaScript.minifiedFileIndexingProvider](https://jb.gg/ipe?extensions=JavaScript.minifiedFileIndexingProvider) ![Internal][internal] | `JSMinifiedFileIndexingProvider` |
| [JavaScript.moduleExportsProvider](https://jb.gg/ipe?extensions=JavaScript.moduleExportsProvider) | `JSModuleExportsProvider` |
| [JavaScript.moduleReferenceContributor](https://jb.gg/ipe?extensions=JavaScript.moduleReferenceContributor) | `JSModuleReferenceContributor` |
| [JavaScript.nodeModulesIndexableFileNamesProvider](https://jb.gg/ipe?extensions=JavaScript.nodeModulesIndexableFileNamesProvider) | `NodeModulesIndexableFileNamesProvider` |
| [JavaScript.nodeRunConfigurationExtension](https://jb.gg/ipe?extensions=JavaScript.nodeRunConfigurationExtension) | `AbstractNodeRunConfigurationExtension` |
| [JavaScript.predefinedLibraryProvider](https://jb.gg/ipe?extensions=JavaScript.predefinedLibraryProvider) | `JSPredefinedLibraryProvider` |
| [JavaScript.projectGeneratorPanelCustomizer](https://jb.gg/ipe?extensions=JavaScript.projectGeneratorPanelCustomizer) | `ProjectGeneratorSettingsCustomizer` |
| [JavaScript.resolveHelper](https://jb.gg/ipe?extensions=JavaScript.resolveHelper) | `JSResolveHelper` |
| [JavaScript.runConfigurationBuilder](https://jb.gg/ipe?extensions=JavaScript.runConfigurationBuilder) ![Project-Level][project-level] | `JSRunConfigurationBuilder` |
| [JavaScript.scanningFileListenerContributor](https://jb.gg/ipe?extensions=JavaScript.scanningFileListenerContributor) | `ScanningFileListenerContributor` |
| [JavaScript.smartCompletionContributor](https://jb.gg/ipe?extensions=JavaScript.smartCompletionContributor) | `JSSmartCompletionContributor` |
| [JavaScript.spellcheckerProvider](https://jb.gg/ipe?extensions=JavaScript.spellcheckerProvider) | `JSSpellcheckerProvider` |
| [JavaScript.testWatchProvider](https://jb.gg/ipe?extensions=JavaScript.testWatchProvider) | `JsTestWatchProvider` |
| [JavaScript.tsConfigCustomizer](https://jb.gg/ipe?extensions=JavaScript.tsConfigCustomizer) ![Experimental][experimental] | `TypeScriptConfigCustomizer` |
| [JavaScript.tsImportResolver](https://jb.gg/ipe?extensions=JavaScript.tsImportResolver) | `TypeScriptImportsResolverProvider` |
| [JavaScript.tsServiceExtension](https://jb.gg/ipe?extensions=JavaScript.tsServiceExtension) | `TypeScriptServiceExtension` |
| [JavaScript.typeScriptCompilerTypePatcher](https://jb.gg/ipe?extensions=JavaScript.typeScriptCompilerTypePatcher) | `TypeScriptCompilerTypePatcher` |
| [JavaScript.unresolvedReferenceErrorUpdater](https://jb.gg/ipe?extensions=JavaScript.unresolvedReferenceErrorUpdater) ![Experimental][experimental] | `JSUnresolvedReferenceErrorUpdater` |
| [JavaScript.webBundlerCssReferenceContributor](https://jb.gg/ipe?extensions=JavaScript.webBundlerCssReferenceContributor) | `JSModuleReferenceContributor` |
| [JavaScript.webBundlerDefinition](https://jb.gg/ipe?extensions=JavaScript.webBundlerDefinition) | `WebBundlerDefinition` |
| [JavaScript.xmlBackedClassProvider](https://jb.gg/ipe?extensions=JavaScript.xmlBackedClassProvider) | `XmlBackedJSClassProvider` |
| [NodeJS.runConfigurationLocationFilter](https://jb.gg/ipe?extensions=NodeJS.runConfigurationLocationFilter) | `NodeRunConfigurationLocationFilter` |
| [com.intellij.JavaScript.linter.descriptor](https://jb.gg/ipe?extensions=com.intellij.JavaScript.linter.descriptor) | `JSLinterDescriptor` |
| [com.intellij.JavaScript.linter.execution.suppressor](https://jb.gg/ipe?extensions=com.intellij.JavaScript.linter.execution.suppressor) | `JSLinterExecutionSuppressor` |
| [com.intellij.eslint.ruleMappersFactory](https://jb.gg/ipe?extensions=com.intellij.eslint.ruleMappersFactory) | `EslintRuleMappersFactory` |
| [com.intellij.javascript.extract.interface.extension](https://jb.gg/ipe?extensions=com.intellij.javascript.extract.interface.extension) | `JSCustomExtractInterfaceHandler` |
| [com.intellij.javascript.introduce.variable.extension](https://jb.gg/ipe?extensions=com.intellij.javascript.introduce.variable.extension) | `JSCustomIntroduceVariableHandler` |
| [com.intellij.javascript.json.schema.provider](https://jb.gg/ipe?extensions=com.intellij.javascript.json.schema.provider) | `JsonSchemaInJavaScriptProvider` |
| [com.intellij.javascript.library.externalDefinitionsContributor](https://jb.gg/ipe?extensions=com.intellij.javascript.library.externalDefinitionsContributor) | `TypeScriptExternalDefinitionsContributor` |
| [com.intellij.javascript.names.suggester](https://jb.gg/ipe?extensions=com.intellij.javascript.names.suggester) | `JSNamesSuggester` |
| [com.intellij.javascript.rename.extension](https://jb.gg/ipe?extensions=com.intellij.javascript.rename.extension) | `JSRenameExtension` |
| [com.intellij.jsbtFileManagerProvider](https://jb.gg/ipe?extensions=com.intellij.jsbtFileManagerProvider) | `JsbtFileManagerProvider` |
| [com.intellij.jsbtService](https://jb.gg/ipe?extensions=com.intellij.jsbtService) | `JsbtApplicationService` |

### org.jetbrains.plugins.node-remote-interpreter

| Extension Point | Implementation |
|-----------------|----------------|
| [org.jetbrains.plugins.node-remote-interpreter.nodeRemoteTargetRunSetupFactory](https://jb.gg/ipe?extensions=org.jetbrains.plugins.node-remote-interpreter.nodeRemoteTargetRunSetupFactory) | `NodeRemoteTargetRunSetupFactory` |

### org.jetbrains.plugins.sass

| Extension Point | Implementation |
|-----------------|----------------|
| [com.intellij.sass.extension](https://jb.gg/ipe?extensions=com.intellij.sass.extension) | `SassExtension` |

[deprecated]: https://img.shields.io/badge/-Deprecated-lightgrey?style=flat-square
[removal]: https://img.shields.io/badge/-Removal-red?style=flat-square
[obsolete]: https://img.shields.io/badge/-Obsolete-grey?style=flat-square
[experimental]: https://img.shields.io/badge/-Experimental-violet?style=flat-square
[internal]: https://img.shields.io/badge/-Internal-darkred?style=flat-square
[project-level]: https://img.shields.io/badge/-Project--Level-blue?style=flat-square
[non-dynamic]: https://img.shields.io/badge/-Non--Dynamic-orange?style=flat-square
[dumb-aware]: https://img.shields.io/badge/-DumbAware-darkgreen?style=flat-square
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Web Symbols
<primary-label ref="2022.3"/>

<link-summary>
Web Symbols framework simplifies web technology development by utilizing Symbol API and supporting custom syntaxes.
</link-summary>

> This API is available starting from 2022.3.1 and is currently in development and thus in an experimental state.
>
{style="warning"}

Web Symbols is a framework built on top of the platform's [Symbol API](symbols.md).
Its primary use is to reduce boilerplate when building support for web technologies,
however one can take advantage of it for any kind of technology.

Web Symbols API reduces work needed to provide reference resolution, find usages, documentation and rename refactoring.
It also provides an efficient JSON format (Web Types) for static symbol definitions.
Web Symbols core advantage, however, is the ability to evaluate symbol patterns.

Web frameworks tend to have custom syntaxes to enable various things,
e.g. through HTML attribute name (see [Model Queries example](websymbols_implementation.md#model-queries-example) to see Vue directive syntax).
The pattern evaluator is able to recognize symbols in different sections of the element name and provide reference resolution,
documentation, usage occurrence, etc.
It also supports rename refactoring for symbols originating from source code.
Another advantage is the flexibility of Web Symbols query.
It is very easy to contribute new symbols from various sources, which works perfectly for multi-sourced
(e.g. source code, library code, Web Types) applications.

Web Symbols API is not designed to create a support for new languages, but to rather work on meta
level, to support frameworks or libraries, which are giving additional meaning to the existing language features.
Currently, IDEs provide built-in integration for following language features (see [](websymbols_integration.md)):
- HTML: elements, attributes and attribute values
- CSS: properties, custom properties, functions, classes, pseudo-elements, pseudo-classes and parts
- JavaScript: string-literals, object properties, object literals and symbols (in JavaScript)

There's also the option to write integration for other languages.

Web Symbols framework provides also a convenient way to manage enablement of features through [`WebSymbolsContext` API](websymbols_context.md).

The following sub-pages provide information on how to implement Web Symbols for plugins and how to
define them statically through JSON schemas:
- [](websymbols_implementation.md)
- [](websymbols_web_types.md)
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Web Symbols Context
<primary-label ref="2022.3"/>

<link-summary>How to use Web Symbols context detection to manage enablement of plugin features.</link-summary>

One of the important qualities of well-written plugins is the enablement of its features
only when needed. For instance, if a user does not have a particular web framework in their project,
HTML files should not contain that framework-specific assistance.

Web Symbols framework provides various ways to detect current context
and retrieve it through `WebSymbolsContext.get(kind, ...)` methods.

For a particular `kind` of Web Symbol context, there is only one `name` detected, and it can be `null` if
the context `kind` is not present in the location.

## Location - `PsiElement` vs `VirtualFile`

The location can either be a `PsiElement`, or a `VirtualFile` with a `Project`. If the location is `PsiElement`,
the PSI tree of the containing file might be checked by `WebSymbolsContextProvider`, for instance, for some imports.
If the location is a `VirtualFile`, the PSI tree will not be acquired, so the resulting context may differ
from the one acquired on a `PsiElement` location. This is expected. The `VirtualFile` location is used to,
amongst others, determine a language to parse the file, so it cannot use a PSI tree. It must also be fast,
since it's used during the indexing phase.

Usually, the coding assistance logic is working with `PsiElement`, so it should be provided as the location
at which context is checked. It is important, though, to remember that the language of the file might only
be substituted if a context is detected on `VirtualFile` level.

A good example of how context detection can be used is web frameworks, since at a particular location only
one of the frameworks can be used. Various `WebSymbolsContextProvider` extensions and context rules are used
to determine which of the frameworks (Vue, Angular, React, Astro, etc.) to enable at the particular location.
And each of the plugins calls `WebSymbolsContext.get("framework", ...)` to check if it's their framework,
which is enabled.

## `WebSymbolsContextProvider`

The most straightforward way to contribute context is to register a [`WebSymbolsContextProvider`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/context/WebSymbolsContextProvider.kt)
through `com.intellij.webSymbols.context` extension point and override one of `isEnabled()` methods
to detect a context of a particular name and kind, e.g.:

```xml
<idea-plugin>
  <extensions defaultExtensionNs="com.intellij">
    <webSymbols.context
        kind="stimulus-context" name="true"
        implementation="com.intellij.stimulus.context.StimulusContextProvider"/>
  </extensions>
</idea-plugin>
```

The `StimulusContextProvider` can, for instance, check for JavaScript imports in the file to see if some additional Stimulus support
should be present in the file. The result should be cached, as `WebSymbolsContextProvider` methods are called very often.

```kotlin
class StimulusContextProvider : WebSymbolsContextProvider {
  override fun isEnabled(file: PsiFile): Boolean {
    if (file is HtmlCompatibleFile) {
      return CachedValuesManager.getCachedValue(file) {
        CachedValueProvider.Result.create(hasStimulusImport(file), file)
      }
    }
    return super.isEnabled(file)
  }
}
```

The presence of the context can be checked as follows:

```kotlin
WebSymbolsContext.get("stimulus-context", psiElement) == "true"
```

`WebSymbolsContextProvider` can also prevent a context from being detected. In this case, the `isForbidden` method should be overridden.
To prevent any context of a particular kind, use `any` as a name, e.g.:

```xml
<idea-plugin>
  <extensions defaultExtensionNs="com.intellij">
    <webSymbols.context
        kind="framework" name="any"
        implementation="com.intellij.python.js.PyTemplatesWebContextBlocker"/>
  </extensions>
</idea-plugin>
```

In this example, the `PyTemplatesWebContextBlocker` can check if the project has any Python templating engine enabled in the
location and forbid the `framework` context to disable web frameworks support, like Angular or Vue, which conflict with e.g., Blade support.

## Context Rules

`WebSymbolsContextProvider` is straightforward to use, but it is not very efficient. When many providers look for similar information,
a lot of calculations are repeated, affecting the overall performance of the IDE. One of the examples is when providers look for the presence
of some package manager dependency (Node package, Ruby Gem, Maven or Gradle dependency, etc.). To optimize this lookup, context rules can be provided.

### Web Types with Context Rules

One of the ways to provide context rules is through a [Web Types](websymbols_web_types.md) file.
A top-level property `context-config` should be specified, e.g.:

```json
{
  "$schema": "https://json.schemastore.org/web-types",
  "name": "vue-store-contexts",
  "version": "0.0.0",
  "contexts-config": {
    "vue-store": {
      "vuex": {
        "enable-when": {
          "node-packages": [
            "vuex"
          ],
          "ide-libraries": [
            "vuex"
          ]
        }
      },
      "pinia": {
        "enable-when": {
          "node-packages": [
            "pinia"
          ]
        }
      }
    }
  }
}
```

The first level property under `contexts-config` is the name of context `kind` and the next level property is the context `name`
for which the `enable-when` and `disable-when` rules are provided.

In IDEs prior to 2024.2, only a deprecated syntax is supported, where the first level property under `contexts-config` is the context `name`
and the context kind needs to be specified through `kind` property, e.g.:

```json
{
  "$schema": "https://json.schemastore.org/web-types",
  "name": "vue-store-contexts",
  "version": "0.0.0",
  "contexts-config": {
    "vuex": {
      "kind": "vue-store",
      "enable-when": {
        "node-packages": [
          "vuex"
        ],
        "ide-libraries": [
          "vuex"
        ]
      }
    },
    "pinia": {
      "kind": "vue-store",
      "enable-when": {
        "node-packages": [
          "pinia"
        ]
      }
    }
  }
}
```

Supported `enabled-when` rules are:
- `file-extensions` - file extension without leading `.`
- `file-name-patterns` - file name regular expression pattern
- `ide-libraries` - name of a JavaScript library user preconfigured in the IDE
- `project-tool-executables` - name of a tool executable present in the project, i.e., in `node_modules/.bin`
- `node-packages` - name of a Node.js package dependency
- `ruby-gems` - name of a Ruby gem

For `disable-when` supported rules are:
- `file-extensions` - file extension without leading `.`
- `file-name-patterns` - file name regular expression pattern

#### Context Proximity

When rules are processed, for each rule match, a proximity score is calculated. A lower score means that the match
is closer to the location. For instance, `file-extensions` and `file-name-patterns` match have proximity `0.0`, which
means that it's a perfect match. `ide-libraries`, or `ruby-gems` have match of value `Double.MAX_VALUE`,
because they match at project or module level.

`node-packages` rule, on the other hand, takes into account the layout of the file system and importance of the dependency,
because it looks for `package.json` files in the directory hierarchy of a `VirtualFile` location.
If there is a `package.json` file in the same directory as the `VirtualFile` location, it will have base proximity score `0.0`,
if it's in a parent directory, it will have base score `1.0`, etc. Next, the dependency importance is added to the base score:
- `peerDependecies` - `0.1`
- `bundledDependencies` - `0.2`
- `dependencies` - `0.3`
- `optionalDependencies` - `0.4`
- `devDependencies` - `0.5`
- indirect dependencies found in `node_modules` - `0.6`

After all rules have been processed, a context `kind` gets assigned the `name` with the lowest proximity match.

#### Shipping Web Types

Web Types can be embedded with a plugin by pointing to the file via extension point:

```xml
<idea-plugin>
  <extensions defaultExtensionNs="com.intellij">
    <webSymbols.webTypes
        source="web-types/vue-store-contexts@0.0.0.web-types.json"
        enableByDefault="true"/>
  </extensions>
</idea-plugin>
```

Web Types are designed to correlate to package manager dependencies, so their name should correspond to a
package dependency. However, in this case, we only want to contribute some context rules, which do not
correspond to any dependency, so we can name the file as we want to. Currently, only Node Package Manager
is supported, and JavaScript plugin must be loaded for the extension point to work. In the future, support
for other package managers should be added and extension point should work regardless of the presence of JavaScript plugin.

If context rules are tied to the presence of some NPM dependency, use the dependency name and
choose the minimal version, for which the Web Types should be loaded.

If context rules should always be loaded, then any name (preferably not used by any dependency) should be used
for the dependency and the `enableByDefault` attribute set to `true`.

### `WebSymbolsContextRulesProvider`

Context rules can also be provided dynamically through [`WebSymbolsContextRulesProvider`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/context/WebSymbolsContextRulesProvider.kt).

To do that, register a [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)
through `com.intellij.webSymbols.queryConfigurator` extension point and implement `getContextRulesProviders()`.
It is important that the results are stable, because any unexpected change in the rules will cause
rescanning of the project, dropping of all caches and restarting code analysis.

## `.ws-context` File
<primary-label ref="2024.1"/>

> The `.ws-context` file support is available since 2024.1.2.

The user can force a context with a `.ws-context` JSON file, e.g.:
```json
{
  "framework": "vue",
  "angular-template-syntax": "V_2",
  "src/**/app/**": {
    "framework": null,
    "app.component.html" : {
      "framework": "angular",
      "angular-template-syntax": "V_17"
    }
  },
  "src/**/p*-editor/*.html" : {
    "framework" : "angular"
  }
}
```

There are two types of properties supported in the file:
- `<context kind>` -> `<context name>`
- `<GLOB path>` -> context details object

The paths can be nested for simplicity. The last segment of the GLOB path is the file name pattern, which supports only `*` wildcard.
If the last segment is `**`, it matches all nested directories and files. Top level context properties are assumed to have `/**` pattern.

When choosing between different patterns matching the same file name, the following approach is taken:

1. Choose a pattern with the most path segments excluding `**` segments.
2. Choose a pattern which has a file name pattern (i.e., doesn't end with `**` or `/`).
3. Choose a pattern that was defined first.

## `WebSymbolsContextSourceProximityProvider`

`WebSymbolsContextSourceProximityProvider` allows providing evaluation logic for the context rules. It should be used when
working on integrating support for a package manager or a language which has a way to define global libraries. The provider should be registered
through `com.intellij.webSymbols.contextSourceProximityProvider` extension point.

The provider has a single method to be overridden — `calculateProximity()`. When `sourceKind` parameter matches the provider requirements,
it should calculate the [proximity](#context-proximity) of each source provided by `sourceNames`. For instance, when supporting a package manager and
the method is called with `sourceKind` being a `PackageManagerDependency` with the appropriate name, the provider should calculate the [proximity](#context-proximity)
of each dependency provided through `sourceNames` parameter. The `Result` object contains also a `modificationTrackers` set field, which
is used to track when the cached results should be recalculated. It is crucial to have as few trackers as possible and refresh the cache as seldom as possible
because the results are used in every call to the `WebSymbolContext.get()` method.

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Implementing Web Symbols
<primary-label ref="2022.3"/>

<link-summary>Implementation details for the Web Symbols API.</link-summary>

The core element of the framework is a
[`WebSymbol`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/WebSymbol.kt),
representing an entity in the Web Symbols model.
This symbol is characterized by `namespace`, `kind` and `name` properties, with its lifecycle encapsulated
within a single read action.
To ensure its survival between read actions, use `WebSymbol.createPointer()` to create a symbol pointer.
Provided the symbol remains valid, dereferencing the pointer will return a new instance of the symbol.
It should be noted that during a write action, the symbol might not survive a PSI tree commit.
Therefore, creating a pointer prior to the commit and dereferencing it post-commit is advised.

The property `namespace` describes which language or concept (not tied to a particular language) the symbol belongs to,
and `kind` describes which group of symbols within that particular language or concept it belongs to.
Examples:

- a CSS property: `namespace: CSS`, `kind: properties`
- a Java class: `namespace: Java`, `kind: classes`
- a plugin extension: `namespace: ij-plugin`, `kind: extensions`

A Web Symbol can originate from source code analysis, or it can be a symbol statically defined
through [Web Types](websymbols_web_types.md) (JSON) or some other custom format.
In both cases, such a symbol can have some `source` defined.
Each symbol is treated by the framework the same, regardless of their origin.

## General Properties

`WebSymbol` has a number of properties which are used across IDE features:

{style="full"}
`namespace`
: Describes which language or concept the symbol belongs to.

`kind`
: Describes which group of symbols within the particular language or concept (namespace) the symbol belongs to.
The kind should be plural in form, e.g. "attributes".

`name`
: The name of the symbol. If the symbol does not have a pattern, the name will be used as-is for matching.

`origin`
: Specifies where this symbol comes from.
Besides descriptive information like framework, library, version, or default icon,
it also provides an interface to load symbol types and icons.

`icon`
: An optional icon associated with the symbol, which is going to be used across the IDE.
If none is specified, a default icon of the `origin` will be used and if that’s not available, a default icon for symbol `namespace` and `kind`.

`priority`
: Symbols with higher priority will have precedence over those with lower priority, when matching is performed.
Symbols with higher priority will also show higher on the completion list.

`proximity`
: Provides an additional way to sort symbols in the code completion list within a particular priority.
The value must be a non-negative integer, and the higher proximity, the higher the symbol would be on the list.

`apiStatus`
: *Since 2023.2 - replaces `deprecated` and `experimental` properties*
: Documents API status of the symbol. It is one of the sub-interfaces of [`WebSymbolApiStatus`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/WebSymbolApiStatus.kt):
   `Stable`, `Experimental` or `Deprecated`. Deprecated symbols are appropriately highlighted in the code editor, code completion, and quick documentation.

`deprecated`
: *Removed in 2023.2 - replaced with `apiStatus` property*
: Documents, whether the symbol is deprecated. Deprecated symbols are appropriately highlighted in the code editor,
code completion, and quick documentation.

`experimental`
: *Removed in 2023.2 - replaced with `apiStatus` property*
: Documents, whether the symbol is considered an experimental feature and should be used with caution and might be
removed or its API altered in the future.

`required`
: Whether this symbol is required.
What "is required" means depends on the symbol.
For instance, for an HTML attribute, it would mean that the attribute is required to be present for the particular HTML element.
For JavaScript property, it would mean that it is not optional, so it cannot be `undefined`.

`defaultValue`
: If the symbol represents some property, variable, or anything that can hold a value, this property documents what is the default value.

`type`
: The type of the symbol. The type can be interpreted only within the context of symbol origin and in regard to its namespace and kind.
The type may be a language type, coming from e.g., Java or TypeScript, or it may be any arbitrary value.
Usually a type would be associated with symbols, which can hold a value, or represent some language symbol, like class, method, etc.

`psiContext`
: A PsiElement, which is a file or an element, which can be used to roughly locate the source of the symbol within a project to provide
a context for loading additional information, like types.
If the symbol is
[`PsiSourcedWebSymbol`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/PsiSourcedWebSymbol.kt)
(see [](#psisourcedwebsymbol)), then `psiContext` is equal to `source`.

`properties`
: Various symbol properties. There should be no assumption on the type of properties.
Properties can be used by plugins to provide additional information on the symbol.
See [Web Types Special Properties](websymbols_web_types.md#special-properties) section for reference to the custom properties supported by IDEs.

`presentation`
: Returns
[`TargetPresentation`](%gh-ic%/platform/core-api/src/com/intellij/platform/backend/presentation/TargetPresentation.kt)
used by
[`SearchTarget`](%gh-ic%/platform/lang-impl/src/com/intellij/find/usages/api/SearchTarget.kt)
and
[`RenameTarget`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/rename/api/RenameTarget.kt).
Default implementations of
[`WebSymbolRenameTarget`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/refactoring/WebSymbolRenameTarget.kt)
and
[`WebSymbolSearchTarget`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/search/WebSymbolSearchTarget.kt)
use the `presentation` property.

## Documentation Properties

The following properties handle generation of
[Quick Doc](https://www.jetbrains.com/help/idea/viewing-reference-information.html#inline-quick-documentation)
in the IDE:

{style="full"}
`description`
: An optional text, which describes the symbol's purpose and usage.
It is rendered in the documentation popup or view.

`descriptionSections`
: Additional sections, to be rendered in the symbols’ documentation.
Each section should have a name, but the contents are optional.

`docUrl`
: An optional URL to a website with detailed symbol's documentation

`documentation`
: *Removed in 2023.1.1 - replaced by `createDocumentation()`*
: An interface holding information required to render documentation for the symbol.
To customize symbols documentation, one can override the method, or implement[`WebSymbolDocumentationCustomizer`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/documentation/WebSymbolDocumentationCustomizer.kt).
[`WebSymbolDocumentation`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/documentation/WebSymbolDocumentation.kt)
interface provides builder methods for customizing the documentation.
`with*` methods return a copy of the documentation with customized fields.

## Query Related Properties

The following properties are related to name matching and code completion queries:

{style="full"}
`pattern`
: The pattern to match names against.
As a result of pattern matching, a [`WebSymbolMatch`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolMatch.kt) will be created.
A pattern may specify that a reference to other Web Symbols is expected in some part of it.
For such places, appropriate segments with referenced Web Symbols will be created and navigation, validation, and refactoring support are available out-of-the-box.

`queryScope`
: When a pattern is being evaluated, matched symbols can provide additional scope for further resolution in the pattern.
By default, the `queryScope` returns the symbol itself

`virtual`
: Some symbols represent only a framework syntax, which does not translate to a particular symbol in the runtime.
For instance, a Vue directive, which needs to be prefixed with `v-` will result in some special code generated,
but as such is not a real HTML attribute. This distinction allows us to ignore such symbols when looking for references.

`abstract`
: Some symbols may have a lot in common with each other, and one can use abstract symbols as their super symbol.
For performance reasons, only statically defined symbols ([](websymbols_web_types.md),
[Custom Elements Manifest](https://github.com/webcomponents/custom-elements-manifest))
can inherit from other statically defined symbols.
For dynamically defined symbols, regular class inheritance should be used.

`extension`
: Specifies whether the symbol is an extension.
When matched along with a non-extension symbol, it can provide or override some properties of the symbol, or it can extend its scope contents.

## HTML support

`attributeValue`
: A special property to support symbols representing HTML attributes.
It can specify the kind (plain, expression, no-value), type (boolean, number, string, enum, complex, of-match),
whether an attribute value is required, a default value, and the result type of value expression in the appropriate language.
If `COMPLEX` type is set, the value of `langType` will be used and if `OF_MATCH`, the type of the `symbol` will be used.
When merging information from several segments in the WebSymbolMatch, first non-null property values take precedence.
By default - when properties are `null` - attribute value is of plain type and is required.

## Methods
{#query-methods}

{style="full"}
`createPointer()`
: Returns the pointer to the symbol, which can survive between read actions.
The dereferenced symbol should be valid, e.g., any PSI-based properties should return valid `PsiElement`s.

`getModificationCount()`
: Symbols can be used in
[`CachedValue`](%gh-ic%/platform/core-api/src/com/intellij/psi/util/CachedValue.java)s
as dependencies.
If a symbol instance can mutate over time, it should properly implement this method.

`isEquivalentTo()`
: Returns true if two symbols are the same or equivalent for resolve purposes.

`adjustNameForRefactoring()`
: Web Symbols can have various naming conventions.
This method is used by the framework to determine a new name for a symbol based on its occurrence.

`getDocumentationTarget()`
: *Since 2023.1.1*
: Used by the Web Symbols framework to get a [`DocumentationTarget`](%gh-ic%/platform/lang-impl/src/com/intellij/platform/backend/documentation/DocumentationTarget.kt), which handles documentation
rendering for the symbol.
The default implementation will use `createDocumentation()` to render the documentation.

`createDocumentation()`
: *Since 2023.1.1 - replaces `documentation` property*
: Returns [`WebSymbolDocumentation`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/documentation/WebSymbolDocumentation.kt) -
an interface holding information required to render documentation for the symbol.
By default, its contents are built from the available Web Symbol information. To customize symbols documentation, one can override the method, or implement
[`WebSymbolDocumentationCustomizer`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/documentation/WebSymbolDocumentationCustomizer.kt).
:
[`WebSymbolDocumentation`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/documentation/WebSymbolDocumentation.kt)
interface provides builder methods for customizing the documentation.
`with*` methods return a copy of the documentation with customized fields.


## `PsiSourcedWebSymbol`

A symbol should implement
[`PsiSourcedWebSymbol`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/PsiSourcedWebSymbol.kt)
if its declaration is a regular `PsiElement`, e.g., a variable or a declared type.
Once a symbol implements this interface, it can be searched and refactored together with the PSI element declaration.
In case a symbol is part of a `PsiElement` (for instance, being part of a string literal),
spans multiple PSI elements, or does not correlate one-to-one with a PSI element,
contribution of a dedicated declaration provider instead of implementing this interface is recommended.

### Properties
{#psisourcedwebsymbol-properties}

{style="full"}
`source`
: The `PsiElement`, which is the symbol declaration.

## `CompositeWebSymbol`

[`WebSymbolMatch`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolMatch.kt)
and some special symbols can have a name, which consists of other Web Symbols.

### Properties
{#compositewebsymbol-properties}

{style="full"}
`nameSegments`
: List of
[`WebSymbolNameSegment`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/WebSymbolNameSegment.kt).
Each segment describes a range in the symbol name.
Segments can be built of other Web Symbols and/or have related matching problems - missing required part,
unknown symbol name or be a duplicate of another segment.
See the [Model Queries Example](#model-queries-example) section for an example.

## Web Symbols Scope

Web Symbols are contained within a loose model built from Web Symbols scopes, each time anew for a particular context.
Each Web Symbol is also a
[`WebSymbolsScope`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/WebSymbolsScope.kt)
and it can contain other Web Symbols.
For instance, an HTML element symbol would contain some HTML attributes symbols, or a JavaScript class symbol would contain field and method symbols.
When configuring queries, Web Symbols scopes are added to the list to create an initial scope for symbols resolve.

### Methods
{#websymbolsscope-methods}

{style="full"}
`getSymbols()`
: Returns symbols within the scope. If provided `name` is `null`, no pattern evaluation will happen and all symbols of a particular
kind and from a particular namespace will be returned.

`getCodeCompletions()`
: Returns code completions for symbols within the scope.

`isExclusiveFor()`
: When scope is exclusive for a particular namespace and kind, resolve will not continue down the stack during pattern matching.

`createPointer()`
: Returns the pointer to the symbol scope, which can survive between read actions. The dereferenced symbol scope should be valid.

`getModificationCount()`
: Symbol scopes are used in CachedValues as dependencies for query executors.
If a symbol scope instance can mutate over time, it should properly implement this method.

When implementing a scope containing many elements, an extension of
[`WebSymbolsScopeWithCache`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/WebSymbolsScopeWithCache.kt) is advised.
This structure caches the list of symbols and uses an efficient cache mechanism to speed up queries.
On extension of this class, it's only necessary to override `initialize()` and provide parameters to
the super constructor to specify the caching strategy for the results.

## Model Queries

Web Symbols can contain patterns, which allow to compose them from other Web Symbols.
To find which symbols match available patterns, we need to make a match query.
One can also run a code completion query, which will produce a list of valid completions in the provided context.

To perform a query, create a
[`WebSymbolsQueryExecutor`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryExecutor.kt)
using
[`WebSymbolsQueryExecutorFactory`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryExecutorFactory.kt).
The query executor will be configured by all the registered
[`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)'s
based on the provided PSI context.
Configurators will provide initial Web Symbol scopes, rules for calculating Web Symbols context, and rules for symbol names conversion.

The result of the match query is a list of WebSymbols.
Some of them might be
[`WebSymbolMatch`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolMatch.kt)es.
Such objects represent complex matches when patterns are used.
Web Symbol Match has `nameSegments` property, which precisely describes how segments of the name relate to referenced Web Symbols and
whether there are any problems with resolution or the name itself.

When working with code completion, one can query for the list of code completions.
To properly calculate completions, a position in the current text under completion is required.
As a result, a list of
[`WebSymbolCodeCompletionItem`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/completion/WebSymbolCodeCompletionItem.kt)
will be provided.

### Example
{#model-queries-example}

Let’s take a Vue directive as an example.
It is a special HTML attribute processed by the Vue framework in runtime or during compile,
which results in additional code being attached to the DOM element.
Its structure looks as follows:

![JavaScript Example Image](websymbols_web_types.svg){ width="706"}

An example of how Vue directive might be declared in Web Types is here.
Once a match query is run on `v-on:click.once.alt`, we will get a
[`WebSymbolMatch`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolMatch.kt)
with the following segments:

1. `v-`: Vue directive pattern symbol
2. `on`: Vue `on` directive
3. `:`
4. `click`: DOM `click` event symbol
5. `.`
6. `once`: Vue `on` directive `once` modifier
7. `alt`: Vue `on` directive `alt` modifier

### Patterns

Usually one would create such elements using Web Types, but sometimes there might be a need to do that programmatically.

To simplify resolution and make it less ambiguous,
a segment to match is selected by taking everything up to static prefixes of the following patterns.
Thus, if we want to have symbol references and regular expressions in the pattern,
they either have to terminate the pattern or must be followed by a static text.
A regular pattern static prefix is also considered a static text.

There are seven types of patterns:

1. String match: try to match an exact text, the match is case-sensitive
2. Regular expression match: try to match a regular expression, the match can be case-insensitive
3. Symbol reference placeholder: a symbol reference resolve will be attempted when this pattern is reached.
   A resolve will be made by the symbols provider from an enclosing complex pattern.
   If none of the symbols match the segment, the segment will have `UNKNOWN_SYMBOL` problem reported.
   The matched symbol might be a WebSymbolMatch itself, which allows for nesting patterns.
4. Pattern sequence: a sequence of patterns. If some patterns are not matched, an empty segment with `MISSING_REQUIRED_PART` will be created.
5. Complex pattern: this pattern is called complex, because it makes several things:
    - The provided patterns are treated as alternatives.
    - It can have symbols resolver, which is used by nested symbol reference placeholder patterns.
    - It allows adding an additional scope to resolve stack
    - A complex pattern might be optional, in which case its absence is not reported as an error in an enclosing sequence or complex pattern
    - The match can be repeated, and any duplicate segments might have `DUPLICATED` problem set
    - It can override proximity and priority, which by default is based on priority and proximity of matched symbols.

   {style="alpha-lower"}
6. Completion auto popup: a special pattern, which works only in code completion queries.
   It delimits the place where when creating code completion items, pattern evaluation should be stopped and `...` added.
   Selecting such items will result in adding the prefix part, and then another code completion popup will open.
   The pattern can be sticky, which means that the prefix will be shown in the nested code completion list.
7. Single symbol reference (*since 2023.2*): try to match text against the symbol name, but put a reference to another element.

### Query Context

When performing queries, some symbols should be excluded and others included in particular contexts.
For instance, if we have an Angular project, none of the Vue components should be available.
[`WebSymbolsContext`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/context/WebSymbolsContext.kt)
is created using rules provided by `WebSymbolsQueryConfigurator`s with the addition of custom
[`WebSymbolsContextProvider`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/context/WebSymbolsContextProvider.kt).
As a result, for each kind of context, there is at most a single name assigned.
`WebSymbolsContext` can also be used outside the
[`WebSymbolsQueryExecutor`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryExecutor.kt)
as an efficient way to determine whether to enable or disable particular functionality in the IDE based on PSI or VFS context.

### Query stack

The stack is used as a scope for resolving symbols.
All scopes provided by
[`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)s
together with the list of additional scopes passed as arguments to the query create an initial query stack.
Each time a symbol is matched, the list returned by `queryScope` property is added to the stack for any subsequent matches further right the pattern.

## Declarations, References, Search, Refactoring

To provide locations of declarations of Web Symbols, which are not
[`PsiSourcedWebSymbol`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/PsiSourcedWebSymbol.kt)s,
a dedicated
[`WebSymbolDeclarationProvider`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/declarations/WebSymbolDeclarationProvider.kt)
should be registered.
It should return a list of
[`WebSymbolDeclaration`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/declarations/WebSymbolDeclaration.kt)s
in a particular `PsiElement` at a particular offset.

Similarly, to provide references, a
[`PsiSymbolReferenceProvider`](%gh-ic%/platform/core-api/src/com/intellij/model/psi/PsiSymbolReferenceProvider.java)
should be registered.
It should return
[`WebSymbolReference`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/references/WebSymbolReference.kt)
objects from `PsiSymbolReferenceProvider.getReferences()`.

To support search/finding usages, Web Symbol needs to implement
[`SearchTarget`](%gh-ic%/platform/lang-impl/src/com/intellij/find/usages/api/SearchTarget.kt)
or a
[`WebSymbolSearchTarget`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/search/WebSymbolSearchTarget.kt)
needs to be provided for it through a
[`SymbolSearchTargetFactory`](%gh-ic%/platform/lang-impl/src/com/intellij/find/usages/symbol/SymbolSearchTargetFactory.java).

To support name refactoring, the
[`RenameTarget`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/rename/api/RenameTarget.kt)
interface needs to be implemented,
or a
[`WebSymbolRenameTarget`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/refactoring/WebSymbolRenameTarget.kt)
needs to be provided for it through a
[`SymbolRenameTargetFactory`](%gh-ic%/platform/lang-impl/src/com/intellij/refactoring/rename/symbol/SymbolRenameTargetFactory.java).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Web Symbols Integration with Language Features
<primary-label ref="2022.3"/>

<link-summary>How to integrate your Web Symbols with a particular language feature.</link-summary>

IDEs provide built-in support for Web Symbols integration with main language features of HTML, CSS, and JavaScript.
Contribution of static symbols can be achieved through Web Types or Custom Elements Manifest,
or by creating and registering a [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt) extension.

The implementation of [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt) requires overriding `getScope()`.
This process involves the creation of a `WebSymbolScope` list,
depending on the provided `PsiElement` (`element` parameter) and `WebSymbolContext` (`context` parameter).
The following list of supported language features outlines the types of `PsiElement`s that can be expected
for each supported language feature.

## Supported Language Features

### HTML

#### Elements
{#html-elements}

**Namespace**: `html`

**Kind**: `elements`

Web Symbols representing available HTML elements.
HTML element symbols can be contributed statically or dynamically (through
[`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)).
The statically contributed symbols are available globally, depending on the context setting of the contributing Web Types file.

For dynamic contributions, the `WebSymbolsQueryConfigurator.getScope()`'s `element` parameter can be:
- [`HtmlTag`](%gh-ic%/xml/xml-psi-api/src/com/intellij/psi/html/HtmlTag.java) - Web Symbols should represent available HTML elements. The HTML tag's actual name should not be taken into account when building the scope.
- `CssElement` - Web Symbols should represent available HTML elements within a particular CSS file.

The matched Web Symbol is taken as a scope for matching HTML attributes of the tag.

#### Attributes
{#html-attributes}

**Namespace**: `html`

**Kind**: `attributes`

Web Symbols representing available HTML attributes.
HTML attribute symbols can be contributed statically or dynamically (through [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)).
The statically contributed symbols are available globally, depending on the context setting of the contributing Web Types file.
If the containing tag is matched to a Web Symbol, it is added to the scope for attribute matching.

For dynamic contributions, the `WebSymbolsQueryConfigurator.getScope()`'s `element` parameter can be:
- [`XmlAttribute`](%gh-ic%/xml/xml-psi-api/src/com/intellij/psi/xml/XmlAttribute.java) - Web Symbols should represent available HTML attributes for matching. The HTML attribute actual name should not be taken into account when building the scope. However, the parent HTML tag and other attributes can be taken into account when building the scope.
- [`HtmlTag`](%gh-ic%/xml/xml-psi-api/src/com/intellij/psi/html/HtmlTag.java) - Web Symbols should represent available HTML attributes for matching. The HTML tag and other attributes can be taken into account when building the scope.

Dedicated support for `WebSymbol` interface properties:
- `required` - if `true`, a warning will be shown if the attribute is missing. Does not apply to `virtual` attributes.
- `default` - the default value of the attribute, if `attributeValue.default` is `null`.
- `attributeValue` - provides information about the attribute value, see [`attributeValue`](websymbols_implementation.md#html-support) reference.

### CSS

#### Properties
{#css-properties}

**Namespace**: `css`

**Kind**: `properties`

Web Symbols representing available CSS properties. [Custom CSS properties (variables)](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties) names should be prefixed with `--`.
CSS properties can be contributed statically or dynamically (through [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)).
The statically contributed symbols are available globally, depending on the context setting of the contributing Web Types file.

Within a CSS file, the additional scope for matching properties is built from Web Symbols matching HTML element names from terminal selectors from the enclosing ruleset.

Within an HTML element `style` attribute value, an additional scope is built from Web Symbols matching the enclosing HTML element.

Scope for custom properties (variables) references (arguments for [`var()`](https://developer.mozilla.org/en-US/docs/Web/CSS/var) function) is built the same way
as for properties. Only properties with names starting with `--` are taken into account.

For dynamic contributions, the `WebSymbolsQueryConfigurator.getScope()`'s `element` parameter can be:
- `CssDeclaration` - Web Symbols should represent available CSS properties for matching. The CSS declaration actual name should not be taken into account when building the scope.

#### Pseudo-elements
{#css-pseudo-elements}

**Namespace**: `css`

**Kind**: `pseudo-elements`

Web Symbols representing available [CSS pseudo-elements](https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-elements).
Symbols names *should not* be prefixed with `::`.
CSS pseudo-elements can be contributed statically or dynamically (through [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)).
The statically contributed symbols are available globally, depending on the context setting of the contributing Web Types file.

The additional scope for matching pseudo-elements is built from Web Symbols matching HTML element name preceding the pseudo-element keyword.

For dynamic contributions, the `WebSymbolsQueryConfigurator.getScope()`'s `element` parameter can be:
- `CssPseudoSelector` - Web Symbols should represent available CSS pseudo-elements for matching. The CSS pseudo-element actual name should not be taken into account when building the scope.

Dedicated support for `WebSymbol` interface properties:
- `properties[WebSymbol.PROP_ARGUMENTS]` - `true` if pseudo-element keyword accepts arguments.

#### Pseudo-classes
{#css-pseudo-classes}

**Namespace**: `css`

**Kind**: `pseudo-classes`

Web Symbols representing available [CSS pseudo-classes](https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes).
Symbols names *should not* be prefixed with `:`.
CSS pseudo-classes can be contributed statically or dynamically (through [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)).
The statically contributed symbols are available globally, depending on the context setting of the contributing Web Types file.

The additional scope for matching pseudo-classes is built from Web Symbols matching HTML element name preceding the pseudo-class keyword.

For dynamic contributions, the `WebSymbolsQueryConfigurator.getScope()`'s `element` parameter can be:
- `CssPseudoSelector` - Web Symbols should represent available CSS pseudo-classes for matching. The CSS pseudo-class actual name should not be taken into account when building the scope.

Dedicated support for `WebSymbol` interface properties:
- `properties[WebSymbol.PROP_ARGUMENTS]` - `true` if pseudo-class keyword accepts arguments.

#### Functions
{#css-functions}

**Namespace**: `css`

**Kind**: `functions`

Web Symbols representing available [CSS functions](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Functions).
CSS functions can be contributed statically or dynamically (through [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)).
The statically contributed symbols are available globally, depending on the context setting of the contributing Web Types file.

The additional scope for matching functions is built from Web Symbols matching the CSS property name, the value of which is being calculated.

For dynamic contributions, the `WebSymbolsQueryConfigurator.getScope()`'s `element` parameter can be:
- `CssFunction` - Web Symbols should represent available CSS functions for matching. The CSS function actual name should not be taken into account when building the scope.

#### Classes
{#css-classes}

**Namespace**: `css`

**Kind**: `classes`

Web Symbols representing available CSS classes.
Symbols names *should not* be prefixed with `.`.
CSS classes can be contributed statically or dynamically (through [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)).
The statically contributed symbols are available globally, depending on the context setting of the contributing Web Types file.

Within CSS file, an additional scope for matching classes is built from Web Symbols matching HTML element name preceding the class keyword.

Within HTML attribute `class` the additional scope for matching classes is built from Web Symbols matching the enclosing HTML element name.

For dynamic contributions, the `WebSymbolsQueryConfigurator.getScope()`'s `element` parameter can be:
- `CssClass` - Web Symbols should represent available CSS classes for matching. The CSS class actual name should not be taken into account when building the scope.
- [`XmlAttributeValue`](%gh-ic%/xml/xml-psi-api/src/com/intellij/psi/xml/XmlAttributeValue.java) - Web Symbols should represent available CSS classes for matching within the attribute value.

#### Parts
{#css-parts}

_2023.2+_

**Namespace**: `css`

**Kind**: `parts`

Web Symbols representing available HTML element parts for matching with [CSS `::part`](https://developer.mozilla.org/en-US/docs/Web/CSS/::part) pseudo-element.
CSS parts can be contributed statically or dynamically (through [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)).
The statically contributed symbols are available globally, depending on the context setting of the contributing Web Types file.

Within CSS file, an additional scope for matching classes is built from Web Symbols matching HTML element name preceding the `::part` keyword.

For dynamic contributions, the `WebSymbolsQueryConfigurator.getScope()`'s `element` parameter can be:
- `CssTermImpl` - Web Symbols should represent available CSS parts for matching. The CSS part's actual name should not be taken into account when building the scope.


### JavaScript

#### String Literals
{#js-string-literals}
_2023.2+_

**Namespace**: `js`

**Kind**: `string-literals`

Web Symbols representing JavaScript or TypeScript string literals available in a particular location.
Only dynamically contributed string literal symbols (through [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)) have built-in support.

The `WebSymbolsQueryConfigurator.getScope()`'s `element` parameter can be:
- a `JSLiteralExpression`
- an unqualified `JSReferenceExpression`,
  which parent is *not* `JSIndexedPropertyAccessExpression`, `JSCallExpression` or `JSProperty`

#### Properties
{#js-properties}
_2023.2+_

**Namespace**: `js`

**Kind**: `properties`

Web Symbols represent properties of an object, which is a result of a JavaScript or TypeScript expression.
Only dynamically contributed properties symbols (through [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)) have built-in support.

The `WebSymbolsQueryConfigurator.getScope()`'s `element` parameter can be:
  - `JSObjectLiteralExpression` - Web Symbols should represent expected properties
  - `JSExpression` - Web Symbols should represent available properties the expression's result.
    Parent expression is `JSReferenceExpression` or `JSIndexedPropertyAccessExpression`.

Dedicated support for `WebSymbol` interface properties:
  - `type` - if the type is `JSType`, it will be used in JavaScript type evaluator as the type of the property
  - `required` - the JavaScript property is treated as non-optional
  - `properties[WebSymbol.PROP_READ_ONLY]` - the JavaScript property is treated as read-only

#### Symbols
{#js-symbols}

_2023.2+_

**Namespace**: `js`

**Kind**: `symbols`

Web Symbols representing JavaScript symbols available for resolve of an unqualified JavaScript reference expression.
Only dynamically contributed symbols (through [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)) have built-in support.

The `WebSymbolsQueryConfigurator.getScope()`'s `element` parameter can be:
- an unqualified `JSReferenceExpression` - Web Symbols should represent possible symbols to which JavaScript reference could resolve. The reference to actual name should not be taken into account when building the scope.

Dedicated support for `WebSymbol` interface properties:
- `type` - if the type is `JSType`, it will be used in JavaScript type evaluator as the type of the symbol
- `properties[WebSymbol.PROP_KIND]` - the kind of the symbol, one of [`WebSymbolJsKind`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/js/WebSymbolJsKind.kt) enum values. The kind will be used to render the appropriate icon in the code completion popup

  *Integration with unqualified reference resolution is not available in TypeScript code*

#### DOM Events
{#js-events}
**Namespace**: `js`

**Kind**: `events`

Web Symbols representing available DOM events.
DOM events can be contributed statically or dynamically (through [`WebSymbolsQueryConfigurator`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/query/WebSymbolsQueryConfigurator.kt)).
The statically contributed symbols are available globally, depending on the context setting of the contributing Web Types file.

The additional scope for matching DOM events is built from Web Symbols matching enclosing HTML element name.

For dynamic contributions, the `WebSymbolsQueryConfigurator.getScope()`'s `element` parameter can be:
- [`HtmlTag`](%gh-ic%/xml/xml-psi-api/src/com/intellij/psi/html/HtmlTag.java) - Web Symbols should represent available DOM events for matching.


## Using Patterns for Domain-Specific Mappings

When a language feature, such as an HTML element, is capable of representing an entity from a framework,
like a Vue component, it may be beneficial to use a custom symbol kind with a domain-specific name (for example, `vue-components`),
and establish a mapping from this to the language feature via a pattern:

```json
{
  "contributions": {
    "html": {
      "elements": [
        {
          "name": "Vue component",
          "pattern": {
            "items": "/html/vue-components"
          },
          "attributes": [
            {
              "name": "Component property",
              "pattern": {
                "or": [
                  {
                    "items": "props",
                    "priority": "highest"
                  }
                ]
              },
              "value": {
                "type": "of-match"
              }
            }
          ]
        }
      ]
    }
  }
}
```

Note that in this example, attributes are produced from `html/props` symbols.
For Vue component, a set of named values, which can be provided to the component instance are called `props`.
Now, our Vue component definition can have a more domain-specific look:

```json
{
  "contributions": {
    "html": {
      "vue-components": [
        {
          "name": "MyVueComponent",
          "description": "This is the component you always needed in your application",
          "props": [
            {
              "name": "listen-to",
              "type": "string | HTMLElement | Document | Window | (() => HTMLElement)",
              "description": "The scrolling element to listen to.",
              "default": "document"
            }
          ]
        }
      ]
    }
  }
}
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Web Types
<primary-label ref="2022.3"/>

<link-summary>Web Types - contributing statically defined Web Symbols through JSONs.</link-summary>

Web Types is a JSON metadata format, which provides an easy way to contribute statically defined Web Symbols.
The JSON Web Types detailed schema can be accessed by
[following this link](https://github.com/JetBrains/web-types/blob/master/schema/web-types.json).
The format is open source and IDE-agnostic by itself.
However, currently it is being actively used mostly by JetBrains IDEs.

Originally, it was created to facilitate the contribution of statically defined symbols for the
[Vue](https://vuejs.org/) framework, which may explain the presence of some deprecated properties in the schema.

A simple Web Types file looks as follows, where this file defines a `my-element` HTML element with a `foo` attribute:

```JSON
{
  "$schema": "https://raw.githubusercontent.com/JetBrains/web-types/master/schema/web-types.json",
  "name": "example",
  "version": "0.0.1",
  "description-markup": "markdown",
  "contributions": {
    "html": {
      "elements": [
        {
          "name": "my-element",
          "description": "A custom HTML element",
          "doc-url": "https://example.com/docs/my-element",
          "attributes": [
            {
              "name": "foo",
              "description": "A custom attribute of `my-element`"
            }
          ]
        }
      ]
    }
  }
}
```

## File Structure

The Web Types file should, at least, contain `name`, `version` and `contributions` properties.
It should also include `$schema` property which can be either
`https://raw.githubusercontent.com/JetBrains/web-types/master/schema/web-types.json`
or
`http://json.schemastore.org/web-types`.
The schema contains detailed documentation for all the JSON entities.

Directly under `contributions` property are listed namespaces with their contributions.
Currently only `html`, `css` or `js` namespaces are allowed.
However, in the future this limitation will be lifted to support Web Types for other technologies.

The `namespace` object contains symbol kind names listed as properties.
Some symbol kinds are predefined and directly supported by IDE (see [](#direct-support) for reference).
The kind of symbol should be related to its role.
For instance, a Vue directive should be of the kind `vue-directives`.
Each framework should define a set of custom symbol kinds if needed.
Reference for the most important symbol kinds defined by frameworks supported by IDEs is below.

Each symbol kind name property of a namespace object is an array of symbol contributions.
A symbol contribution should have at least a name.
Contributions in addition to standard properties can define sub-contributions and custom properties.
A custom property is a JSON property, whose value is of a simple type (string, number or boolean),
or is an array of simple types.
If a contribution’s JSON property’s value is an object value or an array of objects, it is treated as a list of sub-contributions.
Such contributions will be assigned to the same namespace as the parent contributions.
To use a different namespace for sub-contributions, nest symbol kind JSON property name under a `js`, `css` or `html` property, e.g.:

```JSON
{
  "contributions": {
    "html": {
      "elements": [
        {
          "name": "my-element",
          "description": "A custom HTML element",
          "attributes": [
            {
              "name": "foo",
              "description": "A custom HTML attribute of `my-element`"
            }
          ],
          "css": {
            "properties": [
              {
                "name": "--bg-color",
                "description": "Background color of my-element"
              }
            ]
          }
        }
      ]
    }
  }
}
```

In the example below, Web Types contributes information that the `my-element` HTML element supports a custom CSS property `--bg-color`.
The `attributes` are implicitly under the `html` namespace.
To contribute a `foo` attribute, one could also write it in longer form:

```JSON
{
  "name": "my-element",
  "description": "A custom HTML element",
  "html": {
    "attributes": [
      {
        "name": "foo",
        "description": "A custom attribute of `my-element`"
      }
    ]
  }
}
```

Each Web Types contribution is represented in the Web Symbols framework by a
[`PsiSourcedWebSymbol`](%gh-ic%/platform/webSymbols/src/com/intellij/webSymbols/PsiSourcedWebSymbol.kt)
object.
All the Web Types contributions are mapped one-to-one, and custom properties are accessible through `properties` property.

## Including Web Types

Web Types can currently be discovered by the IDE in the following ways:

{style="full"}
NPM
: The IDE will automatically discover any Web Types shipped with the NPM library and specified in the
`web-types` property of `package.json`.
The property accepts a string or an array of strings with relative paths to Web Types files shipped with the package.

Local Project
: In your JavaScript projects in `package.json` files, you can specify `web-types` property similarly to the NPM package.
The property accepts a string or an array of strings with relative paths to Web Types files within the project.

IDE Plugin
: You can ship Web Types JSON with your IDE plugin.
To point an IDE to its location, use `com.intellij.webSymbols.webTypes` extension point and pass the file location in `source` attribute value.
With `enableByDefault` attribute, you can choose whether the Web Types file should be contributed to Web Symbols scope by default,
or only if an NPM package with the same name is present in the project.

## Special Properties

{style="full"}
`inject-language`
: Supported by `html/elements` and `html/attributes`, allows to inject the specified language into HTML element text or HTML attribute value.

`doc-hide-pattern`
: If a symbol uses a RegEx pattern, usually it will be displayed in a documentation popup section "pattern".
Setting this property to `true` hides that section.

`hide-from-completion`
: By default, all symbols show up in code completion.
Setting this property to `true` prevents a symbol from showing up in the code completion.

## Symbol Kinds

Web Types files are used internally by IDEs and tools to define rules for frameworks.
Following is the reference for symbol kinds used by framework support.

### Direct Support

IDEs provide direct support for the following symbol kinds:
- `html/elements`
- `html/attributes`
- `css/properties`
- `css/pseudo-classes`
- `css/pseudo-elements`
- `css/functions`
- `css/classes`
- `css/parts` (*since 2023.2*)

Prior to 2023.1, IDEs were required to have JavaScript plugin installed for the support to work.

### Angular

Angular plugin Web Types are available
[here](%gh-ij-plugins%/Angular/resources/web-types)
for reference.
Any Web Types file targeting only Angular support should have `framework` property set to `angular`.
Highlights: `js/ng-custom-events` contribute symbols with patterns for any custom events supported by Angular `EventManager`s, e.g.:

```JSON
{
  "ng-custom-events": [
    {
      "name": "Custom modifiers for declarative events handling",
      "priority": "normal",
      "pattern": {
        "template": [
          {
            "items": {
              "path": "/js/events",
              "includeVirtual": false
            }
          },
          {
            "items": "ng-event-plugins-modifiers",
            "template": [
              ".",
              "#...",
              "#item:modifiers"
            ],
            "priority": "high",
            "repeat": true,
            "unique": true,
            "required": false
          }
        ]
      },
      "ng-event-plugins-modifiers": [
        {
          "name": "prevent"
        },
        {
          "name": "stop"
        }
      ]
    }
  ]
}
```

### Vue

Vue plugin Web Types are available
[here](%gh-ij-plugins%/vuejs/resources/web-types)
for reference.
Any Web Types file targeting only Vue support should have `framework` property set to `vue`.
Highlights:

{style="full"}
`/html/vue-components`
: Use `/html/vue-components` to contribute Vue components.

`/html/vue-directives`
: Use `/html/vue-directives` to contribute Vue directives.
Use `attribute-value` property to specify the type of value expression. E.g.:
```JSON
{
    "attribute-value": {
      "type": "boolean",
      "required": true
    }
}
```

`/html/vue-file-top-elements`
: Use `/html/vue-file-top-elements` to contribute any custom top-level elements available in Vue Single Component File

A Vue `/html/vue-components` contribution supports:

{style="full"}
`/html/props`
: Use `/html/props` to contribute Vue component props, e.g:
```JSON
{
    "props": [{
      "name": "appear",
      "description": "Whether to apply transition on initial render.",
      "type": "boolean",
      "default": "false"
    }]
}
```

`/html/slots`
: Use `/html/slots` to contribute Vue component slots.
For scoped slots, use `vue-properties` to provide a list of scoped slot properties.
Example:
```JSON
{
    "slots": [{
      "name": "img",
      "description": "Expects the [v-img](/components/images) component.",
      "doc-url": "https://vuetifyjs.com/en/api/v-app-bar/#slots",
      "vue-properties": [
        {
          "name": "props",
          "type": "{ height: string, src: string | srcObject }"
        }
      ]
    }]
}
```

`/js/events`
: Use `/js/events` to contribute Vue component events, e.g.:
```JSON
{
    "js": {
      "events": [
        {
          "name": "input",
          "description": "The updated bound model"
        }
      ]
    }
}
```

`html/vue-model`
: Use `html/vue-model` to contribute settings for Vue model directive. E.g.:
```JSON
{
    "vue-model": {
      "prop": "show",
      "event": "input"
    }
}
```


A Vue `/html/vue-directives` contribution supports:

{style="full"}
`/html/argument`
: Use `/html/argument` as a Vue directive argument. E.g.:
```JSON
{
    "argument": {
      "name": "attribute or property name",
      "description": "Optional attribute or property name",
      "pattern": {
        "items": [
          {
            "path": "/html/attributes",
            "includeVirtual": false
          }
        ]
      }
    }
}
```

`/html/modifiers`
: Use `/html/modifiers` as a Vue directive modifier. E.g.:
```JSON
{
    "modifiers": [
      {
        "name": "body",
        "description": "Make the mask append to the body element",
        "type": "boolean"
      },
      {
        "name": "fullscreen",
        "type": "boolean"
      }
    ]
}
```


### Web Components

For Lit support, install it in your Node project as a `devDependency` `@web-types/lit`.
Web Types are available
[here](https://github.com/JetBrains/web-types/blob/master/packages/lit/lit%402.0.0/lit.web-types.json)
for reference.

Web Components should use:

- `/html/attributes`: for attributes available in HTML
- `/js/properties`: for Web Component DOM class properties
- `/js/events`: for Web Component events

Example Web Component:

```JSON
{
  "$schema": "https://raw.githubusercontent.com/JetBrains/web-types/master/schema/web-types.json",
  "name": "Cool library",
  "version": "1.0.0",
  "js-types-syntax": "typescript",
  "description-markup": "markdown",
  "contributions": {
    "html": {
      "elements": [
        {
          "name": "cool-component",
          "description": "Use the cool component to make your website more attractive.",
          "doc-url": "https://example.com/docs/cool-component",
          "attributes": [
            {
              "name": "color",
              "description": "Choose color for coolness",
              "default": "blue",
              "required": false,
              "doc-url": "https://example.com/docs/cool-component#attrs",
              "value": {
                "type": "string"
              }
            }
          ],
          "slots": [
            {
              "name": "container"
            }
          ],
          "events": [
            {
              "name": "color:changed",
              "description": "Emitted when color changes"
            }
          ],
          "js": {
            "properties": [
              {
                "name": "color",
                "type": "string",
                "default": "blue"
              }
            ]
          },
          "css": {
            "properties": [
              {
                "name": "--cool-degree"
              }
            ]
          }
        }
      ]
    }
  }
}
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Creating Actions

<link-summary>Implementing and registering custom actions.</link-summary>

Plugins can add actions to existing IDE menus and toolbars, as well as add new menus and toolbars.
The IntelliJ Platform calls the actions of plugins in response to user interactions with the IDE.
However, the actions of a plugin must first be defined and registered with the IntelliJ Platform.

Using the SDK code sample [`action_basics`](%gh-sdk-samples-master%/action_basics), this tutorial illustrates the steps to create an action for a plugin.

## Creating a Custom Action

Custom actions extend the abstract class [`AnAction`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnAction.java).
Classes that extend it should override `AnAction.update()`, and must override `AnAction.actionPerformed()`.
* The `update()` method implements the code that enables or disables an action.
* The `actionPerformed()` method implements the code that executes when the user invokes an action.
* When targeting IntelliJ Platform 2022.3 or later, `AnAction.getActionUpdateThread()` must be implemented

As an example, [`PopupDialogAction`](%gh-sdk-samples-master%/action_basics/src/main/java/org/intellij/sdk/action/PopupDialogAction.java) overrides `AnAction` for the `action_basics` code sample.

```java
public class PopupDialogAction extends AnAction {

  @Override
  public void update(@NotNull AnActionEvent event) {
    // Using the event, evaluate the context,
    // and enable or disable the action.
  }

  @Override
  public void actionPerformed(@NotNull AnActionEvent event) {
    // Using the event, implement an action.
    // For example, create and show a dialog.
  }

  // Override getActionUpdateThread() when you target 2022.3 or later!

}
```

> `AnAction` classes do not have class fields of any kind.
> This restriction prevents memory leaks.
> For more information about why, see [](basic_action_system.md#action-implementation).
>
{style="warning"}

At this stage, `update()` implicitly defaults always to enable this action.
The implementation of `actionPerformed()` does nothing.
These methods are fully implemented in [](#developing-the-anaction-methods) below.

Before fleshing out those methods, to complete this minimal implementation, `PopupDialogAction` must be registered with the IntelliJ Platform.

## Registering a Custom Action

Actions are registered by declaring them in code or by declaring them in the [`<actions>`](plugin_configuration_file.md#idea-plugin__actions) section of a [plugin configuration file](plugin_configuration_file.md).
This section describes using IDE tooling - the <control>New Action</control> form - to add a declaration to the <path>plugin.xml</path> file, and then tuning registration attributes manually.
A more comprehensive explanation of action registration is available in the [](basic_action_system.md#registering-actions) section of this guide.

### Registering an Action with the New Action Form

To register `PopupDialogAction` and set up its basic attributes, press <shortcut>Alt+Shift+Enter</shortcut>.
Fill out the <control>New Action</control> form to set up the parameters for `PopupDialogAction`:

![New Action](new_action.png){width="800"}

The fields of the form are:

* <control>Action ID</control> - Every action must have a unique ID.
  If the action class is used in only one place in the IDE UI, then the class fully qualified name (FQN) is a good default for the ID.
  Using the action class in multiple places requires mangling the ID, such as adding a suffix to the FQN, for each ID.
* <control>Class Name</control> - The FQN implementation class for the action.
  If the same action is used in multiple places in the IDE UI, the implementation FQN can be reused with a different _Action ID_.
* <control>Name</control> - The text to appear in the menu.
* <control>Description</control> - Hint text to be displayed.
* <control>Add to Group</control> - The action group - menu or toolbar - to which the action is added.
  Clicking on the list of groups and typing invokes a search, such as "ToolsMenu".
* <control>Anchor</control> - Where the menu action should be placed in the <ui-path>Tools</ui-path> menu relative to the other actions in that menu.

In this case, `PopupDialogAction` would be available in the <ui-path>Tools</ui-path> menu, it would be placed at the top, and would have no shortcuts.

After finishing the <control>New Action</control> form and applying the changes, the [`<actions>`](plugin_configuration_file.md#idea-plugin__actions) section of the plugin's <path>plugins.xml</path> file would contain:

```xml
<actions>
  <action
      id="org.intellij.sdk.action.PopupDialogAction"
      class="org.intellij.sdk.action.PopupDialogAction"
      text="Popup Dialog Action"
      description="SDK action example">
    <add-to-group group-id="ToolsMenu" anchor="first"/>
  </action>
</actions>
```

The [`<action>`](plugin_configuration_file.md#idea-plugin__actions__action) element declares the:
- <control>Action ID</control> (`id`)
- <control>Class Name</control> (`class`)
- <control>Name</control> (`text`)
- <control>Description</control>

from the <control>New Action</control> form.

The [`<add-to-group>`](plugin_configuration_file.md#idea-plugin__actions__action__add-to-group) element declares where the action will appear and mirrors the names of entries from the form.

This declaration is sufficient, but adding more attributes is discussed in the next section.

### Setting Registration Attributes Manually

An action declaration can be added manually to the <path>plugin.xml</path> file.
An exhaustive list of declaration elements and attributes is presented in [](basic_action_system.md#registering-actions-in-pluginxml).
Attributes are added by selecting them from the <control>New Action</control> form, or by editing the registration declaration directly in the <path>plugin.xml</path> file.

The [`<action>`](plugin_configuration_file.md#idea-plugin__actions__action) declaration for `PopupDialogAction` in the `action_basics` [plugin.xml](%gh-sdk-samples-master%/action_basics/src/main/resources/META-INF/plugin.xml) file.
It also contains an attribute for an [`Icon`](icons.md) and encloses elements declaring text overrides, keyboard and mouse shortcuts, and to which menu group the action should be added.

The full declaration is:

```xml
<action
    id="org.intellij.sdk.action.PopupDialogAction"
    class="org.intellij.sdk.action.PopupDialogAction"
    text="Action Basics Plugin: Popup Dialog Action"
    description="SDK action example"
    icon="SdkIcons.Sdk_default_icon">
  <override-text place="MainMenu" text="Popup Dialog Action"/>
  <keyboard-shortcut
      keymap="$default"
      first-keystroke="control alt A"
      second-keystroke="C"/>
  <mouse-shortcut
      keymap="$default"
      keystroke="control button3 doubleClick"/>
  <add-to-group group-id="ToolsMenu" anchor="first"/>
</action>
```

#### Using `override-text` for an Action

The example above uses the [`override-text`](plugin_configuration_file.md#idea-plugin__actions__action__override-text) element to ensure the shorter text "Popup Dialog Action" is shown anywhere the action appears in the main menu structure.
Otherwise, the default, more explanatory text "Action Basics Plugin: Popup Dialog Action" is shown.

> Use inspection <ui-path>Settings | Editor | Inspections | Plugin DevKit | Code | Component/Action not registered</ui-path> for reporting unregistered actions.

## Testing the Minimal Custom Action Implementation

After performing the steps described above, [compile and run](creating_plugin_project.md#executing-the-plugin) the plugin to see the newly created action available as a <ui-path>Tools</ui-path> menu item, which is within the context of the main menu:

![Register action](tools_menu_item_action.png){width="350"}

To see the alternate, more verbose text declared by the `override-text` element, use <ui-path>Help | Find Action...</ui-path> and search for "Pop Dialog Action".
The search shows the verbose menu text in a context outside the main menu:

![Override Text Display](find_action.png){width="500"}

Selecting the action from the menu, keyboard/mouse shortcuts, or <control>Find Action</control> won't do anything at this point because the implementations are empty.
However, it confirms the new entry appears at <ui-path>Tools | Pop Dialog Action</ui-path> and <ui-path>Help | Find Action...</ui-path>.

## Developing the `AnAction` Methods

At this point, the new action `PopupDialogAction` is registered with the IntelliJ Platform and functions in the sense that  `update()` and `actionPerformed()` are called in response to user interaction with the IDE <ui-path>Tools</ui-path> menu.
However, neither method implements any code to perform useful work.

This section describes adding useful code to these methods.
The `update()` method defaults to always enable the action, which is satisfactory for intermediate testing.
So `actionPerformed()` will be developed first.

### Extending the `actionPerformed()` Method

Adding code to the `PopupDialogAction.actionPerformed()` method makes the action do something useful.
The code below gets information from the `anActionEvent` input parameter and constructs a message dialog.
A generic icon, and the `message` and `title` attributes from the invoking menu action are displayed.
However, code in this method could manipulate a project, invoke an inspection, change the contents of a file, etc.

For demonstration purposes the `AnActionEvent.getData()` method tests if a [`Navigatable`](%gh-ic%/platform/core-api/src/com/intellij/pom/Navigatable.java) object is available.
If so, information about the selected element is added to the dialog.

See [](basic_action_system.md#determining-the-action-context) for more information about accessing information from the `AnActionEvent` input parameter.

```java
```
{src="action_basics/src/main/java/org/intellij/sdk/action/PopupDialogAction.java" include-symbol="actionPerformed"}

### Extending the `update()` Method

Adding code to `PopupDialogAction.update()` gives finer control of the action's visibility and availability.
The action's state and(or) presentation can be dynamically changed depending on the context.

> This method needs to _execute very quickly_.
> For more information about this constraint, see the warning in [](basic_action_system.md#overriding-the-anactionupdate-method).
>
{style="warning"}

In this example, the `update()` method relies on a `Project` object being available.
This requirement means the user must have at least one project open in the IDE for the `PopupDialogAction` to be available.
So the `update()` method disables the action for contexts where a `Project` object isn't defined.

The availability (enabled and visible) is set on the `Presentation` object.
Setting both the enabled state and visibility produces consistent behavior despite possible host menu settings, as discussed in [](basic_action_system.md#grouping-actions).

```java
```
{src="action_basics/src/main/java/org/intellij/sdk/action/PopupDialogAction.java" include-symbol="update"}

The `update()` method does not check to see if a `Navigatable` object is available before enabling `PopupDialogAction`.
This check is unnecessary because using the `Navigatable` object is opportunistic in `actionPerformed()`.
See [Determining the Action Context](basic_action_system.md#determining-the-action-context) for more information about accessing information from the `AnActionEvent` input parameter.

### Other Methods Overrides

A constructor is overridden in `PopupDialogAction`, but this is an artifact of reusing this class for a dynamically created menu action.
Otherwise, overriding constructors for `AnAction` is not required.

## Testing the Custom Action

After compiling and running the plugin project and invoking the action, the dialog will pop up:

![Action performed](action_performed.png){width="800"}
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 1. Working with Text

<link-summary>Tutorial demonstrating how to retrieve and replace text in the editor.</link-summary>

This tutorial shows how to use actions to access a caret placed in a document open in an editor.
Using information about the caret, replace selected text in a document with a string.

The approach in this tutorial relies heavily on creating and registering actions.
To review the fundamentals of creating and registering actions, refer to the [Actions Tutorial](action_system.md).

Multiple examples are used from the [editor_basics](%gh-sdk-samples-master%/editor_basics) plugin code sample from the IntelliJ Platform SDK.
It may be helpful to open that project in an IntelliJ Platform-based IDE, build the project, run it, select some text in the editor, and invoke the **Editor Replace Text** menu item on the editor context menu.

![Editor Basics Menu](basics.png){width="600"}

## Creating a New Menu Action

In this example, we access the `Editor` from an action.
The source code for the Java class in this example is [EditorIllustrationAction](%gh-sdk-samples-master%/editor_basics/src/main/java/org/intellij/sdk/editor/EditorIllustrationAction.java).

To register the action, we must add the corresponding elements to the [`<actions>`](plugin_configuration_file.md#idea-plugin__actions) section of the plugin configuration file [plugin.xml](%gh-sdk-samples-master%/editor_basics/src/main/resources/META-INF/plugin.xml).
For more information, refer to the [Registering Actions](working_with_custom_actions.md#registering-a-custom-action) section of the Actions Tutorial.
The `EditorIllustrationAction` action is registered in the group `EditorPopupMenu` so it will be available from the context menu when focus is on the editor:

```xml
<action
    id="EditorBasics.EditorIllustrationAction"
    class="org.intellij.sdk.editor.EditorIllustrationAction"
    text="Editor Replace Text"
    description="Replaces selected text with 'Replacement'."
    icon="SdkIcons.Sdk_default_icon">
  <add-to-group group-id="EditorPopupMenu" anchor="first"/>
</action>
```

## Defining the Menu Action's Visibility

To determine conditions by which the action will be visible and available requires `EditorIllustrationAction` to override the `AnAction.update()` method.
For more information, refer to [Extending the Update Method](working_with_custom_actions.md#extending-the-update-method) section of the Actions Tutorial.

To work with a selected part of the text, it's reasonable to make the menu action available only when the following requirements are met:
* There is a [`Project`](%gh-ic%/platform/core-api/src/com/intellij/openapi/project/Project.java) object,
* There is an instance of [`Editor`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/Editor.java) available,
* There is a text selection in `Editor`.

Additional steps will show how to check these conditions through obtaining instances of `Project` and `Editor` objects, and how to show or hide the action's menu items based on them.

### Getting an Instance of the Active Editor from an Action Event

Using the [`AnActionEvent`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnActionEvent.java) event passed into the `update` method, a reference to an instance of the `Editor` can be obtained by calling `getData(CommonDataKeys.EDITOR)`.
Similarly, to obtain a project reference, we use the `getProject()` method.

```java
public class EditorIllustrationAction extends AnAction {
  @Override
  public void update(@NotNull AnActionEvent event) {
    // Get required data keys
    Project project = event.getProject();
    Editor editor = event.getData(CommonDataKeys.EDITOR);
    // ...
  }
}
```

**Note:**
There are other ways to access an `Editor` instance:
* If a [`DataContext`](%gh-ic%/platform/core-ui/src/openapi/actionSystem/DataContext.java) object is available: `CommonDataKeys.EDITOR.getData(context);`
* If only a `Project` object is available, use `FileEditorManager.getInstance(project).getSelectedTextEditor()`

### Obtaining a Caret Model and Selection

After making sure a project is open, and an instance of the `Editor` is obtained, we need to check if any selection is available.
The [`SelectionModel`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/SelectionModel.java) interface is accessed from the `Editor` object.
Determining whether some text is selected is accomplished by calling the `SelectionModel.hasSelection()` method.
Here's how the `EditorIllustrationAction.update(AnActionEvent event)` method should look:

```java
public class EditorIllustrationAction extends AnAction {
  @Override
  public void update(@NotNull AnActionEvent event) {
    // Get required data keys
    Project project = event.getProject();
    Editor editor = event.getData(CommonDataKeys.EDITOR);

    // Set visibility only in the case of
    // existing project editor, and selection
    event.getPresentation().setEnabledAndVisible(project != null
        && editor != null && editor.getSelectionModel().hasSelection());
  }
}
```

**Note:**
`Editor` also allows access to different models of text representation.
The model classes are located in [editor](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor), and include:
* [`CaretModel`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/CaretModel.java),
* [`FoldingModel`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/FoldingModel.java),
* [`IndentsModel`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/IndentsModel.java),
* [`ScrollingModel`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/ScrollingModel.java),
* [`SoftWrapModel`](%gh-ic%/platform/editor-ui-api/src/com/intellij/openapi/editor/SoftWrapModel.java)

## Safely Replacing Selected Text in the Document

Based on the evaluation of conditions by `EditorIllustrationAction.update()`, the `EditorIllustrationAction` action menu item is visible.
To make the menu item do something, the `EditorIllustrationAction` class must override the `AnAction.actionPerformed()` method.
As explained below, this will require the `EditorIllustrationAction.actionPerformed()` method to:
* Gain access to the document.
* Get the character locations defining the selection.
* Safely replace the contents of the selection.

Modifying the selected text requires an instance of the [`Document`](%gh-ic%/platform/core-api/src/com/intellij/openapi/editor/Document.java) object, which is accessed from the `Editor` object.
The [Document](documents.md) represents the contents of a text file loaded into memory and opened in an IntelliJ Platform-based IDE editor.
An instance of the `Document` will be used later when a text replacement is performed.

The text replacement will also require information about where the selection is in the document, which is provided by the primary `Caret` object, obtained from the `CaretModel`.
Selection information is measured in terms of [Offset](coordinates_system.md#caret-offset), the count of characters from the beginning of the document to a caret location.

Text replacement could be done by calling the `Document` object's `replaceString()` method.
However, safely replacing the text requires the `Document` to be locked and any changes performed in a write action.
See the [Threading Issues](threading_model.md) section to learn more about synchronization issues and changes safety on the IntelliJ Platform.
This example changes the document within a [`WriteCommandAction`](%gh-ic%/platform/core-api/src/com/intellij/openapi/command/WriteCommandAction.java).

The complete `EditorIllustrationAction.actionPerformed()` method is shown below:
* Note the selection in the document is replaced by a string using a method on the `Document` object, but the method call is wrapped in a write action.
* After the document change, the new text is de-selected by a call to the primary caret.

```java
public class EditorIllustrationAction extends AnAction {
  @Override
  public void actionPerformed(@NotNull AnActionEvent event) {
    // Get all the required data from data keys
    Editor editor = event.getRequiredData(CommonDataKeys.EDITOR);
    Project project = event.getRequiredData(CommonDataKeys.PROJECT);
    Document document = editor.getDocument();

    // Work off of the primary caret to get the selection info
    Caret primaryCaret = editor.getCaretModel().getPrimaryCaret();
    int start = primaryCaret.getSelectionStart();
    int end = primaryCaret.getSelectionEnd();

    // Replace the selection with a fixed string.
    // Must do this document change in a write action context.
    WriteCommandAction.runWriteCommandAction(project, () ->
        document.replaceString(start, end, "editor_basics")
    );

    // De-select the text range that was just replaced
    primaryCaret.removeSelection();
  }
}
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Workspace Model

<primary-label ref="2024.2"/>

<link-summary>Introduction to Workspace Model representing a project's structure</link-summary>

The Workspace Model represents the project's structure and all its elements, such as [modules](module.md), [libraries](library.md), [SDKs](sdk.md), [facets](facet.md),
and other configurable project components.
It provides a generic storage for entities describing the user's workspace while maintaining full
[interoperability](#interoperability) with the [](project_model.md).

<include from="project.md" element-id="useWorkspaceModelAPI"/>

## Why a New API?

There are several problems with the approach that has been used to represent the [project model](project_model.md) (configuration of modules, libraries, facet, artifacts, etc.)
in the IntelliJ Platform for more than 15 years.

### Structure

Different project model parts are stored in separate project-level and module-level services
([`ModuleManager`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/module/ModuleManager.kt),
[`ModuleRootManager`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/ModuleRootManager.java),
[`LibraryTable`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/libraries/LibraryTable.java),
etc.).

They're implemented independently, and the project model has no single entry point.
This leads to code duplication and complicates bulk modifications of project model elements, since you need to manually track modifiable instances of the model elements
or create special wrappers to do it (see [`IdeModifiableModelsProvider`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/service/project/IdeModifiableModelsProvider.java)).

### Serialization

There is no way to serialize the project model’s entire content in a binary format to cache it or pass it to another process.

### Reuse

The project model interfaces ([`Module`](%gh-ic%/platform/core-api/src/com/intellij/openapi/module/Module.java),
[`Library`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/libraries/Library.java),
[`Facet`](%gh-ic%/platform/lang-core/src/com/intellij/facet/Facet.java),
etc.) are highly coupled with the API that is only available inside the IDE process and its component management system.
It is not possible to reuse those interfaces in other processes (e.g., inside the build process or inside the process that imports data from Gradle)
or when the project hasn't yet been initialized (e.g., inside the <control>New Project</control> dialog).

Thus, separate representations of project model elements are necessary:

- [`JpsProject`](%gh-ic%/jps/model-api/src/org/jetbrains/jps/model/JpsProject.java),
  [`JpsModule`](%gh-ic%/jps/model-api/src/org/jetbrains/jps/model/module/JpsModule.java),
  [`JpsLibrary`](%gh-ic%/jps/model-api/src/org/jetbrains/jps/model/library/JpsLibrary.java),
  etc. for the build process
- [`ProjectData`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/model/project/ProjectData.java),
  [`ModuleData`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/model/project/ModuleData.java),
  [`LibraryData`](%gh-ic%/platform/external-system-api/src/com/intellij/openapi/externalSystem/model/project/LibraryData.java),
  etc. for the importing process

All these places must be updated everytime something in the project model is changed.
The Workspace Model uses its own storage that is Platform-independent and can be reused in different places.

### Flexibility

The project model concepts were created for [IntelliJ IDEA](idea.md) before the IntelliJ Platform accommodated a variety of languages.
Many common interfaces like
[`Module`](%gh-ic%/platform/core-api/src/com/intellij/openapi/module/Module.java) and
[`Library`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/libraries/Library.java)
still have Java-specific properties.
This makes it harder to reuse them for other languages and technologies, and there is no simple way to create new language-specific concepts and use them in the model.

## Concepts and Implementation

Workspace Model introduces a unified data structure that stores the project configuration and doesn't have to be used from the IDE process.
The implementation heavily relies on [Persistent Data Structure](https://en.wikipedia.org/wiki/Persistent_data_structure) that allows using a
model snapshot without fear that it will be modified during an interaction.

### Entities

Types of entities in the storage are represented by interfaces extending
[`WorkspaceEntity`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/WorkspaceEntity.kt) (see [](workspace_model_entity_declaration.md)).
All operations can be performed on entities.
Properties of entities may be of a restricted set of types only, see [](workspace_model_entity_properties.md) for details.

### Storage

Their instances are stored in [`VersionedEntityStorage`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/VersionedEntityStorage.kt),
which provides access to the current [`ImmutableEntityStorage`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/EntityStorage.kt),
an immutable snapshot of the storage state which isn't affected by further modifications of the storage.

### Modification

Modifying entities is performed via
[`MutableEntityStorage`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/MutableEntityStorage.kt).
Modifications are performed on copies of the original entities, so they don't affect old snapshots (see [](workspace_model_entity_mutation.md)).

### Relationships

Entities are organized into a direct acyclic graph by optional [parent-child relationships](workspace_model_entity_properties.md#parent-child-relationship).
The storage maintains the consistency of such relations: if a child entity has a non-null reference to a parent entity, it is removed when the parent entity is removed or changed to point to a different child entity.

[Symbolic (soft) references](workspace_model_entity_properties.md#symbolic-references) between entities are supported.
It is also possible to [link objects](workspace_model_entity_read.md#arbitrary-data) of arbitrary types with entities.

## Interoperability with Project Model API

{id="interoperability"}

New implementations of the [Project Model](project_model.md) interfaces store their data in
Workspace Model in corresponding entities.

The following table maps to corresponding Workspace Model API and usage samples.

| Project Structure Element | Project Model API                                                                                    | Workspace Model API                                                                                                | Workspace Model API Usage             |
|---------------------------|------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|---------------------------------------|
| [](module.md)             | [`Module`](%gh-ic%/platform/core-api/src/com/intellij/openapi/module/Module.java)                    | [`ModuleEntity`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities/module.kt)        | [](workspace_model_usages.md#module)  |
| [](sdk.md)                | [`Sdk`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/projectRoots/Sdk.java)            | [`SdkEntity`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities/sdk.kt)              |                                       |
| [](library.md)            | [`Library`](%gh-ic%/platform/projectModel-api/src/com/intellij/openapi/roots/libraries/Library.java) | [`LibraryEntity`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities/dependencies.kt) | [](workspace_model_usages.md#library) |
| [](facet.md)              | [`Facet`](%gh-ic%/platform/lang-core/src/com/intellij/facet/Facet.java)                              | [`FacetEntity`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities/facet.kt)          |                                       |

[`WorkspaceModel`](%gh-ic%/platform/backend/workspace/src/WorkspaceModel.kt)
allows performing operations as with the [](project_model.md) API,
but via a single entry point, see also [](workspace_model_usages.md).
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Entity Declaration

<primary-label ref="2024.2"/>

<link-summary>Declaration of Workspace Entities</link-summary>

The Workspace Model allows defining types of entities.

> Defining custom entities is not yet available to third-party plugins, see also [](#generating-entity-implementations).
>
{style="warning" title="Custom Entities"}

> Entities' declaration is still an experimental feature and can be changed at any time.
> While this feature is still experimental, it is important for understanding the data
> stored inside the Workspace Model and its relations.
>
{style="warning" title="Experimental Status"}

To declare an entity type, a Kotlin interface has to be created, which directly or indirectly extends
[`WorkspaceEntity`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/WorkspaceEntity.kt).
The entity interface must contain read-only properties only.

A nested `Builder` interface with setters for these properties, and a `companion` object which allows creating instances of the entity
are generated automatically along with the implementations (see [](#generating-entity-implementations)).
The platform currently provides some predefined types of entities
(see [`entities`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities) package),
but they're supposed to be used only for interoperability with code which uses the project model API.

Plugins should define and use their own types of entities if they need to store framework-specific data.

## Examples

### Default and Computable Fields

See [](workspace_model_entity_properties.md#property-kinds).

```kotlin
interface GradleEntity : WorkspaceEntity {
  val test: String

  // Field with default value
  val version: Int
    @Default get() = 5
  val description: Description

  // Computable field
  val name: String
    get() = description.name
}

data class Description(
  val name: String,
  val valid: Boolean,
  val modifications: Int
)
```

### Parent &rarr; Child References

See [](workspace_model_entity_properties.md#parent-child-relationship).

```kotlin
interface MavenEntity : WorkspaceEntity {
  val version: Int
  val name: String
  val root: VirtualFileUrl

  val kotlinEntities: List<@Child KotlinEntity>
}

interface KotlinEntity : WorkspaceEntity {
  val name: String
  val maven: MavenEntity
}
```

### Soft Reference using `SymbolicEntityId`

See [](workspace_model_entity_properties.md#symbolicentityid) and [](workspace_model_entity_properties.md#symbolic-references).

```kotlin
interface MavenEntity : WorkspaceEntityWithSymbolicId {
  val version: Int
  val name: String
  override val symbolicId: MavenId
    get() = MavenId(true, name)
}

interface KotlinEntity : WorkspaceEntity {
  val name: String
  val mavenId: MavenId
}

data class MavenId(
  val valid: Boolean,
  override val presentableName: String
) : SymbolicEntityId<MavenEntity>
```

### Reference via Extension Property

Due to the limitation that a reference must be declared on both entities, there needs to be an option to declare a reference to an entity from another module.
This can be done by declaring an extension property for the entity located outside the module.
This property must use the [`WorkspaceEntity.extension()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/WorkspaceEntity.kt) delegate to work correctly.

Example: a `KotlinEntity` declaring a reference to the `MavenEntity` located in a different module:

<compare type="top-bottom" first-title="'Maven' module" second-title="'Kotlin' module">

<code-block lang="kotlin">
interface MavenEntity: WorkspaceEntity {
  val version: Int
  val name: String
}
</code-block>

<code-block lang="kotlin">
interface KotlinEntity: WorkspaceEntity {
  val name: String
  val maven: MavenEntity
}
val MavenEntity.kotlinEntity: @Child KotlinEntity
  by WorkspaceEntity.extension()
</code-block>

</compare>

### Inheritance

For inheritance, the supertype entity must be marked using
[`Abstract`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/annotations/Abstract.kt) annotation.

See [`PackagingElementEntity`](%gh-ic%/platform/workspace/jps/src/com/intellij/java/workspace/entities/artifact.kt),
more samples can be found in the
[`com.intellij.platform.workspace.jps.entities`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities)
package.

## Generating Entity Implementations

> This feature is currently not available to third-party plugins and enabled only for the IntelliJ IDEA project itself.
>
{style="warning"}

After defining the entity interface, generate some code with the <control>Generate Workspace Model Implementation</control> action,
available from the module's context menu in the <control>Project</control> tool window or via <ui-path>Help | Find Action</ui-path>
on the currently open file.

Entity implementations can also be generated via the <control>Generate implementation</control> quick-fix on the interface's name element,
which is provided by inspection <ui-path>Plugin DevKit | Workspace model | Generate implementation</ui-path>.

Along with generating implementations for the interfaces in the <path>gen</path> source folder, this action also adds the `Builder` interface
to an entity as well as some additional methods in the file where the entity is located.

Comments surround all generated blocks:

```
//region generated code
//endregion
```

Don't edit the generated code blocks. If something is wrong with the generated code, try re-executing the action.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Entity Mutation

<primary-label ref="2024.2"/>

<link-summary>Workspace Model Entity mutation</link-summary>

All modifications of
[`WorkspaceModel`](%gh-ic%/platform/backend/workspace/src/WorkspaceModel.kt)
are executed through a special mutable version of the store, represented by the
[`MutableEntityStorage`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/MutableEntityStorage.kt)
interface.
It can be used to build a storage from scratch or modify an existing storage in a way which requires reading its state after
modifications. **Instances of this interface aren't thread-safe.**

All modifications inside the IDE process are executed via
[`WorkspaceModel.update()`](%gh-ic%/platform/backend/workspace/src/WorkspaceModel.kt).

Two main modification scenarios exist: small lightweight and batch operations (for complex computations).

## Lightweight Operations

### Adding Entities

To add a new entity to the storage, create it by calling the `companion` object of its interface and then
pass it to the
[`MutableEntityStorage.addEntity()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/MutableEntityStorage.kt)
function:

```kotlin
// mandatory properties are passed as parameters
val module = ModuleEntity(moduleName, dependencies, entitySource) {
  // optional properties can be initialized in the lambda
  // passed as the last parameter
  type = ModuleTypeId.JAVA_MODULE
}

WorkspaceModel.getInstance(project).update("Add module") { builder ->
  builder.addEntity(module)
}
```

An entire tree of entities can be prepared first, then add the root to the storage, and
`MutableEntityStorage.addEntity()` will automatically add all the children.

### Modifying and Removing Entities

To modify or remove an entity, find its instance in the
[`MutableEntityStorage`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/MutableEntityStorage.kt)
instance.
This can be done by:
- resolving its
[`SymbolicEntityId`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/SymbolicEntityId.kt)
via [`SymbolicEntityId.resolve()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/SymbolicEntityId.kt)
- resolving an
[`EntityPointer`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/EntityPointer.kt)
via [`EntityPointer.resolve()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/EntityPointer.kt)
- iterating by children of another entity

```kotlin
WorkspaceModel.getInstance(project).updateProjectModel("Update module") { builder ->
  val module = ModuleId(moduleName).resolve(builder) ?: ...
  val groupPath = module.groupPath ?: ...
  builder.removeEntity(groupPath)
  // a special extension function 'modifyEntity'
  // is generated for each entity type
  builder.modifyModuleEntity(module) {
    name = prefix + name
  }
}
```

### Adding and Removing Child Entities

There are two equivalent ways to add a child entity to an existing parent entity.

* Specify the parent when creating the child and add the child via
  [`MutableEntityStorage.addEntity()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/MutableEntityStorage.kt):

```kotlin
val contentRoot = ContentRootEntity(url, emptyList(), entitySource) {
  this.module = module
}
builder.addEntity(contentRoot)
```

* Call
  [`MutableEntityStorage.modifyEntity()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/MutableEntityStorage.kt)
  on the parent entity and modify its property to include the new child:

```kotlin
val contentRoot = ContentRootEntity(url, emptyList(), entitySource)
builder.modifyContentRootEntity(module) {
  this.contentRoots = this.contentRoots + contentRoot
}
```

To remove a child entity, it is enough to call
[`MutableEntityStorage.removeEntity()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/MutableEntityStorage.kt)
for it, the reference in its parent will be updated automatically.
Also, if the reference to the parent is declared as non-null in the child interface, it is enough to modify the reference to the children
in the parent entity:

```kotlin
builder.modifyModuleEntity(module) {
  contentRoots = contentRoots.filter { it.url != contentUrlToRemove }
}
```

When performing this for a child with nullable reference to the parent, the child will be detached from the parent but won't be removed from
the storage.

## Batch Operations

Besides operation with individual entities,
[`MutableEntityStorage`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/MutableEntityStorage.kt)
supports two batch operations: `applyChangesFrom()` and `replaceBySource()`.

### Apply Changes From

Each instance of
[`MutableEntityStorage`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/MutableEntityStorage.kt)
records changes made in it: addition, modification, and removal of entities.
Such changes made in one instance may be applied to a different instance by calling its `applyChangesFrom()` function.

The diagram below shows a schematic example of this operation.
Yellow indicates changed entities, red deleted ones, and green new ones.

```mermaid
flowchart
    subgraph WorkspaceModel
        direction TB
        subgraph Original
            ModuleEntity --> ContentRootEntity1
            ModuleEntity --> ContentRootEntity2
            ContentRootEntity1 --> SourceRootEntity1
            ContentRootEntity2 --> SourceRootEntity2
            ContentRootEntity2 --> SourceRootEntity3
        end

        subgraph Result
            l[ModuleEntity]
            m[ContentRootEntity1]
            n[ContentRootEntity2]
            p[SourceRootEntity2]
            q[SourceRootEntity3]
            r[SourceRootEntity4]
            l --> m
            l --> n
            n --> p
            n --> q
            n --> r
            style l fill: #FF9
            style q fill: #FF9
            style r fill: #9F9
        end

    end

    subgraph MutableEntityStorage
        a[ModuleEntity]
        b[ContentRootEntity1]
        d[ContentRootEntity2]
        c[SourceRootEntity1]
        e[SourceRootEntity2]
        k[SourceRootEntity3]
        f[SourceRootEntity4]
        a --> b
        a --> d
        b --> c
        d --> e
        d --> k
        d --> f
        style c fill: #F99
        style a fill: #FF9
        style k fill: #FF9
        style f fill: #9F9

    end
  MutableEntityStorage ==  "applyChangesFrom()"  ==> Original
```

#### Use Cases

Some exemplary use cases are listed below.

##### Parallel Filling of the Storage

When the configuration of a project is read from <path>\*.iml</path> files, the IDE creates a separate empty
`MutableEntityStorage` for each file and runs tasks which parse an <path>\*.iml</path> file and load entities from it to the corresponding storage concurrently.
When the tasks finish, their results are merged into the single storage via `applyChangesFrom()`.

##### Accumulating Changes

The user performs modifications in the <control>Project Structure</control> dialog.
Changes shouldn't be applied immediately, so they're accumulated in a builder and then added to the main storage using the
`applyChangesFrom()` when the user presses the <control>Apply</control> button.

### Replace By Source

Partially replace the storage with the new one based on the predicate on
[`WorkspaceEntity.entitySource`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/WorkspaceEntity.kt).
This operation updates the part of the storage affected by the change, trying to minimize the number of changes in the entities.

Usually, entities in the workspace model storage are created from data loaded from some configuration files.
When these configuration files change, the corresponding entities must be updated in the storage.
It would be rather hard and error-prone to analyze what exactly was changed in the files since the previous version,
so a different approach is used.
Each entity must specify its `WorkspaceEntity.entitySource` describing where the entity comes from.

The diagram below shows a schematic example of the
[`MutableEntityStorage.replaceBySource()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/MutableEntityStorage.kt)
operation.
The color represents the type of entity source.
In this example it is called with the predicate `{ entitySource is YellowEntitySource }`.
In the resulting storage we can see that the function automatically calculates the changes for entities with `YellowEntitySource` and
doesn't touch entities not matching the predicate.

```mermaid
flowchart
    subgraph WorkspaceModel
        direction TB
        subgraph Original
            aa[ModuleEntity]
            bb[ContentRootEntity1]
            cc[ContentRootEntity2]
            dd[SourceRootEntity1]
            ee[SourceRootEntity2]
            ff[SourceRootEntity]
            aa --> bb
            aa --> cc
            bb --> dd
            cc --> ee
            cc --> ff
            style aa fill: #FF9
            style bb fill: #FF9
            style dd fill: #FF9
            style cc fill: #9F9
            style ee fill: #9F9
            style ff fill: #9F9
        end

        subgraph Result
            gg[ModuleEntity]
            hh[ContentRootEntity1]
            ii[ContentRootEntity3]
            jj[ContentRootEntity2]
            kk[SourceRootEntity]
            ll[SourceRootEntity1]
            mm[SourceRootEntity2]
            nn[SourceRootEntity3]
            oo[SourceRootEntity4]
            gg --> hh
            gg --> ii
            gg --> jj
            hh --> nn
            hh --> ll
            hh --> oo
            jj --> mm
            jj --> kk
            style gg fill: #FF9
            style hh fill: #FF9
            style nn fill: #FF9
            style ll fill: #FF9
            style oo fill: #FF9
            style ii fill: #FF9
            style jj fill: #9F9
            style mm fill: #9F9
            style kk fill: #9F9
        end

    end

    subgraph MutableEntityStorage
        a[ModuleEntity]
        b[ContentRootEntity3]
        d[ContentRootEntity1]
        e[SourceRootEntity1]
        k[SourceRootEntity3]
        f[SourceRootEntity4]
        a --> b
        a --> d
        d --> k
        d --> e
        d --> f
        style a fill: #FF9
        style b fill: #FF9
        style d fill: #FF9
        style k fill: #FF9
        style e fill: #FF9
        style f fill: #FF9

    end
    MutableEntityStorage ==  "`**replaceBySource()**`"  ==> Original
```

#### Use Cases

{id="replaceBySourceUseCases"}

Some exemplary use cases are listed below.

##### Importing a Project Model from External System

In a Maven project, the project model can be created each time we detect the <path>pom.xml</path> file was changed.
The new project model is applied to the main storage using the `replaceBySource()` operation.
This will affect only changed entities created from Maven.

##### Working with JPS Build System

For entities loaded from configuration files from the <path>.idea</path> directory,
[`WorkspaceEntity.entitySource`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/WorkspaceEntity.kt)
points to the corresponding XML file.
When the IDE detects changes in some configuration files, it loads new entities from the created
and modified files to a separate `MutableEntityStorage` instance.
Then it calls `replaceBySource()` passing a filter which accepts entity sources corresponding to the all
created, modified, and deleted files and the prepared `MutableEntityStorage` instance.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Entity Properties

<primary-label ref="2024.2"/>

<link-summary>Workspace Model Entity Properties</link-summary>

Properties of an [entity](workspace_model_entity_declaration.md) are declared by properties in its interface.

## Supported Types

The following types of properties are supported:

* primitive types (`Int`, `Boolean`, etc);
* `String`
* `enum`
* an immutable `data class` with properties of supported types
* a `sealed` class which implementations are immutable data classes or objects with properties of supported types
* a nullable variant of a supported type
* `List`, `Set` or `Map` collections with elements of supported types
* [`VirtualFileUrl`](#virtualfileurl)
* [`EntitySource`](#entitysource)
* [`SymbolicEntityId`](#symbolicentityid)
* a [reference to another entity](#parent-child-relationship)

## Property Kinds

There are three kinds of properties: mandatory, optional, and computable properties.

### Mandatory

If a property doesn't have a default value, it is treated as mandatory.
Values of mandatory properties must be provided when an entity is created by passing parameters to the `companion` object.

### Optional

If a property has a default value, it is treated as optional.
Optional properties may be initialized in a lambda passed as the last parameter to the `companion` object.
To provide a default value for a property, define a getter for them and annotate it with
[`@Default`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/annotations/Default.kt).
Properties whose type is nullable have a default value `null` implicitly, but there are no implicit default values for other types, even for primitive types.

### Computable

If a property has a getter without `@Default` annotation, it is treated as computable.
Computable properties may use data from other properties of the same entity and other entities referenced from it only.
Their values aren't saved in the storage but computed each time a property is accessed.

## `VirtualFileUrl`

<tldr>

**See Also**: [](workspace_model_entity_read.md#virtualfileurl-index)

</tldr>

Represents a reference to a file or directory.
Workspace model entities must use properties of this type to store references to files instead of storing their paths or URLs as `String` properties,
because it consumes less memory and provides an efficient way to locate a
[`VirtualFile`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFile.java).

Use [`VirtualFileUrlManager.getOrCreateFromUrl()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/url/VirtualFileUrlManager.kt)
or [`VirtualFile.toVirtualFileUrl()`](%gh-ic%/platform/backend/workspace/src/VirtualFileUrls.kt)
extension function to create an instance.

Use [`VirtualFileUrl.virtualFile`](%gh-ic%/platform/backend/workspace/src/VirtualFileUrls.kt) extension property to locate a
[`VirtualFile`](%gh-ic%/platform/core-api/src/com/intellij/openapi/vfs/VirtualFile.java) from a
[`VirtualFileUrl`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/url/VirtualFileUrl.java).

Also, it is possible to automatically update references in entities when corresponding files are moved or renamed.
Currently, it is implemented to specific types of entities only in
[`VirtualFileUrlWatcher`](%gh-ic%/platform/lang-impl/src/com/intellij/workspaceModel/ide/impl/legacyBridge/watcher/VirtualFileUrlWatcher.kt).

### Locating `VirtualFileUrl`

[`EntityStorage.getVirtualFileUrlIndex()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/EntityStorage.kt)
provides a way to quickly find entities referring to a particular
[`VirtualFileUrl`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/url/VirtualFileUrl.java).

```kotlin
val workspaceModel = WorkspaceModel.getInstance(project)
// Getting VirtualFileUrlManager
val virtualFileManager = workspaceModel.getVirtualFileUrlManager()
// Find or create VirtualFileUrl from the URL
val path = virtualFileManager.findByUrl("file:///foo/bar")
// Searching all entities with the path
workspaceModel.currentSnapshot.getVirtualFileUrlIndex()
  .findEntitiesByUrl(path)
```

## `EntitySource`

<tldr>

**See Also**: [](workspace_model_entity_read.md#entitysource-index)

</tldr>

Describes a place where an entity came from.
It may be:

- a configuration file on disk (property [`EntitySource.virtualFileUrl`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/EntitySource.kt)
  should be implemented to point to that file)
- some strings that identify the source
- a marker object if entities are generated automatically by some algorithm which doesn't use external data

Each entity must specify its source via the
[`WorkspaceEntity.entitySource`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/WorkspaceEntity.kt) property.
For example, entities loaded from configuration files under the <path>.idea</path> directory use
[`JpsProjectFileEntitySource`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/jpsEntitySources.kt).

Information about entity sources is used by the
[`MutableEntityStorage.replaceBySource()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/MutableEntityStorage.kt)
function.
See also [](workspace_model_entity_mutation.md#replace-by-source) section.

An entity source must be serializable along with entities, so there are some restrictions on its implementation.
It must be a `data class` that contains read-only properties of the following types:

* primitive types
* `String`
* `enum`
* `List` of another allowed type
* another `data class` with properties of the allowed types
* `sealed abstract class` where all implementations satisfy these requirements

## `SymbolicEntityId`

<tldr>

**See Also**: [](workspace_model_entity_read.md#symbolicentityid-index)

</tldr>

The ID is supposed to be based on names specified by a user in the UI or in configuration files, not on some autogenerated IDs.
Can be interpreted as a business key for the concrete entity type.
[`SymbolicEntityId`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/SymbolicEntityId.kt)
for an entity may include a reference to `SymbolicEntityId` of its parent entity if it is necessary to make them unique.
For example, [`ModuleId`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities/persistent_Id.kt)
includes only the name of the module, but
[`FacetId`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities/persistent_Id.kt)
includes the name of the facet and a reference to `ModuleId` of the module the facet belongs to.

The Workspace Model store is prohibited from containing two entities with the same `SymbolicEntityId`.
For example, [`SymbolicIdAlreadyExistsException`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/impl/exceptions/SymbolicIdAlreadyExistsException.kt)
will be thrown when trying to add a
[`ModuleEntity`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities/module.kt)
with a `ModuleId` that is already present in the
[`EntityStorage`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/EntityStorage.kt).

To specify a `SymbolicEntityId` for an entity, the entity interface must extend
[`WorkspaceEntityWithSymbolicId`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/SymbolicEntityId.kt)
and provide an implementation of its `symbolicId` property which returns an instance of the corresponding class.
Type parameter `<E>` of the returned instance must be equal to the entity interface.
A specific implementation of `SymbolicEntityId` may be used in properties of an entity
to create a symbolic link to an entity of the corresponding type.

Note that unlike [parent-child](#parent-child-relationship) "hard" links, symbolic links aren't guaranteed to be resolvable.
When a linked entity is removed, the entity referring to it doesn't change, and the ID will resolve to `null`.
However, if after modification of an entity, its `symbolicId` changes, properties of all other entities containing a value equal to the previous ID
are automatically replaced with the new ID.

The storage maintains an index, which can be used to quickly find all entities referring to a given entity via symbolic links, see
[`EntityStorage.referrers()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/EntityStorage.kt)
function.

An implementation must be a `data class` which contains read-only properties of the following types:

* primitive types
* `String`
* `enum`
* another `data class` with properties of the allowed types
* `sealed abstract class` where all implementations satisfy these requirements

## References between Entities

There are two ways to refer from one entity to another: using parent-child relationship (hard links) and via symbolic references (soft links).

### Parent-Child Relationship

Some types of entities may be connected by "parent-child" relationship.
It is introduced by a property in the parent entity interface which refers to the child entity (entities) with
[`@Child`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/annotations/Child.kt)
annotation, and a property in the child entity interface which refers to the parent entity.
For example, content roots are defined inside a module in the project model, so
[`ContentRootEntity`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities/roots.kt)
is defined as a child of
[`ModuleEntity`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities/module.kt).

The storage automatically maintains the consistency of this relationship during modifications:

* if a parent entity is removed, all its child entities are also removed
* if a child entity is removed, the corresponding property in its parent entity is updated so it no longer refers to the removed entity

The property referring to child entity may have a type

* `@Child ChildEntity?` indicating that there are zero or one child entities of the given type
* `List<@Child ChildEntity>` indicating that there are zero, one, or more child entities of the given type

The property referring to the parent entity may have a type

* `ParentEntity` indicating that the parent is mandatory
* `ParentEntity?` indicating that the parent is optional

If the parent is optional, it is possible to create a child entity without the parent entity and set the reference to the parent entity to `null` for an existing child entity.
Also, if the reference to a child entity is removed from the corresponding property in the parent entity, it causes automatic removal of the child entity
if it specifies that the parent is mandatory and sets the parent reference to `null` if the parent is optional.

See the "Parent-child relationship between entities" section in
[`WorkspaceEntity`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/WorkspaceEntity.kt)
code documentation for more details.

### Symbolic References

If a configuration described by an entity refers to a configuration described by another entity, a symbolic reference may be used.
It may happen that the referenced configuration doesn't exist: in that case the reference cannot be resolved.

To define a symbolic reference, the interface of the referenced entity must extend
[`WorkspaceEntityWithSymbolicId`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/SymbolicEntityId.kt),
provide an implementation of
[`SymbolicEntityId`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/SymbolicEntityId.kt)
and return it from its `symbolicId` property.
The entity which refers to it must store an instance of that `SymbolicEntityId` implementation in one of its properties.

For example, a module from the project model may depend on other modules.
This is implemented by a property with the type
[`ModuleId`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities/persistent_Id.kt)
which is stored inside
[`ModuleDependencyItem`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities/persistent_Id.kt)
`data class` stored in the
[`ModuleEntity.dependencies`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities/module.kt)
property.

The value of a property containing an implementation of `SymbolicEntityId` is automatically updated if the `symbolicId` property
of the referenced entity changes after modification.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Entity Read

<primary-label ref="2024.2"/>

<link-summary>Entity read of Workspace Entities</link-summary>

## Entities Querying

[`EntityStorage`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/EntityStorage.kt)
provides the ability to query data from
[`WorkspaceModel`](%gh-ic%/platform/backend/workspace/src/WorkspaceModel.kt).

### Basic request

To request all entities of the concrete type use
[`EntityStorage.entities()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/EntityStorage.kt).

```kotlin
// Take a copy of the current storage
val currentSnapshot: ImmutableEntityStorage =
  WorkspaceModel.getInstance(project).currentSnapshot
// Search for the module with the given name throughout the whole list
val moduleEntity: ModuleEntity? =
  currentSnapshot.entities(ModuleEntity::class.java)
    .find { it.name == moduleName }

// Extension function shortcut for
// EntityStorage.entities(E::class.java)
currentSnapshot.entities<ModuleEntity>()
```

## Index-Based Queries

Throughout the entity's lifecycle, a number of internal indexes are created and maintained to speed up certain types of searches.

### `EntitySource` Index

<tldr>

**Reference**: [](workspace_model_entity_properties.md#entitysource)

</tldr>

This index stores information about entities'
[`EntitySource`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/EntitySource.kt)
and allows obtaining all entities matching the given predicate.

```kotlin
val currentSnapshot: ImmutableEntityStorage =
  WorkspaceModel.getInstance(project).currentSnapshot
// Querying all entities of different types
// but with concrete entitySource
currentSnapshot.entitiesBySource { it is GradleEntitySource }.forEach {
  // ...
}
```

### `VirtualFileUrl` Index

<tldr>

**Reference**: [](workspace_model_entity_properties.md#virtualfileurl)

</tldr>

[`EntityStorage.getVirtualFileUrlIndex()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/EntityStorage.kt)
provides a way to quickly find entities referring to a particular
[`VirtualFileUrl`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/url/VirtualFileUrl.java).

```kotlin
val currentSnapshot: ImmutableEntityStorage =
  WorkspaceModel.getInstance(project).currentSnapshot
// Searching all entities with the given path
currentSnapshot.getVirtualFileUrlIndex()
  .findEntitiesByUrl(virtualFileUrl)
```

### `SymbolicEntityId` Index

<tldr>

**Reference**: [](workspace_model_entity_properties.md#symbolicentityid)

</tldr>

Allows searching for an entity by its
[`SymbolicEntityId`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/SymbolicEntityId.kt).

```kotlin
val moduleId = ModuleId("moduleName")
val entityStorage: ImmutableEntityStorage =
  WorkspaceModel.getInstance(project).currentSnapshot
entityStorage.resolve(moduleId)
```

### Arbitrary Data

Provides a way to associate
[`WorkspaceEntity`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/WorkspaceEntity.kt)
with an external data type.
The association survives modifications of an entity, and is automatically removed when the entity is deleted.
Use
[`MutableEntityStorage.getMutableExternalMapping()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/MutableEntityStorage.kt)
to fill the index and
[`EntityStorage.getExternalMapping()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/EntityStorage.kt)
to access it.

#### Example

In the following example, data stored in instances of `Foo` is associated with `ModuleEntity`.

##### Filling the Index

```kotlin
// Сlass whose instances we want to store in the index
data class Foo(val someData: String)
// Unique identifier of the concrete mapping
val externalMappingKey = ExternalMappingKey.create<Foo>("intellij.foo")

val mutableEntityStorage = WorkspaceModel.getInstance(project)
  .currentSnapshot.toBuilder()
// Getting mutable instance of specific mapping
val mutableFooExternalMapping =
  mutableEntityStorage.getMutableExternalMapping(externalMappingKey)

val moduleEntity = mutableEntityStorage
  .entities(ModuleEntity::class.java).single()
// Associate data with specific `ModuleEntity`
mutableFooExternalMapping.addMapping(moduleEntity, Foo("someData"))
```

##### Getting the Data

```kotlin
// Сlass whose instances we want to store in the index
data class Foo(val someData: String)

// Unique identifier of the concrete mapping
val externalMappingKey = ExternalMappingKey.create<Foo>("intellij.foo")

val entityStorage = WorkspaceModel.getInstance(project).currentSnapshot
// Immutable instance of specific mapping
val fooExternalMapping = entityStorage
  .getExternalMapping(externalMappingKey)

val moduleEntity = entityStorage
  .entities(ModuleEntity::class.java).single()
// Getting the data associated with specific `ModuleEntity`
val foo = fooExternalMapping.getDataByEntity(moduleEntity)
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Event Listening

<primary-label ref="2024.2"/>

<link-summary>Listening to Workspace Model events</link-summary>

There are two ways to subscribe to events from the Workspace Model:
via [listener](#WorkspaceModelChangeListener) or by subscribing to the [flow](#subscription-via-kotlin-flow) of events.

### `EntityChange` Events

The order of
[`EntityChange`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/MutableEntityStorage.kt)
events is predefined:

1. `EntityChange.Removed`
2. `EntityChange.Replaced`
3. `EntityChange.Added`

The `Added` and `Removed` events are straightforward and generated in case of added or removed entities.

The `Replaced` event is generated in case if any of the fields of the entity changes the value in the newer version of storage.
This event is generated in two cases:

- "primitive" field change (`Int`, `String`, `data class`, etc.)
- changes of references to other entities

The change of references may happen indirectly by modifying the referred entity.
For example, when removing a child entity, two events are generated: `Removed` for a child and `Replaced` for a parent.
When adding a new child entity, again two events will be generated: `Added` for a child and `Replaced` for a parent.

#### Examples

##### Example 1

Assuming the following structure of entities: `A` &rarr; `B` &rarr; `C`.
Where `A` is the root entity and `B` is its child, and `C` is the child of `B`.

- Modify a primitive field of `C`: [**Replaced(C)**]
- Remove `C`: [**Replaced(B)**, **Removed(C)**]
- Remove reference between `B` and `C`: [**Replaced(B)**, **Replaced(C)**]
- Remove `B`: [**Replaced(A)**, **Removed(B)**, **Removed(C)**] – `C` is cascade removed

##### Example 2

Assuming the following structure of entities:
Initial: `A` &rarr; `B`  `C`
After: `A`  `C` &rarr; `B`

Move child `B` from `A` to `C`: [**Replaced(A)**, **Replaced(B)**, **Replaced(C)**]

## Subscription via `WorkspaceModelChangeListener`

{id="WorkspaceModelChangeListener"}

The Workspace Model storage allows us to subscribe to all of its changes using the [](plugin_listeners.md) mechanism via
[`WorkspaceModelChangeListener`](%gh-ic%/platform/backend/workspace/src/WorkspaceModelTopics.kt).

The listener offers both
[`WorkspaceModelChangeListener.beforeChanged()`](%gh-ic%/platform/backend/workspace/src/WorkspaceModelTopics.kt)
and
[`WorkspaceModelChangeListener.changed()`](%gh-ic%/platform/backend/workspace/src/WorkspaceModelTopics.kt)
callbacks.
The object passed to these methods as a parameter
[`VersionedStorageChange`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/VersionedEntityStorage.kt)
contains snapshots before and after the modification.
It can be filtered by the concrete type of entity and action (`Added`/`Removed`/`Replaced`).

Examples:

- [`LanguageLevelChangedListener`](%gh-ic%/java/java-impl/src/com/intellij/openapi/roots/impl/LanguageLevelChangedListener.java) to handle Java language level changes
- [`PackagePrefixIndex`](%gh-ic%/java/java-analysis-impl/src/com/intellij/psi/impl/PackagePrefixIndex.java) to update package-prefixes for Java source roots

Registration of listeners can be done in two ways, depending on requirements:

### Programmatic Registration

Listener instance subscription is managed by code, and it starts receiving events only after explicit registration.

```kotlin
val busConnection = project.messageBus.connect(cs)
busConnection.subscribe(WorkspaceModelTopics.CHANGED,
  object : WorkspaceModelChangeListener {

    override fun changed(event: VersionedStorageChange) {
      // Get all changes for ModuleEntity
      val moduleChanges = event.getChanges(ModuleEntity::class.java)
      // Filtering entities which were removed
      moduleChanges.filterIsInstance<EntityChange.Removed<ModuleEntity>>()
        .forEach { removedModuleEntity ->
          ...
        }
    }
  })
```

### Declarative Registration

[Declarative registration](plugin_listeners.md) is available by registering the Project-level listener in <path>plugin.xml</path>.
Listener instances will be automatically instantiated on the first event to the topic.

```xml
<idea-plugin>
  <projectListeners>
    <listener
      class="com.my.plugin.MyCustomWorkspaceModelChangeListener"
      topic="com.intellij.platform.backend.workspace.WorkspaceModelChangeListener"/>
  </projectListeners>
</idea-plugin>
```

## Subscription via Kotlin Flow

As the IntelliJ Platform started adapting [](kotlin_coroutines.md) in its APIs and internal code, it is also possible to subscribe to the
events via [Kotlin Flows](https://kotlinlang.org/docs/flow.html) exposed via the
[`WorkspaceModel.eventLog`](%gh-ic%/platform/backend/workspace/src/WorkspaceModel.kt)
property.

In addition to the regular events subscription, flow allows performing incremental computation:
calculate information based on the initial storage and modify it according to the updates.
This can be useful for incremental updates of Workspace Model-related caches.

If the subscription should be set up after a project is opened, use
[`ProjectActivity`](plugin_components.md#project-open).
This is also the way to migrate from the existing [`WorkspaceModelChangeListener`](#WorkspaceModelChangeListener)-based approach.
Keep in mind that it might miss the few first updates of the model, which is expected because the initial version of the storage will be provided.

Since this listener is asynchronous, there is no guarantee that indexes built on top of
[`WorkspaceFileIndex`](%gh-ic%/platform/projectModel-impl/src/com/intellij/workspaceModel/core/fileIndex/WorkspaceFileIndex.kt)
or the project model will be updated.

### Incremental Computation

To perform incremental computations, the last known version of the storage and the event of updates is required.
This can be obtained by collecting indexed events.
Assume we build some index and keep it updated:

```kotlin
workspaceModel.eventLog.collectIndexed { index, event ->
  if (index == 0) {
    buildIndex(event.storageAfter)
  } else {
    updateIndex(event)
  }
}
```
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Usage Examples

<primary-label ref="2024.2"/>

<link-summary>Workspace Model usages</link-summary>

See also [](workspace_model_entity_mutation.md) and [](workspace_model_entity_read.md) topics.

## Module

### Search Module by Name

```kotlin
val moduleId = ModuleId("moduleName")
val entityStorage: ImmutableEntityStorage =
  WorkspaceModel.getInstance(project).currentSnapshot
entityStorage.resolve(moduleId)
```

### Rename Module

```kotlin
val workspaceModel = WorkspaceModel.getInstance(project)
val moduleEntity: ModuleEntity =
  workspaceModel.currentSnapshot.resolve(ModuleId(moduleName))
writeAction {
  workspaceModel.update("Change module name") { builder ->
    builder.modifyModuleEntity(moduleEntity) {
      this.name = newModuleName
    }
  }
}
```

### `ModuleEntity` Creation

Creating a new
[`ModuleEntity`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities/module.kt),
the legacy bridge will be created by the platform.
An important part here is the entity source.
To serialize an entity in project configuration files under the <path>.idea</path> folder, use
[`JpsProjectFileEntitySource`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/jpsEntitySources.kt).

<tabs>

<tab title="2024.3+">

```kotlin
import com.intellij.workspaceModel.ide.legacyBridge.LegacyBridgeJpsEntitySourceFactory
// ...

val workspaceModel = WorkspaceModel.getInstance(project)
val moduleId = ModuleId(moduleName)
if (moduleId in workspaceModel.currentSnapshot) {
  // Module with such `ModuleId` already exists
  ...
}

val baseModuleDir = workspaceModel.getVirtualFileUrlManager()
  .getOrCreateFromUrl("file://foo/bar")
val moduleEntitySource =
    LegacyBridgeJpsEntitySourceFactory.getInstance(project)
        .createEntitySourceForModule(baseModuleDir, null)
WorkspaceModel.getInstance(project).update("Add new module") { builder ->
  val moduleEntity =
      ModuleEntity(moduleName, emptyList(), moduleEntitySource)
  builder.addEntity(moduleEntity)
}
```

</tab>

<tab title="2024.2">

```kotlin
import com.intellij.workspaceModel.ide.impl.LegacyBridgeJpsEntitySourceFactory
// ...

val workspaceModel = WorkspaceModel.getInstance(project)
val moduleId = ModuleId(moduleName)
if (moduleId in workspaceModel.currentSnapshot) {
  // Module with such `ModuleId` already exists
  ...
}

val baseModuleDir = workspaceModel.getVirtualFileUrlManager()
  .getOrCreateFromUrl("file://foo/bar")
val moduleEntitySource =
    LegacyBridgeJpsEntitySourceFactory
        .createEntitySourceForModule(project, baseModuleDir, null)
WorkspaceModel.getInstance(project).update("Add new module") { builder ->
  val moduleEntity =
      ModuleEntity(moduleName, emptyList(), moduleEntitySource)
  builder.addEntity(moduleEntity)
}
```

<snippet id="LegacyBridgeJpsEntitySourceFactory-internal-note">
> Note that [`LegacyBridgeJpsEntitySourceFactory`](%gh-ic%/platform/projectModel-impl/src/com/intellij/workspaceModel/ide/impl/LegacyBridgeJpsEntitySourceFactory.kt) is an internal API.
> It is exceptionally allowed to use it in plugins.
>
{style="tip"}
</snippet>

</tab>

</tabs>

### Add Library Dependency to Module

A project-level library is added as a dependency to the module.

```kotlin
val workspaceModel = WorkspaceModel.getInstance(project)
val moduleEntity = workspaceModel.currentSnapshot
  .resolve(ModuleId(moduleName)) ?: return
workspaceModel.update("Adding new module dependency") { builder ->
  builder.modifyModuleEntity(moduleEntity) {
    val libraryId = LibraryId(
      libraryName,
      LibraryTableId.ProjectLibraryTableId
    )
    this.dependencies.add(
      LibraryDependency(libraryId, false, DependencyScope.COMPILE)
    )
  }
}
```

### Searching for Module-Containing Path

Search for content roots and source roots with required URLs and determine the `ModuleEntity` to which they belong.

```kotlin
val workspaceModel = WorkspaceModel.getInstance(project)
val virtualFileUrl = workspaceModel.getVirtualFileUrlManager()
  .getOrCreateFromUrl("file://foo/bar/src")

workspaceModel.currentSnapshot.getVirtualFileUrlIndex()
  .findEntitiesByUrl(virtualFileUrl)
  .mapNotNull {
    if (it is SourceRootEntity) {
      it.contentRoot.module
    } else if (it is ContentRootEntity) {
      it.module
    } else {
      null
    }
  }
```

## Library

### `LibraryEntity` Creation

Creating a new
[`LibraryEntity`](%gh-ic%/platform/workspace/jps/src/com/intellij/platform/workspace/jps/entities/dependencies.kt),
the legacy bridge will be created by the platform.


<tabs>

<tab title="2024.3+">

```kotlin
import com.intellij.workspaceModel.ide.legacyBridge.LegacyBridgeJpsEntitySourceFactory
// ...

val currentSnapshot = WorkspaceModel.getInstance(project).currentSnapshot
val libraryTableId = LibraryTableId.ProjectLibraryTableId

val libraryId = LibraryId(libraryName, libraryTableId)
if (libraryId in currentSnapshot) {
  // Library with such `LibraryId` already exist
  ...
}

val libraryEntitySource =
    LegacyBridgeJpsEntitySourceFactory.getInstance(project)
        .createEntitySourceForProjectLibrary(null)
val libraryEntity = LibraryEntity(
  libraryName,
  libraryTableId, emptyList(),
  libraryEntitySource
)
WorkspaceModel.getInstance(project).update("Add new library") { builder ->
  builder.addEntity(libraryEntity)
}
```

</tab>

<tab title="2024.2">

```kotlin
import com.intellij.workspaceModel.ide.impl.LegacyBridgeJpsEntitySourceFactory
// ...

val currentSnapshot = WorkspaceModel.getInstance(project).currentSnapshot
val libraryTableId = LibraryTableId.ProjectLibraryTableId

val libraryId = LibraryId(libraryName, libraryTableId)
if (libraryId in currentSnapshot) {
  // Library with such `LibraryId` already exist
  ...
}

val libraryEntitySource =
    LegacyBridgeJpsEntitySourceFactory
        .createEntitySourceForProjectLibrary(project, null)
val libraryEntity = LibraryEntity(
  libraryName,
  libraryTableId, emptyList(),
  libraryEntitySource
)
WorkspaceModel.getInstance(project).update("Add new library") { builder ->
  builder.addEntity(libraryEntity)
}
```

<include from="workspace_model_usages.md" element-id="LegacyBridgeJpsEntitySourceFactory-internal-note"></include>

</tab>

</tabs>

### Searching for Library by Root Type and URL

```kotlin
val workspaceModel = WorkspaceModel.getInstance(project)
val virtualFileUrlManager = workspaceModel.getVirtualFileUrlManager()
// URL that we will look for in library entities
val virtualFileUrl = virtualFileUrlManager
  .getOrCreateFromUrl("file://foo/bar")
workspaceModel.currentSnapshot.getVirtualFileUrlIndex()
  .findEntitiesByUrl(virtualFileUrl).filterIsInstance<LibraryEntity>().filter {
    it.roots.any {
      it.url == virtualFileUrl &&
              it.type == LibraryRootTypeId.SOURCES
    }
  }
```

## Roots

### Add Content Root and Source Root for Module

```kotlin
val workspaceModel = WorkspaceModel.getInstance(project)
val virtualFileUrlManager = workspaceModel.getVirtualFileUrlManager()

val moduleEntity = workspaceModel.currentSnapshot
  .resolve(ModuleId(moduleName)) ?: ...
val contentRootUrl = virtualFileUrlManager
  .getOrCreateFromUrl("file://foo/bar")
val sourceRootUrl = virtualFileUrlManager
  .getOrCreateFromUrl("file://foo/bar/src")
workspaceModel.update("Adding source root") { builder ->
  val contentRootEntity = ContentRootEntity(contentRootUrl, emptyList(), moduleEntity.entitySource) {
    val sourceRootEntity =
      SourceRootEntity(
        sourceRootUrl,
        SourceRootTypeId("java-source"),
        moduleEntity.entitySource
      )
    this.sourceRoots = mutableListOf(sourceRootEntity)
  }
  builder.modifyModuleEntity(moduleEntity) {
    this.contentRoots = mutableListOf(contentRootEntity)
  }
}
```

### Adding Different Types of Library Roots

Two library roots of different types are defined, and a new exclude root is added.

```kotlin
val workspaceModel = WorkspaceModel.getInstance(project)
val virtualFileUrlManager = workspaceModel.getVirtualFileUrlManager()
val libraryEntity = workspaceModel.currentSnapshot
  .resolve(
    LibraryId(
      libraryName,
      LibraryTableId.ProjectLibraryTableId
    )
  ) ?: ...

val sourceRoot = LibraryRoot(
  virtualFileUrlManager
    .getOrCreateFromUrl("file://foo/bar"), LibraryRootTypeId.SOURCES
)
val compiledRoot = LibraryRoot(
  virtualFileUrlManager
    .getOrCreateFromUrl("file://foo/baz"), LibraryRootTypeId.COMPILED
)
workspaceModel.update("Adding library roots") { builder ->
  builder.modifyLibraryEntity(libraryEntity) {
    this.roots = mutableListOf(sourceRoot, compiledRoot)
    // Adding new exclude root
    val virtualFileUrl = virtualFileUrlManager
      .getOrCreateFromUrl("file://foo/out")
    this.excludedRoots =
      excludedRoots + ExcludeUrlEntity(virtualFileUrl, this.entitySource)
  }
}
```

## Miscellaneous

### Migration of Caches Relying on `Library`/`Module`

Using `Library` or `Module` as a key on maps has a number of disadvantages:

- Can’t be used as a key for collections that rely on hashcode calculation, as these objects are mutable by their nature.
- The fact that they extend `Disposable` (see [](disposers.md)) imposes additional difficulties.

To eliminate these shortcomings, use
[`EntityPointer`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/EntityPointer.kt).
It represents a pointer to an entity which can be stored anywhere.
The pointer can be obtained via
[`WorkspaceEntity.createPointer()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/WorkspaceEntity.kt).
An instance of this class stores an internal ID of the entity and doesn't contain the pointer to the original storage, so it's ok to
store them in long-living data structures as it won't create a memory leak.

The pointer will resolve to the same entity for the same storage and will survive modifications.
If the entity is removed or replaced by a different one via
[`MutableEntityStorage.replaceBySource()`](%gh-ic%/platform/workspace/storage/src/com/intellij/platform/workspace/storage/MutableEntityStorage.kt),
the pointer may either resolve to `null` or to a completely different entity which reused the same internal ID.
To be sure that the pointer resolves to the original entity, also [subscribe to changes](workspace_model_event_listening.md) in the storage.

<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Writing Short and Clear

<link-summary>Tips on writing short and clear UI texts.</link-summary>

<p>
Texts in user interfaces should be short and clear. Short texts save reading time. Clear texts lead to fewer mistakes. Editing methods described below can help with that.
</p>

## Use simple constructions

Use simple verb forms. Prefer present tense.

Use simple sentences: one idea per sentence.

Avoid passive voice.

This way, the same meaning can be expressed with fewer words. Compare:

<i>Those resources that are available locally</i> → <i>Local resources</i>

<i>Maven has to use</i> → <i>Maven uses</i>

<i>The use of a secure connection is required</i> → <i>Use secure connection</i>

## Remove or elaborate generic words

Words like *general*, *advanced*, and *options* do not add useful information and can be removed with no harm to the meaning:

![](generic-general.png){width=540}

![](generic-options.png){width=540 style=block}
*No meaning is lost after removing group headers "General" and "Options".*

Some generic words cannot be removed. They can appear in actionable elements like buttons, checkboxes, or links. Or removing a group header could break a dialog layout. In such cases, use a more informative label instead:

![](generic-renamed-link.png){width=576 style=block}
*The link "Learn more" does not explain what useful information could be there for the user to click it.*

## Remove obvious objects and actions

Remove verbs that explain the function of a UI control:

![](obvious-specify.png){width=403 style=block}
*Text boxes are made for input — an explicit instruction "specify" duplicates the meaning expressed by the text field. Additional information can be given under the field — see [Context help](context_help.md).*

<table style="none">
  <tr>
     <td width="50%"> <img src="obvious-prefer.png" width="357"/><em> A selected radio button means its option is "preferred". </em> </td>
      <td width="50%"> <img src="obvious-allow.png" width="266"/><em> A checked checkbox means its feature is "allowed". </em> </td>
  </tr>
</table>

Remove words with a meaning that is already expressed in the label:
<table style="none">
    <tr>
       <td width="50%"> <img src="obvious-contents.png" width="357"/>
            <em> The clipboard’s purpose is to keep information so the infinitive "to keep" is implying the obvious and can be removed.</em> </td>
       <td width="50%"> <img src="obvious-functionality.png" width="266"/>
            <em> The word "functionality" is already implied by "Drag’n’Drop" and can be removed. </em> </td>
    </tr>
</table>

## Do not address the user

A user interface is for a person who uses it. Addressing this person is unnecessary because they by default perceive the text they see as for them:

![](addressing1.png){width=674}

![](addressing2.png){width=674 style=block}
*The whole phrase after the comma is not needed because its meaning is already expressed by the verb "configure".*

## Remove duplicates

If the repeating word appears in element labels, move it to the beginning. Finding a setting becomes faster as you scan only meaningful words:

![](writing_short_duplicates.png){width=438}

Remove duplicates in meaning:

![](help-improve-notification.png){width=498}

<table>
<tr>
<td width="30%"> Before </td>
<td width="30%"> After </td>
<td width="40%"> Explanation</td>
</tr>
<tr>
    <td> Help improve IntelliJ IDEA <format color="#cc4700"> by sending anonymous usage statistics to JetBrains s.r.o.</format> </td>
    <td> Help improve IntelliJ IDEA </td>
    <td> <format color="#999999"> The purpose of the header is to attract attention. The shorter and clearer header does that better. </format> </td>
</tr>
<tr>
    <td> <format color="#cc4700"> if you want to help make IntelliJ IDEA better </format> </td>
    <td> Allow sending anonymous usage statistics to JetBrains s.r.o. </td>
    <td> <format color="#999999"> "Help make IntelliJ IDEA better" is already expressed in the message header. The body text now explains how the user can do that. </format> </td>
</tr>
<tr>
    <td> <format color="#cc4700"> more... </format> </td>
    <td> Terms and conditions </td>
    <td> <format color="#999999">The link more... does not tell what is behind it — unclear for the user why to click it.</format></td>
</tr>
</table>

<table>
<tr>
<td width="30%"> Removed </td>
<td width="70%"> Explanation </td>

</tr>
<tr>
    <td> <format color="#cc4700"> click I agree</format> </td>
    <td> <format color="#999999"> The verb "click" is obvious from context: you cannot do much with a link other than click. </format> </td>
</tr>
<tr>
    <td> <format color="#cc4700"> click... I don’t agree otherwise </format> </td>
    <td> <format color="#999999"> The link "I don’t agree" duplicates the notification "Close" button which appears on hover. </format> </td>
</tr>
<tr>
    <td> <img src="notificationInfo.png"/> </td>
    <td> <format color="#999999"> The icon is not needed because the message is purely informative, not an error or a warning. Texts are information by default, there is no need to specify that meaning explicitly. </format> </td>
</tr>
</table>

## Translate from tech to human

When you make a feature, you know how it works from the inside and can describe it from the implementation point of view:

![](indent-options-before.png){width=560}

A person not familiar with implementation details won’t know what the Automatic indent options detector is, why file’s indent options have been overwritten and what indent size=2 means. Translated to the "human" language, the message reads:

![](indent-options-after.png){width=560}

Always write UI text from a user’s perspective. Avoid technical terms, jargon and descriptions of inner logic that a user might not know.

## Write for first-time users

After writing a UI text, imagine seeing it for the first time and try to understand what might be unclear or confusing. Then correct if necessary.

![](first-time-file-colors-before.png){width=474 style=block}
*For a first-time user, Enable File Colors enables or disables the other two options (but it does not).*

![](first-time-file-colors-after.png){width=474 style=block}
*Rewritten: now all options are equal.*

More examples:

![](first-time-auto-insert.png){width=318 style=block}
*Before: The title can be read as "Auto-insert when only one checkbox is on" making you ask how it works when both checkboxes are on. After: Replacing choice with completion option makes the title unambiguous.*

![](first-time-smart-keys.png){width=318 style=block}
*Before: What do smart Home and End keys do? What do they do if they are not smart? After: The added text explains what the options do so that the reader can make an informed choice.*

## Examples

![](project-structure.png){width=642}

<table>

<tr>
<td width="30%"> Before </td>
<td width="30%"> After </td>
<td width="40%"> Explanation </td>
</tr>

<tr>
    <td> <format color="#cc4700">Project</format> name <format color="#cc4700">Project</format> SDK <format color="#cc4700">Project</format> language level </td>
    <td> Project name SDK Language level </td>
    <td> <format color="#999999"> "Project" can be left only for the first field. All others will be understood as project settings because they appear in the same group of UI elements. </format> </td>
</tr>
<tr>
    <td> This path <format color="#cc4700">is used</format> to store </td>
    <td> This path stores </td>
    <td> <format color="#999999"> Simple verb form </format> </td>
</tr>
<tr>
    <td> store <format color="#cc4700">all</format> project compilation <format color="#cc4700">results</format> </td>
    <td> stores project compilation output </td>
    <td> <format color="#999999"> "all" is extra because it is implied by default. "results" is another word for "output" — having different words for the same meaning complicates understanding. </format> </td>
</tr>
<tr>
    <td> A directory corresponding to each module <format color="#cc4700">is created</format> under this path. This directory contains <format color="#cc4700">two</format> subdirectories... </td>
    <td> It has a separate directory for each module, with the Production and Test subdirectories. </td>
    <td> <format color="#999999"> "is created" is not relevant to the meaning of this phrase. "two" is obvious from context: you see that there are two subdirectories because only two are named. </format> </td>
</tr>
</table>

<table>
<tr>
<td width="50%"> Moved </td>
<td width="50%"> Moved </td></tr>
<tr>
    <td> <format color="#cc4700">This</format> [field name] <format color="#cc4700">is default for all project modules. A module specific</format> [field name] <format color="#cc4700">can be configured for each of the modules is required.</format> </td>
    <td> <format color="#999999"> This phrase is repeated for all fields. Can be shown only once at the bottom of the dialog.</format> </td>
</tr>
</table>

![](offline-mode.png){width=566}
<table>
<tr>
<td width="30%"> Before </td>
<td width="30%"> After </td>
<td width="40%"> Explanation </td>
</tr>
<tr>
    <td> <format color="#cc4700">visits the</format> remote repositories <format color="#cc4700">and</format> checks for updates </td>
    <td> checks remote repositories for updates </td>
    <td> <format color="#999999"> "Checks" already includes the meaning of "visits". </format> </td>
</tr>
<tr>
    <td> <format color="#cc4700">When you switch to</format> offline mode </td>
    <td> In the offline mode </td>
    <td> <format color="#999999"> The action "switched" is not relevant for the meaning of this phrase. Also, an unnecessary reference to the user — "you". </format> </td>
</tr>
<tr>
    <td> Maven <format color="#cc4700">has to</format> use </td>
    <td> Maven uses </td>
    <td> <format color="#999999"> Not relevant that a technology must do something, enough to say it just works this way. </format> </td>
</tr>
<tr>
    <td> <format color="#cc4700">those</format> resources <format color="#cc4700">that are available</format> locally </td>
    <td> local resources </td>
    <td>  </td>
</tr>
<tr>
    <td> reports <format color="#cc4700">about the problems</format> if something is missing  </td>
    <td> reports if something is missing </td>
    <td>  </td>
</tr>
</table>

<table>
<tr>
<td width="30%"> Removed </td>
<td width="70%"> Explanation </td>
</tr>
<tr>
    <td> <format color="#cc4700">The offline mode is helpful when you need to work offline</format> </td>
    <td> <format color="#999999"> The phrase does not explain when the offline mode is helpful. It should either be elaborated or removed. </format> </td>
</tr>
<tr>
    <td> <format color="#cc4700"> or when your network connection is slow </format> </td>
    <td> <format color="#999999"> Only one of possible uses for the offline mode and an obvious one. It can be removed for a more concise text. </format> </td>
</tr>
</table>
<!-- Copyright 2000-2023 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Writing Tests

<link-summary>Introduction to implementing tests.</link-summary>

<include from="tests_and_fixtures.md" element-id="testFrameworkDependencies"/>

In most cases, once you have the necessary files copied to the test project and loaded into the in-memory editor, writing the test itself involves invoking your plugin code and has few dependencies on the test framework.

However, for many common cases, the framework provides helper methods that can make testing easier:
* `type()` simulates the typing of a character or string into the in-memory editor.
* `performEditorAction()` simulates the execution of an action in the in-memory editor context.
* `complete()` simulates code completion invocation and returns the list of lookup elements displayed in the completion list (or `null` if the completion had no suggestions or one suggestion which was auto-inserted).
* `findUsages()` simulates the invocation of _Find Usages_ and returns the found usages.
* `findSingleIntention()` in combination with `launchAction()` simulate the invocation of an intention action or inspection quick fix with the specified name.
* `renameElementAtCaret()` or `rename()` simulate the execution of a rename refactoring.

To compare the results of executing the action with the expected results, you can use the `checkResultByFile()` method.
The file with the expected results can also contain [markup](test_project_and_testdata_directories.md#special-markup) to specify the expected caret position or selected text range.
Suppose you're testing an action that modifies multiple files (a project-wide refactoring, for example). In that case, you can compare an entire directory under the test project with the expected output using `PlatformTestUtil.assertDirectoriesEqual()`.

See [Useful Classes](testing_faq.md#useful-classes) for other common testing functionality.
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# Testing a Custom Language Plugin

<link-summary>Tutorial demonstrating how to develop tests for custom language plugin features.</link-summary>

> Please see [](testing_plugins.md) for a general introduction.
>
{style="note"}

This tutorial demonstrates how to write and run automated tests for a custom language plugin.

As an example, the plugin implemented in the [Custom Language Support Tutorial](custom_language_support_tutorial.md) is used to demonstrate functional test development.

> Corresponding parts are linked under **Tested Functionality** on top of each page in this tutorial.
>

* [](tests_prerequisites.md)
* [](folding_test.md)
* [](parsing_test.md)
* [](find_usages_test.md)
* [](completion_test.md)
* [](commenter_test.md)
* [](annotator_test.md)
* [](reference_test.md)
* [](formatter_test.md)
* [](documentation_test.md)
* [](rename_test.md)
* {columns="2"}

<seealso style="cards">
    <category ref="related">
    <a href="testing_plugins.md"/>
    </category>
</seealso>
<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# XML DOM API

<link-summary>Implementing APIs for accessing XML models.</link-summary>

[//]: # (TODO content: DOM <=> PSI, Go To Symbol, editor gutter icon->DOM)

This article is intended for plugin writers who create custom web server integrations, or some UI for easy XML editing.
It describes the *Document Object Model* (DOM) in IntelliJ Platform - an easy way to work with DTD or Schema-based XML models.
The following topics will be covered: working with DOM itself (reading/writing tags content, attributes, and subtags) and easy XML editing in the UI by connecting UI to DOM.

It's assumed that the reader is familiar with Java, Swing, IntelliJ Platform XML PSI (classes [`XmlTag`](%gh-ic%/xml/xml-psi-api/src/com/intellij/psi/xml/XmlTag.java), [`XmlFile`](%gh-ic%/xml/xml-psi-api/src/com/intellij/psi/xml/XmlFile.java), [`XmlTagValue`](%gh-ic%/xml/xml-psi-api/src/com/intellij/psi/xml/XmlTagValue.java), etc.), IntelliJ Platform plugin development basics (application and project components, [file editors](editors.md)).

## XML PSI vs DOM

So, how to operate with XML from an IntelliJ Platform plugin?
Usually, one has to take `XmlFile`, get its root tag, and then find a required sub-tag by path.
The path consists of tag names, each of them a string.
Typing these everywhere is tedious and error-prone.
Let's assume you have the following XML:

```xml
<root>
  <foo>
    <bar>42</bar>
    <bar>239</bar>
  </foo>
</root>
```

Let's say you want to read the contents of the second bar element, namely, "239".

It's _not_ correct to create chained calls like

```java
file.getDocument()
    .getRootTag()
    .findFirstSubTag("foo")
    .findSubTags("bar")[1]
    .getValue()
    .getTrimmedText();
```

because each call here may return `null`.

So the code would probably look like this:

```java
XmlFile file = ...;
XmlDocument document = file.getDocument();
if (document != null) {
  XmlTag rootTag = document.getRootTag();
  if (rootTag != null) {
    XmlTag foo = rootTag.findFirstSubTag("foo");
    if (foo != null) {
      XmlTag[] bars = foo.findSubTags("bar");
      if (bars.length > 1) {
        String s = bars[1].getValue().getTrimmedText();
        // do something
      }
    }
  }
}
```

Looks awful, doesn't it?
But there's a better way to do the same thing.
You just need to extend a special interface - [`DomElement`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/DomElement.java).

For example, let's create several interfaces:

```java
interface Root extends com.intellij.util.xml.DomElement {
  Foo getFoo();
}

interface Foo extends com.intellij.util.xml.DomElement {
  List<Bar> getBars();
}

interface Bar extends com.intellij.util.xml.DomElement {
  String getValue();
}
```

Next, you should create a [`DomFileDescription`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/DomFileDescription.java) class, pass to its constructor the root tag name and root element interface.
Register it in <path>[plugin.xml](plugin_configuration_file.md)</path> using `com.intellij.dom.fileMetaData` extension point and specify `rootTagName` and `domVersion`/`stubVersion` attributes.

> When targeting 2019.1 or earlier, use `com.intellij.dom.fileDescription` extension point instead.
>
{style="note"}

You can now get the file element from [`DomManager`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/DomManager.java).
To get the "239" value, you only have to write the following code:

```java
DomManager manager = DomManager.getDomManager(project);
Root root = manager.getFileElement(file).getRootElement();
List<Bar> bars = root.getFoo().getBars();
if (bars.size() > 1) {
  String s = bars.get(1).getValue();
  // do something
}
```

I suppose this looks a little nicer.
You often work with your model in more than one place.
Re-creating the model is too inefficient, so we cache it for you, and any subsequent calls to `DomManager.getFileElement()` will return the same instance.
So, it is useful to invoke this method just once, and then keep everywhere only the "root" object you've obtained.
In this case, you won't need to repeat that scary first line, and the code will look even nicer.

It is also important to note that with this scenario we avoid potential `NullPointerException`: our DOM guarantees that every method accessing a tag child will return a not-null element, even if the correspondingly-named sub-tag doesn't exist.
That may seem strange at first glance, but it appears to be rather convenient.
How does it work?
Simple.
Given those interfaces, DOM generates all the code for accessing correct subtags and creating model elements at runtime.
The sub-tag names and element types are taken from method names, return types and method annotations, if any.
In most cases annotations can be omitted, as in our example, but this is discussed further in this article anyway.

Now let us explore more thoroughly what the DOM can do, and look at possible ways of representing various XML concepts such as tag content, attributes or sub-tags.
Later, we will discuss basic methods for working with the model, as well as cover more advanced functionality.
Finally, we'll see how to easily create a UI editor for DOM model elements.

## Building the Model

### Tag Content

In XML PSI, tag content is referred to as tag value, so well do the same for consistency.
To read and change a tag value, you have to add two methods (getter and setter) to your interface, like this:

```java
String getValue();
void setValue(String s);
```

These method names (`getValue` and `setValue`) are standard, and they are used for accessing tag values by default.
If you want to use custom method names for the same goal, you should annotate these methods with `@TagValue`, for example:

```java
@TagValue
String getTagValue();

@TagValue
void setTagValue(String s);
```

As you can see, our accessors work with `String` values.
This is natural, since XML represents a text format, and tag content is always text.
But sometimes you may want to operate with integers, booleans, enums, or even class names (they, of course, will be represented as `PsiClass`), and more generic Java types (`PsiType`).
In such cases, you just need to change the type in methods to the one you need, and everything will keep working correctly.

#### Custom Value Types

If you operate with even more exotic types, you should tell DOM how to deal with them.
First, annotate your accessor methods with the `@Convert` annotation, and specify your own class that should extend the `Converter<T>` class in the annotation.
Here `T` is your exotic type, while `Converter<T>` is a thing that knows how to convert values between `String` and `T`.
If the value cannot be converted (for example, "foo" is not convertible into `Integer`), the converter may return `null`.
Please also note that your implementation should have a no-argument constructor.

Let us consider an interesting case when `T` represents an enum value.
Usually, the converter just searches for enum elements with the names specified in XML.
But sometimes, for their names, you may need or want to use values that are not valid Java identifiers.
For example, the CMP version in EJB may be "1.x" or "2.x", but you can't create Java enums with such names.
For such cases, let your enum implement `NamedEnum` interface, and then name your enum elements as you wish.
Now, just provide the `getValue()` implementation that will return the right value to match with XML contents, and voilà!
In our example, the code will look as follows:

```java
enum CmpVersion implements NamedEnum {
  CmpVersion_1_X ("1.x"),
  CmpVersion_2_X ("2.x");

  private final String value;

  CmpVersion(String value) {
    this.value = value;
  }

  public String getValue() {
    return value;
  }
}
```

As we have already mentioned, an XML tag may have lots of artifacts besides its value: there can be attributes, children, but rather often (e.g., according to DTD or Schema) it should have only the value.
Of course, such tags also need a DOM element to associate with.
And we provide such an element:

```java
interface GenericDomValue<T> {
  T getValue();
  void setValue(T t);

  @TagValue
  String getStringValue();

  @TagValue
  void setStringValue(String s);
}
```

So, you can just specify a particular `T` when using this interface - and everything will work.
Methods that work with `String` are provided for many reasons.
For example, your `T` is [`PsiClass`](%gh-ic%/java/java-psi-api/src/com/intellij/psi/PsiClass.java).
It would be useful to highlight invalid values in the UI.
To get the value to highlight (the string from the XML file), we have the `getStringValue()` method.
The error message will be taken from the converter via `getErrorMessage()`.

### Attributes

Attributes are also rather simple to deal with.
You can read their values, set them, and operate with different types.
So it's natural to create something like `GenericDomValue<T>` and then work as usual.
"Something like" will be an inheritor, as shown below:

```java
interface GenericAttributeValue<T> extends GenericDomValue<T> {
  XmlAttribute getXmlAttribute();
}
```

Consider that you want to work with an attribute named _some-class_ having a value of type `PsiClass`:

```java
@Attribute("some-class")
GenericAttributeValue<PsiClass> getMyAttributeValue();
```

That's all!
Now you can get/set values, resolve this `PsiClass`, get its `String` representation, etc.
The name of the attribute will be taken from the method name (see next paragraph).
If you name your method in a special way, you can even omit the annotation.
For example:

```java
GenericAttributeValue<PsiClass> getSomeClass();
```

The [`DomNameStrategy`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/DomNameStrategy.java) interface specifies how to convert accessor names to XML element names.
Or more precisely, not the full accessor names, but rather the names minus any "get", "set" or "is" prefixes.
The strategy class is specified in the `@NameStrategy` annotation in any DOM element interface.
Then any descendants and children of this interface will use this strategy.
The default strategy is [`HyphenNameStrategy`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/HyphenNameStrategy.java), where words are delimited by hyphens (see sample above).
Another common variant is [`JavaNameStrategy`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/JavaNameStrategy.java) that capitalizes the first letter of each word, as in Java's naming convention.
In our example, the attribute name would be "someClass".

If attribute doesn't define a `PsiClass`, but some other custom `T` that needs a converter, you just need to specify the `@Convert` annotation to the getter.

Please note that the attributes' getter method will never return `null`, even if the attribute isn't specified in XML.
Its `getValue()`, `getStringValue()` and `getXmlAttribute()` methods will return `null`, but the DOM interface instance will exist and be valid.
If the element has an underlying attribute, this can be easily fixed (surely, only if you need that): just call the `undefine()` method (defined in `DomElement`), and the XML attribute disappears, while [`GenericAttributeValue`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/GenericAttributeValue.java) remains valid.

### Children: Fixed Number

You may often deal with tags that have at most one sub-tag with the given name (e.g. `<ejb-name>`, `<ejb-class>` or `<cmp-field>`) in tags defining entity EJBs.
To work with such children, provide getters for them.
These getters should have a return type that extends `DomElement`:

```java
GenericDomValue<String> getEjbName();
GenericDomValue<String> getEjbClass();
CmpField getCmpField();
```

There's also an annotation to designate such children explicitly: `@SubTag`.
Its "value" attribute contains a tag name.
If it is not specified, the name is implied from the method name using the current name strategy.

Sometimes it is the sub-tag's presence that means something, rather than its content - `<unchecked>` in EJB method permissions, for example.
If it exists, then permissions are unchecked, otherwise checked.
For such things one should create a special `GenericDomValue<Boolean>` child.
Usually its `getValue()` returns `true` if there's "true" in a tag value, `false` if there's "false" in a tag value, and `null` otherwise.
In the `@SubTag` annotation, you can specify the attribute like `indicator=true`.
In this case, `getValue()` will return `true` if the tag exists and `false` otherwise.

Let's consider another interesting example inspired by EJB, where there is a relation that has two roles, each designating one relation end: first role and second role.
Both are represented by tags with the same values.
So, we could create a collection of role elements, and every time we access some role we would check if this collection has a sufficient number of elements.
But one of the main purposes of the DOM is to eliminate unnecessary checks.
So why can't we have a fixed (more than one) number of children with the same tag name?
Let's have them!

```java
@SubTag(value = "ejb-relationship-role", index = 0)
EjbRelationshipRole getEjbRelationshipRole1();

@SubTag(value = "ejb-relationship-role", index = 1)
EjbRelationshipRole getEjbRelationshipRole2();
```

The first method will return the DOM element for the first subtag named `<ejb-relationship-role>`, and the second - for the second one.
Hence, the term "fixed number" for such children.
According to DTD or Schema, there should be a fixed number of subtags with the given name.
Most often this fixed number is 1; in our case with the relations it is 2.
Just like attributes, fixed-number children exist regardless of underlying tag existence.
If you need to delete tags, it can be done with the help of the same `undefine()` method.

For children of [`GenericDomValue`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/GenericDomValue.java) type, you can also specify a converter, just as you can for attributes.

### Children: Collections

One more common case in DTD and Schemas is when children have the same tag name and a non-fixed upper limit in count.
Their accessors differ from those of the fixed-number children in the following: the return result is `Collection` or `List` of a special type that extends `DomElement`, and if you want to use name strategies, the method name must be in pluralized form.
For example, in the EJB we would have the following method:

```java
List<Entity> getEntities();
```

There's also an annotation `@SubTagList` where you can explicitly specify the tag name.

Returned collections cannot be modified directly.
To delete an element from a collection, just call `undefine()` on this element.
The tag will then be removed, and an element will become invalid (`DomElement.isValid() == false`).
Note that this behavior differs from that of fixed-number children and attributes: they are always valid, even after `undefine()`.
Again, unlike those children types, collection children always have valid underlying XML tags.

Adding elements is a bit harder.
Since all DOM elements are created internally, you can't just pass some of your DOM elements to some method to add the element to the collection.
In fact, you have to ask a parent element to add a child to the collection.
In our example, it's done in the following way:

```java
Entity addEntity(int index);
```

which adds an element to wherever you want, or

```java
Entity addEntity();
```

which adds a new DOM element to the end of the collection.
Please note the singular tense of the word "Entity".
That's because here we deal with one `Entity` object, while in the collection getter we dealt with potentially many entities.

Now, you can do anything you want with the returned value: modify, define the tag's value, children, etc.

The last common case is also a collection, but one consisting of tags with different names that are arbitrarily mixed.
To work with it, you should define collection getters for all tag names within the mixed collection, and then define an additional specially annotated getter:

```java
// <foo> elements
List<Foo> getFoos();

// <bar> elements
List<Bar> getBars();

// all <foo> and <bar> elements
@SubTagsList({ "foo", "bar" })
List<FooBar> getMergedListOfFoosAndBars();
```

The annotation here is mandatory - we cannot guess several tag names from one method name.

To add elements to such mixed collections, you should create "add" methods for each possible tag name:

```java
@SubTagsList(value = { "foo", "bar" }, tagName = "foo")
FooBar addFoo();

@SubTagsList(value = { "foo", "bar" }, tagName = "bar")
FooBar addBar(int index);
```

The index parameter in the last example means the index in the merged collection, not in the collection of tags named "bar".

### Dynamic Definition

You can extend existing DOM model at runtime by implementing `com.intellij.util.xml.reflect.DomExtender<T>`.
Register it in "extenderClass" attribute of `com.intellij.dom.extender` extension point, where "domClass" specifies DOM class `<T>` to be extended.
[`DomExtensionsRegistrar`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/reflect/DomExtensionsRegistrar.java) provides various methods to register dynamic attributes and children.

If the contributed elements depend on anything other than plain XML file content (used framework version, libraries in classpath, ...), make sure to return `false` from `DomExtender.supportsStubs()`.

### Namespace Support

Annotate DOM model with [`Namespace`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/Namespace.java) and register namespace key mapping via `DomFileDescription.registerNamespacePolicy()` from `DomFileDescription.initializeFileDescription()`.

### IDE Support

_Plugin DevKit_ supports the following features for working with DOM related code:

* [`DomElement`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/DomElement.java) - provide implicit usages for all DOM-related methods defined in inheriting classes (to suppress "unused method" warning)
* [`DomElementVisitor`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/DomElementVisitor.java) - provide implicit usages for all DOM-related visitor methods defined in inheriting classes (to suppress "unused method" warning)

## Working with the DOM

### Class Choosers

It often happens that a collection contains same-named tags that may have different structure or even be represented by different types in the DTD or Schema.
As an example, JSF Managed Beans may be of three types.
If a `<managed-bean>` tag contains a `<map-entries>` sub-tag, then the Managed Bean type is `MapEntriesBean`.
If it contains a `<list-entries>` sub-tag - can you guess?
Right - `ListEntriesBean`!
Otherwise, it's a `PropertyBean` (all three interfaces extend `ManagedBean`).
And when we write `List<ManagedBean> getManagedBeans()`, we expect to get not only a list where all elements are instances of the `ManagedBean` interface, but a list where each element is of a certain type, i.e. `MapEntriesBean`, `ListEntriesBean`, or `PropertyBean`.

In such cases, one should decide which interface the DOM element should actually implement (according to the given tag).
This is achieved by extending the [`TypeChooser`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/TypeChooser.java) abstract class:

```java
public abstract class TypeChooser {
  public abstract Type chooseType(XmlTag tag);
  public abstract void distinguishTag(XmlTag tag, Type aClass)
      throws IncorrectOperationException;
  public abstract Type[] getChooserTypes();
}
```

Here, the first method (`chooseType()`) does exactly what it is named after (chooses the particular type, most often it's a class).
The second one (`distinguishTag()`) acts in reverse: it modifies a tag so that when the element is read from an XML file next time (for example, after the user has closed and opened the project again), the newly created DOM element will implement the same interface and no model data will be lost.
Finally, `getChooserTypes()` just returns all the types that could be returned by `chooseType()`.

To make your `TypeChooser` work, register it in your overridden `DomFileDescription.initializeFileDescription()` method by calling `registerTypeChooser()`.

### Useful Methods of `DomElement` and `DomManager`

#### PSI Connection

Of course, DOM is tightly connected to XML PSI, so there's always a way of getting the `XmlTag` instance (which can be `null` for fixed-number children and attributes) using the `getXmlTag()` method.
We remember that in `GenericAttributeValue` there's also the `getXmlAttribute()` method.
In general case there is `getXmlElement()` method.
You can also get a DOM element by its underlying XML PSI element using the `DomManager.getDomElement()` method.

If a DOM element has no underlying XML element, it can be created by calling `ensureTagExists()`.
To delete a tag, use the already known `undefine()` method.
This method will always delete the underlying XML element (tag or attribute).
If the element was a collection's child, then neither it nor its entire subtree will be valid anymore.

#### Tree Structure

In every normal tree, there's always a possibility to walk up.
`DomElement` is no exception.
Method `getParent()` just returns element's parent in tree.

The method `<T extends DomElement> T getParentOfType(Class<T> requiredClass, boolean strict)` returns the tree ancestor of the given class.
You can see the standard _strict_ parameter, that can return the DOM element itself, if it's `false` and your current DOM element is an instance of _requiredClass_.

Finally, `getRoot()` will return the `DomFileElement`, which is the root of every DOM tree.

#### Validity

An element becomes invalid if it has been deleted explicitly or due to external PSI changes.
Fixed-number children and attributes are meant to stay valid as long as possible, no matter what happens with XML.
They can become invalid only if they have a collection tree ancestor that has been deleted.

Newly created DOM elements are always correct and valid, so their `isValid()` methods will return `true`.

Element validity is very important, since you cannot invoke any methods on invalid elements (except, of course, `isValid()` itself).

#### DOM Reflection

DOM also has a kind of reflection, called "Generic Info".
One would use it to be able to access children by tag names directly, instead of calling getter methods.
See [`DomGenericInfo`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/reflect/DomGenericInfo.java) interface and `getGenericInfo()` methods in `DomElement` and `DomManager` for more information.
There's also `DomElement.getXmlElementName()` method that returns the name of a corresponding tag or attribute.

#### Presentation

<!-- TODO: using @Presentation -->

`DomElement.getPresentation()` returns an instance of [`ElementPresentation`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/ElementPresentation.java), an interface that knows presentable element type, name, and sometimes even its icon.
Presentations are actually obtained from presentation factory objects that, like `ClassChooser`s, should be registered in [`ElementPresentationManager`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/ElementPresentationManager.java) as early as possible.
You can specify type name and icon for all elements of some class, ways of getting type name, icon and presentable name for particular objects.
When not specified, presentable name is taken from the object itself, if it contains a method annotated with `@NameValue` annotation, that returns `String` or `GenericValue`.
If there's no such method, it will return `null`.
For `DomElement`, there's another way to get this presentable name:
`DomElement.getGenericInfo().getElementName()`.

#### Events

If you want to be notified on every change in the DOM model, add `DomEventListener` to `DomManager`.
DOM supports the following events: tag value changed, element defined/undefined/changed, and collection child added/removed.

#### Highlighting Annotations

The DOM supports error checking and highlighting.
It's based on annotations which you add to the DOM element in a special place (don't confuse these annotations with the ones of Java 5 - they are very different).
You need to implement the [`DomElementAnnotator`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/highlighting/DomElementsAnnotator.java) interface, and override `DomFileDescription.createAnnotator()` method, and create this annotator there.
In `DomElementsAnnotator.annotate(DomElement element, DomElementsProblemsHolder annotator)` you should report about all errors and warnings in the element's subtree to the annotator (`DomElementsProblemsHolder.createProblem()`).
You should return this annotator in the corresponding virtual method of the `DomFileDescription`.

#### Automatic Highlighting (`BasicDomElementsInspection`)

The following errors can be highlighted automatically by providing an instance of `BasicDomElementsInspection`:

- `@Required` element missing or having empty text
- XML value cannot be converted by some `Converter`
- name is not unique while it should be

The latter case requires you to specify the name getter with `@NameValue` annotation.
The checking uses the `DomFileDescription.getIdentityScope()` method to get the element defining the root scope in which the name should be unique.

To suppress spellchecking annotate your DomElement with `@com.intellij.spellchecker.xml.NoSpellchecking`.

#### Required Children

There is a common case in error highlighting, when one needs to say, that some required sub-tag or attribute is missing.
DOM will do this for you automatically, if you annotate the getter for that child with the `@Required` annotation.
For collection children getters, this annotation will mean that the collection should be not empty (corresponding to '+' sign in DTD).
Also, when you create a new element that has required fixed-number or attribute children, their tags or attributes will also be created in XML.

### Resolving

Remember the interface `GenericDomValue<T>` and its sub-interface `GenericAttributeValue<T>`?
Remember, that ANY class may be passed as `T` - for example, let's interpret `GenericDomValue<PsiClass>` as a reference to a class.
Then we can always consider it as a reference to an object of class `T`!
With strings or enums, it is not a very useful idea, but we'll use it in another way.
Very often XML has such a structure that an object is declared at some place, and is referenced at some other place (more precisely, in a tag or attribute value).
So, if you want to create a method like `GenericValue<MyDomElement> getMyDomElementReference()`, then you just have to specify a proper converter that will find an instance in your model of `MyDomElement` with the name specified in the `GenericDomValue`.

That's the core idea.
Since creating such converters is quite boring, we've done it for you.
You don't have to annotate reference getters at all, as the name resolution will be made automatically.
Elements will be searched by name, and the name will be taken from the method annotated with `@NameValue`.
The converter used is [`DomResolveConverter`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/DomResolveConverter.java).
Its constructor takes a parameter, so it can't be referenced in `@Convert` annotation, but its subclasses (if you create them) - can.
If you still want to specify explicitly that your reference to `DomElement` should be resolved "model-wide", use the `@Resolve` annotation parameterized with the desired class.
The resolution scope will be taken from the `DomFileDescription.getResolveScope()`.

In addition to the above, auto-resolving in DOM also provides some features in your XML text editor: error highlighting, completion, Find Usages, Rename Refactoring...
Unresolved references will be highlighted, and even completed.
If you want to create a custom converter and want to have this code insight with it, you should extend not only the [`Converter`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/Converter.java) but [`ResolvingConverter`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/ResolvingConverter.java).
It has one more method `getVariants()`, where you'll have to provide the collection consisting of all targets your reference may resolve to.
Those familiar with [`PsiReference`](%gh-ic%/platform/core-api/src/com/intellij/psi/PsiReference.java) will recognize the similarities here.

If you need to choose a `Converter` depending on other values (e.g. in a sibling/parent element) or any runtime condition (e.g. presence or version of a library), you can use `WrappingConverter`.
See also `GenericDomValueConvertersRegistry` for managing an extensible registry of available Converters to choose from.

### Mock and Stable Elements

Your DOM elements do not have to be tied to a physical file.
`DomManager.createMockElement()` will help you to create a virtual element of a given class with the given module.
An element may be physical or not.
'Physical' here means that DOM will create a mock document for it, so you can enjoy <control>Undo</control> functionality if you pass this document to the right place in the file editor.

`DomElement.copyFrom()` allows you to copy information from one `DomElement` to another.
In fact, it just replaces XML tags, and all the old data is lost.
Nevertheless, the element's fixed-number children don't become invalid.
They only contain new tag values, attribute values, etc.
The tree is actually rather conservative.

The combination of `createMockElement()` and `copyFrom()` is useful for editing element contents in dialogs.
You create a mock copy of an element, work with it in the dialog and then, if the user doesn't cancel, copy the element back to the main model.
Since it's a common case, a special shortcut method has been created in `DomElement`, called `createMockCopy()`.

IntelliJ Platform's XML parser is incremental: changes in a text do not cause the whole file to be reparsed.
But you should keep in mind that this rule may sometimes not work correctly.
For example, your DOM elements can unexpectedly become broken as a result of manual editing of the XML file (even if it didn't happen inside those elements).
If a file editor depends on such a broken element, this can lead to closing the tab, which isn't very nice from the user's point of view.
For example, suppose you have an entity bean named "SomeEntity".
You open an editor for it, then you go into the XML, change the tag name from entity to session, and then back to entity.
Of course, no DOM element can survive after such blasphemy.
But notwithstanding, you still want your editor to stay open!
Well, there is a solution, and it's called `DomManager.createStableValue(Factory factory)`.
This method creates a DOM element that delegates all its functionality to some real element (returned from the factory parameter).
As soon as that real element becomes invalid, the factory is called once more, and if it returns something valid, it becomes the new delegate.
And so on...
In the example with EJB, the factory would once again look for an Entity Bean named "SomeEntity".

Stable DOM elements also implement the `StableElement` interface, which has the following methods:

* `DomElement getWrappedElement()` - just returns the current element to which all method calls are delegated;
* `void invalidate()` - makes the wrapped element invalid. Any following method call will cause the factory to create a new delegate;
* `void revalidate()` - calls the factory, and if it returns something new (i.e. not the same as the current wrapped element) invalidates the old value and adopts the new one.

### Visitor

Visitor is a very common design pattern.
DOM model also has a visitor, and it's called `DomElementVisitor`.
The `DomElement` interface has methods `accept()` and `acceptChildren()` that take this visitor as a parameter.
If you look at the interface `DomElementVisitor` itself, you may be surprised, since it has only one method: `visitDomElement(DomElement)`.
Where is the visitor pattern?
Where are all those methods with names like `visitT(T)` that are usually found in it?
There are no such methods, because the actual interfaces (T's) aren't known to anyone except you.
But when you instantiate the `DomElementVisitor` interface, you may add there these `visitT()` methods, and they will be called!
You may even name them just `visit()`, specify the type of the parameter, and everything will be fine.
For example, if you have two DOM element classes - `Foo` and `Bar` - your visitor may look like this:

```java
class MyVisitor implements DomElementVisitor {
  void visitDomElement(DomElement element) {}
  void visitFoo(Foo foo) {}
  void visitBar(Bar bar) {}
}
```

### Implementation

Sometimes you may want to extend your model with some functionality that isn't directly connected with XML, but relates to your program logic.
And the most appropriate place for this functionality is the DOM element interface.
What to do then?

The simplest case is when you want to add to your interface a method that returns exactly what some other getter in this element (or in one of its children) returns.
You can easily write this helper method and annotate it with the `@PropertyAccessor` annotation, in which you should specify the path consisting of property names (getter names without the "get" or "is" prefixes).
For example, you can write:

```java
GenericDomValue<String> getVeryLongName();

@PropertyAccessor("very-long-name")
GenericDomValue<String> getName();
```

In this case, the second method will return just the same as the first one.
If there were "foo.bar.name" instead of "very-long-name" in the annotation, the system would actually call `getFoo().getBar().getName()` and return the result to you.
Such annotations are useful when you're extending some interface that is inconsistent with your model, or you try to extract a common super-interface from two model interfaces with differently named children that have the same sense (see `<ejb-ref>` and `<ejb-local-ref>`).

The case just described is simple, but rare.
More often, you really have to incorporate some logic into your model.
Then nothing except Java code helps you.
And it will.
Add the desired methods to your interface, then create an abstract class implementing the interface, and implement there only methods that you added manually and that are not directly connected to your XML model.
Note that the class should have a constructor with no arguments.

Now you only have to let DOM know that you wish to use this implementation every time you're creating a model element that should implement the necessary interface.
Simply register it using `com.intellij.dom.implementation` extension point and DOM will generate at run-time the class that not only implements the needed interface, but also extends your abstract class.

### Models Across Multiple Files

Many frameworks require a set of XML configuration files ("fileset") to work as one model, so resolving/navigation works across all related DOM files.
Depending on implementation/plugin, providing filesets implicitly (using existing framework's setup in a project) or via user configuration (usually via dedicated `Facet`) can be achieved.

Extend [`DomModelFactory`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/model/impl/DomModelFactory.java) (or [`BaseDomModelFactory`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/model/impl/BaseDomModelFactory.java) for non-`Module` scope) and provide implementation of your `DomModel`.
Usually you will want to add searcher/utility methods to work with your `DomModel` implementation.

### DOM Stubs

> Please use it sparingly and only for heavily accessed parts in your DOM model, as it increases disk space usage/indexing run time.
>
{style="note"}

DOM elements can be stubbed, so (costly) access to XML/PSI is not necessary (see [Indexing and PSI Stubs](indexing_and_psi_stubs.md) for similar feature for custom languages).
Performance relevant elements, tag or attribute getters can simply be annotated with `@com.intellij.util.xml.Stubbed`.
Set and increase `stubVersion` of `com.intellij.dom.fileMetaData` extension whenever you change `@Stubbed` annotations usage in your DOM hierarchy to trigger proper rebuilding of Stubs during indexing.

## Building a DOM-Based GUI {collapsible="true"}
<primary-label ref="Deprecated"/>

> This API is unmaintained and will likely be removed in future versions.
>
{style="warning"}

### Forms

All forms that deal with DOM are organized in a special way.
They support two main things: getting data from XML into the UI, and saving UI data to XML.
The former is called resetting, the latter - committing.
There's [`Committable`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/ui/Committable.java) interface that has corresponding methods: `commit()` and `reset()`.
There's also a way of structuring your forms into smaller parts, namely the Composite pattern: [`CompositeCommittable`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/ui/CompositeCommittable.java).
Methods `commit()` and `reset()` are invoked automatically on editor tab switch or undo.
So you only need to ensure that all your Swing structure is organized in a tree of `CompositeCommittable`, and all the hard work will be done by the IDE.

DOM controls are special descendants of `Committable`.
All of them implement `DomUIControl`.
Note that they are not Swing components - they are only a way of connecting DOM model and Swing components.
One end of the connection - the DOM element - is usually specified in the control's constructor.
The other end - Swing component - can be obtained in 2 ways.
The first is to ask DOM control to create it.
But that is rather inconvenient if you want to create the forms in, say, IntelliJ IDEA's GUI Designer.
In that case, you'll need the second way: ask the control to `bind()` to an existing Swing component of a correct type (that depends on the type of value that you're editing).
After that, your Swing components will be synchronized with DOM.
They'll even highlight errors reported by `DomElementsAnnotator`.

Sometimes you may need to do some work (enable or disable some components, change their values) after a particular DOM control is committed.
Then you should define the `addCommitListener()` method of that DOM control and override the `CommitListener.afterCommit()` method.
This method will be invoked inside the same write action as the main `commit()`, so any changes you do in this method to the XML will be merged with the `commit()` in the Undo queue.

### Simple Controls

With simple controls, you can edit `GenericDomValue`: simple text, class names, enums and boolean values.
These controls take a special object as a constructor parameter.
This object should implement the `DomWrapper` interface that knows how to set/get values to/from a DOM model.

We have three major DomWrapper's: [`DomFixedWrapper<T>`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/ui/DomFixedWrapper.java) redirecting calls to
[`GenericDomValue<T>`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/GenericDomValue.java),
[`DomStringWrapper`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/ui/DomStringWrapper.java)
redirecting calls to string accessors of
[`GenericDomValue`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/GenericDomValue.java),
and [`DomCollectionWrapper`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/ui/DomCollectionWrapper.java)
that gets/sets values of the first element of the given [`GenericDomValue`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/GenericDomValue.java) collection.
Some controls (those having a text field as part of itself) take an additional boolean constructor parameter - _commitOnEveryChange_, whose meaning is evident from the name.
We don't recommend using it anywhere except small dialogs, because committing on every change slows down the system significantly.

Most often these controls are created by `DomUIFactory.createControl(GenericDomValue)`.
This method understands which control to create by using DOM reflection (`DomGenericInfo`, as you probably remember).
But sometimes you may want to create the controls directly.
So let's look at the simple controls more closely.

##### `BooleanControl`

It allows you to edit boolean values.
The control is bound to `JCheckBox`.

![BooleanControl](booleancontrol.gif)

##### `ComboControl`

The control is bound to a non-editable `JComboBox`, so it can be used to choose something from a limited set.
One case of such a limited set is enum.
Or it can be a constructor where you can provide a `Factory<List<String>>`, and return from this factory anything you want (for example, a list of database names to choose from).
By default, the wrong values (written in XML, but not present in the list you've given to the control) are displayed in red.
Since it's common practice to specify custom `CellRenderer` for combo boxes, the control has the `isValidValue(String)` method.
If it returns `false` on the value you're rendering, you can highlight it in some way, to achieve the same result as the default renderer.
Or you can just delegate to that renderer in your own way.

![ComboControl](combocontrol.gif)

##### `BooleanEnumControl`

Sometimes, when there are only 2 alternatives, it's convenient to use a checkbox instead of a combobox.
This control is designed specially for such cases.
While being (and being bound to) a checkbox, the control edits not just "true" or "false", but any two String values, or two enum elements.
In the last case, it has a boolean _invertedOrder_ parameter, to specify which element corresponds to the checked state.
By default, _invertedOrder_ is set to `false`, so the first element corresponds to the unchecked state, and the second - to the checked one.
If you set the parameter to `true`, the states will swap.

### Editor-Based Controls

Please note that editor-based controls are built on IntelliJ Platform's `Editor` instead of standard `JTextField`.
Since there's currently no way to instantiate Editor directly through the Open API, controls are bound to special `JPanel` inheritors, and their `bind()` method adds the necessary content to those panels.

##### `TextControl`

This control allows you to edit simple string values.
The control is bound to a `TextPanel` component.
There's also an inheritor of that panel - `MultiLineTextPanel`.
If you bind a `StringControl` to it, a big editor will appear on the screen.
In case you don't have space for a big editor, bind it to a `BigTextPanel`.
Then it will be filled with a text editor, and the browse button will be added to open a dialog with the big editor where you can type a longer string.

##### `PsiClassControl`

This is a one-line editor with a browse button that opens the standard class selection dialog.
The control accepts class names only.
It is bound to `PsiClassPanel`.

![PsiClassControl](psiclasscontrol.gif)

##### `PsiTypeControl`

This is almost the same as PsiClassControl, but allows entering not only class names, but also Java primitive types and even arrays.
It is bound to `PsiTypePanel`.

### Collection Control

There is a special table component where each row represents one collection child.
It's called `DomCollectionControl<T>`, where `T` is your collection element type.
To function properly, it needs `DomElement` (parent of the collection), some description of the collection (sub-tag name or a `DomCollectionChildDescription` from DOM reflection), and a `ColumnInfo` array.
This can be passed to the constructor, or can be created in a `DomCollectionControl` inheritor, in an overridden method `createColumnInfos()`.

What is a column info?
It's just a somewhat more comfortable way to work with the table model.
It uses Java 5 generics and is more object-oriented.
So, it's named `ColumnInfo<Item,Aspect>`, where `Item` is a type variable corresponding to the type of elements in the collection, and `Aspect` is a type variable corresponding to this particular column information type: `String`, `PsiClass`, `Boolean`, etc.
The basic things that a column knows are: column name, column class, reading value (Aspect `valueOf(Item)`), writing value (`setValue(Item item, Aspect aspect)`), cell renderer (`getRenderer(Item)`), cell "editability" (`isCellEditable(Item)`), cell editor (`getEditor(Item)`), etc.

There are a lot of predefined column infos, so you'll probably never create a new one.

First, if a collection child is a `GenericDomValue`, it's usually convenient to edit it directly in the table.
For this, you may need one of the following classes: `StringColumnInfo`, `BooleanColumnInfo`, or more generic `GenericValueColumnInfo`.
But such collections are encountered very rarely.

A more common case is when a collection element is more complex and has several `GenericDomValue` children.
Then one may create a column for each of those children.
The appropriate column info is `ChildGenericValueColumnInfo<T>`.
It will ask you for a `DomFixedChildDescription` (one more thing from DOM reflection), a renderer and an editor - nothing else.
So, the main things left to customize are the renderer and the editor.

As for the renderer, there are two main choices: `DefaultTableCellRenderer`, and IntelliJ Platform's `BooleanTableCellRenderer`.
Editors are more complicated, but they closely resemble simple DOM controls.

`BooleanTableCellEditor`, `DefaultCellEditor(JTextField)`, `ComboTableCellEditor`, etc.
`DomUIFactory.createCellEditor()` will create any of them automatically (including the editor for `PsiClass`), so that you won't need to think about which one to select every time.

Collection control is a complex control, so it's bound to a complex Swing component.
It's called [`DomTableView`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/ui/DomTableView.java).
It has a toolbar (you can override `DomTableView.getToolbarPosition()` to customize its location), with Add and Delete buttons.
If you want, you may specify custom addition actions in `DomCollectionControl.createAdditionActions()` (it's recommended to extend `ControlAddAction`).
If there is only one addition action, it will be invoked after pressing the Add button; if there are many, then a popup menu will be displayed.
To change the removal policy, override the `DomCollectionControl.doRemove(List<T>)` method.

The toolbar may also have an Edit button, if you specify that `DomCollectionControl.isEditable()`.
To add a behavior to this button, override `DomCollectionControl.doEdit(T)`.
There can also be a Help button, if you pass a non-null String _helpId_ parameter while constructing your `DomTableView`.

If there are no items in the collection, `DomTableView` may display a special text (`DomTableView.getEmptyPaneText()`), instead of an empty table.

You can add your own popup menu to the control.
Call the `DomTableView.installPopup()` method after construction, and pass a `DefaultActionGroup` with your popup actions.

Tables can have single or multiple (default) row selection.
If you want to change this behavior, override `DomTableView.allowMultipleRowsSelection()`.

![CollectionControl](collectioncontrol.gif)

### UI Organization

The easiest way to create a DOM-based UI form is to extend the
[`BasicDomElementComponent`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/ui/BasicDomElementComponent.java) class.
This will require you to pass some DOM element to the constructor.
Then you bind an IntelliJ IDEA GUI Designer form to your subclass and design a beautiful form there.
You will surely want to bind some controls to DOM UI, in which case you should of course ensure that they have the right types.
Finally, you should create some DOM controls in class' constructor and bind them.
But you can create controls and bind them to the `DomElement`'s children - `GenericDomValue`'s automatically.

Just name your components properly and call the `bindProperties()` method in the constructor.
The field names should correspond to the getter names for the element's children.
They may also be prefixed with "my".
Imagine that you have such DOM interface:

```java
public interface Converter extends DomElement {
  GenericDomValue<String> getConverterId();
  GenericDomValue<PsiClass> getConverterClass();
}
```

In this case, the UI form class can look like this:

```java
public class ConverterComponent extends BasicDomElementComponent<Converter> {
  private JPanel myRootPane;
  private TextPanel myConverterId;
  private PsiClassPanel myConverterClass;

  public ConverterComponent(Converter domElement) {
    super(domElement);
    bindProperties();
  }
}
```

All the fields here are now bound to the controls in the GUI form.

Very often, you'll have to create your own file editor.
Then, to use all the binding and undo functionality, it's suggested to inherit your
[`FileEditorProvider`](%gh-ic%/platform/analysis-api/src/com/intellij/openapi/fileEditor/FileEditorProvider.java)
from
[`PerspectiveFileEditorProvider`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/ui/PerspectiveFileEditorProvider.java), create an instance of
[`DomFileEditor`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/ui/DomFileEditor.java)
there, and pass a
[`BasicDomElementComponent`](%gh-ic%/xml/dom-openapi/src/com/intellij/util/xml/ui/BasicDomElementComponent.java).
To easily create an editor with a caption at the top, like in our EJB and JSF, you may use the static method `DomFileEditor.createDomFileEditor()`.
`DomFileEditor` automatically listens to all changes in the document corresponding to the given DOM element, and therefore refreshes your component on undo.
If you want to listen to changes in additional documents, use the methods `addWatchedDocument()`, `removeWatchedDocument()`, `addWatchedElement()`, `removeWatchedElement()` in `DomFileEditor`.

## Sample Plugins

The following bundled open-source plugins make (heavy) use of DOM:

- [Android](https://github.com/JetBrains/android)
- [Ant](%gh-ic%/plugins/ant)
- [Plugin DevKit](%gh-ic%/plugins/devkit/devkit-core)
- [Maven](%gh-ic%/plugins/maven)

Explore 3rd party plugins using DOM on [IntelliJ Platform Explorer](https://jb.gg/ipe?extensions=com.intellij.dom.fileMetaData).
